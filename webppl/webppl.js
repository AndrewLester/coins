(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){},{}],2:[function(require,module,exports){module.exports=function(arr,fn,self){if(arr.filter)return arr.filter(fn,self);if(void 0===arr||null===arr)throw new TypeError;if("function"!=typeof fn)throw new TypeError;var ret=[];for(var i=0;i<arr.length;i++){if(!hasOwn.call(arr,i))continue;var val=arr[i];if(fn.call(self,val,i,arr))ret.push(val)}return ret};var hasOwn=Object.prototype.hasOwnProperty},{}],3:[function(require,module,exports){(function(global){(function(){"use strict";var objectAssign=require("object-assign");function compare(a,b){if(a===b){return 0}var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y){return-1}if(y<x){return 1}return 0}function isBuffer(b){if(global.Buffer&&typeof global.Buffer.isBuffer==="function"){return global.Buffer.isBuffer(b)}return!!(b!=null&&b._isBuffer)}var util=require("util/");var hasOwn=Object.prototype.hasOwnProperty;var pSlice=Array.prototype.slice;var functionsHaveNames=function(){return function foo(){}.name==="foo"}();function pToString(obj){return Object.prototype.toString.call(obj)}function isView(arrbuf){if(isBuffer(arrbuf)){return false}if(typeof global.ArrayBuffer!=="function"){return false}if(typeof ArrayBuffer.isView==="function"){return ArrayBuffer.isView(arrbuf)}if(!arrbuf){return false}if(arrbuf instanceof DataView){return true}if(arrbuf.buffer&&arrbuf.buffer instanceof ArrayBuffer){return true}return false}var assert=module.exports=ok;var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(func){if(!util.isFunction(func)){return}if(functionsHaveNames){return func.name}var str=func.toString();var match=str.match(regex);return match&&match[1]}assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false}else{this.message=getMessage(this);this.generatedMessage=true}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=getName(stackStartFunction);var idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}};util.inherits(assert.AssertionError,Error);function truncate(s,n){if(typeof s==="string"){return s.length<n?s:s.slice(0,n)}else{return s}}function inspect(something){if(functionsHaveNames||!util.isFunction(something)){return util.inspect(something)}var rawname=getName(something);var name=rawname?": "+rawname:"";return"[Function"+name+"]"}function getMessage(self){return truncate(inspect(self.actual),128)+" "+self.operator+" "+truncate(inspect(self.expected),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected,false)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};assert.deepStrictEqual=function deepStrictEqual(actual,expected,message){if(!_deepEqual(actual,expected,true)){fail(actual,expected,message,"deepStrictEqual",assert.deepStrictEqual)}};function _deepEqual(actual,expected,strict,memos){if(actual===expected){return true}else if(isBuffer(actual)&&isBuffer(expected)){return compare(actual,expected)===0}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime()}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase}else if((actual===null||typeof actual!=="object")&&(expected===null||typeof expected!=="object")){return strict?actual===expected:actual==expected}else if(isView(actual)&&isView(expected)&&pToString(actual)===pToString(expected)&&!(actual instanceof Float32Array||actual instanceof Float64Array)){return compare(new Uint8Array(actual.buffer),new Uint8Array(expected.buffer))===0}else if(isBuffer(actual)!==isBuffer(expected)){return false}else{memos=memos||{actual:[],expected:[]};var actualIndex=memos.actual.indexOf(actual);if(actualIndex!==-1){if(actualIndex===memos.expected.indexOf(expected)){return true}}memos.actual.push(actual);memos.expected.push(expected);return objEquiv(actual,expected,strict,memos)}}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b,strict,actualVisitedObjects){if(a===null||a===undefined||b===null||b===undefined)return false;if(util.isPrimitive(a)||util.isPrimitive(b))return a===b;if(strict&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return false;var aIsArgs=isArguments(a);var bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b,strict)}var ka=objectKeys(a);var kb=objectKeys(b);var key,i;if(ka.length!==kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!==kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key],strict,actualVisitedObjects))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected,false)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.notDeepStrictEqual=notDeepStrictEqual;function notDeepStrictEqual(actual,expected,message){if(_deepEqual(actual,expected,true)){fail(actual,expected,message,"notDeepStrictEqual",notDeepStrictEqual)}}assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(Object.prototype.toString.call(expected)=="[object RegExp]"){return expected.test(actual)}try{if(actual instanceof expected){return true}}catch(e){}if(Error.isPrototypeOf(expected)){return false}return expected.call({},actual)===true}function _tryBlock(block){var error;try{block()}catch(e){error=e}return error}function _throws(shouldThrow,block,expected,message){var actual;if(typeof block!=="function"){throw new TypeError('"block" argument must be a function')}if(typeof expected==="string"){message=expected;expected=null}actual=_tryBlock(block);message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail(actual,expected,"Missing expected exception"+message)}var userProvidedMessage=typeof message==="string";var isUnwantedException=!shouldThrow&&util.isError(actual);var isUnexpectedException=!shouldThrow&&actual&&!expected;if(isUnwantedException&&userProvidedMessage&&expectedException(actual,expected)||isUnexpectedException){fail(actual,expected,"Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws(true,block,error,message)};assert.doesNotThrow=function(block,error,message){_throws(false,block,error,message)};assert.ifError=function(err){if(err)throw err};function strict(value,message){if(!value)fail(value,true,message,"==",strict)}assert.strict=objectAssign(strict,assert,{equal:assert.strictEqual,deepEqual:assert.deepStrictEqual,notEqual:assert.notStrictEqual,notDeepEqual:assert.notDeepStrictEqual});assert.strict.strict=assert.strict;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key)}return keys}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"object-assign":23,"util/":6}],4:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],5:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],6:[function(require,module,exports){(function(process,global){(function(){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"\x1b["+inspect.colors[style][0]+"m"+str+"\x1b["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":5,_process:25,inherits:4}],7:[function(require,module,exports){(function(global){(function(){"use strict";var filter=require("array-filter");module.exports=function availableTypedArrays(){return filter(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(typedArray){return typeof global[typedArray]==="function"})}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"array-filter":2}],8:[function(require,module,exports){arguments[4][1][0].apply(exports,arguments)},{dup:1}],9:[function(require,module,exports){"use strict";var GetIntrinsic=require("get-intrinsic");var callBind=require("./");var $indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);if(typeof intrinsic==="function"&&$indexOf(name,".prototype.")>-1){return callBind(intrinsic)}return intrinsic}},{"./":10,"get-intrinsic":15}],10:[function(require,module,exports){"use strict";var bind=require("function-bind");var GetIntrinsic=require("get-intrinsic");var $apply=GetIntrinsic("%Function.prototype.apply%");var $call=GetIntrinsic("%Function.prototype.call%");var $reflectApply=GetIntrinsic("%Reflect.apply%",true)||bind.call($call,$apply);var $gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",true);var $defineProperty=GetIntrinsic("%Object.defineProperty%",true);var $max=GetIntrinsic("%Math.max%");if($defineProperty){try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}}module.exports=function callBind(originalFunction){var func=$reflectApply(bind,$call,arguments);if($gOPD&&$defineProperty){var desc=$gOPD(func,"length");if(desc.configurable){$defineProperty(func,"length",{value:1+$max(0,originalFunction.length-(arguments.length-1))})}}return func};var applyBind=function applyBind(){return $reflectApply(bind,$apply,arguments)};if($defineProperty){$defineProperty(module.exports,"apply",{value:applyBind})}else{module.exports.apply=applyBind}},{"function-bind":14,"get-intrinsic":15}],11:[function(require,module,exports){"use strict";var GetIntrinsic=require("get-intrinsic");var $gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%");if($gOPD){try{$gOPD([],"length")}catch(e){$gOPD=null}}module.exports=$gOPD},{"get-intrinsic":15}],12:[function(require,module,exports){var hasOwn=Object.prototype.hasOwnProperty;var toString=Object.prototype.toString;module.exports=function forEach(obj,fn,ctx){if(toString.call(fn)!=="[object Function]"){throw new TypeError("iterator must be a function")}var l=obj.length;if(l===+l){for(var i=0;i<l;i++){fn.call(ctx,obj[i],i,obj)}}else{for(var k in obj){if(hasOwn.call(obj,k)){fn.call(ctx,obj[k],k,obj)}}}}},{}],13:[function(require,module,exports){"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ";var slice=Array.prototype.slice;var toStr=Object.prototype.toString;var funcType="[object Function]";module.exports=function bind(that){var target=this;if(typeof target!=="function"||toStr.call(target)!==funcType){throw new TypeError(ERROR_MESSAGE+target)}var args=slice.call(arguments,1);var bound;var binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));if(Object(result)===result){return result}return this}else{return target.apply(that,args.concat(slice.call(arguments)))}};var boundLength=Math.max(0,target.length-args.length);var boundArgs=[];for(var i=0;i<boundLength;i++){boundArgs.push("$"+i)}bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder);if(target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype;bound.prototype=new Empty;Empty.prototype=null}return bound}},{}],14:[function(require,module,exports){"use strict";var implementation=require("./implementation");module.exports=Function.prototype.bind||implementation},{"./implementation":13}],15:[function(require,module,exports){"use strict";var undefined;var $SyntaxError=SyntaxError;var $Function=Function;var $TypeError=TypeError;var getEvalledConstructor=function(expressionSyntax){try{return $Function('"use strict"; return ('+expressionSyntax+").constructor;")()}catch(e){}};var $gOPD=Object.getOwnPropertyDescriptor;if($gOPD){try{$gOPD({},"")}catch(e){$gOPD=null}}var throwTypeError=function(){throw new $TypeError};var ThrowTypeError=$gOPD?function(){try{arguments.callee;return throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError;var hasSymbols=require("has-symbols")();var getProto=Object.getPrototypeOf||function(x){return x.__proto__};var needsEval={};var TypedArray=typeof Uint8Array==="undefined"?undefined:getProto(Uint8Array);var INTRINSICS={"%AggregateError%":typeof AggregateError==="undefined"?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics==="undefined"?undefined:Atomics,"%BigInt%":typeof BigInt==="undefined"?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?undefined:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?undefined:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?undefined:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array==="undefined"?undefined:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?undefined:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":typeof JSON==="object"?JSON:undefined,"%Map%":typeof Map==="undefined"?undefined:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!hasSymbols?undefined:getProto((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?undefined:Promise,"%Proxy%":typeof Proxy==="undefined"?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?undefined:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?undefined:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!hasSymbols?undefined:getProto((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined,"%Symbol%":hasSymbols?Symbol:undefined,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":typeof Uint8Array==="undefined"?undefined:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?undefined:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?undefined:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?undefined:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?undefined:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?undefined:WeakSet};var doEval=function doEval(name){var value;if(name==="%AsyncFunction%"){value=getEvalledConstructor("async function () {}")}else if(name==="%GeneratorFunction%"){value=getEvalledConstructor("function* () {}")}else if(name==="%AsyncGeneratorFunction%"){value=getEvalledConstructor("async function* () {}")}else if(name==="%AsyncGenerator%"){var fn=doEval("%AsyncGeneratorFunction%");if(fn){value=fn.prototype}}else if(name==="%AsyncIteratorPrototype%"){var gen=doEval("%AsyncGenerator%");if(gen){value=getProto(gen.prototype)}}INTRINSICS[name]=value;return value};var LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var bind=require("function-bind");var hasOwn=require("has");var $concat=bind.call(Function.call,Array.prototype.concat);var $spliceApply=bind.call(Function.apply,Array.prototype.splice);var $replace=bind.call(Function.call,String.prototype.replace);var $strSlice=bind.call(Function.call,String.prototype.slice);var rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=function stringToPath(string){var first=$strSlice(string,0,1);var last=$strSlice(string,-1);if(first==="%"&&last!=="%"){throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`")}else if(last==="%"&&first!=="%"){throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`")}var result=[];$replace(string,rePropName,function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match});return result};var getBaseIntrinsic=function getBaseIntrinsic(name,allowMissing){var intrinsicName=name;var alias;if(hasOwn(LEGACY_ALIASES,intrinsicName)){alias=LEGACY_ALIASES[intrinsicName];intrinsicName="%"+alias[0]+"%"}if(hasOwn(INTRINSICS,intrinsicName)){var value=INTRINSICS[intrinsicName];if(value===needsEval){value=doEval(intrinsicName)}if(typeof value==="undefined"&&!allowMissing){throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!")}return{alias:alias,name:intrinsicName,value:value}}throw new $SyntaxError("intrinsic "+name+" does not exist!")};module.exports=function GetIntrinsic(name,allowMissing){if(typeof name!=="string"||name.length===0){throw new $TypeError("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof allowMissing!=="boolean"){throw new $TypeError('"allowMissing" argument must be a boolean')}var parts=stringToPath(name);var intrinsicBaseName=parts.length>0?parts[0]:"";var intrinsic=getBaseIntrinsic("%"+intrinsicBaseName+"%",allowMissing);var intrinsicRealName=intrinsic.name;var value=intrinsic.value;var skipFurtherCaching=false;var alias=intrinsic.alias;if(alias){intrinsicBaseName=alias[0];$spliceApply(parts,$concat([0,1],alias))}for(var i=1,isOwn=true;i<parts.length;i+=1){var part=parts[i];var first=$strSlice(part,0,1);var last=$strSlice(part,-1);if((first==='"'||first==="'"||first==="`"||(last==='"'||last==="'"||last==="`"))&&first!==last){throw new $SyntaxError("property names with quotes must have matching quotes")}if(part==="constructor"||!isOwn){skipFurtherCaching=true}intrinsicBaseName+="."+part;intrinsicRealName="%"+intrinsicBaseName+"%";if(hasOwn(INTRINSICS,intrinsicRealName)){value=INTRINSICS[intrinsicRealName]}else if(value!=null){if(!(part in value)){if(!allowMissing){throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.")}return void undefined}if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,part);isOwn=!!desc;if(isOwn&&"get"in desc&&!("originalValue"in desc.get)){value=desc.get}else{value=value[part]}}else{isOwn=hasOwn(value,part);value=value[part]}if(isOwn&&!skipFurtherCaching){INTRINSICS[intrinsicRealName]=value}}}return value}},{"function-bind":14,has:18,"has-symbols":16}],16:[function(require,module,exports){"use strict";var origSymbol=typeof Symbol!=="undefined"&&Symbol;var hasSymbolSham=require("./shams");module.exports=function hasNativeSymbols(){if(typeof origSymbol!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof origSymbol("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return hasSymbolSham()}},{"./shams":17}],17:[function(require,module,exports){"use strict";module.exports=function hasSymbols(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var obj={};var sym=Symbol("test");var symObj=Object(sym);if(typeof sym==="string"){return false}if(Object.prototype.toString.call(sym)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(symObj)!=="[object Symbol]"){return false}var symVal=42;obj[sym]=symVal;for(sym in obj){return false}if(typeof Object.keys==="function"&&Object.keys(obj).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(obj).length!==0){return false}var syms=Object.getOwnPropertySymbols(obj);if(syms.length!==1||syms[0]!==sym){return false}if(!Object.prototype.propertyIsEnumerable.call(obj,sym)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(descriptor.value!==symVal||descriptor.enumerable!==true){return false}}return true}},{}],18:[function(require,module,exports){"use strict";var bind=require("function-bind");module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":14}],19:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}}else{module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}}},{}],20:[function(require,module,exports){"use strict";var hasToStringTag=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var callBound=require("call-bind/callBound");var $toString=callBound("Object.prototype.toString");var isStandardArguments=function isArguments(value){if(hasToStringTag&&value&&typeof value==="object"&&Symbol.toStringTag in value){return false}return $toString(value)==="[object Arguments]"};var isLegacyArguments=function isArguments(value){if(isStandardArguments(value)){return true}return value!==null&&typeof value==="object"&&typeof value.length==="number"&&value.length>=0&&$toString(value)!=="[object Array]"&&$toString(value.callee)==="[object Function]"};var supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;module.exports=supportsStandardArguments?isStandardArguments:isLegacyArguments},{"call-bind/callBound":9}],21:[function(require,module,exports){"use strict";var toStr=Object.prototype.toString;var fnToStr=Function.prototype.toString;var isFnRegex=/^\s*(?:function)?\*/;var hasToStringTag=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var getProto=Object.getPrototypeOf;var getGeneratorFunc=function(){if(!hasToStringTag){return false}try{return Function("return function*() {}")()}catch(e){}};var generatorFunc=getGeneratorFunc();var GeneratorFunction=getProto&&generatorFunc?getProto(generatorFunc):false;module.exports=function isGeneratorFunction(fn){if(typeof fn!=="function"){return false}if(isFnRegex.test(fnToStr.call(fn))){return true}if(!hasToStringTag){var str=toStr.call(fn);return str==="[object GeneratorFunction]"}return getProto&&getProto(fn)===GeneratorFunction}},{}],22:[function(require,module,exports){(function(global){(function(){"use strict";var forEach=require("foreach");var availableTypedArrays=require("available-typed-arrays");var callBound=require("call-bind/callBound");var $toString=callBound("Object.prototype.toString");var hasSymbols=require("has-symbols")();var hasToStringTag=hasSymbols&&typeof Symbol.toStringTag==="symbol";var typedArrays=availableTypedArrays();var $indexOf=callBound("Array.prototype.indexOf",true)||function indexOf(array,value){for(var i=0;i<array.length;i+=1){if(array[i]===value){return i}}return-1};var $slice=callBound("String.prototype.slice");var toStrTags={};var gOPD=require("es-abstract/helpers/getOwnPropertyDescriptor");var getPrototypeOf=Object.getPrototypeOf;if(hasToStringTag&&gOPD&&getPrototypeOf){forEach(typedArrays,function(typedArray){var arr=new global[typedArray];if(!(Symbol.toStringTag in arr)){throw new EvalError("this engine has support for Symbol.toStringTag, but "+typedArray+" does not have the property! Please report this.")}var proto=getPrototypeOf(arr);var descriptor=gOPD(proto,Symbol.toStringTag);if(!descriptor){var superProto=getPrototypeOf(proto);descriptor=gOPD(superProto,Symbol.toStringTag)}toStrTags[typedArray]=descriptor.get})}var tryTypedArrays=function tryAllTypedArrays(value){var anyTrue=false;forEach(toStrTags,function(getter,typedArray){if(!anyTrue){try{anyTrue=getter.call(value)===typedArray}catch(e){}}});return anyTrue};module.exports=function isTypedArray(value){if(!value||typeof value!=="object"){return false}if(!hasToStringTag){var tag=$slice($toString(value),8,-1);return $indexOf(typedArrays,tag)>-1}if(!gOPD){return false}return tryTypedArrays(value)}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"available-typed-arrays":7,"call-bind/callBound":9,"es-abstract/helpers/getOwnPropertyDescriptor":11,foreach:12,"has-symbols":16}],23:[function(require,module,exports){"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols;var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}function shouldUseNative(){try{if(!Object.assign){return false}var test1=new String("abc");test1[5]="de";if(Object.getOwnPropertyNames(test1)[0]==="5"){return false}var test2={};for(var i=0;i<10;i++){test2["_"+String.fromCharCode(i)]=i}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if(order2.join("")!=="0123456789"){return false}var test3={};"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter});if(Object.keys(Object.assign({},test3)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(err){return false}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]]}}}}return to}},{}],24:[function(require,module,exports){(function(process){(function(){"use strict";function assertPath(path){if(typeof path!=="string"){throw new TypeError("Path must be a string. Received "+JSON.stringify(path))}}function normalizeStringPosix(path,allowAboveRoot){var res="";var lastSegmentLength=0;var lastSlash=-1;var dots=0;var code;for(var i=0;i<=path.length;++i){if(i<path.length)code=path.charCodeAt(i);else if(code===47)break;else code=47;if(code===47){if(lastSlash===i-1||dots===1){}else if(lastSlash!==i-1&&dots===2){if(res.length<2||lastSegmentLength!==2||res.charCodeAt(res.length-1)!==46||res.charCodeAt(res.length-2)!==46){if(res.length>2){var lastSlashIndex=res.lastIndexOf("/");if(lastSlashIndex!==res.length-1){if(lastSlashIndex===-1){res="";lastSegmentLength=0}else{res=res.slice(0,lastSlashIndex);lastSegmentLength=res.length-1-res.lastIndexOf("/")}lastSlash=i;dots=0;continue}}else if(res.length===2||res.length===1){res="";lastSegmentLength=0;lastSlash=i;dots=0;continue}}if(allowAboveRoot){if(res.length>0)res+="/..";else res="..";lastSegmentLength=2}}else{if(res.length>0)res+="/"+path.slice(lastSlash+1,i);else res=path.slice(lastSlash+1,i);lastSegmentLength=i-lastSlash-1}lastSlash=i;dots=0}else if(code===46&&dots!==-1){++dots}else{dots=-1}}return res}function _format(sep,pathObject){var dir=pathObject.dir||pathObject.root;var base=pathObject.base||(pathObject.name||"")+(pathObject.ext||"");if(!dir){return base}if(dir===pathObject.root){return dir+base}return dir+sep+base}var posix={resolve:function resolve(){var resolvedPath="";var resolvedAbsolute=false;var cwd;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path;if(i>=0)path=arguments[i];else{if(cwd===undefined)cwd=process.cwd();path=cwd}assertPath(path);if(path.length===0){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charCodeAt(0)===47}resolvedPath=normalizeStringPosix(resolvedPath,!resolvedAbsolute);if(resolvedAbsolute){if(resolvedPath.length>0)return"/"+resolvedPath;else return"/"}else if(resolvedPath.length>0){return resolvedPath}else{return"."}},normalize:function normalize(path){assertPath(path);if(path.length===0)return".";var isAbsolute=path.charCodeAt(0)===47;var trailingSeparator=path.charCodeAt(path.length-1)===47;path=normalizeStringPosix(path,!isAbsolute);if(path.length===0&&!isAbsolute)path=".";if(path.length>0&&trailingSeparator)path+="/";if(isAbsolute)return"/"+path;return path},isAbsolute:function isAbsolute(path){assertPath(path);return path.length>0&&path.charCodeAt(0)===47},join:function join(){if(arguments.length===0)return".";var joined;for(var i=0;i<arguments.length;++i){var arg=arguments[i];assertPath(arg);if(arg.length>0){if(joined===undefined)joined=arg;else joined+="/"+arg}}if(joined===undefined)return".";return posix.normalize(joined)},relative:function relative(from,to){assertPath(from);assertPath(to);if(from===to)return"";from=posix.resolve(from);to=posix.resolve(to);if(from===to)return"";var fromStart=1;for(;fromStart<from.length;++fromStart){if(from.charCodeAt(fromStart)!==47)break}var fromEnd=from.length;var fromLen=fromEnd-fromStart;var toStart=1;for(;toStart<to.length;++toStart){if(to.charCodeAt(toStart)!==47)break}var toEnd=to.length;var toLen=toEnd-toStart;var length=fromLen<toLen?fromLen:toLen;var lastCommonSep=-1;var i=0;for(;i<=length;++i){if(i===length){if(toLen>length){if(to.charCodeAt(toStart+i)===47){return to.slice(toStart+i+1)}else if(i===0){return to.slice(toStart+i)}}else if(fromLen>length){if(from.charCodeAt(fromStart+i)===47){lastCommonSep=i}else if(i===0){lastCommonSep=0}}break}var fromCode=from.charCodeAt(fromStart+i);var toCode=to.charCodeAt(toStart+i);if(fromCode!==toCode)break;else if(fromCode===47)lastCommonSep=i}var out="";for(i=fromStart+lastCommonSep+1;i<=fromEnd;++i){if(i===fromEnd||from.charCodeAt(i)===47){if(out.length===0)out+="..";else out+="/.."}}if(out.length>0)return out+to.slice(toStart+lastCommonSep);else{toStart+=lastCommonSep;if(to.charCodeAt(toStart)===47)++toStart;return to.slice(toStart)}},_makeLong:function _makeLong(path){return path},dirname:function dirname(path){assertPath(path);if(path.length===0)return".";var code=path.charCodeAt(0);var hasRoot=code===47;var end=-1;var matchedSlash=true;for(var i=path.length-1;i>=1;--i){code=path.charCodeAt(i);if(code===47){if(!matchedSlash){end=i;break}}else{matchedSlash=false}}if(end===-1)return hasRoot?"/":".";if(hasRoot&&end===1)return"//";return path.slice(0,end)},basename:function basename(path,ext){if(ext!==undefined&&typeof ext!=="string")throw new TypeError('"ext" argument must be a string');assertPath(path);var start=0;var end=-1;var matchedSlash=true;var i;if(ext!==undefined&&ext.length>0&&ext.length<=path.length){if(ext.length===path.length&&ext===path)return"";var extIdx=ext.length-1;var firstNonSlashEnd=-1;for(i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(code===47){if(!matchedSlash){start=i+1;break}}else{if(firstNonSlashEnd===-1){matchedSlash=false;firstNonSlashEnd=i+1}if(extIdx>=0){if(code===ext.charCodeAt(extIdx)){if(--extIdx===-1){end=i}}else{extIdx=-1;end=firstNonSlashEnd}}}}if(start===end)end=firstNonSlashEnd;else if(end===-1)end=path.length;return path.slice(start,end)}else{for(i=path.length-1;i>=0;--i){if(path.charCodeAt(i)===47){if(!matchedSlash){start=i+1;break}}else if(end===-1){matchedSlash=false;end=i+1}}if(end===-1)return"";return path.slice(start,end)}},extname:function extname(path){assertPath(path);var startDot=-1;var startPart=0;var end=-1;var matchedSlash=true;var preDotState=0;for(var i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(code===47){if(!matchedSlash){startPart=i+1;break}continue}if(end===-1){matchedSlash=false;end=i+1}if(code===46){if(startDot===-1)startDot=i;else if(preDotState!==1)preDotState=1}else if(startDot!==-1){preDotState=-1}}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1){return""}return path.slice(startDot,end)},format:function format(pathObject){if(pathObject===null||typeof pathObject!=="object"){throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof pathObject)}return _format("/",pathObject)},parse:function parse(path){assertPath(path);var ret={root:"",dir:"",base:"",ext:"",name:""};if(path.length===0)return ret;var code=path.charCodeAt(0);var isAbsolute=code===47;var start;if(isAbsolute){ret.root="/";start=1}else{start=0}var startDot=-1;var startPart=0;var end=-1;var matchedSlash=true;var i=path.length-1;var preDotState=0;for(;i>=start;--i){code=path.charCodeAt(i);if(code===47){if(!matchedSlash){startPart=i+1;break}continue}if(end===-1){matchedSlash=false;end=i+1}if(code===46){if(startDot===-1)startDot=i;else if(preDotState!==1)preDotState=1}else if(startDot!==-1){preDotState=-1}}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1){if(end!==-1){if(startPart===0&&isAbsolute)ret.base=ret.name=path.slice(1,end);else ret.base=ret.name=path.slice(startPart,end)}}else{if(startPart===0&&isAbsolute){ret.name=path.slice(1,startDot);ret.base=path.slice(1,end)}else{ret.name=path.slice(startPart,startDot);ret.base=path.slice(startPart,end)}ret.ext=path.slice(startDot,end)}if(startPart>0)ret.dir=path.slice(0,startPart-1);else if(isAbsolute)ret.dir="/";return ret},sep:"/",delimiter:":",win32:null,posix:null};posix.posix=posix;module.exports=posix}).call(this)}).call(this,require("_process"))},{_process:25}],25:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],26:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{dup:5}],27:[function(require,module,exports){"use strict";var isArgumentsObject=require("is-arguments");var isGeneratorFunction=require("is-generator-function");var whichTypedArray=require("which-typed-array");var isTypedArray=require("is-typed-array");function uncurryThis(f){return f.call.bind(f)}var BigIntSupported=typeof BigInt!=="undefined";var SymbolSupported=typeof Symbol!=="undefined";var ObjectToString=uncurryThis(Object.prototype.toString);var numberValue=uncurryThis(Number.prototype.valueOf);var stringValue=uncurryThis(String.prototype.valueOf);var booleanValue=uncurryThis(Boolean.prototype.valueOf);if(BigIntSupported){var bigIntValue=uncurryThis(BigInt.prototype.valueOf)}if(SymbolSupported){var symbolValue=uncurryThis(Symbol.prototype.valueOf)}function checkBoxedPrimitive(value,prototypeValueOf){if(typeof value!=="object"){return false}try{prototypeValueOf(value);return true}catch(e){return false}}exports.isArgumentsObject=isArgumentsObject;exports.isGeneratorFunction=isGeneratorFunction;exports.isTypedArray=isTypedArray;function isPromise(input){return typeof Promise!=="undefined"&&input instanceof Promise||input!==null&&typeof input==="object"&&typeof input.then==="function"&&typeof input.catch==="function"}exports.isPromise=isPromise;function isArrayBufferView(value){if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){return ArrayBuffer.isView(value)}return isTypedArray(value)||isDataView(value)}exports.isArrayBufferView=isArrayBufferView;function isUint8Array(value){return whichTypedArray(value)==="Uint8Array"}exports.isUint8Array=isUint8Array;function isUint8ClampedArray(value){return whichTypedArray(value)==="Uint8ClampedArray"}exports.isUint8ClampedArray=isUint8ClampedArray;function isUint16Array(value){return whichTypedArray(value)==="Uint16Array"}exports.isUint16Array=isUint16Array;function isUint32Array(value){return whichTypedArray(value)==="Uint32Array"}exports.isUint32Array=isUint32Array;function isInt8Array(value){return whichTypedArray(value)==="Int8Array"}exports.isInt8Array=isInt8Array;function isInt16Array(value){return whichTypedArray(value)==="Int16Array"}exports.isInt16Array=isInt16Array;function isInt32Array(value){return whichTypedArray(value)==="Int32Array"}exports.isInt32Array=isInt32Array;function isFloat32Array(value){return whichTypedArray(value)==="Float32Array"}exports.isFloat32Array=isFloat32Array;function isFloat64Array(value){return whichTypedArray(value)==="Float64Array"}exports.isFloat64Array=isFloat64Array;function isBigInt64Array(value){return whichTypedArray(value)==="BigInt64Array"}exports.isBigInt64Array=isBigInt64Array;function isBigUint64Array(value){return whichTypedArray(value)==="BigUint64Array"}exports.isBigUint64Array=isBigUint64Array;function isMapToString(value){return ObjectToString(value)==="[object Map]"}isMapToString.working=typeof Map!=="undefined"&&isMapToString(new Map);function isMap(value){if(typeof Map==="undefined"){return false}return isMapToString.working?isMapToString(value):value instanceof Map}exports.isMap=isMap;function isSetToString(value){return ObjectToString(value)==="[object Set]"}isSetToString.working=typeof Set!=="undefined"&&isSetToString(new Set);function isSet(value){if(typeof Set==="undefined"){return false}return isSetToString.working?isSetToString(value):value instanceof Set}exports.isSet=isSet;function isWeakMapToString(value){return ObjectToString(value)==="[object WeakMap]"}isWeakMapToString.working=typeof WeakMap!=="undefined"&&isWeakMapToString(new WeakMap);function isWeakMap(value){if(typeof WeakMap==="undefined"){return false}return isWeakMapToString.working?isWeakMapToString(value):value instanceof WeakMap}exports.isWeakMap=isWeakMap;function isWeakSetToString(value){return ObjectToString(value)==="[object WeakSet]"}isWeakSetToString.working=typeof WeakSet!=="undefined"&&isWeakSetToString(new WeakSet);function isWeakSet(value){return isWeakSetToString(value)}exports.isWeakSet=isWeakSet;function isArrayBufferToString(value){return ObjectToString(value)==="[object ArrayBuffer]"}isArrayBufferToString.working=typeof ArrayBuffer!=="undefined"&&isArrayBufferToString(new ArrayBuffer);function isArrayBuffer(value){if(typeof ArrayBuffer==="undefined"){return false}return isArrayBufferToString.working?isArrayBufferToString(value):value instanceof ArrayBuffer}exports.isArrayBuffer=isArrayBuffer;function isDataViewToString(value){return ObjectToString(value)==="[object DataView]"}isDataViewToString.working=typeof ArrayBuffer!=="undefined"&&typeof DataView!=="undefined"&&isDataViewToString(new DataView(new ArrayBuffer(1),0,1));function isDataView(value){if(typeof DataView==="undefined"){return false}return isDataViewToString.working?isDataViewToString(value):value instanceof DataView}exports.isDataView=isDataView;function isSharedArrayBufferToString(value){return ObjectToString(value)==="[object SharedArrayBuffer]"}isSharedArrayBufferToString.working=typeof SharedArrayBuffer!=="undefined"&&isSharedArrayBufferToString(new SharedArrayBuffer);function isSharedArrayBuffer(value){if(typeof SharedArrayBuffer==="undefined"){return false}return isSharedArrayBufferToString.working?isSharedArrayBufferToString(value):value instanceof SharedArrayBuffer}exports.isSharedArrayBuffer=isSharedArrayBuffer;function isAsyncFunction(value){return ObjectToString(value)==="[object AsyncFunction]"}exports.isAsyncFunction=isAsyncFunction;function isMapIterator(value){return ObjectToString(value)==="[object Map Iterator]"}exports.isMapIterator=isMapIterator;function isSetIterator(value){return ObjectToString(value)==="[object Set Iterator]"}exports.isSetIterator=isSetIterator;function isGeneratorObject(value){return ObjectToString(value)==="[object Generator]"}exports.isGeneratorObject=isGeneratorObject;function isWebAssemblyCompiledModule(value){return ObjectToString(value)==="[object WebAssembly.Module]"}exports.isWebAssemblyCompiledModule=isWebAssemblyCompiledModule;function isNumberObject(value){return checkBoxedPrimitive(value,numberValue)}exports.isNumberObject=isNumberObject;function isStringObject(value){return checkBoxedPrimitive(value,stringValue)}exports.isStringObject=isStringObject;function isBooleanObject(value){return checkBoxedPrimitive(value,booleanValue)}exports.isBooleanObject=isBooleanObject;function isBigIntObject(value){return BigIntSupported&&checkBoxedPrimitive(value,bigIntValue)}exports.isBigIntObject=isBigIntObject;function isSymbolObject(value){return SymbolSupported&&checkBoxedPrimitive(value,symbolValue)}exports.isSymbolObject=isSymbolObject;function isBoxedPrimitive(value){return isNumberObject(value)||isStringObject(value)||isBooleanObject(value)||isBigIntObject(value)||isSymbolObject(value)}exports.isBoxedPrimitive=isBoxedPrimitive;function isAnyArrayBuffer(value){return typeof Uint8Array!=="undefined"&&(isArrayBuffer(value)||isSharedArrayBuffer(value))}exports.isAnyArrayBuffer=isAnyArrayBuffer;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(method){Object.defineProperty(exports,method,{enumerable:false,value:function(){throw new Error(method+" is not supported in userland")}})})},{"is-arguments":20,"is-generator-function":21,"is-typed-array":22,"which-typed-array":29}],28:[function(require,module,exports){(function(process){(function(){var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function getOwnPropertyDescriptors(obj){var keys=Object.keys(obj);var descriptors={};for(var i=0;i<keys.length;i++){descriptors[keys[i]]=Object.getOwnPropertyDescriptor(obj,keys[i])}return descriptors};var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(typeof process!=="undefined"&&process.noDeprecation===true){return fn}if(typeof process==="undefined"){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnvRegex=/^$/;if(process.env.NODE_DEBUG){var debugEnv=process.env.NODE_DEBUG;debugEnv=debugEnv.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();debugEnvRegex=new RegExp("^"+debugEnv+"$","i")}exports.debuglog=function(set){set=set.toUpperCase();if(!debugs[set]){if(debugEnvRegex.test(set)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"\x1b["+inspect.colors[style][0]+"m"+str+"\x1b["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}exports.types=require("./support/types");function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;exports.types.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;exports.types.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;exports.types.isNativeError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var kCustomPromisifiedSymbol=typeof Symbol!=="undefined"?Symbol("util.promisify.custom"):undefined;exports.promisify=function promisify(original){if(typeof original!=="function")throw new TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&original[kCustomPromisifiedSymbol]){var fn=original[kCustomPromisifiedSymbol];if(typeof fn!=="function"){throw new TypeError('The "util.promisify.custom" argument must be of type Function')}Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:false,writable:false,configurable:true});return fn}function fn(){var promiseResolve,promiseReject;var promise=new Promise(function(resolve,reject){promiseResolve=resolve;promiseReject=reject});var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}args.push(function(err,value){if(err){promiseReject(err)}else{promiseResolve(value)}});try{original.apply(this,args)}catch(err){promiseReject(err)}return promise}Object.setPrototypeOf(fn,Object.getPrototypeOf(original));if(kCustomPromisifiedSymbol)Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:false,writable:false,configurable:true});return Object.defineProperties(fn,getOwnPropertyDescriptors(original))};exports.promisify.custom=kCustomPromisifiedSymbol;function callbackifyOnRejected(reason,cb){if(!reason){var newReason=new Error("Promise was rejected with a falsy value");newReason.reason=reason;reason=newReason}return cb(reason)}function callbackify(original){if(typeof original!=="function"){throw new TypeError('The "original" argument must be of type Function')}function callbackified(){var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}var maybeCb=args.pop();if(typeof maybeCb!=="function"){throw new TypeError("The last argument must be of type Function")}var self=this;var cb=function(){return maybeCb.apply(self,arguments)};original.apply(this,args).then(function(ret){process.nextTick(cb.bind(null,null,ret))},function(rej){process.nextTick(callbackifyOnRejected.bind(null,rej,cb))})}Object.setPrototypeOf(callbackified,Object.getPrototypeOf(original));Object.defineProperties(callbackified,getOwnPropertyDescriptors(original));return callbackified}exports.callbackify=callbackify}).call(this)}).call(this,require("_process"))},{"./support/isBuffer":26,"./support/types":27,_process:25,inherits:19}],29:[function(require,module,exports){(function(global){(function(){"use strict";var forEach=require("foreach");var availableTypedArrays=require("available-typed-arrays");var callBound=require("call-bind/callBound");var $toString=callBound("Object.prototype.toString");var hasSymbols=require("has-symbols")();var hasToStringTag=hasSymbols&&typeof Symbol.toStringTag==="symbol";var typedArrays=availableTypedArrays();var $slice=callBound("String.prototype.slice");var toStrTags={};var gOPD=require("es-abstract/helpers/getOwnPropertyDescriptor");var getPrototypeOf=Object.getPrototypeOf;if(hasToStringTag&&gOPD&&getPrototypeOf){forEach(typedArrays,function(typedArray){if(typeof global[typedArray]==="function"){var arr=new global[typedArray];if(!(Symbol.toStringTag in arr)){throw new EvalError("this engine has support for Symbol.toStringTag, but "+typedArray+" does not have the property! Please report this.")}var proto=getPrototypeOf(arr);var descriptor=gOPD(proto,Symbol.toStringTag);if(!descriptor){var superProto=getPrototypeOf(proto);descriptor=gOPD(superProto,Symbol.toStringTag)}toStrTags[typedArray]=descriptor.get}})}var tryTypedArrays=function tryAllTypedArrays(value){var foundName=false;forEach(toStrTags,function(getter,typedArray){if(!foundName){try{var name=getter.call(value);if(name===typedArray){foundName=name}}catch(e){}}});return foundName};var isTypedArray=require("is-typed-array");module.exports=function whichTypedArray(value){if(!isTypedArray(value)){return false}if(!hasToStringTag){return $slice($toString(value),8,-1)}return tryTypedArrays(value)}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"available-typed-arrays":7,"call-bind/callBound":9,"es-abstract/helpers/getOwnPropertyDescriptor":11,foreach:12,"has-symbols":16,"is-typed-array":22}],30:[function(require,module,exports){"use strict";var nop=function(){};function makeUnaryDerivatives(code){if(code===undefined){return{scalar:nop,tensor:nop}}else{return{scalar:new Function("_x",["var x = _x.x;","var out = this.x;","_x.dx += ("+code+") * this.dx;"].join("\n")),tensor:new Function("_x",["var n = _x.x.length;","while (n--) {","\tvar x = _x.x.data[n];","\tvar out = this.x.data[n];","   _x.dx.data[n] += ("+code+") * this.dx.data[n];","}"].join("\n"))}}}function makeBinaryDerivatives(code1,code2){if(code1===undefined&&code2===undefined){return{scalar:[nop,nop],tensor:[nop,nop]}}else{return{scalar:[new Function("_x","_y",["var x = _x.x;",'var y = (typeof _y === "number") ? _y : _y.x;',"var out = this.x;","_x.dx += ("+code1+") * this.dx;"].join("\n")),new Function("_x","_y",['var x = (typeof _x === "number") ? _x : _x.x;',"var y = _y.x;","var out = this.x;","_y.dx += ("+code2+") * this.dx;"].join("\n"))],tensor:[new Function("_x","_y",["var _xx = _x.x;","var _yx = _y.x || _y;","var n = _xx.length;",'if (typeof _yx === "number") {',"\twhile (n--) {","\t\tvar x = _xx.data[n];","\t\tvar y = _yx;","\t\tvar out = this.x.data[n];","\t   _x.dx.data[n] += ("+code1+") * this.dx.data[n];","\t}","} else {","\twhile (n--) {","\t\tvar x = _xx.data[n];","\t\tvar y = _yx.data[n];","\t\tvar out = this.x.data[n];","\t   _x.dx.data[n] += ("+code1+") * this.dx.data[n];","\t}","}"].join("\n")),new Function("_x","_y",["var _xx = _x.x || _x;","var _yx = _y.x;","var n = _xx.length;",'if (typeof _yx === "number") {',"\twhile (n--) {","\t\tvar x = _xx.data[n];","\t\tvar y = _yx;","\t\tvar out = this.x.data[n];","\t   _y.dx += ("+code2+") * this.dx.data[n];","\t}","} else {","\twhile (n--) {","\t\tvar x = _xx.data[n];","\t\tvar y = _yx.data[n];","\t\tvar out = this.x.data[n];","\t   _y.dx.data[n] += ("+code2+") * this.dx.data[n];","\t}","}"].join("\n"))]}}}var d={};d.neg=makeUnaryDerivatives("-1");d.add=makeBinaryDerivatives("1","1");d.sub=makeBinaryDerivatives("1","-1");d.mul=makeBinaryDerivatives("y","x");d.div=makeBinaryDerivatives("1/y","-x/(y*y)");d.sqrt=makeUnaryDerivatives("1/(2*out)");d.exp=makeUnaryDerivatives("out");d.log=makeUnaryDerivatives("1/x");d.pow=makeBinaryDerivatives("y*Math.pow(x,y-1)","Math.log(x)*out");d.sin=makeUnaryDerivatives("Math.cos(x)");d.cos=makeUnaryDerivatives("-Math.sin(x)");d.tan=makeUnaryDerivatives("1 + out*out");d.asin=makeUnaryDerivatives("1 / Math.sqrt(1 - x*x)");d.acos=makeUnaryDerivatives("-1 / Math.sqrt(1 - x*x)");d.atan=makeUnaryDerivatives("1 / (1 + x*x)");d.atan2=makeBinaryDerivatives("y/(x*x + y*y)","-x/(x*x + y*y)");d.sinh=makeUnaryDerivatives("Math.cosh(x)");d.cosh=makeUnaryDerivatives("Math.sinh(x)");d.tanh=makeUnaryDerivatives("1 - out*out");d.asinh=makeUnaryDerivatives("1 / Math.sqrt(x*x + 1)");d.acosh=makeUnaryDerivatives("1 / Math.sqrt(x*x - 1)");d.atanh=makeUnaryDerivatives("1 / (1 - x*x)");d.sigmoid=makeUnaryDerivatives("out * (1 - out)");d.abs=makeUnaryDerivatives("x >= 0 ? 1 : -1");d.floor=makeUnaryDerivatives();d.ceil=makeUnaryDerivatives();d.round=makeUnaryDerivatives();d.min=makeBinaryDerivatives();d.max=makeBinaryDerivatives();module.exports=d},{}],31:[function(require,module,exports){"use strict";var assert=require("assert");var graph=require("./graph.js");var Node=graph.Node;var Tensor=require("../tensor.js");function checkOutputType(OutputType){assert(OutputType===Tensor||OutputType===Number,"Attempting to create AD function with invalid output type '"+OutputType+"'; valid options are 'Number' and 'Tensor'")}function newUnaryFunction(opts){var OutputType=opts.OutputType;var name=opts.name;var forward=opts.forward;var backward=opts.backward;checkOutputType(OutputType);var NodeType=OutputType===Tensor?graph.TensorNode:graph.ScalarNode;function bw(){backward.call(this,this.inputs[0])}return function(x){if(x instanceof Node){var inputs=[x];return new NodeType(forward(x.x),inputs,inputs,bw,name)}else{return forward(x)}}}function newBinaryFunction(opts){var OutputType=opts.OutputType;var name=opts.name;var forward=opts.forward;var backward1=opts.backward1;var backward2=opts.backward2;checkOutputType(OutputType);var NodeType=OutputType===Tensor?graph.TensorNode:graph.ScalarNode;function backward11(){backward1.call(this,this.inputs[0],this.inputs[1].x);backward2.call(this,this.inputs[0].x,this.inputs[1])}function backward10(){backward1.call(this,this.inputs[0],this.inputs[1])}function backward01(){backward2.call(this,this.inputs[0],this.inputs[1])}return function(x,y){var xIsNode=x instanceof Node;var yIsNode=y instanceof Node;if(xIsNode&&yIsNode){var inputs=[x,y];return new NodeType(forward(x.x,y.x),inputs,inputs,backward11,name)}else if(xIsNode){return new NodeType(forward(x.x,y),[x],[x,y],backward10,name)}else if(yIsNode){return new NodeType(forward(x,y.x),[y],[x,y],backward01,name)}else{return forward(x,y)}}}function newFunction(opts){var OutputType=opts.OutputType;var name=opts.name;var forward=opts.forward;var backward=opts.backward;var getParents=opts.getParents;checkOutputType(OutputType);var NodeType=OutputType===Tensor?graph.TensorNode:graph.ScalarNode;function bw(){backward.apply(this,this.inputs)}return function(){var output=forward.apply(null,arguments);var parents=getParents.apply(null,arguments);var inputs=new Array(arguments.length);for(var i=0;i<inputs.length;++i){inputs[i]=arguments[i]}var n=parents.length;if(n===0){return output}else{return new NodeType(output,parents,inputs,bw,name)}}}function naryGetParents(){var args=arguments.length===1&&arguments[0]instanceof Array?arguments[0]:arguments;var p=[];var n=args.length;while(n--){var arg=args[n];if(arg instanceof Node){p.push(arg)}}return p}function liftUnaryFunction(f){return function(x){return f(x instanceof Node?x.x:x)}}function liftBinaryFunction(f){return function(x,y){var xprim=x instanceof Node?x.x:x;var yprim=y instanceof Node?y.x:y;return f(xprim,yprim)}}module.exports={newUnaryFunction:newUnaryFunction,newBinaryFunction:newBinaryFunction,newFunction:newFunction,naryGetParents:naryGetParents,liftUnaryFunction:liftUnaryFunction,liftBinaryFunction:liftBinaryFunction}},{"../tensor.js":51,"./graph.js":33,assert:3}],32:[function(require,module,exports){"use strict";var Tensor=require("../tensor.js");var graph=require("./graph.js");var Node=graph.Node;var func=require("./func.js");var derivs=require("./derivatives.js");var Scalar=Number;Math.sigmoid=function(x){return 1/(1+Math.exp(-x))};function makeFunctions(OutputType){var fns={};function backward(derivFns){return OutputType===Tensor?derivFns.tensor:derivFns.scalar}var namePrefix=OutputType===Scalar?"scalar.":"tensor.";var unops={neg:OutputType===Tensor?function(x){return x.neg()}:function(x){return-x}};for(var op in unops){fns[op]=func.newUnaryFunction({OutputType:OutputType,name:namePrefix+op,forward:unops[op],backward:backward(derivs[op])})}var binops={add:OutputType===Tensor?function(x,y){return x.add(y)}:function(x,y){return x+y},sub:OutputType===Tensor?function(x,y){return x.sub(y)}:function(x,y){return x-y},mul:OutputType===Tensor?function(x,y){return x.mul(y)}:function(x,y){return x*y},div:OutputType===Tensor?function(x,y){return x.div(y)}:function(x,y){return x/y}};for(var op in binops){fns[op]=func.newBinaryFunction({OutputType:OutputType,name:namePrefix+op,forward:binops[op],backward1:backward(derivs[op])[0],backward2:backward(derivs[op])[1]})}var unaryFns=["floor","ceil","round","sqrt","exp","log","abs","sin","cos","tan","asin","acos","atan","sinh","cosh","tanh","asinh","acosh","atanh","sigmoid"];var binaryFns=["pow","min","max","atan2"];for(var i=0;i<unaryFns.length;i++){var fnname=unaryFns[i];var forward=OutputType===Tensor?new Function("x","return x."+fnname+"();"):new Function("x","return Math."+fnname+"(x);");fns[fnname]=func.newUnaryFunction({OutputType:OutputType,name:namePrefix+fnname,forward:forward,backward:backward(derivs[fnname])})}for(var i=0;i<binaryFns.length;i++){var fnname=binaryFns[i];var forward=OutputType===Tensor?new Function("x","y","return x."+fnname+"(y);"):new Function("x","y","return Math."+fnname+"(x, y);");fns[fnname]=func.newBinaryFunction({OutputType:OutputType,name:namePrefix+fnname,forward:forward,backward1:backward(derivs[fnname])[0],backward2:backward(derivs[fnname])[1]})}fns.isNaN=OutputType===Scalar?func.liftUnaryFunction(isNaN):func.liftUnaryFunction(function(t){return t.isNaN()});fns.isFinite=OutputType===Scalar?func.liftUnaryFunction(isFinite):func.liftUnaryFunction(function(t){return t.isFinite()});return fns}var fns={scalar:makeFunctions(Scalar),tensor:makeFunctions(Tensor)};Object.getOwnPropertyNames(Math).forEach(function(p){if(!fns.scalar.hasOwnProperty(p)){fns.scalar[p]=Math[p]}});fns.scalar.eq=func.liftBinaryFunction(function(x,y){return x==y});fns.scalar.neq=func.liftBinaryFunction(function(x,y){return x!=y});fns.scalar.peq=func.liftBinaryFunction(function(x,y){return x===y});fns.scalar.pneq=func.liftBinaryFunction(function(x,y){return x!==y});fns.scalar.gt=func.liftBinaryFunction(function(x,y){return x>y});fns.scalar.lt=func.liftBinaryFunction(function(x,y){return x<y});fns.scalar.geq=func.liftBinaryFunction(function(x,y){return x>=y});fns.scalar.leq=func.liftBinaryFunction(function(x,y){return x<=y});fns.tensor.transpose=func.newUnaryFunction({OutputType:Tensor,name:"transpose",forward:function(a){return a.transpose()},backward:function(a){var h=this.x.dims[0];var w=this.x.dims[1];for(var i=0;i<h;i++){for(var j=0;j<w;j++){a.dx.data[j*h+i]+=this.dx.data[i*w+j]}}}});fns.tensor.diagonal=func.newUnaryFunction({OutputType:Tensor,name:"diagonal",forward:function(a){return a.diagonal()},backward:function(a){var n=a.dx.dims[0];for(var i=0;i<n;i++){a.dx.data[i]+=this.dx.data[i*(n+1)]}}});fns.tensor.inverse=func.newUnaryFunction({OutputType:Tensor,name:"inverse",forward:function(A){return A.inverse()},backward:function(A){var xT=this.x.transpose();A.dx=A.dx.add(xT.dot(this.dx).dot(xT).neg())}});fns.tensor.determinant=func.newUnaryFunction({OutputType:Number,name:"determinant",forward:function(A){return A.determinant()},backward:function(A){var n=A.x.dims[0];var invA=A.x.inverse();for(var i=0;i<n;i++){for(var j=0;j<n;j++){A.dx.data[i*n+j]+=this.x*this.dx*invA.data[j*n+i]}}}});fns.tensor.dot=func.newBinaryFunction({OutputType:Tensor,name:"dot",forward:function(a,b){return a.dot(b)},backward1:function(A,B){var Ap=ad.value(A);var Bp=ad.value(B);var Ah=Ap.dims[0];var Aw=Ap.dims[1];var Bw=Bp.dims[1];var wout=Bw;for(var l=0;l<Ah;l++){for(var m=0;m<Aw;m++){var z=0;for(var j=0;j<wout;j++){z+=this.dx.data[l*wout+j]*Bp.data[m*Bw+j]}A.dx.data[l*Aw+m]+=z}}},backward2:function(A,B){var Ap=ad.value(A);var Bp=ad.value(B);var Ah=Ap.dims[0];var Aw=Ap.dims[1];var Bh=Bp.dims[0];var Bw=Bp.dims[1];var wout=Bw;for(var l=0;l<Bh;l++){for(var m=0;m<Bw;m++){var z=0;for(var i=0;i<Ah;i++){z+=this.dx.data[i*wout+m]*Ap.data[i*Aw+l]}B.dx.data[l*Bw+m]+=z}}}});fns.tensor.cholesky=func.newUnaryFunction({OutputType:Tensor,name:"cholesky",forward:function(x){return x.cholesky()},backward:function(x){var i,j,k;var L=this;var dL=this.dx.tril();var n=L.x.dims[0];for(k=n-1;k>=0;k--){for(j=k+1;j<n;j++){for(i=j;i<n;i++){dL.data[i*n+k]-=dL.data[i*n+j]*L.x.data[j*n+k];dL.data[j*n+k]-=dL.data[i*n+j]*L.x.data[i*n+k]}}for(j=k+1;j<n;j++){dL.data[j*n+k]/=L.x.data[k*n+k];dL.data[k*n+k]-=dL.data[j*n+k]*L.x.data[j*n+k]}dL.data[k*n+k]/=2*L.x.data[k*n+k]}x.dx.addeq(dL)}});fns.tensor.sumreduce=func.newUnaryFunction({OutputType:Scalar,name:"sumreduce",forward:function(t){return t.sumreduce()},backward:function(t){var n=t.dx.data.length;while(n--){t.dx.data[n]+=this.dx}}});fns.tensor.allreduce=func.liftUnaryFunction(function(t){return t.allreduce()});fns.tensor.anyreduce=func.liftUnaryFunction(function(t){return t.anyreduce()});fns.tensor.get=func.newFunction({OutputType:Scalar,name:"tensor.get",forward:function(t,i){return t instanceof Node?t.x.data[i]:t.data[i]},backward:function(t,i){if(t instanceof Node){t.dx.data[i]+=this.dx}},getParents:function(t,i){return t instanceof Node?[t]:[]}});fns.tensor.toScalars=function(t){var n=t instanceof Node?t.x.length:t.length;var s=new Array(n);while(n--){s[n]=fns.tensor.get(t,n)}return s};fns.tensor.range=func.newFunction({OutputType:Tensor,name:"tensor.range",forward:function(t,start,end){t=t instanceof Node?t.x:t;var n=end-start;var tn=new Tensor([n]);while(n--){var i=start+n;tn.data[n]=t.data[i]}return tn},backward:function(t,start,end){if(t instanceof Node){var n=end-start;while(n--){var i=start+n;t.dx.data[i]+=this.dx.data[n]}}},getParents:function(t,start,end){return t instanceof Node?[t]:[]}});fns.tensor.split=function(t,lengths){var ts=new Array(lengths.length);var start=0;for(var i=0;i<lengths.length;i++){var l=lengths[i];ts[i]=fns.tensor.range(t,start,start+l);start+=l}return ts};fns.tensor.fromScalars=func.newFunction({OutputType:Tensor,name:"tensor.fromScalars",forward:function(){var args=arguments.length===1&&arguments[0]instanceof Array?arguments[0]:arguments;var n=args.length;var t=new Tensor([n]);while(n--){var arg=args[n];t.data[n]=arg instanceof Node?arg.x:arg}return t},backward:function(){var args=arguments.length===1&&arguments[0]instanceof Array?arguments[0]:arguments;var n=args.length;while(n--){var arg=args[n];if(arg instanceof Node){arg.dx+=this.dx.data[n]}}},getParents:func.naryGetParents});fns.tensor.concat=func.newFunction({OutputType:Tensor,name:"tensor.concat",forward:function(){var args=arguments.length===1&&arguments[0]instanceof Array?arguments[0]:arguments;var n=args.length;var size=0;while(n--){var arg=args[n];var tn=arg instanceof Node?arg.x:arg;size+=tn.length}var t=new Tensor([size]);n=args.length;var i=0;for(var j=0;j<n;j++){var arg=args[j];var tn=arg instanceof Node?arg.x:arg;t.copy(tn,i);i+=tn.length}return t},backward:function(){var args=arguments.length===1&&arguments[0]instanceof Array?arguments[0]:arguments;var n=args.length;var i=0;for(var j=0;j<n;j++){var arg=args[j];if(arg instanceof Node){var tn=arg;var len=tn.dx.length;while(len--){tn.dx.data[len]+=this.dx.data[i+len]}i+=tn.dx.length}else i+=arg.length}},getParents:func.naryGetParents});fns.tensor.reshape=function(t,dims){if(t instanceof Node){var node=t.refClone();node.x.reshape(dims);node.dx.reshape(dims);return node}else{var ref=t.refClone();ref.reshape(dims);return ref}};fns.scalar.sum=func.newFunction({OutputType:Scalar,name:"scalar.sum",forward:function(){var args=arguments.length===1&&arguments[0]instanceof Array?arguments[0]:arguments;var thesum=0;var n=args.length;while(n--){var arg=args[n];var x=arg instanceof Node?arg.x:arg;thesum+=x}return thesum},backward:function(){var args=arguments.length===1&&arguments[0]instanceof Array?arguments[0]:arguments;var n=args.length;while(n--){var arg=args[n];if(arg instanceof Node){arg.dx+=this.dx}}},getParents:func.naryGetParents});fns.tensor.softmax=func.newUnaryFunction({OutputType:Tensor,name:"tensor.softmax",forward:function(t){return t.softmax()},backward:function(t){var n=t.dx.data.length;var s=0;for(var i=0;i<n;i++){s+=this.x.data[i]*this.dx.data[i]}for(var j=0;j<n;j++){t.dx.data[j]+=this.x.data[j]*(this.dx.data[j]-s)}}});module.exports=fns},{"../tensor.js":51,"./derivatives.js":30,"./func.js":31,"./graph.js":33}],33:[function(require,module,exports){"use strict";var Tensor=require("../tensor.js");function Node(x,parents,inputs,backward,name){this.x=x;this.parents=parents;this.inputs=inputs;if(backward!==undefined)this.backward=backward;this.outDegree=0;this.name=name||"node"}Node.prototype.copy=function(other){this.x=other.x;this.parents=other.parents;this.inputs=other.inputs;if(other.backward!==undefined)this.backward=other.backward;this.outDegree=other.outDegree;this.name=other.name};Node.prototype.clone=function(){var node=Object.create(Node.prototype);node.copy(this);return node};Node.prototype.computeOutDegree=function(){var stack=[this];while(stack.length>0){var node=stack.pop();node.outDegree++;if(node.outDegree===1){var n=node.parents.length;while(n--)stack.push(node.parents[n])}}};Node.prototype.backpropRec=function(){var stack=[this];while(stack.length>0){var node=stack.pop();node.outDegree--;if(node.outDegree===0){node.backward();var n=node.parents.length;while(n--)stack.push(node.parents[n])}}};Node.prototype.zeroDerivativesRec=function(){var stack=[this];while(stack.length>0){var node=stack.pop();node.outDegree--;if(node.outDegree===0){node.zeroDerivativesImpl();var n=node.parents.length;while(n--)stack.push(node.parents[n])}}};Node.prototype.zeroDerivatives=function(){this.computeOutDegree();this.zeroDerivativesRec()};Node.prototype.backward=function(){};function ScalarNode(x,parents,inputs,backward,name){Node.call(this,x,parents,inputs,backward,name||"scalarNode");this.dx=0}ScalarNode.prototype=Object.create(Node.prototype);ScalarNode.prototype.copy=function(other){Node.prototype.copy.call(this,other);this.dx=other.dx};ScalarNode.prototype.clone=function(){var node=Object.create(ScalarNode.prototype);node.copy(this);return node};ScalarNode.prototype.backprop=function(){this.dx=1;this.computeOutDegree();this.backpropRec()};ScalarNode.prototype.zeroDerivativesImpl=function(){this.dx=0};function TensorNode(x,parents,inputs,backward,name){Node.call(this,x,parents,inputs,backward,name||"tensorNode");this.dx=new Tensor(x.dims)}TensorNode.prototype=Object.create(Node.prototype);TensorNode.prototype.copy=function(other){Node.prototype.copy.call(this,other);this.x=other.x.clone();this.dx=other.dx.clone()};TensorNode.prototype.clone=function(){var node=Object.create(Tensor.prototype);node.copy(this);return node};TensorNode.prototype.refCopy=function(other){Node.prototype.copy.call(this,other);this.x=other.x.refClone();this.dx=other.dx.refClone()};TensorNode.prototype.refClone=function(){var node=Object.create(TensorNode.prototype);node.refCopy(this);return node};TensorNode.prototype.backprop=function(){this.dx.fill(1);this.computeOutDegree();this.backpropRec()};TensorNode.prototype.zeroDerivativesImpl=function(){this.dx.zero()};module.exports={Node:Node,ScalarNode:ScalarNode,TensorNode:TensorNode}},{"../tensor.js":51}],34:[function(require,module,exports){"use strict";var utils=require("../utils.js");var graph=require("./graph.js");var Tensor=require("../tensor.js");var Node=graph.Node;var ScalarNode=graph.ScalarNode;var TensorNode=graph.TensorNode;var emptylist=[];function liftScalar(x,name){return new ScalarNode(x,emptylist,emptylist,undefined,name)}function liftTensor(x,name){return new TensorNode(x,emptylist,emptylist,undefined,name)}function doLift(x,name){return x instanceof Tensor?liftTensor(x,name):liftScalar(x,name)}var ad={lift:function(x,name){return x instanceof Node?x:doLift(x,name)},isLifted:function(x){return x instanceof Node},value:function(x){return x instanceof Node?x.x:x},derivative:function(x){return x.dx}};ad.params=function(dims,name){return ad.lift(new Tensor(dims).fillRandom(),name)};var func=require("./func.js");var functions=require("./functions.js");ad=utils.mergeObjects(ad,func,functions);module.exports=ad},{"../tensor.js":51,"../utils.js":52,"./func.js":31,"./functions.js":32,"./graph.js":33}],35:[function(require,module,exports){"use strict";var assert=require("assert");var utils=require("../utils.js");var Network=require("./network.js");function compound(fn,subnets,optname){function CompoundNetwork(subnets){Network.call(this);this.name=optname||"compoundNetwork";this.networks=subnets.slice();for(var i=0;i<subnets.length;i++){this.paramGetters=this.paramGetters.concat(subnets[i].paramGetters);this.paramSetters=this.paramSetters.concat(subnets[i].paramSetters)}this.paramGetters=utils.deduplicate(this.paramGetters);this.paramSetters=utils.deduplicate(this.paramSetters)}CompoundNetwork.prototype=Object.create(Network.prototype);CompoundNetwork.prototype.eval=fn;CompoundNetwork.prototype.setTraining=function(flag){Network.prototype.setTraining.call(this,flag);for(var i=0;i<this.networks.length;i++){this.networks[i].setTraining(flag)}};if(optname){CompoundNetwork.prototype.serializeJSON=function(){return{type:optname,networks:this.networks.map(function(n){return n.serializeJSON()})}};Network.deserializers[optname]=function(json){return new CompoundNetwork(json.networks.map(function(jn){return Network.deserializeJSON(jn)}))}}else{CompoundNetwork.prototype.serializeJSON=function(){assert(false,"Cannot serialize unnamed compound network.")}}return new CompoundNetwork(subnets)}function ASTNode(type,parents){this.type=type;this.parents=parents||[]}function SelectNetwork(i){Network.call(this);this.name="select";this.i=i}SelectNetwork.prototype=Object.create(Network.prototype);SelectNetwork.prototype.eval=function(tensors){return tensors[this.i]};SelectNetwork.prototype.serializeJSON=function(){return{type:"select",i:this.i}};Network.deserializers.select=function(json){return new SelectNetwork(json.i)};ASTNode.prototype.split=function(n){var nodes=new Array(n);for(var i=0;i<n;i++){var net=new SelectNetwork(i);nodes[i]=net.compose(this)}return nodes};function input(){return new ASTNode("input")}Network.prototype.compose=function(){var node=new ASTNode("compose",Array.prototype.slice.call(arguments));node.network=this;return node};function compile(inputs,outputs,optname,optDebug){for(var i=0;i<inputs.length;i++){assert(inputs[i].type==="input","Inputs to composite neural network must be nn.ast.input()")}var visited=[];for(var i=0;i<outputs.length;i++){var fringe=[outputs[i]];while(fringe.length>0){var node=fringe.pop();if(!(node.type==="input")&&visited.indexOf(node)===-1){visited.push(node);for(var i=0;i<node.parents.length;i++){fringe.push(node.parents[i])}}}}visited.reverse();var body="var args = arguments;\n";var outs=[];for(var i=0;i<visited.length;i++){var node=visited[i];var ins=node.parents.map(function(p){var i=inputs.indexOf(p);if(i!==-1)return"args["+i+"]";i=visited.indexOf(p);if(i!==-1)return"r"+i;assert(false,"impossible")});body+="var r"+i+" = this.networks["+i+"].eval("+ins+");\n";if(optDebug){var ri="r"+i;var ri_val=ri+"_val";var neti="this.networks["+i+"]";body+=["var "+ri_val+" = "+ri+".x || "+ri+";","if (!"+ri_val+".isFinite().allreduce()) {",'\tvar err = "Non-finite value in output of network '+i+' ("+'+neti+'.name+")\\n";','   err += "Output:\\n";','\terr += "["+'+ri_val+'.toString()+"]\\n";','   err += "Inputs:\\n";',ins.map(function(input){var inval="("+input+".x || "+input+")";return'\terr += "["+'+inval+'.toString()+"]\\n";'}).join("\n"),"   throw new Error(err);","}"].join("\n")}if(outputs.indexOf(node)!==-1){outs.push("r"+i)}}body+="return "+(outs.length>1?"["+outs+"]":outs[0])+";";var fn=new Function(body);var networks=visited.map(function(n){return n.network});var net=compound(fn,networks);net.name=optname||"compiledNetwork";net.nodes=inputs.concat(visited);net.inputs=inputs.map(function(n){return net.nodes.indexOf(n)});net.outputs=outputs.map(function(n){return net.nodes.indexOf(n)});net.serializeJSON=function(){var jnodes=this.nodes.map(function(n){var jn={type:n.type,parents:n.parents.map(function(p){return this.nodes.indexOf(p)}.bind(this))};if(jn.type==="compose"){jn.network=n.network.serializeJSON()}return jn}.bind(this));return{type:"compiled",name:this.name,nodes:jnodes,inputs:this.inputs,outputs:this.outputs}};return net}Network.deserializers.compiled=function(json){var nodes=[];for(var i=0;i<json.nodes.length;i++){var jn=json.nodes[i];var n=new ASTNode(jn.type,jn.parents.map(function(pi){return nodes[pi]}));if(jn.type==="compose"){n.network=Network.deserializeJSON(jn.network)}nodes.push(n)}var inputs=json.inputs.map(function(i){return nodes[i]});var outputs=json.outputs.map(function(i){return nodes[i]});return compile(inputs,outputs,json.name)};function sequence(networks,optname,optDebug){var inputNode=input();var currNode=inputNode;for(var i=0;i<networks.length;i++){currNode=networks[i].compose(currNode)}var net=compile([inputNode],[currNode],undefined,optDebug);net.name=optname||"sequenceNetwork";net.serializeJSON=function(){return{type:"sequence",name:this.name,networks:this.networks.map(function(n){return n.serializeJSON()})}};return net}Network.deserializers.sequence=function(json){var networks=json.networks.map(function(jn){return Network.deserializeJSON(jn)});return sequence(networks,json.name)};module.exports={compound:compound,ast:{input:input,compile:compile},sequence:sequence}},{"../utils.js":52,"./network.js":38,assert:3}],36:[function(require,module,exports){"use strict";var utils=require("../utils.js");var Network=require("./network.js");module.exports={Network:Network,deserializeJSON:Network.deserializeJSON};var lifting=require("./lifting.js");var composition=require("./composition.js");var lifted=require("./networks/lifted.js");var linear=require("./networks/linear.js");var convolution=require("./networks/convolution.js");var pooling=require("./networks/pooling.js");var activation=require("./networks/activation.js");var perceptron=require("./networks/perceptron.js");var misc=require("./networks/misc.js");module.exports=utils.mergeObjects(module.exports,lifting,composition,lifted,linear,convolution,pooling,activation,perceptron,misc)},{"../utils.js":52,"./composition.js":35,"./lifting.js":37,"./network.js":38,"./networks/activation.js":39,"./networks/convolution.js":40,"./networks/lifted.js":41,"./networks/linear.js":42,"./networks/misc.js":43,"./networks/perceptron.js":44,"./networks/pooling.js":45}],37:[function(require,module,exports){"use strict";var Network=require("./network.js");function lift(adfn,optname){var net=new Network;net.eval=adfn;net.name=optname||"liftedNetwork";if(optname){net.serializeJSON=function(){return{type:optname}};Network.deserializers[optname]=function(json){return net}}else{net.serializeJSON=function(){assert(false,"Cannot serialize unnamed lifted network.")}}return net}function partialeval(adfn,name){var netCreateFn=function(){var partialargs=Array.prototype.slice.call(arguments);var fnToLift=function(t){var tensorargs=Array.prototype.slice.call(arguments);return adfn.apply(null,tensorargs.concat(partialargs))};var net=lift(fnToLift);net.name=name;if(name){net.serializeJSON=function(){var json={type:name};for(var i=0;i<partialargs.length;i++){json["arg"+i]=partialargs[i]}return json}}return net};if(name){Network.deserializers[name]=function(json){var args=[];for(var prop in json){if(prop.startsWith("arg")){var idx=parseInt(prop.slice(3));args[idx]=json[prop]}}return netCreateFn.apply(null,args)}}return netCreateFn}module.exports={lift:lift,partialeval:partialeval}},{"./network.js":38}],38:[function(require,module,exports){"use strict";var assert=require("assert");function Network(){this.name="";this.isTraining=false;this.paramGetters=[];this.paramSetters=[]}Network.prototype.eval=function(){assert(false,"Neural networks must implement the 'eval' method.")};Network.prototype.getParameters=function(){if(this.__parameters===undefined){this.__parameters=this.paramGetters.map(function(f){return f()})}return this.__parameters};Network.prototype.setParameters=function(params){if(params.length!==this.paramSetters.length){assert(false,"Network.setParameters: size mismatch (network has "+this.paramSetters.length+" parameters, not "+params.length)}for(var i=0;i<params.length;i++){this.paramSetters[i](params[i])}this.__parameters=params.slice()};Network.prototype.setTraining=function(boolflag){this.isTraining=boolflag};Network.prototype.serializeJSON=function(){assert(false,"Neural networks must implement the 'serializeJSON' method.")};Network.deserializers={};Network.deserializeJSON=function(json){assert(json.type!==undefined,"Network JSON blob has no 'type' field.");assert(Network.deserializers.hasOwnProperty(json.type),"Network JSON blob has unrecognized type '"+json.type+"'");return Network.deserializers[json.type](json)};module.exports=Network},{assert:3}],39:[function(require,module,exports){"use strict";var Tensor=require("../../tensor.js");var ad=require("../../ad");var lift=require("../lifting.js").lift;var relu=lift(ad.newUnaryFunction({OutputType:Tensor,name:"relu",forward:function(x){x=ad.value(x);var y=x.clone();var n=x.length;while(n--){y.data[n]=y.data[n]<0?0:y.data[n]}return y},backward:function(x){var n=x.x.length;while(n--){x.dx.data[n]+=x.x.data[n]<=0?0:this.dx.data[n]}}}),"relu");var sigmoidCentered=lift(function(x){return ad.tensor.sub(ad.tensor.mul(ad.tensor.sigmoid(x),2),1)});module.exports={relu:relu,sigmoidCentered:sigmoidCentered}},{"../../ad":34,"../../tensor.js":51,"../lifting.js":37}],40:[function(require,module,exports){"use strict";var Tensor=require("../../tensor.js");var ad=require("../../ad");var Network=require("../network.js");var assert=require("assert");function ConvolutionNetwork(nIn,nOut,fW,fH,sX,sY,pX,pY,optname){Network.call(this);this.name=optname||"convolution";this.inDepth=nIn;this.outDepth=nOut;this.filterWidth=fW;this.filterHeight=fH;this.strideX=sX;this.strideY=sY;this.padX=pX;this.padY=pY;this.filters=ad.params([nOut,nIn,fH,fW],this.name+"_filters");this.biases=ad.params([nOut],this.name+"_biases");this.paramGetters=[function(){return this.filters}.bind(this),function(){return this.biases}.bind(this)];this.paramSetters=[function(filters){this.filters=filters}.bind(this),function(biases){this.biases=biases}.bind(this)]}ConvolutionNetwork.prototype=Object.create(Network.prototype);ConvolutionNetwork.prototype.serializeJSON=function(){return{type:"convolution",name:this.name,inDepth:this.inDepth,outDepth:this.outDepth,filterWidth:this.filterWidth,filterHeight:this.filterHeight,strideX:this.strideX,strideY:this.strideY,padX:this.padX,padY:this.padY,filters:ad.value(this.filters).toFlatArray(),biases:ad.value(this.biases).toFlatArray()}};Network.deserializers.convolution=function(json){var net=new ConvolutionNetwork(json.inDepth,json.outDepth,json.filterWidth,json.filterHeight,json.strideX,json.strideY,json.padX,json.padY,json.name);ad.value(net.filters).fromFlatArray(json.filters);ad.value(net.biases).fromFlatArray(json.biases);return net};var convolve=ad.newFunction({OutputType:Tensor,name:"convolution",forward:function(inImg,filters,biases,strideX,strideY,padX,padY){inImg=ad.value(inImg);filters=ad.value(filters);biases=ad.value(biases);var fH=filters.dims[2];var fW=filters.dims[3];var iD=inImg.dims[0];var iH=inImg.dims[1];var iW=inImg.dims[2];var oD=filters.dims[0];var oH=Math.floor((iH+2*padY-fH)/strideY+1);var oW=Math.floor((iW+2*padX-fW)/strideX+1);if(iD!==filters.dims[1]){assert(false,"Convolutional network: input depth is "+iD+" but should be "+filters.dims[1])}var outImg=new Tensor([oD,oH,oW]);for(var d=0;d<oD;d++){var x=-padX;var y=-padY;for(var ay=0;ay<oH;y+=strideY,ay++){x=-padX;for(var ax=0;ax<oW;x+=strideX,ax++){var a=biases.data[d];for(var fd=0;fd<iD;fd++){for(var fy=0;fy<fH;fy++){var iy=y+fy;for(var fx=0;fx<fW;fx++){var ix=x+fx;if(iy>=0&&iy<iH&&ix>=0&&ix<iW){var iIdx=ix+iW*(iy+iH*fd);var fIdx=fx+fW*(fy+fH*(fd+iD*d));a+=filters.data[fIdx]*inImg.data[iIdx]}}}}outImg.data[ax+oW*(ay+oH*d)]=a}}}return outImg},backward:function(inImg,filters,biases,strideX,strideY,padX,padY){var inImgP=ad.value(inImg);var filtersP=ad.value(filters);var biasesP=ad.value(biases);var iIs=inImg!==inImgP;var fIs=filters!==filtersP;var bIs=biases!==biasesP;var fH=filtersP.dims[2];var fW=filtersP.dims[3];var iD=inImgP.dims[0];var iH=inImgP.dims[1];var iW=inImgP.dims[2];var oD=filtersP.dims[0];var oH=this.x.dims[1];var oW=this.x.dims[2];for(var d=0;d<oD;d++){var x=-padX;var y=-padY;for(var ay=0;ay<oH;y+=strideY,ay++){x=-padX;for(var ax=0;ax<oW;x+=strideX,ax++){var thisGrad=this.dx.data[ax+oW*(ay+oH*d)];if(bIs)biases.dx.data[d]+=thisGrad;for(var fd=0;fd<iD;fd++){for(var fy=0;fy<fH;fy++){var iy=y+fy;for(var fx=0;fx<fW;fx++){var ix=x+fx;if(iy>=0&&iy<iH&&ix>=0&&ix<iW){var iIdx=ix+iW*(iy+iH*fd);var fIdx=fx+fW*(fy+fH*(fd+iD*d));if(iIs){inImg.dx.data[iIdx]+=filtersP.data[fIdx]*thisGrad}if(fIs){filters.dx.data[fIdx]+=inImgP.data[iIdx]*thisGrad}}}}}}}}},getParents:function(inImg,filters,biases,strideX,strideY,padX,padY){var p=[];if(ad.isLifted(inImg))p.push(inImg);if(ad.isLifted(filters))p.push(filters);if(ad.isLifted(biases))p.push(biases);return p}});ConvolutionNetwork.prototype.eval=function(img){var filters=this.isTraining?this.filters:ad.value(this.filters);var biases=this.isTraining?this.biases:ad.value(this.biases);return convolve(img,filters,biases,this.strideX,this.strideY,this.padX,this.padY)};function convolution(opts,optname){var nIn=opts.inDepth||1;var nOut=opts.outDepth||1;var fW=opts.filterWidth||opts.filterSize;var fH=opts.filterHeight||opts.filterSize;var sX=opts.strideX||opts.stride||1;var sY=opts.strideY||opts.stride||1;var pX=opts.padX||opts.pad||"same";var pY=opts.padY||opts.pad||"same";if(pX==="same"){pX=Math.floor((fW-1)/2)}if(pY==="same"){pY=Math.floor((fH-1)/2)}return new ConvolutionNetwork(nIn,nOut,fW,fH,sX,sY,pX,pY,optname)}module.exports={convolution:convolution,convolve:convolve}},{"../../ad":34,"../../tensor.js":51,"../network.js":38,assert:3}],41:[function(require,module,exports){"use strict";var adfunctions=require("../../ad/functions.js");var lifting=require("../lifting.js");module.exports={};for(var fnname in adfunctions.tensor){module.exports[fnname]=lifting.lift(adfunctions.tensor[fnname],fnname)}module.exports.range=lifting.partialeval(adfunctions.tensor.range,"range");module.exports.split=lifting.partialeval(adfunctions.tensor.split,"split");module.exports.reshape=lifting.partialeval(adfunctions.tensor.reshape,"reshape")},{"../../ad/functions.js":32,"../lifting.js":37}],42:[function(require,module,exports){"use strict";var Tensor=require("../../tensor.js");var ad=require("../../ad");var Network=require("../network.js");var assert=require("assert");function LinearNetwork(nIn,nOut,optname){Network.call(this);this.name=optname||"linear";this.inSize=nIn;this.outSize=nOut;this.weights=ad.params([nOut,nIn],this.name+"_weights");this.biases=ad.params([nOut],this.name+"_biases");this.paramGetters=[function(){return this.weights}.bind(this),function(){return this.biases}.bind(this)];this.paramSetters=[function(weights){this.weights=weights}.bind(this),function(biases){this.biases=biases}.bind(this)]}LinearNetwork.prototype=Object.create(Network.prototype);LinearNetwork.prototype.serializeJSON=function(){return{type:"linear",name:this.name,inSize:this.inSize,outSize:this.outSize,weights:ad.value(this.weights).toFlatArray(),biases:ad.value(this.biases).toFlatArray()}};Network.deserializers.linear=function(json){var net=new LinearNetwork(json.inSize,json.outSize,json.name);ad.value(net.weights).fromFlatArray(json.weights);ad.value(net.biases).fromFlatArray(json.biases);return net};var mvmuladd=ad.newFunction({OutputType:Tensor,name:"mvmuladd",forward:function(A,x,b){A=ad.value(A);x=ad.value(x);b=ad.value(b);var w=x.length;var h=b.length;if(w!==A.dims[1]){assert(false,"Linear network: input size is "+w+" but should be "+A.dims[1])}var y=b.clone();for(var r=0;r<h;r++){var off=r*w;for(var c=0;c<w;c++){y.data[r]+=A.data[off+c]*x.data[c]}}return y},backward:function(A,x,b){var Ap=ad.value(A);var xp=ad.value(x);var bp=ad.value(b);var aIs=A!==Ap;var xIs=x!==xp;var bIs=b!==bp;var w=xp.length;var h=bp.length;for(var r=0;r<h;r++){var off=r*w;var thisdx=this.dx.data[r];if(bIs){b.dx.data[r]+=thisdx}for(var c=0;c<w;c++){if(xIs){x.dx.data[c]+=Ap.data[off+c]*thisdx}if(aIs){A.dx.data[off+c]+=xp.data[c]*thisdx}}}},getParents:ad.naryGetParents});LinearNetwork.prototype.eval=function(x){var A=this.isTraining?this.weights:ad.value(this.weights);var b=this.isTraining?this.biases:ad.value(this.biases);return mvmuladd(A,x,b)};function linear(nIn,nOut,optname){return new LinearNetwork(nIn,nOut,optname)}function LayerwiseLinearNetwork(nIn,nOut,optname){Network.call(this);this.name=optname||"layerwiseLinear";this.inSize=nIn;this.outSize=nOut;this.weights=ad.params([nOut,nIn],this.name+"_weights");this.biases=ad.params([nOut],this.name+"_biases");this.paramGetters=[function(){return this.weights}.bind(this),function(){return this.biases}.bind(this)];this.paramSetters=[function(weights){this.weights=weights}.bind(this),function(biases){this.biases=biases}.bind(this)]}LayerwiseLinearNetwork.prototype=Object.create(Network.prototype);LayerwiseLinearNetwork.prototype.serializeJSON=function(){return{type:"layerwiseLinear",name:this.name,inSize:this.inSize,outSize:this.outSize,weights:ad.value(this.weights).toFlatArray(),biases:ad.value(this.biases).toFlatArray()}};Network.deserializers.layerwiseLinear=function(json){var net=new LayerwiseLinearNetwork(json.inSize,json.outSize,json.name);ad.value(net.weights).fromFlatArray(json.weights);ad.value(net.biases).fromFlatArray(json.biases);return net};var layerwiseMVMulAdd=ad.newFunction({OutputType:Tensor,name:"layerwiseMVMulAdd",forward:function(img,weights,biases){img=ad.value(img);weights=ad.value(weights);biases=ad.value(biases);var inD=img.dims[0];if(inD!==weights.dims[1]){assert(false,"LayerwiseLinear Network: input depth is "+inD+" but should be "+weights.dims[1])}var h=img.dims[1];var w=img.dims[2];var outD=weights.dims[0];var outImg=new Tensor([outD,h,w]);for(var y=0;y<h;y++){for(var x=0;x<w;x++){for(var od=0;od<outD;od++){var outIdx=x+w*(y+h*od);outImg.data[outIdx]=biases.data[od];for(var id=0;id<inD;id++){var wIdx=id+od*inD;var wt=weights.data[wIdx];var inIdx=x+w*(y+h*id);var imval=img.data[inIdx];outImg.data[outIdx]+=wt*imval}}}}return outImg},backward:function(img,weights,biases){var imgp=ad.value(img);var weightsp=ad.value(weights);var biasesp=ad.value(biases);var imgIs=img!==imgp;var weightsIs=weights!==weightsp;var biasesIs=biases!==biasesp;var h=imgp.dims[1];var w=imgp.dims[2];var outD=weightsp.dims[0];var inD=weightsp.dims[1];for(var y=0;y<h;y++){for(var x=0;x<w;x++){for(var od=0;od<outD;od++){var outIdx=x+w*(y+h*od);var thisdx=this.dx.data[outIdx];if(biasesIs){biases.dx.data[od]+=thisdx}for(var id=0;id<inD;id++){var wIdx=id+od*inD;var inIdx=x+w*(y+h*id);if(weightsIs){var imval=imgp.data[inIdx];weights.dx.data[wIdx]+=imval*thisdx}if(imgIs){var wt=weightsp.data[wIdx];img.dx.data[inIdx]+=wt*thisdx}}}}}},getParents:ad.naryGetParents});LayerwiseLinearNetwork.prototype.eval=function(img){var weights=this.isTraining?this.weights:ad.value(this.weights);var biases=this.isTraining?this.biases:ad.value(this.biases);return layerwiseMVMulAdd(img,weights,biases)};function layerwiseLinear(nIn,nOut,optname){return new LayerwiseLinearNetwork(nIn,nOut,optname)}module.exports={linear:linear,layerwiseLinear:layerwiseLinear}},{"../../ad":34,"../../tensor.js":51,"../network.js":38,assert:3}],43:[function(require,module,exports){"use strict";var ad=require("../../ad");var Network=require("../network.js");function ConstantParamNetwork(dims,optname){Network.call(this);this.name=optname||"constantparams";this.dims=dims;this.params=ad.params(dims,this.name);this.paramGetters=[function(){return this.params}.bind(this)];this.paramSetters=[function(params){this.params=params}.bind(this)]}ConstantParamNetwork.prototype=Object.create(Network.prototype);ConstantParamNetwork.prototype.eval=function(){return this.isTraining?this.params:ad.value(this.params)};ConstantParamNetwork.prototype.serializeJSON=function(){return{type:"constantparams",name:this.name,dims:this.dims,params:ad.value(this.params).toFlatArray()}};Network.deserializers.constantparams=function(json){var net=new ConstantParamNetwork(json.dims,json.name);ad.value(net.params).fromFlatArray(json.params);return net};function constantparams(dims,optname){return new ConstantParamNetwork(dims,optname)}module.exports={constantparams:constantparams}},{"../../ad":34,"../network.js":38}],44:[function(require,module,exports){"use strict";var sequence=require("../composition.js").sequence;var linear=require("./linear.js").linear;function mlp(nIn,layerdefs,optname,optDebug){optname=optname||"mlp";var nets=[];for(var i=0;i<layerdefs.length;i++){var ldef=layerdefs[i];nets.push(linear(nIn,ldef.nOut,optname+"_layer"+i));if(ldef.activation){nets.push(ldef.activation)}nIn=ldef.nOut}return sequence(nets,optname||"multiLayerPerceptron",optDebug)}module.exports={mlp:mlp}},{"../composition.js":35,"./linear.js":42}],45:[function(require,module,exports){"use strict";var Tensor=require("../../tensor.js");var ad=require("../../ad");var Network=require("../network.js");function MaxPoolNetwork(fW,fH,sX,sY,pX,pY){Network.call(this);this.filterWidth=fW;this.filterHeight=fH;this.strideX=sX;this.strideY=sY;this.padX=pX;this.padY=pY;this.name="maxpool"}MaxPoolNetwork.prototype=Object.create(Network.prototype);MaxPoolNetwork.prototype.serializeJSON=function(){return{type:"maxpool",filterWidth:this.filterWidth,filterHeight:this.filterHeight,strideX:this.strideX,strideY:this.strideY,padX:this.padX,padY:this.padY}};Network.deserializers.maxpool=function(json){return new MaxPoolNetwork(json.filterWidth,json.filterHeight,json.strideX,json.strideY,json.padX,json.padY)};var maxIndices;var maxpoolingImpl=ad.newFunction({OutputType:Tensor,name:"maxpooling",forward:function(inImg,fW,fH,sX,sY,pX,pY){inImg=ad.value(inImg);var D=inImg.dims[0];var iH=inImg.dims[1];var iW=inImg.dims[2];var oH=Math.floor((iH+2*pY-fH)/sY+1);var oW=Math.floor((iW+2*pX-fW)/sX+1);var outImg=new Tensor([D,oH,oW]);maxIndices=new Int32Array(D*oH*oW);for(var d=0;d<D;d++){var x=-pX;var y=-pY;for(var ay=0;ay<oH;y+=sY,ay++){x=-pX;for(var ax=0;ax<oW;x+=sX,ax++){var maxval=-Infinity;var maxidx=-1;for(var fy=0;fy<fH;fy++){var iy=y+fy;for(var fx=0;fx<fW;fx++){var ix=x+fx;if(iy>=0&&iy<iH&&ix>=0&&ix<iW){var idx=ix+iW*(iy+iH*d);var v=inImg.data[idx];if(v>maxval){maxval=v;maxidx=idx}}}}var outidx=ax+oW*(ay+oH*d);outImg.data[outidx]=maxval;maxIndices[outidx]=maxidx}}}return outImg},backward:function(inImg,fW,fH,sX,sY,pX,pY){var D=inImg.x.dims[0];var iH=inImg.x.dims[1];var iW=inImg.x.dims[2];var oH=this.x.dims[1];var oW=this.x.dims[2];for(var d=0;d<D;d++){var x=-pX;var y=-pY;for(var ay=0;ay<oH;y+=sY,ay++){x=-pX;for(var ax=0;ax<oW;x+=sX,ax++){var outidx=ax+oW*(ay+oH*d);var inidx=this.maxIndices[outidx];inImg.dx.data[inidx]+=this.dx.data[outidx]}}}},getParents:function(inImg,fW,fH,sX,sY,pX,pY){return ad.isLifted(inImg)?[inImg]:[]}});function maxpooling(inImg,fW,fH,sX,sY,pX,pY){var outImg=maxpoolingImpl(inImg,fW,fH,sX,sY,pX,pY);if(ad.isLifted(outImg)){outImg.maxIndices=maxIndices}return outImg}MaxPoolNetwork.prototype.eval=function(img){return maxpooling(img,this.filterWidth,this.filterHeight,this.strideX,this.strideY,this.padX,this.padY)};function maxpool(opts){var fW=opts.filterWidth||opts.filterSize;var fH=opts.filterHeight||opts.filterSize;var sX=opts.strideX||opts.stride||fW;var sY=opts.strideY||opts.stride||fH;var pX=opts.padX||opts.pad||0;var pY=opts.padY||opts.pad||0;return new MaxPoolNetwork(fW,fH,sX,sY,pX,pY)}function MinPoolNetwork(fW,fH,sX,sY,pX,pY){Network.call(this);this.filterWidth=fW;this.filterHeight=fH;this.strideX=sX;this.strideY=sY;this.padX=pX;this.padY=pY;this.name="minpool"}MinPoolNetwork.prototype=Object.create(Network.prototype);MinPoolNetwork.prototype.serializeJSON=function(){return{type:"minpool",filterWidth:this.filterWidth,filterHeight:this.filterHeight,strideX:this.strideX,strideY:this.strideY,padX:this.padX,padY:this.padY}};Network.deserializers.minpool=function(json){return new MinPoolNetwork(json.filterWidth,json.filterHeight,json.strideX,json.strideY,json.padX,json.padY)};var minIndices;var minpoolingImpl=ad.newFunction({OutputType:Tensor,name:"maxpooling",forward:function(inImg,fW,fH,sX,sY,pX,pY){inImg=ad.value(inImg);var D=inImg.dims[0];var iH=inImg.dims[1];var iW=inImg.dims[2];var oH=Math.floor((iH+2*pY-fH)/sY+1);var oW=Math.floor((iW+2*pX-fW)/sX+1);var outImg=new Tensor([D,oH,oW]);minIndices=new Int32Array(D*oH*oW);for(var d=0;d<D;d++){var x=-pX;var y=-pY;for(var ay=0;ay<oH;y+=sY,ay++){x=-pX;for(var ax=0;ax<oW;x+=sX,ax++){var minval=Infinity;var minidx=-1;for(var fy=0;fy<fH;fy++){var iy=y+fy;for(var fx=0;fx<fW;fx++){var ix=x+fx;if(iy>=0&&iy<iH&&ix>=0&&ix<iW){var idx=ix+iW*(iy+iH*d);var v=inImg.data[idx];if(v<minval){minval=v;minidx=idx}}}}var outidx=ax+oW*(ay+oH*d);outImg.data[outidx]=minval;minIndices[outidx]=minidx}}}return outImg},backward:function(inImg,fW,fH,sX,sY,pX,pY){var D=inImg.x.dims[0];var iH=inImg.x.dims[1];var iW=inImg.x.dims[2];var oH=this.x.dims[1];var oW=this.x.dims[2];for(var d=0;d<D;d++){var x=-pX;var y=-pY;for(var ay=0;ay<oH;y+=sY,ay++){x=-pX;for(var ax=0;ax<oW;x+=sX,ax++){var outidx=ax+oW*(ay+oH*d);var inidx=this.minIndices[outidx];inImg.dx.data[inidx]+=this.dx.data[outidx]}}}},getParents:function(inImg,fW,fH,sX,sY,pX,pY){return ad.isLifted(inImg)?[inImg]:[]}});function minpooling(inImg,fW,fH,sX,sY,pX,pY){var outImg=minpoolingImpl(inImg,fW,fH,sX,sY,pX,pY);if(ad.isLifted(outImg)){outImg.minIndices=minIndices}return outImg}MinPoolNetwork.prototype.eval=function(img){return minpooling(img,this.filterWidth,this.filterHeight,this.strideX,this.strideY,this.padX,this.padY)};function minpool(opts){var fW=opts.filterWidth||opts.filterSize;var fH=opts.filterHeight||opts.filterSize;var sX=opts.strideX||opts.stride||fW;var sY=opts.strideY||opts.stride||fH;var pX=opts.padX||opts.pad||0;var pY=opts.padY||opts.pad||0;return new MinPoolNetwork(fW,fH,sX,sY,pX,pY)}function MeanPoolNetwork(fW,fH,sX,sY,pX,pY){Network.call(this);this.filterWidth=fW;this.filterHeight=fH;this.strideX=sX;this.strideY=sY;this.padX=pX;this.padY=pY;this.name="meanpool"}MeanPoolNetwork.prototype=Object.create(Network.prototype);MeanPoolNetwork.prototype.serializeJSON=function(){return{type:"meanpool",filterWidth:this.filterWidth,filterHeight:this.filterHeight,strideX:this.strideX,strideY:this.strideY,padX:this.padX,padY:this.padY}};Network.deserializers.meanpool=function(json){return new MeanPoolNetwork(json.filterWidth,json.filterHeight,json.strideX,json.strideY,json.padX,json.padY)};var meanpooling=ad.newFunction({OutputType:Tensor,name:"meanpooling",forward:function(inImg,fW,fH,sX,sY,pX,pY){inImg=ad.value(inImg);var D=inImg.dims[0];var iH=inImg.dims[1];var iW=inImg.dims[2];var oH=Math.floor((iH+2*pY-fH)/sY+1);var oW=Math.floor((iW+2*pX-fW)/sX+1);var fN=fW*fH;var outImg=new Tensor([D,oH,oW]);for(var d=0;d<D;d++){var x=-pX;var y=-pY;for(var ay=0;ay<oH;y+=sY,ay++){x=-pX;for(var ax=0;ax<oW;x+=sX,ax++){var avgval=0;for(var fy=0;fy<fH;fy++){var iy=y+fy;for(var fx=0;fx<fW;fx++){var ix=x+fx;if(iy>=0&&iy<iH&&ix>=0&&ix<iW){var idx=ix+iW*(iy+iH*d);var v=inImg.data[idx];avgval+=v}}}var outidx=ax+oW*(ay+oH*d);outImg.data[outidx]=avgval/fN}}}return outImg},backward:function(inImg,fW,fH,sX,sY,pX,pY){var D=inImg.x.dims[0];var iH=inImg.x.dims[1];var iW=inImg.x.dims[2];var oH=this.x.dims[1];var oW=this.x.dims[2];var fN=fW*fH;for(var d=0;d<D;d++){var x=-pX;var y=-pY;for(var ay=0;ay<oH;y+=sY,ay++){x=-pX;for(var ax=0;ax<oW;x+=sX,ax++){var outidx=ax+oW*(ay+oH*d);var outDx=this.dx.data[outidx]/fN;for(var fy=0;fy<fH;fy++){var iy=y+fy;for(var fx=0;fx<fW;fx++){var ix=x+fx;if(iy>=0&&iy<iH&&ix>=0&&ix<iW){var inidx=ix+iW*(iy+iH*d);inImg.dx.data[inidx]+=outDx}}}}}}},getParents:function(inImg,fW,fH,sX,sY,pX,pY){return ad.isLifted(inImg)?[inImg]:[]}});MeanPoolNetwork.prototype.eval=function(img){return meanpooling(img,this.filterWidth,this.filterHeight,this.strideX,this.strideY,this.padX,this.padY)};function meanpool(opts){var fW=opts.filterWidth||opts.filterSize;var fH=opts.filterHeight||opts.filterSize;var sX=opts.strideX||opts.stride||fW;var sY=opts.strideY||opts.stride||fH;var pX=opts.padX||opts.pad||0;var pY=opts.padY||opts.pad||0;return new MeanPoolNetwork(fW,fH,sX,sY,pX,pY)}module.exports={maxpool:maxpool,minpool:minpool,meanpool:meanpool}},{"../../ad":34,"../../tensor.js":51,"../network.js":38}],46:[function(require,module,exports){"use strict";var utils=require("../utils.js");var methods=require("./methods.js");var optimize=require("./optimize.js");var loss=require("./loss.js");module.exports=utils.mergeObjects({},methods,optimize,loss)},{"../utils.js":52,"./loss.js":47,"./methods.js":48,"./optimize.js":49}],47:[function(require,module,exports){"use strict";var assert=require("assert");var ad=require("../ad");function classificationLoss(outputProbs,trueClassIndex){var n=ad.value(outputProbs).length;assert(trueClassIndex<n,"Training datum has true class label "+trueClassIndex+", but network only outputs "+n+" class probabilities.");return ad.scalar.neg(ad.scalar.log(ad.tensor.get(outputProbs,trueClassIndex)))}function regressionLoss(output,trueOutput){var n=ad.value(output).length;var m=trueOutput.length;assert(n===m,"Network output has different dimensionality than training data ("+n+" vs. "+m+")");var diff=ad.tensor.sub(output,trueOutput);return ad.tensor.sumreduce(ad.tensor.mul(diff,diff))}module.exports={classificationLoss:classificationLoss,regressionLoss:regressionLoss}},{"../ad":34,assert:3}],48:[function(require,module,exports){"use strict";var utils=require("../utils.js");var tstruct=require("./tensorStruct.js");var EPS=1e-8;function sgd(options){options=utils.mergeDefaults(options,{stepSize:.1,stepSizeDecay:1,mu:0});var stepSize=options.stepSize;var stepSizeIsFunction=typeof stepSize==="function";var decay=options.stepSizeDecay;var mu=options.mu;var vStruct;return function(grad,param,step){var stepSize_=stepSizeIsFunction?stepSize(step):stepSize;if(!vStruct)vStruct=tstruct.emptyLike(grad);tstruct.foreach(grad,[{struct:param,ifMissing:tstruct.ifMissing.impossible},{struct:vStruct,ifMissing:tstruct.ifMissing.zeros}],function(g,p,v){v.muleq(mu).subeq(g.mul(stepSize_));p.addeq(v)});stepSize*=decay}}function adagrad(options){options=utils.mergeDefaults(options,{stepSize:.1});var stepSize=options.stepSize;var stepSizeIsFunction=typeof stepSize==="function";var g2Struct;return function(grad,param,step){var stepSize_=stepSizeIsFunction?stepSize(step):stepSize;if(!g2Struct)g2Struct=tstruct.emptyLike(grad);tstruct.foreach(grad,[{struct:param,ifMissing:tstruct.ifMissing.impossible},{struct:g2Struct,ifMissing:tstruct.ifMissing.zeros}],function(g,p,g2){g2.addeq(g.mul(g));p.subeq(g.div(g2.sqrt().addeq(EPS)).muleq(stepSize_))})}}function rmsprop(options){options=utils.mergeDefaults(options,{stepSize:.1,decayRate:.9});var stepSize=options.stepSize;var stepSizeIsFunction=typeof stepSize==="function";var decayRate=options.decayRate;var g2Struct;return function(grad,param,step){var stepSize_=stepSizeIsFunction?stepSize(step):stepSize;if(!g2Struct)g2Struct=tstruct.emptyLike(grad);tstruct.foreach(grad,[{struct:param,ifMissing:tstruct.ifMissing.impossible},{struct:g2Struct,ifMissing:tstruct.ifMissing.zeros}],function(g,p,g2){g2.muleq(decayRate).addeq(g.mul(g).muleq(1-decayRate));p.subeq(g.div(g2.sqrt().addeq(EPS)).muleq(stepSize_))})}}function adam(options){options=utils.mergeDefaults(options,{stepSize:.001,decayRate1:.9,decayRate2:.999});var stepSize=options.stepSize;var stepSizeIsFunction=typeof stepSize==="function";var decayRate1=options.decayRate1;var decayRate2=options.decayRate2;var mStruct;var vStruct;return function(grad,param,step){var stepSize_=stepSizeIsFunction?stepSize(step):stepSize;var t=step+1;if(!mStruct)mStruct=tstruct.emptyLike(grad);if(!vStruct)vStruct=tstruct.emptyLike(grad);tstruct.foreach(grad,[{struct:param,ifMissing:tstruct.ifMissing.impossible},{struct:mStruct,ifMissing:tstruct.ifMissing.zeros},{struct:vStruct,ifMissing:tstruct.ifMissing.zeros}],function(g,p,m,v){m.muleq(decayRate1).addeq(g.mul(1-decayRate1));v.muleq(decayRate2).addeq(g.mul(g).muleq(1-decayRate2));var alpha_t=stepSize_*Math.sqrt(1-Math.pow(decayRate2,t))/(1-Math.pow(decayRate1,t));p.subeq(m.div(v.sqrt().addeq(EPS)).muleq(alpha_t))})}}module.exports={sgd:sgd,adagrad:adagrad,rmsprop:rmsprop,adam:adam}},{"../utils.js":52,"./tensorStruct.js":50}],49:[function(require,module,exports){"use strict";var assert=require("assert");var ad=require("../ad");var utils=require("../utils.js");var methods=require("./methods.js");var tstruct=require("./tensorStruct.js");function optimize(fn,options){options=utils.mergeDefaults(options,{iterations:100,method:methods.sgd(),verbose:false});var iters=options.iterations;var method=options.method;var verbose=options.verbose;for(var i=0;i<iters;i++){var rets=fn();assert(rets.gradients!==undefined);assert(rets.parameters!==undefined);method(rets.gradients,rets.parameters,i);if(verbose){console.log("[optimize] done iteration "+(i+1)+"/"+iters)}}}function makeOptimizable(fn){return function(){var rets=fn();assert(rets.parameters!==undefined);assert(rets.loss!==undefined);tstruct.foreach(rets.parameters,[],function(p){p.zeroDerivatives()});rets.loss.backprop();var newrets={gradients:tstruct.map(rets.parameters,ad.derivative),parameters:tstruct.map(rets.parameters,ad.value)};return newrets}}function adOptimize(fn,options){optimize(makeOptimizable(fn),options)}function adTrain(fn,trainingData,lossFn,options){options=utils.mergeDefaults(options,{batchSize:1});var batchSize=options.batchSize;var idx;var singleFn=makeOptimizable(function(){var trainingDatum=trainingData[idx];var rets=fn(trainingDatum.input);var loss=lossFn(rets.output,trainingDatum.output);return{parameters:rets.parameters,loss:loss}});var batchFn=function(){var gradients;var parameters;for(var i=0;i<batchSize;i++){idx=Math.floor(Math.random()*trainingData.length);var rets=singleFn();if(gradients===undefined){gradients=rets.gradients;parameters=rets.parameters}else{tstruct.foreach(rets.gradients,[{struct:gradients,ifMissing:tstruct.ifMissing.zeros},{struct:rets.parameters,ifMissing:tstruct.ifMissing.impossible},{struct:parameters,ifMissing:tstruct.ifMissing.copyFromCoStruct(1)}],function(newg,g){g.addeq(newg)})}}if(batchSize>1){tstruct.foreach(gradients,[],function(g){g.diveq(batchSize)})}return{parameters:parameters,gradients:gradients}};optimize(batchFn,options)}function nnTrain(nn,trainingData,lossFn,options){var fn=function(input){return{output:nn.eval(input),parameters:nn.getParameters()}};nn.setTraining(true);adTrain(fn,trainingData,lossFn,options);nn.setTraining(false)}module.exports={optimize:optimize,adOptimize:adOptimize,adTrain:adTrain,nnTrain:nnTrain}},{"../ad":34,"../utils.js":52,"./methods.js":48,"./tensorStruct.js":50,assert:3}],50:[function(require,module,exports){"use strict";var assert=require("assert");var utils=require("../utils.js");var Tensor=require("../tensor.js");var ad=require("../ad");function type(struct){if(struct instanceof Tensor||ad.isLifted(struct)&&ad.value(struct)instanceof Tensor){return"tensor"}else if(Array.isArray(struct)){return"array"}else if(typeof struct==="object"){return"object"}else{throw new Error("Malformed Tensor structure; expected Tensor, Array, or object, got "+typeof x)}}function emptyLike(struct){var t=type(struct);if(t==="tensor"){return new Tensor(struct.dims)}else if(t==="array"){return[]}else if(t==="object"){return{}}}function map(struct,fn){var t=type(struct);if(t==="tensor"){return fn(struct)}else if(t==="array"){var ret=[];for(var i=0;i<struct.length;i++){ret[i]=map(struct[i],fn)}return ret}else if(t==="object"){var ret={};for(var prop in struct){ret[prop]=map(struct[prop],fn)}return ret}}function foreach(struct,coIteratees,fn){var _foreach;if(coIteratees.length===0){_foreach=function(struct){var t=type(struct);if(t==="tensor"){fn(struct)}else if(t==="array"){for(var i=0;i<struct.length;i++){_foreach(struct[i])}}else if(t==="object"){for(var prop in struct){_foreach(struct[prop])}}};_foreach(struct)}else{var missingFns=coIteratees.map(function(c){return c.ifMissing});_foreach=function(struct,coStructs){var t=type(struct);if(t==="tensor"){fn.apply(null,[struct].concat(coStructs))}else if(t==="array"){var subCoStructLists=[];for(var j=0;j<struct.length;j++){var subCoStructList=[];for(var i=0;i<coStructs.length;i++)subCoStructList.push(coStructs[i][j]);subCoStructLists.push(subCoStructList)}for(var i=0;i<coStructs.length;i++){var coStruct=coStructs[i];var missing=missingFns[i];var n=struct.length;var m=coStruct.length;for(var j=m;j<n;j++){var toAdd=missing(struct[j],subCoStructLists[j]);coStruct.push(toAdd);subCoStructLists[j][i]=toAdd}}for(var j=0;j<struct.length;j++){_foreach(struct[j],subCoStructLists[j])}}else if(t==="object"){var subCoStructLists={};for(var prop in struct){var subCoStructList=[];for(var i=0;i<coStructs.length;i++)subCoStructList.push(coStructs[i][prop]);subCoStructLists[prop]=subCoStructList}for(var i=0;i<coStructs.length;i++){var coStruct=coStructs[i];var missing=missingFns[i];for(var prop in struct){if(!coStruct.hasOwnProperty(prop)){var toAdd=missing(struct[prop],subCoStructLists[prop]);coStruct[prop]=toAdd;subCoStructLists[prop][i]=toAdd}}}for(var prop in struct){_foreach(struct[prop],subCoStructLists[prop])}}};var coStructs=coIteratees.map(function(c){return c.struct});_foreach(struct,coStructs,fn)}}var ifMissing={impossible:function(struct,coStructs){throw new Error("impossible for this struct to have missing elements")},zeros:function(struct,coStructs){return map(struct,function(x){return new Tensor(x.dims)})},copyFromStruct:function(struct,coStructs){return map(struct,function(x){return x})},copyFromCoStruct:function(index){return function(struct,coStructs){return map(coStructs[index],function(x){return x})}}};module.exports={emptyLike:emptyLike,map:map,foreach:foreach,ifMissing:ifMissing}},{"../ad":34,"../tensor.js":51,"../utils.js":52,assert:3}],51:[function(require,module,exports){"use strict";var assert=require("assert");var utils=require("./utils.js");function TypedArrayBackingStore(ArrayType){return{new:function(n){return new ArrayType(n)},set:function(tgt,src,offset){tgt.set(src,offset)}}}var ArrayBackingStore={ArrayType:Array,new:function(n){var a=new Array(n);while(n--){a[n]=0}return a},set:function(tgt,src,offset){for(var i=0;i<src.length;i++){tgt[i+offset]=src[i]}}};var BackingStore=TypedArrayBackingStore(Float64Array);function Tensor(dims){this.dims=dims;var size=1;var n=dims.length;while(n--)size*=dims[n];this.length=size;this.data=BackingStore.new(size)}Object.defineProperties(Tensor.prototype,{rank:{get:function(){return this.dims.length}}});Tensor.prototype.reshape=function(dims){var size=1;var n=dims.length;while(n--)size*=dims[n];assert(size===this.length,"Tensor reshape invalid size");this.dims=dims;return this};Tensor.prototype.fill=function(val){var n=this.length;while(n--)this.data[n]=val;return this};Tensor.prototype.zero=function(){return this.fill(0)};Tensor.prototype.fillRandom=function(){var scale=1/this.length;var n=this.length;while(n--)this.data[n]=utils.gaussianSample(0,scale);return this};Tensor.prototype.copy=function(other,offset){offset=offset||0;BackingStore.set(this.data,other.data,offset);return this};Tensor.prototype.clone=function(){var copy=new Tensor(this.dims);return copy.copy(this)};Tensor.prototype.refCopy=function(other){this.dims=other.dims;this.length=other.length;this.data=other.data;return this};Tensor.prototype.refClone=function(){var t=Object.create(Tensor.prototype);return t.refCopy(this)};Tensor.prototype.get=function(coords){var idx=0;var n=this.dims.length;for(var i=0;i<n;i++){idx=idx*this.dims[i]+coords[i]}return this.data[idx]};Tensor.prototype.set=function(coords,val){var idx=0;var n=this.dims.length;for(var i=0;i<n;i++){idx=idx*this.dims[i]+coords[i]}this.data[idx]=val};function toArrayRec(tensor,coords){if(coords.length===tensor.rank){return tensor.get(coords)}else{var dim=coords.length;var arr=[];for(var i=0;i<tensor.dims[dim];i++){arr.push(toArrayRec(tensor,coords.concat([i])))}return arr}}Tensor.prototype.toArray=function(){return toArrayRec(this,[])};function fromArrayRec(tensor,coords,x){if(!(x instanceof Array)){tensor.set(coords,x)}else{var dim=coords.length;for(var i=0;i<tensor.dims[dim];i++){fromArrayRec(tensor,coords.concat([i]),x[i])}}}Tensor.prototype.fromArray=function(arr){fromArrayRec(this,[],arr);return this};Tensor.prototype.toString=function(){return this.toArray().toString()};Tensor.prototype.toFlatArray=function(){return Array.prototype.slice.call(this.data)};Tensor.prototype.fromFlatArray=function(arr){BackingStore.set(this.data,arr,0);return this};function addUnaryMethod(name,fncode){var fneq=new Function(["var n = this.data.length;","while (n--) {","\tvar x = this.data[n];","\tthis.data[n] = "+fncode+";","}","return this;"].join("\n"));Tensor.prototype[name+"eq"]=fneq;Tensor.prototype[name]=function(){var nt=this.clone();return fneq.call(nt)}}function addBinaryMethod(name,fncode){var fneqS=new Function("s",["var n = this.data.length;","var b = s;","while (n--) {","\tvar a = this.data[n];","\tthis.data[n] = "+fncode+";","}","return this;"].join("\n"));var fneqT=new Function("t",["var n = this.data.length;","while (n--) {","\tvar a = this.data[n];","\tvar b = t.data[n];","\tthis.data[n] = "+fncode+";","}","return this;"].join("\n"));var fneq=function(x){if(x.constructor===Tensor)return fneqT.call(this,x);else return fneqS.call(this,x)};Tensor.prototype[name+"eq"]=fneq;Tensor.prototype[name]=function(x){var nt=this.clone();return fneq.call(nt,x)}}function addReduction(name,initcode,fncode){Tensor.prototype[name+"reduce"]=new Function(["var accum = "+initcode+";","var n = this.data.length;","while (n--) {","\tvar x = this.data[n];","\taccum = "+fncode+";","}","return accum;"].join("\n"))}addUnaryMethod("neg","-x");addUnaryMethod("round","Math.round(x)");addUnaryMethod("log","Math.log(x)");addUnaryMethod("exp","Math.exp(x)");addUnaryMethod("sqrt","Math.sqrt(x)");addUnaryMethod("abs","Math.abs(x)");addUnaryMethod("ceil","Math.ceil(x)");addUnaryMethod("floor","Math.floor(x)");addUnaryMethod("cos","Math.cos(x)");addUnaryMethod("sin","Math.sin(x)");addUnaryMethod("tan","Math.tan(x)");addUnaryMethod("acos","Math.acos(x)");addUnaryMethod("asin","Math.asin(x)");addUnaryMethod("atan","Math.atan(x)");addUnaryMethod("cosh","Math.cosh(x)");addUnaryMethod("sinh","Math.sinh(x)");addUnaryMethod("tanh","Math.tanh(x)");addUnaryMethod("acosh","Math.acosh(x)");addUnaryMethod("asinh","Math.asinh(x)");addUnaryMethod("atanh","Math.atanh(x)");addUnaryMethod("sigmoid","1 / (1 + Math.exp(-x))");addUnaryMethod("isFinite","isFinite(x)");addUnaryMethod("isNaN","isNaN(x)");addUnaryMethod("invert","1/x");addUnaryMethod("pseudoinvert","x === 0 ? 0 : 1/x");addBinaryMethod("add","a + b");addBinaryMethod("sub","a - b");addBinaryMethod("mul","a * b");addBinaryMethod("div","a / b");addBinaryMethod("mod","a % b");addBinaryMethod("min","Math.min(a, b)");addBinaryMethod("max","Math.max(a, b)");addBinaryMethod("pow","Math.pow(a, b)");addBinaryMethod("atan2","Math.atan2(a, b)");addBinaryMethod("eq","a === b");addBinaryMethod("neq","a !== b");addBinaryMethod("gt","a > b");addBinaryMethod("ge","a >= b");addBinaryMethod("lt","a < b");addBinaryMethod("le","a <= b");addReduction("sum","0","accum + x");addReduction("min","Infinity","Math.min(accum, x)");addReduction("max","-Infinity","Math.max(accum, x)");addReduction("all","true","accum && (x !== 0)");addReduction("any","false","accum || (x !== 0)");Tensor.prototype.softmax=function(){var max=-Infinity;var n=this.data.length;while(n--){max=Math.max(max,this.data[n])}var t=new Tensor(this.dims);n=this.data.length;var sum=0;while(n--){t.data[n]=Math.exp(this.data[n]-max);sum+=t.data[n]}n=this.data.length;while(n--){t.data[n]/=sum}return t};Tensor.prototype.transpose=function(){assert.ok(this.rank===2);var h=this.dims[0];var w=this.dims[1];var y=new Tensor([w,h]);for(var i=0;i<h;i++){for(var j=0;j<w;j++){y.data[j*h+i]=this.data[i*w+j]}}return y};Tensor.prototype.diagonal=function(){assert.ok(this.rank===2);assert.ok(this.dims[1]===1);var n=this.dims[0];var y=new Tensor([n,n]);for(var i=0;i<n;i++){y.data[i*(n+1)]=this.data[i]}return y};Tensor.prototype.inverse=function(){assert.ok(this.rank===2);assert.ok(this.dims[0]===this.dims[1]);var n=this.dims[0];var Ai,Aj;var Ii,Ij;var i,j,k,x;var A=[];for(i=0;i<n;i++){Ai=new Float64Array(n);A.push(Ai);for(j=0;j<n;j++){Ai[j]=this.data[i*n+j]}}var I=[];for(i=0;i<n;i++){Ii=new Array(n);I.push(Ii);for(j=0;j<n;j++){Ii[j]=i===j?1:0}}for(j=0;j<n;++j){var i0=-1;var v0=-1;for(i=j;i!==n;++i){k=Math.abs(A[i][j]);if(k>v0){i0=i;v0=k}}Aj=A[i0];A[i0]=A[j];A[j]=Aj;Ij=I[i0];I[i0]=I[j];I[j]=Ij;x=Aj[j];for(k=j;k!==n;++k){Aj[k]/=x}for(k=n-1;k!==-1;--k){Ij[k]/=x}for(i=n-1;i!==-1;--i){if(i!==j){Ai=A[i];Ii=I[i];x=Ai[j];for(k=j+1;k!==n;++k){Ai[k]-=Aj[k]*x}for(k=n-1;k>0;--k){Ii[k]-=Ij[k]*x;--k;Ii[k]-=Ij[k]*x}if(k===0){Ii[0]-=Ij[0]*x}}}}return new Tensor([n,n]).fromArray(I)};Tensor.prototype.determinant=function(){assert.ok(this.rank===2);assert.ok(this.dims[0]===this.dims[1]);var n=this.dims[0];var ret=1;var i,j,k;var Aj,Ai,alpha,temp,k1,k2,k3;var A=[];for(i=0;i<n;i++){Ai=new Float64Array(n);A.push(Ai);for(j=0;j<n;j++){Ai[j]=this.data[i*n+j]}}for(j=0;j<n-1;j++){k=j;for(i=j+1;i<n;i++){if(Math.abs(A[i][j])>Math.abs(A[k][j])){k=i}}if(k!==j){temp=A[k];A[k]=A[j];A[j]=temp;ret*=-1}Aj=A[j];for(i=j+1;i<n;i++){Ai=A[i];alpha=Ai[j]/Aj[j];for(k=j+1;k<n-1;k+=2){k1=k+1;Ai[k]-=Aj[k]*alpha;Ai[k1]-=Aj[k1]*alpha}if(k!==n){Ai[k]-=Aj[k]*alpha}}if(Aj[j]===0){return 0}ret*=Aj[j]}return ret*A[j][j]};Tensor.prototype.dot=function(t){var a=this,b=t;if(a.rank!==2||b.rank!==2){throw new Error("Inputs to dot should have rank = 2.")}if(a.dims[1]!==b.dims[0]){throw new Error("Dimension mismatch in dot. Inputs have dimension "+a.dims+" and "+b.dims+".")}var l=a.dims[1];var h=a.dims[0],w=b.dims[1];var y=new Tensor([h,w]);for(var r=0;r<h;r++){for(var c=0;c<w;c++){var z=0;for(var i=0;i<l;i++){z+=a.data[r*l+i]*b.data[w*i+c]}y.data[r*w+c]=z}}return y};Tensor.prototype.cholesky=function(){var a=this;assert.ok(a.rank===2&&a.dims[0]===a.dims[1],"cholesky is only defined for square matrices.");var s;var n=a.dims[0];var L=new Tensor([n,n]);for(var i=0;i<n;i++){for(var j=0;j<=i;j++){s=0;for(var k=0;k<j;k++){s+=L.data[i*n+k]*L.data[j*n+k]}L.data[i*n+j]=i===j?Math.sqrt(a.data[i*n+i]-s):1/L.data[j*n+j]*(a.data[i*n+j]-s)}}return L};Tensor.prototype.tril=function(){var a=this;assert.ok(a.rank===2&&a.dims[0]===a.dims[1],"tril is only defined for square matrices.");var n=a.dims[0];var ret=new Tensor([n,n]);for(var i=0;i<n;i++){for(var j=0;j<=i;j++){ret.data[i*n+j]=a.data[i*n+j]}}return ret};module.exports=Tensor},{"./utils.js":52,assert:3}],52:[function(require,module,exports){"use strict";function gaussianSample(mu,sigma){var u,v,x,y,q;do{u=1-Math.random();v=1.7156*(Math.random()-.5);x=u-.449871;y=Math.abs(v)+.386595;q=x*x+y*(.196*y-.25472*x)}while(q>=.27597&&(q>.27846||v*v>-4*u*u*Math.log(u)));return mu+sigma*v/u}function deduplicate(list){var retlist=[];for(var i=0;i<list.length;i++){var item=list[i];if(retlist.indexOf(item)===-1){retlist.push(item)}}return retlist}function mergeObjects(tgt){tgt=tgt||{};for(var i=1;i<arguments.length;i++){var src=arguments[i];for(var prop in src){tgt[prop]=src[prop]}}return tgt}function cloneObject(obj){return mergeObjects({},obj)}function mergeDefaults(obj,defaults){return mergeObjects({},defaults,obj)}module.exports={gaussianSample:gaussianSample,deduplicate:deduplicate,mergeObjects:mergeObjects,cloneObject:cloneObject,mergeDefaults:mergeDefaults}},{}],53:[function(require,module,exports){module.exports=function(fork){fork.use(require("./es7"));var types=fork.use(require("../lib/types"));var defaults=fork.use(require("../lib/shared")).defaults;var def=types.Type.def;var or=types.Type.or;def("Noop").bases("Node").build();def("DoExpression").bases("Expression").build("body").field("body",[def("Statement")]);def("Super").bases("Expression").build();def("BindExpression").bases("Expression").build("object","callee").field("object",or(def("Expression"),null)).field("callee",def("Expression"));def("Decorator").bases("Node").build("expression").field("expression",def("Expression"));def("Property").field("decorators",or([def("Decorator")],null),defaults["null"]);def("MethodDefinition").field("decorators",or([def("Decorator")],null),defaults["null"]);def("MetaProperty").bases("Expression").build("meta","property").field("meta",def("Identifier")).field("property",def("Identifier"));def("ParenthesizedExpression").bases("Expression").build("expression").field("expression",def("Expression"));def("ImportSpecifier").bases("ModuleSpecifier").build("imported","local").field("imported",def("Identifier"));def("ImportDefaultSpecifier").bases("ModuleSpecifier").build("local");def("ImportNamespaceSpecifier").bases("ModuleSpecifier").build("local");def("ExportDefaultDeclaration").bases("Declaration").build("declaration").field("declaration",or(def("Declaration"),def("Expression")));def("ExportNamedDeclaration").bases("Declaration").build("declaration","specifiers","source").field("declaration",or(def("Declaration"),null)).field("specifiers",[def("ExportSpecifier")],defaults.emptyArray).field("source",or(def("Literal"),null),defaults["null"]);def("ExportSpecifier").bases("ModuleSpecifier").build("local","exported").field("exported",def("Identifier"));def("ExportNamespaceSpecifier").bases("Specifier").build("exported").field("exported",def("Identifier"));def("ExportDefaultSpecifier").bases("Specifier").build("exported").field("exported",def("Identifier"));def("ExportAllDeclaration").bases("Declaration").build("exported","source").field("exported",or(def("Identifier"),null)).field("source",def("Literal"));def("CommentBlock").bases("Comment").build("value","leading","trailing");def("CommentLine").bases("Comment").build("value","leading","trailing")}},{"../lib/shared":70,"../lib/types":71,"./es7":59}],54:[function(require,module,exports){module.exports=function(fork){fork.use(require("./babel"));var types=fork.use(require("../lib/types"));var defaults=fork.use(require("../lib/shared")).defaults;var def=types.Type.def;var or=types.Type.or;def("Directive").bases("Node").build("value").field("value",def("DirectiveLiteral"));def("DirectiveLiteral").bases("Node","Expression").build("value").field("value",String,defaults["use strict"]);def("BlockStatement").bases("Statement").build("body").field("body",[def("Statement")]).field("directives",[def("Directive")],defaults.emptyArray);def("Program").bases("Node").build("body").field("body",[def("Statement")]).field("directives",[def("Directive")],defaults.emptyArray);def("StringLiteral").bases("Literal").build("value").field("value",String);def("NumericLiteral").bases("Literal").build("value").field("value",Number);def("NullLiteral").bases("Literal").build().field("value",null,defaults["null"]);def("BooleanLiteral").bases("Literal").build("value").field("value",Boolean);def("RegExpLiteral").bases("Literal").build("pattern","flags").field("pattern",String).field("flags",String).field("value",RegExp,function(){return new RegExp(this.pattern,this.flags)});var ObjectExpressionProperty=or(def("Property"),def("ObjectMethod"),def("ObjectProperty"),def("SpreadProperty"));def("ObjectExpression").bases("Expression").build("properties").field("properties",[ObjectExpressionProperty]);def("ObjectMethod").bases("Node","Function").build("kind","key","params","body","computed").field("kind",or("method","get","set")).field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("params",[def("Pattern")]).field("body",def("BlockStatement")).field("computed",Boolean,defaults["false"]).field("generator",Boolean,defaults["false"]).field("async",Boolean,defaults["false"]).field("decorators",or([def("Decorator")],null),defaults["null"]);def("ObjectProperty").bases("Node").build("key","value").field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("value",or(def("Expression"),def("Pattern"))).field("computed",Boolean,defaults["false"]);var ClassBodyElement=or(def("MethodDefinition"),def("VariableDeclarator"),def("ClassPropertyDefinition"),def("ClassProperty"),def("ClassMethod"));def("ClassBody").bases("Declaration").build("body").field("body",[ClassBodyElement]);def("ClassMethod").bases("Declaration","Function").build("kind","key","params","body","computed","static").field("kind",or("get","set","method","constructor")).field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("params",[def("Pattern")]).field("body",def("BlockStatement")).field("computed",Boolean,defaults["false"]).field("static",Boolean,defaults["false"]).field("generator",Boolean,defaults["false"]).field("async",Boolean,defaults["false"]).field("decorators",or([def("Decorator")],null),defaults["null"]);var ObjectPatternProperty=or(def("Property"),def("PropertyPattern"),def("SpreadPropertyPattern"),def("SpreadProperty"),def("ObjectProperty"),def("RestProperty"));def("ObjectPattern").bases("Pattern").build("properties").field("properties",[ObjectPatternProperty]).field("decorators",or([def("Decorator")],null),defaults["null"]);def("SpreadProperty").bases("Node").build("argument").field("argument",def("Expression"));def("RestProperty").bases("Node").build("argument").field("argument",def("Expression"));def("ForAwaitStatement").bases("Statement").build("left","right","body").field("left",or(def("VariableDeclaration"),def("Expression"))).field("right",def("Expression")).field("body",def("Statement"));def("Import").bases("Expression").build()}},{"../lib/shared":70,"../lib/types":71,"./babel":53}],55:[function(require,module,exports){module.exports=function(fork){fork.use(require("./babel6-core"));fork.use(require("./flow"))}},{"./babel6-core":54,"./flow":61}],56:[function(require,module,exports){module.exports=function(fork){var types=fork.use(require("../lib/types"));var Type=types.Type;var def=Type.def;var or=Type.or;var shared=fork.use(require("../lib/shared"));var defaults=shared.defaults;var geq=shared.geq;def("Printable").field("loc",or(def("SourceLocation"),null),defaults["null"],true);def("Node").bases("Printable").field("type",String).field("comments",or([def("Comment")],null),defaults["null"],true);def("SourceLocation").build("start","end","source").field("start",def("Position")).field("end",def("Position")).field("source",or(String,null),defaults["null"]);def("Position").build("line","column").field("line",geq(1)).field("column",geq(0));def("File").bases("Node").build("program","name").field("program",def("Program")).field("name",or(String,null),defaults["null"]);def("Program").bases("Node").build("body").field("body",[def("Statement")]);def("Function").bases("Node").field("id",or(def("Identifier"),null),defaults["null"]).field("params",[def("Pattern")]).field("body",def("BlockStatement"));def("Statement").bases("Node");def("EmptyStatement").bases("Statement").build();def("BlockStatement").bases("Statement").build("body").field("body",[def("Statement")]);def("ExpressionStatement").bases("Statement").build("expression").field("expression",def("Expression"));def("IfStatement").bases("Statement").build("test","consequent","alternate").field("test",def("Expression")).field("consequent",def("Statement")).field("alternate",or(def("Statement"),null),defaults["null"]);def("LabeledStatement").bases("Statement").build("label","body").field("label",def("Identifier")).field("body",def("Statement"));def("BreakStatement").bases("Statement").build("label").field("label",or(def("Identifier"),null),defaults["null"]);def("ContinueStatement").bases("Statement").build("label").field("label",or(def("Identifier"),null),defaults["null"]);def("WithStatement").bases("Statement").build("object","body").field("object",def("Expression")).field("body",def("Statement"));def("SwitchStatement").bases("Statement").build("discriminant","cases","lexical").field("discriminant",def("Expression")).field("cases",[def("SwitchCase")]).field("lexical",Boolean,defaults["false"]);def("ReturnStatement").bases("Statement").build("argument").field("argument",or(def("Expression"),null));def("ThrowStatement").bases("Statement").build("argument").field("argument",def("Expression"));def("TryStatement").bases("Statement").build("block","handler","finalizer").field("block",def("BlockStatement")).field("handler",or(def("CatchClause"),null),function(){return this.handlers&&this.handlers[0]||null}).field("handlers",[def("CatchClause")],function(){return this.handler?[this.handler]:[]},true).field("guardedHandlers",[def("CatchClause")],defaults.emptyArray).field("finalizer",or(def("BlockStatement"),null),defaults["null"]);def("CatchClause").bases("Node").build("param","guard","body").field("param",def("Pattern")).field("guard",or(def("Expression"),null),defaults["null"]).field("body",def("BlockStatement"));def("WhileStatement").bases("Statement").build("test","body").field("test",def("Expression")).field("body",def("Statement"));def("DoWhileStatement").bases("Statement").build("body","test").field("body",def("Statement")).field("test",def("Expression"));def("ForStatement").bases("Statement").build("init","test","update","body").field("init",or(def("VariableDeclaration"),def("Expression"),null)).field("test",or(def("Expression"),null)).field("update",or(def("Expression"),null)).field("body",def("Statement"));def("ForInStatement").bases("Statement").build("left","right","body").field("left",or(def("VariableDeclaration"),def("Expression"))).field("right",def("Expression")).field("body",def("Statement"));def("DebuggerStatement").bases("Statement").build();def("Declaration").bases("Statement");def("FunctionDeclaration").bases("Function","Declaration").build("id","params","body").field("id",def("Identifier"));def("FunctionExpression").bases("Function","Expression").build("id","params","body");def("VariableDeclaration").bases("Declaration").build("kind","declarations").field("kind",or("var","let","const")).field("declarations",[def("VariableDeclarator")]);def("VariableDeclarator").bases("Node").build("id","init").field("id",def("Pattern")).field("init",or(def("Expression"),null));def("Expression").bases("Node","Pattern");def("ThisExpression").bases("Expression").build();def("ArrayExpression").bases("Expression").build("elements").field("elements",[or(def("Expression"),null)]);def("ObjectExpression").bases("Expression").build("properties").field("properties",[def("Property")]);def("Property").bases("Node").build("kind","key","value").field("kind",or("init","get","set")).field("key",or(def("Literal"),def("Identifier"))).field("value",def("Expression"));def("SequenceExpression").bases("Expression").build("expressions").field("expressions",[def("Expression")]);var UnaryOperator=or("-","+","!","~","typeof","void","delete");def("UnaryExpression").bases("Expression").build("operator","argument","prefix").field("operator",UnaryOperator).field("argument",def("Expression")).field("prefix",Boolean,defaults["true"]);var BinaryOperator=or("==","!=","===","!==","<","<=",">",">=","<<",">>",">>>","+","-","*","/","%","&","|","^","in","instanceof","..");def("BinaryExpression").bases("Expression").build("operator","left","right").field("operator",BinaryOperator).field("left",def("Expression")).field("right",def("Expression"));var AssignmentOperator=or("=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","|=","^=","&=");def("AssignmentExpression").bases("Expression").build("operator","left","right").field("operator",AssignmentOperator).field("left",def("Pattern")).field("right",def("Expression"));var UpdateOperator=or("++","--");def("UpdateExpression").bases("Expression").build("operator","argument","prefix").field("operator",UpdateOperator).field("argument",def("Expression")).field("prefix",Boolean);var LogicalOperator=or("||","&&");def("LogicalExpression").bases("Expression").build("operator","left","right").field("operator",LogicalOperator).field("left",def("Expression")).field("right",def("Expression"));def("ConditionalExpression").bases("Expression").build("test","consequent","alternate").field("test",def("Expression")).field("consequent",def("Expression")).field("alternate",def("Expression"));def("NewExpression").bases("Expression").build("callee","arguments").field("callee",def("Expression")).field("arguments",[def("Expression")]);def("CallExpression").bases("Expression").build("callee","arguments").field("callee",def("Expression")).field("arguments",[def("Expression")]);def("MemberExpression").bases("Expression").build("object","property","computed").field("object",def("Expression")).field("property",or(def("Identifier"),def("Expression"))).field("computed",Boolean,function(){var type=this.property.type;if(type==="Literal"||type==="MemberExpression"||type==="BinaryExpression"){return true}return false});def("Pattern").bases("Node");def("SwitchCase").bases("Node").build("test","consequent").field("test",or(def("Expression"),null)).field("consequent",[def("Statement")]);def("Identifier").bases("Node","Expression","Pattern").build("name").field("name",String);def("Literal").bases("Node","Expression").build("value").field("value",or(String,Boolean,null,Number,RegExp)).field("regex",or({pattern:String,flags:String},null),function(){if(this.value instanceof RegExp){var flags="";if(this.value.ignoreCase)flags+="i";if(this.value.multiline)flags+="m";if(this.value.global)flags+="g";return{pattern:this.value.source,flags:flags}}return null});def("Comment").bases("Printable").field("value",String).field("leading",Boolean,defaults["true"]).field("trailing",Boolean,defaults["false"])}},{"../lib/shared":70,"../lib/types":71}],57:[function(require,module,exports){module.exports=function(fork){fork.use(require("./core"));var types=fork.use(require("../lib/types"));var def=types.Type.def;var or=types.Type.or;def("XMLDefaultDeclaration").bases("Declaration").field("namespace",def("Expression"));def("XMLAnyName").bases("Expression");def("XMLQualifiedIdentifier").bases("Expression").field("left",or(def("Identifier"),def("XMLAnyName"))).field("right",or(def("Identifier"),def("Expression"))).field("computed",Boolean);def("XMLFunctionQualifiedIdentifier").bases("Expression").field("right",or(def("Identifier"),def("Expression"))).field("computed",Boolean);def("XMLAttributeSelector").bases("Expression").field("attribute",def("Expression"));def("XMLFilterExpression").bases("Expression").field("left",def("Expression")).field("right",def("Expression"));def("XMLElement").bases("XML","Expression").field("contents",[def("XML")]);def("XMLList").bases("XML","Expression").field("contents",[def("XML")]);def("XML").bases("Node");def("XMLEscape").bases("XML").field("expression",def("Expression"));def("XMLText").bases("XML").field("text",String);def("XMLStartTag").bases("XML").field("contents",[def("XML")]);def("XMLEndTag").bases("XML").field("contents",[def("XML")]);def("XMLPointTag").bases("XML").field("contents",[def("XML")]);def("XMLName").bases("XML").field("contents",or(String,[def("XML")]));def("XMLAttribute").bases("XML").field("value",String);def("XMLCdata").bases("XML").field("contents",String);def("XMLComment").bases("XML").field("contents",String);def("XMLProcessingInstruction").bases("XML").field("target",String).field("contents",or(String,null))}},{"../lib/types":71,"./core":56}],58:[function(require,module,exports){module.exports=function(fork){fork.use(require("./core"));var types=fork.use(require("../lib/types"));var def=types.Type.def;var or=types.Type.or;var defaults=fork.use(require("../lib/shared")).defaults;def("Function").field("generator",Boolean,defaults["false"]).field("expression",Boolean,defaults["false"]).field("defaults",[or(def("Expression"),null)],defaults.emptyArray).field("rest",or(def("Identifier"),null),defaults["null"]);def("RestElement").bases("Pattern").build("argument").field("argument",def("Pattern"));def("SpreadElementPattern").bases("Pattern").build("argument").field("argument",def("Pattern"));def("FunctionDeclaration").build("id","params","body","generator","expression");def("FunctionExpression").build("id","params","body","generator","expression");def("ArrowFunctionExpression").bases("Function","Expression").build("params","body","expression").field("id",null,defaults["null"]).field("body",or(def("BlockStatement"),def("Expression"))).field("generator",false,defaults["false"]);def("ForOfStatement").bases("Statement").build("left","right","body").field("left",or(def("VariableDeclaration"),def("Pattern"))).field("right",def("Expression")).field("body",def("Statement"));def("YieldExpression").bases("Expression").build("argument","delegate").field("argument",or(def("Expression"),null)).field("delegate",Boolean,defaults["false"]);def("GeneratorExpression").bases("Expression").build("body","blocks","filter").field("body",def("Expression")).field("blocks",[def("ComprehensionBlock")]).field("filter",or(def("Expression"),null));def("ComprehensionExpression").bases("Expression").build("body","blocks","filter").field("body",def("Expression")).field("blocks",[def("ComprehensionBlock")]).field("filter",or(def("Expression"),null));def("ComprehensionBlock").bases("Node").build("left","right","each").field("left",def("Pattern")).field("right",def("Expression")).field("each",Boolean);def("Property").field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("value",or(def("Expression"),def("Pattern"))).field("method",Boolean,defaults["false"]).field("shorthand",Boolean,defaults["false"]).field("computed",Boolean,defaults["false"]);def("PropertyPattern").bases("Pattern").build("key","pattern").field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("pattern",def("Pattern")).field("computed",Boolean,defaults["false"]);def("ObjectPattern").bases("Pattern").build("properties").field("properties",[or(def("PropertyPattern"),def("Property"))]);def("ArrayPattern").bases("Pattern").build("elements").field("elements",[or(def("Pattern"),null)]);def("MethodDefinition").bases("Declaration").build("kind","key","value","static").field("kind",or("constructor","method","get","set")).field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("value",def("Function")).field("computed",Boolean,defaults["false"]).field("static",Boolean,defaults["false"]);def("SpreadElement").bases("Node").build("argument").field("argument",def("Expression"));def("ArrayExpression").field("elements",[or(def("Expression"),def("SpreadElement"),def("RestElement"),null)]);def("NewExpression").field("arguments",[or(def("Expression"),def("SpreadElement"))]);def("CallExpression").field("arguments",[or(def("Expression"),def("SpreadElement"))]);def("AssignmentPattern").bases("Pattern").build("left","right").field("left",def("Pattern")).field("right",def("Expression"));var ClassBodyElement=or(def("MethodDefinition"),def("VariableDeclarator"),def("ClassPropertyDefinition"),def("ClassProperty"));def("ClassProperty").bases("Declaration").build("key").field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("computed",Boolean,defaults["false"]);def("ClassPropertyDefinition").bases("Declaration").build("definition").field("definition",ClassBodyElement);def("ClassBody").bases("Declaration").build("body").field("body",[ClassBodyElement]);def("ClassDeclaration").bases("Declaration").build("id","body","superClass").field("id",or(def("Identifier"),null)).field("body",def("ClassBody")).field("superClass",or(def("Expression"),null),defaults["null"]);def("ClassExpression").bases("Expression").build("id","body","superClass").field("id",or(def("Identifier"),null),defaults["null"]).field("body",def("ClassBody")).field("superClass",or(def("Expression"),null),defaults["null"]).field("implements",[def("ClassImplements")],defaults.emptyArray);def("ClassImplements").bases("Node").build("id").field("id",def("Identifier")).field("superClass",or(def("Expression"),null),defaults["null"]);def("Specifier").bases("Node");def("ModuleSpecifier").bases("Specifier").field("local",or(def("Identifier"),null),defaults["null"]).field("id",or(def("Identifier"),null),defaults["null"]).field("name",or(def("Identifier"),null),defaults["null"]);def("TaggedTemplateExpression").bases("Expression").build("tag","quasi").field("tag",def("Expression")).field("quasi",def("TemplateLiteral"));def("TemplateLiteral").bases("Expression").build("quasis","expressions").field("quasis",[def("TemplateElement")]).field("expressions",[def("Expression")]);def("TemplateElement").bases("Node").build("value","tail").field("value",{cooked:String,raw:String}).field("tail",Boolean)}},{"../lib/shared":70,"../lib/types":71,"./core":56}],59:[function(require,module,exports){module.exports=function(fork){fork.use(require("./es6"));var types=fork.use(require("../lib/types"));var def=types.Type.def;var or=types.Type.or;var builtin=types.builtInTypes;var defaults=fork.use(require("../lib/shared")).defaults;def("Function").field("async",Boolean,defaults["false"]);def("SpreadProperty").bases("Node").build("argument").field("argument",def("Expression"));def("ObjectExpression").field("properties",[or(def("Property"),def("SpreadProperty"))]);def("SpreadPropertyPattern").bases("Pattern").build("argument").field("argument",def("Pattern"));def("ObjectPattern").field("properties",[or(def("Property"),def("PropertyPattern"),def("SpreadPropertyPattern"))]);def("AwaitExpression").bases("Expression").build("argument","all").field("argument",or(def("Expression"),null)).field("all",Boolean,defaults["false"])}},{"../lib/shared":70,"../lib/types":71,"./es6":58}],60:[function(require,module,exports){module.exports=function(fork){fork.use(require("./es7"));var types=fork.use(require("../lib/types"));var defaults=fork.use(require("../lib/shared")).defaults;var def=types.Type.def;var or=types.Type.or;def("VariableDeclaration").field("declarations",[or(def("VariableDeclarator"),def("Identifier"))]);def("Property").field("value",or(def("Expression"),def("Pattern")));def("ArrayPattern").field("elements",[or(def("Pattern"),def("SpreadElement"),null)]);def("ObjectPattern").field("properties",[or(def("Property"),def("PropertyPattern"),def("SpreadPropertyPattern"),def("SpreadProperty"))]);def("ExportSpecifier").bases("ModuleSpecifier").build("id","name");def("ExportBatchSpecifier").bases("Specifier").build();def("ImportSpecifier").bases("ModuleSpecifier").build("id","name");def("ImportNamespaceSpecifier").bases("ModuleSpecifier").build("id");def("ImportDefaultSpecifier").bases("ModuleSpecifier").build("id");def("ExportDeclaration").bases("Declaration").build("default","declaration","specifiers","source").field("default",Boolean).field("declaration",or(def("Declaration"),def("Expression"),null)).field("specifiers",[or(def("ExportSpecifier"),def("ExportBatchSpecifier"))],defaults.emptyArray).field("source",or(def("Literal"),null),defaults["null"]);def("ImportDeclaration").bases("Declaration").build("specifiers","source","importKind").field("specifiers",[or(def("ImportSpecifier"),def("ImportNamespaceSpecifier"),def("ImportDefaultSpecifier"))],defaults.emptyArray).field("source",def("Literal")).field("importKind",or("value","type"),function(){return"value"});def("Block").bases("Comment").build("value","leading","trailing");def("Line").bases("Comment").build("value","leading","trailing")}},{"../lib/shared":70,"../lib/types":71,"./es7":59}],61:[function(require,module,exports){module.exports=function(fork){fork.use(require("./es7"));var types=fork.use(require("../lib/types"));var def=types.Type.def;var or=types.Type.or;var defaults=fork.use(require("../lib/shared")).defaults;def("Type").bases("Node");def("AnyTypeAnnotation").bases("Type").build();def("EmptyTypeAnnotation").bases("Type").build();def("MixedTypeAnnotation").bases("Type").build();def("VoidTypeAnnotation").bases("Type").build();def("NumberTypeAnnotation").bases("Type").build();def("NumberLiteralTypeAnnotation").bases("Type").build("value","raw").field("value",Number).field("raw",String);def("NumericLiteralTypeAnnotation").bases("Type").build("value","raw").field("value",Number).field("raw",String);def("StringTypeAnnotation").bases("Type").build();def("StringLiteralTypeAnnotation").bases("Type").build("value","raw").field("value",String).field("raw",String);def("BooleanTypeAnnotation").bases("Type").build();def("BooleanLiteralTypeAnnotation").bases("Type").build("value","raw").field("value",Boolean).field("raw",String);def("TypeAnnotation").bases("Node").build("typeAnnotation").field("typeAnnotation",def("Type"));def("NullableTypeAnnotation").bases("Type").build("typeAnnotation").field("typeAnnotation",def("Type"));def("NullLiteralTypeAnnotation").bases("Type").build();def("NullTypeAnnotation").bases("Type").build();def("ThisTypeAnnotation").bases("Type").build();def("ExistsTypeAnnotation").bases("Type").build();def("ExistentialTypeParam").bases("Type").build();def("FunctionTypeAnnotation").bases("Type").build("params","returnType","rest","typeParameters").field("params",[def("FunctionTypeParam")]).field("returnType",def("Type")).field("rest",or(def("FunctionTypeParam"),null)).field("typeParameters",or(def("TypeParameterDeclaration"),null));def("FunctionTypeParam").bases("Node").build("name","typeAnnotation","optional").field("name",def("Identifier")).field("typeAnnotation",def("Type")).field("optional",Boolean);def("ArrayTypeAnnotation").bases("Type").build("elementType").field("elementType",def("Type"));def("ObjectTypeAnnotation").bases("Type").build("properties","indexers","callProperties").field("properties",[def("ObjectTypeProperty")]).field("indexers",[def("ObjectTypeIndexer")],defaults.emptyArray).field("callProperties",[def("ObjectTypeCallProperty")],defaults.emptyArray).field("exact",Boolean,defaults["false"]);def("ObjectTypeProperty").bases("Node").build("key","value","optional").field("key",or(def("Literal"),def("Identifier"))).field("value",def("Type")).field("optional",Boolean).field("variance",or("plus","minus",null),defaults["null"]);def("ObjectTypeIndexer").bases("Node").build("id","key","value").field("id",def("Identifier")).field("key",def("Type")).field("value",def("Type")).field("variance",or("plus","minus",null),defaults["null"]);def("ObjectTypeCallProperty").bases("Node").build("value").field("value",def("FunctionTypeAnnotation")).field("static",Boolean,defaults["false"]);def("QualifiedTypeIdentifier").bases("Node").build("qualification","id").field("qualification",or(def("Identifier"),def("QualifiedTypeIdentifier"))).field("id",def("Identifier"));def("GenericTypeAnnotation").bases("Type").build("id","typeParameters").field("id",or(def("Identifier"),def("QualifiedTypeIdentifier"))).field("typeParameters",or(def("TypeParameterInstantiation"),null));def("MemberTypeAnnotation").bases("Type").build("object","property").field("object",def("Identifier")).field("property",or(def("MemberTypeAnnotation"),def("GenericTypeAnnotation")));def("UnionTypeAnnotation").bases("Type").build("types").field("types",[def("Type")]);def("IntersectionTypeAnnotation").bases("Type").build("types").field("types",[def("Type")]);def("TypeofTypeAnnotation").bases("Type").build("argument").field("argument",def("Type"));def("ObjectTypeSpreadProperty").bases("Node").build("argument").field("argument",def("Type"));def("Identifier").field("typeAnnotation",or(def("TypeAnnotation"),null),defaults["null"]);def("ObjectPattern").field("typeAnnotation",or(def("TypeAnnotation"),null),defaults["null"]);def("TypeParameterDeclaration").bases("Node").build("params").field("params",[def("TypeParameter")]);def("TypeParameterInstantiation").bases("Node").build("params").field("params",[def("Type")]);def("TypeParameter").bases("Type").build("name","variance","bound").field("name",String).field("variance",or("plus","minus",null),defaults["null"]).field("bound",or(def("TypeAnnotation"),null),defaults["null"]);def("Function").field("returnType",or(def("TypeAnnotation"),null),defaults["null"]).field("typeParameters",or(def("TypeParameterDeclaration"),null),defaults["null"]);def("ClassProperty").build("key","value","typeAnnotation","static").field("value",or(def("Expression"),null)).field("typeAnnotation",or(def("TypeAnnotation"),null)).field("static",Boolean,defaults["false"]).field("variance",or("plus","minus",null),defaults["null"]);def("ClassImplements").field("typeParameters",or(def("TypeParameterInstantiation"),null),defaults["null"]);def("InterfaceDeclaration").bases("Declaration").build("id","body","extends").field("id",def("Identifier")).field("typeParameters",or(def("TypeParameterDeclaration"),null),defaults["null"]).field("body",def("ObjectTypeAnnotation")).field("extends",[def("InterfaceExtends")]);def("DeclareInterface").bases("InterfaceDeclaration").build("id","body","extends");def("InterfaceExtends").bases("Node").build("id").field("id",def("Identifier")).field("typeParameters",or(def("TypeParameterInstantiation"),null));def("TypeAlias").bases("Declaration").build("id","typeParameters","right").field("id",def("Identifier")).field("typeParameters",or(def("TypeParameterDeclaration"),null)).field("right",def("Type"));def("DeclareTypeAlias").bases("TypeAlias").build("id","typeParameters","right");def("TypeCastExpression").bases("Expression").build("expression","typeAnnotation").field("expression",def("Expression")).field("typeAnnotation",def("TypeAnnotation"));def("TupleTypeAnnotation").bases("Type").build("types").field("types",[def("Type")]);def("DeclareVariable").bases("Statement").build("id").field("id",def("Identifier"));def("DeclareFunction").bases("Statement").build("id").field("id",def("Identifier"));def("DeclareClass").bases("InterfaceDeclaration").build("id");def("DeclareModule").bases("Statement").build("id","body").field("id",or(def("Identifier"),def("Literal"))).field("body",def("BlockStatement"));def("DeclareModuleExports").bases("Statement").build("typeAnnotation").field("typeAnnotation",def("Type"));def("DeclareExportDeclaration").bases("Declaration").build("default","declaration","specifiers","source").field("default",Boolean).field("declaration",or(def("DeclareVariable"),def("DeclareFunction"),def("DeclareClass"),def("Type"),null)).field("specifiers",[or(def("ExportSpecifier"),def("ExportBatchSpecifier"))],defaults.emptyArray).field("source",or(def("Literal"),null),defaults["null"]);def("DeclareExportAllDeclaration").bases("Declaration").build("source").field("source",or(def("Literal"),null),defaults["null"])}},{"../lib/shared":70,"../lib/types":71,"./es7":59}],62:[function(require,module,exports){module.exports=function(fork){fork.use(require("./es7"));var types=fork.use(require("../lib/types"));var def=types.Type.def;var or=types.Type.or;var defaults=fork.use(require("../lib/shared")).defaults;def("JSXAttribute").bases("Node").build("name","value").field("name",or(def("JSXIdentifier"),def("JSXNamespacedName"))).field("value",or(def("Literal"),def("JSXExpressionContainer"),null),defaults["null"]);def("JSXIdentifier").bases("Identifier").build("name").field("name",String);def("JSXNamespacedName").bases("Node").build("namespace","name").field("namespace",def("JSXIdentifier")).field("name",def("JSXIdentifier"));def("JSXMemberExpression").bases("MemberExpression").build("object","property").field("object",or(def("JSXIdentifier"),def("JSXMemberExpression"))).field("property",def("JSXIdentifier")).field("computed",Boolean,defaults.false);var JSXElementName=or(def("JSXIdentifier"),def("JSXNamespacedName"),def("JSXMemberExpression"));def("JSXSpreadAttribute").bases("Node").build("argument").field("argument",def("Expression"));var JSXAttributes=[or(def("JSXAttribute"),def("JSXSpreadAttribute"))];def("JSXExpressionContainer").bases("Expression").build("expression").field("expression",def("Expression"));def("JSXElement").bases("Expression").build("openingElement","closingElement","children").field("openingElement",def("JSXOpeningElement")).field("closingElement",or(def("JSXClosingElement"),null),defaults["null"]).field("children",[or(def("JSXElement"),def("JSXExpressionContainer"),def("JSXText"),def("Literal"))],defaults.emptyArray).field("name",JSXElementName,function(){return this.openingElement.name},true).field("selfClosing",Boolean,function(){return this.openingElement.selfClosing},true).field("attributes",JSXAttributes,function(){return this.openingElement.attributes},true);def("JSXOpeningElement").bases("Node").build("name","attributes","selfClosing").field("name",JSXElementName).field("attributes",JSXAttributes,defaults.emptyArray).field("selfClosing",Boolean,defaults["false"]);def("JSXClosingElement").bases("Node").build("name").field("name",JSXElementName);def("JSXText").bases("Literal").build("value").field("value",String);def("JSXEmptyExpression").bases("Expression").build();def("JSXSpreadChild").bases("Expression").build("expression").field("expression",def("Expression"))}},{"../lib/shared":70,"../lib/types":71,"./es7":59}],63:[function(require,module,exports){module.exports=function(fork){fork.use(require("./core"));var types=fork.use(require("../lib/types"));var def=types.Type.def;var or=types.Type.or;var shared=fork.use(require("../lib/shared"));var geq=shared.geq;var defaults=shared.defaults;def("Function").field("body",or(def("BlockStatement"),def("Expression")));def("ForInStatement").build("left","right","body","each").field("each",Boolean,defaults["false"]);def("LetStatement").bases("Statement").build("head","body").field("head",[def("VariableDeclarator")]).field("body",def("Statement"));def("LetExpression").bases("Expression").build("head","body").field("head",[def("VariableDeclarator")]).field("body",def("Expression"));def("GraphExpression").bases("Expression").build("index","expression").field("index",geq(0)).field("expression",def("Literal"));def("GraphIndexExpression").bases("Expression").build("index").field("index",geq(0))}},{"../lib/shared":70,"../lib/types":71,"./core":56}],64:[function(require,module,exports){module.exports=function(defs){var used=[];var usedResult=[];var fork={};function use(plugin){var idx=used.indexOf(plugin);if(idx===-1){idx=used.length;used.push(plugin);usedResult[idx]=plugin(fork)}return usedResult[idx]}fork.use=use;var types=use(require("./lib/types"));defs.forEach(use);types.finalize();var exports={Type:types.Type,builtInTypes:types.builtInTypes,namedTypes:types.namedTypes,builders:types.builders,defineMethod:types.defineMethod,getFieldNames:types.getFieldNames,getFieldValue:types.getFieldValue,eachField:types.eachField,someField:types.someField,getSupertypeNames:types.getSupertypeNames,astNodesAreEquivalent:use(require("./lib/equiv")),finalize:types.finalize,Path:use(require("./lib/path")),NodePath:use(require("./lib/node-path")),PathVisitor:use(require("./lib/path-visitor")),use:use};exports.visit=exports.PathVisitor.visit;return exports}},{"./lib/equiv":65,"./lib/node-path":66,"./lib/path":68,"./lib/path-visitor":67,"./lib/types":71}],65:[function(require,module,exports){module.exports=function(fork){var types=fork.use(require("../lib/types"));var getFieldNames=types.getFieldNames;var getFieldValue=types.getFieldValue;var isArray=types.builtInTypes.array;var isObject=types.builtInTypes.object;var isDate=types.builtInTypes.Date;var isRegExp=types.builtInTypes.RegExp;var hasOwn=Object.prototype.hasOwnProperty;function astNodesAreEquivalent(a,b,problemPath){if(isArray.check(problemPath)){problemPath.length=0}else{problemPath=null}return areEquivalent(a,b,problemPath)}astNodesAreEquivalent.assert=function(a,b){var problemPath=[];if(!astNodesAreEquivalent(a,b,problemPath)){if(problemPath.length===0){if(a!==b){throw new Error("Nodes must be equal")}}else{throw new Error("Nodes differ in the following path: "+problemPath.map(subscriptForProperty).join(""))}}};function subscriptForProperty(property){if(/[_$a-z][_$a-z0-9]*/i.test(property)){return"."+property}return"["+JSON.stringify(property)+"]"}function areEquivalent(a,b,problemPath){if(a===b){return true}if(isArray.check(a)){return arraysAreEquivalent(a,b,problemPath)}if(isObject.check(a)){return objectsAreEquivalent(a,b,problemPath)}if(isDate.check(a)){return isDate.check(b)&&+a===+b}if(isRegExp.check(a)){return isRegExp.check(b)&&(a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.ignoreCase===b.ignoreCase)}return a==b}function arraysAreEquivalent(a,b,problemPath){isArray.assert(a);var aLength=a.length;if(!isArray.check(b)||b.length!==aLength){if(problemPath){problemPath.push("length")}return false}for(var i=0;i<aLength;++i){if(problemPath){problemPath.push(i)}if(i in a!==i in b){return false}if(!areEquivalent(a[i],b[i],problemPath)){return false}if(problemPath){var problemPathTail=problemPath.pop();if(problemPathTail!==i){throw new Error(""+problemPathTail)}}}return true}function objectsAreEquivalent(a,b,problemPath){isObject.assert(a);if(!isObject.check(b)){return false}if(a.type!==b.type){if(problemPath){problemPath.push("type")}return false}var aNames=getFieldNames(a);var aNameCount=aNames.length;var bNames=getFieldNames(b);var bNameCount=bNames.length;if(aNameCount===bNameCount){for(var i=0;i<aNameCount;++i){var name=aNames[i];var aChild=getFieldValue(a,name);var bChild=getFieldValue(b,name);if(problemPath){problemPath.push(name)}if(!areEquivalent(aChild,bChild,problemPath)){return false}if(problemPath){var problemPathTail=problemPath.pop();if(problemPathTail!==name){throw new Error(""+problemPathTail)}}}return true}if(!problemPath){return false}var seenNames=Object.create(null);for(i=0;i<aNameCount;++i){seenNames[aNames[i]]=true}for(i=0;i<bNameCount;++i){name=bNames[i];if(!hasOwn.call(seenNames,name)){problemPath.push(name);return false}delete seenNames[name]}for(name in seenNames){problemPath.push(name);break}return false}return astNodesAreEquivalent}},{"../lib/types":71}],66:[function(require,module,exports){module.exports=function(fork){var types=fork.use(require("./types"));var n=types.namedTypes;var b=types.builders;var isNumber=types.builtInTypes.number;var isArray=types.builtInTypes.array;var Path=fork.use(require("./path"));var Scope=fork.use(require("./scope"));function NodePath(value,parentPath,name){if(!(this instanceof NodePath)){throw new Error("NodePath constructor cannot be invoked without 'new'")}Path.call(this,value,parentPath,name)}var NPp=NodePath.prototype=Object.create(Path.prototype,{constructor:{value:NodePath,enumerable:false,writable:true,configurable:true}});Object.defineProperties(NPp,{node:{get:function(){Object.defineProperty(this,"node",{configurable:true,value:this._computeNode()});return this.node}},parent:{get:function(){Object.defineProperty(this,"parent",{configurable:true,value:this._computeParent()});return this.parent}},scope:{get:function(){Object.defineProperty(this,"scope",{configurable:true,value:this._computeScope()});return this.scope}}});NPp.replace=function(){delete this.node;delete this.parent;delete this.scope;return Path.prototype.replace.apply(this,arguments)};NPp.prune=function(){var remainingNodePath=this.parent;this.replace();return cleanUpNodesAfterPrune(remainingNodePath)};NPp._computeNode=function(){var value=this.value;if(n.Node.check(value)){return value}var pp=this.parentPath;return pp&&pp.node||null};NPp._computeParent=function(){var value=this.value;var pp=this.parentPath;if(!n.Node.check(value)){while(pp&&!n.Node.check(pp.value)){pp=pp.parentPath}if(pp){pp=pp.parentPath}}while(pp&&!n.Node.check(pp.value)){pp=pp.parentPath}return pp||null};NPp._computeScope=function(){var value=this.value;var pp=this.parentPath;var scope=pp&&pp.scope;if(n.Node.check(value)&&Scope.isEstablishedBy(value)){scope=new Scope(this,scope)}return scope||null};NPp.getValueProperty=function(name){return types.getFieldValue(this.value,name)};NPp.needsParens=function(assumeExpressionContext){var pp=this.parentPath;if(!pp){return false}var node=this.value;if(!n.Expression.check(node)){return false}if(node.type==="Identifier"){return false}while(!n.Node.check(pp.value)){pp=pp.parentPath;if(!pp){return false}}var parent=pp.value;switch(node.type){case"UnaryExpression":case"SpreadElement":case"SpreadProperty":return parent.type==="MemberExpression"&&this.name==="object"&&parent.object===node;case"BinaryExpression":case"LogicalExpression":switch(parent.type){case"CallExpression":return this.name==="callee"&&parent.callee===node;case"UnaryExpression":case"SpreadElement":case"SpreadProperty":return true;case"MemberExpression":return this.name==="object"&&parent.object===node;case"BinaryExpression":case"LogicalExpression":var po=parent.operator;var pp=PRECEDENCE[po];var no=node.operator;var np=PRECEDENCE[no];if(pp>np){return true}if(pp===np&&this.name==="right"){if(parent.right!==node){throw new Error("Nodes must be equal")}return true}default:return false}case"SequenceExpression":switch(parent.type){case"ForStatement":return false;case"ExpressionStatement":return this.name!=="expression";default:return true}case"YieldExpression":switch(parent.type){case"BinaryExpression":case"LogicalExpression":case"UnaryExpression":case"SpreadElement":case"SpreadProperty":case"CallExpression":case"MemberExpression":case"NewExpression":case"ConditionalExpression":case"YieldExpression":return true;default:return false}case"Literal":return parent.type==="MemberExpression"&&isNumber.check(node.value)&&this.name==="object"&&parent.object===node;case"AssignmentExpression":case"ConditionalExpression":switch(parent.type){case"UnaryExpression":case"SpreadElement":case"SpreadProperty":case"BinaryExpression":case"LogicalExpression":return true;case"CallExpression":return this.name==="callee"&&parent.callee===node;case"ConditionalExpression":return this.name==="test"&&parent.test===node;case"MemberExpression":return this.name==="object"&&parent.object===node;default:return false}default:if(parent.type==="NewExpression"&&this.name==="callee"&&parent.callee===node){return containsCallExpression(node)}}if(assumeExpressionContext!==true&&!this.canBeFirstInStatement()&&this.firstInStatement())return true;return false};function isBinary(node){return n.BinaryExpression.check(node)||n.LogicalExpression.check(node)}function isUnaryLike(node){return n.UnaryExpression.check(node)||n.SpreadElement&&n.SpreadElement.check(node)||n.SpreadProperty&&n.SpreadProperty.check(node)}var PRECEDENCE={};[["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]].forEach(function(tier,i){tier.forEach(function(op){PRECEDENCE[op]=i})});function containsCallExpression(node){if(n.CallExpression.check(node)){return true}if(isArray.check(node)){return node.some(containsCallExpression)}if(n.Node.check(node)){return types.someField(node,function(name,child){return containsCallExpression(child)})}return false}NPp.canBeFirstInStatement=function(){var node=this.node;return!n.FunctionExpression.check(node)&&!n.ObjectExpression.check(node)};NPp.firstInStatement=function(){return firstInStatement(this)};function firstInStatement(path){for(var node,parent;path.parent;path=path.parent){node=path.node;parent=path.parent.node;if(n.BlockStatement.check(parent)&&path.parent.name==="body"&&path.name===0){if(parent.body[0]!==node){throw new Error("Nodes must be equal")}return true}if(n.ExpressionStatement.check(parent)&&path.name==="expression"){if(parent.expression!==node){throw new Error("Nodes must be equal")}return true}if(n.SequenceExpression.check(parent)&&path.parent.name==="expressions"&&path.name===0){if(parent.expressions[0]!==node){throw new Error("Nodes must be equal")}continue}if(n.CallExpression.check(parent)&&path.name==="callee"){if(parent.callee!==node){throw new Error("Nodes must be equal")}continue}if(n.MemberExpression.check(parent)&&path.name==="object"){if(parent.object!==node){throw new Error("Nodes must be equal")}continue}if(n.ConditionalExpression.check(parent)&&path.name==="test"){if(parent.test!==node){throw new Error("Nodes must be equal")}continue}if(isBinary(parent)&&path.name==="left"){if(parent.left!==node){throw new Error("Nodes must be equal")}continue}if(n.UnaryExpression.check(parent)&&!parent.prefix&&path.name==="argument"){if(parent.argument!==node){throw new Error("Nodes must be equal")}continue}return false}return true}function cleanUpNodesAfterPrune(remainingNodePath){if(n.VariableDeclaration.check(remainingNodePath.node)){var declarations=remainingNodePath.get("declarations").value;if(!declarations||declarations.length===0){return remainingNodePath.prune()}}else if(n.ExpressionStatement.check(remainingNodePath.node)){if(!remainingNodePath.get("expression").value){return remainingNodePath.prune()}}else if(n.IfStatement.check(remainingNodePath.node)){cleanUpIfStatementAfterPrune(remainingNodePath)}return remainingNodePath}function cleanUpIfStatementAfterPrune(ifStatement){var testExpression=ifStatement.get("test").value;var alternate=ifStatement.get("alternate").value;var consequent=ifStatement.get("consequent").value;if(!consequent&&!alternate){var testExpressionStatement=b.expressionStatement(testExpression);ifStatement.replace(testExpressionStatement)}else if(!consequent&&alternate){var negatedTestExpression=b.unaryExpression("!",testExpression,true);if(n.UnaryExpression.check(testExpression)&&testExpression.operator==="!"){negatedTestExpression=testExpression.argument}ifStatement.get("test").replace(negatedTestExpression);ifStatement.get("consequent").replace(alternate);ifStatement.get("alternate").replace()}}return NodePath}},{"./path":68,"./scope":69,"./types":71}],67:[function(require,module,exports){var hasOwn=Object.prototype.hasOwnProperty;module.exports=function(fork){var types=fork.use(require("./types"));var NodePath=fork.use(require("./node-path"));var Printable=types.namedTypes.Printable;var isArray=types.builtInTypes.array;var isObject=types.builtInTypes.object;var isFunction=types.builtInTypes.function;var undefined;function PathVisitor(){if(!(this instanceof PathVisitor)){throw new Error("PathVisitor constructor cannot be invoked without 'new'")}this._reusableContextStack=[];this._methodNameTable=computeMethodNameTable(this);this._shouldVisitComments=hasOwn.call(this._methodNameTable,"Block")||hasOwn.call(this._methodNameTable,"Line");this.Context=makeContextConstructor(this);this._visiting=false;this._changeReported=false}function computeMethodNameTable(visitor){var typeNames=Object.create(null);for(var methodName in visitor){if(/^visit[A-Z]/.test(methodName)){typeNames[methodName.slice("visit".length)]=true}}var supertypeTable=types.computeSupertypeLookupTable(typeNames);var methodNameTable=Object.create(null);var typeNames=Object.keys(supertypeTable);var typeNameCount=typeNames.length;for(var i=0;i<typeNameCount;++i){var typeName=typeNames[i];methodName="visit"+supertypeTable[typeName];if(isFunction.check(visitor[methodName])){methodNameTable[typeName]=methodName}}return methodNameTable}PathVisitor.fromMethodsObject=function fromMethodsObject(methods){if(methods instanceof PathVisitor){return methods}if(!isObject.check(methods)){return new PathVisitor}function Visitor(){if(!(this instanceof Visitor)){throw new Error("Visitor constructor cannot be invoked without 'new'")}PathVisitor.call(this)}var Vp=Visitor.prototype=Object.create(PVp);Vp.constructor=Visitor;extend(Vp,methods);extend(Visitor,PathVisitor);isFunction.assert(Visitor.fromMethodsObject);isFunction.assert(Visitor.visit);return new Visitor};function extend(target,source){for(var property in source){if(hasOwn.call(source,property)){target[property]=source[property]}}return target}PathVisitor.visit=function visit(node,methods){return PathVisitor.fromMethodsObject(methods).visit(node)};var PVp=PathVisitor.prototype;PVp.visit=function(){if(this._visiting){throw new Error("Recursively calling visitor.visit(path) resets visitor state. "+"Try this.visit(path) or this.traverse(path) instead.")}this._visiting=true;this._changeReported=false;this._abortRequested=false;var argc=arguments.length;var args=new Array(argc);for(var i=0;i<argc;++i){args[i]=arguments[i]}if(!(args[0]instanceof NodePath)){args[0]=new NodePath({root:args[0]}).get("root")}this.reset.apply(this,args);try{var root=this.visitWithoutReset(args[0]);var didNotThrow=true}finally{this._visiting=false;if(!didNotThrow&&this._abortRequested){return args[0].value}}return root};PVp.AbortRequest=function AbortRequest(){};PVp.abort=function(){var visitor=this;visitor._abortRequested=true;var request=new visitor.AbortRequest;request.cancel=function(){visitor._abortRequested=false};throw request};PVp.reset=function(path){};PVp.visitWithoutReset=function(path){if(this instanceof this.Context){return this.visitor.visitWithoutReset(path)}if(!(path instanceof NodePath)){throw new Error("")}var value=path.value;var methodName=value&&typeof value==="object"&&typeof value.type==="string"&&this._methodNameTable[value.type];if(methodName){var context=this.acquireContext(path);try{return context.invokeVisitorMethod(methodName)}finally{this.releaseContext(context)}}else{return visitChildren(path,this)}};function visitChildren(path,visitor){if(!(path instanceof NodePath)){throw new Error("")}if(!(visitor instanceof PathVisitor)){throw new Error("")}var value=path.value;if(isArray.check(value)){path.each(visitor.visitWithoutReset,visitor)}else if(!isObject.check(value)){}else{var childNames=types.getFieldNames(value);if(visitor._shouldVisitComments&&value.comments&&childNames.indexOf("comments")<0){childNames.push("comments")}var childCount=childNames.length;var childPaths=[];for(var i=0;i<childCount;++i){var childName=childNames[i];if(!hasOwn.call(value,childName)){value[childName]=types.getFieldValue(value,childName)}childPaths.push(path.get(childName))}for(var i=0;i<childCount;++i){visitor.visitWithoutReset(childPaths[i])}}return path.value}PVp.acquireContext=function(path){if(this._reusableContextStack.length===0){return new this.Context(path)}return this._reusableContextStack.pop().reset(path)};PVp.releaseContext=function(context){if(!(context instanceof this.Context)){throw new Error("")}this._reusableContextStack.push(context);context.currentPath=null};PVp.reportChanged=function(){this._changeReported=true};PVp.wasChangeReported=function(){return this._changeReported};function makeContextConstructor(visitor){function Context(path){if(!(this instanceof Context)){throw new Error("")}if(!(this instanceof PathVisitor)){throw new Error("")}if(!(path instanceof NodePath)){throw new Error("")}Object.defineProperty(this,"visitor",{value:visitor,writable:false,enumerable:true,configurable:false});this.currentPath=path;this.needToCallTraverse=true;Object.seal(this)}if(!(visitor instanceof PathVisitor)){throw new Error("")}var Cp=Context.prototype=Object.create(visitor);Cp.constructor=Context;extend(Cp,sharedContextProtoMethods);return Context}var sharedContextProtoMethods=Object.create(null);sharedContextProtoMethods.reset=function reset(path){if(!(this instanceof this.Context)){throw new Error("")}if(!(path instanceof NodePath)){throw new Error("")}this.currentPath=path;this.needToCallTraverse=true;return this};sharedContextProtoMethods.invokeVisitorMethod=function invokeVisitorMethod(methodName){if(!(this instanceof this.Context)){throw new Error("")}if(!(this.currentPath instanceof NodePath)){throw new Error("")}var result=this.visitor[methodName].call(this,this.currentPath);if(result===false){this.needToCallTraverse=false}else if(result!==undefined){this.currentPath=this.currentPath.replace(result)[0];if(this.needToCallTraverse){this.traverse(this.currentPath)}}if(this.needToCallTraverse!==false){throw new Error("Must either call this.traverse or return false in "+methodName)}var path=this.currentPath;return path&&path.value};sharedContextProtoMethods.traverse=function traverse(path,newVisitor){if(!(this instanceof this.Context)){throw new Error("")}if(!(path instanceof NodePath)){throw new Error("")}if(!(this.currentPath instanceof NodePath)){throw new Error("")}this.needToCallTraverse=false;return visitChildren(path,PathVisitor.fromMethodsObject(newVisitor||this.visitor))};sharedContextProtoMethods.visit=function visit(path,newVisitor){if(!(this instanceof this.Context)){throw new Error("")}if(!(path instanceof NodePath)){throw new Error("")}if(!(this.currentPath instanceof NodePath)){throw new Error("")}this.needToCallTraverse=false;return PathVisitor.fromMethodsObject(newVisitor||this.visitor).visitWithoutReset(path)};sharedContextProtoMethods.reportChanged=function reportChanged(){this.visitor.reportChanged()};sharedContextProtoMethods.abort=function abort(){this.needToCallTraverse=false;this.visitor.abort()};return PathVisitor}},{"./node-path":66,"./types":71}],68:[function(require,module,exports){var Ap=Array.prototype;var slice=Ap.slice;var map=Ap.map;var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;module.exports=function(fork){var types=fork.use(require("./types"));var isArray=types.builtInTypes.array;var isNumber=types.builtInTypes.number;function Path(value,parentPath,name){if(!(this instanceof Path)){throw new Error("Path constructor cannot be invoked without 'new'")}if(parentPath){if(!(parentPath instanceof Path)){throw new Error("")}}else{parentPath=null;name=null}this.value=value;this.parentPath=parentPath;this.name=name;this.__childCache=null}var Pp=Path.prototype;function getChildCache(path){return path.__childCache||(path.__childCache=Object.create(null))}function getChildPath(path,name){var cache=getChildCache(path);var actualChildValue=path.getValueProperty(name);var childPath=cache[name];if(!hasOwn.call(cache,name)||childPath.value!==actualChildValue){childPath=cache[name]=new path.constructor(actualChildValue,path,name)}return childPath}Pp.getValueProperty=function getValueProperty(name){return this.value[name]};Pp.get=function get(name){var path=this;var names=arguments;var count=names.length;for(var i=0;i<count;++i){path=getChildPath(path,names[i])}return path};Pp.each=function each(callback,context){var childPaths=[];var len=this.value.length;var i=0;for(var i=0;i<len;++i){if(hasOwn.call(this.value,i)){childPaths[i]=this.get(i)}}context=context||this;for(i=0;i<len;++i){if(hasOwn.call(childPaths,i)){callback.call(context,childPaths[i])}}};Pp.map=function map(callback,context){var result=[];this.each(function(childPath){result.push(callback.call(this,childPath))},context);return result};Pp.filter=function filter(callback,context){var result=[];this.each(function(childPath){if(callback.call(this,childPath)){result.push(childPath)}},context);return result};function emptyMoves(){}function getMoves(path,offset,start,end){isArray.assert(path.value);if(offset===0){return emptyMoves}var length=path.value.length;if(length<1){return emptyMoves}var argc=arguments.length;if(argc===2){start=0;end=length}else if(argc===3){start=Math.max(start,0);end=length}else{start=Math.max(start,0);end=Math.min(end,length)}isNumber.assert(start);isNumber.assert(end);var moves=Object.create(null);var cache=getChildCache(path);for(var i=start;i<end;++i){if(hasOwn.call(path.value,i)){var childPath=path.get(i);if(childPath.name!==i){throw new Error("")}var newIndex=i+offset;childPath.name=newIndex;moves[newIndex]=childPath;delete cache[i]}}delete cache.length;return function(){for(var newIndex in moves){var childPath=moves[newIndex];if(childPath.name!==+newIndex){throw new Error("")}cache[newIndex]=childPath;path.value[newIndex]=childPath.value}}}Pp.shift=function shift(){var move=getMoves(this,-1);var result=this.value.shift();move();return result};Pp.unshift=function unshift(node){var move=getMoves(this,arguments.length);var result=this.value.unshift.apply(this.value,arguments);move();return result};Pp.push=function push(node){isArray.assert(this.value);delete getChildCache(this).length;return this.value.push.apply(this.value,arguments)};Pp.pop=function pop(){isArray.assert(this.value);var cache=getChildCache(this);delete cache[this.value.length-1];delete cache.length;return this.value.pop()};Pp.insertAt=function insertAt(index,node){var argc=arguments.length;var move=getMoves(this,argc-1,index);if(move===emptyMoves){return this}index=Math.max(index,0);for(var i=1;i<argc;++i){this.value[index+i-1]=arguments[i]}move();return this};Pp.insertBefore=function insertBefore(node){var pp=this.parentPath;var argc=arguments.length;var insertAtArgs=[this.name];for(var i=0;i<argc;++i){insertAtArgs.push(arguments[i])}return pp.insertAt.apply(pp,insertAtArgs)};Pp.insertAfter=function insertAfter(node){var pp=this.parentPath;var argc=arguments.length;var insertAtArgs=[this.name+1];for(var i=0;i<argc;++i){insertAtArgs.push(arguments[i])}return pp.insertAt.apply(pp,insertAtArgs)};function repairRelationshipWithParent(path){if(!(path instanceof Path)){throw new Error("")}var pp=path.parentPath;if(!pp){return path}var parentValue=pp.value;var parentCache=getChildCache(pp);if(parentValue[path.name]===path.value){parentCache[path.name]=path}else if(isArray.check(parentValue)){var i=parentValue.indexOf(path.value);if(i>=0){parentCache[path.name=i]=path}}else{parentValue[path.name]=path.value;parentCache[path.name]=path}if(parentValue[path.name]!==path.value){throw new Error("")}if(path.parentPath.get(path.name)!==path){throw new Error("")}return path}Pp.replace=function replace(replacement){var results=[];var parentValue=this.parentPath.value;var parentCache=getChildCache(this.parentPath);var count=arguments.length;repairRelationshipWithParent(this);if(isArray.check(parentValue)){var originalLength=parentValue.length;var move=getMoves(this.parentPath,count-1,this.name+1);var spliceArgs=[this.name,1];for(var i=0;i<count;++i){spliceArgs.push(arguments[i])}var splicedOut=parentValue.splice.apply(parentValue,spliceArgs);if(splicedOut[0]!==this.value){throw new Error("")}if(parentValue.length!==originalLength-1+count){throw new Error("")}move();if(count===0){delete this.value;delete parentCache[this.name];this.__childCache=null}else{if(parentValue[this.name]!==replacement){throw new Error("")}if(this.value!==replacement){this.value=replacement;this.__childCache=null}for(i=0;i<count;++i){results.push(this.parentPath.get(this.name+i))}if(results[0]!==this){throw new Error("")}}}else if(count===1){if(this.value!==replacement){this.__childCache=null}this.value=parentValue[this.name]=replacement;results.push(this)}else if(count===0){delete parentValue[this.name];delete this.value;this.__childCache=null}else{throw new Error("Could not replace path")}return results};return Path}},{"./types":71}],69:[function(require,module,exports){var hasOwn=Object.prototype.hasOwnProperty;module.exports=function(fork){var types=fork.use(require("./types"));var Type=types.Type;var namedTypes=types.namedTypes;var Node=namedTypes.Node;var Expression=namedTypes.Expression;var isArray=types.builtInTypes.array;var b=types.builders;function Scope(path,parentScope){if(!(this instanceof Scope)){throw new Error("Scope constructor cannot be invoked without 'new'")}if(!(path instanceof fork.use(require("./node-path")))){throw new Error("")}ScopeType.assert(path.value);var depth;if(parentScope){if(!(parentScope instanceof Scope)){throw new Error("")}depth=parentScope.depth+1}else{parentScope=null;depth=0}Object.defineProperties(this,{path:{value:path},node:{value:path.value},isGlobal:{value:!parentScope,enumerable:true},depth:{value:depth},parent:{value:parentScope},bindings:{value:{}},types:{value:{}}})}var scopeTypes=[namedTypes.Program,namedTypes.Function,namedTypes.CatchClause];var ScopeType=Type.or.apply(Type,scopeTypes);Scope.isEstablishedBy=function(node){return ScopeType.check(node)};var Sp=Scope.prototype;Sp.didScan=false;Sp.declares=function(name){this.scan();return hasOwn.call(this.bindings,name)};Sp.declaresType=function(name){this.scan();return hasOwn.call(this.types,name)};Sp.declareTemporary=function(prefix){if(prefix){if(!/^[a-z$_]/i.test(prefix)){throw new Error("")}}else{prefix="t$"}prefix+=this.depth.toString(36)+"$";this.scan();var index=0;while(this.declares(prefix+index)){++index}var name=prefix+index;return this.bindings[name]=types.builders.identifier(name)};Sp.injectTemporary=function(identifier,init){identifier||(identifier=this.declareTemporary());var bodyPath=this.path.get("body");if(namedTypes.BlockStatement.check(bodyPath.value)){bodyPath=bodyPath.get("body")}bodyPath.unshift(b.variableDeclaration("var",[b.variableDeclarator(identifier,init||null)]));return identifier};Sp.scan=function(force){if(force||!this.didScan){for(var name in this.bindings){delete this.bindings[name]}scanScope(this.path,this.bindings,this.types);this.didScan=true}};Sp.getBindings=function(){this.scan();return this.bindings};Sp.getTypes=function(){this.scan();return this.types};function scanScope(path,bindings,scopeTypes){var node=path.value;ScopeType.assert(node);if(namedTypes.CatchClause.check(node)){addPattern(path.get("param"),bindings)}else{recursiveScanScope(path,bindings,scopeTypes)}}function recursiveScanScope(path,bindings,scopeTypes){var node=path.value;if(path.parent&&namedTypes.FunctionExpression.check(path.parent.node)&&path.parent.node.id){addPattern(path.parent.get("id"),bindings)}if(!node){}else if(isArray.check(node)){path.each(function(childPath){recursiveScanChild(childPath,bindings,scopeTypes)})}else if(namedTypes.Function.check(node)){path.get("params").each(function(paramPath){addPattern(paramPath,bindings)});recursiveScanChild(path.get("body"),bindings,scopeTypes)}else if(namedTypes.TypeAlias&&namedTypes.TypeAlias.check(node)){addTypePattern(path.get("id"),scopeTypes)}else if(namedTypes.VariableDeclarator.check(node)){addPattern(path.get("id"),bindings);recursiveScanChild(path.get("init"),bindings,scopeTypes)}else if(node.type==="ImportSpecifier"||node.type==="ImportNamespaceSpecifier"||node.type==="ImportDefaultSpecifier"){addPattern(path.get(node.local?"local":node.name?"name":"id"),bindings)}else if(Node.check(node)&&!Expression.check(node)){types.eachField(node,function(name,child){var childPath=path.get(name);if(!pathHasValue(childPath,child)){throw new Error("")}recursiveScanChild(childPath,bindings,scopeTypes)})}}function pathHasValue(path,value){if(path.value===value){return true}if(Array.isArray(path.value)&&path.value.length===0&&Array.isArray(value)&&value.length===0){return true}return false}function recursiveScanChild(path,bindings,scopeTypes){var node=path.value;if(!node||Expression.check(node)){}else if(namedTypes.FunctionDeclaration.check(node)&&node.id!==null){addPattern(path.get("id"),bindings)}else if(namedTypes.ClassDeclaration&&namedTypes.ClassDeclaration.check(node)){addPattern(path.get("id"),bindings)}else if(ScopeType.check(node)){if(namedTypes.CatchClause.check(node)){var catchParamName=node.param.name;var hadBinding=hasOwn.call(bindings,catchParamName);recursiveScanScope(path.get("body"),bindings,scopeTypes);if(!hadBinding){delete bindings[catchParamName]}}}else{recursiveScanScope(path,bindings,scopeTypes)}}function addPattern(patternPath,bindings){var pattern=patternPath.value;namedTypes.Pattern.assert(pattern);if(namedTypes.Identifier.check(pattern)){if(hasOwn.call(bindings,pattern.name)){bindings[pattern.name].push(patternPath)}else{bindings[pattern.name]=[patternPath]}}else if(namedTypes.ObjectPattern&&namedTypes.ObjectPattern.check(pattern)){patternPath.get("properties").each(function(propertyPath){var property=propertyPath.value;if(namedTypes.Pattern.check(property)){addPattern(propertyPath,bindings)}else if(namedTypes.Property.check(property)){addPattern(propertyPath.get("value"),bindings)}else if(namedTypes.SpreadProperty&&namedTypes.SpreadProperty.check(property)){addPattern(propertyPath.get("argument"),bindings)}})}else if(namedTypes.ArrayPattern&&namedTypes.ArrayPattern.check(pattern)){patternPath.get("elements").each(function(elementPath){var element=elementPath.value;if(namedTypes.Pattern.check(element)){addPattern(elementPath,bindings)}else if(namedTypes.SpreadElement&&namedTypes.SpreadElement.check(element)){addPattern(elementPath.get("argument"),bindings)}})}else if(namedTypes.PropertyPattern&&namedTypes.PropertyPattern.check(pattern)){addPattern(patternPath.get("pattern"),bindings)}else if(namedTypes.SpreadElementPattern&&namedTypes.SpreadElementPattern.check(pattern)||namedTypes.SpreadPropertyPattern&&namedTypes.SpreadPropertyPattern.check(pattern)){addPattern(patternPath.get("argument"),bindings)}}function addTypePattern(patternPath,types){var pattern=patternPath.value;namedTypes.Pattern.assert(pattern);if(namedTypes.Identifier.check(pattern)){if(hasOwn.call(types,pattern.name)){types[pattern.name].push(patternPath)}else{types[pattern.name]=[patternPath]}}}Sp.lookup=function(name){for(var scope=this;scope;scope=scope.parent)if(scope.declares(name))break;return scope};Sp.lookupType=function(name){for(var scope=this;scope;scope=scope.parent)if(scope.declaresType(name))break;return scope};Sp.getGlobalScope=function(){var scope=this;while(!scope.isGlobal)scope=scope.parent;return scope};return Scope}},{"./node-path":66,"./types":71}],70:[function(require,module,exports){module.exports=function(fork){var exports={};var types=fork.use(require("../lib/types"));var Type=types.Type;var builtin=types.builtInTypes;var isNumber=builtin.number;exports.geq=function(than){return new Type(function(value){return isNumber.check(value)&&value>=than},isNumber+" >= "+than)};exports.defaults={null:function(){return null},emptyArray:function(){return[]},false:function(){return false},true:function(){return true},undefined:function(){}};var naiveIsPrimitive=Type.or(builtin.string,builtin.number,builtin.boolean,builtin.null,builtin.undefined);exports.isPrimitive=new Type(function(value){if(value===null)return true;var type=typeof value;return!(type==="object"||type==="function")},naiveIsPrimitive.toString());return exports}},{"../lib/types":71}],71:[function(require,module,exports){var Ap=Array.prototype;var slice=Ap.slice;var map=Ap.map;var each=Ap.forEach;var Op=Object.prototype;var objToStr=Op.toString;var funObjStr=objToStr.call(function(){});var strObjStr=objToStr.call("");var hasOwn=Op.hasOwnProperty;module.exports=function(){var exports={};function Type(check,name){var self=this;if(!(self instanceof Type)){throw new Error("Type constructor cannot be invoked without 'new'")}if(objToStr.call(check)!==funObjStr){throw new Error(check+" is not a function")}var nameObjStr=objToStr.call(name);if(!(nameObjStr===funObjStr||nameObjStr===strObjStr)){throw new Error(name+" is neither a function nor a string")}Object.defineProperties(self,{name:{value:name},check:{value:function(value,deep){var result=check.call(self,value,deep);if(!result&&deep&&objToStr.call(deep)===funObjStr)deep(self,value);return result}}})}var Tp=Type.prototype;exports.Type=Type;Tp.assert=function(value,deep){if(!this.check(value,deep)){var str=shallowStringify(value);throw new Error(str+" does not match type "+this)}return true};function shallowStringify(value){if(isObject.check(value))return"{"+Object.keys(value).map(function(key){return key+": "+value[key]}).join(", ")+"}";if(isArray.check(value))return"["+value.map(shallowStringify).join(", ")+"]";return JSON.stringify(value)}Tp.toString=function(){var name=this.name;if(isString.check(name))return name;if(isFunction.check(name))return name.call(this)+"";return name+" type"};var builtInCtorFns=[];var builtInCtorTypes=[];var builtInTypes={};exports.builtInTypes=builtInTypes;function defBuiltInType(example,name){var objStr=objToStr.call(example);var type=new Type(function(value){return objToStr.call(value)===objStr},name);builtInTypes[name]=type;if(example&&typeof example.constructor==="function"){builtInCtorFns.push(example.constructor);builtInCtorTypes.push(type)}return type}var isString=defBuiltInType("truthy","string");var isFunction=defBuiltInType(function(){},"function");var isArray=defBuiltInType([],"array");var isObject=defBuiltInType({},"object");var isRegExp=defBuiltInType(/./,"RegExp");var isDate=defBuiltInType(new Date,"Date");var isNumber=defBuiltInType(3,"number");var isBoolean=defBuiltInType(true,"boolean");var isNull=defBuiltInType(null,"null");var isUndefined=defBuiltInType(void 0,"undefined");function toType(from,name){if(from instanceof Type)return from;if(from instanceof Def)return from.type;if(isArray.check(from))return Type.fromArray(from);if(isObject.check(from))return Type.fromObject(from);if(isFunction.check(from)){var bicfIndex=builtInCtorFns.indexOf(from);if(bicfIndex>=0){return builtInCtorTypes[bicfIndex]}return new Type(from,name)}return new Type(function(value){return value===from},isUndefined.check(name)?function(){return from+""}:name)}Type.or=function(){var types=[];var len=arguments.length;for(var i=0;i<len;++i)types.push(toType(arguments[i]));return new Type(function(value,deep){for(var i=0;i<len;++i)if(types[i].check(value,deep))return true;return false},function(){return types.join(" | ")})};Type.fromArray=function(arr){if(!isArray.check(arr)){throw new Error("")}if(arr.length!==1){throw new Error("only one element type is permitted for typed arrays")}return toType(arr[0]).arrayOf()};Tp.arrayOf=function(){var elemType=this;return new Type(function(value,deep){return isArray.check(value)&&value.every(function(elem){return elemType.check(elem,deep)})},function(){return"["+elemType+"]"})};Type.fromObject=function(obj){var fields=Object.keys(obj).map(function(name){return new Field(name,obj[name])});return new Type(function(value,deep){return isObject.check(value)&&fields.every(function(field){return field.type.check(value[field.name],deep)})},function(){return"{ "+fields.join(", ")+" }"})};function Field(name,type,defaultFn,hidden){var self=this;if(!(self instanceof Field)){throw new Error("Field constructor cannot be invoked without 'new'")}isString.assert(name);type=toType(type);var properties={name:{value:name},type:{value:type},hidden:{value:!!hidden}};if(isFunction.check(defaultFn)){properties.defaultFn={value:defaultFn}}Object.defineProperties(self,properties)}var Fp=Field.prototype;Fp.toString=function(){return JSON.stringify(this.name)+": "+this.type};Fp.getValue=function(obj){var value=obj[this.name];if(!isUndefined.check(value))return value;if(this.defaultFn)value=this.defaultFn.call(obj);return value};Type.def=function(typeName){isString.assert(typeName);return hasOwn.call(defCache,typeName)?defCache[typeName]:defCache[typeName]=new Def(typeName)};var defCache=Object.create(null);function Def(typeName){var self=this;if(!(self instanceof Def)){throw new Error("Def constructor cannot be invoked without 'new'")}Object.defineProperties(self,{typeName:{value:typeName},baseNames:{value:[]},ownFields:{value:Object.create(null)},allSupertypes:{value:Object.create(null)},supertypeList:{value:[]},allFields:{value:Object.create(null)},fieldNames:{value:[]},type:{value:new Type(function(value,deep){return self.check(value,deep)},typeName)}})}Def.fromValue=function(value){if(value&&typeof value==="object"){var type=value.type;if(typeof type==="string"&&hasOwn.call(defCache,type)){var d=defCache[type];if(d.finalized){return d}}}return null};var Dp=Def.prototype;Dp.isSupertypeOf=function(that){if(that instanceof Def){if(this.finalized!==true||that.finalized!==true){throw new Error("")}return hasOwn.call(that.allSupertypes,this.typeName)}else{throw new Error(that+" is not a Def")}};exports.getSupertypeNames=function(typeName){if(!hasOwn.call(defCache,typeName)){throw new Error("")}var d=defCache[typeName];if(d.finalized!==true){throw new Error("")}return d.supertypeList.slice(1)};exports.computeSupertypeLookupTable=function(candidates){var table={};var typeNames=Object.keys(defCache);var typeNameCount=typeNames.length;for(var i=0;i<typeNameCount;++i){var typeName=typeNames[i];var d=defCache[typeName];if(d.finalized!==true){throw new Error(""+typeName)}for(var j=0;j<d.supertypeList.length;++j){var superTypeName=d.supertypeList[j];if(hasOwn.call(candidates,superTypeName)){table[typeName]=superTypeName;break}}}return table};Dp.checkAllFields=function(value,deep){var allFields=this.allFields;if(this.finalized!==true){throw new Error(""+this.typeName)}function checkFieldByName(name){var field=allFields[name];var type=field.type;var child=field.getValue(value);return type.check(child,deep)}return isObject.check(value)&&Object.keys(allFields).every(checkFieldByName)};Dp.check=function(value,deep){if(this.finalized!==true){throw new Error("prematurely checking unfinalized type "+this.typeName)}if(!isObject.check(value))return false;var vDef=Def.fromValue(value);if(!vDef){if(this.typeName==="SourceLocation"||this.typeName==="Position"){return this.checkAllFields(value,deep)}return false}if(deep&&vDef===this)return this.checkAllFields(value,deep);if(!this.isSupertypeOf(vDef))return false;if(!deep)return true;return vDef.checkAllFields(value,deep)&&this.checkAllFields(value,false)};Dp.bases=function(){var args=slice.call(arguments);var bases=this.baseNames;if(this.finalized){if(args.length!==bases.length){throw new Error("")}for(var i=0;i<args.length;i++){if(args[i]!==bases[i]){throw new Error("")}}return this}args.forEach(function(baseName){isString.assert(baseName);if(bases.indexOf(baseName)<0)bases.push(baseName)});return this};Object.defineProperty(Dp,"buildable",{value:false});var builders={};exports.builders=builders;var nodePrototype={};exports.defineMethod=function(name,func){var old=nodePrototype[name];if(isUndefined.check(func)){delete nodePrototype[name]}else{isFunction.assert(func);Object.defineProperty(nodePrototype,name,{enumerable:true,configurable:true,value:func})}return old};var isArrayOfString=isString.arrayOf();Dp.build=function(){var self=this;var newBuildParams=slice.call(arguments);isArrayOfString.assert(newBuildParams);Object.defineProperty(self,"buildParams",{value:newBuildParams,writable:false,enumerable:false,configurable:true});if(self.buildable){return self}self.field("type",String,function(){return self.typeName});Object.defineProperty(self,"buildable",{value:true});Object.defineProperty(builders,getBuilderName(self.typeName),{enumerable:true,value:function(){var args=arguments;var argc=args.length;var built=Object.create(nodePrototype);if(!self.finalized){throw new Error("attempting to instantiate unfinalized type "+self.typeName)}function add(param,i){if(hasOwn.call(built,param))return;var all=self.allFields;if(!hasOwn.call(all,param)){throw new Error(""+param)}var field=all[param];var type=field.type;var value;if(isNumber.check(i)&&i<argc){value=args[i]}else if(field.defaultFn){value=field.defaultFn.call(built)}else{var message="no value or default function given for field "+JSON.stringify(param)+" of "+self.typeName+"("+self.buildParams.map(function(name){return all[name]}).join(", ")+")";throw new Error(message)}if(!type.check(value)){throw new Error(shallowStringify(value)+" does not match field "+field+" of type "+self.typeName)}built[param]=value}self.buildParams.forEach(function(param,i){add(param,i)});Object.keys(self.allFields).forEach(function(param){add(param)});if(built.type!==self.typeName){throw new Error("")}return built}});return self};function getBuilderName(typeName){return typeName.replace(/^[A-Z]+/,function(upperCasePrefix){var len=upperCasePrefix.length;switch(len){case 0:return"";case 1:return upperCasePrefix.toLowerCase();default:return upperCasePrefix.slice(0,len-1).toLowerCase()+upperCasePrefix.charAt(len-1)}})}exports.getBuilderName=getBuilderName;function getStatementBuilderName(typeName){typeName=getBuilderName(typeName);return typeName.replace(/(Expression)?$/,"Statement")}exports.getStatementBuilderName=getStatementBuilderName;Dp.field=function(name,type,defaultFn,hidden){if(this.finalized){console.error("Ignoring attempt to redefine field "+JSON.stringify(name)+" of finalized type "+JSON.stringify(this.typeName));return this}this.ownFields[name]=new Field(name,type,defaultFn,hidden);return this};var namedTypes={};exports.namedTypes=namedTypes;function getFieldNames(object){var d=Def.fromValue(object);if(d){return d.fieldNames.slice(0)}if("type"in object){throw new Error("did not recognize object of type "+JSON.stringify(object.type))}return Object.keys(object)}exports.getFieldNames=getFieldNames;function getFieldValue(object,fieldName){var d=Def.fromValue(object);if(d){var field=d.allFields[fieldName];if(field){return field.getValue(object)}}return object&&object[fieldName]}exports.getFieldValue=getFieldValue;exports.eachField=function(object,callback,context){getFieldNames(object).forEach(function(name){callback.call(this,name,getFieldValue(object,name))},context)};exports.someField=function(object,callback,context){return getFieldNames(object).some(function(name){return callback.call(this,name,getFieldValue(object,name))},context)};Object.defineProperty(Dp,"finalized",{value:false});Dp.finalize=function(){var self=this;if(!self.finalized){var allFields=self.allFields;var allSupertypes=self.allSupertypes;self.baseNames.forEach(function(name){var def=defCache[name];if(def instanceof Def){def.finalize();extend(allFields,def.allFields);extend(allSupertypes,def.allSupertypes)}else{var message="unknown supertype name "+JSON.stringify(name)+" for subtype "+JSON.stringify(self.typeName);throw new Error(message)}});extend(allFields,self.ownFields);allSupertypes[self.typeName]=self;self.fieldNames.length=0;for(var fieldName in allFields){if(hasOwn.call(allFields,fieldName)&&!allFields[fieldName].hidden){self.fieldNames.push(fieldName)}}Object.defineProperty(namedTypes,self.typeName,{enumerable:true,value:self.type});Object.defineProperty(self,"finalized",{value:true});populateSupertypeList(self.typeName,self.supertypeList);if(self.buildable&&self.supertypeList.lastIndexOf("Expression")>=0){wrapExpressionBuilderWithStatement(self.typeName)}}};function wrapExpressionBuilderWithStatement(typeName){var wrapperName=getStatementBuilderName(typeName);if(builders[wrapperName])return;var wrapped=builders[getBuilderName(typeName)];if(!wrapped)return;builders[wrapperName]=function(){return builders.expressionStatement(wrapped.apply(builders,arguments))}}function populateSupertypeList(typeName,list){list.length=0;list.push(typeName);var lastSeen=Object.create(null);for(var pos=0;pos<list.length;++pos){typeName=list[pos];var d=defCache[typeName];if(d.finalized!==true){throw new Error("")}if(hasOwn.call(lastSeen,typeName)){delete list[lastSeen[typeName]]}lastSeen[typeName]=pos;list.push.apply(list,d.baseNames)}for(var to=0,from=to,len=list.length;from<len;++from){if(hasOwn.call(list,from)){list[to++]=list[from]}}list.length=to}function extend(into,from){Object.keys(from).forEach(function(name){into[name]=from[name]});return into}exports.finalize=function(){Object.keys(defCache).forEach(function(name){defCache[name].finalize()})};return exports}},{}],72:[function(require,module,exports){module.exports=require("./fork")([require("./def/core"),require("./def/es6"),require("./def/es7"),require("./def/mozilla"),require("./def/e4x"),require("./def/jsx"),require("./def/flow"),require("./def/esprima"),require("./def/babel"),require("./def/babel6")])},{"./def/babel":53,"./def/babel6":55,"./def/core":56,"./def/e4x":57,"./def/es6":58,"./def/es7":59,"./def/esprima":60,"./def/flow":61,"./def/jsx":62,"./def/mozilla":63,"./fork":64}],73:[function(require,module,exports){(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(typeof module!=="undefined"&&module.exports){classNames.default=classNames;module.exports=classNames}else if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define("classnames",[],function(){return classNames})}else{window.classNames=classNames}})()},{}],74:[function(require,module,exports){(function(mod){if(typeof exports=="object"&&typeof module=="object")mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var noOptions={};var nonWS=/[^\s\u00a0]/;var Pos=CodeMirror.Pos,cmp=CodeMirror.cmpPos;function firstNonWS(str){var found=str.search(nonWS);return found==-1?0:found}CodeMirror.commands.toggleComment=function(cm){cm.toggleComment()};CodeMirror.defineExtension("toggleComment",function(options){if(!options)options=noOptions;var cm=this;var minLine=Infinity,ranges=this.listSelections(),mode=null;for(var i=ranges.length-1;i>=0;i--){var from=ranges[i].from(),to=ranges[i].to();if(from.line>=minLine)continue;if(to.line>=minLine)to=Pos(minLine,0);minLine=from.line;if(mode==null){if(cm.uncomment(from,to,options))mode="un";else{cm.lineComment(from,to,options);mode="line"}}else if(mode=="un"){cm.uncomment(from,to,options)}else{cm.lineComment(from,to,options)}}});function probablyInsideString(cm,pos,line){return/\bstring\b/.test(cm.getTokenTypeAt(Pos(pos.line,0)))&&!/^[\'\"\`]/.test(line)}function getMode(cm,pos){var mode=cm.getMode();return mode.useInnerComments===false||!mode.innerMode?mode:cm.getModeAt(pos)}CodeMirror.defineExtension("lineComment",function(from,to,options){if(!options)options=noOptions;var self=this,mode=getMode(self,from);var firstLine=self.getLine(from.line);if(firstLine==null||probablyInsideString(self,from,firstLine))return;var commentString=options.lineComment||mode.lineComment;if(!commentString){if(options.blockCommentStart||mode.blockCommentStart){options.fullLines=true;self.blockComment(from,to,options)}return}var end=Math.min(to.ch!=0||to.line==from.line?to.line+1:to.line,self.lastLine()+1);var pad=options.padding==null?" ":options.padding;var blankLines=options.commentBlankLines||from.line==to.line;self.operation(function(){if(options.indent){var baseString=null;for(var i=from.line;i<end;++i){var line=self.getLine(i);var whitespace=line.slice(0,firstNonWS(line));if(baseString==null||baseString.length>whitespace.length){baseString=whitespace}}for(var i=from.line;i<end;++i){var line=self.getLine(i),cut=baseString.length;if(!blankLines&&!nonWS.test(line))continue;if(line.slice(0,cut)!=baseString)cut=firstNonWS(line);self.replaceRange(baseString+commentString+pad,Pos(i,0),Pos(i,cut))}}else{for(var i=from.line;i<end;++i){if(blankLines||nonWS.test(self.getLine(i)))self.replaceRange(commentString+pad,Pos(i,0))}}})});CodeMirror.defineExtension("blockComment",function(from,to,options){if(!options)options=noOptions;var self=this,mode=getMode(self,from);var startString=options.blockCommentStart||mode.blockCommentStart;var endString=options.blockCommentEnd||mode.blockCommentEnd;if(!startString||!endString){if((options.lineComment||mode.lineComment)&&options.fullLines!=false)self.lineComment(from,to,options);return}if(/\bcomment\b/.test(self.getTokenTypeAt(Pos(from.line,0))))return;var end=Math.min(to.line,self.lastLine());if(end!=from.line&&to.ch==0&&nonWS.test(self.getLine(end)))--end;var pad=options.padding==null?" ":options.padding;if(from.line>end)return;self.operation(function(){if(options.fullLines!=false){var lastLineHasText=nonWS.test(self.getLine(end));self.replaceRange(pad+endString,Pos(end));self.replaceRange(startString+pad,Pos(from.line,0));var lead=options.blockCommentLead||mode.blockCommentLead;if(lead!=null)for(var i=from.line+1;i<=end;++i)if(i!=end||lastLineHasText)self.replaceRange(lead+pad,Pos(i,0))}else{var atCursor=cmp(self.getCursor("to"),to)==0,empty=!self.somethingSelected();self.replaceRange(endString,to);if(atCursor)self.setSelection(empty?to:self.getCursor("from"),to);self.replaceRange(startString,from)}})});CodeMirror.defineExtension("uncomment",function(from,to,options){if(!options)options=noOptions;var self=this,mode=getMode(self,from);var end=Math.min(to.ch!=0||to.line==from.line?to.line:to.line-1,self.lastLine()),start=Math.min(from.line,end);var lineString=options.lineComment||mode.lineComment,lines=[];var pad=options.padding==null?" ":options.padding,didSomething;lineComment:{if(!lineString)break lineComment;for(var i=start;i<=end;++i){var line=self.getLine(i);var found=line.indexOf(lineString);if(found>-1&&!/comment/.test(self.getTokenTypeAt(Pos(i,found+1))))found=-1;if(found==-1&&nonWS.test(line))break lineComment;if(found>-1&&nonWS.test(line.slice(0,found)))break lineComment;lines.push(line)}self.operation(function(){for(var i=start;i<=end;++i){var line=lines[i-start];var pos=line.indexOf(lineString),endPos=pos+lineString.length;if(pos<0)continue;if(line.slice(endPos,endPos+pad.length)==pad)endPos+=pad.length;didSomething=true;self.replaceRange("",Pos(i,pos),Pos(i,endPos))}});if(didSomething)return true}var startString=options.blockCommentStart||mode.blockCommentStart;var endString=options.blockCommentEnd||mode.blockCommentEnd;if(!startString||!endString)return false;var lead=options.blockCommentLead||mode.blockCommentLead;var startLine=self.getLine(start),open=startLine.indexOf(startString);if(open==-1)return false;var endLine=end==start?startLine:self.getLine(end);var close=endLine.indexOf(endString,end==start?open+startString.length:0);var insideStart=Pos(start,open+1),insideEnd=Pos(end,close+1);if(close==-1||!/comment/.test(self.getTokenTypeAt(insideStart))||!/comment/.test(self.getTokenTypeAt(insideEnd))||self.getRange(insideStart,insideEnd,"\n").indexOf(endString)>-1)return false;var lastStart=startLine.lastIndexOf(startString,from.ch);var firstEnd=lastStart==-1?-1:startLine.slice(0,from.ch).indexOf(endString,lastStart+startString.length);if(lastStart!=-1&&firstEnd!=-1&&firstEnd+endString.length!=from.ch)return false;firstEnd=endLine.indexOf(endString,to.ch);var almostLastStart=endLine.slice(to.ch).lastIndexOf(startString,firstEnd-to.ch);lastStart=firstEnd==-1||almostLastStart==-1?-1:to.ch+almostLastStart;if(firstEnd!=-1&&lastStart!=-1&&lastStart!=to.ch)return false;self.operation(function(){self.replaceRange("",Pos(end,close-(pad&&endLine.slice(close-pad.length,close)==pad?pad.length:0)),Pos(end,close+endString.length));var openEnd=open+startString.length;if(pad&&startLine.slice(openEnd,openEnd+pad.length)==pad)openEnd+=pad.length;self.replaceRange("",Pos(start,open),Pos(start,openEnd));if(lead)for(var i=start+1;i<=end;++i){var line=self.getLine(i),found=line.indexOf(lead);if(found==-1||nonWS.test(line.slice(0,found)))continue;var foundEnd=found+lead.length;if(pad&&line.slice(foundEnd,foundEnd+pad.length)==pad)foundEnd+=pad.length;self.replaceRange("",Pos(i,found),Pos(i,foundEnd))}});return true})})},{"../../lib/codemirror":77}],75:[function(require,module,exports){(function(mod){if(typeof exports=="object"&&typeof module=="object")mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){var defaults={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"};var Pos=CodeMirror.Pos;CodeMirror.defineOption("autoCloseBrackets",false,function(cm,val,old){if(old&&old!=CodeMirror.Init){cm.removeKeyMap(keyMap);cm.state.closeBrackets=null}if(val){ensureBound(getOption(val,"pairs"));cm.state.closeBrackets=val;cm.addKeyMap(keyMap)}});function getOption(conf,name){if(name=="pairs"&&typeof conf=="string")return conf;if(typeof conf=="object"&&conf[name]!=null)return conf[name];return defaults[name]}var keyMap={Backspace:handleBackspace,Enter:handleEnter};function ensureBound(chars){for(var i=0;i<chars.length;i++){var ch=chars.charAt(i),key="'"+ch+"'";if(!keyMap[key])keyMap[key]=handler(ch)}}ensureBound(defaults.pairs+"`");function handler(ch){return function(cm){return handleChar(cm,ch)}}function getConfig(cm){var deflt=cm.state.closeBrackets;if(!deflt||deflt.override)return deflt;var mode=cm.getModeAt(cm.getCursor());return mode.closeBrackets||deflt}function handleBackspace(cm){var conf=getConfig(cm);if(!conf||cm.getOption("disableInput"))return CodeMirror.Pass;var pairs=getOption(conf,"pairs");var ranges=cm.listSelections();for(var i=0;i<ranges.length;i++){if(!ranges[i].empty())return CodeMirror.Pass;var around=charsAround(cm,ranges[i].head);if(!around||pairs.indexOf(around)%2!=0)return CodeMirror.Pass}for(var i=ranges.length-1;i>=0;i--){var cur=ranges[i].head;cm.replaceRange("",Pos(cur.line,cur.ch-1),Pos(cur.line,cur.ch+1),"+delete")}}function handleEnter(cm){var conf=getConfig(cm);var explode=conf&&getOption(conf,"explode");if(!explode||cm.getOption("disableInput"))return CodeMirror.Pass;var ranges=cm.listSelections();for(var i=0;i<ranges.length;i++){if(!ranges[i].empty())return CodeMirror.Pass;var around=charsAround(cm,ranges[i].head);if(!around||explode.indexOf(around)%2!=0)return CodeMirror.Pass}cm.operation(function(){var linesep=cm.lineSeparator()||"\n";cm.replaceSelection(linesep+linesep,null);moveSel(cm,-1);ranges=cm.listSelections();for(var i=0;i<ranges.length;i++){var line=ranges[i].head.line;cm.indentLine(line,null,true);cm.indentLine(line+1,null,true)}})}function moveSel(cm,dir){var newRanges=[],ranges=cm.listSelections(),primary=0;for(var i=0;i<ranges.length;i++){var range=ranges[i];if(range.head==cm.getCursor())primary=i;var pos=range.head.ch||dir>0?{line:range.head.line,ch:range.head.ch+dir}:{line:range.head.line-1};newRanges.push({anchor:pos,head:pos})}cm.setSelections(newRanges,primary)}function contractSelection(sel){var inverted=CodeMirror.cmpPos(sel.anchor,sel.head)>0;return{anchor:new Pos(sel.anchor.line,sel.anchor.ch+(inverted?-1:1)),head:new Pos(sel.head.line,sel.head.ch+(inverted?1:-1))}}function handleChar(cm,ch){var conf=getConfig(cm);if(!conf||cm.getOption("disableInput"))return CodeMirror.Pass;var pairs=getOption(conf,"pairs");var pos=pairs.indexOf(ch);if(pos==-1)return CodeMirror.Pass;var closeBefore=getOption(conf,"closeBefore");var triples=getOption(conf,"triples");var identical=pairs.charAt(pos+1)==ch;var ranges=cm.listSelections();var opening=pos%2==0;var type;for(var i=0;i<ranges.length;i++){var range=ranges[i],cur=range.head,curType;var next=cm.getRange(cur,Pos(cur.line,cur.ch+1));if(opening&&!range.empty()){curType="surround"}else if((identical||!opening)&&next==ch){if(identical&&stringStartsAfter(cm,cur))curType="both";else if(triples.indexOf(ch)>=0&&cm.getRange(cur,Pos(cur.line,cur.ch+3))==ch+ch+ch)curType="skipThree";else curType="skip"}else if(identical&&cur.ch>1&&triples.indexOf(ch)>=0&&cm.getRange(Pos(cur.line,cur.ch-2),cur)==ch+ch){if(cur.ch>2&&/\bstring/.test(cm.getTokenTypeAt(Pos(cur.line,cur.ch-2))))return CodeMirror.Pass;curType="addFour"}else if(identical){var prev=cur.ch==0?" ":cm.getRange(Pos(cur.line,cur.ch-1),cur);if(!CodeMirror.isWordChar(next)&&prev!=ch&&!CodeMirror.isWordChar(prev))curType="both";else return CodeMirror.Pass}else if(opening&&(next.length===0||/\s/.test(next)||closeBefore.indexOf(next)>-1)){curType="both"}else{return CodeMirror.Pass}if(!type)type=curType;else if(type!=curType)return CodeMirror.Pass}var left=pos%2?pairs.charAt(pos-1):ch;var right=pos%2?ch:pairs.charAt(pos+1);cm.operation(function(){if(type=="skip"){moveSel(cm,1)}else if(type=="skipThree"){moveSel(cm,3)}else if(type=="surround"){var sels=cm.getSelections();for(var i=0;i<sels.length;i++)sels[i]=left+sels[i]+right;cm.replaceSelections(sels,"around");sels=cm.listSelections().slice();for(var i=0;i<sels.length;i++)sels[i]=contractSelection(sels[i]);cm.setSelections(sels)}else if(type=="both"){cm.replaceSelection(left+right,null);cm.triggerElectric(left+right);moveSel(cm,-1)}else if(type=="addFour"){cm.replaceSelection(left+left+left+left,"before");moveSel(cm,1)}})}function charsAround(cm,pos){var str=cm.getRange(Pos(pos.line,pos.ch-1),Pos(pos.line,pos.ch+1));return str.length==2?str:null}function stringStartsAfter(cm,pos){var token=cm.getTokenAt(Pos(pos.line,pos.ch+1));return/\bstring/.test(token.type)&&token.start==pos.ch&&(pos.ch==0||!/\bstring/.test(cm.getTokenTypeAt(pos)))}})},{"../../lib/codemirror":77}],76:[function(require,module,exports){(function(mod){if(typeof exports=="object"&&typeof module=="object")mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){var ie_lt8=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var Pos=CodeMirror.Pos;var matching={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function bracketRegex(config){return config&&config.bracketRegex||/[(){}[\]]/}function findMatchingBracket(cm,where,config){var line=cm.getLineHandle(where.line),pos=where.ch-1;var afterCursor=config&&config.afterCursor;if(afterCursor==null)afterCursor=/(^| )cm-fat-cursor($| )/.test(cm.getWrapperElement().className);var re=bracketRegex(config);var match=!afterCursor&&pos>=0&&re.test(line.text.charAt(pos))&&matching[line.text.charAt(pos)]||re.test(line.text.charAt(pos+1))&&matching[line.text.charAt(++pos)];if(!match)return null;var dir=match.charAt(1)==">"?1:-1;if(config&&config.strict&&dir>0!=(pos==where.ch))return null;var style=cm.getTokenTypeAt(Pos(where.line,pos+1));var found=scanForBracket(cm,Pos(where.line,pos+(dir>0?1:0)),dir,style,config);if(found==null)return null;return{from:Pos(where.line,pos),to:found&&found.pos,match:found&&found.ch==match.charAt(0),forward:dir>0}}function scanForBracket(cm,where,dir,style,config){var maxScanLen=config&&config.maxScanLineLength||1e4;var maxScanLines=config&&config.maxScanLines||1e3;var stack=[];var re=bracketRegex(config);var lineEnd=dir>0?Math.min(where.line+maxScanLines,cm.lastLine()+1):Math.max(cm.firstLine()-1,where.line-maxScanLines);for(var lineNo=where.line;lineNo!=lineEnd;lineNo+=dir){var line=cm.getLine(lineNo);if(!line)continue;var pos=dir>0?0:line.length-1,end=dir>0?line.length:-1;if(line.length>maxScanLen)continue;if(lineNo==where.line)pos=where.ch-(dir<0?1:0);for(;pos!=end;pos+=dir){var ch=line.charAt(pos);if(re.test(ch)&&(style===undefined||(cm.getTokenTypeAt(Pos(lineNo,pos+1))||"")==(style||""))){var match=matching[ch];if(match&&match.charAt(1)==">"==dir>0)stack.push(ch);else if(!stack.length)return{pos:Pos(lineNo,pos),ch:ch};else stack.pop()}}}return lineNo-dir==(dir>0?cm.lastLine():cm.firstLine())?false:null}function matchBrackets(cm,autoclear,config){var maxHighlightLen=cm.state.matchBrackets.maxHighlightLineLength||1e3,highlightNonMatching=config&&config.highlightNonMatching;var marks=[],ranges=cm.listSelections();for(var i=0;i<ranges.length;i++){var match=ranges[i].empty()&&findMatchingBracket(cm,ranges[i].head,config);if(match&&(match.match||highlightNonMatching!==false)&&cm.getLine(match.from.line).length<=maxHighlightLen){var style=match.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";marks.push(cm.markText(match.from,Pos(match.from.line,match.from.ch+1),{className:style}));if(match.to&&cm.getLine(match.to.line).length<=maxHighlightLen)marks.push(cm.markText(match.to,Pos(match.to.line,match.to.ch+1),{className:style}))}}if(marks.length){if(ie_lt8&&cm.state.focused)cm.focus();var clear=function(){cm.operation(function(){for(var i=0;i<marks.length;i++)marks[i].clear()})};if(autoclear)setTimeout(clear,800);else return clear}}function doMatchBrackets(cm){cm.operation(function(){if(cm.state.matchBrackets.currentlyHighlighted){cm.state.matchBrackets.currentlyHighlighted();cm.state.matchBrackets.currentlyHighlighted=null}cm.state.matchBrackets.currentlyHighlighted=matchBrackets(cm,false,cm.state.matchBrackets)})}function clearHighlighted(cm){if(cm.state.matchBrackets&&cm.state.matchBrackets.currentlyHighlighted){cm.state.matchBrackets.currentlyHighlighted();cm.state.matchBrackets.currentlyHighlighted=null}}CodeMirror.defineOption("matchBrackets",false,function(cm,val,old){if(old&&old!=CodeMirror.Init){cm.off("cursorActivity",doMatchBrackets);cm.off("focus",doMatchBrackets);cm.off("blur",clearHighlighted);clearHighlighted(cm)}if(val){cm.state.matchBrackets=typeof val=="object"?val:{};cm.on("cursorActivity",doMatchBrackets);cm.on("focus",doMatchBrackets);cm.on("blur",clearHighlighted)}});CodeMirror.defineExtension("matchBrackets",function(){matchBrackets(this,true)});CodeMirror.defineExtension("findMatchingBracket",function(pos,config,oldConfig){if(oldConfig||typeof config=="boolean"){if(!oldConfig){config=config?{strict:true}:null}else{oldConfig.strict=config;config=oldConfig}}return findMatchingBracket(this,pos,config)});CodeMirror.defineExtension("scanForBracket",function(pos,dir,style,config){return scanForBracket(this,pos,dir,style,config)})})},{"../../lib/codemirror":77}],77:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):(global=global||self,global.CodeMirror=factory())})(this,function(){"use strict";var userAgent=navigator.userAgent;var platform=navigator.platform;var gecko=/gecko\/\d/i.test(userAgent);var ie_upto10=/MSIE \d/.test(userAgent);var ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);var edge=/Edge\/(\d+)/.exec(userAgent);var ie=ie_upto10||ie_11up||edge;var ie_version=ie&&(ie_upto10?document.documentMode||6:+(edge||ie_11up)[1]);var webkit=!edge&&/WebKit\//.test(userAgent);var qtwebkit=webkit&&/Qt\/\d+\.\d+/.test(userAgent);var chrome=!edge&&/Chrome\//.test(userAgent);var presto=/Opera\//.test(userAgent);var safari=/Apple Computer/.test(navigator.vendor);var mac_geMountainLion=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);var phantom=/PhantomJS/.test(userAgent);var ios=safari&&(/Mobile\/\w+/.test(userAgent)||navigator.maxTouchPoints>2);var android=/Android/.test(userAgent);var mobile=ios||android||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);var mac=ios||/Mac/.test(platform);var chromeOS=/\bCrOS\b/.test(userAgent);var windows=/win/i.test(platform);var presto_version=presto&&userAgent.match(/Version\/(\d*\.\d*)/);if(presto_version){presto_version=Number(presto_version[1])}if(presto_version&&presto_version>=15){presto=false;webkit=true}var flipCtrlCmd=mac&&(qtwebkit||presto&&(presto_version==null||presto_version<12.11));var captureRightClick=gecko||ie&&ie_version>=9;function classTest(cls){return new RegExp("(^|\\s)"+cls+"(?:$|\\s)\\s*")}var rmClass=function(node,cls){var current=node.className;var match=classTest(cls).exec(current);if(match){var after=current.slice(match.index+match[0].length);node.className=current.slice(0,match.index)+(after?match[1]+after:"")}};function removeChildren(e){for(var count=e.childNodes.length;count>0;--count){e.removeChild(e.firstChild)}return e}function removeChildrenAndAdd(parent,e){return removeChildren(parent).appendChild(e)}function elt(tag,content,className,style){var e=document.createElement(tag);if(className){e.className=className}if(style){e.style.cssText=style}if(typeof content=="string"){e.appendChild(document.createTextNode(content))}else if(content){for(var i=0;i<content.length;++i){e.appendChild(content[i])}}return e}function eltP(tag,content,className,style){var e=elt(tag,content,className,style);e.setAttribute("role","presentation");return e}var range;if(document.createRange){range=function(node,start,end,endNode){var r=document.createRange();r.setEnd(endNode||node,end);r.setStart(node,start);return r}}else{range=function(node,start,end){var r=document.body.createTextRange();try{r.moveToElementText(node.parentNode)}catch(e){return r}r.collapse(true);r.moveEnd("character",end);r.moveStart("character",start);return r}}function contains(parent,child){if(child.nodeType==3){child=child.parentNode}if(parent.contains){return parent.contains(child)}do{if(child.nodeType==11){child=child.host}if(child==parent){return true}}while(child=child.parentNode)}function activeElt(){var activeElement;try{activeElement=document.activeElement}catch(e){activeElement=document.body||null}while(activeElement&&activeElement.shadowRoot&&activeElement.shadowRoot.activeElement){activeElement=activeElement.shadowRoot.activeElement}return activeElement}function addClass(node,cls){var current=node.className;if(!classTest(cls).test(current)){node.className+=(current?" ":"")+cls}}function joinClasses(a,b){var as=a.split(" ");for(var i=0;i<as.length;i++){if(as[i]&&!classTest(as[i]).test(b)){b+=" "+as[i]}}return b}var selectInput=function(node){node.select()};if(ios){selectInput=function(node){node.selectionStart=0;node.selectionEnd=node.value.length}}else if(ie){selectInput=function(node){try{node.select()}catch(_e){}}}function bind(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}}function copyObj(obj,target,overwrite){if(!target){target={}}for(var prop in obj){if(obj.hasOwnProperty(prop)&&(overwrite!==false||!target.hasOwnProperty(prop))){target[prop]=obj[prop]}}return target}function countColumn(string,end,tabSize,startIndex,startValue){if(end==null){end=string.search(/[^\s\u00a0]/);if(end==-1){end=string.length}}for(var i=startIndex||0,n=startValue||0;;){var nextTab=string.indexOf("\t",i);if(nextTab<0||nextTab>=end){return n+(end-i)}n+=nextTab-i;n+=tabSize-n%tabSize;i=nextTab+1}}var Delayed=function(){this.id=null;this.f=null;this.time=0;this.handler=bind(this.onTimeout,this)};Delayed.prototype.onTimeout=function(self){self.id=0;if(self.time<=+new Date){self.f()}else{setTimeout(self.handler,self.time-+new Date)}};Delayed.prototype.set=function(ms,f){this.f=f;var time=+new Date+ms;if(!this.id||time<this.time){clearTimeout(this.id);this.id=setTimeout(this.handler,ms);this.time=time}};function indexOf(array,elt){for(var i=0;i<array.length;++i){if(array[i]==elt){return i}}return-1}var scrollerGap=50;var Pass={toString:function(){return"CodeMirror.Pass"}};var sel_dontScroll={scroll:false},sel_mouse={origin:"*mouse"},sel_move={origin:"+move"};function findColumn(string,goal,tabSize){for(var pos=0,col=0;;){var nextTab=string.indexOf("\t",pos);if(nextTab==-1){nextTab=string.length}var skipped=nextTab-pos;if(nextTab==string.length||col+skipped>=goal){return pos+Math.min(skipped,goal-col)}col+=nextTab-pos;col+=tabSize-col%tabSize;pos=nextTab+1;if(col>=goal){return pos}}}var spaceStrs=[""];function spaceStr(n){while(spaceStrs.length<=n){spaceStrs.push(lst(spaceStrs)+" ")}return spaceStrs[n]}function lst(arr){return arr[arr.length-1]}function map(array,f){var out=[];for(var i=0;i<array.length;i++){out[i]=f(array[i],i)}return out}function insertSorted(array,value,score){var pos=0,priority=score(value);while(pos<array.length&&score(array[pos])<=priority){pos++}array.splice(pos,0,value)}function nothing(){}function createObj(base,props){var inst;if(Object.create){inst=Object.create(base)}else{nothing.prototype=base;inst=new nothing}if(props){copyObj(props,inst)}return inst}var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function isWordCharBasic(ch){return/\w/.test(ch)||ch>"\x80"&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch))}function isWordChar(ch,helper){if(!helper){return isWordCharBasic(ch)}if(helper.source.indexOf("\\w")>-1&&isWordCharBasic(ch)){return true}return helper.test(ch)}function isEmpty(obj){for(var n in obj){if(obj.hasOwnProperty(n)&&obj[n]){return false}}return true}var extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function isExtendingChar(ch){return ch.charCodeAt(0)>=768&&extendingChars.test(ch)}function skipExtendingChars(str,pos,dir){while((dir<0?pos>0:pos<str.length)&&isExtendingChar(str.charAt(pos))){pos+=dir}return pos}function findFirst(pred,from,to){var dir=from>to?-1:1;for(;;){if(from==to){return from}var midF=(from+to)/2,mid=dir<0?Math.ceil(midF):Math.floor(midF);if(mid==from){return pred(mid)?from:to}if(pred(mid)){to=mid}else{from=mid+dir}}}function iterateBidiSections(order,from,to,f){if(!order){return f(from,to,"ltr",0)}var found=false;for(var i=0;i<order.length;++i){var part=order[i];if(part.from<to&&part.to>from||from==to&&part.to==from){f(Math.max(part.from,from),Math.min(part.to,to),part.level==1?"rtl":"ltr",i);found=true}}if(!found){f(from,to,"ltr")}}var bidiOther=null;function getBidiPartAt(order,ch,sticky){var found;bidiOther=null;for(var i=0;i<order.length;++i){var cur=order[i];if(cur.from<ch&&cur.to>ch){return i}if(cur.to==ch){if(cur.from!=cur.to&&sticky=="before"){found=i}else{bidiOther=i}}if(cur.from==ch){if(cur.from!=cur.to&&sticky!="before"){found=i}else{bidiOther=i}}}return found!=null?found:bidiOther}var bidiOrdering=function(){var lowTypes="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var arabicTypes="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function charType(code){if(code<=247){return lowTypes.charAt(code)}else if(1424<=code&&code<=1524){return"R"}else if(1536<=code&&code<=1785){return arabicTypes.charAt(code-1536)}else if(1774<=code&&code<=2220){return"r"}else if(8192<=code&&code<=8203){return"w"}else if(code==8204){return"b"}else{return"L"}}var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var isNeutral=/[stwN]/,isStrong=/[LRr]/,countsAsLeft=/[Lb1n]/,countsAsNum=/[1n]/;function BidiSpan(level,from,to){this.level=level;this.from=from;this.to=to}return function(str,direction){var outerType=direction=="ltr"?"L":"R";if(str.length==0||direction=="ltr"&&!bidiRE.test(str)){return false}var len=str.length,types=[];for(var i=0;i<len;++i){types.push(charType(str.charCodeAt(i)))}for(var i$1=0,prev=outerType;i$1<len;++i$1){var type=types[i$1];if(type=="m"){types[i$1]=prev}else{prev=type}}for(var i$2=0,cur=outerType;i$2<len;++i$2){var type$1=types[i$2];if(type$1=="1"&&cur=="r"){types[i$2]="n"}else if(isStrong.test(type$1)){cur=type$1;if(type$1=="r"){types[i$2]="R"}}}for(var i$3=1,prev$1=types[0];i$3<len-1;++i$3){var type$2=types[i$3];if(type$2=="+"&&prev$1=="1"&&types[i$3+1]=="1"){types[i$3]="1"}else if(type$2==","&&prev$1==types[i$3+1]&&(prev$1=="1"||prev$1=="n")){types[i$3]=prev$1}prev$1=type$2}for(var i$4=0;i$4<len;++i$4){var type$3=types[i$4];if(type$3==","){types[i$4]="N"}else if(type$3=="%"){var end=void 0;for(end=i$4+1;end<len&&types[end]=="%";++end){}var replace=i$4&&types[i$4-1]=="!"||end<len&&types[end]=="1"?"1":"N";for(var j=i$4;j<end;++j){types[j]=replace}i$4=end-1}}for(var i$5=0,cur$1=outerType;i$5<len;++i$5){var type$4=types[i$5];if(cur$1=="L"&&type$4=="1"){types[i$5]="L"}else if(isStrong.test(type$4)){cur$1=type$4}}for(var i$6=0;i$6<len;++i$6){if(isNeutral.test(types[i$6])){var end$1=void 0;for(end$1=i$6+1;end$1<len&&isNeutral.test(types[end$1]);++end$1){}var before=(i$6?types[i$6-1]:outerType)=="L";var after=(end$1<len?types[end$1]:outerType)=="L";var replace$1=before==after?before?"L":"R":outerType;for(var j$1=i$6;j$1<end$1;++j$1){types[j$1]=replace$1}i$6=end$1-1}}var order=[],m;for(var i$7=0;i$7<len;){if(countsAsLeft.test(types[i$7])){var start=i$7;for(++i$7;i$7<len&&countsAsLeft.test(types[i$7]);++i$7){}order.push(new BidiSpan(0,start,i$7))}else{var pos=i$7,at=order.length,isRTL=direction=="rtl"?1:0;for(++i$7;i$7<len&&types[i$7]!="L";++i$7){}for(var j$2=pos;j$2<i$7;){if(countsAsNum.test(types[j$2])){if(pos<j$2){order.splice(at,0,new BidiSpan(1,pos,j$2));at+=isRTL}var nstart=j$2;for(++j$2;j$2<i$7&&countsAsNum.test(types[j$2]);++j$2){}order.splice(at,0,new BidiSpan(2,nstart,j$2));at+=isRTL;pos=j$2}else{++j$2}}if(pos<i$7){order.splice(at,0,new BidiSpan(1,pos,i$7))}}}if(direction=="ltr"){if(order[0].level==1&&(m=str.match(/^\s+/))){order[0].from=m[0].length;order.unshift(new BidiSpan(0,0,m[0].length))}if(lst(order).level==1&&(m=str.match(/\s+$/))){lst(order).to-=m[0].length;order.push(new BidiSpan(0,len-m[0].length,len))}}return direction=="rtl"?order.reverse():order}}();function getOrder(line,direction){var order=line.order;if(order==null){order=line.order=bidiOrdering(line.text,direction)}return order}var noHandlers=[];var on=function(emitter,type,f){if(emitter.addEventListener){emitter.addEventListener(type,f,false)}else if(emitter.attachEvent){emitter.attachEvent("on"+type,f)}else{var map=emitter._handlers||(emitter._handlers={});map[type]=(map[type]||noHandlers).concat(f)}};function getHandlers(emitter,type){return emitter._handlers&&emitter._handlers[type]||noHandlers}function off(emitter,type,f){if(emitter.removeEventListener){emitter.removeEventListener(type,f,false)}else if(emitter.detachEvent){emitter.detachEvent("on"+type,f)}else{var map=emitter._handlers,arr=map&&map[type];if(arr){var index=indexOf(arr,f);if(index>-1){map[type]=arr.slice(0,index).concat(arr.slice(index+1))}}}}function signal(emitter,type){var handlers=getHandlers(emitter,type);if(!handlers.length){return}var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<handlers.length;++i){handlers[i].apply(null,args)}}function signalDOMEvent(cm,e,override){if(typeof e=="string"){e={type:e,preventDefault:function(){this.defaultPrevented=true}}}signal(cm,override||e.type,cm,e);return e_defaultPrevented(e)||e.codemirrorIgnore}function signalCursorActivity(cm){var arr=cm._handlers&&cm._handlers.cursorActivity;if(!arr){return}var set=cm.curOp.cursorActivityHandlers||(cm.curOp.cursorActivityHandlers=[]);for(var i=0;i<arr.length;++i){if(indexOf(set,arr[i])==-1){set.push(arr[i])}}}function hasHandler(emitter,type){return getHandlers(emitter,type).length>0}function eventMixin(ctor){ctor.prototype.on=function(type,f){on(this,type,f)};ctor.prototype.off=function(type,f){off(this,type,f)}}function e_preventDefault(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}function e_stopPropagation(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}function e_defaultPrevented(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==false}function e_stop(e){e_preventDefault(e);e_stopPropagation(e)}function e_target(e){return e.target||e.srcElement}function e_button(e){var b=e.which;if(b==null){if(e.button&1){b=1}else if(e.button&2){b=3}else if(e.button&4){b=2}}if(mac&&e.ctrlKey&&b==1){b=3}return b}var dragAndDrop=function(){if(ie&&ie_version<9){return false}var div=elt("div");return"draggable"in div||"dragDrop"in div}();var zwspSupported;function zeroWidthElement(measure){if(zwspSupported==null){var test=elt("span","\u200b");removeChildrenAndAdd(measure,elt("span",[test,document.createTextNode("x")]));if(measure.firstChild.offsetHeight!=0){zwspSupported=test.offsetWidth<=1&&test.offsetHeight>2&&!(ie&&ie_version<8)}}var node=zwspSupported?elt("span","\u200b"):elt("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");node.setAttribute("cm-text","");return node}var badBidiRects;function hasBadBidiRects(measure){if(badBidiRects!=null){return badBidiRects}var txt=removeChildrenAndAdd(measure,document.createTextNode("A\u062eA"));var r0=range(txt,0,1).getBoundingClientRect();var r1=range(txt,1,2).getBoundingClientRect();removeChildren(measure);if(!r0||r0.left==r0.right){return false}return badBidiRects=r1.right-r0.right<3}var splitLinesAuto="\n\nb".split(/\n/).length!=3?function(string){var pos=0,result=[],l=string.length;while(pos<=l){var nl=string.indexOf("\n",pos);if(nl==-1){nl=string.length}var line=string.slice(pos,string.charAt(nl-1)=="\r"?nl-1:nl);var rt=line.indexOf("\r");if(rt!=-1){result.push(line.slice(0,rt));pos+=rt+1}else{result.push(line);pos=nl+1}}return result}:function(string){return string.split(/\r\n?|\n/)};var hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd}catch(e){return false}}:function(te){var range;try{range=te.ownerDocument.selection.createRange()}catch(e){}if(!range||range.parentElement()!=te){return false}return range.compareEndPoints("StartToEnd",range)!=0};var hasCopyEvent=function(){var e=elt("div");if("oncopy"in e){return true}e.setAttribute("oncopy","return;");return typeof e.oncopy=="function"}();var badZoomedRects=null;function hasBadZoomedRects(measure){if(badZoomedRects!=null){return badZoomedRects}var node=removeChildrenAndAdd(measure,elt("span","x"));var normal=node.getBoundingClientRect();var fromRange=range(node,0,1).getBoundingClientRect();return badZoomedRects=Math.abs(normal.left-fromRange.left)>1}var modes={},mimeModes={};function defineMode(name,mode){if(arguments.length>2){mode.dependencies=Array.prototype.slice.call(arguments,2)}modes[name]=mode}function defineMIME(mime,spec){mimeModes[mime]=spec}function resolveMode(spec){if(typeof spec=="string"&&mimeModes.hasOwnProperty(spec)){spec=mimeModes[spec]}else if(spec&&typeof spec.name=="string"&&mimeModes.hasOwnProperty(spec.name)){var found=mimeModes[spec.name];if(typeof found=="string"){found={name:found}}spec=createObj(found,spec);spec.name=found.name}else if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec)){return resolveMode("application/xml")}else if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(spec)){return resolveMode("application/json")}if(typeof spec=="string"){return{name:spec}}else{return spec||{name:"null"}}}function getMode(options,spec){spec=resolveMode(spec);var mfactory=modes[spec.name];if(!mfactory){return getMode(options,"text/plain")}var modeObj=mfactory(options,spec);if(modeExtensions.hasOwnProperty(spec.name)){var exts=modeExtensions[spec.name];for(var prop in exts){if(!exts.hasOwnProperty(prop)){continue}if(modeObj.hasOwnProperty(prop)){modeObj["_"+prop]=modeObj[prop]}modeObj[prop]=exts[prop]}}modeObj.name=spec.name;if(spec.helperType){modeObj.helperType=spec.helperType}if(spec.modeProps){for(var prop$1 in spec.modeProps){modeObj[prop$1]=spec.modeProps[prop$1]}}return modeObj}var modeExtensions={};function extendMode(mode,properties){var exts=modeExtensions.hasOwnProperty(mode)?modeExtensions[mode]:modeExtensions[mode]={};copyObj(properties,exts)}function copyState(mode,state){if(state===true){return state}if(mode.copyState){return mode.copyState(state)}var nstate={};for(var n in state){var val=state[n];if(val instanceof Array){val=val.concat([])}nstate[n]=val}return nstate}function innerMode(mode,state){var info;while(mode.innerMode){info=mode.innerMode(state);if(!info||info.mode==mode){break}state=info.state;mode=info.mode}return info||{mode:mode,state:state}}function startState(mode,a1,a2){return mode.startState?mode.startState(a1,a2):true}var StringStream=function(string,tabSize,lineOracle){this.pos=this.start=0;this.string=string;this.tabSize=tabSize||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;this.lineOracle=lineOracle};StringStream.prototype.eol=function(){return this.pos>=this.string.length};StringStream.prototype.sol=function(){return this.pos==this.lineStart};StringStream.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};StringStream.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};StringStream.prototype.eat=function(match){var ch=this.string.charAt(this.pos);var ok;if(typeof match=="string"){ok=ch==match}else{ok=ch&&(match.test?match.test(ch):match(ch))}if(ok){++this.pos;return ch}};StringStream.prototype.eatWhile=function(match){var start=this.pos;while(this.eat(match)){}return this.pos>start};StringStream.prototype.eatSpace=function(){var start=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>start};StringStream.prototype.skipToEnd=function(){this.pos=this.string.length};StringStream.prototype.skipTo=function(ch){var found=this.string.indexOf(ch,this.pos);if(found>-1){this.pos=found;return true}};StringStream.prototype.backUp=function(n){this.pos-=n};StringStream.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)};StringStream.prototype.indentation=function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)};StringStream.prototype.match=function(pattern,consume,caseInsensitive){if(typeof pattern=="string"){var cased=function(str){return caseInsensitive?str.toLowerCase():str};var substr=this.string.substr(this.pos,pattern.length);if(cased(substr)==cased(pattern)){if(consume!==false){this.pos+=pattern.length}return true}}else{var match=this.string.slice(this.pos).match(pattern);if(match&&match.index>0){return null}if(match&&consume!==false){this.pos+=match[0].length}return match}};StringStream.prototype.current=function(){return this.string.slice(this.start,this.pos)};StringStream.prototype.hideFirstChars=function(n,inner){this.lineStart+=n;try{return inner()}finally{this.lineStart-=n}};StringStream.prototype.lookAhead=function(n){var oracle=this.lineOracle;return oracle&&oracle.lookAhead(n)};StringStream.prototype.baseToken=function(){var oracle=this.lineOracle;return oracle&&oracle.baseToken(this.pos)};function getLine(doc,n){n-=doc.first;if(n<0||n>=doc.size){throw new Error("There is no line "+(n+doc.first)+" in the document.")}var chunk=doc;while(!chunk.lines){for(var i=0;;++i){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;break}n-=sz}}return chunk.lines[n]}function getBetween(doc,start,end){var out=[],n=start.line;doc.iter(start.line,end.line+1,function(line){var text=line.text;if(n==end.line){text=text.slice(0,end.ch)}if(n==start.line){text=text.slice(start.ch)}out.push(text);++n});return out}function getLines(doc,from,to){var out=[];doc.iter(from,to,function(line){out.push(line.text)});return out}function updateLineHeight(line,height){var diff=height-line.height;if(diff){for(var n=line;n;n=n.parent){n.height+=diff}}}function lineNo(line){if(line.parent==null){return null}var cur=line.parent,no=indexOf(cur.lines,line);for(var chunk=cur.parent;chunk;cur=chunk,chunk=chunk.parent){for(var i=0;;++i){if(chunk.children[i]==cur){break}no+=chunk.children[i].chunkSize()}}return no+cur.first}function lineAtHeight(chunk,h){var n=chunk.first;outer:do{for(var i$1=0;i$1<chunk.children.length;++i$1){var child=chunk.children[i$1],ch=child.height;if(h<ch){chunk=child;continue outer}h-=ch;n+=child.chunkSize()}return n}while(!chunk.lines);var i=0;for(;i<chunk.lines.length;++i){var line=chunk.lines[i],lh=line.height;if(h<lh){break}h-=lh}return n+i}function isLine(doc,l){return l>=doc.first&&l<doc.first+doc.size}function lineNumberFor(options,i){return String(options.lineNumberFormatter(i+options.firstLineNumber))}function Pos(line,ch,sticky){if(sticky===void 0)sticky=null;if(!(this instanceof Pos)){return new Pos(line,ch,sticky)}this.line=line;this.ch=ch;this.sticky=sticky}function cmp(a,b){return a.line-b.line||a.ch-b.ch}function equalCursorPos(a,b){return a.sticky==b.sticky&&cmp(a,b)==0}function copyPos(x){return Pos(x.line,x.ch)}function maxPos(a,b){return cmp(a,b)<0?b:a}function minPos(a,b){return cmp(a,b)<0?a:b}function clipLine(doc,n){return Math.max(doc.first,Math.min(n,doc.first+doc.size-1))}function clipPos(doc,pos){if(pos.line<doc.first){return Pos(doc.first,0)}var last=doc.first+doc.size-1;if(pos.line>last){return Pos(last,getLine(doc,last).text.length)}return clipToLen(pos,getLine(doc,pos.line).text.length)}function clipToLen(pos,linelen){var ch=pos.ch;if(ch==null||ch>linelen){return Pos(pos.line,linelen)}else if(ch<0){return Pos(pos.line,0)}else{return pos}}function clipPosArray(doc,array){var out=[];for(var i=0;i<array.length;i++){out[i]=clipPos(doc,array[i])}return out}var SavedContext=function(state,lookAhead){this.state=state;this.lookAhead=lookAhead};var Context=function(doc,state,line,lookAhead){this.state=state;this.doc=doc;this.line=line;this.maxLookAhead=lookAhead||0;this.baseTokens=null;this.baseTokenPos=1};Context.prototype.lookAhead=function(n){var line=this.doc.getLine(this.line+n);if(line!=null&&n>this.maxLookAhead){this.maxLookAhead=n}return line};Context.prototype.baseToken=function(n){if(!this.baseTokens){return null}while(this.baseTokens[this.baseTokenPos]<=n){this.baseTokenPos+=2}var type=this.baseTokens[this.baseTokenPos+1];return{type:type&&type.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-n}};Context.prototype.nextLine=function(){this.line++;if(this.maxLookAhead>0){this.maxLookAhead--}};Context.fromSaved=function(doc,saved,line){if(saved instanceof SavedContext){return new Context(doc,copyState(doc.mode,saved.state),line,saved.lookAhead)}else{return new Context(doc,copyState(doc.mode,saved),line)}};Context.prototype.save=function(copy){var state=copy!==false?copyState(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new SavedContext(state,this.maxLookAhead):state};function highlightLine(cm,line,context,forceToEnd){var st=[cm.state.modeGen],lineClasses={};runMode(cm,line.text,cm.doc.mode,context,function(end,style){return st.push(end,style)},lineClasses,forceToEnd);var state=context.state;var loop=function(o){context.baseTokens=st;var overlay=cm.state.overlays[o],i=1,at=0;context.state=true;runMode(cm,line.text,overlay.mode,context,function(end,style){var start=i;while(at<end){var i_end=st[i];if(i_end>end){st.splice(i,1,end,st[i+1],i_end)}i+=2;at=Math.min(end,i_end)}if(!style){return}if(overlay.opaque){st.splice(start,i-start,end,"overlay "+style);i=start+2}else{for(;start<i;start+=2){var cur=st[start+1];st[start+1]=(cur?cur+" ":"")+"overlay "+style}}},lineClasses);context.state=state;context.baseTokens=null;context.baseTokenPos=1};for(var o=0;o<cm.state.overlays.length;++o)loop(o);return{styles:st,classes:lineClasses.bgClass||lineClasses.textClass?lineClasses:null}}function getLineStyles(cm,line,updateFrontier){if(!line.styles||line.styles[0]!=cm.state.modeGen){var context=getContextBefore(cm,lineNo(line));var resetState=line.text.length>cm.options.maxHighlightLength&&copyState(cm.doc.mode,context.state);var result=highlightLine(cm,line,context);if(resetState){context.state=resetState}line.stateAfter=context.save(!resetState);line.styles=result.styles;if(result.classes){line.styleClasses=result.classes}else if(line.styleClasses){line.styleClasses=null}if(updateFrontier===cm.doc.highlightFrontier){cm.doc.modeFrontier=Math.max(cm.doc.modeFrontier,++cm.doc.highlightFrontier)}}return line.styles}function getContextBefore(cm,n,precise){var doc=cm.doc,display=cm.display;if(!doc.mode.startState){return new Context(doc,true,n)}var start=findStartLine(cm,n,precise);var saved=start>doc.first&&getLine(doc,start-1).stateAfter;var context=saved?Context.fromSaved(doc,saved,start):new Context(doc,startState(doc.mode),start);doc.iter(start,n,function(line){processLine(cm,line.text,context);var pos=context.line;line.stateAfter=pos==n-1||pos%5==0||pos>=display.viewFrom&&pos<display.viewTo?context.save():null;context.nextLine()});if(precise){doc.modeFrontier=context.line}return context}function processLine(cm,text,context,startAt){var mode=cm.doc.mode;var stream=new StringStream(text,cm.options.tabSize,context);stream.start=stream.pos=startAt||0;if(text==""){callBlankLine(mode,context.state)}while(!stream.eol()){readToken(mode,stream,context.state);stream.start=stream.pos}}function callBlankLine(mode,state){if(mode.blankLine){return mode.blankLine(state)}if(!mode.innerMode){return}var inner=innerMode(mode,state);if(inner.mode.blankLine){return inner.mode.blankLine(inner.state)}}function readToken(mode,stream,state,inner){for(var i=0;i<10;i++){if(inner){inner[0]=innerMode(mode,state).mode}var style=mode.token(stream,state);if(stream.pos>stream.start){return style}}throw new Error("Mode "+mode.name+" failed to advance stream.")}var Token=function(stream,type,state){this.start=stream.start;this.end=stream.pos;this.string=stream.current();this.type=type||null;this.state=state};function takeToken(cm,pos,precise,asArray){var doc=cm.doc,mode=doc.mode,style;pos=clipPos(doc,pos);var line=getLine(doc,pos.line),context=getContextBefore(cm,pos.line,precise);var stream=new StringStream(line.text,cm.options.tabSize,context),tokens;if(asArray){tokens=[]}while((asArray||stream.pos<pos.ch)&&!stream.eol()){stream.start=stream.pos;style=readToken(mode,stream,context.state);if(asArray){tokens.push(new Token(stream,style,copyState(doc.mode,context.state)))}}return asArray?tokens:new Token(stream,style,context.state)}function extractLineClasses(type,output){if(type){for(;;){var lineClass=type.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!lineClass){break}type=type.slice(0,lineClass.index)+type.slice(lineClass.index+lineClass[0].length);var prop=lineClass[1]?"bgClass":"textClass";if(output[prop]==null){output[prop]=lineClass[2]}else if(!new RegExp("(?:^|\\s)"+lineClass[2]+"(?:$|\\s)").test(output[prop])){output[prop]+=" "+lineClass[2]}}}return type}function runMode(cm,text,mode,context,f,lineClasses,forceToEnd){var flattenSpans=mode.flattenSpans;if(flattenSpans==null){flattenSpans=cm.options.flattenSpans}var curStart=0,curStyle=null;var stream=new StringStream(text,cm.options.tabSize,context),style;var inner=cm.options.addModeClass&&[null];if(text==""){extractLineClasses(callBlankLine(mode,context.state),lineClasses)}while(!stream.eol()){if(stream.pos>cm.options.maxHighlightLength){flattenSpans=false;if(forceToEnd){processLine(cm,text,context,stream.pos)}stream.pos=text.length;style=null}else{style=extractLineClasses(readToken(mode,stream,context.state,inner),lineClasses)}if(inner){var mName=inner[0].name;if(mName){style="m-"+(style?mName+" "+style:mName)}}if(!flattenSpans||curStyle!=style){while(curStart<stream.start){curStart=Math.min(stream.start,curStart+5e3);f(curStart,curStyle)}curStyle=style}stream.start=stream.pos}while(curStart<stream.pos){var pos=Math.min(stream.pos,curStart+5e3);f(pos,curStyle);curStart=pos}}function findStartLine(cm,n,precise){var minindent,minline,doc=cm.doc;var lim=precise?-1:n-(cm.doc.mode.innerMode?1e3:100);for(var search=n;search>lim;--search){if(search<=doc.first){return doc.first}var line=getLine(doc,search-1),after=line.stateAfter;if(after&&(!precise||search+(after instanceof SavedContext?after.lookAhead:0)<=doc.modeFrontier)){return search}var indented=countColumn(line.text,null,cm.options.tabSize);if(minline==null||minindent>indented){minline=search-1;minindent=indented}}return minline}function retreatFrontier(doc,n){doc.modeFrontier=Math.min(doc.modeFrontier,n);if(doc.highlightFrontier<n-10){return}var start=doc.first;for(var line=n-1;line>start;line--){var saved=getLine(doc,line).stateAfter;if(saved&&(!(saved instanceof SavedContext)||line+saved.lookAhead<n)){start=line+1;break}}doc.highlightFrontier=Math.min(doc.highlightFrontier,start)}var sawReadOnlySpans=false,sawCollapsedSpans=false;function seeReadOnlySpans(){sawReadOnlySpans=true}function seeCollapsedSpans(){sawCollapsedSpans=true}function MarkedSpan(marker,from,to){this.marker=marker;this.from=from;this.to=to}function getMarkedSpanFor(spans,marker){if(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if(span.marker==marker){return span}}}}function removeMarkedSpan(spans,span){var r;for(var i=0;i<spans.length;++i){if(spans[i]!=span){(r||(r=[])).push(spans[i])}}return r}function addMarkedSpan(line,span){line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span];span.marker.attachLine(line)}function markedSpansBefore(old,startCh,isInsert){var nw;if(old){for(var i=0;i<old.length;++i){var span=old[i],marker=span.marker;var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=startCh:span.from<startCh);if(startsBefore||span.from==startCh&&marker.type=="bookmark"&&(!isInsert||!span.marker.insertLeft)){var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=startCh:span.to>startCh);(nw||(nw=[])).push(new MarkedSpan(marker,span.from,endsAfter?null:span.to))}}}return nw}function markedSpansAfter(old,endCh,isInsert){var nw;if(old){for(var i=0;i<old.length;++i){var span=old[i],marker=span.marker;var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=endCh:span.to>endCh);if(endsAfter||span.from==endCh&&marker.type=="bookmark"&&(!isInsert||span.marker.insertLeft)){var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=endCh:span.from<endCh);(nw||(nw=[])).push(new MarkedSpan(marker,startsBefore?null:span.from-endCh,span.to==null?null:span.to-endCh))}}}return nw}function stretchSpansOverChange(doc,change){if(change.full){return null}var oldFirst=isLine(doc,change.from.line)&&getLine(doc,change.from.line).markedSpans;var oldLast=isLine(doc,change.to.line)&&getLine(doc,change.to.line).markedSpans;if(!oldFirst&&!oldLast){return null}var startCh=change.from.ch,endCh=change.to.ch,isInsert=cmp(change.from,change.to)==0;var first=markedSpansBefore(oldFirst,startCh,isInsert);var last=markedSpansAfter(oldLast,endCh,isInsert);var sameLine=change.text.length==1,offset=lst(change.text).length+(sameLine?startCh:0);if(first){for(var i=0;i<first.length;++i){var span=first[i];if(span.to==null){var found=getMarkedSpanFor(last,span.marker);if(!found){span.to=startCh}else if(sameLine){span.to=found.to==null?null:found.to+offset}}}}if(last){for(var i$1=0;i$1<last.length;++i$1){var span$1=last[i$1];if(span$1.to!=null){span$1.to+=offset}if(span$1.from==null){var found$1=getMarkedSpanFor(first,span$1.marker);if(!found$1){span$1.from=offset;if(sameLine){(first||(first=[])).push(span$1)}}}else{span$1.from+=offset;if(sameLine){(first||(first=[])).push(span$1)}}}}if(first){first=clearEmptySpans(first)}if(last&&last!=first){last=clearEmptySpans(last)}var newMarkers=[first];if(!sameLine){var gap=change.text.length-2,gapMarkers;if(gap>0&&first){for(var i$2=0;i$2<first.length;++i$2){if(first[i$2].to==null){(gapMarkers||(gapMarkers=[])).push(new MarkedSpan(first[i$2].marker,null,null))}}}for(var i$3=0;i$3<gap;++i$3){newMarkers.push(gapMarkers)}newMarkers.push(last)}return newMarkers}function clearEmptySpans(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if(span.from!=null&&span.from==span.to&&span.marker.clearWhenEmpty!==false){spans.splice(i--,1)}}if(!spans.length){return null}return spans}function removeReadOnlyRanges(doc,from,to){var markers=null;doc.iter(from.line,to.line+1,function(line){if(line.markedSpans){for(var i=0;i<line.markedSpans.length;++i){var mark=line.markedSpans[i].marker;if(mark.readOnly&&(!markers||indexOf(markers,mark)==-1)){(markers||(markers=[])).push(mark)}}}});if(!markers){return null}var parts=[{from:from,to:to}];for(var i=0;i<markers.length;++i){var mk=markers[i],m=mk.find(0);for(var j=0;j<parts.length;++j){var p=parts[j];if(cmp(p.to,m.from)<0||cmp(p.from,m.to)>0){continue}var newParts=[j,1],dfrom=cmp(p.from,m.from),dto=cmp(p.to,m.to);if(dfrom<0||!mk.inclusiveLeft&&!dfrom){newParts.push({from:p.from,to:m.from})}if(dto>0||!mk.inclusiveRight&&!dto){newParts.push({from:m.to,to:p.to})}parts.splice.apply(parts,newParts);j+=newParts.length-3}}return parts}function detachMarkedSpans(line){var spans=line.markedSpans;if(!spans){return}for(var i=0;i<spans.length;++i){spans[i].marker.detachLine(line)}line.markedSpans=null}function attachMarkedSpans(line,spans){if(!spans){return}for(var i=0;i<spans.length;++i){spans[i].marker.attachLine(line)}line.markedSpans=spans}function extraLeft(marker){return marker.inclusiveLeft?-1:0}function extraRight(marker){return marker.inclusiveRight?1:0}function compareCollapsedMarkers(a,b){var lenDiff=a.lines.length-b.lines.length;if(lenDiff!=0){return lenDiff}var aPos=a.find(),bPos=b.find();var fromCmp=cmp(aPos.from,bPos.from)||extraLeft(a)-extraLeft(b);if(fromCmp){return-fromCmp}var toCmp=cmp(aPos.to,bPos.to)||extraRight(a)-extraRight(b);if(toCmp){return toCmp}return b.id-a.id}function collapsedSpanAtSide(line,start){var sps=sawCollapsedSpans&&line.markedSpans,found;if(sps){for(var sp=void 0,i=0;i<sps.length;++i){sp=sps[i];if(sp.marker.collapsed&&(start?sp.from:sp.to)==null&&(!found||compareCollapsedMarkers(found,sp.marker)<0)){found=sp.marker}}}return found}function collapsedSpanAtStart(line){return collapsedSpanAtSide(line,true)}function collapsedSpanAtEnd(line){return collapsedSpanAtSide(line,false)}function collapsedSpanAround(line,ch){var sps=sawCollapsedSpans&&line.markedSpans,found;if(sps){for(var i=0;i<sps.length;++i){var sp=sps[i];if(sp.marker.collapsed&&(sp.from==null||sp.from<ch)&&(sp.to==null||sp.to>ch)&&(!found||compareCollapsedMarkers(found,sp.marker)<0)){found=sp.marker}}}return found}function conflictingCollapsedRange(doc,lineNo,from,to,marker){var line=getLine(doc,lineNo);var sps=sawCollapsedSpans&&line.markedSpans;if(sps){for(var i=0;i<sps.length;++i){var sp=sps[i];if(!sp.marker.collapsed){continue}var found=sp.marker.find(0);var fromCmp=cmp(found.from,from)||extraLeft(sp.marker)-extraLeft(marker);var toCmp=cmp(found.to,to)||extraRight(sp.marker)-extraRight(marker);if(fromCmp>=0&&toCmp<=0||fromCmp<=0&&toCmp>=0){continue}if(fromCmp<=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.to,from)>=0:cmp(found.to,from)>0)||fromCmp>=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.from,to)<=0:cmp(found.from,to)<0)){return true}}}}function visualLine(line){var merged;while(merged=collapsedSpanAtStart(line)){line=merged.find(-1,true).line}return line}function visualLineEnd(line){var merged;while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line}return line}function visualLineContinued(line){var merged,lines;while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line;(lines||(lines=[])).push(line)}return lines}function visualLineNo(doc,lineN){var line=getLine(doc,lineN),vis=visualLine(line);if(line==vis){return lineN}return lineNo(vis)}function visualLineEndNo(doc,lineN){if(lineN>doc.lastLine()){return lineN}var line=getLine(doc,lineN),merged;if(!lineIsHidden(doc,line)){return lineN}while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line}return lineNo(line)+1}function lineIsHidden(doc,line){var sps=sawCollapsedSpans&&line.markedSpans;if(sps){for(var sp=void 0,i=0;i<sps.length;++i){sp=sps[i];if(!sp.marker.collapsed){continue}if(sp.from==null){return true}if(sp.marker.widgetNode){continue}if(sp.from==0&&sp.marker.inclusiveLeft&&lineIsHiddenInner(doc,line,sp)){return true}}}}function lineIsHiddenInner(doc,line,span){if(span.to==null){var end=span.marker.find(1,true);return lineIsHiddenInner(doc,end.line,getMarkedSpanFor(end.line.markedSpans,span.marker))}if(span.marker.inclusiveRight&&span.to==line.text.length){return true}for(var sp=void 0,i=0;i<line.markedSpans.length;++i){sp=line.markedSpans[i];if(sp.marker.collapsed&&!sp.marker.widgetNode&&sp.from==span.to&&(sp.to==null||sp.to!=span.from)&&(sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&lineIsHiddenInner(doc,line,sp)){return true}}}function heightAtLine(lineObj){lineObj=visualLine(lineObj);var h=0,chunk=lineObj.parent;for(var i=0;i<chunk.lines.length;++i){var line=chunk.lines[i];if(line==lineObj){break}else{h+=line.height}}for(var p=chunk.parent;p;chunk=p,p=chunk.parent){for(var i$1=0;i$1<p.children.length;++i$1){var cur=p.children[i$1];if(cur==chunk){break}else{h+=cur.height}}}return h}function lineLength(line){if(line.height==0){return 0}var len=line.text.length,merged,cur=line;while(merged=collapsedSpanAtStart(cur)){var found=merged.find(0,true);cur=found.from.line;len+=found.from.ch-found.to.ch}cur=line;while(merged=collapsedSpanAtEnd(cur)){var found$1=merged.find(0,true);len-=cur.text.length-found$1.from.ch;cur=found$1.to.line;len+=cur.text.length-found$1.to.ch}return len}function findMaxLine(cm){var d=cm.display,doc=cm.doc;d.maxLine=getLine(doc,doc.first);d.maxLineLength=lineLength(d.maxLine);d.maxLineChanged=true;doc.iter(function(line){var len=lineLength(line);if(len>d.maxLineLength){d.maxLineLength=len;d.maxLine=line}})}var Line=function(text,markedSpans,estimateHeight){this.text=text;attachMarkedSpans(this,markedSpans);this.height=estimateHeight?estimateHeight(this):1};Line.prototype.lineNo=function(){return lineNo(this)};eventMixin(Line);function updateLine(line,text,markedSpans,estimateHeight){line.text=text;if(line.stateAfter){line.stateAfter=null}if(line.styles){line.styles=null}if(line.order!=null){line.order=null}detachMarkedSpans(line);attachMarkedSpans(line,markedSpans);var estHeight=estimateHeight?estimateHeight(line):1;if(estHeight!=line.height){updateLineHeight(line,estHeight)}}function cleanUpLine(line){line.parent=null;detachMarkedSpans(line)}var styleToClassCache={},styleToClassCacheWithMode={};function interpretTokenStyle(style,options){if(!style||/^\s*$/.test(style)){return null}var cache=options.addModeClass?styleToClassCacheWithMode:styleToClassCache;return cache[style]||(cache[style]=style.replace(/\S+/g,"cm-$&"))}function buildLineContent(cm,lineView){var content=eltP("span",null,null,webkit?"padding-right: .1px":null);var builder={pre:eltP("pre",[content],"CodeMirror-line"),content:content,col:0,pos:0,cm:cm,trailingSpace:false,splitSpaces:cm.getOption("lineWrapping")};lineView.measure={};for(var i=0;i<=(lineView.rest?lineView.rest.length:0);i++){var line=i?lineView.rest[i-1]:lineView.line,order=void 0;builder.pos=0;builder.addToken=buildToken;if(hasBadBidiRects(cm.display.measure)&&(order=getOrder(line,cm.doc.direction))){builder.addToken=buildTokenBadBidi(builder.addToken,order)}builder.map=[];var allowFrontierUpdate=lineView!=cm.display.externalMeasured&&lineNo(line);insertLineContent(line,builder,getLineStyles(cm,line,allowFrontierUpdate));if(line.styleClasses){if(line.styleClasses.bgClass){builder.bgClass=joinClasses(line.styleClasses.bgClass,builder.bgClass||"")}if(line.styleClasses.textClass){builder.textClass=joinClasses(line.styleClasses.textClass,builder.textClass||"")}}if(builder.map.length==0){builder.map.push(0,0,builder.content.appendChild(zeroWidthElement(cm.display.measure)))}if(i==0){lineView.measure.map=builder.map;lineView.measure.cache={}}else{(lineView.measure.maps||(lineView.measure.maps=[])).push(builder.map);(lineView.measure.caches||(lineView.measure.caches=[])).push({})}}if(webkit){var last=builder.content.lastChild;if(/\bcm-tab\b/.test(last.className)||last.querySelector&&last.querySelector(".cm-tab")){builder.content.className="cm-tab-wrap-hack"}}signal(cm,"renderLine",cm,lineView.line,builder.pre);if(builder.pre.className){builder.textClass=joinClasses(builder.pre.className,builder.textClass||"")}return builder}function defaultSpecialCharPlaceholder(ch){var token=elt("span","\u2022","cm-invalidchar");token.title="\\u"+ch.charCodeAt(0).toString(16);token.setAttribute("aria-label",token.title);return token}function buildToken(builder,text,style,startStyle,endStyle,css,attributes){if(!text){return}var displayText=builder.splitSpaces?splitSpaces(text,builder.trailingSpace):text;var special=builder.cm.state.specialChars,mustWrap=false;var content;if(!special.test(text)){builder.col+=text.length;content=document.createTextNode(displayText);builder.map.push(builder.pos,builder.pos+text.length,content);if(ie&&ie_version<9){mustWrap=true}builder.pos+=text.length}else{content=document.createDocumentFragment();var pos=0;while(true){special.lastIndex=pos;var m=special.exec(text);var skipped=m?m.index-pos:text.length-pos;if(skipped){var txt=document.createTextNode(displayText.slice(pos,pos+skipped));if(ie&&ie_version<9){content.appendChild(elt("span",[txt]))}else{content.appendChild(txt)}builder.map.push(builder.pos,builder.pos+skipped,txt);builder.col+=skipped;builder.pos+=skipped}if(!m){break}pos+=skipped+1;var txt$1=void 0;if(m[0]=="\t"){var tabSize=builder.cm.options.tabSize,tabWidth=tabSize-builder.col%tabSize;txt$1=content.appendChild(elt("span",spaceStr(tabWidth),"cm-tab"));txt$1.setAttribute("role","presentation");txt$1.setAttribute("cm-text","\t");builder.col+=tabWidth}else if(m[0]=="\r"||m[0]=="\n"){txt$1=content.appendChild(elt("span",m[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));txt$1.setAttribute("cm-text",m[0]);builder.col+=1}else{txt$1=builder.cm.options.specialCharPlaceholder(m[0]);txt$1.setAttribute("cm-text",m[0]);if(ie&&ie_version<9){content.appendChild(elt("span",[txt$1]))}else{content.appendChild(txt$1)}builder.col+=1}builder.map.push(builder.pos,builder.pos+1,txt$1);builder.pos++}}builder.trailingSpace=displayText.charCodeAt(text.length-1)==32;if(style||startStyle||endStyle||mustWrap||css||attributes){var fullStyle=style||"";if(startStyle){fullStyle+=startStyle}if(endStyle){fullStyle+=endStyle}var token=elt("span",[content],fullStyle,css);if(attributes){for(var attr in attributes){if(attributes.hasOwnProperty(attr)&&attr!="style"&&attr!="class"){token.setAttribute(attr,attributes[attr])}}}return builder.content.appendChild(token)}builder.content.appendChild(content)}function splitSpaces(text,trailingBefore){if(text.length>1&&!/  /.test(text)){return text}var spaceBefore=trailingBefore,result="";for(var i=0;i<text.length;i++){var ch=text.charAt(i);if(ch==" "&&spaceBefore&&(i==text.length-1||text.charCodeAt(i+1)==32)){ch="\xa0"}result+=ch;spaceBefore=ch==" "}return result}function buildTokenBadBidi(inner,order){return function(builder,text,style,startStyle,endStyle,css,attributes){style=style?style+" cm-force-border":"cm-force-border";var start=builder.pos,end=start+text.length;for(;;){var part=void 0;for(var i=0;i<order.length;i++){part=order[i];if(part.to>start&&part.from<=start){break}}if(part.to>=end){return inner(builder,text,style,startStyle,endStyle,css,attributes)}inner(builder,text.slice(0,part.to-start),style,startStyle,null,css,attributes);startStyle=null;text=text.slice(part.to-start);start=part.to}}}function buildCollapsedSpan(builder,size,marker,ignoreWidget){var widget=!ignoreWidget&&marker.widgetNode;if(widget){builder.map.push(builder.pos,builder.pos+size,widget)}if(!ignoreWidget&&builder.cm.display.input.needsContentAttribute){if(!widget){widget=builder.content.appendChild(document.createElement("span"))}widget.setAttribute("cm-marker",marker.id)}if(widget){builder.cm.display.input.setUneditable(widget);builder.content.appendChild(widget)}builder.pos+=size;builder.trailingSpace=false}function insertLineContent(line,builder,styles){var spans=line.markedSpans,allText=line.text,at=0;if(!spans){for(var i$1=1;i$1<styles.length;i$1+=2){builder.addToken(builder,allText.slice(at,at=styles[i$1]),interpretTokenStyle(styles[i$1+1],builder.cm.options))}return}var len=allText.length,pos=0,i=1,text="",style,css;var nextChange=0,spanStyle,spanEndStyle,spanStartStyle,collapsed,attributes;for(;;){if(nextChange==pos){spanStyle=spanEndStyle=spanStartStyle=css="";attributes=null;collapsed=null;nextChange=Infinity;var foundBookmarks=[],endStyles=void 0;for(var j=0;j<spans.length;++j){var sp=spans[j],m=sp.marker;if(m.type=="bookmark"&&sp.from==pos&&m.widgetNode){foundBookmarks.push(m)}else if(sp.from<=pos&&(sp.to==null||sp.to>pos||m.collapsed&&sp.to==pos&&sp.from==pos)){if(sp.to!=null&&sp.to!=pos&&nextChange>sp.to){nextChange=sp.to;spanEndStyle=""}if(m.className){spanStyle+=" "+m.className}if(m.css){css=(css?css+";":"")+m.css}if(m.startStyle&&sp.from==pos){spanStartStyle+=" "+m.startStyle}if(m.endStyle&&sp.to==nextChange){(endStyles||(endStyles=[])).push(m.endStyle,sp.to)}if(m.title){(attributes||(attributes={})).title=m.title}if(m.attributes){for(var attr in m.attributes){(attributes||(attributes={}))[attr]=m.attributes[attr]}}if(m.collapsed&&(!collapsed||compareCollapsedMarkers(collapsed.marker,m)<0)){collapsed=sp}}else if(sp.from>pos&&nextChange>sp.from){nextChange=sp.from}}if(endStyles){for(var j$1=0;j$1<endStyles.length;j$1+=2){if(endStyles[j$1+1]==nextChange){spanEndStyle+=" "+endStyles[j$1]}}}if(!collapsed||collapsed.from==pos){for(var j$2=0;j$2<foundBookmarks.length;++j$2){buildCollapsedSpan(builder,0,foundBookmarks[j$2])}}if(collapsed&&(collapsed.from||0)==pos){buildCollapsedSpan(builder,(collapsed.to==null?len+1:collapsed.to)-pos,collapsed.marker,collapsed.from==null);if(collapsed.to==null){return}if(collapsed.to==pos){collapsed=false}}}if(pos>=len){break}var upto=Math.min(len,nextChange);while(true){if(text){var end=pos+text.length;if(!collapsed){var tokenText=end>upto?text.slice(0,upto-pos):text;builder.addToken(builder,tokenText,style?style+spanStyle:spanStyle,spanStartStyle,pos+tokenText.length==nextChange?spanEndStyle:"",css,attributes)}if(end>=upto){text=text.slice(upto-pos);pos=upto;break}pos=end;spanStartStyle=""}text=allText.slice(at,at=styles[i++]);style=interpretTokenStyle(styles[i++],builder.cm.options)}}}function LineView(doc,line,lineN){this.line=line;this.rest=visualLineContinued(line);this.size=this.rest?lineNo(lst(this.rest))-lineN+1:1;this.node=this.text=null;this.hidden=lineIsHidden(doc,line)}function buildViewArray(cm,from,to){var array=[],nextPos;for(var pos=from;pos<to;pos=nextPos){var view=new LineView(cm.doc,getLine(cm.doc,pos),pos);nextPos=pos+view.size;array.push(view)}return array}var operationGroup=null;function pushOperation(op){if(operationGroup){operationGroup.ops.push(op)}else{op.ownsGroup=operationGroup={ops:[op],delayedCallbacks:[]}}}function fireCallbacksForOps(group){var callbacks=group.delayedCallbacks,i=0;do{for(;i<callbacks.length;i++){callbacks[i].call(null)}for(var j=0;j<group.ops.length;j++){var op=group.ops[j];if(op.cursorActivityHandlers){while(op.cursorActivityCalled<op.cursorActivityHandlers.length){op.cursorActivityHandlers[op.cursorActivityCalled++].call(null,op.cm)}}}}while(i<callbacks.length)}function finishOperation(op,endCb){var group=op.ownsGroup;if(!group){return}try{fireCallbacksForOps(group)}finally{operationGroup=null;endCb(group)}}var orphanDelayedCallbacks=null;function signalLater(emitter,type){var arr=getHandlers(emitter,type);if(!arr.length){return}var args=Array.prototype.slice.call(arguments,2),list;if(operationGroup){list=operationGroup.delayedCallbacks}else if(orphanDelayedCallbacks){list=orphanDelayedCallbacks}else{list=orphanDelayedCallbacks=[];setTimeout(fireOrphanDelayed,0)}var loop=function(i){list.push(function(){return arr[i].apply(null,args)})};for(var i=0;i<arr.length;++i)loop(i)}function fireOrphanDelayed(){var delayed=orphanDelayedCallbacks;orphanDelayedCallbacks=null;for(var i=0;i<delayed.length;++i){delayed[i]()}}function updateLineForChanges(cm,lineView,lineN,dims){for(var j=0;j<lineView.changes.length;j++){var type=lineView.changes[j];if(type=="text"){updateLineText(cm,lineView)}else if(type=="gutter"){updateLineGutter(cm,lineView,lineN,dims)}else if(type=="class"){updateLineClasses(cm,lineView)}else if(type=="widget"){updateLineWidgets(cm,lineView,dims)}}lineView.changes=null}function ensureLineWrapped(lineView){if(lineView.node==lineView.text){lineView.node=elt("div",null,null,"position: relative");if(lineView.text.parentNode){lineView.text.parentNode.replaceChild(lineView.node,lineView.text)}lineView.node.appendChild(lineView.text);if(ie&&ie_version<8){lineView.node.style.zIndex=2}}return lineView.node}function updateLineBackground(cm,lineView){var cls=lineView.bgClass?lineView.bgClass+" "+(lineView.line.bgClass||""):lineView.line.bgClass;if(cls){cls+=" CodeMirror-linebackground"}if(lineView.background){if(cls){lineView.background.className=cls}else{lineView.background.parentNode.removeChild(lineView.background);lineView.background=null}}else if(cls){var wrap=ensureLineWrapped(lineView);lineView.background=wrap.insertBefore(elt("div",null,cls),wrap.firstChild);cm.display.input.setUneditable(lineView.background)}}function getLineContent(cm,lineView){var ext=cm.display.externalMeasured;if(ext&&ext.line==lineView.line){cm.display.externalMeasured=null;lineView.measure=ext.measure;return ext.built}return buildLineContent(cm,lineView)}function updateLineText(cm,lineView){var cls=lineView.text.className;var built=getLineContent(cm,lineView);if(lineView.text==lineView.node){lineView.node=built.pre}lineView.text.parentNode.replaceChild(built.pre,lineView.text);lineView.text=built.pre;if(built.bgClass!=lineView.bgClass||built.textClass!=lineView.textClass){lineView.bgClass=built.bgClass;lineView.textClass=built.textClass;updateLineClasses(cm,lineView)}else if(cls){lineView.text.className=cls}}function updateLineClasses(cm,lineView){updateLineBackground(cm,lineView);if(lineView.line.wrapClass){ensureLineWrapped(lineView).className=lineView.line.wrapClass}else if(lineView.node!=lineView.text){lineView.node.className=""}var textClass=lineView.textClass?lineView.textClass+" "+(lineView.line.textClass||""):lineView.line.textClass;lineView.text.className=textClass||""}function updateLineGutter(cm,lineView,lineN,dims){if(lineView.gutter){lineView.node.removeChild(lineView.gutter);lineView.gutter=null}if(lineView.gutterBackground){lineView.node.removeChild(lineView.gutterBackground);lineView.gutterBackground=null}if(lineView.line.gutterClass){var wrap=ensureLineWrapped(lineView);lineView.gutterBackground=elt("div",null,"CodeMirror-gutter-background "+lineView.line.gutterClass,"left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px; width: "+dims.gutterTotalWidth+"px");cm.display.input.setUneditable(lineView.gutterBackground);wrap.insertBefore(lineView.gutterBackground,lineView.text)}var markers=lineView.line.gutterMarkers;if(cm.options.lineNumbers||markers){var wrap$1=ensureLineWrapped(lineView);var gutterWrap=lineView.gutter=elt("div",null,"CodeMirror-gutter-wrapper","left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px");cm.display.input.setUneditable(gutterWrap);wrap$1.insertBefore(gutterWrap,lineView.text);if(lineView.line.gutterClass){gutterWrap.className+=" "+lineView.line.gutterClass}if(cm.options.lineNumbers&&(!markers||!markers["CodeMirror-linenumbers"])){lineView.lineNumber=gutterWrap.appendChild(elt("div",lineNumberFor(cm.options,lineN),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dims.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+cm.display.lineNumInnerWidth+"px"))}if(markers){for(var k=0;k<cm.display.gutterSpecs.length;++k){var id=cm.display.gutterSpecs[k].className,found=markers.hasOwnProperty(id)&&markers[id];if(found){gutterWrap.appendChild(elt("div",[found],"CodeMirror-gutter-elt","left: "+dims.gutterLeft[id]+"px; width: "+dims.gutterWidth[id]+"px"))}}}}}function updateLineWidgets(cm,lineView,dims){if(lineView.alignable){lineView.alignable=null}var isWidget=classTest("CodeMirror-linewidget");for(var node=lineView.node.firstChild,next=void 0;node;node=next){next=node.nextSibling;if(isWidget.test(node.className)){lineView.node.removeChild(node)}}insertLineWidgets(cm,lineView,dims)}function buildLineElement(cm,lineView,lineN,dims){var built=getLineContent(cm,lineView);lineView.text=lineView.node=built.pre;if(built.bgClass){lineView.bgClass=built.bgClass}if(built.textClass){lineView.textClass=built.textClass}updateLineClasses(cm,lineView);updateLineGutter(cm,lineView,lineN,dims);insertLineWidgets(cm,lineView,dims);return lineView.node}function insertLineWidgets(cm,lineView,dims){insertLineWidgetsFor(cm,lineView.line,lineView,dims,true);if(lineView.rest){for(var i=0;i<lineView.rest.length;i++){insertLineWidgetsFor(cm,lineView.rest[i],lineView,dims,false)}}}function insertLineWidgetsFor(cm,line,lineView,dims,allowAbove){if(!line.widgets){return}var wrap=ensureLineWrapped(lineView);for(var i=0,ws=line.widgets;i<ws.length;++i){var widget=ws[i],node=elt("div",[widget.node],"CodeMirror-linewidget"+(widget.className?" "+widget.className:""));if(!widget.handleMouseEvents){node.setAttribute("cm-ignore-events","true")}positionLineWidget(widget,node,lineView,dims);cm.display.input.setUneditable(node);if(allowAbove&&widget.above){wrap.insertBefore(node,lineView.gutter||lineView.text)}else{wrap.appendChild(node)}signalLater(widget,"redraw")}}function positionLineWidget(widget,node,lineView,dims){if(widget.noHScroll){(lineView.alignable||(lineView.alignable=[])).push(node);var width=dims.wrapperWidth;node.style.left=dims.fixedPos+"px";if(!widget.coverGutter){width-=dims.gutterTotalWidth;node.style.paddingLeft=dims.gutterTotalWidth+"px"}node.style.width=width+"px"}if(widget.coverGutter){node.style.zIndex=5;node.style.position="relative";if(!widget.noHScroll){node.style.marginLeft=-dims.gutterTotalWidth+"px"}}}function widgetHeight(widget){if(widget.height!=null){return widget.height}var cm=widget.doc.cm;if(!cm){return 0}if(!contains(document.body,widget.node)){var parentStyle="position: relative;";if(widget.coverGutter){parentStyle+="margin-left: -"+cm.display.gutters.offsetWidth+"px;"}if(widget.noHScroll){parentStyle+="width: "+cm.display.wrapper.clientWidth+"px;"}removeChildrenAndAdd(cm.display.measure,elt("div",[widget.node],null,parentStyle))}return widget.height=widget.node.parentNode.offsetHeight}function eventInWidget(display,e){for(var n=e_target(e);n!=display.wrapper;n=n.parentNode){if(!n||n.nodeType==1&&n.getAttribute("cm-ignore-events")=="true"||n.parentNode==display.sizer&&n!=display.mover){return true}}}function paddingTop(display){return display.lineSpace.offsetTop}function paddingVert(display){return display.mover.offsetHeight-display.lineSpace.offsetHeight}function paddingH(display){if(display.cachedPaddingH){return display.cachedPaddingH}var e=removeChildrenAndAdd(display.measure,elt("pre","x","CodeMirror-line-like"));var style=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle;var data={left:parseInt(style.paddingLeft),right:parseInt(style.paddingRight)};if(!isNaN(data.left)&&!isNaN(data.right)){display.cachedPaddingH=data}return data}function scrollGap(cm){return scrollerGap-cm.display.nativeBarWidth}function displayWidth(cm){return cm.display.scroller.clientWidth-scrollGap(cm)-cm.display.barWidth}function displayHeight(cm){return cm.display.scroller.clientHeight-scrollGap(cm)-cm.display.barHeight}function ensureLineHeights(cm,lineView,rect){var wrapping=cm.options.lineWrapping;var curWidth=wrapping&&displayWidth(cm);if(!lineView.measure.heights||wrapping&&lineView.measure.width!=curWidth){var heights=lineView.measure.heights=[];if(wrapping){lineView.measure.width=curWidth;var rects=lineView.text.firstChild.getClientRects();for(var i=0;i<rects.length-1;i++){var cur=rects[i],next=rects[i+1];if(Math.abs(cur.bottom-next.bottom)>2){heights.push((cur.bottom+next.top)/2-rect.top)}}}heights.push(rect.bottom-rect.top)}}function mapFromLineView(lineView,line,lineN){if(lineView.line==line){return{map:lineView.measure.map,cache:lineView.measure.cache}}for(var i=0;i<lineView.rest.length;i++){if(lineView.rest[i]==line){return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i]}}}for(var i$1=0;i$1<lineView.rest.length;i$1++){if(lineNo(lineView.rest[i$1])>lineN){return{map:lineView.measure.maps[i$1],cache:lineView.measure.caches[i$1],before:true}}}}function updateExternalMeasurement(cm,line){line=visualLine(line);var lineN=lineNo(line);var view=cm.display.externalMeasured=new LineView(cm.doc,line,lineN);view.lineN=lineN;var built=view.built=buildLineContent(cm,view);view.text=built.pre;removeChildrenAndAdd(cm.display.lineMeasure,built.pre);return view}function measureChar(cm,line,ch,bias){return measureCharPrepared(cm,prepareMeasureForLine(cm,line),ch,bias)}function findViewForLine(cm,lineN){if(lineN>=cm.display.viewFrom&&lineN<cm.display.viewTo){return cm.display.view[findViewIndex(cm,lineN)]}var ext=cm.display.externalMeasured;if(ext&&lineN>=ext.lineN&&lineN<ext.lineN+ext.size){return ext}}function prepareMeasureForLine(cm,line){var lineN=lineNo(line);var view=findViewForLine(cm,lineN);if(view&&!view.text){view=null}else if(view&&view.changes){updateLineForChanges(cm,view,lineN,getDimensions(cm));cm.curOp.forceUpdate=true}if(!view){view=updateExternalMeasurement(cm,line)}var info=mapFromLineView(view,line,lineN);return{line:line,view:view,rect:null,map:info.map,cache:info.cache,before:info.before,hasHeights:false}}function measureCharPrepared(cm,prepared,ch,bias,varHeight){if(prepared.before){ch=-1}var key=ch+(bias||""),found;if(prepared.cache.hasOwnProperty(key)){found=prepared.cache[key]}else{if(!prepared.rect){prepared.rect=prepared.view.text.getBoundingClientRect()}if(!prepared.hasHeights){ensureLineHeights(cm,prepared.view,prepared.rect);prepared.hasHeights=true}found=measureCharInner(cm,prepared,ch,bias);if(!found.bogus){prepared.cache[key]=found}}return{left:found.left,right:found.right,top:varHeight?found.rtop:found.top,bottom:varHeight?found.rbottom:found.bottom}}var nullRect={left:0,right:0,top:0,bottom:0};function nodeAndOffsetInLineMap(map,ch,bias){var node,start,end,collapse,mStart,mEnd;for(var i=0;i<map.length;i+=3){mStart=map[i];mEnd=map[i+1];if(ch<mStart){start=0;end=1;collapse="left"}else if(ch<mEnd){start=ch-mStart;end=start+1}else if(i==map.length-3||ch==mEnd&&map[i+3]>ch){end=mEnd-mStart;start=end-1;if(ch>=mEnd){collapse="right"}}if(start!=null){node=map[i+2];if(mStart==mEnd&&bias==(node.insertLeft?"left":"right")){collapse=bias}if(bias=="left"&&start==0){while(i&&map[i-2]==map[i-3]&&map[i-1].insertLeft){node=map[(i-=3)+2];collapse="left"}}if(bias=="right"&&start==mEnd-mStart){while(i<map.length-3&&map[i+3]==map[i+4]&&!map[i+5].insertLeft){node=map[(i+=3)+2];collapse="right"}}break}}return{node:node,start:start,end:end,collapse:collapse,coverStart:mStart,coverEnd:mEnd}}function getUsefulRect(rects,bias){var rect=nullRect;if(bias=="left"){for(var i=0;i<rects.length;i++){if((rect=rects[i]).left!=rect.right){break}}}else{for(var i$1=rects.length-1;i$1>=0;i$1--){if((rect=rects[i$1]).left!=rect.right){break}}}return rect}function measureCharInner(cm,prepared,ch,bias){var place=nodeAndOffsetInLineMap(prepared.map,ch,bias);var node=place.node,start=place.start,end=place.end,collapse=place.collapse;var rect;if(node.nodeType==3){for(var i$1=0;i$1<4;i$1++){while(start&&isExtendingChar(prepared.line.text.charAt(place.coverStart+start))){--start}while(place.coverStart+end<place.coverEnd&&isExtendingChar(prepared.line.text.charAt(place.coverStart+end))){++end}if(ie&&ie_version<9&&start==0&&end==place.coverEnd-place.coverStart){rect=node.parentNode.getBoundingClientRect()}else{rect=getUsefulRect(range(node,start,end).getClientRects(),bias)}if(rect.left||rect.right||start==0){break}end=start;start=start-1;collapse="right"}if(ie&&ie_version<11){rect=maybeUpdateRectForZooming(cm.display.measure,rect)}}else{if(start>0){collapse=bias="right"}var rects;if(cm.options.lineWrapping&&(rects=node.getClientRects()).length>1){rect=rects[bias=="right"?rects.length-1:0]}else{rect=node.getBoundingClientRect()}}if(ie&&ie_version<9&&!start&&(!rect||!rect.left&&!rect.right)){var rSpan=node.parentNode.getClientRects()[0];if(rSpan){rect={left:rSpan.left,right:rSpan.left+charWidth(cm.display),top:rSpan.top,bottom:rSpan.bottom}}else{rect=nullRect}}var rtop=rect.top-prepared.rect.top,rbot=rect.bottom-prepared.rect.top;var mid=(rtop+rbot)/2;var heights=prepared.view.measure.heights;var i=0;for(;i<heights.length-1;i++){if(mid<heights[i]){break}}var top=i?heights[i-1]:0,bot=heights[i];var result={left:(collapse=="right"?rect.right:rect.left)-prepared.rect.left,right:(collapse=="left"?rect.left:rect.right)-prepared.rect.left,top:top,bottom:bot};if(!rect.left&&!rect.right){result.bogus=true}if(!cm.options.singleCursorHeightPerLine){result.rtop=rtop;result.rbottom=rbot}return result}function maybeUpdateRectForZooming(measure,rect){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!hasBadZoomedRects(measure)){return rect}var scaleX=screen.logicalXDPI/screen.deviceXDPI;var scaleY=screen.logicalYDPI/screen.deviceYDPI;return{left:rect.left*scaleX,right:rect.right*scaleX,top:rect.top*scaleY,bottom:rect.bottom*scaleY}}function clearLineMeasurementCacheFor(lineView){if(lineView.measure){lineView.measure.cache={};lineView.measure.heights=null;if(lineView.rest){for(var i=0;i<lineView.rest.length;i++){lineView.measure.caches[i]={}}}}}function clearLineMeasurementCache(cm){cm.display.externalMeasure=null;removeChildren(cm.display.lineMeasure);for(var i=0;i<cm.display.view.length;i++){clearLineMeasurementCacheFor(cm.display.view[i])}}function clearCaches(cm){clearLineMeasurementCache(cm);cm.display.cachedCharWidth=cm.display.cachedTextHeight=cm.display.cachedPaddingH=null;if(!cm.options.lineWrapping){cm.display.maxLineChanged=true}cm.display.lineNumChars=null}function pageScrollX(){if(chrome&&android){return-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft))}return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pageScrollY(){if(chrome&&android){return-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop))}return window.pageYOffset||(document.documentElement||document.body).scrollTop}function widgetTopHeight(lineObj){var height=0;if(lineObj.widgets){for(var i=0;i<lineObj.widgets.length;++i){if(lineObj.widgets[i].above){height+=widgetHeight(lineObj.widgets[i])}}}return height}function intoCoordSystem(cm,lineObj,rect,context,includeWidgets){if(!includeWidgets){var height=widgetTopHeight(lineObj);rect.top+=height;rect.bottom+=height}if(context=="line"){return rect}if(!context){context="local"}var yOff=heightAtLine(lineObj);if(context=="local"){yOff+=paddingTop(cm.display)}else{yOff-=cm.display.viewOffset}if(context=="page"||context=="window"){var lOff=cm.display.lineSpace.getBoundingClientRect();yOff+=lOff.top+(context=="window"?0:pageScrollY());var xOff=lOff.left+(context=="window"?0:pageScrollX());rect.left+=xOff;rect.right+=xOff}rect.top+=yOff;rect.bottom+=yOff;return rect}function fromCoordSystem(cm,coords,context){if(context=="div"){return coords}var left=coords.left,top=coords.top;if(context=="page"){left-=pageScrollX();top-=pageScrollY()}else if(context=="local"||!context){var localBox=cm.display.sizer.getBoundingClientRect();left+=localBox.left;top+=localBox.top}var lineSpaceBox=cm.display.lineSpace.getBoundingClientRect();return{left:left-lineSpaceBox.left,top:top-lineSpaceBox.top}}function charCoords(cm,pos,context,lineObj,bias){if(!lineObj){lineObj=getLine(cm.doc,pos.line)}return intoCoordSystem(cm,lineObj,measureChar(cm,lineObj,pos.ch,bias),context)}function cursorCoords(cm,pos,context,lineObj,preparedMeasure,varHeight){lineObj=lineObj||getLine(cm.doc,pos.line);if(!preparedMeasure){preparedMeasure=prepareMeasureForLine(cm,lineObj)}function get(ch,right){var m=measureCharPrepared(cm,preparedMeasure,ch,right?"right":"left",varHeight);if(right){m.left=m.right}else{m.right=m.left}return intoCoordSystem(cm,lineObj,m,context)}var order=getOrder(lineObj,cm.doc.direction),ch=pos.ch,sticky=pos.sticky;if(ch>=lineObj.text.length){ch=lineObj.text.length;sticky="before"}else if(ch<=0){ch=0;sticky="after"}if(!order){return get(sticky=="before"?ch-1:ch,sticky=="before")}function getBidi(ch,partPos,invert){var part=order[partPos],right=part.level==1;return get(invert?ch-1:ch,right!=invert)}var partPos=getBidiPartAt(order,ch,sticky);var other=bidiOther;var val=getBidi(ch,partPos,sticky=="before");if(other!=null){val.other=getBidi(ch,other,sticky!="before")}return val}function estimateCoords(cm,pos){var left=0;pos=clipPos(cm.doc,pos);if(!cm.options.lineWrapping){left=charWidth(cm.display)*pos.ch}var lineObj=getLine(cm.doc,pos.line);var top=heightAtLine(lineObj)+paddingTop(cm.display);return{left:left,right:left,top:top,bottom:top+lineObj.height}}function PosWithInfo(line,ch,sticky,outside,xRel){var pos=Pos(line,ch,sticky);pos.xRel=xRel;if(outside){pos.outside=outside}return pos}function coordsChar(cm,x,y){var doc=cm.doc;y+=cm.display.viewOffset;if(y<0){return PosWithInfo(doc.first,0,null,-1,-1)}var lineN=lineAtHeight(doc,y),last=doc.first+doc.size-1;if(lineN>last){return PosWithInfo(doc.first+doc.size-1,getLine(doc,last).text.length,null,1,1)}if(x<0){x=0}var lineObj=getLine(doc,lineN);for(;;){var found=coordsCharInner(cm,lineObj,lineN,x,y);var collapsed=collapsedSpanAround(lineObj,found.ch+(found.xRel>0||found.outside>0?1:0));if(!collapsed){return found}var rangeEnd=collapsed.find(1);if(rangeEnd.line==lineN){return rangeEnd}lineObj=getLine(doc,lineN=rangeEnd.line)}}function wrappedLineExtent(cm,lineObj,preparedMeasure,y){y-=widgetTopHeight(lineObj);var end=lineObj.text.length;var begin=findFirst(function(ch){return measureCharPrepared(cm,preparedMeasure,ch-1).bottom<=y},end,0);end=findFirst(function(ch){return measureCharPrepared(cm,preparedMeasure,ch).top>y},begin,end);return{begin:begin,end:end}}function wrappedLineExtentChar(cm,lineObj,preparedMeasure,target){if(!preparedMeasure){preparedMeasure=prepareMeasureForLine(cm,lineObj)}var targetTop=intoCoordSystem(cm,lineObj,measureCharPrepared(cm,preparedMeasure,target),"line").top;return wrappedLineExtent(cm,lineObj,preparedMeasure,targetTop)}function boxIsAfter(box,x,y,left){return box.bottom<=y?false:box.top>y?true:(left?box.left:box.right)>x}function coordsCharInner(cm,lineObj,lineNo,x,y){y-=heightAtLine(lineObj);var preparedMeasure=prepareMeasureForLine(cm,lineObj);var widgetHeight=widgetTopHeight(lineObj);var begin=0,end=lineObj.text.length,ltr=true;var order=getOrder(lineObj,cm.doc.direction);if(order){var part=(cm.options.lineWrapping?coordsBidiPartWrapped:coordsBidiPart)(cm,lineObj,lineNo,preparedMeasure,order,x,y);ltr=part.level!=1;begin=ltr?part.from:part.to-1;end=ltr?part.to:part.from-1}var chAround=null,boxAround=null;var ch=findFirst(function(ch){var box=measureCharPrepared(cm,preparedMeasure,ch);box.top+=widgetHeight;box.bottom+=widgetHeight;if(!boxIsAfter(box,x,y,false)){return false}if(box.top<=y&&box.left<=x){chAround=ch;boxAround=box}return true},begin,end);var baseX,sticky,outside=false;if(boxAround){var atLeft=x-boxAround.left<boxAround.right-x,atStart=atLeft==ltr;ch=chAround+(atStart?0:1);sticky=atStart?"after":"before";baseX=atLeft?boxAround.left:boxAround.right}else{if(!ltr&&(ch==end||ch==begin)){ch++}sticky=ch==0?"after":ch==lineObj.text.length?"before":measureCharPrepared(cm,preparedMeasure,ch-(ltr?1:0)).bottom+widgetHeight<=y==ltr?"after":"before";var coords=cursorCoords(cm,Pos(lineNo,ch,sticky),"line",lineObj,preparedMeasure);baseX=coords.left;outside=y<coords.top?-1:y>=coords.bottom?1:0}ch=skipExtendingChars(lineObj.text,ch,1);return PosWithInfo(lineNo,ch,sticky,outside,x-baseX)}function coordsBidiPart(cm,lineObj,lineNo,preparedMeasure,order,x,y){var index=findFirst(function(i){var part=order[i],ltr=part.level!=1;return boxIsAfter(cursorCoords(cm,Pos(lineNo,ltr?part.to:part.from,ltr?"before":"after"),"line",lineObj,preparedMeasure),x,y,true)},0,order.length-1);var part=order[index];if(index>0){var ltr=part.level!=1;var start=cursorCoords(cm,Pos(lineNo,ltr?part.from:part.to,ltr?"after":"before"),"line",lineObj,preparedMeasure);if(boxIsAfter(start,x,y,true)&&start.top>y){part=order[index-1]}}return part}function coordsBidiPartWrapped(cm,lineObj,_lineNo,preparedMeasure,order,x,y){var ref=wrappedLineExtent(cm,lineObj,preparedMeasure,y);var begin=ref.begin;var end=ref.end;if(/\s/.test(lineObj.text.charAt(end-1))){end--}var part=null,closestDist=null;for(var i=0;i<order.length;i++){var p=order[i];if(p.from>=end||p.to<=begin){continue}var ltr=p.level!=1;var endX=measureCharPrepared(cm,preparedMeasure,ltr?Math.min(end,p.to)-1:Math.max(begin,p.from)).right;var dist=endX<x?x-endX+1e9:endX-x;if(!part||closestDist>dist){part=p;closestDist=dist}}if(!part){part=order[order.length-1]}if(part.from<begin){part={from:begin,to:part.to,level:part.level}}if(part.to>end){part={from:part.from,to:end,level:part.level}}return part}var measureText;function textHeight(display){if(display.cachedTextHeight!=null){return display.cachedTextHeight}if(measureText==null){measureText=elt("pre",null,"CodeMirror-line-like");for(var i=0;i<49;++i){measureText.appendChild(document.createTextNode("x"));measureText.appendChild(elt("br"))}measureText.appendChild(document.createTextNode("x"))}removeChildrenAndAdd(display.measure,measureText);var height=measureText.offsetHeight/50;if(height>3){display.cachedTextHeight=height}removeChildren(display.measure);return height||1}function charWidth(display){if(display.cachedCharWidth!=null){return display.cachedCharWidth}var anchor=elt("span","xxxxxxxxxx");var pre=elt("pre",[anchor],"CodeMirror-line-like");removeChildrenAndAdd(display.measure,pre);var rect=anchor.getBoundingClientRect(),width=(rect.right-rect.left)/10;if(width>2){display.cachedCharWidth=width}return width||10}function getDimensions(cm){var d=cm.display,left={},width={};var gutterLeft=d.gutters.clientLeft;for(var n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i){var id=cm.display.gutterSpecs[i].className;left[id]=n.offsetLeft+n.clientLeft+gutterLeft;width[id]=n.clientWidth}return{fixedPos:compensateForHScroll(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:left,gutterWidth:width,wrapperWidth:d.wrapper.clientWidth}}function compensateForHScroll(display){return display.scroller.getBoundingClientRect().left-display.sizer.getBoundingClientRect().left}function estimateHeight(cm){var th=textHeight(cm.display),wrapping=cm.options.lineWrapping;var perLine=wrapping&&Math.max(5,cm.display.scroller.clientWidth/charWidth(cm.display)-3);return function(line){if(lineIsHidden(cm.doc,line)){return 0}var widgetsHeight=0;if(line.widgets){for(var i=0;i<line.widgets.length;i++){if(line.widgets[i].height){widgetsHeight+=line.widgets[i].height}}}if(wrapping){return widgetsHeight+(Math.ceil(line.text.length/perLine)||1)*th}else{return widgetsHeight+th}}}function estimateLineHeights(cm){var doc=cm.doc,est=estimateHeight(cm);doc.iter(function(line){var estHeight=est(line);if(estHeight!=line.height){updateLineHeight(line,estHeight)}})}function posFromMouse(cm,e,liberal,forRect){var display=cm.display;if(!liberal&&e_target(e).getAttribute("cm-not-content")=="true"){return null}var x,y,space=display.lineSpace.getBoundingClientRect();try{x=e.clientX-space.left;y=e.clientY-space.top}catch(e$1){return null}var coords=coordsChar(cm,x,y),line;if(forRect&&coords.xRel>0&&(line=getLine(cm.doc,coords.line).text).length==coords.ch){var colDiff=countColumn(line,line.length,cm.options.tabSize)-line.length;coords=Pos(coords.line,Math.max(0,Math.round((x-paddingH(cm.display).left)/charWidth(cm.display))-colDiff))}return coords}function findViewIndex(cm,n){if(n>=cm.display.viewTo){return null}n-=cm.display.viewFrom;if(n<0){return null}var view=cm.display.view;for(var i=0;i<view.length;i++){n-=view[i].size;if(n<0){return i}}}function regChange(cm,from,to,lendiff){if(from==null){from=cm.doc.first}if(to==null){to=cm.doc.first+cm.doc.size}if(!lendiff){lendiff=0}var display=cm.display;if(lendiff&&to<display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>from)){display.updateLineNumbers=from}cm.curOp.viewChanged=true;if(from>=display.viewTo){if(sawCollapsedSpans&&visualLineNo(cm.doc,from)<display.viewTo){resetView(cm)}}else if(to<=display.viewFrom){if(sawCollapsedSpans&&visualLineEndNo(cm.doc,to+lendiff)>display.viewFrom){resetView(cm)}else{display.viewFrom+=lendiff;display.viewTo+=lendiff}}else if(from<=display.viewFrom&&to>=display.viewTo){resetView(cm)}else if(from<=display.viewFrom){var cut=viewCuttingPoint(cm,to,to+lendiff,1);if(cut){display.view=display.view.slice(cut.index);display.viewFrom=cut.lineN;display.viewTo+=lendiff}else{resetView(cm)}}else if(to>=display.viewTo){var cut$1=viewCuttingPoint(cm,from,from,-1);if(cut$1){display.view=display.view.slice(0,cut$1.index);display.viewTo=cut$1.lineN}else{resetView(cm)}}else{var cutTop=viewCuttingPoint(cm,from,from,-1);var cutBot=viewCuttingPoint(cm,to,to+lendiff,1);if(cutTop&&cutBot){display.view=display.view.slice(0,cutTop.index).concat(buildViewArray(cm,cutTop.lineN,cutBot.lineN)).concat(display.view.slice(cutBot.index));display.viewTo+=lendiff}else{resetView(cm)}}var ext=display.externalMeasured;if(ext){if(to<ext.lineN){ext.lineN+=lendiff}else if(from<ext.lineN+ext.size){display.externalMeasured=null}}}function regLineChange(cm,line,type){cm.curOp.viewChanged=true;var display=cm.display,ext=cm.display.externalMeasured;if(ext&&line>=ext.lineN&&line<ext.lineN+ext.size){display.externalMeasured=null}if(line<display.viewFrom||line>=display.viewTo){return}var lineView=display.view[findViewIndex(cm,line)];if(lineView.node==null){return}var arr=lineView.changes||(lineView.changes=[]);if(indexOf(arr,type)==-1){arr.push(type)}}function resetView(cm){cm.display.viewFrom=cm.display.viewTo=cm.doc.first;cm.display.view=[];cm.display.viewOffset=0}function viewCuttingPoint(cm,oldN,newN,dir){var index=findViewIndex(cm,oldN),diff,view=cm.display.view;if(!sawCollapsedSpans||newN==cm.doc.first+cm.doc.size){return{index:index,lineN:newN}}var n=cm.display.viewFrom;for(var i=0;i<index;i++){n+=view[i].size}if(n!=oldN){if(dir>0){if(index==view.length-1){return null}diff=n+view[index].size-oldN;index++}else{diff=n-oldN}oldN+=diff;newN+=diff}while(visualLineNo(cm.doc,newN)!=newN){if(index==(dir<0?0:view.length-1)){return null}newN+=dir*view[index-(dir<0?1:0)].size;index+=dir}return{index:index,lineN:newN}}function adjustView(cm,from,to){var display=cm.display,view=display.view;if(view.length==0||from>=display.viewTo||to<=display.viewFrom){display.view=buildViewArray(cm,from,to);display.viewFrom=from}else{if(display.viewFrom>from){display.view=buildViewArray(cm,from,display.viewFrom).concat(display.view)}else if(display.viewFrom<from){display.view=display.view.slice(findViewIndex(cm,from))}display.viewFrom=from;if(display.viewTo<to){display.view=display.view.concat(buildViewArray(cm,display.viewTo,to))}else if(display.viewTo>to){display.view=display.view.slice(0,findViewIndex(cm,to))}}display.viewTo=to}function countDirtyView(cm){var view=cm.display.view,dirty=0;for(var i=0;i<view.length;i++){var lineView=view[i];if(!lineView.hidden&&(!lineView.node||lineView.changes)){++dirty}}return dirty}function updateSelection(cm){cm.display.input.showSelection(cm.display.input.prepareSelection())}function prepareSelection(cm,primary){if(primary===void 0)primary=true;var doc=cm.doc,result={};var curFragment=result.cursors=document.createDocumentFragment();var selFragment=result.selection=document.createDocumentFragment();for(var i=0;i<doc.sel.ranges.length;i++){if(!primary&&i==doc.sel.primIndex){continue}var range=doc.sel.ranges[i];if(range.from().line>=cm.display.viewTo||range.to().line<cm.display.viewFrom){continue}var collapsed=range.empty();if(collapsed||cm.options.showCursorWhenSelecting){drawSelectionCursor(cm,range.head,curFragment)}if(!collapsed){drawSelectionRange(cm,range,selFragment)}}return result}function drawSelectionCursor(cm,head,output){var pos=cursorCoords(cm,head,"div",null,null,!cm.options.singleCursorHeightPerLine);var cursor=output.appendChild(elt("div","\xa0","CodeMirror-cursor"));cursor.style.left=pos.left+"px";cursor.style.top=pos.top+"px";cursor.style.height=Math.max(0,pos.bottom-pos.top)*cm.options.cursorHeight+"px";if(pos.other){var otherCursor=output.appendChild(elt("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));otherCursor.style.display="";otherCursor.style.left=pos.other.left+"px";otherCursor.style.top=pos.other.top+"px";otherCursor.style.height=(pos.other.bottom-pos.other.top)*.85+"px"}}function cmpCoords(a,b){return a.top-b.top||a.left-b.left}function drawSelectionRange(cm,range,output){var display=cm.display,doc=cm.doc;var fragment=document.createDocumentFragment();var padding=paddingH(cm.display),leftSide=padding.left;var rightSide=Math.max(display.sizerWidth,displayWidth(cm)-display.sizer.offsetLeft)-padding.right;var docLTR=doc.direction=="ltr";function add(left,top,width,bottom){if(top<0){top=0}top=Math.round(top);bottom=Math.round(bottom);fragment.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+left+"px;\n                             top: "+top+"px; width: "+(width==null?rightSide-left:width)+"px;\n                             height: "+(bottom-top)+"px"))}function drawForLine(line,fromArg,toArg){var lineObj=getLine(doc,line);var lineLen=lineObj.text.length;var start,end;function coords(ch,bias){return charCoords(cm,Pos(line,ch),"div",lineObj,bias)}function wrapX(pos,dir,side){var extent=wrappedLineExtentChar(cm,lineObj,null,pos);var prop=dir=="ltr"==(side=="after")?"left":"right";var ch=side=="after"?extent.begin:extent.end-(/\s/.test(lineObj.text.charAt(extent.end-1))?2:1);return coords(ch,prop)[prop]}var order=getOrder(lineObj,doc.direction);iterateBidiSections(order,fromArg||0,toArg==null?lineLen:toArg,function(from,to,dir,i){var ltr=dir=="ltr";var fromPos=coords(from,ltr?"left":"right");var toPos=coords(to-1,ltr?"right":"left");var openStart=fromArg==null&&from==0,openEnd=toArg==null&&to==lineLen;var first=i==0,last=!order||i==order.length-1;if(toPos.top-fromPos.top<=3){var openLeft=(docLTR?openStart:openEnd)&&first;var openRight=(docLTR?openEnd:openStart)&&last;var left=openLeft?leftSide:(ltr?fromPos:toPos).left;var right=openRight?rightSide:(ltr?toPos:fromPos).right;add(left,fromPos.top,right-left,fromPos.bottom)}else{var topLeft,topRight,botLeft,botRight;if(ltr){topLeft=docLTR&&openStart&&first?leftSide:fromPos.left;topRight=docLTR?rightSide:wrapX(from,dir,"before");botLeft=docLTR?leftSide:wrapX(to,dir,"after");botRight=docLTR&&openEnd&&last?rightSide:toPos.right}else{topLeft=!docLTR?leftSide:wrapX(from,dir,"before");topRight=!docLTR&&openStart&&first?rightSide:fromPos.right;botLeft=!docLTR&&openEnd&&last?leftSide:toPos.left;botRight=!docLTR?rightSide:wrapX(to,dir,"after")}add(topLeft,fromPos.top,topRight-topLeft,fromPos.bottom);if(fromPos.bottom<toPos.top){add(leftSide,fromPos.bottom,null,toPos.top)}add(botLeft,toPos.top,botRight-botLeft,toPos.bottom)}if(!start||cmpCoords(fromPos,start)<0){start=fromPos}if(cmpCoords(toPos,start)<0){start=toPos}if(!end||cmpCoords(fromPos,end)<0){end=fromPos}if(cmpCoords(toPos,end)<0){end=toPos}});return{start:start,end:end}}var sFrom=range.from(),sTo=range.to();if(sFrom.line==sTo.line){drawForLine(sFrom.line,sFrom.ch,sTo.ch)}else{var fromLine=getLine(doc,sFrom.line),toLine=getLine(doc,sTo.line);var singleVLine=visualLine(fromLine)==visualLine(toLine);var leftEnd=drawForLine(sFrom.line,sFrom.ch,singleVLine?fromLine.text.length+1:null).end;var rightStart=drawForLine(sTo.line,singleVLine?0:null,sTo.ch).start;if(singleVLine){if(leftEnd.top<rightStart.top-2){add(leftEnd.right,leftEnd.top,null,leftEnd.bottom);add(leftSide,rightStart.top,rightStart.left,rightStart.bottom)}else{add(leftEnd.right,leftEnd.top,rightStart.left-leftEnd.right,leftEnd.bottom)}}if(leftEnd.bottom<rightStart.top){add(leftSide,leftEnd.bottom,null,rightStart.top)}}output.appendChild(fragment)}function restartBlink(cm){if(!cm.state.focused){return}var display=cm.display;clearInterval(display.blinker);var on=true;display.cursorDiv.style.visibility="";if(cm.options.cursorBlinkRate>0){display.blinker=setInterval(function(){if(!cm.hasFocus()){onBlur(cm)}display.cursorDiv.style.visibility=(on=!on)?"":"hidden"},cm.options.cursorBlinkRate)}else if(cm.options.cursorBlinkRate<0){display.cursorDiv.style.visibility="hidden"}}function ensureFocus(cm){if(!cm.hasFocus()){cm.display.input.focus();if(!cm.state.focused){onFocus(cm)}}}function delayBlurEvent(cm){cm.state.delayingBlurEvent=true;setTimeout(function(){if(cm.state.delayingBlurEvent){cm.state.delayingBlurEvent=false;if(cm.state.focused){onBlur(cm)}}},100)}function onFocus(cm,e){if(cm.state.delayingBlurEvent&&!cm.state.draggingText){cm.state.delayingBlurEvent=false}if(cm.options.readOnly=="nocursor"){return}if(!cm.state.focused){signal(cm,"focus",cm,e);cm.state.focused=true;addClass(cm.display.wrapper,"CodeMirror-focused");if(!cm.curOp&&cm.display.selForContextMenu!=cm.doc.sel){cm.display.input.reset();if(webkit){setTimeout(function(){return cm.display.input.reset(true)},20)}}cm.display.input.receivedFocus()}restartBlink(cm)}function onBlur(cm,e){if(cm.state.delayingBlurEvent){return}if(cm.state.focused){signal(cm,"blur",cm,e);cm.state.focused=false;rmClass(cm.display.wrapper,"CodeMirror-focused")}clearInterval(cm.display.blinker);setTimeout(function(){if(!cm.state.focused){cm.display.shift=false}},150)}function updateHeightsInViewport(cm){var display=cm.display;var prevBottom=display.lineDiv.offsetTop;for(var i=0;i<display.view.length;i++){var cur=display.view[i],wrapping=cm.options.lineWrapping;var height=void 0,width=0;if(cur.hidden){continue}if(ie&&ie_version<8){var bot=cur.node.offsetTop+cur.node.offsetHeight;height=bot-prevBottom;prevBottom=bot}else{var box=cur.node.getBoundingClientRect();height=box.bottom-box.top;if(!wrapping&&cur.text.firstChild){width=cur.text.firstChild.getBoundingClientRect().right-box.left-1}}var diff=cur.line.height-height;if(diff>.005||diff<-.005){updateLineHeight(cur.line,height);updateWidgetHeight(cur.line);if(cur.rest){for(var j=0;j<cur.rest.length;j++){updateWidgetHeight(cur.rest[j])}}}if(width>cm.display.sizerWidth){var chWidth=Math.ceil(width/charWidth(cm.display));if(chWidth>cm.display.maxLineLength){cm.display.maxLineLength=chWidth;cm.display.maxLine=cur.line;cm.display.maxLineChanged=true}}}}function updateWidgetHeight(line){if(line.widgets){for(var i=0;i<line.widgets.length;++i){var w=line.widgets[i],parent=w.node.parentNode;if(parent){w.height=parent.offsetHeight}}}}function visibleLines(display,doc,viewport){var top=viewport&&viewport.top!=null?Math.max(0,viewport.top):display.scroller.scrollTop;top=Math.floor(top-paddingTop(display));var bottom=viewport&&viewport.bottom!=null?viewport.bottom:top+display.wrapper.clientHeight;var from=lineAtHeight(doc,top),to=lineAtHeight(doc,bottom);if(viewport&&viewport.ensure){var ensureFrom=viewport.ensure.from.line,ensureTo=viewport.ensure.to.line;if(ensureFrom<from){from=ensureFrom;to=lineAtHeight(doc,heightAtLine(getLine(doc,ensureFrom))+display.wrapper.clientHeight)}else if(Math.min(ensureTo,doc.lastLine())>=to){from=lineAtHeight(doc,heightAtLine(getLine(doc,ensureTo))-display.wrapper.clientHeight);to=ensureTo}}return{from:from,to:Math.max(to,from+1)}}function maybeScrollWindow(cm,rect){if(signalDOMEvent(cm,"scrollCursorIntoView")){return}var display=cm.display,box=display.sizer.getBoundingClientRect(),doScroll=null;if(rect.top+box.top<0){doScroll=true}else if(rect.bottom+box.top>(window.innerHeight||document.documentElement.clientHeight)){doScroll=false}if(doScroll!=null&&!phantom){var scrollNode=elt("div","\u200b",null,"position: absolute;\n                         top: "+(rect.top-display.viewOffset-paddingTop(cm.display))+"px;\n                         height: "+(rect.bottom-rect.top+scrollGap(cm)+display.barHeight)+"px;\n                         left: "+rect.left+"px; width: "+Math.max(2,rect.right-rect.left)+"px;");cm.display.lineSpace.appendChild(scrollNode);scrollNode.scrollIntoView(doScroll);cm.display.lineSpace.removeChild(scrollNode)}}function scrollPosIntoView(cm,pos,end,margin){if(margin==null){margin=0}var rect;if(!cm.options.lineWrapping&&pos==end){pos=pos.ch?Pos(pos.line,pos.sticky=="before"?pos.ch-1:pos.ch,"after"):pos;end=pos.sticky=="before"?Pos(pos.line,pos.ch+1,"before"):pos}for(var limit=0;limit<5;limit++){var changed=false;var coords=cursorCoords(cm,pos);var endCoords=!end||end==pos?coords:cursorCoords(cm,end);rect={left:Math.min(coords.left,endCoords.left),top:Math.min(coords.top,endCoords.top)-margin,right:Math.max(coords.left,endCoords.left),bottom:Math.max(coords.bottom,endCoords.bottom)+margin};var scrollPos=calculateScrollPos(cm,rect);var startTop=cm.doc.scrollTop,startLeft=cm.doc.scrollLeft;if(scrollPos.scrollTop!=null){updateScrollTop(cm,scrollPos.scrollTop);if(Math.abs(cm.doc.scrollTop-startTop)>1){changed=true}}if(scrollPos.scrollLeft!=null){setScrollLeft(cm,scrollPos.scrollLeft);if(Math.abs(cm.doc.scrollLeft-startLeft)>1){changed=true}}if(!changed){break}}return rect}function scrollIntoView(cm,rect){var scrollPos=calculateScrollPos(cm,rect);if(scrollPos.scrollTop!=null){updateScrollTop(cm,scrollPos.scrollTop)}if(scrollPos.scrollLeft!=null){setScrollLeft(cm,scrollPos.scrollLeft)}}function calculateScrollPos(cm,rect){var display=cm.display,snapMargin=textHeight(cm.display);if(rect.top<0){rect.top=0}var screentop=cm.curOp&&cm.curOp.scrollTop!=null?cm.curOp.scrollTop:display.scroller.scrollTop;var screen=displayHeight(cm),result={};if(rect.bottom-rect.top>screen){rect.bottom=rect.top+screen}var docBottom=cm.doc.height+paddingVert(display);var atTop=rect.top<snapMargin,atBottom=rect.bottom>docBottom-snapMargin;if(rect.top<screentop){result.scrollTop=atTop?0:rect.top}else if(rect.bottom>screentop+screen){var newTop=Math.min(rect.top,(atBottom?docBottom:rect.bottom)-screen);if(newTop!=screentop){result.scrollTop=newTop}}var gutterSpace=cm.options.fixedGutter?0:display.gutters.offsetWidth;var screenleft=cm.curOp&&cm.curOp.scrollLeft!=null?cm.curOp.scrollLeft:display.scroller.scrollLeft-gutterSpace;var screenw=displayWidth(cm)-display.gutters.offsetWidth;var tooWide=rect.right-rect.left>screenw;if(tooWide){rect.right=rect.left+screenw}if(rect.left<10){result.scrollLeft=0}else if(rect.left<screenleft){result.scrollLeft=Math.max(0,rect.left+gutterSpace-(tooWide?0:10))}else if(rect.right>screenw+screenleft-3){result.scrollLeft=rect.right+(tooWide?0:10)-screenw}return result}function addToScrollTop(cm,top){if(top==null){return}resolveScrollToPos(cm);cm.curOp.scrollTop=(cm.curOp.scrollTop==null?cm.doc.scrollTop:cm.curOp.scrollTop)+top}function ensureCursorVisible(cm){resolveScrollToPos(cm);var cur=cm.getCursor();cm.curOp.scrollToPos={from:cur,to:cur,margin:cm.options.cursorScrollMargin}}function scrollToCoords(cm,x,y){if(x!=null||y!=null){resolveScrollToPos(cm)}if(x!=null){cm.curOp.scrollLeft=x}if(y!=null){cm.curOp.scrollTop=y}}function scrollToRange(cm,range){resolveScrollToPos(cm);cm.curOp.scrollToPos=range}function resolveScrollToPos(cm){var range=cm.curOp.scrollToPos;if(range){cm.curOp.scrollToPos=null;var from=estimateCoords(cm,range.from),to=estimateCoords(cm,range.to);scrollToCoordsRange(cm,from,to,range.margin)}}function scrollToCoordsRange(cm,from,to,margin){var sPos=calculateScrollPos(cm,{left:Math.min(from.left,to.left),top:Math.min(from.top,to.top)-margin,right:Math.max(from.right,to.right),bottom:Math.max(from.bottom,to.bottom)+margin});scrollToCoords(cm,sPos.scrollLeft,sPos.scrollTop)}function updateScrollTop(cm,val){if(Math.abs(cm.doc.scrollTop-val)<2){return}if(!gecko){updateDisplaySimple(cm,{top:val})}setScrollTop(cm,val,true);if(gecko){updateDisplaySimple(cm)}startWorker(cm,100)}function setScrollTop(cm,val,forceScroll){val=Math.max(0,Math.min(cm.display.scroller.scrollHeight-cm.display.scroller.clientHeight,val));if(cm.display.scroller.scrollTop==val&&!forceScroll){return}cm.doc.scrollTop=val;cm.display.scrollbars.setScrollTop(val);if(cm.display.scroller.scrollTop!=val){cm.display.scroller.scrollTop=val}}function setScrollLeft(cm,val,isScroller,forceScroll){val=Math.max(0,Math.min(val,cm.display.scroller.scrollWidth-cm.display.scroller.clientWidth));if((isScroller?val==cm.doc.scrollLeft:Math.abs(cm.doc.scrollLeft-val)<2)&&!forceScroll){return}cm.doc.scrollLeft=val;alignHorizontally(cm);if(cm.display.scroller.scrollLeft!=val){cm.display.scroller.scrollLeft=val}cm.display.scrollbars.setScrollLeft(val)}function measureForScrollbars(cm){var d=cm.display,gutterW=d.gutters.offsetWidth;var docH=Math.round(cm.doc.height+paddingVert(cm.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:cm.options.fixedGutter?gutterW:0,docHeight:docH,scrollHeight:docH+scrollGap(cm)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:gutterW}}var NativeScrollbars=function(place,scroll,cm){this.cm=cm;var vert=this.vert=elt("div",[elt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var horiz=this.horiz=elt("div",[elt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");vert.tabIndex=horiz.tabIndex=-1;place(vert);place(horiz);on(vert,"scroll",function(){if(vert.clientHeight){scroll(vert.scrollTop,"vertical")}});on(horiz,"scroll",function(){if(horiz.clientWidth){scroll(horiz.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(ie&&ie_version<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};NativeScrollbars.prototype.update=function(measure){var needsH=measure.scrollWidth>measure.clientWidth+1;var needsV=measure.scrollHeight>measure.clientHeight+1;var sWidth=measure.nativeBarWidth;if(needsV){this.vert.style.display="block";this.vert.style.bottom=needsH?sWidth+"px":"0";var totalHeight=measure.viewHeight-(needsH?sWidth:0);this.vert.firstChild.style.height=Math.max(0,measure.scrollHeight-measure.clientHeight+totalHeight)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(needsH){this.horiz.style.display="block";this.horiz.style.right=needsV?sWidth+"px":"0";this.horiz.style.left=measure.barLeft+"px";var totalWidth=measure.viewWidth-measure.barLeft-(needsV?sWidth:0);this.horiz.firstChild.style.width=Math.max(0,measure.scrollWidth-measure.clientWidth+totalWidth)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&measure.clientHeight>0){if(sWidth==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:needsV?sWidth:0,bottom:needsH?sWidth:0}};NativeScrollbars.prototype.setScrollLeft=function(pos){if(this.horiz.scrollLeft!=pos){this.horiz.scrollLeft=pos}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")}};NativeScrollbars.prototype.setScrollTop=function(pos){if(this.vert.scrollTop!=pos){this.vert.scrollTop=pos}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert,"vert")}};NativeScrollbars.prototype.zeroWidthHack=function(){var w=mac&&!mac_geMountainLion?"12px":"18px";this.horiz.style.height=this.vert.style.width=w;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new Delayed;this.disableVert=new Delayed};NativeScrollbars.prototype.enableZeroWidthBar=function(bar,delay,type){bar.style.pointerEvents="auto";function maybeDisable(){var box=bar.getBoundingClientRect();var elt=type=="vert"?document.elementFromPoint(box.right-1,(box.top+box.bottom)/2):document.elementFromPoint((box.right+box.left)/2,box.bottom-1);if(elt!=bar){bar.style.pointerEvents="none"}else{delay.set(1e3,maybeDisable)}}delay.set(1e3,maybeDisable)};NativeScrollbars.prototype.clear=function(){var parent=this.horiz.parentNode;parent.removeChild(this.horiz);parent.removeChild(this.vert)};var NullScrollbars=function(){};NullScrollbars.prototype.update=function(){return{bottom:0,right:0}};NullScrollbars.prototype.setScrollLeft=function(){};NullScrollbars.prototype.setScrollTop=function(){};NullScrollbars.prototype.clear=function(){};function updateScrollbars(cm,measure){if(!measure){measure=measureForScrollbars(cm)}var startWidth=cm.display.barWidth,startHeight=cm.display.barHeight;updateScrollbarsInner(cm,measure);for(var i=0;i<4&&startWidth!=cm.display.barWidth||startHeight!=cm.display.barHeight;i++){if(startWidth!=cm.display.barWidth&&cm.options.lineWrapping){updateHeightsInViewport(cm)}updateScrollbarsInner(cm,measureForScrollbars(cm));startWidth=cm.display.barWidth;startHeight=cm.display.barHeight}}function updateScrollbarsInner(cm,measure){var d=cm.display;var sizes=d.scrollbars.update(measure);d.sizer.style.paddingRight=(d.barWidth=sizes.right)+"px";d.sizer.style.paddingBottom=(d.barHeight=sizes.bottom)+"px";d.heightForcer.style.borderBottom=sizes.bottom+"px solid transparent";if(sizes.right&&sizes.bottom){d.scrollbarFiller.style.display="block";d.scrollbarFiller.style.height=sizes.bottom+"px";d.scrollbarFiller.style.width=sizes.right+"px"}else{d.scrollbarFiller.style.display=""}if(sizes.bottom&&cm.options.coverGutterNextToScrollbar&&cm.options.fixedGutter){d.gutterFiller.style.display="block";d.gutterFiller.style.height=sizes.bottom+"px";d.gutterFiller.style.width=measure.gutterWidth+"px"}else{d.gutterFiller.style.display=""}}var scrollbarModel={native:NativeScrollbars,null:NullScrollbars};function initScrollbars(cm){if(cm.display.scrollbars){cm.display.scrollbars.clear();if(cm.display.scrollbars.addClass){rmClass(cm.display.wrapper,cm.display.scrollbars.addClass)}}cm.display.scrollbars=new scrollbarModel[cm.options.scrollbarStyle](function(node){cm.display.wrapper.insertBefore(node,cm.display.scrollbarFiller);on(node,"mousedown",function(){if(cm.state.focused){setTimeout(function(){return cm.display.input.focus()},0)}});node.setAttribute("cm-not-content","true")},function(pos,axis){if(axis=="horizontal"){setScrollLeft(cm,pos)}else{updateScrollTop(cm,pos)}},cm);if(cm.display.scrollbars.addClass){addClass(cm.display.wrapper,cm.display.scrollbars.addClass)}}var nextOpId=0;function startOperation(cm){cm.curOp={cm:cm,viewChanged:false,startHeight:cm.doc.height,forceUpdate:false,updateInput:0,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++nextOpId};pushOperation(cm.curOp)}function endOperation(cm){var op=cm.curOp;if(op){finishOperation(op,function(group){for(var i=0;i<group.ops.length;i++){group.ops[i].cm.curOp=null}endOperations(group)})}}function endOperations(group){var ops=group.ops;for(var i=0;i<ops.length;i++){endOperation_R1(ops[i])}for(var i$1=0;i$1<ops.length;i$1++){endOperation_W1(ops[i$1])}for(var i$2=0;i$2<ops.length;i$2++){endOperation_R2(ops[i$2])}for(var i$3=0;i$3<ops.length;i$3++){endOperation_W2(ops[i$3])}for(var i$4=0;i$4<ops.length;i$4++){endOperation_finish(ops[i$4])}}function endOperation_R1(op){var cm=op.cm,display=cm.display;maybeClipScrollbars(cm);if(op.updateMaxLine){findMaxLine(cm)}op.mustUpdate=op.viewChanged||op.forceUpdate||op.scrollTop!=null||op.scrollToPos&&(op.scrollToPos.from.line<display.viewFrom||op.scrollToPos.to.line>=display.viewTo)||display.maxLineChanged&&cm.options.lineWrapping;op.update=op.mustUpdate&&new DisplayUpdate(cm,op.mustUpdate&&{top:op.scrollTop,ensure:op.scrollToPos},op.forceUpdate)}function endOperation_W1(op){op.updatedDisplay=op.mustUpdate&&updateDisplayIfNeeded(op.cm,op.update)}function endOperation_R2(op){var cm=op.cm,display=cm.display;if(op.updatedDisplay){updateHeightsInViewport(cm)}op.barMeasure=measureForScrollbars(cm);if(display.maxLineChanged&&!cm.options.lineWrapping){op.adjustWidthTo=measureChar(cm,display.maxLine,display.maxLine.text.length).left+3;cm.display.sizerWidth=op.adjustWidthTo;op.barMeasure.scrollWidth=Math.max(display.scroller.clientWidth,display.sizer.offsetLeft+op.adjustWidthTo+scrollGap(cm)+cm.display.barWidth);op.maxScrollLeft=Math.max(0,display.sizer.offsetLeft+op.adjustWidthTo-displayWidth(cm))}if(op.updatedDisplay||op.selectionChanged){op.preparedSelection=display.input.prepareSelection()}}function endOperation_W2(op){var cm=op.cm;if(op.adjustWidthTo!=null){cm.display.sizer.style.minWidth=op.adjustWidthTo+"px";if(op.maxScrollLeft<cm.doc.scrollLeft){setScrollLeft(cm,Math.min(cm.display.scroller.scrollLeft,op.maxScrollLeft),true)}cm.display.maxLineChanged=false}var takeFocus=op.focus&&op.focus==activeElt();if(op.preparedSelection){cm.display.input.showSelection(op.preparedSelection,takeFocus)}if(op.updatedDisplay||op.startHeight!=cm.doc.height){updateScrollbars(cm,op.barMeasure)}if(op.updatedDisplay){setDocumentHeight(cm,op.barMeasure)}if(op.selectionChanged){restartBlink(cm)}if(cm.state.focused&&op.updateInput){cm.display.input.reset(op.typing)}if(takeFocus){ensureFocus(op.cm)}}function endOperation_finish(op){var cm=op.cm,display=cm.display,doc=cm.doc;if(op.updatedDisplay){postUpdateDisplay(cm,op.update)}if(display.wheelStartX!=null&&(op.scrollTop!=null||op.scrollLeft!=null||op.scrollToPos)){display.wheelStartX=display.wheelStartY=null}if(op.scrollTop!=null){setScrollTop(cm,op.scrollTop,op.forceScroll)}if(op.scrollLeft!=null){setScrollLeft(cm,op.scrollLeft,true,true)}if(op.scrollToPos){var rect=scrollPosIntoView(cm,clipPos(doc,op.scrollToPos.from),clipPos(doc,op.scrollToPos.to),op.scrollToPos.margin);maybeScrollWindow(cm,rect)}var hidden=op.maybeHiddenMarkers,unhidden=op.maybeUnhiddenMarkers;if(hidden){for(var i=0;i<hidden.length;++i){if(!hidden[i].lines.length){signal(hidden[i],"hide")}}}if(unhidden){for(var i$1=0;i$1<unhidden.length;++i$1){if(unhidden[i$1].lines.length){signal(unhidden[i$1],"unhide")}}}if(display.wrapper.offsetHeight){doc.scrollTop=cm.display.scroller.scrollTop}if(op.changeObjs){signal(cm,"changes",cm,op.changeObjs)}if(op.update){op.update.finish()}}function runInOp(cm,f){if(cm.curOp){return f()}startOperation(cm);try{return f()}finally{endOperation(cm)}}function operation(cm,f){return function(){if(cm.curOp){return f.apply(cm,arguments)}startOperation(cm);try{return f.apply(cm,arguments)}finally{endOperation(cm)}}}function methodOp(f){return function(){if(this.curOp){return f.apply(this,arguments)}startOperation(this);try{return f.apply(this,arguments)}finally{endOperation(this)}}}function docMethodOp(f){return function(){var cm=this.cm;if(!cm||cm.curOp){return f.apply(this,arguments)}startOperation(cm);try{return f.apply(this,arguments)}finally{endOperation(cm)}}}function startWorker(cm,time){if(cm.doc.highlightFrontier<cm.display.viewTo){cm.state.highlight.set(time,bind(highlightWorker,cm))}}function highlightWorker(cm){var doc=cm.doc;if(doc.highlightFrontier>=cm.display.viewTo){return}var end=+new Date+cm.options.workTime;var context=getContextBefore(cm,doc.highlightFrontier);var changedLines=[];doc.iter(context.line,Math.min(doc.first+doc.size,cm.display.viewTo+500),function(line){if(context.line>=cm.display.viewFrom){var oldStyles=line.styles;var resetState=line.text.length>cm.options.maxHighlightLength?copyState(doc.mode,context.state):null;var highlighted=highlightLine(cm,line,context,true);if(resetState){context.state=resetState}line.styles=highlighted.styles;var oldCls=line.styleClasses,newCls=highlighted.classes;if(newCls){line.styleClasses=newCls}else if(oldCls){line.styleClasses=null}var ischange=!oldStyles||oldStyles.length!=line.styles.length||oldCls!=newCls&&(!oldCls||!newCls||oldCls.bgClass!=newCls.bgClass||oldCls.textClass!=newCls.textClass);for(var i=0;!ischange&&i<oldStyles.length;++i){ischange=oldStyles[i]!=line.styles[i]}if(ischange){changedLines.push(context.line)}line.stateAfter=context.save();context.nextLine()}else{if(line.text.length<=cm.options.maxHighlightLength){processLine(cm,line.text,context)}line.stateAfter=context.line%5==0?context.save():null;context.nextLine()}if(+new Date>end){startWorker(cm,cm.options.workDelay);return true}});doc.highlightFrontier=context.line;doc.modeFrontier=Math.max(doc.modeFrontier,context.line);if(changedLines.length){runInOp(cm,function(){for(var i=0;i<changedLines.length;i++){regLineChange(cm,changedLines[i],"text")}})}}var DisplayUpdate=function(cm,viewport,force){var display=cm.display;this.viewport=viewport;this.visible=visibleLines(display,cm.doc,viewport);this.editorIsHidden=!display.wrapper.offsetWidth;this.wrapperHeight=display.wrapper.clientHeight;this.wrapperWidth=display.wrapper.clientWidth;this.oldDisplayWidth=displayWidth(cm);this.force=force;this.dims=getDimensions(cm);this.events=[]};DisplayUpdate.prototype.signal=function(emitter,type){if(hasHandler(emitter,type)){this.events.push(arguments)}};DisplayUpdate.prototype.finish=function(){for(var i=0;i<this.events.length;i++){signal.apply(null,this.events[i])}};function maybeClipScrollbars(cm){var display=cm.display;if(!display.scrollbarsClipped&&display.scroller.offsetWidth){display.nativeBarWidth=display.scroller.offsetWidth-display.scroller.clientWidth;display.heightForcer.style.height=scrollGap(cm)+"px";display.sizer.style.marginBottom=-display.nativeBarWidth+"px";display.sizer.style.borderRightWidth=scrollGap(cm)+"px";display.scrollbarsClipped=true}}function selectionSnapshot(cm){if(cm.hasFocus()){return null}var active=activeElt();if(!active||!contains(cm.display.lineDiv,active)){return null}var result={activeElt:active};if(window.getSelection){var sel=window.getSelection();if(sel.anchorNode&&sel.extend&&contains(cm.display.lineDiv,sel.anchorNode)){result.anchorNode=sel.anchorNode;result.anchorOffset=sel.anchorOffset;result.focusNode=sel.focusNode;result.focusOffset=sel.focusOffset}}return result}function restoreSelection(snapshot){if(!snapshot||!snapshot.activeElt||snapshot.activeElt==activeElt()){return}snapshot.activeElt.focus();if(!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName)&&snapshot.anchorNode&&contains(document.body,snapshot.anchorNode)&&contains(document.body,snapshot.focusNode)){var sel=window.getSelection(),range=document.createRange();range.setEnd(snapshot.anchorNode,snapshot.anchorOffset);range.collapse(false);sel.removeAllRanges();sel.addRange(range);sel.extend(snapshot.focusNode,snapshot.focusOffset)}}function updateDisplayIfNeeded(cm,update){var display=cm.display,doc=cm.doc;if(update.editorIsHidden){resetView(cm);return false}if(!update.force&&update.visible.from>=display.viewFrom&&update.visible.to<=display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo)&&display.renderedView==display.view&&countDirtyView(cm)==0){return false}if(maybeUpdateLineNumberWidth(cm)){resetView(cm);update.dims=getDimensions(cm)}var end=doc.first+doc.size;var from=Math.max(update.visible.from-cm.options.viewportMargin,doc.first);var to=Math.min(end,update.visible.to+cm.options.viewportMargin);if(display.viewFrom<from&&from-display.viewFrom<20){from=Math.max(doc.first,display.viewFrom)}if(display.viewTo>to&&display.viewTo-to<20){to=Math.min(end,display.viewTo)}if(sawCollapsedSpans){from=visualLineNo(cm.doc,from);to=visualLineEndNo(cm.doc,to)}var different=from!=display.viewFrom||to!=display.viewTo||display.lastWrapHeight!=update.wrapperHeight||display.lastWrapWidth!=update.wrapperWidth;adjustView(cm,from,to);display.viewOffset=heightAtLine(getLine(cm.doc,display.viewFrom));cm.display.mover.style.top=display.viewOffset+"px";var toUpdate=countDirtyView(cm);if(!different&&toUpdate==0&&!update.force&&display.renderedView==display.view&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo)){return false}var selSnapshot=selectionSnapshot(cm);if(toUpdate>4){display.lineDiv.style.display="none"}patchDisplay(cm,display.updateLineNumbers,update.dims);if(toUpdate>4){display.lineDiv.style.display=""}display.renderedView=display.view;restoreSelection(selSnapshot);removeChildren(display.cursorDiv);removeChildren(display.selectionDiv);display.gutters.style.height=display.sizer.style.minHeight=0;if(different){display.lastWrapHeight=update.wrapperHeight;display.lastWrapWidth=update.wrapperWidth;startWorker(cm,400)}display.updateLineNumbers=null;return true}function postUpdateDisplay(cm,update){var viewport=update.viewport;for(var first=true;;first=false){if(!first||!cm.options.lineWrapping||update.oldDisplayWidth==displayWidth(cm)){if(viewport&&viewport.top!=null){viewport={top:Math.min(cm.doc.height+paddingVert(cm.display)-displayHeight(cm),viewport.top)}}update.visible=visibleLines(cm.display,cm.doc,viewport);if(update.visible.from>=cm.display.viewFrom&&update.visible.to<=cm.display.viewTo){break}}else if(first){update.visible=visibleLines(cm.display,cm.doc,viewport)}if(!updateDisplayIfNeeded(cm,update)){break}updateHeightsInViewport(cm);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure);update.force=false}update.signal(cm,"update",cm);if(cm.display.viewFrom!=cm.display.reportedViewFrom||cm.display.viewTo!=cm.display.reportedViewTo){update.signal(cm,"viewportChange",cm,cm.display.viewFrom,cm.display.viewTo);cm.display.reportedViewFrom=cm.display.viewFrom;cm.display.reportedViewTo=cm.display.viewTo}}function updateDisplaySimple(cm,viewport){var update=new DisplayUpdate(cm,viewport);if(updateDisplayIfNeeded(cm,update)){updateHeightsInViewport(cm);postUpdateDisplay(cm,update);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure);update.finish()}}function patchDisplay(cm,updateNumbersFrom,dims){var display=cm.display,lineNumbers=cm.options.lineNumbers;var container=display.lineDiv,cur=container.firstChild;function rm(node){var next=node.nextSibling;if(webkit&&mac&&cm.display.currentWheelTarget==node){node.style.display="none"}else{node.parentNode.removeChild(node)}return next}var view=display.view,lineN=display.viewFrom;for(var i=0;i<view.length;i++){var lineView=view[i];if(lineView.hidden);else if(!lineView.node||lineView.node.parentNode!=container){var node=buildLineElement(cm,lineView,lineN,dims);container.insertBefore(node,cur)}else{while(cur!=lineView.node){cur=rm(cur)}var updateNumber=lineNumbers&&updateNumbersFrom!=null&&updateNumbersFrom<=lineN&&lineView.lineNumber;if(lineView.changes){if(indexOf(lineView.changes,"gutter")>-1){updateNumber=false}updateLineForChanges(cm,lineView,lineN,dims)}if(updateNumber){removeChildren(lineView.lineNumber);lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options,lineN)))}cur=lineView.node.nextSibling}lineN+=lineView.size}while(cur){cur=rm(cur)}}function updateGutterSpace(display){var width=display.gutters.offsetWidth;display.sizer.style.marginLeft=width+"px"}function setDocumentHeight(cm,measure){cm.display.sizer.style.minHeight=measure.docHeight+"px";cm.display.heightForcer.style.top=measure.docHeight+"px";cm.display.gutters.style.height=measure.docHeight+cm.display.barHeight+scrollGap(cm)+"px"}function alignHorizontally(cm){var display=cm.display,view=display.view;if(!display.alignWidgets&&(!display.gutters.firstChild||!cm.options.fixedGutter)){return}var comp=compensateForHScroll(display)-display.scroller.scrollLeft+cm.doc.scrollLeft;var gutterW=display.gutters.offsetWidth,left=comp+"px";for(var i=0;i<view.length;i++){if(!view[i].hidden){if(cm.options.fixedGutter){if(view[i].gutter){view[i].gutter.style.left=left}if(view[i].gutterBackground){view[i].gutterBackground.style.left=left}}var align=view[i].alignable;if(align){for(var j=0;j<align.length;j++){align[j].style.left=left}}}}if(cm.options.fixedGutter){display.gutters.style.left=comp+gutterW+"px"}}function maybeUpdateLineNumberWidth(cm){if(!cm.options.lineNumbers){return false}var doc=cm.doc,last=lineNumberFor(cm.options,doc.first+doc.size-1),display=cm.display;if(last.length!=display.lineNumChars){var test=display.measure.appendChild(elt("div",[elt("div",last)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var innerW=test.firstChild.offsetWidth,padding=test.offsetWidth-innerW;display.lineGutter.style.width="";display.lineNumInnerWidth=Math.max(innerW,display.lineGutter.offsetWidth-padding)+1;display.lineNumWidth=display.lineNumInnerWidth+padding;display.lineNumChars=display.lineNumInnerWidth?last.length:-1;display.lineGutter.style.width=display.lineNumWidth+"px";updateGutterSpace(cm.display);return true}return false}function getGutters(gutters,lineNumbers){var result=[],sawLineNumbers=false;for(var i=0;i<gutters.length;i++){var name=gutters[i],style=null;if(typeof name!="string"){style=name.style;name=name.className}if(name=="CodeMirror-linenumbers"){if(!lineNumbers){continue}else{sawLineNumbers=true}}result.push({className:name,style:style})}if(lineNumbers&&!sawLineNumbers){result.push({className:"CodeMirror-linenumbers",style:null})}return result}function renderGutters(display){var gutters=display.gutters,specs=display.gutterSpecs;removeChildren(gutters);display.lineGutter=null;for(var i=0;i<specs.length;++i){var ref=specs[i];var className=ref.className;var style=ref.style;var gElt=gutters.appendChild(elt("div",null,"CodeMirror-gutter "+className));if(style){gElt.style.cssText=style}if(className=="CodeMirror-linenumbers"){display.lineGutter=gElt;gElt.style.width=(display.lineNumWidth||1)+"px"}}gutters.style.display=specs.length?"":"none";updateGutterSpace(display)}function updateGutters(cm){renderGutters(cm.display);regChange(cm);alignHorizontally(cm)}function Display(place,doc,input,options){var d=this;this.input=input;d.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler");d.scrollbarFiller.setAttribute("cm-not-content","true");d.gutterFiller=elt("div",null,"CodeMirror-gutter-filler");d.gutterFiller.setAttribute("cm-not-content","true");d.lineDiv=eltP("div",null,"CodeMirror-code");d.selectionDiv=elt("div",null,null,"position: relative; z-index: 1");d.cursorDiv=elt("div",null,"CodeMirror-cursors");d.measure=elt("div",null,"CodeMirror-measure");d.lineMeasure=elt("div",null,"CodeMirror-measure");d.lineSpace=eltP("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");var lines=eltP("div",[d.lineSpace],"CodeMirror-lines");d.mover=elt("div",[lines],null,"position: relative");d.sizer=elt("div",[d.mover],"CodeMirror-sizer");d.sizerWidth=null;d.heightForcer=elt("div",null,null,"position: absolute; height: "+scrollerGap+"px; width: 1px;");d.gutters=elt("div",null,"CodeMirror-gutters");d.lineGutter=null;d.scroller=elt("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll");d.scroller.setAttribute("tabIndex","-1");d.wrapper=elt("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror");if(ie&&ie_version<8){d.gutters.style.zIndex=-1;d.scroller.style.paddingRight=0}if(!webkit&&!(gecko&&mobile)){d.scroller.draggable=true}if(place){if(place.appendChild){place.appendChild(d.wrapper)}else{place(d.wrapper)}}d.viewFrom=d.viewTo=doc.first;d.reportedViewFrom=d.reportedViewTo=doc.first;d.view=[];d.renderedView=null;d.externalMeasured=null;d.viewOffset=0;d.lastWrapHeight=d.lastWrapWidth=0;d.updateLineNumbers=null;d.nativeBarWidth=d.barHeight=d.barWidth=0;d.scrollbarsClipped=false;d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null;d.alignWidgets=false;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.maxLine=null;d.maxLineLength=0;d.maxLineChanged=false;d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null;d.shift=false;d.selForContextMenu=null;d.activeTouch=null;d.gutterSpecs=getGutters(options.gutters,options.lineNumbers);renderGutters(d);input.init(d)}var wheelSamples=0,wheelPixelsPerUnit=null;if(ie){wheelPixelsPerUnit=-.53}else if(gecko){wheelPixelsPerUnit=15}else if(chrome){wheelPixelsPerUnit=-.7}else if(safari){wheelPixelsPerUnit=-1/3}function wheelEventDelta(e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;if(dx==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS){dx=e.detail}if(dy==null&&e.detail&&e.axis==e.VERTICAL_AXIS){dy=e.detail}else if(dy==null){dy=e.wheelDelta}return{x:dx,y:dy}}function wheelEventPixels(e){var delta=wheelEventDelta(e);delta.x*=wheelPixelsPerUnit;delta.y*=wheelPixelsPerUnit;return delta}function onScrollWheel(cm,e){var delta=wheelEventDelta(e),dx=delta.x,dy=delta.y;var display=cm.display,scroll=display.scroller;var canScrollX=scroll.scrollWidth>scroll.clientWidth;var canScrollY=scroll.scrollHeight>scroll.clientHeight;if(!(dx&&canScrollX||dy&&canScrollY)){return}if(dy&&mac&&webkit){outer:for(var cur=e.target,view=display.view;cur!=scroll;cur=cur.parentNode){for(var i=0;i<view.length;i++){if(view[i].node==cur){cm.display.currentWheelTarget=cur;break outer}}}}if(dx&&!gecko&&!presto&&wheelPixelsPerUnit!=null){if(dy&&canScrollY){updateScrollTop(cm,Math.max(0,scroll.scrollTop+dy*wheelPixelsPerUnit))}setScrollLeft(cm,Math.max(0,scroll.scrollLeft+dx*wheelPixelsPerUnit));if(!dy||dy&&canScrollY){e_preventDefault(e)}display.wheelStartX=null;return}if(dy&&wheelPixelsPerUnit!=null){var pixels=dy*wheelPixelsPerUnit;var top=cm.doc.scrollTop,bot=top+display.wrapper.clientHeight;if(pixels<0){top=Math.max(0,top+pixels-50)}else{bot=Math.min(cm.doc.height,bot+pixels+50)}updateDisplaySimple(cm,{top:top,bottom:bot})}if(wheelSamples<20){if(display.wheelStartX==null){display.wheelStartX=scroll.scrollLeft;display.wheelStartY=scroll.scrollTop;display.wheelDX=dx;display.wheelDY=dy;setTimeout(function(){if(display.wheelStartX==null){return}var movedX=scroll.scrollLeft-display.wheelStartX;var movedY=scroll.scrollTop-display.wheelStartY;var sample=movedY&&display.wheelDY&&movedY/display.wheelDY||movedX&&display.wheelDX&&movedX/display.wheelDX;display.wheelStartX=display.wheelStartY=null;if(!sample){return}wheelPixelsPerUnit=(wheelPixelsPerUnit*wheelSamples+sample)/(wheelSamples+1);++wheelSamples},200)}else{display.wheelDX+=dx;display.wheelDY+=dy}}}var Selection=function(ranges,primIndex){this.ranges=ranges;this.primIndex=primIndex};Selection.prototype.primary=function(){return this.ranges[this.primIndex]};Selection.prototype.equals=function(other){if(other==this){return true}if(other.primIndex!=this.primIndex||other.ranges.length!=this.ranges.length){return false}for(var i=0;i<this.ranges.length;i++){var here=this.ranges[i],there=other.ranges[i];if(!equalCursorPos(here.anchor,there.anchor)||!equalCursorPos(here.head,there.head)){return false}}return true};Selection.prototype.deepCopy=function(){var out=[];for(var i=0;i<this.ranges.length;i++){out[i]=new Range(copyPos(this.ranges[i].anchor),copyPos(this.ranges[i].head))}return new Selection(out,this.primIndex)};Selection.prototype.somethingSelected=function(){for(var i=0;i<this.ranges.length;i++){if(!this.ranges[i].empty()){return true}}return false};Selection.prototype.contains=function(pos,end){if(!end){end=pos}for(var i=0;i<this.ranges.length;i++){var range=this.ranges[i];if(cmp(end,range.from())>=0&&cmp(pos,range.to())<=0){return i}}return-1};var Range=function(anchor,head){this.anchor=anchor;this.head=head};Range.prototype.from=function(){return minPos(this.anchor,this.head)};Range.prototype.to=function(){return maxPos(this.anchor,this.head)};Range.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function normalizeSelection(cm,ranges,primIndex){var mayTouch=cm&&cm.options.selectionsMayTouch;var prim=ranges[primIndex];ranges.sort(function(a,b){return cmp(a.from(),b.from())});primIndex=indexOf(ranges,prim);for(var i=1;i<ranges.length;i++){var cur=ranges[i],prev=ranges[i-1];var diff=cmp(prev.to(),cur.from());if(mayTouch&&!cur.empty()?diff>0:diff>=0){var from=minPos(prev.from(),cur.from()),to=maxPos(prev.to(),cur.to());var inv=prev.empty()?cur.from()==cur.head:prev.from()==prev.head;if(i<=primIndex){--primIndex}ranges.splice(--i,2,new Range(inv?to:from,inv?from:to))}}return new Selection(ranges,primIndex)}function simpleSelection(anchor,head){return new Selection([new Range(anchor,head||anchor)],0)}function changeEnd(change){if(!change.text){return change.to}return Pos(change.from.line+change.text.length-1,lst(change.text).length+(change.text.length==1?change.from.ch:0))}function adjustForChange(pos,change){if(cmp(pos,change.from)<0){return pos}if(cmp(pos,change.to)<=0){return changeEnd(change)}var line=pos.line+change.text.length-(change.to.line-change.from.line)-1,ch=pos.ch;if(pos.line==change.to.line){ch+=changeEnd(change).ch-change.to.ch}return Pos(line,ch)}function computeSelAfterChange(doc,change){var out=[];for(var i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];out.push(new Range(adjustForChange(range.anchor,change),adjustForChange(range.head,change)))}return normalizeSelection(doc.cm,out,doc.sel.primIndex)}function offsetPos(pos,old,nw){if(pos.line==old.line){return Pos(nw.line,pos.ch-old.ch+nw.ch)}else{return Pos(nw.line+(pos.line-old.line),pos.ch)}}function computeReplacedSel(doc,changes,hint){var out=[];var oldPrev=Pos(doc.first,0),newPrev=oldPrev;for(var i=0;i<changes.length;i++){var change=changes[i];var from=offsetPos(change.from,oldPrev,newPrev);var to=offsetPos(changeEnd(change),oldPrev,newPrev);oldPrev=change.to;newPrev=to;if(hint=="around"){var range=doc.sel.ranges[i],inv=cmp(range.head,range.anchor)<0;out[i]=new Range(inv?to:from,inv?from:to)}else{out[i]=new Range(from,from)}}return new Selection(out,doc.sel.primIndex)}function loadMode(cm){cm.doc.mode=getMode(cm.options,cm.doc.modeOption);resetModeState(cm)}function resetModeState(cm){cm.doc.iter(function(line){if(line.stateAfter){line.stateAfter=null}if(line.styles){line.styles=null}});cm.doc.modeFrontier=cm.doc.highlightFrontier=cm.doc.first;startWorker(cm,100);cm.state.modeGen++;if(cm.curOp){regChange(cm)}}function isWholeLineUpdate(doc,change){return change.from.ch==0&&change.to.ch==0&&lst(change.text)==""&&(!doc.cm||doc.cm.options.wholeLineUpdateBefore)}function updateDoc(doc,change,markedSpans,estimateHeight){function spansFor(n){return markedSpans?markedSpans[n]:null}function update(line,text,spans){updateLine(line,text,spans,estimateHeight);signalLater(line,"change",line,change)}function linesFor(start,end){var result=[];for(var i=start;i<end;++i){result.push(new Line(text[i],spansFor(i),estimateHeight))}return result}var from=change.from,to=change.to,text=change.text;var firstLine=getLine(doc,from.line),lastLine=getLine(doc,to.line);var lastText=lst(text),lastSpans=spansFor(text.length-1),nlines=to.line-from.line;if(change.full){doc.insert(0,linesFor(0,text.length));doc.remove(text.length,doc.size-text.length)}else if(isWholeLineUpdate(doc,change)){var added=linesFor(0,text.length-1);update(lastLine,lastLine.text,lastSpans);if(nlines){doc.remove(from.line,nlines)}if(added.length){doc.insert(from.line,added)}}else if(firstLine==lastLine){if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+lastText+firstLine.text.slice(to.ch),lastSpans)}else{var added$1=linesFor(1,text.length-1);added$1.push(new Line(lastText+firstLine.text.slice(to.ch),lastSpans,estimateHeight));update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));doc.insert(from.line+1,added$1)}}else if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+text[0]+lastLine.text.slice(to.ch),spansFor(0));doc.remove(from.line+1,nlines)}else{update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));update(lastLine,lastText+lastLine.text.slice(to.ch),lastSpans);var added$2=linesFor(1,text.length-1);if(nlines>1){doc.remove(from.line+1,nlines-1)}doc.insert(from.line+1,added$2)}signalLater(doc,"change",doc,change)}function linkedDocs(doc,f,sharedHistOnly){function propagate(doc,skip,sharedHist){if(doc.linked){for(var i=0;i<doc.linked.length;++i){var rel=doc.linked[i];if(rel.doc==skip){continue}var shared=sharedHist&&rel.sharedHist;if(sharedHistOnly&&!shared){continue}f(rel.doc,shared);propagate(rel.doc,doc,shared)}}}propagate(doc,null,true)}function attachDoc(cm,doc){if(doc.cm){throw new Error("This document is already in use.")}cm.doc=doc;doc.cm=cm;estimateLineHeights(cm);loadMode(cm);setDirectionClass(cm);if(!cm.options.lineWrapping){findMaxLine(cm)}cm.options.mode=doc.modeOption;regChange(cm)}function setDirectionClass(cm){(cm.doc.direction=="rtl"?addClass:rmClass)(cm.display.lineDiv,"CodeMirror-rtl")}function directionChanged(cm){runInOp(cm,function(){setDirectionClass(cm);regChange(cm)})}function History(prev){this.done=[];this.undone=[];this.undoDepth=prev?prev.undoDepth:Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=prev?prev.maxGeneration:1}function historyChangeFromChange(doc,change){var histChange={from:copyPos(change.from),to:changeEnd(change),text:getBetween(doc,change.from,change.to)};attachLocalSpans(doc,histChange,change.from.line,change.to.line+1);linkedDocs(doc,function(doc){return attachLocalSpans(doc,histChange,change.from.line,change.to.line+1)},true);return histChange}function clearSelectionEvents(array){while(array.length){var last=lst(array);if(last.ranges){array.pop()}else{break}}}function lastChangeEvent(hist,force){if(force){clearSelectionEvents(hist.done);return lst(hist.done)}else if(hist.done.length&&!lst(hist.done).ranges){return lst(hist.done)}else if(hist.done.length>1&&!hist.done[hist.done.length-2].ranges){hist.done.pop();return lst(hist.done)}}function addChangeToHistory(doc,change,selAfter,opId){var hist=doc.history;hist.undone.length=0;var time=+new Date,cur;var last;if((hist.lastOp==opId||hist.lastOrigin==change.origin&&change.origin&&(change.origin.charAt(0)=="+"&&hist.lastModTime>time-(doc.cm?doc.cm.options.historyEventDelay:500)||change.origin.charAt(0)=="*"))&&(cur=lastChangeEvent(hist,hist.lastOp==opId))){last=lst(cur.changes);if(cmp(change.from,change.to)==0&&cmp(change.from,last.to)==0){last.to=changeEnd(change)}else{cur.changes.push(historyChangeFromChange(doc,change))}}else{var before=lst(hist.done);if(!before||!before.ranges){pushSelectionToHistory(doc.sel,hist.done)}cur={changes:[historyChangeFromChange(doc,change)],generation:hist.generation};hist.done.push(cur);while(hist.done.length>hist.undoDepth){hist.done.shift();if(!hist.done[0].ranges){hist.done.shift()}}}hist.done.push(selAfter);hist.generation=++hist.maxGeneration;hist.lastModTime=hist.lastSelTime=time;hist.lastOp=hist.lastSelOp=opId;hist.lastOrigin=hist.lastSelOrigin=change.origin;if(!last){signal(doc,"historyAdded")}}function selectionEventCanBeMerged(doc,origin,prev,sel){var ch=origin.charAt(0);return ch=="*"||ch=="+"&&prev.ranges.length==sel.ranges.length&&prev.somethingSelected()==sel.somethingSelected()&&new Date-doc.history.lastSelTime<=(doc.cm?doc.cm.options.historyEventDelay:500)}function addSelectionToHistory(doc,sel,opId,options){var hist=doc.history,origin=options&&options.origin;if(opId==hist.lastSelOp||origin&&hist.lastSelOrigin==origin&&(hist.lastModTime==hist.lastSelTime&&hist.lastOrigin==origin||selectionEventCanBeMerged(doc,origin,lst(hist.done),sel))){hist.done[hist.done.length-1]=sel}else{pushSelectionToHistory(sel,hist.done)}hist.lastSelTime=+new Date;hist.lastSelOrigin=origin;hist.lastSelOp=opId;if(options&&options.clearRedo!==false){clearSelectionEvents(hist.undone)}}function pushSelectionToHistory(sel,dest){var top=lst(dest);if(!(top&&top.ranges&&top.equals(sel))){dest.push(sel)}}function attachLocalSpans(doc,change,from,to){var existing=change["spans_"+doc.id],n=0;doc.iter(Math.max(doc.first,from),Math.min(doc.first+doc.size,to),function(line){if(line.markedSpans){(existing||(existing=change["spans_"+doc.id]={}))[n]=line.markedSpans}++n})}function removeClearedSpans(spans){if(!spans){return null}var out;for(var i=0;i<spans.length;++i){if(spans[i].marker.explicitlyCleared){if(!out){out=spans.slice(0,i)}}else if(out){out.push(spans[i])}}return!out?spans:out.length?out:null}function getOldSpans(doc,change){var found=change["spans_"+doc.id];if(!found){return null}var nw=[];for(var i=0;i<change.text.length;++i){nw.push(removeClearedSpans(found[i]))}return nw}function mergeOldSpans(doc,change){var old=getOldSpans(doc,change);var stretched=stretchSpansOverChange(doc,change);if(!old){return stretched}if(!stretched){return old}for(var i=0;i<old.length;++i){var oldCur=old[i],stretchCur=stretched[i];if(oldCur&&stretchCur){spans:for(var j=0;j<stretchCur.length;++j){var span=stretchCur[j];for(var k=0;k<oldCur.length;++k){if(oldCur[k].marker==span.marker){continue spans}}oldCur.push(span)}}else if(stretchCur){old[i]=stretchCur}}return old}function copyHistoryArray(events,newGroup,instantiateSel){var copy=[];for(var i=0;i<events.length;++i){var event=events[i];if(event.ranges){copy.push(instantiateSel?Selection.prototype.deepCopy.call(event):event);continue}var changes=event.changes,newChanges=[];copy.push({changes:newChanges});for(var j=0;j<changes.length;++j){var change=changes[j],m=void 0;newChanges.push({from:change.from,to:change.to,text:change.text});if(newGroup){for(var prop in change){if(m=prop.match(/^spans_(\d+)$/)){if(indexOf(newGroup,Number(m[1]))>-1){lst(newChanges)[prop]=change[prop];delete change[prop]}}}}}}return copy}function extendRange(range,head,other,extend){if(extend){var anchor=range.anchor;if(other){var posBefore=cmp(head,anchor)<0;if(posBefore!=cmp(other,anchor)<0){anchor=head;head=other}else if(posBefore!=cmp(head,other)<0){head=other}}return new Range(anchor,head)}else{return new Range(other||head,head)}}function extendSelection(doc,head,other,options,extend){if(extend==null){extend=doc.cm&&(doc.cm.display.shift||doc.extend)}setSelection(doc,new Selection([extendRange(doc.sel.primary(),head,other,extend)],0),options)}function extendSelections(doc,heads,options){var out=[];var extend=doc.cm&&(doc.cm.display.shift||doc.extend);for(var i=0;i<doc.sel.ranges.length;i++){out[i]=extendRange(doc.sel.ranges[i],heads[i],null,extend)}var newSel=normalizeSelection(doc.cm,out,doc.sel.primIndex);setSelection(doc,newSel,options)}function replaceOneSelection(doc,i,range,options){var ranges=doc.sel.ranges.slice(0);ranges[i]=range;setSelection(doc,normalizeSelection(doc.cm,ranges,doc.sel.primIndex),options)}function setSimpleSelection(doc,anchor,head,options){setSelection(doc,simpleSelection(anchor,head),options)}function filterSelectionChange(doc,sel,options){var obj={ranges:sel.ranges,update:function(ranges){this.ranges=[];for(var i=0;i<ranges.length;i++){this.ranges[i]=new Range(clipPos(doc,ranges[i].anchor),clipPos(doc,ranges[i].head))}},origin:options&&options.origin};signal(doc,"beforeSelectionChange",doc,obj);if(doc.cm){signal(doc.cm,"beforeSelectionChange",doc.cm,obj)}if(obj.ranges!=sel.ranges){return normalizeSelection(doc.cm,obj.ranges,obj.ranges.length-1)}else{return sel}}function setSelectionReplaceHistory(doc,sel,options){var done=doc.history.done,last=lst(done);if(last&&last.ranges){done[done.length-1]=sel;setSelectionNoUndo(doc,sel,options)}else{setSelection(doc,sel,options)}}function setSelection(doc,sel,options){setSelectionNoUndo(doc,sel,options);addSelectionToHistory(doc,doc.sel,doc.cm?doc.cm.curOp.id:NaN,options)}function setSelectionNoUndo(doc,sel,options){if(hasHandler(doc,"beforeSelectionChange")||doc.cm&&hasHandler(doc.cm,"beforeSelectionChange")){sel=filterSelectionChange(doc,sel,options)}var bias=options&&options.bias||(cmp(sel.primary().head,doc.sel.primary().head)<0?-1:1);setSelectionInner(doc,skipAtomicInSelection(doc,sel,bias,true));if(!(options&&options.scroll===false)&&doc.cm&&doc.cm.getOption("readOnly")!="nocursor"){ensureCursorVisible(doc.cm)}}function setSelectionInner(doc,sel){if(sel.equals(doc.sel)){return}doc.sel=sel;if(doc.cm){doc.cm.curOp.updateInput=1;doc.cm.curOp.selectionChanged=true;signalCursorActivity(doc.cm)}signalLater(doc,"cursorActivity",doc)}function reCheckSelection(doc){setSelectionInner(doc,skipAtomicInSelection(doc,doc.sel,null,false))}function skipAtomicInSelection(doc,sel,bias,mayClear){var out;for(var i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];var old=sel.ranges.length==doc.sel.ranges.length&&doc.sel.ranges[i];var newAnchor=skipAtomic(doc,range.anchor,old&&old.anchor,bias,mayClear);var newHead=skipAtomic(doc,range.head,old&&old.head,bias,mayClear);if(out||newAnchor!=range.anchor||newHead!=range.head){if(!out){out=sel.ranges.slice(0,i)}out[i]=new Range(newAnchor,newHead)}}return out?normalizeSelection(doc.cm,out,sel.primIndex):sel}function skipAtomicInner(doc,pos,oldPos,dir,mayClear){var line=getLine(doc,pos.line);if(line.markedSpans){for(var i=0;i<line.markedSpans.length;++i){var sp=line.markedSpans[i],m=sp.marker;var preventCursorLeft="selectLeft"in m?!m.selectLeft:m.inclusiveLeft;var preventCursorRight="selectRight"in m?!m.selectRight:m.inclusiveRight;if((sp.from==null||(preventCursorLeft?sp.from<=pos.ch:sp.from<pos.ch))&&(sp.to==null||(preventCursorRight?sp.to>=pos.ch:sp.to>pos.ch))){if(mayClear){signal(m,"beforeCursorEnter");if(m.explicitlyCleared){if(!line.markedSpans){break}else{--i;continue}}}if(!m.atomic){continue}if(oldPos){var near=m.find(dir<0?1:-1),diff=void 0;if(dir<0?preventCursorRight:preventCursorLeft){near=movePos(doc,near,-dir,near&&near.line==pos.line?line:null)}if(near&&near.line==pos.line&&(diff=cmp(near,oldPos))&&(dir<0?diff<0:diff>0)){return skipAtomicInner(doc,near,pos,dir,mayClear)}}var far=m.find(dir<0?-1:1);if(dir<0?preventCursorLeft:preventCursorRight){far=movePos(doc,far,dir,far.line==pos.line?line:null)}return far?skipAtomicInner(doc,far,pos,dir,mayClear):null}}}return pos}function skipAtomic(doc,pos,oldPos,bias,mayClear){var dir=bias||1;var found=skipAtomicInner(doc,pos,oldPos,dir,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,dir,true)||skipAtomicInner(doc,pos,oldPos,-dir,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,-dir,true);if(!found){doc.cantEdit=true;return Pos(doc.first,0)}return found}function movePos(doc,pos,dir,line){if(dir<0&&pos.ch==0){if(pos.line>doc.first){return clipPos(doc,Pos(pos.line-1))}else{return null}}else if(dir>0&&pos.ch==(line||getLine(doc,pos.line)).text.length){if(pos.line<doc.first+doc.size-1){return Pos(pos.line+1,0)}else{return null}}else{return new Pos(pos.line,pos.ch+dir)}}function selectAll(cm){cm.setSelection(Pos(cm.firstLine(),0),Pos(cm.lastLine()),sel_dontScroll)}function filterChange(doc,change,update){var obj={canceled:false,from:change.from,to:change.to,text:change.text,origin:change.origin,cancel:function(){return obj.canceled=true}};if(update){obj.update=function(from,to,text,origin){if(from){obj.from=clipPos(doc,from)}if(to){obj.to=clipPos(doc,to)}if(text){obj.text=text}if(origin!==undefined){obj.origin=origin}}}signal(doc,"beforeChange",doc,obj);if(doc.cm){signal(doc.cm,"beforeChange",doc.cm,obj)}if(obj.canceled){if(doc.cm){doc.cm.curOp.updateInput=2}return null}return{from:obj.from,to:obj.to,text:obj.text,origin:obj.origin}}function makeChange(doc,change,ignoreReadOnly){if(doc.cm){if(!doc.cm.curOp){return operation(doc.cm,makeChange)(doc,change,ignoreReadOnly)}if(doc.cm.state.suppressEdits){return}}if(hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange")){change=filterChange(doc,change,true);if(!change){return}}var split=sawReadOnlySpans&&!ignoreReadOnly&&removeReadOnlyRanges(doc,change.from,change.to);if(split){for(var i=split.length-1;i>=0;--i){makeChangeInner(doc,{from:split[i].from,to:split[i].to,text:i?[""]:change.text,origin:change.origin})}}else{makeChangeInner(doc,change)}}function makeChangeInner(doc,change){if(change.text.length==1&&change.text[0]==""&&cmp(change.from,change.to)==0){return}var selAfter=computeSelAfterChange(doc,change);addChangeToHistory(doc,change,selAfter,doc.cm?doc.cm.curOp.id:NaN);makeChangeSingleDoc(doc,change,selAfter,stretchSpansOverChange(doc,change));var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}makeChangeSingleDoc(doc,change,null,stretchSpansOverChange(doc,change))})}function makeChangeFromHistory(doc,type,allowSelectionOnly){var suppress=doc.cm&&doc.cm.state.suppressEdits;if(suppress&&!allowSelectionOnly){return}var hist=doc.history,event,selAfter=doc.sel;var source=type=="undo"?hist.done:hist.undone,dest=type=="undo"?hist.undone:hist.done;var i=0;for(;i<source.length;i++){event=source[i];if(allowSelectionOnly?event.ranges&&!event.equals(doc.sel):!event.ranges){break}}if(i==source.length){return}hist.lastOrigin=hist.lastSelOrigin=null;for(;;){event=source.pop();if(event.ranges){pushSelectionToHistory(event,dest);if(allowSelectionOnly&&!event.equals(doc.sel)){setSelection(doc,event,{clearRedo:false});return}selAfter=event}else if(suppress){source.push(event);return}else{break}}var antiChanges=[];pushSelectionToHistory(selAfter,dest);dest.push({changes:antiChanges,generation:hist.generation});hist.generation=event.generation||++hist.maxGeneration;var filter=hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange");var loop=function(i){var change=event.changes[i];change.origin=type;if(filter&&!filterChange(doc,change,false)){source.length=0;return{}}antiChanges.push(historyChangeFromChange(doc,change));var after=i?computeSelAfterChange(doc,change):lst(source);makeChangeSingleDoc(doc,change,after,mergeOldSpans(doc,change));if(!i&&doc.cm){doc.cm.scrollIntoView({from:change.from,to:changeEnd(change)})}var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}makeChangeSingleDoc(doc,change,null,mergeOldSpans(doc,change))})};for(var i$1=event.changes.length-1;i$1>=0;--i$1){var returned=loop(i$1);if(returned)return returned.v}}function shiftDoc(doc,distance){if(distance==0){return}doc.first+=distance;doc.sel=new Selection(map(doc.sel.ranges,function(range){return new Range(Pos(range.anchor.line+distance,range.anchor.ch),Pos(range.head.line+distance,range.head.ch))}),doc.sel.primIndex);if(doc.cm){regChange(doc.cm,doc.first,doc.first-distance,distance);for(var d=doc.cm.display,l=d.viewFrom;l<d.viewTo;l++){regLineChange(doc.cm,l,"gutter")}}}function makeChangeSingleDoc(doc,change,selAfter,spans){if(doc.cm&&!doc.cm.curOp){return operation(doc.cm,makeChangeSingleDoc)(doc,change,selAfter,spans)}if(change.to.line<doc.first){shiftDoc(doc,change.text.length-1-(change.to.line-change.from.line));return}if(change.from.line>doc.lastLine()){return}if(change.from.line<doc.first){var shift=change.text.length-1-(doc.first-change.from.line);shiftDoc(doc,shift);change={from:Pos(doc.first,0),to:Pos(change.to.line+shift,change.to.ch),text:[lst(change.text)],origin:change.origin}}var last=doc.lastLine();if(change.to.line>last){change={from:change.from,to:Pos(last,getLine(doc,last).text.length),text:[change.text[0]],origin:change.origin}}change.removed=getBetween(doc,change.from,change.to);if(!selAfter){selAfter=computeSelAfterChange(doc,change)}if(doc.cm){makeChangeSingleDocInEditor(doc.cm,change,spans)}else{updateDoc(doc,change,spans)}setSelectionNoUndo(doc,selAfter,sel_dontScroll);if(doc.cantEdit&&skipAtomic(doc,Pos(doc.firstLine(),0))){doc.cantEdit=false}}function makeChangeSingleDocInEditor(cm,change,spans){var doc=cm.doc,display=cm.display,from=change.from,to=change.to;var recomputeMaxLength=false,checkWidthStart=from.line;if(!cm.options.lineWrapping){checkWidthStart=lineNo(visualLine(getLine(doc,from.line)));doc.iter(checkWidthStart,to.line+1,function(line){if(line==display.maxLine){recomputeMaxLength=true;return true}})}if(doc.sel.contains(change.from,change.to)>-1){signalCursorActivity(cm)}updateDoc(doc,change,spans,estimateHeight(cm));if(!cm.options.lineWrapping){doc.iter(checkWidthStart,from.line+change.text.length,function(line){var len=lineLength(line);if(len>display.maxLineLength){display.maxLine=line;display.maxLineLength=len;display.maxLineChanged=true;recomputeMaxLength=false}});if(recomputeMaxLength){cm.curOp.updateMaxLine=true}}retreatFrontier(doc,from.line);startWorker(cm,400);var lendiff=change.text.length-(to.line-from.line)-1;if(change.full){regChange(cm)}else if(from.line==to.line&&change.text.length==1&&!isWholeLineUpdate(cm.doc,change)){regLineChange(cm,from.line,"text")}else{regChange(cm,from.line,to.line+1,lendiff)}var changesHandler=hasHandler(cm,"changes"),changeHandler=hasHandler(cm,"change");if(changeHandler||changesHandler){var obj={from:from,to:to,text:change.text,removed:change.removed,origin:change.origin};if(changeHandler){signalLater(cm,"change",cm,obj)}if(changesHandler){(cm.curOp.changeObjs||(cm.curOp.changeObjs=[])).push(obj)}}cm.display.selForContextMenu=null}function replaceRange(doc,code,from,to,origin){var assign;if(!to){to=from}if(cmp(to,from)<0){assign=[to,from],from=assign[0],to=assign[1]}if(typeof code=="string"){code=doc.splitLines(code)}makeChange(doc,{from:from,to:to,text:code,origin:origin})}function rebaseHistSelSingle(pos,from,to,diff){if(to<pos.line){pos.line+=diff}else if(from<pos.line){pos.line=from;pos.ch=0}}function rebaseHistArray(array,from,to,diff){for(var i=0;i<array.length;++i){var sub=array[i],ok=true;if(sub.ranges){if(!sub.copied){sub=array[i]=sub.deepCopy();sub.copied=true}for(var j=0;j<sub.ranges.length;j++){rebaseHistSelSingle(sub.ranges[j].anchor,from,to,diff);rebaseHistSelSingle(sub.ranges[j].head,from,to,diff)}continue}for(var j$1=0;j$1<sub.changes.length;++j$1){var cur=sub.changes[j$1];if(to<cur.from.line){cur.from=Pos(cur.from.line+diff,cur.from.ch);cur.to=Pos(cur.to.line+diff,cur.to.ch)}else if(from<=cur.to.line){ok=false;break}}if(!ok){array.splice(0,i+1);i=0}}}function rebaseHist(hist,change){var from=change.from.line,to=change.to.line,diff=change.text.length-(to-from)-1;rebaseHistArray(hist.done,from,to,diff);rebaseHistArray(hist.undone,from,to,diff)}function changeLine(doc,handle,changeType,op){var no=handle,line=handle;if(typeof handle=="number"){line=getLine(doc,clipLine(doc,handle))}else{no=lineNo(handle)}if(no==null){return null}if(op(line,no)&&doc.cm){regLineChange(doc.cm,no,changeType)}return line}function LeafChunk(lines){this.lines=lines;this.parent=null;var height=0;for(var i=0;i<lines.length;++i){lines[i].parent=this;height+=lines[i].height}this.height=height}LeafChunk.prototype={chunkSize:function(){return this.lines.length},removeInner:function(at,n){for(var i=at,e=at+n;i<e;++i){var line=this.lines[i];this.height-=line.height;cleanUpLine(line);signalLater(line,"delete")}this.lines.splice(at,n)},collapse:function(lines){lines.push.apply(lines,this.lines)},insertInner:function(at,lines,height){this.height+=height;this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at));for(var i=0;i<lines.length;++i){lines[i].parent=this}},iterN:function(at,n,op){for(var e=at+n;at<e;++at){if(op(this.lines[at])){return true}}}};function BranchChunk(children){this.children=children;var size=0,height=0;for(var i=0;i<children.length;++i){var ch=children[i];size+=ch.chunkSize();height+=ch.height;ch.parent=this}this.size=size;this.height=height;this.parent=null}BranchChunk.prototype={chunkSize:function(){return this.size},removeInner:function(at,n){this.size-=n;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;child.removeInner(at,rm);this.height-=oldHeight-child.height;if(sz==rm){this.children.splice(i--,1);child.parent=null}if((n-=rm)==0){break}at=0}else{at-=sz}}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof LeafChunk))){var lines=[];this.collapse(lines);this.children=[new LeafChunk(lines)];this.children[0].parent=this}},collapse:function(lines){for(var i=0;i<this.children.length;++i){this.children[i].collapse(lines)}},insertInner:function(at,lines,height){this.size+=lines.length;this.height+=height;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<=sz){child.insertInner(at,lines,height);if(child.lines&&child.lines.length>50){var remaining=child.lines.length%25+25;for(var pos=remaining;pos<child.lines.length;){var leaf=new LeafChunk(child.lines.slice(pos,pos+=25));child.height-=leaf.height;this.children.splice(++i,0,leaf);leaf.parent=this}child.lines=child.lines.slice(0,remaining);this.maybeSpill()}break}at-=sz}},maybeSpill:function(){if(this.children.length<=10){return}var me=this;do{var spilled=me.children.splice(me.children.length-5,5);var sibling=new BranchChunk(spilled);if(!me.parent){var copy=new BranchChunk(me.children);copy.parent=me;me.children=[copy,sibling];me=copy}else{me.size-=sibling.size;me.height-=sibling.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,sibling)}sibling.parent=me.parent}while(me.children.length>10);me.parent.maybeSpill()},iterN:function(at,n,op){for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(child.iterN(at,used,op)){return true}if((n-=used)==0){break}at=0}else{at-=sz}}}};var LineWidget=function(doc,node,options){if(options){for(var opt in options){if(options.hasOwnProperty(opt)){this[opt]=options[opt]}}}this.doc=doc;this.node=node};LineWidget.prototype.clear=function(){var cm=this.doc.cm,ws=this.line.widgets,line=this.line,no=lineNo(line);if(no==null||!ws){return}for(var i=0;i<ws.length;++i){if(ws[i]==this){ws.splice(i--,1)}}if(!ws.length){line.widgets=null}var height=widgetHeight(this);updateLineHeight(line,Math.max(0,line.height-height));if(cm){runInOp(cm,function(){adjustScrollWhenAboveVisible(cm,line,-height);regLineChange(cm,no,"widget")});signalLater(cm,"lineWidgetCleared",cm,this,no)}};LineWidget.prototype.changed=function(){var this$1=this;var oldH=this.height,cm=this.doc.cm,line=this.line;this.height=null;var diff=widgetHeight(this)-oldH;if(!diff){return}if(!lineIsHidden(this.doc,line)){updateLineHeight(line,line.height+diff)}if(cm){runInOp(cm,function(){cm.curOp.forceUpdate=true;adjustScrollWhenAboveVisible(cm,line,diff);signalLater(cm,"lineWidgetChanged",cm,this$1,lineNo(line))})}};eventMixin(LineWidget);function adjustScrollWhenAboveVisible(cm,line,diff){if(heightAtLine(line)<(cm.curOp&&cm.curOp.scrollTop||cm.doc.scrollTop)){addToScrollTop(cm,diff)}}function addLineWidget(doc,handle,node,options){var widget=new LineWidget(doc,node,options);var cm=doc.cm;if(cm&&widget.noHScroll){cm.display.alignWidgets=true}changeLine(doc,handle,"widget",function(line){var widgets=line.widgets||(line.widgets=[]);if(widget.insertAt==null){widgets.push(widget)}else{widgets.splice(Math.min(widgets.length,Math.max(0,widget.insertAt)),0,widget)}widget.line=line;if(cm&&!lineIsHidden(doc,line)){var aboveVisible=heightAtLine(line)<doc.scrollTop;updateLineHeight(line,line.height+widgetHeight(widget));if(aboveVisible){addToScrollTop(cm,widget.height)}cm.curOp.forceUpdate=true}return true});if(cm){signalLater(cm,"lineWidgetAdded",cm,widget,typeof handle=="number"?handle:lineNo(handle))}return widget}var nextMarkerId=0;var TextMarker=function(doc,type){this.lines=[];this.type=type;this.doc=doc;this.id=++nextMarkerId};TextMarker.prototype.clear=function(){if(this.explicitlyCleared){return}var cm=this.doc.cm,withOp=cm&&!cm.curOp;if(withOp){startOperation(cm)}if(hasHandler(this,"clear")){var found=this.find();if(found){signalLater(this,"clear",found.from,found.to)}}var min=null,max=null;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(cm&&!this.collapsed){regLineChange(cm,lineNo(line),"text")}else if(cm){if(span.to!=null){max=lineNo(line)}if(span.from!=null){min=lineNo(line)}}line.markedSpans=removeMarkedSpan(line.markedSpans,span);if(span.from==null&&this.collapsed&&!lineIsHidden(this.doc,line)&&cm){updateLineHeight(line,textHeight(cm.display))}}if(cm&&this.collapsed&&!cm.options.lineWrapping){for(var i$1=0;i$1<this.lines.length;++i$1){var visual=visualLine(this.lines[i$1]),len=lineLength(visual);if(len>cm.display.maxLineLength){cm.display.maxLine=visual;cm.display.maxLineLength=len;cm.display.maxLineChanged=true}}}if(min!=null&&cm&&this.collapsed){regChange(cm,min,max+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(cm){reCheckSelection(cm.doc)}}if(cm){signalLater(cm,"markerCleared",cm,this,min,max)}if(withOp){endOperation(cm)}if(this.parent){this.parent.clear()}};TextMarker.prototype.find=function(side,lineObj){if(side==null&&this.type=="bookmark"){side=1}var from,to;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(span.from!=null){from=Pos(lineObj?line:lineNo(line),span.from);if(side==-1){return from}}if(span.to!=null){to=Pos(lineObj?line:lineNo(line),span.to);if(side==1){return to}}}return from&&{from:from,to:to}};TextMarker.prototype.changed=function(){var this$1=this;var pos=this.find(-1,true),widget=this,cm=this.doc.cm;if(!pos||!cm){return}runInOp(cm,function(){var line=pos.line,lineN=lineNo(pos.line);var view=findViewForLine(cm,lineN);if(view){clearLineMeasurementCacheFor(view);cm.curOp.selectionChanged=cm.curOp.forceUpdate=true}cm.curOp.updateMaxLine=true;if(!lineIsHidden(widget.doc,line)&&widget.height!=null){var oldHeight=widget.height;widget.height=null;var dHeight=widgetHeight(widget)-oldHeight;if(dHeight){updateLineHeight(line,line.height+dHeight)}}signalLater(cm,"markerChanged",cm,this$1)})};TextMarker.prototype.attachLine=function(line){if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;if(!op.maybeHiddenMarkers||indexOf(op.maybeHiddenMarkers,this)==-1){(op.maybeUnhiddenMarkers||(op.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(line)};TextMarker.prototype.detachLine=function(line){this.lines.splice(indexOf(this.lines,line),1);if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;(op.maybeHiddenMarkers||(op.maybeHiddenMarkers=[])).push(this)}};eventMixin(TextMarker);function markText(doc,from,to,options,type){if(options&&options.shared){return markTextShared(doc,from,to,options,type)}if(doc.cm&&!doc.cm.curOp){return operation(doc.cm,markText)(doc,from,to,options,type)}var marker=new TextMarker(doc,type),diff=cmp(from,to);if(options){copyObj(options,marker,false)}if(diff>0||diff==0&&marker.clearWhenEmpty!==false){return marker}if(marker.replacedWith){marker.collapsed=true;marker.widgetNode=eltP("span",[marker.replacedWith],"CodeMirror-widget");if(!options.handleMouseEvents){marker.widgetNode.setAttribute("cm-ignore-events","true")}if(options.insertLeft){marker.widgetNode.insertLeft=true}}if(marker.collapsed){if(conflictingCollapsedRange(doc,from.line,from,to,marker)||from.line!=to.line&&conflictingCollapsedRange(doc,to.line,from,to,marker)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}seeCollapsedSpans()}if(marker.addToHistory){addChangeToHistory(doc,{from:from,to:to,origin:"markText"},doc.sel,NaN)}var curLine=from.line,cm=doc.cm,updateMaxLine;doc.iter(curLine,to.line+1,function(line){if(cm&&marker.collapsed&&!cm.options.lineWrapping&&visualLine(line)==cm.display.maxLine){updateMaxLine=true}if(marker.collapsed&&curLine!=from.line){updateLineHeight(line,0)}addMarkedSpan(line,new MarkedSpan(marker,curLine==from.line?from.ch:null,curLine==to.line?to.ch:null));++curLine});if(marker.collapsed){doc.iter(from.line,to.line+1,function(line){if(lineIsHidden(doc,line)){updateLineHeight(line,0)}})}if(marker.clearOnEnter){on(marker,"beforeCursorEnter",function(){return marker.clear()})}if(marker.readOnly){seeReadOnlySpans();if(doc.history.done.length||doc.history.undone.length){doc.clearHistory()}}if(marker.collapsed){marker.id=++nextMarkerId;marker.atomic=true}if(cm){if(updateMaxLine){cm.curOp.updateMaxLine=true}if(marker.collapsed){regChange(cm,from.line,to.line+1)}else if(marker.className||marker.startStyle||marker.endStyle||marker.css||marker.attributes||marker.title){for(var i=from.line;i<=to.line;i++){regLineChange(cm,i,"text")}}if(marker.atomic){reCheckSelection(cm.doc)}signalLater(cm,"markerAdded",cm,marker)}return marker}var SharedTextMarker=function(markers,primary){this.markers=markers;this.primary=primary;for(var i=0;i<markers.length;++i){markers[i].parent=this}};SharedTextMarker.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var i=0;i<this.markers.length;++i){this.markers[i].clear()}signalLater(this,"clear")};SharedTextMarker.prototype.find=function(side,lineObj){return this.primary.find(side,lineObj)};eventMixin(SharedTextMarker);function markTextShared(doc,from,to,options,type){options=copyObj(options);options.shared=false;var markers=[markText(doc,from,to,options,type)],primary=markers[0];var widget=options.widgetNode;linkedDocs(doc,function(doc){if(widget){options.widgetNode=widget.cloneNode(true)}markers.push(markText(doc,clipPos(doc,from),clipPos(doc,to),options,type));for(var i=0;i<doc.linked.length;++i){if(doc.linked[i].isParent){return}}primary=lst(markers)});return new SharedTextMarker(markers,primary)}function findSharedMarkers(doc){return doc.findMarks(Pos(doc.first,0),doc.clipPos(Pos(doc.lastLine())),function(m){return m.parent})}function copySharedMarkers(doc,markers){for(var i=0;i<markers.length;i++){var marker=markers[i],pos=marker.find();var mFrom=doc.clipPos(pos.from),mTo=doc.clipPos(pos.to);if(cmp(mFrom,mTo)){var subMark=markText(doc,mFrom,mTo,marker.primary,marker.primary.type);marker.markers.push(subMark);subMark.parent=marker}}}function detachSharedMarkers(markers){var loop=function(i){var marker=markers[i],linked=[marker.primary.doc];linkedDocs(marker.primary.doc,function(d){return linked.push(d)});for(var j=0;j<marker.markers.length;j++){var subMarker=marker.markers[j];if(indexOf(linked,subMarker.doc)==-1){subMarker.parent=null;marker.markers.splice(j--,1)}}};for(var i=0;i<markers.length;i++)loop(i)}var nextDocId=0;var Doc=function(text,mode,firstLine,lineSep,direction){if(!(this instanceof Doc)){return new Doc(text,mode,firstLine,lineSep,direction)}if(firstLine==null){firstLine=0}BranchChunk.call(this,[new LeafChunk([new Line("",null)])]);this.first=firstLine;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=firstLine;var start=Pos(firstLine,0);this.sel=simpleSelection(start);this.history=new History(null);this.id=++nextDocId;this.modeOption=mode;this.lineSep=lineSep;this.direction=direction=="rtl"?"rtl":"ltr";this.extend=false;if(typeof text=="string"){text=this.splitLines(text)}updateDoc(this,{from:start,to:start,text:text});setSelection(this,simpleSelection(start),sel_dontScroll)};Doc.prototype=createObj(BranchChunk.prototype,{constructor:Doc,iter:function(from,to,op){if(op){this.iterN(from-this.first,to-from,op)}else{this.iterN(this.first,this.first+this.size,from)}},insert:function(at,lines){var height=0;for(var i=0;i<lines.length;++i){height+=lines[i].height}this.insertInner(at-this.first,lines,height)},remove:function(at,n){this.removeInner(at-this.first,n)},getValue:function(lineSep){var lines=getLines(this,this.first,this.first+this.size);if(lineSep===false){return lines}return lines.join(lineSep||this.lineSeparator())},setValue:docMethodOp(function(code){var top=Pos(this.first,0),last=this.first+this.size-1;makeChange(this,{from:top,to:Pos(last,getLine(this,last).text.length),text:this.splitLines(code),origin:"setValue",full:true},true);if(this.cm){scrollToCoords(this.cm,0,0)}setSelection(this,simpleSelection(top),sel_dontScroll)}),replaceRange:function(code,from,to,origin){from=clipPos(this,from);to=to?clipPos(this,to):from;replaceRange(this,code,from,to,origin)},getRange:function(from,to,lineSep){var lines=getBetween(this,clipPos(this,from),clipPos(this,to));if(lineSep===false){return lines}return lines.join(lineSep||this.lineSeparator())},getLine:function(line){var l=this.getLineHandle(line);return l&&l.text},getLineHandle:function(line){if(isLine(this,line)){return getLine(this,line)}},getLineNumber:function(line){return lineNo(line)},getLineHandleVisualStart:function(line){if(typeof line=="number"){line=getLine(this,line)}return visualLine(line)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(pos){return clipPos(this,pos)},getCursor:function(start){var range=this.sel.primary(),pos;if(start==null||start=="head"){pos=range.head}else if(start=="anchor"){pos=range.anchor}else if(start=="end"||start=="to"||start===false){pos=range.to()}else{pos=range.from()}return pos},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:docMethodOp(function(line,ch,options){setSimpleSelection(this,clipPos(this,typeof line=="number"?Pos(line,ch||0):line),null,options)}),setSelection:docMethodOp(function(anchor,head,options){setSimpleSelection(this,clipPos(this,anchor),clipPos(this,head||anchor),options)}),extendSelection:docMethodOp(function(head,other,options){extendSelection(this,clipPos(this,head),other&&clipPos(this,other),options)}),extendSelections:docMethodOp(function(heads,options){extendSelections(this,clipPosArray(this,heads),options)}),extendSelectionsBy:docMethodOp(function(f,options){var heads=map(this.sel.ranges,f);extendSelections(this,clipPosArray(this,heads),options)}),setSelections:docMethodOp(function(ranges,primary,options){if(!ranges.length){return}var out=[];for(var i=0;i<ranges.length;i++){out[i]=new Range(clipPos(this,ranges[i].anchor),clipPos(this,ranges[i].head||ranges[i].anchor))}if(primary==null){primary=Math.min(ranges.length-1,this.sel.primIndex)}setSelection(this,normalizeSelection(this.cm,out,primary),options)}),addSelection:docMethodOp(function(anchor,head,options){var ranges=this.sel.ranges.slice(0);ranges.push(new Range(clipPos(this,anchor),clipPos(this,head||anchor)));setSelection(this,normalizeSelection(this.cm,ranges,ranges.length-1),options)}),getSelection:function(lineSep){var ranges=this.sel.ranges,lines;for(var i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());lines=lines?lines.concat(sel):sel}if(lineSep===false){return lines}else{return lines.join(lineSep||this.lineSeparator())}},getSelections:function(lineSep){var parts=[],ranges=this.sel.ranges;for(var i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());if(lineSep!==false){sel=sel.join(lineSep||this.lineSeparator())}parts[i]=sel}return parts},replaceSelection:function(code,collapse,origin){var dup=[];for(var i=0;i<this.sel.ranges.length;i++){dup[i]=code}this.replaceSelections(dup,collapse,origin||"+input")},replaceSelections:docMethodOp(function(code,collapse,origin){var changes=[],sel=this.sel;for(var i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];changes[i]={from:range.from(),to:range.to(),text:this.splitLines(code[i]),origin:origin}}var newSel=collapse&&collapse!="end"&&computeReplacedSel(this,changes,collapse);for(var i$1=changes.length-1;i$1>=0;i$1--){makeChange(this,changes[i$1])}if(newSel){setSelectionReplaceHistory(this,newSel)}else if(this.cm){ensureCursorVisible(this.cm)}}),undo:docMethodOp(function(){makeChangeFromHistory(this,"undo")}),redo:docMethodOp(function(){makeChangeFromHistory(this,"redo")}),undoSelection:docMethodOp(function(){makeChangeFromHistory(this,"undo",true)}),redoSelection:docMethodOp(function(){makeChangeFromHistory(this,"redo",true)}),setExtending:function(val){this.extend=val},getExtending:function(){return this.extend},historySize:function(){var hist=this.history,done=0,undone=0;for(var i=0;i<hist.done.length;i++){if(!hist.done[i].ranges){++done}}for(var i$1=0;i$1<hist.undone.length;i$1++){if(!hist.undone[i$1].ranges){++undone}}return{undo:done,redo:undone}},clearHistory:function(){var this$1=this;this.history=new History(this.history);linkedDocs(this,function(doc){return doc.history=this$1.history},true)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(forceSplit){if(forceSplit){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(gen){return this.history.generation==(gen||this.cleanGeneration)},getHistory:function(){return{done:copyHistoryArray(this.history.done),undone:copyHistoryArray(this.history.undone)}},setHistory:function(histData){var hist=this.history=new History(this.history);hist.done=copyHistoryArray(histData.done.slice(0),null,true);hist.undone=copyHistoryArray(histData.undone.slice(0),null,true)},setGutterMarker:docMethodOp(function(line,gutterID,value){return changeLine(this,line,"gutter",function(line){var markers=line.gutterMarkers||(line.gutterMarkers={});markers[gutterID]=value;if(!value&&isEmpty(markers)){line.gutterMarkers=null}return true})}),clearGutter:docMethodOp(function(gutterID){var this$1=this;this.iter(function(line){if(line.gutterMarkers&&line.gutterMarkers[gutterID]){changeLine(this$1,line,"gutter",function(){line.gutterMarkers[gutterID]=null;if(isEmpty(line.gutterMarkers)){line.gutterMarkers=null}return true})}})}),lineInfo:function(line){var n;if(typeof line=="number"){if(!isLine(this,line)){return null}n=line;line=getLine(this,line);if(!line){return null}}else{n=lineNo(line);if(n==null){return null}}return{line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets}},addLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";if(!line[prop]){line[prop]=cls}else if(classTest(cls).test(line[prop])){return false}else{line[prop]+=" "+cls}return true})}),removeLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";var cur=line[prop];if(!cur){return false}else if(cls==null){line[prop]=null}else{var found=cur.match(classTest(cls));if(!found){return false}var end=found.index+found[0].length;line[prop]=cur.slice(0,found.index)+(!found.index||end==cur.length?"":" ")+cur.slice(end)||null}return true})}),addLineWidget:docMethodOp(function(handle,node,options){return addLineWidget(this,handle,node,options)}),removeLineWidget:function(widget){widget.clear()},markText:function(from,to,options){return markText(this,clipPos(this,from),clipPos(this,to),options,options&&options.type||"range")},setBookmark:function(pos,options){var realOpts={replacedWith:options&&(options.nodeType==null?options.widget:options),insertLeft:options&&options.insertLeft,clearWhenEmpty:false,shared:options&&options.shared,handleMouseEvents:options&&options.handleMouseEvents};pos=clipPos(this,pos);return markText(this,pos,pos,realOpts,"bookmark")},findMarksAt:function(pos){pos=clipPos(this,pos);var markers=[],spans=getLine(this,pos.line).markedSpans;if(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if((span.from==null||span.from<=pos.ch)&&(span.to==null||span.to>=pos.ch)){markers.push(span.marker.parent||span.marker)}}}return markers},findMarks:function(from,to,filter){from=clipPos(this,from);to=clipPos(this,to);var found=[],lineNo=from.line;this.iter(from.line,to.line+1,function(line){var spans=line.markedSpans;if(spans){for(var i=0;i<spans.length;i++){var span=spans[i];if(!(span.to!=null&&lineNo==from.line&&from.ch>=span.to||span.from==null&&lineNo!=from.line||span.from!=null&&lineNo==to.line&&span.from>=to.ch)&&(!filter||filter(span.marker))){found.push(span.marker.parent||span.marker)}}}++lineNo});return found},getAllMarks:function(){var markers=[];this.iter(function(line){var sps=line.markedSpans;if(sps){for(var i=0;i<sps.length;++i){if(sps[i].from!=null){markers.push(sps[i].marker)}}}});return markers},posFromIndex:function(off){var ch,lineNo=this.first,sepSize=this.lineSeparator().length;this.iter(function(line){var sz=line.text.length+sepSize;if(sz>off){ch=off;return true}off-=sz;++lineNo});return clipPos(this,Pos(lineNo,ch))},indexFromPos:function(coords){coords=clipPos(this,coords);var index=coords.ch;if(coords.line<this.first||coords.ch<0){return 0}var sepSize=this.lineSeparator().length;this.iter(this.first,coords.line,function(line){index+=line.text.length+sepSize});return index},copy:function(copyHistory){var doc=new Doc(getLines(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);doc.scrollTop=this.scrollTop;doc.scrollLeft=this.scrollLeft;doc.sel=this.sel;doc.extend=false;if(copyHistory){doc.history.undoDepth=this.history.undoDepth;doc.setHistory(this.getHistory())}return doc},linkedDoc:function(options){if(!options){options={}}var from=this.first,to=this.first+this.size;if(options.from!=null&&options.from>from){from=options.from}if(options.to!=null&&options.to<to){to=options.to}var copy=new Doc(getLines(this,from,to),options.mode||this.modeOption,from,this.lineSep,this.direction);if(options.sharedHist){copy.history=this.history}(this.linked||(this.linked=[])).push({doc:copy,sharedHist:options.sharedHist});copy.linked=[{doc:this,isParent:true,sharedHist:options.sharedHist}];copySharedMarkers(copy,findSharedMarkers(this));return copy},unlinkDoc:function(other){if(other instanceof CodeMirror){other=other.doc}if(this.linked){for(var i=0;i<this.linked.length;++i){var link=this.linked[i];if(link.doc!=other){continue}this.linked.splice(i,1);other.unlinkDoc(this);detachSharedMarkers(findSharedMarkers(this));break}}if(other.history==this.history){var splitIds=[other.id];linkedDocs(other,function(doc){return splitIds.push(doc.id)},true);other.history=new History(null);other.history.done=copyHistoryArray(this.history.done,splitIds);other.history.undone=copyHistoryArray(this.history.undone,splitIds)}},iterLinkedDocs:function(f){linkedDocs(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(str){if(this.lineSep){return str.split(this.lineSep)}return splitLinesAuto(str)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:docMethodOp(function(dir){if(dir!="rtl"){dir="ltr"}if(dir==this.direction){return}this.direction=dir;this.iter(function(line){return line.order=null});if(this.cm){directionChanged(this.cm)}})});Doc.prototype.eachLine=Doc.prototype.iter;var lastDrop=0;function onDrop(e){var cm=this;clearDragCursor(cm);if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e)){return}e_preventDefault(e);if(ie){lastDrop=+new Date}var pos=posFromMouse(cm,e,true),files=e.dataTransfer.files;if(!pos||cm.isReadOnly()){return}if(files&&files.length&&window.FileReader&&window.File){var n=files.length,text=Array(n),read=0;var markAsReadAndPasteIfAllFilesAreRead=function(){if(++read==n){operation(cm,function(){pos=clipPos(cm.doc,pos);var change={from:pos,to:pos,text:cm.doc.splitLines(text.filter(function(t){return t!=null}).join(cm.doc.lineSeparator())),origin:"paste"};makeChange(cm.doc,change);setSelectionReplaceHistory(cm.doc,simpleSelection(clipPos(cm.doc,pos),clipPos(cm.doc,changeEnd(change))))})()}};var readTextFromFile=function(file,i){if(cm.options.allowDropFileTypes&&indexOf(cm.options.allowDropFileTypes,file.type)==-1){markAsReadAndPasteIfAllFilesAreRead();return}var reader=new FileReader;reader.onerror=function(){return markAsReadAndPasteIfAllFilesAreRead()};reader.onload=function(){var content=reader.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(content)){markAsReadAndPasteIfAllFilesAreRead();return}text[i]=content;markAsReadAndPasteIfAllFilesAreRead()};reader.readAsText(file)};for(var i=0;i<files.length;i++){readTextFromFile(files[i],i)}}else{if(cm.state.draggingText&&cm.doc.sel.contains(pos)>-1){cm.state.draggingText(e);setTimeout(function(){return cm.display.input.focus()},20);return}try{var text$1=e.dataTransfer.getData("Text");if(text$1){var selected;if(cm.state.draggingText&&!cm.state.draggingText.copy){selected=cm.listSelections()}setSelectionNoUndo(cm.doc,simpleSelection(pos,pos));if(selected){for(var i$1=0;i$1<selected.length;++i$1){replaceRange(cm.doc,"",selected[i$1].anchor,selected[i$1].head,"drag")}}cm.replaceSelection(text$1,"around","paste");cm.display.input.focus()}}catch(e$1){}}}function onDragStart(cm,e){if(ie&&(!cm.state.draggingText||+new Date-lastDrop<100)){e_stop(e);return}if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e)){return}e.dataTransfer.setData("Text",cm.getSelection());e.dataTransfer.effectAllowed="copyMove";if(e.dataTransfer.setDragImage&&!safari){var img=elt("img",null,null,"position: fixed; left: 0; top: 0;");img.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(presto){img.width=img.height=1;cm.display.wrapper.appendChild(img);img._top=img.offsetTop}e.dataTransfer.setDragImage(img,0,0);if(presto){img.parentNode.removeChild(img)}}}function onDragOver(cm,e){var pos=posFromMouse(cm,e);if(!pos){return}var frag=document.createDocumentFragment();drawSelectionCursor(cm,pos,frag);if(!cm.display.dragCursor){cm.display.dragCursor=elt("div",null,"CodeMirror-cursors CodeMirror-dragcursors");cm.display.lineSpace.insertBefore(cm.display.dragCursor,cm.display.cursorDiv)}removeChildrenAndAdd(cm.display.dragCursor,frag)}function clearDragCursor(cm){if(cm.display.dragCursor){cm.display.lineSpace.removeChild(cm.display.dragCursor);cm.display.dragCursor=null}}function forEachCodeMirror(f){if(!document.getElementsByClassName){return}var byClass=document.getElementsByClassName("CodeMirror"),editors=[];for(var i=0;i<byClass.length;i++){var cm=byClass[i].CodeMirror;if(cm){editors.push(cm)}}if(editors.length){editors[0].operation(function(){for(var i=0;i<editors.length;i++){f(editors[i])}})}}var globalsRegistered=false;function ensureGlobalHandlers(){if(globalsRegistered){return}registerGlobalHandlers();globalsRegistered=true}function registerGlobalHandlers(){var resizeTimer;on(window,"resize",function(){if(resizeTimer==null){resizeTimer=setTimeout(function(){resizeTimer=null;forEachCodeMirror(onResize)},100)}});on(window,"blur",function(){return forEachCodeMirror(onBlur)})}function onResize(cm){var d=cm.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.scrollbarsClipped=false;cm.setSize()}var keyNames={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var i=0;i<10;i++){keyNames[i+48]=keyNames[i+96]=String(i)}for(var i$1=65;i$1<=90;i$1++){keyNames[i$1]=String.fromCharCode(i$1)}for(var i$2=1;i$2<=12;i$2++){keyNames[i$2+111]=keyNames[i$2+63235]="F"+i$2}var keyMap={};keyMap.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};keyMap.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};keyMap.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};keyMap.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};keyMap["default"]=mac?keyMap.macDefault:keyMap.pcDefault;function normalizeKeyName(name){var parts=name.split(/-(?!$)/);name=parts[parts.length-1];var alt,ctrl,shift,cmd;for(var i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod)){cmd=true}else if(/^a(lt)?$/i.test(mod)){alt=true}else if(/^(c|ctrl|control)$/i.test(mod)){ctrl=true}else if(/^s(hift)?$/i.test(mod)){shift=true}else{throw new Error("Unrecognized modifier name: "+mod)}}if(alt){name="Alt-"+name}if(ctrl){name="Ctrl-"+name}if(cmd){name="Cmd-"+name}if(shift){name="Shift-"+name}return name}function normalizeKeyMap(keymap){var copy={};for(var keyname in keymap){if(keymap.hasOwnProperty(keyname)){var value=keymap[keyname];if(/^(name|fallthrough|(de|at)tach)$/.test(keyname)){continue}if(value=="..."){delete keymap[keyname];continue}var keys=map(keyname.split(" "),normalizeKeyName);for(var i=0;i<keys.length;i++){var val=void 0,name=void 0;if(i==keys.length-1){name=keys.join(" ");val=value}else{name=keys.slice(0,i+1).join(" ");val="..."}var prev=copy[name];if(!prev){copy[name]=val}else if(prev!=val){throw new Error("Inconsistent bindings for "+name)}}delete keymap[keyname]}}for(var prop in copy){keymap[prop]=copy[prop]}return keymap}function lookupKey(key,map,handle,context){map=getKeyMap(map);var found=map.call?map.call(key,context):map[key];if(found===false){return"nothing"}if(found==="..."){return"multi"}if(found!=null&&handle(found)){return"handled"}if(map.fallthrough){if(Object.prototype.toString.call(map.fallthrough)!="[object Array]"){return lookupKey(key,map.fallthrough,handle,context)}for(var i=0;i<map.fallthrough.length;i++){var result=lookupKey(key,map.fallthrough[i],handle,context);if(result){return result}}}}function isModifierKey(value){var name=typeof value=="string"?value:keyNames[value.keyCode];return name=="Ctrl"||name=="Alt"||name=="Shift"||name=="Mod"}function addModifierNames(name,event,noShift){var base=name;if(event.altKey&&base!="Alt"){name="Alt-"+name}if((flipCtrlCmd?event.metaKey:event.ctrlKey)&&base!="Ctrl"){name="Ctrl-"+name}if((flipCtrlCmd?event.ctrlKey:event.metaKey)&&base!="Mod"){name="Cmd-"+name}if(!noShift&&event.shiftKey&&base!="Shift"){name="Shift-"+name}return name}function keyName(event,noShift){if(presto&&event.keyCode==34&&event["char"]){return false}var name=keyNames[event.keyCode];if(name==null||event.altGraphKey){return false}if(event.keyCode==3&&event.code){name=event.code}return addModifierNames(name,event,noShift)}function getKeyMap(val){return typeof val=="string"?keyMap[val]:val}function deleteNearSelection(cm,compute){var ranges=cm.doc.sel.ranges,kill=[];for(var i=0;i<ranges.length;i++){var toKill=compute(ranges[i]);while(kill.length&&cmp(toKill.from,lst(kill).to)<=0){var replaced=kill.pop();if(cmp(replaced.from,toKill.from)<0){toKill.from=replaced.from;break}}kill.push(toKill)}runInOp(cm,function(){for(var i=kill.length-1;i>=0;i--){replaceRange(cm.doc,"",kill[i].from,kill[i].to,"+delete")}ensureCursorVisible(cm)})}function moveCharLogically(line,ch,dir){var target=skipExtendingChars(line.text,ch+dir,dir);return target<0||target>line.text.length?null:target}function moveLogically(line,start,dir){var ch=moveCharLogically(line,start.ch,dir);return ch==null?null:new Pos(start.line,ch,dir<0?"after":"before")}function endOfLine(visually,cm,lineObj,lineNo,dir){if(visually){if(cm.doc.direction=="rtl"){dir=-dir}var order=getOrder(lineObj,cm.doc.direction);if(order){var part=dir<0?lst(order):order[0];var moveInStorageOrder=dir<0==(part.level==1);var sticky=moveInStorageOrder?"after":"before";var ch;if(part.level>0||cm.doc.direction=="rtl"){var prep=prepareMeasureForLine(cm,lineObj);ch=dir<0?lineObj.text.length-1:0;var targetTop=measureCharPrepared(cm,prep,ch).top;ch=findFirst(function(ch){return measureCharPrepared(cm,prep,ch).top==targetTop},dir<0==(part.level==1)?part.from:part.to-1,ch);if(sticky=="before"){ch=moveCharLogically(lineObj,ch,1)}}else{ch=dir<0?part.to:part.from}return new Pos(lineNo,ch,sticky)}}return new Pos(lineNo,dir<0?lineObj.text.length:0,dir<0?"before":"after")}function moveVisually(cm,line,start,dir){var bidi=getOrder(line,cm.doc.direction);if(!bidi){return moveLogically(line,start,dir)}if(start.ch>=line.text.length){start.ch=line.text.length;start.sticky="before"}else if(start.ch<=0){start.ch=0;start.sticky="after"}var partPos=getBidiPartAt(bidi,start.ch,start.sticky),part=bidi[partPos];if(cm.doc.direction=="ltr"&&part.level%2==0&&(dir>0?part.to>start.ch:part.from<start.ch)){return moveLogically(line,start,dir)}var mv=function(pos,dir){return moveCharLogically(line,pos instanceof Pos?pos.ch:pos,dir)};var prep;var getWrappedLineExtent=function(ch){if(!cm.options.lineWrapping){return{begin:0,end:line.text.length}}prep=prep||prepareMeasureForLine(cm,line);return wrappedLineExtentChar(cm,line,prep,ch)};var wrappedLineExtent=getWrappedLineExtent(start.sticky=="before"?mv(start,-1):start.ch);if(cm.doc.direction=="rtl"||part.level==1){var moveInStorageOrder=part.level==1==dir<0;var ch=mv(start,moveInStorageOrder?1:-1);if(ch!=null&&(!moveInStorageOrder?ch>=part.from&&ch>=wrappedLineExtent.begin:ch<=part.to&&ch<=wrappedLineExtent.end)){var sticky=moveInStorageOrder?"before":"after";return new Pos(start.line,ch,sticky)}}var searchInVisualLine=function(partPos,dir,wrappedLineExtent){var getRes=function(ch,moveInStorageOrder){return moveInStorageOrder?new Pos(start.line,mv(ch,1),"before"):new Pos(start.line,ch,"after")};for(;partPos>=0&&partPos<bidi.length;partPos+=dir){var part=bidi[partPos];var moveInStorageOrder=dir>0==(part.level!=1);var ch=moveInStorageOrder?wrappedLineExtent.begin:mv(wrappedLineExtent.end,-1);if(part.from<=ch&&ch<part.to){return getRes(ch,moveInStorageOrder)}ch=moveInStorageOrder?part.from:mv(part.to,-1);if(wrappedLineExtent.begin<=ch&&ch<wrappedLineExtent.end){return getRes(ch,moveInStorageOrder)}}};var res=searchInVisualLine(partPos+dir,dir,wrappedLineExtent);if(res){return res}var nextCh=dir>0?wrappedLineExtent.end:mv(wrappedLineExtent.begin,-1);if(nextCh!=null&&!(dir>0&&nextCh==line.text.length)){res=searchInVisualLine(dir>0?0:bidi.length-1,dir,getWrappedLineExtent(nextCh));if(res){return res}}return null}var commands={selectAll:selectAll,singleSelection:function(cm){return cm.setSelection(cm.getCursor("anchor"),cm.getCursor("head"),sel_dontScroll)},killLine:function(cm){return deleteNearSelection(cm,function(range){if(range.empty()){var len=getLine(cm.doc,range.head.line).text.length;if(range.head.ch==len&&range.head.line<cm.lastLine()){return{from:range.head,to:Pos(range.head.line+1,0)}}else{return{from:range.head,to:Pos(range.head.line,len)}}}else{return{from:range.from(),to:range.to()}}})},deleteLine:function(cm){return deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:clipPos(cm.doc,Pos(range.to().line+1,0))}})},delLineLeft:function(cm){return deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:range.from()}})},delWrappedLineLeft:function(cm){return deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var leftPos=cm.coordsChar({left:0,top:top},"div");return{from:leftPos,to:range.from()}})},delWrappedLineRight:function(cm){return deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var rightPos=cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div");return{from:range.from(),to:rightPos}})},undo:function(cm){return cm.undo()},redo:function(cm){return cm.redo()},undoSelection:function(cm){return cm.undoSelection()},redoSelection:function(cm){return cm.redoSelection()},goDocStart:function(cm){return cm.extendSelection(Pos(cm.firstLine(),0))},goDocEnd:function(cm){return cm.extendSelection(Pos(cm.lastLine()))},goLineStart:function(cm){return cm.extendSelectionsBy(function(range){return lineStart(cm,range.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(cm){return cm.extendSelectionsBy(function(range){return lineStartSmart(cm,range.head)},{origin:"+move",bias:1})},goLineEnd:function(cm){return cm.extendSelectionsBy(function(range){return lineEnd(cm,range.head.line)},{origin:"+move",bias:-1})},goLineRight:function(cm){return cm.extendSelectionsBy(function(range){var top=cm.cursorCoords(range.head,"div").top+5;return cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div")},sel_move)},goLineLeft:function(cm){return cm.extendSelectionsBy(function(range){var top=cm.cursorCoords(range.head,"div").top+5;return cm.coordsChar({left:0,top:top},"div")},sel_move)},goLineLeftSmart:function(cm){return cm.extendSelectionsBy(function(range){var top=cm.cursorCoords(range.head,"div").top+5;var pos=cm.coordsChar({left:0,top:top},"div");if(pos.ch<cm.getLine(pos.line).search(/\S/)){return lineStartSmart(cm,range.head)}return pos},sel_move)},goLineUp:function(cm){return cm.moveV(-1,"line")},goLineDown:function(cm){return cm.moveV(1,"line")},goPageUp:function(cm){return cm.moveV(-1,"page")},goPageDown:function(cm){return cm.moveV(1,"page")},goCharLeft:function(cm){return cm.moveH(-1,"char")},goCharRight:function(cm){return cm.moveH(1,"char")},goColumnLeft:function(cm){return cm.moveH(-1,"column")},goColumnRight:function(cm){return cm.moveH(1,"column")},goWordLeft:function(cm){return cm.moveH(-1,"word")},goGroupRight:function(cm){return cm.moveH(1,"group")},goGroupLeft:function(cm){return cm.moveH(-1,"group")},goWordRight:function(cm){return cm.moveH(1,"word")},delCharBefore:function(cm){return cm.deleteH(-1,"codepoint")},delCharAfter:function(cm){return cm.deleteH(1,"char")},delWordBefore:function(cm){return cm.deleteH(-1,"word")},delWordAfter:function(cm){return cm.deleteH(1,"word")},delGroupBefore:function(cm){return cm.deleteH(-1,"group")},delGroupAfter:function(cm){return cm.deleteH(1,"group")},indentAuto:function(cm){return cm.indentSelection("smart")},indentMore:function(cm){return cm.indentSelection("add")},indentLess:function(cm){return cm.indentSelection("subtract")},insertTab:function(cm){return cm.replaceSelection("\t")},insertSoftTab:function(cm){var spaces=[],ranges=cm.listSelections(),tabSize=cm.options.tabSize;for(var i=0;i<ranges.length;i++){var pos=ranges[i].from();var col=countColumn(cm.getLine(pos.line),pos.ch,tabSize);spaces.push(spaceStr(tabSize-col%tabSize))}cm.replaceSelections(spaces)},defaultTab:function(cm){if(cm.somethingSelected()){cm.indentSelection("add")}else{cm.execCommand("insertTab")}},transposeChars:function(cm){return runInOp(cm,function(){var ranges=cm.listSelections(),newSel=[];for(var i=0;i<ranges.length;i++){if(!ranges[i].empty()){continue}var cur=ranges[i].head,line=getLine(cm.doc,cur.line).text;if(line){if(cur.ch==line.length){cur=new Pos(cur.line,cur.ch-1)}if(cur.ch>0){cur=new Pos(cur.line,cur.ch+1);cm.replaceRange(line.charAt(cur.ch-1)+line.charAt(cur.ch-2),Pos(cur.line,cur.ch-2),cur,"+transpose")}else if(cur.line>cm.doc.first){var prev=getLine(cm.doc,cur.line-1).text;if(prev){cur=new Pos(cur.line,1);cm.replaceRange(line.charAt(0)+cm.doc.lineSeparator()+prev.charAt(prev.length-1),Pos(cur.line-1,prev.length-1),cur,"+transpose")}}}newSel.push(new Range(cur,cur))}cm.setSelections(newSel)})},newlineAndIndent:function(cm){return runInOp(cm,function(){var sels=cm.listSelections();for(var i=sels.length-1;i>=0;i--){cm.replaceRange(cm.doc.lineSeparator(),sels[i].anchor,sels[i].head,"+input")}sels=cm.listSelections();for(var i$1=0;i$1<sels.length;i$1++){cm.indentLine(sels[i$1].from().line,null,true)}ensureCursorVisible(cm)})},openLine:function(cm){return cm.replaceSelection("\n","start")},toggleOverwrite:function(cm){return cm.toggleOverwrite()}};function lineStart(cm,lineN){var line=getLine(cm.doc,lineN);var visual=visualLine(line);if(visual!=line){lineN=lineNo(visual)}return endOfLine(true,cm,visual,lineN,1)}function lineEnd(cm,lineN){var line=getLine(cm.doc,lineN);var visual=visualLineEnd(line);if(visual!=line){lineN=lineNo(visual)}return endOfLine(true,cm,line,lineN,-1)}function lineStartSmart(cm,pos){var start=lineStart(cm,pos.line);var line=getLine(cm.doc,start.line);var order=getOrder(line,cm.doc.direction);if(!order||order[0].level==0){var firstNonWS=Math.max(start.ch,line.text.search(/\S/));var inWS=pos.line==start.line&&pos.ch<=firstNonWS&&pos.ch;return Pos(start.line,inWS?0:firstNonWS,start.sticky)}return start}function doHandleBinding(cm,bound,dropShift){if(typeof bound=="string"){bound=commands[bound];if(!bound){return false}}cm.display.input.ensurePolled();var prevShift=cm.display.shift,done=false;try{if(cm.isReadOnly()){cm.state.suppressEdits=true}if(dropShift){cm.display.shift=false}done=bound(cm)!=Pass}finally{cm.display.shift=prevShift;cm.state.suppressEdits=false}return done}function lookupKeyForEditor(cm,name,handle){for(var i=0;i<cm.state.keyMaps.length;i++){var result=lookupKey(name,cm.state.keyMaps[i],handle,cm);if(result){return result}}return cm.options.extraKeys&&lookupKey(name,cm.options.extraKeys,handle,cm)||lookupKey(name,cm.options.keyMap,handle,cm)}var stopSeq=new Delayed;function dispatchKey(cm,name,e,handle){var seq=cm.state.keySeq;if(seq){if(isModifierKey(name)){return"handled"}if(/\'$/.test(name)){cm.state.keySeq=null}else{stopSeq.set(50,function(){if(cm.state.keySeq==seq){cm.state.keySeq=null;cm.display.input.reset()}})}if(dispatchKeyInner(cm,seq+" "+name,e,handle)){return true}}return dispatchKeyInner(cm,name,e,handle)}function dispatchKeyInner(cm,name,e,handle){var result=lookupKeyForEditor(cm,name,handle);if(result=="multi"){cm.state.keySeq=name}if(result=="handled"){signalLater(cm,"keyHandled",cm,name,e)}if(result=="handled"||result=="multi"){e_preventDefault(e);restartBlink(cm)}return!!result}function handleKeyBinding(cm,e){var name=keyName(e,true);if(!name){return false}if(e.shiftKey&&!cm.state.keySeq){return dispatchKey(cm,"Shift-"+name,e,function(b){return doHandleBinding(cm,b,true)})||dispatchKey(cm,name,e,function(b){if(typeof b=="string"?/^go[A-Z]/.test(b):b.motion){return doHandleBinding(cm,b)}})}else{return dispatchKey(cm,name,e,function(b){return doHandleBinding(cm,b)})}}function handleCharBinding(cm,e,ch){return dispatchKey(cm,"'"+ch+"'",e,function(b){return doHandleBinding(cm,b,true)})}var lastStoppedKey=null;function onKeyDown(e){var cm=this;if(e.target&&e.target!=cm.display.input.getField()){return}cm.curOp.focus=activeElt();if(signalDOMEvent(cm,e)){return}if(ie&&ie_version<11&&e.keyCode==27){e.returnValue=false}var code=e.keyCode;cm.display.shift=code==16||e.shiftKey;var handled=handleKeyBinding(cm,e);if(presto){lastStoppedKey=handled?code:null;if(!handled&&code==88&&!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey)){cm.replaceSelection("",null,"cut")}}if(gecko&&!mac&&!handled&&code==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand){document.execCommand("cut")}if(code==18&&!/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className)){showCrossHair(cm)}}function showCrossHair(cm){var lineDiv=cm.display.lineDiv;addClass(lineDiv,"CodeMirror-crosshair");function up(e){if(e.keyCode==18||!e.altKey){rmClass(lineDiv,"CodeMirror-crosshair");off(document,"keyup",up);off(document,"mouseover",up)}}on(document,"keyup",up);on(document,"mouseover",up)}function onKeyUp(e){if(e.keyCode==16){this.doc.sel.shift=false}signalDOMEvent(this,e)}function onKeyPress(e){var cm=this;if(e.target&&e.target!=cm.display.input.getField()){return}if(eventInWidget(cm.display,e)||signalDOMEvent(cm,e)||e.ctrlKey&&!e.altKey||mac&&e.metaKey){return}var keyCode=e.keyCode,charCode=e.charCode;if(presto&&keyCode==lastStoppedKey){lastStoppedKey=null;e_preventDefault(e);return}if(presto&&(!e.which||e.which<10)&&handleKeyBinding(cm,e)){return}var ch=String.fromCharCode(charCode==null?keyCode:charCode);if(ch=="\b"){return}if(handleCharBinding(cm,e,ch)){return}cm.display.input.onKeyPress(e)}var DOUBLECLICK_DELAY=400;var PastClick=function(time,pos,button){this.time=time;this.pos=pos;this.button=button};PastClick.prototype.compare=function(time,pos,button){return this.time+DOUBLECLICK_DELAY>time&&cmp(pos,this.pos)==0&&button==this.button};var lastClick,lastDoubleClick;function clickRepeat(pos,button){var now=+new Date;if(lastDoubleClick&&lastDoubleClick.compare(now,pos,button)){lastClick=lastDoubleClick=null;return"triple"}else if(lastClick&&lastClick.compare(now,pos,button)){lastDoubleClick=new PastClick(now,pos,button);lastClick=null;return"double"}else{lastClick=new PastClick(now,pos,button);lastDoubleClick=null;return"single"}}function onMouseDown(e){var cm=this,display=cm.display;if(signalDOMEvent(cm,e)||display.activeTouch&&display.input.supportsTouch()){return}display.input.ensurePolled();display.shift=e.shiftKey;if(eventInWidget(display,e)){if(!webkit){display.scroller.draggable=false;setTimeout(function(){return display.scroller.draggable=true},100)}return}if(clickInGutter(cm,e)){return}var pos=posFromMouse(cm,e),button=e_button(e),repeat=pos?clickRepeat(pos,button):"single";window.focus();if(button==1&&cm.state.selectingText){cm.state.selectingText(e)}if(pos&&handleMappedButton(cm,button,pos,repeat,e)){return}if(button==1){if(pos){leftButtonDown(cm,pos,repeat,e)}else if(e_target(e)==display.scroller){e_preventDefault(e)}}else if(button==2){if(pos){extendSelection(cm.doc,pos)}setTimeout(function(){return display.input.focus()},20)}else if(button==3){if(captureRightClick){cm.display.input.onContextMenu(e)}else{delayBlurEvent(cm)}}}function handleMappedButton(cm,button,pos,repeat,event){var name="Click";if(repeat=="double"){name="Double"+name}else if(repeat=="triple"){name="Triple"+name}name=(button==1?"Left":button==2?"Middle":"Right")+name;return dispatchKey(cm,addModifierNames(name,event),event,function(bound){if(typeof bound=="string"){bound=commands[bound]}if(!bound){return false}var done=false;try{if(cm.isReadOnly()){cm.state.suppressEdits=true}done=bound(cm,pos)!=Pass}finally{cm.state.suppressEdits=false}return done})}function configureMouse(cm,repeat,event){var option=cm.getOption("configureMouse");var value=option?option(cm,repeat,event):{};if(value.unit==null){var rect=chromeOS?event.shiftKey&&event.metaKey:event.altKey;value.unit=rect?"rectangle":repeat=="single"?"char":repeat=="double"?"word":"line"}if(value.extend==null||cm.doc.extend){value.extend=cm.doc.extend||event.shiftKey}if(value.addNew==null){value.addNew=mac?event.metaKey:event.ctrlKey}if(value.moveOnDrag==null){value.moveOnDrag=!(mac?event.altKey:event.ctrlKey)}return value}function leftButtonDown(cm,pos,repeat,event){if(ie){setTimeout(bind(ensureFocus,cm),0)}else{cm.curOp.focus=activeElt()}var behavior=configureMouse(cm,repeat,event);var sel=cm.doc.sel,contained;if(cm.options.dragDrop&&dragAndDrop&&!cm.isReadOnly()&&repeat=="single"&&(contained=sel.contains(pos))>-1&&(cmp((contained=sel.ranges[contained]).from(),pos)<0||pos.xRel>0)&&(cmp(contained.to(),pos)>0||pos.xRel<0)){leftButtonStartDrag(cm,event,pos,behavior)}else{leftButtonSelect(cm,event,pos,behavior)}}function leftButtonStartDrag(cm,event,pos,behavior){var display=cm.display,moved=false;var dragEnd=operation(cm,function(e){if(webkit){display.scroller.draggable=false}cm.state.draggingText=false;if(cm.state.delayingBlurEvent){if(cm.hasFocus()){cm.state.delayingBlurEvent=false}else{delayBlurEvent(cm)}}off(display.wrapper.ownerDocument,"mouseup",dragEnd);off(display.wrapper.ownerDocument,"mousemove",mouseMove);off(display.scroller,"dragstart",dragStart);off(display.scroller,"drop",dragEnd);if(!moved){e_preventDefault(e);if(!behavior.addNew){extendSelection(cm.doc,pos,null,null,behavior.extend)}if(webkit&&!safari||ie&&ie_version==9){setTimeout(function(){display.wrapper.ownerDocument.body.focus({preventScroll:true});display.input.focus()},20)}else{display.input.focus()}}});var mouseMove=function(e2){moved=moved||Math.abs(event.clientX-e2.clientX)+Math.abs(event.clientY-e2.clientY)>=10};var dragStart=function(){return moved=true};if(webkit){display.scroller.draggable=true}cm.state.draggingText=dragEnd;dragEnd.copy=!behavior.moveOnDrag;on(display.wrapper.ownerDocument,"mouseup",dragEnd);on(display.wrapper.ownerDocument,"mousemove",mouseMove);on(display.scroller,"dragstart",dragStart);on(display.scroller,"drop",dragEnd);cm.state.delayingBlurEvent=true;setTimeout(function(){return display.input.focus()},20);if(display.scroller.dragDrop){display.scroller.dragDrop()}}function rangeForUnit(cm,pos,unit){if(unit=="char"){return new Range(pos,pos)}if(unit=="word"){return cm.findWordAt(pos)}if(unit=="line"){return new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0)))}var result=unit(cm,pos);return new Range(result.from,result.to)}function leftButtonSelect(cm,event,start,behavior){if(ie){delayBlurEvent(cm)}var display=cm.display,doc=cm.doc;e_preventDefault(event);var ourRange,ourIndex,startSel=doc.sel,ranges=startSel.ranges;if(behavior.addNew&&!behavior.extend){ourIndex=doc.sel.contains(start);if(ourIndex>-1){ourRange=ranges[ourIndex]}else{ourRange=new Range(start,start)}}else{ourRange=doc.sel.primary();ourIndex=doc.sel.primIndex}if(behavior.unit=="rectangle"){if(!behavior.addNew){ourRange=new Range(start,start)}start=posFromMouse(cm,event,true,true);ourIndex=-1}else{var range=rangeForUnit(cm,start,behavior.unit);if(behavior.extend){ourRange=extendRange(ourRange,range.anchor,range.head,behavior.extend)}else{ourRange=range}}if(!behavior.addNew){ourIndex=0;setSelection(doc,new Selection([ourRange],0),sel_mouse);startSel=doc.sel}else if(ourIndex==-1){ourIndex=ranges.length;setSelection(doc,normalizeSelection(cm,ranges.concat([ourRange]),ourIndex),{scroll:false,origin:"*mouse"})}else if(ranges.length>1&&ranges[ourIndex].empty()&&behavior.unit=="char"&&!behavior.extend){setSelection(doc,normalizeSelection(cm,ranges.slice(0,ourIndex).concat(ranges.slice(ourIndex+1)),0),{scroll:false,origin:"*mouse"});startSel=doc.sel}else{replaceOneSelection(doc,ourIndex,ourRange,sel_mouse)}var lastPos=start;function extendTo(pos){if(cmp(lastPos,pos)==0){return}lastPos=pos;if(behavior.unit=="rectangle"){var ranges=[],tabSize=cm.options.tabSize;var startCol=countColumn(getLine(doc,start.line).text,start.ch,tabSize);var posCol=countColumn(getLine(doc,pos.line).text,pos.ch,tabSize);var left=Math.min(startCol,posCol),right=Math.max(startCol,posCol);for(var line=Math.min(start.line,pos.line),end=Math.min(cm.lastLine(),Math.max(start.line,pos.line));line<=end;line++){var text=getLine(doc,line).text,leftPos=findColumn(text,left,tabSize);if(left==right){ranges.push(new Range(Pos(line,leftPos),Pos(line,leftPos)))}else if(text.length>leftPos){ranges.push(new Range(Pos(line,leftPos),Pos(line,findColumn(text,right,tabSize))))}}if(!ranges.length){ranges.push(new Range(start,start))}setSelection(doc,normalizeSelection(cm,startSel.ranges.slice(0,ourIndex).concat(ranges),ourIndex),{origin:"*mouse",scroll:false});cm.scrollIntoView(pos)}else{var oldRange=ourRange;var range=rangeForUnit(cm,pos,behavior.unit);var anchor=oldRange.anchor,head;if(cmp(range.anchor,anchor)>0){head=range.head;anchor=minPos(oldRange.from(),range.anchor)}else{head=range.anchor;anchor=maxPos(oldRange.to(),range.head)}var ranges$1=startSel.ranges.slice(0);ranges$1[ourIndex]=bidiSimplify(cm,new Range(clipPos(doc,anchor),head));setSelection(doc,normalizeSelection(cm,ranges$1,ourIndex),sel_mouse)}}var editorSize=display.wrapper.getBoundingClientRect();var counter=0;function extend(e){var curCount=++counter;var cur=posFromMouse(cm,e,true,behavior.unit=="rectangle");if(!cur){return}if(cmp(cur,lastPos)!=0){cm.curOp.focus=activeElt();extendTo(cur);var visible=visibleLines(display,doc);if(cur.line>=visible.to||cur.line<visible.from){setTimeout(operation(cm,function(){if(counter==curCount){extend(e)}}),150)}}else{var outside=e.clientY<editorSize.top?-20:e.clientY>editorSize.bottom?20:0;if(outside){setTimeout(operation(cm,function(){if(counter!=curCount){return}display.scroller.scrollTop+=outside;extend(e)}),50)}}}function done(e){cm.state.selectingText=false;counter=Infinity;if(e){e_preventDefault(e);display.input.focus()}off(display.wrapper.ownerDocument,"mousemove",move);off(display.wrapper.ownerDocument,"mouseup",up);doc.history.lastSelOrigin=null}var move=operation(cm,function(e){if(e.buttons===0||!e_button(e)){done(e)}else{extend(e)}});var up=operation(cm,done);cm.state.selectingText=up;on(display.wrapper.ownerDocument,"mousemove",move);on(display.wrapper.ownerDocument,"mouseup",up)}function bidiSimplify(cm,range){var anchor=range.anchor;var head=range.head;var anchorLine=getLine(cm.doc,anchor.line);if(cmp(anchor,head)==0&&anchor.sticky==head.sticky){return range}var order=getOrder(anchorLine);if(!order){return range}var index=getBidiPartAt(order,anchor.ch,anchor.sticky),part=order[index];if(part.from!=anchor.ch&&part.to!=anchor.ch){return range}var boundary=index+(part.from==anchor.ch==(part.level!=1)?0:1);if(boundary==0||boundary==order.length){return range}var leftSide;if(head.line!=anchor.line){leftSide=(head.line-anchor.line)*(cm.doc.direction=="ltr"?1:-1)>0}else{var headIndex=getBidiPartAt(order,head.ch,head.sticky);var dir=headIndex-index||(head.ch-anchor.ch)*(part.level==1?-1:1);if(headIndex==boundary-1||headIndex==boundary){leftSide=dir<0}else{leftSide=dir>0}}var usePart=order[boundary+(leftSide?-1:0)];var from=leftSide==(usePart.level==1);var ch=from?usePart.from:usePart.to,sticky=from?"after":"before";return anchor.ch==ch&&anchor.sticky==sticky?range:new Range(new Pos(anchor.line,ch,sticky),head)}function gutterEvent(cm,e,type,prevent){var mX,mY;if(e.touches){mX=e.touches[0].clientX;mY=e.touches[0].clientY}else{try{mX=e.clientX;mY=e.clientY}catch(e$1){return false}}if(mX>=Math.floor(cm.display.gutters.getBoundingClientRect().right)){return false}if(prevent){e_preventDefault(e)}var display=cm.display;var lineBox=display.lineDiv.getBoundingClientRect();if(mY>lineBox.bottom||!hasHandler(cm,type)){return e_defaultPrevented(e)}mY-=lineBox.top-display.viewOffset;for(var i=0;i<cm.display.gutterSpecs.length;++i){var g=display.gutters.childNodes[i];if(g&&g.getBoundingClientRect().right>=mX){var line=lineAtHeight(cm.doc,mY);var gutter=cm.display.gutterSpecs[i];signal(cm,type,cm,line,gutter.className,e);return e_defaultPrevented(e)}}}function clickInGutter(cm,e){return gutterEvent(cm,e,"gutterClick",true)}function onContextMenu(cm,e){if(eventInWidget(cm.display,e)||contextMenuInGutter(cm,e)){return}if(signalDOMEvent(cm,e,"contextmenu")){return}if(!captureRightClick){cm.display.input.onContextMenu(e)}}function contextMenuInGutter(cm,e){if(!hasHandler(cm,"gutterContextMenu")){return false}return gutterEvent(cm,e,"gutterContextMenu",false)}function themeChanged(cm){cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+cm.options.theme.replace(/(^|\s)\s*/g," cm-s-");clearCaches(cm)}var Init={toString:function(){return"CodeMirror.Init"}};var defaults={};var optionHandlers={};function defineOptions(CodeMirror){var optionHandlers=CodeMirror.optionHandlers;function option(name,deflt,handle,notOnInit){CodeMirror.defaults[name]=deflt;if(handle){optionHandlers[name]=notOnInit?function(cm,val,old){if(old!=Init){handle(cm,val,old)}}:handle}}CodeMirror.defineOption=option;CodeMirror.Init=Init;option("value","",function(cm,val){return cm.setValue(val)},true);option("mode",null,function(cm,val){cm.doc.modeOption=val;loadMode(cm)},true);option("indentUnit",2,loadMode,true);option("indentWithTabs",false);option("smartIndent",true);option("tabSize",4,function(cm){resetModeState(cm);clearCaches(cm);regChange(cm)},true);option("lineSeparator",null,function(cm,val){cm.doc.lineSep=val;if(!val){return}var newBreaks=[],lineNo=cm.doc.first;cm.doc.iter(function(line){for(var pos=0;;){var found=line.text.indexOf(val,pos);if(found==-1){break}pos=found+val.length;newBreaks.push(Pos(lineNo,found))}lineNo++});for(var i=newBreaks.length-1;i>=0;i--){replaceRange(cm.doc,val,newBreaks[i],Pos(newBreaks[i].line,newBreaks[i].ch+val.length))}});option("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(cm,val,old){cm.state.specialChars=new RegExp(val.source+(val.test("\t")?"":"|\t"),"g");if(old!=Init){cm.refresh()}});option("specialCharPlaceholder",defaultSpecialCharPlaceholder,function(cm){return cm.refresh()},true);option("electricChars",true);option("inputStyle",mobile?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);option("spellcheck",false,function(cm,val){return cm.getInputField().spellcheck=val},true);option("autocorrect",false,function(cm,val){return cm.getInputField().autocorrect=val},true);option("autocapitalize",false,function(cm,val){return cm.getInputField().autocapitalize=val},true);option("rtlMoveVisually",!windows);option("wholeLineUpdateBefore",true);option("theme","default",function(cm){themeChanged(cm);updateGutters(cm)},true);option("keyMap","default",function(cm,val,old){var next=getKeyMap(val);var prev=old!=Init&&getKeyMap(old);if(prev&&prev.detach){prev.detach(cm,next)}if(next.attach){next.attach(cm,prev||null)}});option("extraKeys",null);option("configureMouse",null);option("lineWrapping",false,wrappingChanged,true);option("gutters",[],function(cm,val){cm.display.gutterSpecs=getGutters(val,cm.options.lineNumbers);updateGutters(cm)},true);option("fixedGutter",true,function(cm,val){cm.display.gutters.style.left=val?compensateForHScroll(cm.display)+"px":"0";cm.refresh()},true);option("coverGutterNextToScrollbar",false,function(cm){return updateScrollbars(cm)},true);option("scrollbarStyle","native",function(cm){initScrollbars(cm);updateScrollbars(cm);cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft)},true);option("lineNumbers",false,function(cm,val){cm.display.gutterSpecs=getGutters(cm.options.gutters,val);updateGutters(cm)},true);option("firstLineNumber",1,updateGutters,true);option("lineNumberFormatter",function(integer){return integer},updateGutters,true);option("showCursorWhenSelecting",false,updateSelection,true);option("resetSelectionOnContextMenu",true);option("lineWiseCopyCut",true);option("pasteLinesPerSelection",true);option("selectionsMayTouch",false);option("readOnly",false,function(cm,val){if(val=="nocursor"){onBlur(cm);cm.display.input.blur()}cm.display.input.readOnlyChanged(val)});option("screenReaderLabel",null,function(cm,val){val=val===""?null:val;cm.display.input.screenReaderLabelChanged(val)});option("disableInput",false,function(cm,val){if(!val){cm.display.input.reset()}},true);option("dragDrop",true,dragDropChanged);option("allowDropFileTypes",null);option("cursorBlinkRate",530);option("cursorScrollMargin",0);option("cursorHeight",1,updateSelection,true);option("singleCursorHeightPerLine",true,updateSelection,true);option("workTime",100);option("workDelay",100);option("flattenSpans",true,resetModeState,true);option("addModeClass",false,resetModeState,true);option("pollInterval",100);option("undoDepth",200,function(cm,val){return cm.doc.history.undoDepth=val});option("historyEventDelay",1250);option("viewportMargin",10,function(cm){return cm.refresh()},true);option("maxHighlightLength",1e4,resetModeState,true);option("moveInputWithCursor",true,function(cm,val){if(!val){cm.display.input.resetPosition()}});option("tabindex",null,function(cm,val){return cm.display.input.getField().tabIndex=val||""});option("autofocus",null);option("direction","ltr",function(cm,val){return cm.doc.setDirection(val)},true);option("phrases",null)}function dragDropChanged(cm,value,old){var wasOn=old&&old!=Init;if(!value!=!wasOn){var funcs=cm.display.dragFunctions;var toggle=value?on:off;toggle(cm.display.scroller,"dragstart",funcs.start);toggle(cm.display.scroller,"dragenter",funcs.enter);toggle(cm.display.scroller,"dragover",funcs.over);toggle(cm.display.scroller,"dragleave",funcs.leave);toggle(cm.display.scroller,"drop",funcs.drop)}}function wrappingChanged(cm){if(cm.options.lineWrapping){addClass(cm.display.wrapper,"CodeMirror-wrap");cm.display.sizer.style.minWidth="";cm.display.sizerWidth=null}else{rmClass(cm.display.wrapper,"CodeMirror-wrap");findMaxLine(cm)}estimateLineHeights(cm);regChange(cm);clearCaches(cm);setTimeout(function(){return updateScrollbars(cm)},100)}function CodeMirror(place,options){var this$1=this;if(!(this instanceof CodeMirror)){return new CodeMirror(place,options)}this.options=options=options?copyObj(options):{};copyObj(defaults,options,false);var doc=options.value;if(typeof doc=="string"){doc=new Doc(doc,options.mode,null,options.lineSeparator,options.direction)}else if(options.mode){doc.modeOption=options.mode}this.doc=doc;var input=new CodeMirror.inputStyles[options.inputStyle](this);var display=this.display=new Display(place,doc,input,options);display.wrapper.CodeMirror=this;themeChanged(this);if(options.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}initScrollbars(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:-1,cutIncoming:-1,selectingText:false,draggingText:false,highlight:new Delayed,keySeq:null,specialChars:null};if(options.autofocus&&!mobile){display.input.focus()}if(ie&&ie_version<11){setTimeout(function(){return this$1.display.input.reset(true)},20)}registerEventHandlers(this);ensureGlobalHandlers();startOperation(this);this.curOp.forceUpdate=true;attachDoc(this,doc);if(options.autofocus&&!mobile||this.hasFocus()){setTimeout(function(){if(this$1.hasFocus()&&!this$1.state.focused){onFocus(this$1)}},20)}else{onBlur(this)}for(var opt in optionHandlers){if(optionHandlers.hasOwnProperty(opt)){optionHandlers[opt](this,options[opt],Init)}}maybeUpdateLineNumberWidth(this);if(options.finishInit){options.finishInit(this)}for(var i=0;i<initHooks.length;++i){initHooks[i](this)}endOperation(this);if(webkit&&options.lineWrapping&&getComputedStyle(display.lineDiv).textRendering=="optimizelegibility"){display.lineDiv.style.textRendering="auto"}}CodeMirror.defaults=defaults;CodeMirror.optionHandlers=optionHandlers;function registerEventHandlers(cm){var d=cm.display;on(d.scroller,"mousedown",operation(cm,onMouseDown));if(ie&&ie_version<11){on(d.scroller,"dblclick",operation(cm,function(e){if(signalDOMEvent(cm,e)){return}var pos=posFromMouse(cm,e);if(!pos||clickInGutter(cm,e)||eventInWidget(cm.display,e)){return}e_preventDefault(e);var word=cm.findWordAt(pos);extendSelection(cm.doc,word.anchor,word.head)}))}else{on(d.scroller,"dblclick",function(e){return signalDOMEvent(cm,e)||e_preventDefault(e)})}on(d.scroller,"contextmenu",function(e){return onContextMenu(cm,e)});on(d.input.getField(),"contextmenu",function(e){if(!d.scroller.contains(e.target)){onContextMenu(cm,e)}});var touchFinished,prevTouch={end:0};function finishTouch(){if(d.activeTouch){touchFinished=setTimeout(function(){return d.activeTouch=null},1e3);prevTouch=d.activeTouch;prevTouch.end=+new Date}}function isMouseLikeTouchEvent(e){if(e.touches.length!=1){return false}var touch=e.touches[0];return touch.radiusX<=1&&touch.radiusY<=1}function farAway(touch,other){if(other.left==null){return true}var dx=other.left-touch.left,dy=other.top-touch.top;return dx*dx+dy*dy>20*20}on(d.scroller,"touchstart",function(e){if(!signalDOMEvent(cm,e)&&!isMouseLikeTouchEvent(e)&&!clickInGutter(cm,e)){d.input.ensurePolled();clearTimeout(touchFinished);var now=+new Date;d.activeTouch={start:now,moved:false,prev:now-prevTouch.end<=300?prevTouch:null};if(e.touches.length==1){d.activeTouch.left=e.touches[0].pageX;d.activeTouch.top=e.touches[0].pageY}}});on(d.scroller,"touchmove",function(){if(d.activeTouch){d.activeTouch.moved=true}});on(d.scroller,"touchend",function(e){var touch=d.activeTouch;if(touch&&!eventInWidget(d,e)&&touch.left!=null&&!touch.moved&&new Date-touch.start<300){var pos=cm.coordsChar(d.activeTouch,"page"),range;if(!touch.prev||farAway(touch,touch.prev)){range=new Range(pos,pos)}else if(!touch.prev.prev||farAway(touch,touch.prev.prev)){range=cm.findWordAt(pos)}else{range=new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0)))}cm.setSelection(range.anchor,range.head);cm.focus();e_preventDefault(e)}finishTouch()});on(d.scroller,"touchcancel",finishTouch);on(d.scroller,"scroll",function(){if(d.scroller.clientHeight){updateScrollTop(cm,d.scroller.scrollTop);setScrollLeft(cm,d.scroller.scrollLeft,true);signal(cm,"scroll",cm)}});on(d.scroller,"mousewheel",function(e){return onScrollWheel(cm,e)});on(d.scroller,"DOMMouseScroll",function(e){return onScrollWheel(cm,e)});on(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={enter:function(e){if(!signalDOMEvent(cm,e)){e_stop(e)}},over:function(e){if(!signalDOMEvent(cm,e)){onDragOver(cm,e);e_stop(e)}},start:function(e){return onDragStart(cm,e)},drop:operation(cm,onDrop),leave:function(e){if(!signalDOMEvent(cm,e)){clearDragCursor(cm)}}};var inp=d.input.getField();on(inp,"keyup",function(e){return onKeyUp.call(cm,e)});on(inp,"keydown",operation(cm,onKeyDown));on(inp,"keypress",operation(cm,onKeyPress));on(inp,"focus",function(e){return onFocus(cm,e)});on(inp,"blur",function(e){return onBlur(cm,e)})}var initHooks=[];CodeMirror.defineInitHook=function(f){return initHooks.push(f)};function indentLine(cm,n,how,aggressive){var doc=cm.doc,state;if(how==null){how="add"}if(how=="smart"){if(!doc.mode.indent){how="prev"}else{state=getContextBefore(cm,n).state}}var tabSize=cm.options.tabSize;var line=getLine(doc,n),curSpace=countColumn(line.text,null,tabSize);if(line.stateAfter){line.stateAfter=null}var curSpaceString=line.text.match(/^\s*/)[0],indentation;if(!aggressive&&!/\S/.test(line.text)){indentation=0;how="not"}else if(how=="smart"){indentation=doc.mode.indent(state,line.text.slice(curSpaceString.length),line.text);if(indentation==Pass||indentation>150){if(!aggressive){return}how="prev"}}if(how=="prev"){if(n>doc.first){indentation=countColumn(getLine(doc,n-1).text,null,tabSize)}else{indentation=0}}else if(how=="add"){indentation=curSpace+cm.options.indentUnit}else if(how=="subtract"){indentation=curSpace-cm.options.indentUnit}else if(typeof how=="number"){indentation=curSpace+how}indentation=Math.max(0,indentation);var indentString="",pos=0;if(cm.options.indentWithTabs){for(var i=Math.floor(indentation/tabSize);i;--i){pos+=tabSize;indentString+="\t"}}if(pos<indentation){indentString+=spaceStr(indentation-pos)}if(indentString!=curSpaceString){replaceRange(doc,indentString,Pos(n,0),Pos(n,curSpaceString.length),"+input");line.stateAfter=null;return true}else{for(var i$1=0;i$1<doc.sel.ranges.length;i$1++){var range=doc.sel.ranges[i$1];if(range.head.line==n&&range.head.ch<curSpaceString.length){var pos$1=Pos(n,curSpaceString.length);replaceOneSelection(doc,i$1,new Range(pos$1,pos$1));break}}}}var lastCopied=null;function setLastCopied(newLastCopied){lastCopied=newLastCopied}function applyTextInput(cm,inserted,deleted,sel,origin){var doc=cm.doc;cm.display.shift=false;if(!sel){sel=doc.sel}var recent=+new Date-200;var paste=origin=="paste"||cm.state.pasteIncoming>recent;var textLines=splitLinesAuto(inserted),multiPaste=null;if(paste&&sel.ranges.length>1){if(lastCopied&&lastCopied.text.join("\n")==inserted){if(sel.ranges.length%lastCopied.text.length==0){multiPaste=[];for(var i=0;i<lastCopied.text.length;i++){multiPaste.push(doc.splitLines(lastCopied.text[i]))}}}else if(textLines.length==sel.ranges.length&&cm.options.pasteLinesPerSelection){multiPaste=map(textLines,function(l){return[l]})}}var updateInput=cm.curOp.updateInput;for(var i$1=sel.ranges.length-1;i$1>=0;i$1--){var range=sel.ranges[i$1];var from=range.from(),to=range.to();if(range.empty()){if(deleted&&deleted>0){from=Pos(from.line,from.ch-deleted)}else if(cm.state.overwrite&&!paste){to=Pos(to.line,Math.min(getLine(doc,to.line).text.length,to.ch+lst(textLines).length))}else if(paste&&lastCopied&&lastCopied.lineWise&&lastCopied.text.join("\n")==textLines.join("\n")){from=to=Pos(from.line,0)}}var changeEvent={from:from,to:to,text:multiPaste?multiPaste[i$1%multiPaste.length]:textLines,origin:origin||(paste?"paste":cm.state.cutIncoming>recent?"cut":"+input")};makeChange(cm.doc,changeEvent);signalLater(cm,"inputRead",cm,changeEvent)}if(inserted&&!paste){triggerElectric(cm,inserted)}ensureCursorVisible(cm);if(cm.curOp.updateInput<2){cm.curOp.updateInput=updateInput}cm.curOp.typing=true;cm.state.pasteIncoming=cm.state.cutIncoming=-1}function handlePaste(e,cm){var pasted=e.clipboardData&&e.clipboardData.getData("Text");if(pasted){e.preventDefault();if(!cm.isReadOnly()&&!cm.options.disableInput){runInOp(cm,function(){return applyTextInput(cm,pasted,0,null,"paste")})}return true}}function triggerElectric(cm,inserted){if(!cm.options.electricChars||!cm.options.smartIndent){return}var sel=cm.doc.sel;for(var i=sel.ranges.length-1;i>=0;i--){var range=sel.ranges[i];if(range.head.ch>100||i&&sel.ranges[i-1].head.line==range.head.line){continue}var mode=cm.getModeAt(range.head);var indented=false;if(mode.electricChars){for(var j=0;j<mode.electricChars.length;j++){if(inserted.indexOf(mode.electricChars.charAt(j))>-1){indented=indentLine(cm,range.head.line,"smart");break}}}else if(mode.electricInput){if(mode.electricInput.test(getLine(cm.doc,range.head.line).text.slice(0,range.head.ch))){indented=indentLine(cm,range.head.line,"smart")}}if(indented){signalLater(cm,"electricInput",cm,range.head.line)}}}function copyableRanges(cm){var text=[],ranges=[];for(var i=0;i<cm.doc.sel.ranges.length;i++){var line=cm.doc.sel.ranges[i].head.line;var lineRange={anchor:Pos(line,0),head:Pos(line+1,0)};ranges.push(lineRange);text.push(cm.getRange(lineRange.anchor,lineRange.head))}return{text:text,ranges:ranges}}function disableBrowserMagic(field,spellcheck,autocorrect,autocapitalize){field.setAttribute("autocorrect",autocorrect?"":"off");field.setAttribute("autocapitalize",autocapitalize?"":"off");field.setAttribute("spellcheck",!!spellcheck)}function hiddenTextarea(){var te=elt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var div=elt("div",[te],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(webkit){te.style.width="1000px"}else{te.setAttribute("wrap","off")}if(ios){te.style.border="1px solid black"}disableBrowserMagic(te);return div}function addEditorMethods(CodeMirror){var optionHandlers=CodeMirror.optionHandlers;var helpers=CodeMirror.helpers={};CodeMirror.prototype={constructor:CodeMirror,focus:function(){window.focus();this.display.input.focus()},setOption:function(option,value){var options=this.options,old=options[option];if(options[option]==value&&option!="mode"){return}options[option]=value;if(optionHandlers.hasOwnProperty(option)){operation(this,optionHandlers[option])(this,value,old)}signal(this,"optionChange",this,option)},getOption:function(option){return this.options[option]},getDoc:function(){return this.doc},addKeyMap:function(map,bottom){this.state.keyMaps[bottom?"push":"unshift"](getKeyMap(map))},removeKeyMap:function(map){var maps=this.state.keyMaps;for(var i=0;i<maps.length;++i){if(maps[i]==map||maps[i].name==map){maps.splice(i,1);return true}}},addOverlay:methodOp(function(spec,options){var mode=spec.token?spec:CodeMirror.getMode(this.options,spec);if(mode.startState){throw new Error("Overlays may not be stateful.")}insertSorted(this.state.overlays,{mode:mode,modeSpec:spec,opaque:options&&options.opaque,priority:options&&options.priority||0},function(overlay){return overlay.priority});this.state.modeGen++;regChange(this)}),removeOverlay:methodOp(function(spec){var overlays=this.state.overlays;for(var i=0;i<overlays.length;++i){var cur=overlays[i].modeSpec;if(cur==spec||typeof spec=="string"&&cur.name==spec){overlays.splice(i,1);this.state.modeGen++;regChange(this);return}}}),indentLine:methodOp(function(n,dir,aggressive){if(typeof dir!="string"&&typeof dir!="number"){if(dir==null){dir=this.options.smartIndent?"smart":"prev"}else{dir=dir?"add":"subtract"}}if(isLine(this.doc,n)){indentLine(this,n,dir,aggressive)}}),indentSelection:methodOp(function(how){var ranges=this.doc.sel.ranges,end=-1;for(var i=0;i<ranges.length;i++){var range=ranges[i];if(!range.empty()){var from=range.from(),to=range.to();var start=Math.max(end,from.line);end=Math.min(this.lastLine(),to.line-(to.ch?0:1))+1;for(var j=start;j<end;++j){indentLine(this,j,how)}var newRanges=this.doc.sel.ranges;if(from.ch==0&&ranges.length==newRanges.length&&newRanges[i].from().ch>0){replaceOneSelection(this.doc,i,new Range(from,newRanges[i].to()),sel_dontScroll)}}else if(range.head.line>end){indentLine(this,range.head.line,how,true);end=range.head.line;if(i==this.doc.sel.primIndex){ensureCursorVisible(this)}}}}),getTokenAt:function(pos,precise){return takeToken(this,pos,precise)},getLineTokens:function(line,precise){return takeToken(this,Pos(line),precise,true)},getTokenTypeAt:function(pos){pos=clipPos(this.doc,pos);var styles=getLineStyles(this,getLine(this.doc,pos.line));var before=0,after=(styles.length-1)/2,ch=pos.ch;var type;if(ch==0){type=styles[2]}else{for(;;){var mid=before+after>>1;if((mid?styles[mid*2-1]:0)>=ch){after=mid}else if(styles[mid*2+1]<ch){before=mid+1}else{type=styles[mid*2+2];break}}}var cut=type?type.indexOf("overlay "):-1;return cut<0?type:cut==0?null:type.slice(0,cut-1)},getModeAt:function(pos){var mode=this.doc.mode;if(!mode.innerMode){return mode}return CodeMirror.innerMode(mode,this.getTokenAt(pos).state).mode},getHelper:function(pos,type){return this.getHelpers(pos,type)[0]},getHelpers:function(pos,type){var found=[];if(!helpers.hasOwnProperty(type)){return found}var help=helpers[type],mode=this.getModeAt(pos);if(typeof mode[type]=="string"){if(help[mode[type]]){found.push(help[mode[type]])}}else if(mode[type]){for(var i=0;i<mode[type].length;i++){var val=help[mode[type][i]];if(val){found.push(val)}}}else if(mode.helperType&&help[mode.helperType]){found.push(help[mode.helperType])}else if(help[mode.name]){found.push(help[mode.name])}for(var i$1=0;i$1<help._global.length;i$1++){var cur=help._global[i$1];if(cur.pred(mode,this)&&indexOf(found,cur.val)==-1){found.push(cur.val)}}return found},getStateAfter:function(line,precise){var doc=this.doc;line=clipLine(doc,line==null?doc.first+doc.size-1:line);return getContextBefore(this,line+1,precise).state},cursorCoords:function(start,mode){var pos,range=this.doc.sel.primary();if(start==null){pos=range.head}else if(typeof start=="object"){pos=clipPos(this.doc,start)}else{pos=start?range.from():range.to()}return cursorCoords(this,pos,mode||"page")},charCoords:function(pos,mode){return charCoords(this,clipPos(this.doc,pos),mode||"page")},coordsChar:function(coords,mode){coords=fromCoordSystem(this,coords,mode||"page");return coordsChar(this,coords.left,coords.top)},lineAtHeight:function(height,mode){height=fromCoordSystem(this,{top:height,left:0},mode||"page").top;return lineAtHeight(this.doc,height+this.display.viewOffset)},heightAtLine:function(line,mode,includeWidgets){var end=false,lineObj;if(typeof line=="number"){var last=this.doc.first+this.doc.size-1;if(line<this.doc.first){line=this.doc.first}else if(line>last){line=last;end=true}lineObj=getLine(this.doc,line)}else{lineObj=line}return intoCoordSystem(this,lineObj,{top:0,left:0},mode||"page",includeWidgets||end).top+(end?this.doc.height-heightAtLine(lineObj):0)},defaultTextHeight:function(){return textHeight(this.display)},defaultCharWidth:function(){return charWidth(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(pos,node,scroll,vert,horiz){var display=this.display;pos=cursorCoords(this,clipPos(this.doc,pos));var top=pos.bottom,left=pos.left;node.style.position="absolute";node.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(node);display.sizer.appendChild(node);if(vert=="over"){top=pos.top}else if(vert=="above"||vert=="near"){var vspace=Math.max(display.wrapper.clientHeight,this.doc.height),hspace=Math.max(display.sizer.clientWidth,display.lineSpace.clientWidth);if((vert=="above"||pos.bottom+node.offsetHeight>vspace)&&pos.top>node.offsetHeight){top=pos.top-node.offsetHeight}else if(pos.bottom+node.offsetHeight<=vspace){top=pos.bottom}if(left+node.offsetWidth>hspace){left=hspace-node.offsetWidth}}node.style.top=top+"px";node.style.left=node.style.right="";if(horiz=="right"){left=display.sizer.clientWidth-node.offsetWidth;node.style.right="0px"}else{if(horiz=="left"){left=0}else if(horiz=="middle"){left=(display.sizer.clientWidth-node.offsetWidth)/2}node.style.left=left+"px"}if(scroll){scrollIntoView(this,{left:left,top:top,right:left+node.offsetWidth,bottom:top+node.offsetHeight})}},triggerOnKeyDown:methodOp(onKeyDown),triggerOnKeyPress:methodOp(onKeyPress),triggerOnKeyUp:onKeyUp,triggerOnMouseDown:methodOp(onMouseDown),execCommand:function(cmd){if(commands.hasOwnProperty(cmd)){return commands[cmd].call(null,this)}},triggerElectric:methodOp(function(text){triggerElectric(this,text)}),findPosH:function(from,amount,unit,visually){var dir=1;if(amount<0){dir=-1;amount=-amount}var cur=clipPos(this.doc,from);for(var i=0;i<amount;++i){cur=findPosH(this.doc,cur,dir,unit,visually);if(cur.hitSide){break}}return cur},moveH:methodOp(function(dir,unit){var this$1=this;this.extendSelectionsBy(function(range){if(this$1.display.shift||this$1.doc.extend||range.empty()){return findPosH(this$1.doc,range.head,dir,unit,this$1.options.rtlMoveVisually)}else{return dir<0?range.from():range.to()}},sel_move)}),deleteH:methodOp(function(dir,unit){var sel=this.doc.sel,doc=this.doc;if(sel.somethingSelected()){doc.replaceSelection("",null,"+delete")}else{deleteNearSelection(this,function(range){var other=findPosH(doc,range.head,dir,unit,false);return dir<0?{from:other,to:range.head}:{from:range.head,to:other}})}}),findPosV:function(from,amount,unit,goalColumn){var dir=1,x=goalColumn;if(amount<0){dir=-1;amount=-amount}var cur=clipPos(this.doc,from);for(var i=0;i<amount;++i){var coords=cursorCoords(this,cur,"div");if(x==null){x=coords.left}else{coords.left=x}cur=findPosV(this,coords,dir,unit);if(cur.hitSide){break}}return cur},moveV:methodOp(function(dir,unit){var this$1=this;var doc=this.doc,goals=[];var collapse=!this.display.shift&&!doc.extend&&doc.sel.somethingSelected();doc.extendSelectionsBy(function(range){if(collapse){return dir<0?range.from():range.to()}var headPos=cursorCoords(this$1,range.head,"div");if(range.goalColumn!=null){headPos.left=range.goalColumn}goals.push(headPos.left);var pos=findPosV(this$1,headPos,dir,unit);if(unit=="page"&&range==doc.sel.primary()){addToScrollTop(this$1,charCoords(this$1,pos,"div").top-headPos.top)}return pos},sel_move);if(goals.length){for(var i=0;i<doc.sel.ranges.length;i++){doc.sel.ranges[i].goalColumn=goals[i]}}}),findWordAt:function(pos){var doc=this.doc,line=getLine(doc,pos.line).text;var start=pos.ch,end=pos.ch;if(line){var helper=this.getHelper(pos,"wordChars");if((pos.sticky=="before"||end==line.length)&&start){--start}else{++end}var startChar=line.charAt(start);var check=isWordChar(startChar,helper)?function(ch){return isWordChar(ch,helper)}:/\s/.test(startChar)?function(ch){return/\s/.test(ch)}:function(ch){return!/\s/.test(ch)&&!isWordChar(ch)};while(start>0&&check(line.charAt(start-1))){--start}while(end<line.length&&check(line.charAt(end))){++end}}return new Range(Pos(pos.line,start),Pos(pos.line,end))},toggleOverwrite:function(value){if(value!=null&&value==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){addClass(this.display.cursorDiv,"CodeMirror-overwrite")}else{rmClass(this.display.cursorDiv,"CodeMirror-overwrite")}signal(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==activeElt()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:methodOp(function(x,y){scrollToCoords(this,x,y)}),getScrollInfo:function(){var scroller=this.display.scroller;return{left:scroller.scrollLeft,top:scroller.scrollTop,height:scroller.scrollHeight-scrollGap(this)-this.display.barHeight,width:scroller.scrollWidth-scrollGap(this)-this.display.barWidth,clientHeight:displayHeight(this),clientWidth:displayWidth(this)}},scrollIntoView:methodOp(function(range,margin){if(range==null){range={from:this.doc.sel.primary().head,to:null};if(margin==null){margin=this.options.cursorScrollMargin}}else if(typeof range=="number"){range={from:Pos(range,0),to:null}}else if(range.from==null){range={from:range,to:null}}if(!range.to){range.to=range.from}range.margin=margin||0;if(range.from.line!=null){scrollToRange(this,range)}else{scrollToCoordsRange(this,range.from,range.to,range.margin)}}),setSize:methodOp(function(width,height){var this$1=this;var interpret=function(val){return typeof val=="number"||/^\d+$/.test(String(val))?val+"px":val};if(width!=null){this.display.wrapper.style.width=interpret(width)}if(height!=null){this.display.wrapper.style.height=interpret(height)}if(this.options.lineWrapping){clearLineMeasurementCache(this)}var lineNo=this.display.viewFrom;this.doc.iter(lineNo,this.display.viewTo,function(line){if(line.widgets){for(var i=0;i<line.widgets.length;i++){if(line.widgets[i].noHScroll){regLineChange(this$1,lineNo,"widget");break}}}++lineNo});this.curOp.forceUpdate=true;signal(this,"refresh",this)}),operation:function(f){return runInOp(this,f)},startOperation:function(){return startOperation(this)},endOperation:function(){return endOperation(this)},refresh:methodOp(function(){var oldHeight=this.display.cachedTextHeight;regChange(this);this.curOp.forceUpdate=true;clearCaches(this);scrollToCoords(this,this.doc.scrollLeft,this.doc.scrollTop);updateGutterSpace(this.display);if(oldHeight==null||Math.abs(oldHeight-textHeight(this.display))>.5||this.options.lineWrapping){estimateLineHeights(this)}signal(this,"refresh",this)}),swapDoc:methodOp(function(doc){var old=this.doc;old.cm=null;if(this.state.selectingText){this.state.selectingText()}attachDoc(this,doc);clearCaches(this);this.display.input.reset();scrollToCoords(this,doc.scrollLeft,doc.scrollTop);this.curOp.forceScroll=true;signalLater(this,"swapDoc",this,old);return old}),phrase:function(phraseText){var phrases=this.options.phrases;return phrases&&Object.prototype.hasOwnProperty.call(phrases,phraseText)?phrases[phraseText]:phraseText},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};eventMixin(CodeMirror);CodeMirror.registerHelper=function(type,name,value){if(!helpers.hasOwnProperty(type)){helpers[type]=CodeMirror[type]={_global:[]}}helpers[type][name]=value};CodeMirror.registerGlobalHelper=function(type,name,predicate,value){CodeMirror.registerHelper(type,name,value);helpers[type]._global.push({pred:predicate,val:value})}}function findPosH(doc,pos,dir,unit,visually){var oldPos=pos;var origDir=dir;var lineObj=getLine(doc,pos.line);var lineDir=visually&&doc.direction=="rtl"?-dir:dir;function findNextLine(){var l=pos.line+lineDir;if(l<doc.first||l>=doc.first+doc.size){return false}pos=new Pos(l,pos.ch,pos.sticky);return lineObj=getLine(doc,l)}function moveOnce(boundToLine){var next;if(unit=="codepoint"){var ch=lineObj.text.charCodeAt(pos.ch+(dir>0?0:-1));if(isNaN(ch)){next=null}else{var astral=dir>0?ch>=55296&&ch<56320:ch>=56320&&ch<57343;next=new Pos(pos.line,Math.max(0,Math.min(lineObj.text.length,pos.ch+dir*(astral?2:1))),-dir)}}else if(visually){next=moveVisually(doc.cm,lineObj,pos,dir)}else{next=moveLogically(lineObj,pos,dir)}if(next==null){if(!boundToLine&&findNextLine()){pos=endOfLine(visually,doc.cm,lineObj,pos.line,lineDir)}else{return false}}else{pos=next}return true}if(unit=="char"||unit=="codepoint"){moveOnce()}else if(unit=="column"){moveOnce(true)}else if(unit=="word"||unit=="group"){var sawType=null,group=unit=="group";var helper=doc.cm&&doc.cm.getHelper(pos,"wordChars");for(var first=true;;first=false){if(dir<0&&!moveOnce(!first)){break}var cur=lineObj.text.charAt(pos.ch)||"\n";var type=isWordChar(cur,helper)?"w":group&&cur=="\n"?"n":!group||/\s/.test(cur)?null:"p";if(group&&!first&&!type){type="s"}if(sawType&&sawType!=type){if(dir<0){dir=1;moveOnce();pos.sticky="after"}break}if(type){sawType=type}if(dir>0&&!moveOnce(!first)){break}}}var result=skipAtomic(doc,pos,oldPos,origDir,true);if(equalCursorPos(oldPos,result)){result.hitSide=true}return result}function findPosV(cm,pos,dir,unit){var doc=cm.doc,x=pos.left,y;if(unit=="page"){var pageSize=Math.min(cm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var moveAmount=Math.max(pageSize-.5*textHeight(cm.display),3);y=(dir>0?pos.bottom:pos.top)+dir*moveAmount}else if(unit=="line"){y=dir>0?pos.bottom+3:pos.top-3}var target;for(;;){target=coordsChar(cm,x,y);if(!target.outside){break}if(dir<0?y<=0:y>=doc.height){target.hitSide=true;break}y+=dir*5}return target}var ContentEditableInput=function(cm){this.cm=cm;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Delayed;this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};ContentEditableInput.prototype.init=function(display){var this$1=this;var input=this,cm=input.cm;var div=input.div=display.lineDiv;div.contentEditable=true;disableBrowserMagic(div,cm.options.spellcheck,cm.options.autocorrect,cm.options.autocapitalize);function belongsToInput(e){for(var t=e.target;t;t=t.parentNode){if(t==div){return true}if(/\bCodeMirror-(?:line)?widget\b/.test(t.className)){break}}return false}on(div,"paste",function(e){if(!belongsToInput(e)||signalDOMEvent(cm,e)||handlePaste(e,cm)){return}if(ie_version<=11){setTimeout(operation(cm,function(){return this$1.updateFromDOM()}),20)}});on(div,"compositionstart",function(e){this$1.composing={data:e.data,done:false}});on(div,"compositionupdate",function(e){if(!this$1.composing){this$1.composing={data:e.data,done:false}}});on(div,"compositionend",function(e){if(this$1.composing){if(e.data!=this$1.composing.data){this$1.readFromDOMSoon()}this$1.composing.done=true}});on(div,"touchstart",function(){return input.forceCompositionEnd()});on(div,"input",function(){if(!this$1.composing){this$1.readFromDOMSoon()}});function onCopyCut(e){if(!belongsToInput(e)||signalDOMEvent(cm,e)){return}if(cm.somethingSelected()){setLastCopied({lineWise:false,text:cm.getSelections()});if(e.type=="cut"){cm.replaceSelection("",null,"cut")}}else if(!cm.options.lineWiseCopyCut){return}else{var ranges=copyableRanges(cm);setLastCopied({lineWise:true,text:ranges.text});if(e.type=="cut"){cm.operation(function(){cm.setSelections(ranges.ranges,0,sel_dontScroll);cm.replaceSelection("",null,"cut")})}}if(e.clipboardData){e.clipboardData.clearData();var content=lastCopied.text.join("\n");e.clipboardData.setData("Text",content);if(e.clipboardData.getData("Text")==content){e.preventDefault();return}}var kludge=hiddenTextarea(),te=kludge.firstChild;cm.display.lineSpace.insertBefore(kludge,cm.display.lineSpace.firstChild);te.value=lastCopied.text.join("\n");var hadFocus=document.activeElement;selectInput(te);setTimeout(function(){cm.display.lineSpace.removeChild(kludge);hadFocus.focus();if(hadFocus==div){input.showPrimarySelection()}},50)}on(div,"copy",onCopyCut);on(div,"cut",onCopyCut)};ContentEditableInput.prototype.screenReaderLabelChanged=function(label){if(label){this.div.setAttribute("aria-label",label)}else{this.div.removeAttribute("aria-label")}};ContentEditableInput.prototype.prepareSelection=function(){var result=prepareSelection(this.cm,false);result.focus=document.activeElement==this.div;return result};ContentEditableInput.prototype.showSelection=function(info,takeFocus){if(!info||!this.cm.display.view.length){return}if(info.focus||takeFocus){this.showPrimarySelection()}this.showMultipleSelections(info)};ContentEditableInput.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()};ContentEditableInput.prototype.showPrimarySelection=function(){var sel=this.getSelection(),cm=this.cm,prim=cm.doc.sel.primary();var from=prim.from(),to=prim.to();if(cm.display.viewTo==cm.display.viewFrom||from.line>=cm.display.viewTo||to.line<cm.display.viewFrom){sel.removeAllRanges();return}var curAnchor=domToPos(cm,sel.anchorNode,sel.anchorOffset);var curFocus=domToPos(cm,sel.focusNode,sel.focusOffset);if(curAnchor&&!curAnchor.bad&&curFocus&&!curFocus.bad&&cmp(minPos(curAnchor,curFocus),from)==0&&cmp(maxPos(curAnchor,curFocus),to)==0){return}var view=cm.display.view;var start=from.line>=cm.display.viewFrom&&posToDOM(cm,from)||{node:view[0].measure.map[2],offset:0};var end=to.line<cm.display.viewTo&&posToDOM(cm,to);if(!end){var measure=view[view.length-1].measure;var map=measure.maps?measure.maps[measure.maps.length-1]:measure.map;end={node:map[map.length-1],offset:map[map.length-2]-map[map.length-3]}}if(!start||!end){sel.removeAllRanges();return}var old=sel.rangeCount&&sel.getRangeAt(0),rng;try{rng=range(start.node,start.offset,end.offset,end.node)}catch(e){}if(rng){if(!gecko&&cm.state.focused){sel.collapse(start.node,start.offset);if(!rng.collapsed){sel.removeAllRanges();sel.addRange(rng)}}else{sel.removeAllRanges();sel.addRange(rng)}if(old&&sel.anchorNode==null){sel.addRange(old)}else if(gecko){this.startGracePeriod()}}this.rememberSelection()};ContentEditableInput.prototype.startGracePeriod=function(){var this$1=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){this$1.gracePeriod=false;if(this$1.selectionChanged()){this$1.cm.operation(function(){return this$1.cm.curOp.selectionChanged=true})}},20)};ContentEditableInput.prototype.showMultipleSelections=function(info){removeChildrenAndAdd(this.cm.display.cursorDiv,info.cursors);removeChildrenAndAdd(this.cm.display.selectionDiv,info.selection)};ContentEditableInput.prototype.rememberSelection=function(){var sel=this.getSelection();this.lastAnchorNode=sel.anchorNode;this.lastAnchorOffset=sel.anchorOffset;this.lastFocusNode=sel.focusNode;this.lastFocusOffset=sel.focusOffset};ContentEditableInput.prototype.selectionInEditor=function(){var sel=this.getSelection();if(!sel.rangeCount){return false}var node=sel.getRangeAt(0).commonAncestorContainer;return contains(this.div,node)};ContentEditableInput.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()||document.activeElement!=this.div){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};ContentEditableInput.prototype.blur=function(){this.div.blur()};ContentEditableInput.prototype.getField=function(){return this.div};ContentEditableInput.prototype.supportsTouch=function(){return true};ContentEditableInput.prototype.receivedFocus=function(){var input=this;if(this.selectionInEditor()){this.pollSelection()}else{runInOp(this.cm,function(){return input.cm.curOp.selectionChanged=true})}function poll(){if(input.cm.state.focused){input.pollSelection();input.polling.set(input.cm.options.pollInterval,poll)}}this.polling.set(this.cm.options.pollInterval,poll)};ContentEditableInput.prototype.selectionChanged=function(){var sel=this.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastFocusNode||sel.focusOffset!=this.lastFocusOffset};ContentEditableInput.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged()){return}var sel=this.getSelection(),cm=this.cm;if(android&&chrome&&this.cm.display.gutterSpecs.length&&isInGutter(sel.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing){return}this.rememberSelection();var anchor=domToPos(cm,sel.anchorNode,sel.anchorOffset);var head=domToPos(cm,sel.focusNode,sel.focusOffset);if(anchor&&head){runInOp(cm,function(){setSelection(cm.doc,simpleSelection(anchor,head),sel_dontScroll);if(anchor.bad||head.bad){cm.curOp.selectionChanged=true}})}};ContentEditableInput.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var cm=this.cm,display=cm.display,sel=cm.doc.sel.primary();var from=sel.from(),to=sel.to();if(from.ch==0&&from.line>cm.firstLine()){from=Pos(from.line-1,getLine(cm.doc,from.line-1).length)}if(to.ch==getLine(cm.doc,to.line).text.length&&to.line<cm.lastLine()){to=Pos(to.line+1,0)}if(from.line<display.viewFrom||to.line>display.viewTo-1){return false}var fromIndex,fromLine,fromNode;if(from.line==display.viewFrom||(fromIndex=findViewIndex(cm,from.line))==0){fromLine=lineNo(display.view[0].line);fromNode=display.view[0].node}else{fromLine=lineNo(display.view[fromIndex].line);fromNode=display.view[fromIndex-1].node.nextSibling}var toIndex=findViewIndex(cm,to.line);var toLine,toNode;if(toIndex==display.view.length-1){toLine=display.viewTo-1;toNode=display.lineDiv.lastChild}else{toLine=lineNo(display.view[toIndex+1].line)-1;toNode=display.view[toIndex+1].node.previousSibling}if(!fromNode){return false}var newText=cm.doc.splitLines(domTextBetween(cm,fromNode,toNode,fromLine,toLine));var oldText=getBetween(cm.doc,Pos(fromLine,0),Pos(toLine,getLine(cm.doc,toLine).text.length));while(newText.length>1&&oldText.length>1){if(lst(newText)==lst(oldText)){newText.pop();oldText.pop();toLine--}else if(newText[0]==oldText[0]){newText.shift();oldText.shift();fromLine++}else{break}}var cutFront=0,cutEnd=0;var newTop=newText[0],oldTop=oldText[0],maxCutFront=Math.min(newTop.length,oldTop.length);while(cutFront<maxCutFront&&newTop.charCodeAt(cutFront)==oldTop.charCodeAt(cutFront)){++cutFront}var newBot=lst(newText),oldBot=lst(oldText);var maxCutEnd=Math.min(newBot.length-(newText.length==1?cutFront:0),oldBot.length-(oldText.length==1?cutFront:0));while(cutEnd<maxCutEnd&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1)){++cutEnd}if(newText.length==1&&oldText.length==1&&fromLine==from.line){while(cutFront&&cutFront>from.ch&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1)){cutFront--;cutEnd++}}newText[newText.length-1]=newBot.slice(0,newBot.length-cutEnd).replace(/^\u200b+/,"");newText[0]=newText[0].slice(cutFront).replace(/\u200b+$/,"");var chFrom=Pos(fromLine,cutFront);var chTo=Pos(toLine,oldText.length?lst(oldText).length-cutEnd:0);if(newText.length>1||newText[0]||cmp(chFrom,chTo)){replaceRange(cm.doc,newText,chFrom,chTo,"+input");return true}};ContentEditableInput.prototype.ensurePolled=function(){this.forceCompositionEnd()};ContentEditableInput.prototype.reset=function(){this.forceCompositionEnd()};ContentEditableInput.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};ContentEditableInput.prototype.readFromDOMSoon=function(){var this$1=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){this$1.readDOMTimeout=null;if(this$1.composing){if(this$1.composing.done){this$1.composing=null}else{return}}this$1.updateFromDOM()},80)};ContentEditableInput.prototype.updateFromDOM=function(){var this$1=this;if(this.cm.isReadOnly()||!this.pollContent()){runInOp(this.cm,function(){return regChange(this$1.cm)})}};ContentEditableInput.prototype.setUneditable=function(node){node.contentEditable="false"};ContentEditableInput.prototype.onKeyPress=function(e){if(e.charCode==0||this.composing){return}e.preventDefault();if(!this.cm.isReadOnly()){operation(this.cm,applyTextInput)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0)}};ContentEditableInput.prototype.readOnlyChanged=function(val){this.div.contentEditable=String(val!="nocursor")};ContentEditableInput.prototype.onContextMenu=function(){};ContentEditableInput.prototype.resetPosition=function(){};ContentEditableInput.prototype.needsContentAttribute=true;function posToDOM(cm,pos){var view=findViewForLine(cm,pos.line);if(!view||view.hidden){return null}var line=getLine(cm.doc,pos.line);var info=mapFromLineView(view,line,pos.line);var order=getOrder(line,cm.doc.direction),side="left";if(order){var partPos=getBidiPartAt(order,pos.ch);side=partPos%2?"right":"left"}var result=nodeAndOffsetInLineMap(info.map,pos.ch,side);result.offset=result.collapse=="right"?result.end:result.start;return result}function isInGutter(node){for(var scan=node;scan;scan=scan.parentNode){if(/CodeMirror-gutter-wrapper/.test(scan.className)){return true}}return false}function badPos(pos,bad){if(bad){pos.bad=true}return pos}function domTextBetween(cm,from,to,fromLine,toLine){var text="",closing=false,lineSep=cm.doc.lineSeparator(),extraLinebreak=false;function recognizeMarker(id){return function(marker){return marker.id==id}}function close(){if(closing){text+=lineSep;if(extraLinebreak){text+=lineSep}closing=extraLinebreak=false}}function addText(str){if(str){close();text+=str}}function walk(node){if(node.nodeType==1){var cmText=node.getAttribute("cm-text");if(cmText){addText(cmText);return}var markerID=node.getAttribute("cm-marker"),range;if(markerID){var found=cm.findMarks(Pos(fromLine,0),Pos(toLine+1,0),recognizeMarker(+markerID));if(found.length&&(range=found[0].find(0))){addText(getBetween(cm.doc,range.from,range.to).join(lineSep))}return}if(node.getAttribute("contenteditable")=="false"){return}var isBlock=/^(pre|div|p|li|table|br)$/i.test(node.nodeName);if(!/^br$/i.test(node.nodeName)&&node.textContent.length==0){return}if(isBlock){close()}for(var i=0;i<node.childNodes.length;i++){walk(node.childNodes[i])}if(/^(pre|p)$/i.test(node.nodeName)){extraLinebreak=true}if(isBlock){closing=true}}else if(node.nodeType==3){addText(node.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}}for(;;){walk(from);if(from==to){break}from=from.nextSibling;extraLinebreak=false}return text}function domToPos(cm,node,offset){var lineNode;if(node==cm.display.lineDiv){lineNode=cm.display.lineDiv.childNodes[offset];if(!lineNode){return badPos(cm.clipPos(Pos(cm.display.viewTo-1)),true)}node=null;offset=0}else{for(lineNode=node;;lineNode=lineNode.parentNode){if(!lineNode||lineNode==cm.display.lineDiv){return null}if(lineNode.parentNode&&lineNode.parentNode==cm.display.lineDiv){break}}}for(var i=0;i<cm.display.view.length;i++){var lineView=cm.display.view[i];if(lineView.node==lineNode){return locateNodeInLineView(lineView,node,offset)}}}function locateNodeInLineView(lineView,node,offset){var wrapper=lineView.text.firstChild,bad=false;if(!node||!contains(wrapper,node)){return badPos(Pos(lineNo(lineView.line),0),true)}if(node==wrapper){bad=true;node=wrapper.childNodes[offset];offset=0;if(!node){var line=lineView.rest?lst(lineView.rest):lineView.line;return badPos(Pos(lineNo(line),line.text.length),bad)}}var textNode=node.nodeType==3?node:null,topNode=node;if(!textNode&&node.childNodes.length==1&&node.firstChild.nodeType==3){textNode=node.firstChild;if(offset){offset=textNode.nodeValue.length}}while(topNode.parentNode!=wrapper){topNode=topNode.parentNode}var measure=lineView.measure,maps=measure.maps;function find(textNode,topNode,offset){for(var i=-1;i<(maps?maps.length:0);i++){var map=i<0?measure.map:maps[i];for(var j=0;j<map.length;j+=3){var curNode=map[j+2];if(curNode==textNode||curNode==topNode){var line=lineNo(i<0?lineView.line:lineView.rest[i]);var ch=map[j]+offset;if(offset<0||curNode!=textNode){ch=map[j+(offset?1:0)]}return Pos(line,ch)}}}}var found=find(textNode,topNode,offset);if(found){return badPos(found,bad)}for(var after=topNode.nextSibling,dist=textNode?textNode.nodeValue.length-offset:0;after;after=after.nextSibling){found=find(after,after.firstChild,0);if(found){return badPos(Pos(found.line,found.ch-dist),bad)}else{dist+=after.textContent.length}}for(var before=topNode.previousSibling,dist$1=offset;before;before=before.previousSibling){found=find(before,before.firstChild,-1);if(found){return badPos(Pos(found.line,found.ch+dist$1),bad)}else{dist$1+=before.textContent.length}}}var TextareaInput=function(cm){this.cm=cm;this.prevInput="";this.pollingFast=false;this.polling=new Delayed;this.hasSelection=false;this.composing=null};TextareaInput.prototype.init=function(display){var this$1=this;var input=this,cm=this.cm;this.createField(display);var te=this.textarea;display.wrapper.insertBefore(this.wrapper,display.wrapper.firstChild);if(ios){te.style.width="0px"}on(te,"input",function(){if(ie&&ie_version>=9&&this$1.hasSelection){this$1.hasSelection=null}input.poll()});on(te,"paste",function(e){if(signalDOMEvent(cm,e)||handlePaste(e,cm)){return}cm.state.pasteIncoming=+new Date;input.fastPoll()});function prepareCopyCut(e){if(signalDOMEvent(cm,e)){return}if(cm.somethingSelected()){setLastCopied({lineWise:false,text:cm.getSelections()})}else if(!cm.options.lineWiseCopyCut){return}else{var ranges=copyableRanges(cm);setLastCopied({lineWise:true,text:ranges.text});if(e.type=="cut"){cm.setSelections(ranges.ranges,null,sel_dontScroll)}else{input.prevInput="";te.value=ranges.text.join("\n");selectInput(te)}}if(e.type=="cut"){cm.state.cutIncoming=+new Date}}on(te,"cut",prepareCopyCut);on(te,"copy",prepareCopyCut);on(display.scroller,"paste",function(e){if(eventInWidget(display,e)||signalDOMEvent(cm,e)){return}if(!te.dispatchEvent){cm.state.pasteIncoming=+new Date;input.focus();return}var event=new Event("paste");event.clipboardData=e.clipboardData;te.dispatchEvent(event)});on(display.lineSpace,"selectstart",function(e){if(!eventInWidget(display,e)){e_preventDefault(e)}});on(te,"compositionstart",function(){var start=cm.getCursor("from");if(input.composing){input.composing.range.clear()}input.composing={start:start,range:cm.markText(start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});on(te,"compositionend",function(){if(input.composing){input.poll();input.composing.range.clear();input.composing=null}})};TextareaInput.prototype.createField=function(_display){this.wrapper=hiddenTextarea();this.textarea=this.wrapper.firstChild};TextareaInput.prototype.screenReaderLabelChanged=function(label){if(label){this.textarea.setAttribute("aria-label",label)}else{this.textarea.removeAttribute("aria-label")}};TextareaInput.prototype.prepareSelection=function(){var cm=this.cm,display=cm.display,doc=cm.doc;var result=prepareSelection(cm);if(cm.options.moveInputWithCursor){var headPos=cursorCoords(cm,doc.sel.primary().head,"div");var wrapOff=display.wrapper.getBoundingClientRect(),lineOff=display.lineDiv.getBoundingClientRect();result.teTop=Math.max(0,Math.min(display.wrapper.clientHeight-10,headPos.top+lineOff.top-wrapOff.top));result.teLeft=Math.max(0,Math.min(display.wrapper.clientWidth-10,headPos.left+lineOff.left-wrapOff.left))}return result};TextareaInput.prototype.showSelection=function(drawn){var cm=this.cm,display=cm.display;removeChildrenAndAdd(display.cursorDiv,drawn.cursors);removeChildrenAndAdd(display.selectionDiv,drawn.selection);if(drawn.teTop!=null){this.wrapper.style.top=drawn.teTop+"px";this.wrapper.style.left=drawn.teLeft+"px"}};TextareaInput.prototype.reset=function(typing){if(this.contextMenuPending||this.composing){return}var cm=this.cm;if(cm.somethingSelected()){this.prevInput="";var content=cm.getSelection();this.textarea.value=content;if(cm.state.focused){selectInput(this.textarea)}if(ie&&ie_version>=9){this.hasSelection=content}}else if(!typing){this.prevInput=this.textarea.value="";if(ie&&ie_version>=9){this.hasSelection=null}}};TextareaInput.prototype.getField=function(){return this.textarea};TextareaInput.prototype.supportsTouch=function(){return false};TextareaInput.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!mobile||activeElt()!=this.textarea)){try{this.textarea.focus()}catch(e){}}};TextareaInput.prototype.blur=function(){this.textarea.blur()};TextareaInput.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};TextareaInput.prototype.receivedFocus=function(){this.slowPoll()};TextareaInput.prototype.slowPoll=function(){var this$1=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){this$1.poll();if(this$1.cm.state.focused){this$1.slowPoll()}})};TextareaInput.prototype.fastPoll=function(){var missed=false,input=this;input.pollingFast=true;function p(){var changed=input.poll();if(!changed&&!missed){missed=true;input.polling.set(60,p)}else{input.pollingFast=false;input.slowPoll()}}input.polling.set(20,p)};TextareaInput.prototype.poll=function(){var this$1=this;var cm=this.cm,input=this.textarea,prevInput=this.prevInput;if(this.contextMenuPending||!cm.state.focused||hasSelection(input)&&!prevInput&&!this.composing||cm.isReadOnly()||cm.options.disableInput||cm.state.keySeq){return false}var text=input.value;if(text==prevInput&&!cm.somethingSelected()){return false}if(ie&&ie_version>=9&&this.hasSelection===text||mac&&/[\uf700-\uf7ff]/.test(text)){cm.display.input.reset();return false}if(cm.doc.sel==cm.display.selForContextMenu){var first=text.charCodeAt(0);if(first==8203&&!prevInput){prevInput="\u200b"}if(first==8666){this.reset();return this.cm.execCommand("undo")}}var same=0,l=Math.min(prevInput.length,text.length);while(same<l&&prevInput.charCodeAt(same)==text.charCodeAt(same)){++same}runInOp(cm,function(){applyTextInput(cm,text.slice(same),prevInput.length-same,null,this$1.composing?"*compose":null);if(text.length>1e3||text.indexOf("\n")>-1){input.value=this$1.prevInput=""}else{this$1.prevInput=text}if(this$1.composing){this$1.composing.range.clear();this$1.composing.range=cm.markText(this$1.composing.start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});return true};TextareaInput.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};TextareaInput.prototype.onKeyPress=function(){if(ie&&ie_version>=9){this.hasSelection=null}this.fastPoll()};TextareaInput.prototype.onContextMenu=function(e){var input=this,cm=input.cm,display=cm.display,te=input.textarea;if(input.contextMenuPending){input.contextMenuPending()}var pos=posFromMouse(cm,e),scrollPos=display.scroller.scrollTop;if(!pos||presto){return}var reset=cm.options.resetSelectionOnContextMenu;if(reset&&cm.doc.sel.contains(pos)==-1){operation(cm,setSelection)(cm.doc,simpleSelection(pos),sel_dontScroll)}var oldCSS=te.style.cssText,oldWrapperCSS=input.wrapper.style.cssText;var wrapperBox=input.wrapper.offsetParent.getBoundingClientRect();input.wrapper.style.cssText="position: static";te.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-wrapperBox.top-5)+"px; left: "+(e.clientX-wrapperBox.left-5)+"px;\n      z-index: 1000; background: "+(ie?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var oldScrollY;if(webkit){oldScrollY=window.scrollY}display.input.focus();if(webkit){window.scrollTo(null,oldScrollY)}display.input.reset();if(!cm.somethingSelected()){te.value=input.prevInput=" "}input.contextMenuPending=rehide;display.selForContextMenu=cm.doc.sel;clearTimeout(display.detectingSelectAll);function prepareSelectAllHack(){if(te.selectionStart!=null){var selected=cm.somethingSelected();var extval="\u200b"+(selected?te.value:"");te.value="\u21da";te.value=extval;input.prevInput=selected?"":"\u200b";te.selectionStart=1;te.selectionEnd=extval.length;display.selForContextMenu=cm.doc.sel}}function rehide(){if(input.contextMenuPending!=rehide){return}input.contextMenuPending=false;input.wrapper.style.cssText=oldWrapperCSS;te.style.cssText=oldCSS;if(ie&&ie_version<9){display.scrollbars.setScrollTop(display.scroller.scrollTop=scrollPos)}if(te.selectionStart!=null){if(!ie||ie&&ie_version<9){prepareSelectAllHack()}var i=0,poll=function(){if(display.selForContextMenu==cm.doc.sel&&te.selectionStart==0&&te.selectionEnd>0&&input.prevInput=="\u200b"){operation(cm,selectAll)(cm)}else if(i++<10){display.detectingSelectAll=setTimeout(poll,500)}else{display.selForContextMenu=null;display.input.reset()}};display.detectingSelectAll=setTimeout(poll,200)}}if(ie&&ie_version>=9){prepareSelectAllHack()}if(captureRightClick){e_stop(e);var mouseup=function(){off(window,"mouseup",mouseup);setTimeout(rehide,20)};on(window,"mouseup",mouseup)}else{setTimeout(rehide,50)}};TextareaInput.prototype.readOnlyChanged=function(val){if(!val){this.reset()}this.textarea.disabled=val=="nocursor";this.textarea.readOnly=!!val};TextareaInput.prototype.setUneditable=function(){};TextareaInput.prototype.needsContentAttribute=false;function fromTextArea(textarea,options){options=options?copyObj(options):{};options.value=textarea.value;if(!options.tabindex&&textarea.tabIndex){options.tabindex=textarea.tabIndex}if(!options.placeholder&&textarea.placeholder){options.placeholder=textarea.placeholder}if(options.autofocus==null){var hasFocus=activeElt();options.autofocus=hasFocus==textarea||textarea.getAttribute("autofocus")!=null&&hasFocus==document.body}function save(){textarea.value=cm.getValue()}var realSubmit;if(textarea.form){on(textarea.form,"submit",save);if(!options.leaveSubmitMethodAlone){var form=textarea.form;realSubmit=form.submit;try{var wrappedSubmit=form.submit=function(){save();form.submit=realSubmit;form.submit();form.submit=wrappedSubmit}}catch(e){}}}options.finishInit=function(cm){cm.save=save;cm.getTextArea=function(){return textarea};cm.toTextArea=function(){cm.toTextArea=isNaN;save();textarea.parentNode.removeChild(cm.getWrapperElement());textarea.style.display="";if(textarea.form){off(textarea.form,"submit",save);if(!options.leaveSubmitMethodAlone&&typeof textarea.form.submit=="function"){textarea.form.submit=realSubmit}}}};textarea.style.display="none";var cm=CodeMirror(function(node){return textarea.parentNode.insertBefore(node,textarea.nextSibling)},options);return cm}function addLegacyProps(CodeMirror){CodeMirror.off=off;CodeMirror.on=on;CodeMirror.wheelEventPixels=wheelEventPixels;CodeMirror.Doc=Doc;CodeMirror.splitLines=splitLinesAuto;CodeMirror.countColumn=countColumn;CodeMirror.findColumn=findColumn;CodeMirror.isWordChar=isWordCharBasic;CodeMirror.Pass=Pass;CodeMirror.signal=signal;CodeMirror.Line=Line;CodeMirror.changeEnd=changeEnd;CodeMirror.scrollbarModel=scrollbarModel;CodeMirror.Pos=Pos;CodeMirror.cmpPos=cmp;CodeMirror.modes=modes;CodeMirror.mimeModes=mimeModes;CodeMirror.resolveMode=resolveMode;CodeMirror.getMode=getMode;CodeMirror.modeExtensions=modeExtensions;CodeMirror.extendMode=extendMode;CodeMirror.copyState=copyState;CodeMirror.startState=startState;CodeMirror.innerMode=innerMode;CodeMirror.commands=commands;CodeMirror.keyMap=keyMap;CodeMirror.keyName=keyName;CodeMirror.isModifierKey=isModifierKey;CodeMirror.lookupKey=lookupKey;CodeMirror.normalizeKeyMap=normalizeKeyMap;CodeMirror.StringStream=StringStream;CodeMirror.SharedTextMarker=SharedTextMarker;CodeMirror.TextMarker=TextMarker;CodeMirror.LineWidget=LineWidget;CodeMirror.e_preventDefault=e_preventDefault;CodeMirror.e_stopPropagation=e_stopPropagation;CodeMirror.e_stop=e_stop;CodeMirror.addClass=addClass;CodeMirror.contains=contains;CodeMirror.rmClass=rmClass;CodeMirror.keyNames=keyNames}defineOptions(CodeMirror);addEditorMethods(CodeMirror);var dontDelegate="iter insert remove copy getEditor constructor".split(" ");for(var prop in Doc.prototype){if(Doc.prototype.hasOwnProperty(prop)&&indexOf(dontDelegate,prop)<0){CodeMirror.prototype[prop]=function(method){return function(){return method.apply(this.doc,arguments)}}(Doc.prototype[prop])}}eventMixin(Doc);CodeMirror.inputStyles={textarea:TextareaInput,contenteditable:ContentEditableInput};CodeMirror.defineMode=function(name){if(!CodeMirror.defaults.mode&&name!="null"){CodeMirror.defaults.mode=name}defineMode.apply(this,arguments)};CodeMirror.defineMIME=defineMIME;CodeMirror.defineMode("null",function(){return{token:function(stream){return stream.skipToEnd()}}});CodeMirror.defineMIME("text/plain","null");CodeMirror.defineExtension=function(name,func){CodeMirror.prototype[name]=func};CodeMirror.defineDocExtension=function(name,func){Doc.prototype[name]=func};CodeMirror.fromTextArea=fromTextArea;addLegacyProps(CodeMirror);CodeMirror.version="5.60.0";return CodeMirror})},{}],78:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var emptyObject={};if(process.env.NODE_ENV!=="production"){Object.freeze(emptyObject)}var validateFormat=function validateFormat(format){};if(process.env.NODE_ENV!=="production"){validateFormat=function validateFormat(format){if(format===undefined){throw new Error("invariant requires an error message argument")}}}function _invariant(condition,format,a,b,c,d,e,f){validateFormat(format);if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]}));error.name="Invariant Violation"}error.framesToPop=1;throw error}}var warning=function(){};if(process.env.NODE_ENV!=="production"){var printWarning=function printWarning(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var argIndex=0;var message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}};warning=function warning(condition,format){if(format===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(format.indexOf("Failed Composite propType: ")===0){return}if(!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}printWarning.apply(undefined,[format].concat(args))}}}var MIXINS_KEY="mixins";function identity(fn){return fn}var ReactPropTypeLocationNames;if(process.env.NODE_ENV!=="production"){ReactPropTypeLocationNames={prop:"prop",context:"context",childContext:"child context"}}else{ReactPropTypeLocationNames={}}function factory(ReactComponent,isValidElement,ReactNoopUpdateQueue){var injectedMixins=[];var ReactClassInterface={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"};var ReactClassStaticInterface={getDerivedStateFromProps:"DEFINE_MANY_MERGED"};var RESERVED_SPEC_KEYS={displayName:function(Constructor,displayName){Constructor.displayName=displayName},mixins:function(Constructor,mixins){if(mixins){for(var i=0;i<mixins.length;i++){mixSpecIntoComponent(Constructor,mixins[i])}}},childContextTypes:function(Constructor,childContextTypes){if(process.env.NODE_ENV!=="production"){validateTypeDef(Constructor,childContextTypes,"childContext")}Constructor.childContextTypes=_assign({},Constructor.childContextTypes,childContextTypes)},contextTypes:function(Constructor,contextTypes){if(process.env.NODE_ENV!=="production"){validateTypeDef(Constructor,contextTypes,"context")}Constructor.contextTypes=_assign({},Constructor.contextTypes,contextTypes)},getDefaultProps:function(Constructor,getDefaultProps){if(Constructor.getDefaultProps){Constructor.getDefaultProps=createMergedResultFunction(Constructor.getDefaultProps,getDefaultProps)}else{Constructor.getDefaultProps=getDefaultProps}},propTypes:function(Constructor,propTypes){if(process.env.NODE_ENV!=="production"){validateTypeDef(Constructor,propTypes,"prop")}Constructor.propTypes=_assign({},Constructor.propTypes,propTypes)},statics:function(Constructor,statics){mixStaticSpecIntoComponent(Constructor,statics)},autobind:function(){}};function validateTypeDef(Constructor,typeDef,location){for(var propName in typeDef){if(typeDef.hasOwnProperty(propName)){if(process.env.NODE_ENV!=="production"){warning(typeof typeDef[propName]==="function","%s: %s type `%s` is invalid; it must be a function, usually from "+"React.PropTypes.",Constructor.displayName||"ReactClass",ReactPropTypeLocationNames[location],propName)}}}}function validateMethodOverride(isAlreadyDefined,name){var specPolicy=ReactClassInterface.hasOwnProperty(name)?ReactClassInterface[name]:null;if(ReactClassMixin.hasOwnProperty(name)){_invariant(specPolicy==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override "+"`%s` from your class specification. Ensure that your method names "+"do not overlap with React methods.",name)}if(isAlreadyDefined){_invariant(specPolicy==="DEFINE_MANY"||specPolicy==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define "+"`%s` on your component more than once. This conflict may be due "+"to a mixin.",name)}}function mixSpecIntoComponent(Constructor,spec){if(!spec){if(process.env.NODE_ENV!=="production"){var typeofSpec=typeof spec;var isMixinValid=typeofSpec==="object"&&spec!==null;if(process.env.NODE_ENV!=="production"){warning(isMixinValid,"%s: You're attempting to include a mixin that is either null "+"or not an object. Check the mixins included by the component, "+"as well as any mixins they include themselves. "+"Expected object but got %s.",Constructor.displayName||"ReactClass",spec===null?null:typeofSpec)}}return}_invariant(typeof spec!=="function","ReactClass: You're attempting to "+"use a component class or function as a mixin. Instead, just use a "+"regular object.");_invariant(!isValidElement(spec),"ReactClass: You're attempting to "+"use a component as a mixin. Instead, just use a regular object.");var proto=Constructor.prototype;var autoBindPairs=proto.__reactAutoBindPairs;if(spec.hasOwnProperty(MIXINS_KEY)){RESERVED_SPEC_KEYS.mixins(Constructor,spec.mixins)}for(var name in spec){if(!spec.hasOwnProperty(name)){continue}if(name===MIXINS_KEY){continue}var property=spec[name];var isAlreadyDefined=proto.hasOwnProperty(name);validateMethodOverride(isAlreadyDefined,name);if(RESERVED_SPEC_KEYS.hasOwnProperty(name)){RESERVED_SPEC_KEYS[name](Constructor,property)}else{var isReactClassMethod=ReactClassInterface.hasOwnProperty(name);var isFunction=typeof property==="function";var shouldAutoBind=isFunction&&!isReactClassMethod&&!isAlreadyDefined&&spec.autobind!==false;if(shouldAutoBind){autoBindPairs.push(name,property);proto[name]=property}else{if(isAlreadyDefined){var specPolicy=ReactClassInterface[name];_invariant(isReactClassMethod&&(specPolicy==="DEFINE_MANY_MERGED"||specPolicy==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s "+"when mixing in component specs.",specPolicy,name);if(specPolicy==="DEFINE_MANY_MERGED"){proto[name]=createMergedResultFunction(proto[name],property)}else if(specPolicy==="DEFINE_MANY"){proto[name]=createChainedFunction(proto[name],property)}}else{proto[name]=property;if(process.env.NODE_ENV!=="production"){if(typeof property==="function"&&spec.displayName){proto[name].displayName=spec.displayName+"_"+name}}}}}}}function mixStaticSpecIntoComponent(Constructor,statics){if(!statics){return}for(var name in statics){var property=statics[name];if(!statics.hasOwnProperty(name)){continue}var isReserved=name in RESERVED_SPEC_KEYS;_invariant(!isReserved,"ReactClass: You are attempting to define a reserved "+'property, `%s`, that shouldn\'t be on the "statics" key. Define it '+"as an instance property instead; it will still be accessible on the "+"constructor.",name);var isAlreadyDefined=name in Constructor;if(isAlreadyDefined){var specPolicy=ReactClassStaticInterface.hasOwnProperty(name)?ReactClassStaticInterface[name]:null;_invariant(specPolicy==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define "+"`%s` on your component more than once. This conflict may be "+"due to a mixin.",name);Constructor[name]=createMergedResultFunction(Constructor[name],property);return}Constructor[name]=property}}function mergeIntoWithNoDuplicateKeys(one,two){_invariant(one&&two&&typeof one==="object"&&typeof two==="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var key in two){if(two.hasOwnProperty(key)){_invariant(one[key]===undefined,"mergeIntoWithNoDuplicateKeys(): "+"Tried to merge two objects with the same key: `%s`. This conflict "+"may be due to a mixin; in particular, this may be caused by two "+"getInitialState() or getDefaultProps() methods returning objects "+"with clashing keys.",key);one[key]=two[key]}}return one}function createMergedResultFunction(one,two){return function mergedResult(){var a=one.apply(this,arguments);var b=two.apply(this,arguments);if(a==null){return b}else if(b==null){return a}var c={};mergeIntoWithNoDuplicateKeys(c,a);mergeIntoWithNoDuplicateKeys(c,b);return c}}function createChainedFunction(one,two){return function chainedFunction(){one.apply(this,arguments);two.apply(this,arguments)}}function bindAutoBindMethod(component,method){var boundMethod=method.bind(component);if(process.env.NODE_ENV!=="production"){boundMethod.__reactBoundContext=component;boundMethod.__reactBoundMethod=method;boundMethod.__reactBoundArguments=null;var componentName=component.constructor.displayName;var _bind=boundMethod.bind;boundMethod.bind=function(newThis){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}if(newThis!==component&&newThis!==null){if(process.env.NODE_ENV!=="production"){warning(false,"bind(): React component methods may only be bound to the "+"component instance. See %s",componentName)}}else if(!args.length){if(process.env.NODE_ENV!=="production"){warning(false,"bind(): You are binding a component method to the component. "+"React does this for you automatically in a high-performance "+"way, so you can safely remove this call. See %s",componentName)}return boundMethod}var reboundMethod=_bind.apply(boundMethod,arguments);reboundMethod.__reactBoundContext=component;reboundMethod.__reactBoundMethod=method;reboundMethod.__reactBoundArguments=args;return reboundMethod}}return boundMethod}function bindAutoBindMethods(component){var pairs=component.__reactAutoBindPairs;for(var i=0;i<pairs.length;i+=2){var autoBindKey=pairs[i];var method=pairs[i+1];component[autoBindKey]=bindAutoBindMethod(component,method)}}var IsMountedPreMixin={componentDidMount:function(){this.__isMounted=true}};var IsMountedPostMixin={componentWillUnmount:function(){this.__isMounted=false}};var ReactClassMixin={replaceState:function(newState,callback){this.updater.enqueueReplaceState(this,newState,callback)},isMounted:function(){if(process.env.NODE_ENV!=="production"){warning(this.__didWarnIsMounted,"%s: isMounted is deprecated. Instead, make sure to clean up "+"subscriptions and pending requests in componentWillUnmount to "+"prevent memory leaks.",this.constructor&&this.constructor.displayName||this.name||"Component");this.__didWarnIsMounted=true}return!!this.__isMounted}};var ReactClassComponent=function(){};_assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);function createClass(spec){var Constructor=identity(function(props,context,updater){if(process.env.NODE_ENV!=="production"){warning(this instanceof Constructor,"Something is calling a React component directly. Use a factory or "+"JSX instead. See: https://fb.me/react-legacyfactory")}if(this.__reactAutoBindPairs.length){bindAutoBindMethods(this)}this.props=props;this.context=context;this.refs=emptyObject;this.updater=updater||ReactNoopUpdateQueue;this.state=null;var initialState=this.getInitialState?this.getInitialState():null;if(process.env.NODE_ENV!=="production"){if(initialState===undefined&&this.getInitialState._isMockFunction){initialState=null}}_invariant(typeof initialState==="object"&&!Array.isArray(initialState),"%s.getInitialState(): must return an object or null",Constructor.displayName||"ReactCompositeComponent");this.state=initialState});Constructor.prototype=new ReactClassComponent;Constructor.prototype.constructor=Constructor;Constructor.prototype.__reactAutoBindPairs=[];injectedMixins.forEach(mixSpecIntoComponent.bind(null,Constructor));mixSpecIntoComponent(Constructor,IsMountedPreMixin);mixSpecIntoComponent(Constructor,spec);mixSpecIntoComponent(Constructor,IsMountedPostMixin);if(Constructor.getDefaultProps){Constructor.defaultProps=Constructor.getDefaultProps()}if(process.env.NODE_ENV!=="production"){if(Constructor.getDefaultProps){Constructor.getDefaultProps.isReactClassApproved={}}if(Constructor.prototype.getInitialState){Constructor.prototype.getInitialState.isReactClassApproved={}}}_invariant(Constructor.prototype.render,"createClass(...): Class specification must implement a `render` method.");if(process.env.NODE_ENV!=="production"){warning(!Constructor.prototype.componentShouldUpdate,"%s has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value.",spec.displayName||"A component");warning(!Constructor.prototype.componentWillRecieveProps,"%s has a method called "+"componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",spec.displayName||"A component");warning(!Constructor.prototype.UNSAFE_componentWillRecieveProps,"%s has a method called UNSAFE_componentWillRecieveProps(). "+"Did you mean UNSAFE_componentWillReceiveProps()?",spec.displayName||"A component")}for(var methodName in ReactClassInterface){if(!Constructor.prototype[methodName]){Constructor.prototype[methodName]=null}}return Constructor}return createClass}module.exports=factory}).call(this)}).call(this,require("_process"))},{_process:25,"object-assign":166}],79:[function(require,module,exports){(function(global){(function(){(function(){"use strict";var Syntax,Precedence,BinaryPrecedence,SourceNode,estraverse,esutils,isArray,base,indent,json,renumber,hexadecimal,quotes,escapeless,newline,space,parentheses,semicolons,safeConcatenation,directive,extra,parse,sourceMap,sourceCode,preserveBlankLines,FORMAT_MINIFY,FORMAT_DEFAULTS;estraverse=require("estraverse");esutils=require("esutils");Syntax=estraverse.Syntax;function isExpression(node){return CodeGenerator.Expression.hasOwnProperty(node.type)}function isStatement(node){return CodeGenerator.Statement.hasOwnProperty(node.type)}Precedence={Sequence:0,Yield:1,Await:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19};BinaryPrecedence={"||":Precedence.LogicalOR,"&&":Precedence.LogicalAND,"|":Precedence.BitwiseOR,"^":Precedence.BitwiseXOR,"&":Precedence.BitwiseAND,"==":Precedence.Equality,"!=":Precedence.Equality,"===":Precedence.Equality,"!==":Precedence.Equality,is:Precedence.Equality,isnt:Precedence.Equality,"<":Precedence.Relational,">":Precedence.Relational,"<=":Precedence.Relational,">=":Precedence.Relational,in:Precedence.Relational,instanceof:Precedence.Relational,"<<":Precedence.BitwiseSHIFT,">>":Precedence.BitwiseSHIFT,">>>":Precedence.BitwiseSHIFT,"+":Precedence.Additive,"-":Precedence.Additive,"*":Precedence.Multiplicative,"%":Precedence.Multiplicative,"/":Precedence.Multiplicative};var F_ALLOW_IN=1,F_ALLOW_CALL=1<<1,F_ALLOW_UNPARATH_NEW=1<<2,F_FUNC_BODY=1<<3,F_DIRECTIVE_CTX=1<<4,F_SEMICOLON_OPT=1<<5;var E_FTT=F_ALLOW_CALL|F_ALLOW_UNPARATH_NEW,E_TTF=F_ALLOW_IN|F_ALLOW_CALL,E_TTT=F_ALLOW_IN|F_ALLOW_CALL|F_ALLOW_UNPARATH_NEW,E_TFF=F_ALLOW_IN,E_FFT=F_ALLOW_UNPARATH_NEW,E_TFT=F_ALLOW_IN|F_ALLOW_UNPARATH_NEW;var S_TFFF=F_ALLOW_IN,S_TFFT=F_ALLOW_IN|F_SEMICOLON_OPT,S_FFFF=0,S_TFTF=F_ALLOW_IN|F_DIRECTIVE_CTX,S_TTFF=F_ALLOW_IN|F_FUNC_BODY;function getDefaultOptions(){return{indent:null,base:null,parse:null,comment:false,format:{indent:{style:"    ",base:0,adjustMultilineComment:false},newline:"\n",space:" ",json:false,renumber:false,hexadecimal:false,quotes:"single",escapeless:false,compact:false,parentheses:true,semicolons:true,safeConcatenation:false,preserveBlankLines:false},moz:{comprehensionExpressionStartsWithAssignment:false,starlessGenerator:false},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:false,directive:false,raw:true,verbatim:null,sourceCode:null}}function stringRepeat(str,num){var result="";for(num|=0;num>0;num>>>=1,str+=str){if(num&1){result+=str}}return result}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function hasLineTerminator(str){return/[\r\n]/g.test(str)}function endsWithLineTerminator(str){var len=str.length;return len&&esutils.code.isLineTerminator(str.charCodeAt(len-1))}function merge(target,override){var key;for(key in override){if(override.hasOwnProperty(key)){target[key]=override[key]}}return target}function updateDeeply(target,override){var key,val;function isHashObject(target){return typeof target==="object"&&target instanceof Object&&!(target instanceof RegExp)}for(key in override){if(override.hasOwnProperty(key)){val=override[key];if(isHashObject(val)){if(isHashObject(target[key])){updateDeeply(target[key],val)}else{target[key]=updateDeeply({},val)}}else{target[key]=val}}}return target}function generateNumber(value){var result,point,temp,exponent,pos;if(value!==value){throw new Error("Numeric literal whose value is NaN")}if(value<0||value===0&&1/value<0){throw new Error("Numeric literal whose value is negative")}if(value===1/0){return json?"null":renumber?"1e400":"1e+400"}result=""+value;if(!renumber||result.length<3){return result}point=result.indexOf(".");if(!json&&result.charCodeAt(0)===48&&point===1){point=0;result=result.slice(1)}temp=result;result=result.replace("e+","e");exponent=0;if((pos=temp.indexOf("e"))>0){exponent=+temp.slice(pos+1);temp=temp.slice(0,pos)}if(point>=0){exponent-=temp.length-point-1;temp=+(temp.slice(0,point)+temp.slice(point+1))+""}pos=0;while(temp.charCodeAt(temp.length+pos-1)===48){--pos}if(pos!==0){exponent-=pos;temp=temp.slice(0,pos)}if(exponent!==0){temp+="e"+exponent}if((temp.length<result.length||hexadecimal&&value>1e12&&Math.floor(value)===value&&(temp="0x"+value.toString(16)).length<result.length)&&+temp===value){result=temp}return result}function escapeRegExpCharacter(ch,previousIsBackslash){if((ch&~1)===8232){return(previousIsBackslash?"u":"\\u")+(ch===8232?"2028":"2029")}else if(ch===10||ch===13){return(previousIsBackslash?"":"\\")+(ch===10?"n":"r")}return String.fromCharCode(ch)}function generateRegExp(reg){var match,result,flags,i,iz,ch,characterInBrack,previousIsBackslash;result=reg.toString();if(reg.source){match=result.match(/\/([^/]*)$/);if(!match){return result}flags=match[1];result="";characterInBrack=false;previousIsBackslash=false;for(i=0,iz=reg.source.length;i<iz;++i){ch=reg.source.charCodeAt(i);if(!previousIsBackslash){if(characterInBrack){if(ch===93){characterInBrack=false}}else{if(ch===47){result+="\\"}else if(ch===91){characterInBrack=true}}result+=escapeRegExpCharacter(ch,previousIsBackslash);previousIsBackslash=ch===92}else{result+=escapeRegExpCharacter(ch,previousIsBackslash);previousIsBackslash=false}}return"/"+result+"/"+flags}return result}function escapeAllowedCharacter(code,next){var hex;if(code===8){return"\\b"}if(code===12){return"\\f"}if(code===9){return"\\t"}hex=code.toString(16).toUpperCase();if(json||code>255){return"\\u"+"0000".slice(hex.length)+hex}else if(code===0&&!esutils.code.isDecimalDigit(next)){return"\\0"}else if(code===11){return"\\x0B"}else{return"\\x"+"00".slice(hex.length)+hex}}function escapeDisallowedCharacter(code){if(code===92){return"\\\\"}if(code===10){return"\\n"}if(code===13){return"\\r"}if(code===8232){return"\\u2028"}if(code===8233){return"\\u2029"}throw new Error("Incorrectly classified character")}function escapeDirective(str){var i,iz,code,quote;quote=quotes==="double"?'"':"'";for(i=0,iz=str.length;i<iz;++i){code=str.charCodeAt(i);if(code===39){quote='"';break}else if(code===34){quote="'";break}else if(code===92){++i}}return quote+str+quote}function escapeString(str){var result="",i,len,code,singleQuotes=0,doubleQuotes=0,single,quote;for(i=0,len=str.length;i<len;++i){code=str.charCodeAt(i);if(code===39){++singleQuotes}else if(code===34){++doubleQuotes}else if(code===47&&json){result+="\\"}else if(esutils.code.isLineTerminator(code)||code===92){result+=escapeDisallowedCharacter(code);continue}else if(!esutils.code.isIdentifierPartES5(code)&&(json&&code<32||!json&&!escapeless&&(code<32||code>126))){result+=escapeAllowedCharacter(code,str.charCodeAt(i+1));continue}result+=String.fromCharCode(code)}single=!(quotes==="double"||quotes==="auto"&&doubleQuotes<singleQuotes);quote=single?"'":'"';if(!(single?singleQuotes:doubleQuotes)){return quote+result+quote}str=result;result=quote;for(i=0,len=str.length;i<len;++i){code=str.charCodeAt(i);if(code===39&&single||code===34&&!single){result+="\\"}result+=String.fromCharCode(code)}return result+quote}function flattenToString(arr){var i,iz,elem,result="";for(i=0,iz=arr.length;i<iz;++i){elem=arr[i];result+=isArray(elem)?flattenToString(elem):elem}return result}function toSourceNodeWhenNeeded(generated,node){if(!sourceMap){if(isArray(generated)){return flattenToString(generated)}else{return generated}}if(node==null){if(generated instanceof SourceNode){return generated}else{node={}}}if(node.loc==null){return new SourceNode(null,null,sourceMap,generated,node.name||null)}return new SourceNode(node.loc.start.line,node.loc.start.column,sourceMap===true?node.loc.source||null:sourceMap,generated,node.name||null)}function noEmptySpace(){return space?space:" "}function join(left,right){var leftSource,rightSource,leftCharCode,rightCharCode;leftSource=toSourceNodeWhenNeeded(left).toString();if(leftSource.length===0){return[right]}rightSource=toSourceNodeWhenNeeded(right).toString();if(rightSource.length===0){return[left]}leftCharCode=leftSource.charCodeAt(leftSource.length-1);rightCharCode=rightSource.charCodeAt(0);if((leftCharCode===43||leftCharCode===45)&&leftCharCode===rightCharCode||esutils.code.isIdentifierPartES5(leftCharCode)&&esutils.code.isIdentifierPartES5(rightCharCode)||leftCharCode===47&&rightCharCode===105){return[left,noEmptySpace(),right]}else if(esutils.code.isWhiteSpace(leftCharCode)||esutils.code.isLineTerminator(leftCharCode)||esutils.code.isWhiteSpace(rightCharCode)||esutils.code.isLineTerminator(rightCharCode)){return[left,right]}return[left,space,right]}function addIndent(stmt){return[base,stmt]}function withIndent(fn){var previousBase;previousBase=base;base+=indent;fn(base);base=previousBase}function calculateSpaces(str){var i;for(i=str.length-1;i>=0;--i){if(esutils.code.isLineTerminator(str.charCodeAt(i))){break}}return str.length-1-i}function adjustMultilineComment(value,specialBase){var array,i,len,line,j,spaces,previousBase,sn;array=value.split(/\r\n|[\r\n]/);spaces=Number.MAX_VALUE;for(i=1,len=array.length;i<len;++i){line=array[i];j=0;while(j<line.length&&esutils.code.isWhiteSpace(line.charCodeAt(j))){++j}if(spaces>j){spaces=j}}if(typeof specialBase!=="undefined"){previousBase=base;if(array[1][spaces]==="*"){specialBase+=" "}base=specialBase}else{if(spaces&1){--spaces}previousBase=base}for(i=1,len=array.length;i<len;++i){sn=toSourceNodeWhenNeeded(addIndent(array[i].slice(spaces)));array[i]=sourceMap?sn.join(""):sn}base=previousBase;return array.join("\n")}function generateComment(comment,specialBase){if(comment.type==="Line"){if(endsWithLineTerminator(comment.value)){return"//"+comment.value}else{var result="//"+comment.value;if(!preserveBlankLines){result+="\n"}return result}}if(extra.format.indent.adjustMultilineComment&&/[\n\r]/.test(comment.value)){return adjustMultilineComment("/*"+comment.value+"*/",specialBase)}return"/*"+comment.value+"*/"}function addComments(stmt,result){var i,len,comment,save,tailingToStatement,specialBase,fragment,extRange,range,prevRange,prefix,infix,suffix,count;if(stmt.leadingComments&&stmt.leadingComments.length>0){save=result;if(preserveBlankLines){comment=stmt.leadingComments[0];result=[];extRange=comment.extendedRange;range=comment.range;prefix=sourceCode.substring(extRange[0],range[0]);count=(prefix.match(/\n/g)||[]).length;if(count>0){result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)))}else{result.push(prefix);result.push(generateComment(comment))}prevRange=range;for(i=1,len=stmt.leadingComments.length;i<len;i++){comment=stmt.leadingComments[i];range=comment.range;infix=sourceCode.substring(prevRange[1],range[0]);count=(infix.match(/\n/g)||[]).length;result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)));prevRange=range}suffix=sourceCode.substring(range[1],extRange[1]);count=(suffix.match(/\n/g)||[]).length;result.push(stringRepeat("\n",count))}else{comment=stmt.leadingComments[0];result=[];if(safeConcatenation&&stmt.type===Syntax.Program&&stmt.body.length===0){result.push("\n")}result.push(generateComment(comment));if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push("\n")}for(i=1,len=stmt.leadingComments.length;i<len;++i){comment=stmt.leadingComments[i];fragment=[generateComment(comment)];if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){fragment.push("\n")}result.push(addIndent(fragment))}}result.push(addIndent(save))}if(stmt.trailingComments){if(preserveBlankLines){comment=stmt.trailingComments[0];extRange=comment.extendedRange;range=comment.range;prefix=sourceCode.substring(extRange[0],range[0]);count=(prefix.match(/\n/g)||[]).length;if(count>0){result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)))}else{result.push(prefix);result.push(generateComment(comment))}}else{tailingToStatement=!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString());specialBase=stringRepeat(" ",calculateSpaces(toSourceNodeWhenNeeded([base,result,indent]).toString()));for(i=0,len=stmt.trailingComments.length;i<len;++i){comment=stmt.trailingComments[i];if(tailingToStatement){if(i===0){result=[result,indent]}else{result=[result,specialBase]}result.push(generateComment(comment,specialBase))}else{result=[result,addIndent(generateComment(comment))]}if(i!==len-1&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result=[result,"\n"]}}}}return result}function generateBlankLines(start,end,result){var j,newlineCount=0;for(j=start;j<end;j++){if(sourceCode[j]==="\n"){newlineCount++}}for(j=1;j<newlineCount;j++){result.push(newline)}}function parenthesize(text,current,should){if(current<should){return["(",text,")"]}return text}function generateVerbatimString(string){var i,iz,result;result=string.split(/\r\n|\n/);for(i=1,iz=result.length;i<iz;i++){result[i]=newline+base+result[i]}return result}function generateVerbatim(expr,precedence){var verbatim,result,prec;verbatim=expr[extra.verbatim];if(typeof verbatim==="string"){result=parenthesize(generateVerbatimString(verbatim),Precedence.Sequence,precedence)}else{result=generateVerbatimString(verbatim.content);prec=verbatim.precedence!=null?verbatim.precedence:Precedence.Sequence;result=parenthesize(result,prec,precedence)}return toSourceNodeWhenNeeded(result,expr)}function CodeGenerator(){}CodeGenerator.prototype.maybeBlock=function(stmt,flags){var result,noLeadingComment,that=this;noLeadingComment=!extra.comment||!stmt.leadingComments;if(stmt.type===Syntax.BlockStatement&&noLeadingComment){return[space,this.generateStatement(stmt,flags)]}if(stmt.type===Syntax.EmptyStatement&&noLeadingComment){return";"}withIndent(function(){result=[newline,addIndent(that.generateStatement(stmt,flags))]});return result};CodeGenerator.prototype.maybeBlockSuffix=function(stmt,result){var ends=endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString());if(stmt.type===Syntax.BlockStatement&&(!extra.comment||!stmt.leadingComments)&&!ends){return[result,space]}if(ends){return[result,base]}return[result,newline,base]};function generateIdentifier(node){return toSourceNodeWhenNeeded(node.name,node)}function generateAsyncPrefix(node,spaceRequired){return node.async?"async"+(spaceRequired?noEmptySpace():space):""}function generateStarSuffix(node){var isGenerator=node.generator&&!extra.moz.starlessGenerator;return isGenerator?"*"+space:""}function generateMethodPrefix(prop){var func=prop.value;if(func.async){return generateAsyncPrefix(func,!prop.computed)}else{return generateStarSuffix(func)?"*":""}}CodeGenerator.prototype.generatePattern=function(node,precedence,flags){if(node.type===Syntax.Identifier){return generateIdentifier(node)}return this.generateExpression(node,precedence,flags)};CodeGenerator.prototype.generateFunctionParams=function(node){var i,iz,result,hasDefault;hasDefault=false;if(node.type===Syntax.ArrowFunctionExpression&&!node.rest&&(!node.defaults||node.defaults.length===0)&&node.params.length===1&&node.params[0].type===Syntax.Identifier){result=[generateAsyncPrefix(node,true),generateIdentifier(node.params[0])]}else{result=node.type===Syntax.ArrowFunctionExpression?[generateAsyncPrefix(node,false)]:[];result.push("(");if(node.defaults){hasDefault=true}for(i=0,iz=node.params.length;i<iz;++i){if(hasDefault&&node.defaults[i]){result.push(this.generateAssignment(node.params[i],node.defaults[i],"=",Precedence.Assignment,E_TTT))}else{result.push(this.generatePattern(node.params[i],Precedence.Assignment,E_TTT))}if(i+1<iz){result.push(","+space)}}if(node.rest){if(node.params.length){result.push(","+space)}result.push("...");result.push(generateIdentifier(node.rest))}result.push(")")}return result};CodeGenerator.prototype.generateFunctionBody=function(node){var result,expr;result=this.generateFunctionParams(node);if(node.type===Syntax.ArrowFunctionExpression){result.push(space);result.push("=>")}if(node.expression){result.push(space);expr=this.generateExpression(node.body,Precedence.Assignment,E_TTT);if(expr.toString().charAt(0)==="{"){expr=["(",expr,")"]}result.push(expr)}else{result.push(this.maybeBlock(node.body,S_TTFF))}return result};CodeGenerator.prototype.generateIterationForStatement=function(operator,stmt,flags){var result=["for"+space+"("],that=this;withIndent(function(){if(stmt.left.type===Syntax.VariableDeclaration){withIndent(function(){result.push(stmt.left.kind+noEmptySpace());result.push(that.generateStatement(stmt.left.declarations[0],S_FFFF))})}else{result.push(that.generateExpression(stmt.left,Precedence.Call,E_TTT))}result=join(result,operator);result=[join(result,that.generateExpression(stmt.right,Precedence.Sequence,E_TTT)),")"]});result.push(this.maybeBlock(stmt.body,flags));return result};CodeGenerator.prototype.generatePropertyKey=function(expr,computed,value){var result=[];if(computed){result.push("[")}if(value.type==="AssignmentPattern"){result.push(this.AssignmentPattern(value,Precedence.Sequence,E_TTT))}else{result.push(this.generateExpression(expr,Precedence.Sequence,E_TTT))}if(computed){result.push("]")}return result};CodeGenerator.prototype.generateAssignment=function(left,right,operator,precedence,flags){if(Precedence.Assignment<precedence){flags|=F_ALLOW_IN}return parenthesize([this.generateExpression(left,Precedence.Call,flags),space+operator+space,this.generateExpression(right,Precedence.Assignment,flags)],Precedence.Assignment,precedence)};CodeGenerator.prototype.semicolon=function(flags){if(!semicolons&&flags&F_SEMICOLON_OPT){return""}return";"};CodeGenerator.Statement={BlockStatement:function(stmt,flags){var range,content,result=["{",newline],that=this;withIndent(function(){if(stmt.body.length===0&&preserveBlankLines){range=stmt.range;if(range[1]-range[0]>2){content=sourceCode.substring(range[0]+1,range[1]-1);if(content[0]==="\n"){result=["{"]}result.push(content)}}var i,iz,fragment,bodyFlags;bodyFlags=S_TFFF;if(flags&F_FUNC_BODY){bodyFlags|=F_DIRECTIVE_CTX}for(i=0,iz=stmt.body.length;i<iz;++i){if(preserveBlankLines){if(i===0){if(stmt.body[0].leadingComments){range=stmt.body[0].leadingComments[0].extendedRange;content=sourceCode.substring(range[0],range[1]);if(content[0]==="\n"){result=["{"]}}if(!stmt.body[0].leadingComments){generateBlankLines(stmt.range[0],stmt.body[0].range[0],result)}}if(i>0){if(!stmt.body[i-1].trailingComments&&!stmt.body[i].leadingComments){generateBlankLines(stmt.body[i-1].range[1],stmt.body[i].range[0],result)}}}if(i===iz-1){bodyFlags|=F_SEMICOLON_OPT}if(stmt.body[i].leadingComments&&preserveBlankLines){fragment=that.generateStatement(stmt.body[i],bodyFlags)}else{fragment=addIndent(that.generateStatement(stmt.body[i],bodyFlags))}result.push(fragment);if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){if(preserveBlankLines&&i<iz-1){if(!stmt.body[i+1].leadingComments){result.push(newline)}}else{result.push(newline)}}if(preserveBlankLines){if(i===iz-1){if(!stmt.body[i].trailingComments){generateBlankLines(stmt.body[i].range[1],stmt.range[1],result)}}}}});result.push(addIndent("}"));return result},BreakStatement:function(stmt,flags){if(stmt.label){return"break "+stmt.label.name+this.semicolon(flags)}return"break"+this.semicolon(flags)},ContinueStatement:function(stmt,flags){if(stmt.label){return"continue "+stmt.label.name+this.semicolon(flags)}return"continue"+this.semicolon(flags)},ClassBody:function(stmt,flags){var result=["{",newline],that=this;withIndent(function(indent){var i,iz;for(i=0,iz=stmt.body.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.body[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base);result.push("}");return result},ClassDeclaration:function(stmt,flags){var result,fragment;result=["class"];if(stmt.id){result=join(result,this.generateExpression(stmt.id,Precedence.Sequence,E_TTT))}if(stmt.superClass){fragment=join("extends",this.generateExpression(stmt.superClass,Precedence.Assignment,E_TTT));result=join(result,fragment)}result.push(space);result.push(this.generateStatement(stmt.body,S_TFFT));return result},DirectiveStatement:function(stmt,flags){if(extra.raw&&stmt.raw){return stmt.raw+this.semicolon(flags)}return escapeDirective(stmt.directive)+this.semicolon(flags)},DoWhileStatement:function(stmt,flags){var result=join("do",this.maybeBlock(stmt.body,S_TFFF));result=this.maybeBlockSuffix(stmt.body,result);return join(result,["while"+space+"(",this.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"+this.semicolon(flags)])},CatchClause:function(stmt,flags){var result,that=this;withIndent(function(){var guard;result=["catch"+space+"(",that.generateExpression(stmt.param,Precedence.Sequence,E_TTT),")"];if(stmt.guard){guard=that.generateExpression(stmt.guard,Precedence.Sequence,E_TTT);result.splice(2,0," if ",guard)}});result.push(this.maybeBlock(stmt.body,S_TFFF));return result},DebuggerStatement:function(stmt,flags){return"debugger"+this.semicolon(flags)},EmptyStatement:function(stmt,flags){return";"},ExportDefaultDeclaration:function(stmt,flags){var result=["export"],bodyFlags;bodyFlags=flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF;result=join(result,"default");if(isStatement(stmt.declaration)){result=join(result,this.generateStatement(stmt.declaration,bodyFlags))}else{result=join(result,this.generateExpression(stmt.declaration,Precedence.Assignment,E_TTT)+this.semicolon(flags))}return result},ExportNamedDeclaration:function(stmt,flags){var result=["export"],bodyFlags,that=this;bodyFlags=flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF;if(stmt.declaration){return join(result,this.generateStatement(stmt.declaration,bodyFlags))}if(stmt.specifiers){if(stmt.specifiers.length===0){result=join(result,"{"+space+"}")}else if(stmt.specifiers[0].type===Syntax.ExportBatchSpecifier){result=join(result,this.generateExpression(stmt.specifiers[0],Precedence.Sequence,E_TTT))}else{result=join(result,"{");withIndent(function(indent){var i,iz;result.push(newline);for(i=0,iz=stmt.specifiers.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.specifiers[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base+"}")}if(stmt.source){result=join(result,["from"+space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)])}else{result.push(this.semicolon(flags))}}return result},ExportAllDeclaration:function(stmt,flags){return["export"+space,"*"+space,"from"+space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)]},ExpressionStatement:function(stmt,flags){var result,fragment;function isClassPrefixed(fragment){var code;if(fragment.slice(0,5)!=="class"){return false}code=fragment.charCodeAt(5);return code===123||esutils.code.isWhiteSpace(code)||esutils.code.isLineTerminator(code)}function isFunctionPrefixed(fragment){var code;if(fragment.slice(0,8)!=="function"){return false}code=fragment.charCodeAt(8);return code===40||esutils.code.isWhiteSpace(code)||code===42||esutils.code.isLineTerminator(code)}function isAsyncPrefixed(fragment){var code,i,iz;if(fragment.slice(0,5)!=="async"){return false}if(!esutils.code.isWhiteSpace(fragment.charCodeAt(5))){return false}for(i=6,iz=fragment.length;i<iz;++i){if(!esutils.code.isWhiteSpace(fragment.charCodeAt(i))){break}}if(i===iz){return false}if(fragment.slice(i,i+8)!=="function"){return false}code=fragment.charCodeAt(i+8);return code===40||esutils.code.isWhiteSpace(code)||code===42||esutils.code.isLineTerminator(code)}result=[this.generateExpression(stmt.expression,Precedence.Sequence,E_TTT)];fragment=toSourceNodeWhenNeeded(result).toString();if(fragment.charCodeAt(0)===123||isClassPrefixed(fragment)||isFunctionPrefixed(fragment)||isAsyncPrefixed(fragment)||directive&&flags&F_DIRECTIVE_CTX&&stmt.expression.type===Syntax.Literal&&typeof stmt.expression.value==="string"){result=["(",result,")"+this.semicolon(flags)]}else{result.push(this.semicolon(flags))}return result},ImportDeclaration:function(stmt,flags){var result,cursor,that=this;if(stmt.specifiers.length===0){return["import",space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)]}result=["import"];cursor=0;if(stmt.specifiers[cursor].type===Syntax.ImportDefaultSpecifier){result=join(result,[this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT)]);++cursor}if(stmt.specifiers[cursor]){if(cursor!==0){result.push(",")}if(stmt.specifiers[cursor].type===Syntax.ImportNamespaceSpecifier){result=join(result,[space,this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT)])}else{result.push(space+"{");if(stmt.specifiers.length-cursor===1){result.push(space);result.push(this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT));result.push(space+"}"+space)}else{withIndent(function(indent){var i,iz;result.push(newline);for(i=cursor,iz=stmt.specifiers.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.specifiers[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base+"}"+space)}}}result=join(result,["from"+space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)]);return result},VariableDeclarator:function(stmt,flags){var itemFlags=flags&F_ALLOW_IN?E_TTT:E_FTT;if(stmt.init){return[this.generateExpression(stmt.id,Precedence.Assignment,itemFlags),space,"=",space,this.generateExpression(stmt.init,Precedence.Assignment,itemFlags)]}return this.generatePattern(stmt.id,Precedence.Assignment,itemFlags)},VariableDeclaration:function(stmt,flags){var result,i,iz,node,bodyFlags,that=this;result=[stmt.kind];bodyFlags=flags&F_ALLOW_IN?S_TFFF:S_FFFF;function block(){node=stmt.declarations[0];if(extra.comment&&node.leadingComments){result.push("\n");result.push(addIndent(that.generateStatement(node,bodyFlags)))}else{result.push(noEmptySpace());result.push(that.generateStatement(node,bodyFlags))}for(i=1,iz=stmt.declarations.length;i<iz;++i){node=stmt.declarations[i];if(extra.comment&&node.leadingComments){result.push(","+newline);result.push(addIndent(that.generateStatement(node,bodyFlags)))}else{result.push(","+space);result.push(that.generateStatement(node,bodyFlags))}}}if(stmt.declarations.length>1){withIndent(block)}else{block()}result.push(this.semicolon(flags));return result},ThrowStatement:function(stmt,flags){return[join("throw",this.generateExpression(stmt.argument,Precedence.Sequence,E_TTT)),this.semicolon(flags)]},TryStatement:function(stmt,flags){var result,i,iz,guardedHandlers;result=["try",this.maybeBlock(stmt.block,S_TFFF)];result=this.maybeBlockSuffix(stmt.block,result);if(stmt.handlers){for(i=0,iz=stmt.handlers.length;i<iz;++i){result=join(result,this.generateStatement(stmt.handlers[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(stmt.handlers[i].body,result)}}}else{guardedHandlers=stmt.guardedHandlers||[];for(i=0,iz=guardedHandlers.length;i<iz;++i){result=join(result,this.generateStatement(guardedHandlers[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(guardedHandlers[i].body,result)}}if(stmt.handler){if(isArray(stmt.handler)){for(i=0,iz=stmt.handler.length;i<iz;++i){result=join(result,this.generateStatement(stmt.handler[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(stmt.handler[i].body,result)}}}else{result=join(result,this.generateStatement(stmt.handler,S_TFFF));if(stmt.finalizer){result=this.maybeBlockSuffix(stmt.handler.body,result)}}}}if(stmt.finalizer){result=join(result,["finally",this.maybeBlock(stmt.finalizer,S_TFFF)])}return result},SwitchStatement:function(stmt,flags){var result,fragment,i,iz,bodyFlags,that=this;withIndent(function(){result=["switch"+space+"(",that.generateExpression(stmt.discriminant,Precedence.Sequence,E_TTT),")"+space+"{"+newline]});if(stmt.cases){bodyFlags=S_TFFF;for(i=0,iz=stmt.cases.length;i<iz;++i){if(i===iz-1){bodyFlags|=F_SEMICOLON_OPT}fragment=addIndent(this.generateStatement(stmt.cases[i],bodyFlags));result.push(fragment);if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){result.push(newline)}}}result.push(addIndent("}"));return result},SwitchCase:function(stmt,flags){var result,fragment,i,iz,bodyFlags,that=this;withIndent(function(){if(stmt.test){result=[join("case",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT)),":"]}else{result=["default:"]}i=0;iz=stmt.consequent.length;if(iz&&stmt.consequent[0].type===Syntax.BlockStatement){fragment=that.maybeBlock(stmt.consequent[0],S_TFFF);result.push(fragment);i=1}if(i!==iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}bodyFlags=S_TFFF;for(;i<iz;++i){if(i===iz-1&&flags&F_SEMICOLON_OPT){bodyFlags|=F_SEMICOLON_OPT}fragment=addIndent(that.generateStatement(stmt.consequent[i],bodyFlags));result.push(fragment);if(i+1!==iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){result.push(newline)}}});return result},IfStatement:function(stmt,flags){var result,bodyFlags,semicolonOptional,that=this;withIndent(function(){result=["if"+space+"(",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"]});semicolonOptional=flags&F_SEMICOLON_OPT;bodyFlags=S_TFFF;if(semicolonOptional){bodyFlags|=F_SEMICOLON_OPT}if(stmt.alternate){result.push(this.maybeBlock(stmt.consequent,S_TFFF));result=this.maybeBlockSuffix(stmt.consequent,result);if(stmt.alternate.type===Syntax.IfStatement){result=join(result,["else ",this.generateStatement(stmt.alternate,bodyFlags)])}else{result=join(result,join("else",this.maybeBlock(stmt.alternate,bodyFlags)))}}else{result.push(this.maybeBlock(stmt.consequent,bodyFlags))}return result},ForStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["for"+space+"("];if(stmt.init){if(stmt.init.type===Syntax.VariableDeclaration){result.push(that.generateStatement(stmt.init,S_FFFF))}else{result.push(that.generateExpression(stmt.init,Precedence.Sequence,E_FTT));result.push(";")}}else{result.push(";")}if(stmt.test){result.push(space);result.push(that.generateExpression(stmt.test,Precedence.Sequence,E_TTT));result.push(";")}else{result.push(";")}if(stmt.update){result.push(space);result.push(that.generateExpression(stmt.update,Precedence.Sequence,E_TTT));result.push(")")}else{result.push(")")}});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result},ForInStatement:function(stmt,flags){return this.generateIterationForStatement("in",stmt,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)},ForOfStatement:function(stmt,flags){return this.generateIterationForStatement("of",stmt,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)},LabeledStatement:function(stmt,flags){return[stmt.label.name+":",this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)]},Program:function(stmt,flags){var result,fragment,i,iz,bodyFlags;iz=stmt.body.length;result=[safeConcatenation&&iz>0?"\n":""];bodyFlags=S_TFTF;for(i=0;i<iz;++i){if(!safeConcatenation&&i===iz-1){bodyFlags|=F_SEMICOLON_OPT}if(preserveBlankLines){if(i===0){if(!stmt.body[0].leadingComments){generateBlankLines(stmt.range[0],stmt.body[i].range[0],result)}}if(i>0){if(!stmt.body[i-1].trailingComments&&!stmt.body[i].leadingComments){generateBlankLines(stmt.body[i-1].range[1],stmt.body[i].range[0],result)}}}fragment=addIndent(this.generateStatement(stmt.body[i],bodyFlags));result.push(fragment);if(i+1<iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){if(preserveBlankLines){if(!stmt.body[i+1].leadingComments){result.push(newline)}}else{result.push(newline)}}if(preserveBlankLines){if(i===iz-1){if(!stmt.body[i].trailingComments){generateBlankLines(stmt.body[i].range[1],stmt.range[1],result)}}}}return result},FunctionDeclaration:function(stmt,flags){return[generateAsyncPrefix(stmt,true),"function",generateStarSuffix(stmt)||noEmptySpace(),stmt.id?generateIdentifier(stmt.id):"",this.generateFunctionBody(stmt)]},ReturnStatement:function(stmt,flags){if(stmt.argument){return[join("return",this.generateExpression(stmt.argument,Precedence.Sequence,E_TTT)),this.semicolon(flags)]}return["return"+this.semicolon(flags)]},WhileStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["while"+space+"(",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"]});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result},WithStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["with"+space+"(",that.generateExpression(stmt.object,Precedence.Sequence,E_TTT),")"]});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result}};merge(CodeGenerator.prototype,CodeGenerator.Statement);CodeGenerator.Expression={SequenceExpression:function(expr,precedence,flags){var result,i,iz;if(Precedence.Sequence<precedence){flags|=F_ALLOW_IN}result=[];for(i=0,iz=expr.expressions.length;i<iz;++i){result.push(this.generateExpression(expr.expressions[i],Precedence.Assignment,flags));if(i+1<iz){result.push(","+space)}}return parenthesize(result,Precedence.Sequence,precedence)},AssignmentExpression:function(expr,precedence,flags){return this.generateAssignment(expr.left,expr.right,expr.operator,precedence,flags)},ArrowFunctionExpression:function(expr,precedence,flags){return parenthesize(this.generateFunctionBody(expr),Precedence.ArrowFunction,precedence)},ConditionalExpression:function(expr,precedence,flags){if(Precedence.Conditional<precedence){flags|=F_ALLOW_IN}return parenthesize([this.generateExpression(expr.test,Precedence.LogicalOR,flags),space+"?"+space,this.generateExpression(expr.consequent,Precedence.Assignment,flags),space+":"+space,this.generateExpression(expr.alternate,Precedence.Assignment,flags)],Precedence.Conditional,precedence)},LogicalExpression:function(expr,precedence,flags){return this.BinaryExpression(expr,precedence,flags)},BinaryExpression:function(expr,precedence,flags){var result,currentPrecedence,fragment,leftSource;currentPrecedence=BinaryPrecedence[expr.operator];if(currentPrecedence<precedence){flags|=F_ALLOW_IN}fragment=this.generateExpression(expr.left,currentPrecedence,flags);leftSource=fragment.toString();if(leftSource.charCodeAt(leftSource.length-1)===47&&esutils.code.isIdentifierPartES5(expr.operator.charCodeAt(0))){result=[fragment,noEmptySpace(),expr.operator]}else{result=join(fragment,expr.operator)}fragment=this.generateExpression(expr.right,currentPrecedence+1,flags);if(expr.operator==="/"&&fragment.toString().charAt(0)==="/"||expr.operator.slice(-1)==="<"&&fragment.toString().slice(0,3)==="!--"){result.push(noEmptySpace());result.push(fragment)}else{result=join(result,fragment)}if(expr.operator==="in"&&!(flags&F_ALLOW_IN)){return["(",result,")"]}return parenthesize(result,currentPrecedence,precedence)},CallExpression:function(expr,precedence,flags){var result,i,iz;result=[this.generateExpression(expr.callee,Precedence.Call,E_TTF)];result.push("(");for(i=0,iz=expr["arguments"].length;i<iz;++i){result.push(this.generateExpression(expr["arguments"][i],Precedence.Assignment,E_TTT));if(i+1<iz){result.push(","+space)}}result.push(")");if(!(flags&F_ALLOW_CALL)){return["(",result,")"]}return parenthesize(result,Precedence.Call,precedence)},NewExpression:function(expr,precedence,flags){var result,length,i,iz,itemFlags;length=expr["arguments"].length;itemFlags=flags&F_ALLOW_UNPARATH_NEW&&!parentheses&&length===0?E_TFT:E_TFF;result=join("new",this.generateExpression(expr.callee,Precedence.New,itemFlags));if(!(flags&F_ALLOW_UNPARATH_NEW)||parentheses||length>0){result.push("(");for(i=0,iz=length;i<iz;++i){result.push(this.generateExpression(expr["arguments"][i],Precedence.Assignment,E_TTT));if(i+1<iz){result.push(","+space)}}result.push(")")}return parenthesize(result,Precedence.New,precedence)},MemberExpression:function(expr,precedence,flags){var result,fragment;result=[this.generateExpression(expr.object,Precedence.Call,flags&F_ALLOW_CALL?E_TTF:E_TFF)];if(expr.computed){result.push("[");result.push(this.generateExpression(expr.property,Precedence.Sequence,flags&F_ALLOW_CALL?E_TTT:E_TFT));result.push("]")}else{if(expr.object.type===Syntax.Literal&&typeof expr.object.value==="number"){fragment=toSourceNodeWhenNeeded(result).toString();if(fragment.indexOf(".")<0&&!/[eExX]/.test(fragment)&&esutils.code.isDecimalDigit(fragment.charCodeAt(fragment.length-1))&&!(fragment.length>=2&&fragment.charCodeAt(0)===48)){result.push(" ")}}result.push(".");result.push(generateIdentifier(expr.property))}return parenthesize(result,Precedence.Member,precedence)},MetaProperty:function(expr,precedence,flags){var result;result=[];result.push(expr.meta);result.push(".");result.push(expr.property);return parenthesize(result,Precedence.Member,precedence)},UnaryExpression:function(expr,precedence,flags){var result,fragment,rightCharCode,leftSource,leftCharCode;fragment=this.generateExpression(expr.argument,Precedence.Unary,E_TTT);if(space===""){result=join(expr.operator,fragment)}else{result=[expr.operator];if(expr.operator.length>2){result=join(result,fragment)}else{leftSource=toSourceNodeWhenNeeded(result).toString();leftCharCode=leftSource.charCodeAt(leftSource.length-1);rightCharCode=fragment.toString().charCodeAt(0);if((leftCharCode===43||leftCharCode===45)&&leftCharCode===rightCharCode||esutils.code.isIdentifierPartES5(leftCharCode)&&esutils.code.isIdentifierPartES5(rightCharCode)){result.push(noEmptySpace());result.push(fragment)}else{result.push(fragment)}}}return parenthesize(result,Precedence.Unary,precedence)},YieldExpression:function(expr,precedence,flags){var result;if(expr.delegate){result="yield*"}else{result="yield"}if(expr.argument){result=join(result,this.generateExpression(expr.argument,Precedence.Yield,E_TTT))}return parenthesize(result,Precedence.Yield,precedence)},AwaitExpression:function(expr,precedence,flags){var result=join(expr.all?"await*":"await",this.generateExpression(expr.argument,Precedence.Await,E_TTT));return parenthesize(result,Precedence.Await,precedence)},UpdateExpression:function(expr,precedence,flags){if(expr.prefix){return parenthesize([expr.operator,this.generateExpression(expr.argument,Precedence.Unary,E_TTT)],Precedence.Unary,precedence)}return parenthesize([this.generateExpression(expr.argument,Precedence.Postfix,E_TTT),expr.operator],Precedence.Postfix,precedence)},FunctionExpression:function(expr,precedence,flags){var result=[generateAsyncPrefix(expr,true),"function"];if(expr.id){result.push(generateStarSuffix(expr)||noEmptySpace());result.push(generateIdentifier(expr.id))}else{result.push(generateStarSuffix(expr)||space)}result.push(this.generateFunctionBody(expr));return result},ArrayPattern:function(expr,precedence,flags){return this.ArrayExpression(expr,precedence,flags,true)},ArrayExpression:function(expr,precedence,flags,isPattern){var result,multiline,that=this;if(!expr.elements.length){return"[]"}multiline=isPattern?false:expr.elements.length>1;result=["[",multiline?newline:""];withIndent(function(indent){var i,iz;for(i=0,iz=expr.elements.length;i<iz;++i){if(!expr.elements[i]){if(multiline){result.push(indent)}if(i+1===iz){result.push(",")}}else{result.push(multiline?indent:"");result.push(that.generateExpression(expr.elements[i],Precedence.Assignment,E_TTT))}if(i+1<iz){result.push(","+(multiline?newline:space))}}});if(multiline&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(multiline?base:"");result.push("]");return result},RestElement:function(expr,precedence,flags){return"..."+this.generatePattern(expr.argument)},ClassExpression:function(expr,precedence,flags){var result,fragment;result=["class"];if(expr.id){result=join(result,this.generateExpression(expr.id,Precedence.Sequence,E_TTT))}if(expr.superClass){fragment=join("extends",this.generateExpression(expr.superClass,Precedence.Assignment,E_TTT));result=join(result,fragment)}result.push(space);result.push(this.generateStatement(expr.body,S_TFFT));return result},MethodDefinition:function(expr,precedence,flags){var result,fragment;if(expr["static"]){result=["static"+space]}else{result=[]}if(expr.kind==="get"||expr.kind==="set"){fragment=[join(expr.kind,this.generatePropertyKey(expr.key,expr.computed,expr.value)),this.generateFunctionBody(expr.value)]}else{fragment=[generateMethodPrefix(expr),this.generatePropertyKey(expr.key,expr.computed,expr.value),this.generateFunctionBody(expr.value)]}return join(result,fragment)},Property:function(expr,precedence,flags){if(expr.kind==="get"||expr.kind==="set"){return[expr.kind,noEmptySpace(),this.generatePropertyKey(expr.key,expr.computed,expr.value),this.generateFunctionBody(expr.value)]}if(expr.shorthand){return this.generatePropertyKey(expr.key,expr.computed,expr.value)}if(expr.method){return[generateMethodPrefix(expr),this.generatePropertyKey(expr.key,expr.computed,expr.value),this.generateFunctionBody(expr.value)]}return[this.generatePropertyKey(expr.key,expr.computed,expr.value),":"+space,this.generateExpression(expr.value,Precedence.Assignment,E_TTT)]},ObjectExpression:function(expr,precedence,flags){var multiline,result,fragment,that=this;if(!expr.properties.length){return"{}"}multiline=expr.properties.length>1;withIndent(function(){fragment=that.generateExpression(expr.properties[0],Precedence.Sequence,E_TTT)});if(!multiline){if(!hasLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){return["{",space,fragment,space,"}"]}}withIndent(function(indent){var i,iz;result=["{",newline,indent,fragment];if(multiline){result.push(","+newline);for(i=1,iz=expr.properties.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(expr.properties[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base);result.push("}");return result},AssignmentPattern:function(expr,precedence,flags){return this.generateAssignment(expr.left,expr.right,"=",precedence,flags)},ObjectPattern:function(expr,precedence,flags){var result,i,iz,multiline,property,that=this;if(!expr.properties.length){return"{}"}multiline=false;if(expr.properties.length===1){property=expr.properties[0];if(property.value.type!==Syntax.Identifier){multiline=true}}else{for(i=0,iz=expr.properties.length;i<iz;++i){property=expr.properties[i];if(!property.shorthand){multiline=true;break}}}result=["{",multiline?newline:""];withIndent(function(indent){var i,iz;for(i=0,iz=expr.properties.length;i<iz;++i){result.push(multiline?indent:"");result.push(that.generateExpression(expr.properties[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+(multiline?newline:space))}}});if(multiline&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(multiline?base:"");result.push("}");return result},ThisExpression:function(expr,precedence,flags){return"this"},Super:function(expr,precedence,flags){return"super"},Identifier:function(expr,precedence,flags){return generateIdentifier(expr)},ImportDefaultSpecifier:function(expr,precedence,flags){return generateIdentifier(expr.id||expr.local)},ImportNamespaceSpecifier:function(expr,precedence,flags){var result=["*"];var id=expr.id||expr.local;if(id){result.push(space+"as"+noEmptySpace()+generateIdentifier(id))}return result},ImportSpecifier:function(expr,precedence,flags){var imported=expr.imported;var result=[imported.name];var local=expr.local;if(local&&local.name!==imported.name){result.push(noEmptySpace()+"as"+noEmptySpace()+generateIdentifier(local))}return result},ExportSpecifier:function(expr,precedence,flags){var local=expr.local;var result=[local.name];var exported=expr.exported;if(exported&&exported.name!==local.name){result.push(noEmptySpace()+"as"+noEmptySpace()+generateIdentifier(exported))}return result},Literal:function(expr,precedence,flags){var raw;if(expr.hasOwnProperty("raw")&&parse&&extra.raw){try{raw=parse(expr.raw).body[0].expression;if(raw.type===Syntax.Literal){if(raw.value===expr.value){return expr.raw}}}catch(e){}}if(expr.value===null){return"null"}if(typeof expr.value==="string"){return escapeString(expr.value)}if(typeof expr.value==="number"){return generateNumber(expr.value)}if(typeof expr.value==="boolean"){return expr.value?"true":"false"}if(expr.regex){return"/"+expr.regex.pattern+"/"+expr.regex.flags}return generateRegExp(expr.value)},GeneratorExpression:function(expr,precedence,flags){return this.ComprehensionExpression(expr,precedence,flags)},ComprehensionExpression:function(expr,precedence,flags){var result,i,iz,fragment,that=this;result=expr.type===Syntax.GeneratorExpression?["("]:["["];if(extra.moz.comprehensionExpressionStartsWithAssignment){fragment=this.generateExpression(expr.body,Precedence.Assignment,E_TTT);result.push(fragment)}if(expr.blocks){withIndent(function(){for(i=0,iz=expr.blocks.length;i<iz;++i){fragment=that.generateExpression(expr.blocks[i],Precedence.Sequence,E_TTT);if(i>0||extra.moz.comprehensionExpressionStartsWithAssignment){result=join(result,fragment)}else{result.push(fragment)}}})}if(expr.filter){result=join(result,"if"+space);fragment=this.generateExpression(expr.filter,Precedence.Sequence,E_TTT);result=join(result,["(",fragment,")"])}if(!extra.moz.comprehensionExpressionStartsWithAssignment){fragment=this.generateExpression(expr.body,Precedence.Assignment,E_TTT);result=join(result,fragment)}result.push(expr.type===Syntax.GeneratorExpression?")":"]");return result},ComprehensionBlock:function(expr,precedence,flags){var fragment;if(expr.left.type===Syntax.VariableDeclaration){fragment=[expr.left.kind,noEmptySpace(),this.generateStatement(expr.left.declarations[0],S_FFFF)]}else{fragment=this.generateExpression(expr.left,Precedence.Call,E_TTT)}fragment=join(fragment,expr.of?"of":"in");fragment=join(fragment,this.generateExpression(expr.right,Precedence.Sequence,E_TTT));return["for"+space+"(",fragment,")"]},SpreadElement:function(expr,precedence,flags){return["...",this.generateExpression(expr.argument,Precedence.Assignment,E_TTT)]},TaggedTemplateExpression:function(expr,precedence,flags){var itemFlags=E_TTF;if(!(flags&F_ALLOW_CALL)){itemFlags=E_TFF}var result=[this.generateExpression(expr.tag,Precedence.Call,itemFlags),this.generateExpression(expr.quasi,Precedence.Primary,E_FFT)];return parenthesize(result,Precedence.TaggedTemplate,precedence)},TemplateElement:function(expr,precedence,flags){return expr.value.raw},TemplateLiteral:function(expr,precedence,flags){var result,i,iz;result=["`"];for(i=0,iz=expr.quasis.length;i<iz;++i){result.push(this.generateExpression(expr.quasis[i],Precedence.Primary,E_TTT));if(i+1<iz){result.push("${"+space);result.push(this.generateExpression(expr.expressions[i],Precedence.Sequence,E_TTT));result.push(space+"}")}}result.push("`");return result},ModuleSpecifier:function(expr,precedence,flags){return this.Literal(expr,precedence,flags)}};merge(CodeGenerator.prototype,CodeGenerator.Expression);CodeGenerator.prototype.generateExpression=function(expr,precedence,flags){var result,type;type=expr.type||Syntax.Property;if(extra.verbatim&&expr.hasOwnProperty(extra.verbatim)){return generateVerbatim(expr,precedence)}result=this[type](expr,precedence,flags);if(extra.comment){result=addComments(expr,result)}return toSourceNodeWhenNeeded(result,expr)};CodeGenerator.prototype.generateStatement=function(stmt,flags){var result,fragment;result=this[stmt.type](stmt,flags);if(extra.comment){result=addComments(stmt,result)}fragment=toSourceNodeWhenNeeded(result).toString();if(stmt.type===Syntax.Program&&!safeConcatenation&&newline===""&&fragment.charAt(fragment.length-1)==="\n"){result=sourceMap?toSourceNodeWhenNeeded(result).replaceRight(/\s+$/,""):fragment.replace(/\s+$/,"")}return toSourceNodeWhenNeeded(result,stmt)};function generateInternal(node){var codegen;codegen=new CodeGenerator;if(isStatement(node)){return codegen.generateStatement(node,S_TFFF)}if(isExpression(node)){return codegen.generateExpression(node,Precedence.Sequence,E_TTT)}throw new Error("Unknown node type: "+node.type)}function generate(node,options){var defaultOptions=getDefaultOptions(),result,pair;if(options!=null){if(typeof options.indent==="string"){defaultOptions.format.indent.style=options.indent}if(typeof options.base==="number"){defaultOptions.format.indent.base=options.base}options=updateDeeply(defaultOptions,options);indent=options.format.indent.style;if(typeof options.base==="string"){base=options.base}else{base=stringRepeat(indent,options.format.indent.base)}}else{options=defaultOptions;indent=options.format.indent.style;base=stringRepeat(indent,options.format.indent.base)}json=options.format.json;renumber=options.format.renumber;hexadecimal=json?false:options.format.hexadecimal;quotes=json?"double":options.format.quotes;escapeless=options.format.escapeless;newline=options.format.newline;space=options.format.space;if(options.format.compact){newline=space=indent=base=""}parentheses=options.format.parentheses;semicolons=options.format.semicolons;safeConcatenation=options.format.safeConcatenation;directive=options.directive;parse=json?null:options.parse;sourceMap=options.sourceMap;sourceCode=options.sourceCode;preserveBlankLines=options.format.preserveBlankLines&&sourceCode!==null;extra=options;if(sourceMap){if(!exports.browser){SourceNode=require("source-map").SourceNode}else{SourceNode=global.sourceMap.SourceNode}}result=generateInternal(node);if(!sourceMap){pair={code:result.toString(),map:null};return options.sourceMapWithCode?pair:pair.code}pair=result.toStringWithSourceMap({file:options.file,sourceRoot:options.sourceMapRoot});if(options.sourceContent){pair.map.setSourceContent(options.sourceMap,options.sourceContent)}if(options.sourceMapWithCode){return pair}return pair.map.toString()}FORMAT_MINIFY={indent:{style:"",base:0},renumber:true,hexadecimal:true,quotes:"auto",escapeless:true,compact:true,parentheses:false,semicolons:false};FORMAT_DEFAULTS=getDefaultOptions().format;exports.version=require("./package.json").version;exports.generate=generate;exports.attachComments=estraverse.attachComments;exports.Precedence=updateDeeply({},Precedence);exports.browser=false;exports.FORMAT_MINIFY=FORMAT_MINIFY;exports.FORMAT_DEFAULTS=FORMAT_DEFAULTS})()}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./package.json":80,estraverse:133,esutils:138,"source-map":351}],80:[function(require,module,exports){module.exports={_args:[["escodegen@1.9.0","/Users/lestera/Documents/git/webppl"]],_from:"escodegen@1.9.0",_id:"escodegen@1.9.0",_inBundle:false,_integrity:"sha512-v0MYvNQ32bzwoG2OSFzWAkuahDQHK92JBN0pTAALJ4RIxEZe766QJPDR8Hqy7XNUy5K3fnVL76OqYAdc4TZEIw==",_location:"/escodegen",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"escodegen@1.9.0",name:"escodegen",escapedName:"escodegen",rawSpec:"1.9.0",saveSpec:null,fetchSpec:"1.9.0"},_requiredBy:["/","/static-eval","/static-module"],_resolved:"https://registry.npmjs.org/escodegen/-/escodegen-1.9.0.tgz",_spec:"1.9.0",_where:"/Users/lestera/Documents/git/webppl",bin:{esgenerate:"bin/esgenerate.js",escodegen:"bin/escodegen.js"},bugs:{url:"https://github.com/estools/escodegen/issues"},dependencies:{esprima:"^3.1.3",estraverse:"^4.2.0",esutils:"^2.0.2",optionator:"^0.8.1","source-map":"~0.5.6"},description:"ECMAScript code generator",devDependencies:{acorn:"^4.0.4",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^3.5.0","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},engines:{node:">=0.12.0"},files:["LICENSE.BSD","LICENSE.source-map","README.md","bin","escodegen.js","package.json"],homepage:"http://github.com/estools/escodegen",license:"BSD-2-Clause",main:"escodegen.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"escodegen",optionalDependencies:{"source-map":"~0.5.6"},repository:{type:"git",url:"git+ssh://git@github.com/estools/escodegen.git"},scripts:{build:"cjsify -a path: tools/entry-point.js > escodegen.browser.js","build-min":"cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",lint:"gulp lint",release:"node tools/release.js",test:"gulp travis","unit-test":"gulp test"},version:"1.9.0"}},{}],81:[function(require,module,exports){(function(factory,global){"use strict";function namespace(str,obj){var i,iz,names,name;names=str.split(".");for(i=0,iz=names.length;i<iz;++i){name=names[i];if(obj.hasOwnProperty(name)){obj=obj[name]}else{obj=obj[name]={}}}return obj}if(typeof define==="function"&&define.amd){define("escope",["exports","estraverse"],function(exports,estraverse){factory(exports,global,estraverse)})}else if(typeof exports!=="undefined"){factory(exports,global,require("estraverse"))}else{factory(namespace("escope",global),global,global.estraverse)}})(function(exports,global,estraverse){"use strict";var Syntax,Map,currentScope,globalScope,scopes,options;Syntax=estraverse.Syntax;if(typeof global.Map!=="undefined"){Map=global.Map}else{Map=function Map(){this.__data={}};Map.prototype.get=function MapGet(key){key="$"+key;if(this.__data.hasOwnProperty(key)){return this.__data[key]}return undefined};Map.prototype.has=function MapHas(key){key="$"+key;return this.__data.hasOwnProperty(key)};Map.prototype.set=function MapSet(key,val){key="$"+key;this.__data[key]=val};Map.prototype["delete"]=function MapDelete(key){key="$"+key;return delete this.__data[key]}}function assert(cond,text){if(!cond){throw new Error(text)}}function defaultOptions(){return{optimistic:false,directive:false,ecmaVersion:5}}function updateDeeply(target,override){var key,val;function isHashObject(target){return typeof target==="object"&&target instanceof Object&&!(target instanceof RegExp)}for(key in override){if(override.hasOwnProperty(key)){val=override[key];if(isHashObject(val)){if(isHashObject(target[key])){updateDeeply(target[key],val)}else{target[key]=updateDeeply({},val)}}else{target[key]=val}}}return target}function Reference(ident,scope,flag,writeExpr,maybeImplicitGlobal){this.identifier=ident;this.from=scope;this.tainted=false;this.resolved=null;this.flag=flag;if(this.isWrite()){this.writeExpr=writeExpr}this.__maybeImplicitGlobal=maybeImplicitGlobal}Reference.READ=1;Reference.WRITE=2;Reference.RW=3;Reference.prototype.isStatic=function isStatic(){return!this.tainted&&this.resolved&&this.resolved.scope.isStatic()};Reference.prototype.isWrite=function isWrite(){return this.flag&Reference.WRITE};Reference.prototype.isRead=function isRead(){return this.flag&Reference.READ};Reference.prototype.isReadOnly=function isReadOnly(){return this.flag===Reference.READ};Reference.prototype.isWriteOnly=function isWriteOnly(){return this.flag===Reference.WRITE};Reference.prototype.isReadWrite=function isReadWrite(){return this.flag===Reference.RW};function Variable(name,scope){this.name=name;this.identifiers=[];this.references=[];this.defs=[];this.tainted=false;this.stack=true;this.scope=scope}Variable.CatchClause="CatchClause";Variable.Parameter="Parameter";Variable.FunctionName="FunctionName";Variable.Variable="Variable";Variable.ImplicitGlobalVariable="ImplicitGlobalVariable";function isStrictScope(scope,block){var body,i,iz,stmt,expr;if(scope.upper&&scope.upper.isStrict){return true}if(scope.type==="function"){body=block.body}else if(scope.type==="global"){body=block}else{return false}if(options.directive){for(i=0,iz=body.body.length;i<iz;++i){stmt=body.body[i];if(stmt.type!=="DirectiveStatement"){break}if(stmt.raw==='"use strict"'||stmt.raw==="'use strict'"){return true}}}else{for(i=0,iz=body.body.length;i<iz;++i){stmt=body.body[i];if(stmt.type!==Syntax.ExpressionStatement){break}expr=stmt.expression;if(expr.type!==Syntax.Literal||typeof expr.value!=="string"){break}if(expr.raw!=null){if(expr.raw==='"use strict"'||expr.raw==="'use strict'"){return true}}else{if(expr.value==="use strict"){return true}}}}return false}function Scope(block,opt){var variable,body;this.type=block.type===Syntax.CatchClause?"catch":block.type===Syntax.WithStatement?"with":block.type===Syntax.Program?"global":"function";this.set=new Map;this.taints=new Map;this.dynamic=this.type==="global"||this.type==="with";this.block=block;this.through=[];this.variables=[];this.references=[];this.left=[];this.variableScope=this.type==="global"||this.type==="function"?this:currentScope.variableScope;this.functionExpressionScope=false;this.directCallToEvalScope=false;this.thisFound=false;body=this.type==="function"?block.body:block;if(opt.naming){this.__define(block.id,{type:Variable.FunctionName,name:block.id,node:block});this.functionExpressionScope=true}else{if(this.type==="function"){variable=new Variable("arguments",this);this.taints.set("arguments",true);this.set.set("arguments",variable);this.variables.push(variable)}if(block.type===Syntax.FunctionExpression&&block.id){new Scope(block,{naming:true})}}this.upper=currentScope;this.isStrict=isStrictScope(this,block);this.childScopes=[];if(currentScope){currentScope.childScopes.push(this)}currentScope=this;if(this.type==="global"){globalScope=this;globalScope.implicit={set:new Map,variables:[]}}scopes.push(this)}Scope.prototype.__close=function __close(){var i,iz,ref,current,node,implicit;if(!this.dynamic||options.optimistic){for(i=0,iz=this.left.length;i<iz;++i){ref=this.left[i];if(!this.__resolve(ref)){this.__delegateToUpperScope(ref)}}}else{if(this.type==="with"){for(i=0,iz=this.left.length;i<iz;++i){ref=this.left[i];ref.tainted=true;this.__delegateToUpperScope(ref)}}else{for(i=0,iz=this.left.length;i<iz;++i){ref=this.left[i];current=this;do{current.through.push(ref);current=current.upper}while(current)}}}if(this.type==="global"){implicit=[];for(i=0,iz=this.left.length;i<iz;++i){ref=this.left[i];if(ref.__maybeImplicitGlobal&&!this.set.has(ref.identifier.name)){implicit.push(ref.__maybeImplicitGlobal)}}for(i=0,iz=implicit.length;i<iz;++i){node=implicit[i];this.__defineImplicit(node.left,{type:Variable.ImplicitGlobalVariable,name:node.left,node:node})}}this.left=null;currentScope=this.upper};Scope.prototype.__resolve=function __resolve(ref){var variable,name;name=ref.identifier.name;if(this.set.has(name)){variable=this.set.get(name);variable.references.push(ref);variable.stack=variable.stack&&ref.from.variableScope===this.variableScope;if(ref.tainted){variable.tainted=true;this.taints.set(variable.name,true)}ref.resolved=variable;return true}return false};Scope.prototype.__delegateToUpperScope=function __delegateToUpperScope(ref){if(this.upper){this.upper.left.push(ref)}this.through.push(ref)};Scope.prototype.__defineImplicit=function __defineImplicit(node,info){var name,variable;if(node&&node.type===Syntax.Identifier){name=node.name;if(!this.implicit.set.has(name)){variable=new Variable(name,this);variable.identifiers.push(node);variable.defs.push(info);this.implicit.set.set(name,variable);this.implicit.variables.push(variable)}else{variable=this.implicit.set.get(name);variable.identifiers.push(node);variable.defs.push(info)}}};Scope.prototype.__define=function __define(node,info){var name,variable;if(node&&node.type===Syntax.Identifier){name=node.name;if(!this.set.has(name)){variable=new Variable(name,this);variable.identifiers.push(node);variable.defs.push(info);this.set.set(name,variable);this.variables.push(variable)}else{variable=this.set.get(name);variable.identifiers.push(node);variable.defs.push(info)}}};Scope.prototype.__referencing=function __referencing(node,assign,writeExpr,maybeImplicitGlobal){var ref;if(node&&node.type===Syntax.Identifier){ref=new Reference(node,this,assign||Reference.READ,writeExpr,maybeImplicitGlobal);this.references.push(ref);this.left.push(ref)}};Scope.prototype.__detectEval=function __detectEval(){var current;current=this;this.directCallToEvalScope=true;do{current.dynamic=true;current=current.upper}while(current)};Scope.prototype.__detectThis=function __detectThis(){this.thisFound=true};Scope.prototype.__isClosed=function isClosed(){return this.left===null};Scope.prototype.resolve=function resolve(ident){var ref,i,iz;assert(this.__isClosed(),"scope should be closed");assert(ident.type===Syntax.Identifier,"target should be identifier");for(i=0,iz=this.references.length;i<iz;++i){ref=this.references[i];if(ref.identifier===ident){return ref}}return null};Scope.prototype.isStatic=function isStatic(){return!this.dynamic};Scope.prototype.isArgumentsMaterialized=function isArgumentsMaterialized(){var variable;if(this.type!=="function"){return true}if(!this.isStatic()){return true}variable=this.set.get("arguments");assert(variable,"always have arguments variable");return variable.tainted||variable.references.length!==0};Scope.prototype.isThisMaterialized=function isThisMaterialized(){if(this.type!=="function"){return true}if(!this.isStatic()){return true}return this.thisFound};Scope.mangledName="__$escope$__";Scope.prototype.attach=function attach(){if(!this.functionExpressionScope){this.block[Scope.mangledName]=this}};Scope.prototype.detach=function detach(){if(!this.functionExpressionScope){delete this.block[Scope.mangledName]}};Scope.prototype.isUsedName=function(name){if(this.set.has(name)){return true}for(var i=0,iz=this.through.length;i<iz;++i){if(this.through[i].identifier.name===name){return true}}return false};function ScopeManager(scopes){this.scopes=scopes;this.attached=false}ScopeManager.prototype.__get=function __get(node){var i,iz,scope;if(this.attached){return node[Scope.mangledName]||null}if(Scope.isScopeRequired(node)){for(i=0,iz=this.scopes.length;i<iz;++i){scope=this.scopes[i];if(!scope.functionExpressionScope){if(scope.block===node){return scope}}}}return null};ScopeManager.prototype.acquire=function acquire(node){return this.__get(node)};ScopeManager.prototype.release=function release(node){var scope=this.__get(node);if(scope){scope=scope.upper;while(scope){if(!scope.functionExpressionScope){return scope}scope=scope.upper}}return null};ScopeManager.prototype.attach=function attach(){var i,iz;for(i=0,iz=this.scopes.length;i<iz;++i){this.scopes[i].attach()}this.attached=true};ScopeManager.prototype.detach=function detach(){var i,iz;for(i=0,iz=this.scopes.length;i<iz;++i){this.scopes[i].detach()}this.attached=false};Scope.isScopeRequired=function isScopeRequired(node){return Scope.isVariableScopeRequired(node)||node.type===Syntax.WithStatement||node.type===Syntax.CatchClause};Scope.isVariableScopeRequired=function isVariableScopeRequired(node){return node.type===Syntax.Program||node.type===Syntax.FunctionExpression||node.type===Syntax.FunctionDeclaration};function analyze(tree,providedOptions){var resultScopes;options=updateDeeply(defaultOptions(),providedOptions);resultScopes=scopes=[];currentScope=null;globalScope=null;estraverse.traverse(tree,{enter:function enter(node){var i,iz,decl;if(Scope.isScopeRequired(node)){new Scope(node,{})}switch(node.type){case Syntax.AssignmentExpression:if(node.operator==="="){currentScope.__referencing(node.left,Reference.WRITE,node.right,!currentScope.isStrict&&node.left.name!=null&&node)}else{currentScope.__referencing(node.left,Reference.RW,node.right)}currentScope.__referencing(node.right);break;case Syntax.ArrayExpression:for(i=0,iz=node.elements.length;i<iz;++i){currentScope.__referencing(node.elements[i])}break;case Syntax.BlockStatement:break;case Syntax.BinaryExpression:currentScope.__referencing(node.left);currentScope.__referencing(node.right);break;case Syntax.BreakStatement:break;case Syntax.CallExpression:currentScope.__referencing(node.callee);for(i=0,iz=node["arguments"].length;i<iz;++i){currentScope.__referencing(node["arguments"][i])}if(!options.ignoreEval&&node.callee.type===Syntax.Identifier&&node.callee.name==="eval"){currentScope.variableScope.__detectEval()}break;case Syntax.CatchClause:currentScope.__define(node.param,{type:Variable.CatchClause,name:node.param,node:node});break;case Syntax.ConditionalExpression:currentScope.__referencing(node.test);currentScope.__referencing(node.consequent);currentScope.__referencing(node.alternate);break;case Syntax.ContinueStatement:break;case Syntax.DirectiveStatement:break;case Syntax.DoWhileStatement:currentScope.__referencing(node.test);break;case Syntax.DebuggerStatement:break;case Syntax.EmptyStatement:break;case Syntax.ExpressionStatement:currentScope.__referencing(node.expression);break;case Syntax.ForStatement:currentScope.__referencing(node.init);currentScope.__referencing(node.test);currentScope.__referencing(node.update);break;case Syntax.ForInStatement:if(node.left.type===Syntax.VariableDeclaration){currentScope.__referencing(node.left.declarations[0].id,Reference.WRITE,null,false)}else{currentScope.__referencing(node.left,Reference.WRITE,null,!currentScope.isStrict&&node.left.name!=null&&node)}currentScope.__referencing(node.right);break;case Syntax.FunctionDeclaration:currentScope.upper.__define(node.id,{type:Variable.FunctionName,name:node.id,node:node});for(i=0,iz=node.params.length;i<iz;++i){currentScope.__define(node.params[i],{type:Variable.Parameter,name:node.params[i],node:node,index:i})}break;case Syntax.FunctionExpression:for(i=0,iz=node.params.length;i<iz;++i){currentScope.__define(node.params[i],{type:Variable.Parameter,name:node.params[i],node:node,index:i})}break;case Syntax.Identifier:break;case Syntax.IfStatement:currentScope.__referencing(node.test);break;case Syntax.Literal:break;case Syntax.LabeledStatement:break;case Syntax.LogicalExpression:currentScope.__referencing(node.left);currentScope.__referencing(node.right);break;case Syntax.MemberExpression:currentScope.__referencing(node.object);if(node.computed){currentScope.__referencing(node.property)}break;case Syntax.NewExpression:currentScope.__referencing(node.callee);for(i=0,iz=node["arguments"].length;i<iz;++i){currentScope.__referencing(node["arguments"][i])}break;case Syntax.ObjectExpression:for(i=0;i<node.properties.length;i++){if(node.properties[i].kind==="init"){currentScope.__referencing(node.properties[i].value)}}break;case Syntax.Program:break;case Syntax.Property:break;case Syntax.ReturnStatement:currentScope.__referencing(node.argument);break;case Syntax.SequenceExpression:for(i=0,iz=node.expressions.length;i<iz;++i){currentScope.__referencing(node.expressions[i])}break;case Syntax.SwitchStatement:currentScope.__referencing(node.discriminant);break;case Syntax.SwitchCase:currentScope.__referencing(node.test);break;case Syntax.ThisExpression:currentScope.variableScope.__detectThis();break;case Syntax.ThrowStatement:currentScope.__referencing(node.argument);break;case Syntax.TryStatement:break;case Syntax.UnaryExpression:currentScope.__referencing(node.argument);break;case Syntax.UpdateExpression:currentScope.__referencing(node.argument,Reference.RW,null);break;case Syntax.VariableDeclaration:for(i=0,iz=node.declarations.length;i<iz;++i){decl=node.declarations[i];currentScope.variableScope.__define(decl.id,{type:Variable.Variable,name:decl.id,node:decl,index:i,parent:node});if(decl.init){currentScope.__referencing(decl.id,Reference.WRITE,decl.init,false);currentScope.__referencing(decl.init)}}break;case Syntax.VariableDeclarator:break;case Syntax.WhileStatement:currentScope.__referencing(node.test);break;case Syntax.WithStatement:currentScope.upper.__referencing(node.object);break}},leave:function leave(node){while(currentScope&&node===currentScope.block){currentScope.__close()}}});assert(currentScope===null);globalScope=null;scopes=null;options=null;return new ScopeManager(resultScopes)}exports.version="1.0.3";exports.Reference=Reference;exports.Variable=Variable;exports.Scope=Scope;exports.ScopeManager=ScopeManager;exports.analyze=analyze},this)},{estraverse:82}],82:[function(require,module,exports){(function clone(exports){"use strict";var Syntax,isArray,VisitorOption,VisitorKeys,objectCreate,objectKeys,BREAK,SKIP,REMOVE;function ignoreJSHintError(){}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){var ret={},key,val;for(key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){ret[key]=deepCopy(val)}else{ret[key]=val}}}return ret}function shallowCopy(obj){var ret={},key;for(key in obj){if(obj.hasOwnProperty(key)){ret[key]=obj[key]}}return ret}ignoreJSHintError(shallowCopy);function upperBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){len=diff}else{i=current+1;len-=diff+1}}return i}function lowerBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){i=current+1;len-=diff+1}else{len=diff}}return i}ignoreJSHintError(lowerBound);objectCreate=Object.create||function(){function F(){}return function(o){F.prototype=o;return new F}}();objectKeys=Object.keys||function(o){var keys=[],key;for(key in o){keys.push(key)}return keys};function extend(to,from){var keys=objectKeys(from),key,i,len;for(i=0,len=keys.length;i<len;i+=1){key=keys[i];to[key]=from[key]}return to}Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};VisitorKeys={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};BREAK={};SKIP={};REMOVE={};VisitorOption={Break:BREAK,Skip:SKIP,Remove:REMOVE};function Reference(parent,key){this.parent=parent;this.key=key}Reference.prototype.replace=function replace(node){this.parent[this.key]=node};Reference.prototype.remove=function remove(){if(isArray(this.parent)){this.parent.splice(this.key,1);return true}else{this.replace(null);return false}};function Element(node,path,wrap,ref){this.node=node;this.path=path;this.wrap=wrap;this.ref=ref}function Controller(){}Controller.prototype.path=function path(){var i,iz,j,jz,result,element;function addToPath(result,path){if(isArray(path)){for(j=0,jz=path.length;j<jz;++j){result.push(path[j])}}else{result.push(path)}}if(!this.__current.path){return null}result=[];for(i=2,iz=this.__leavelist.length;i<iz;++i){element=this.__leavelist[i];addToPath(result,element.path)}addToPath(result,this.__current.path);return result};Controller.prototype.type=function(){var node=this.current();return node.type||this.__current.wrap};Controller.prototype.parents=function parents(){var i,iz,result;result=[];for(i=1,iz=this.__leavelist.length;i<iz;++i){result.push(this.__leavelist[i].node)}return result};Controller.prototype.current=function current(){return this.__current.node};Controller.prototype.__execute=function __execute(callback,element){var previous,result;result=undefined;previous=this.__current;this.__current=element;this.__state=null;if(callback){result=callback.call(this,element.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=previous;return result};Controller.prototype.notify=function notify(flag){this.__state=flag};Controller.prototype.skip=function(){this.notify(SKIP)};Controller.prototype["break"]=function(){this.notify(BREAK)};Controller.prototype.remove=function(){this.notify(REMOVE)};Controller.prototype.__initialize=function(root,visitor){this.visitor=visitor;this.root=root;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null;this.__fallback=visitor.fallback==="iteration";this.__keys=VisitorKeys;if(visitor.keys){this.__keys=extend(objectCreate(this.__keys),visitor.keys)}};function isNode(node){if(node==null){return false}return typeof node==="object"&&typeof node.type==="string"}function isProperty(nodeType,key){return(nodeType===Syntax.ObjectExpression||nodeType===Syntax.ObjectPattern)&&"properties"===key}Controller.prototype.traverse=function traverse(root,visitor){var worklist,leavelist,element,node,nodeType,ret,key,current,current2,candidates,candidate,sentinel;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;worklist.push(new Element(root,null,null,null));leavelist.push(new Element(null,null,null,null));while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();ret=this.__execute(visitor.leave,element);if(this.__state===BREAK||ret===BREAK){return}continue}if(element.node){ret=this.__execute(visitor.enter,element);if(this.__state===BREAK||ret===BREAK){return}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||ret===SKIP){continue}node=element.node;nodeType=element.wrap||node.type;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",null)}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,null)}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,null))}}}}};Controller.prototype.replace=function replace(root,visitor){function removeElem(element){var i,key,nextElem,parent;if(element.ref.remove()){key=element.ref.key;parent=element.ref.parent;i=worklist.length;while(i--){nextElem=worklist[i];if(nextElem.ref&&nextElem.ref.parent===parent){if(nextElem.ref.key<key){break}--nextElem.ref.key}}}}var worklist,leavelist,node,nodeType,target,element,current,current2,candidates,candidate,sentinel,outer,key;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;outer={root:root};element=new Element(root,null,null,new Reference(outer,"root"));worklist.push(element);leavelist.push(element);while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();target=this.__execute(visitor.leave,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target)}if(this.__state===REMOVE||target===REMOVE){removeElem(element)}if(this.__state===BREAK||target===BREAK){return outer.root}continue}target=this.__execute(visitor.enter,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target);element.node=target}if(this.__state===REMOVE||target===REMOVE){removeElem(element);element.node=null}if(this.__state===BREAK||target===BREAK){return outer.root}node=element.node;if(!node){continue}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||target===SKIP){continue}nodeType=element.wrap||node.type;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",new Reference(candidate,current2))}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,new Reference(candidate,current2))}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,new Reference(node,key)))}}}return outer.root};function traverse(root,visitor){var controller=new Controller;return controller.traverse(root,visitor)}function replace(root,visitor){var controller=new Controller;return controller.replace(root,visitor)}function extendCommentRange(comment,tokens){var target;target=upperBound(tokens,function search(token){return token.range[0]>comment.range[0]});comment.extendedRange=[comment.range[0],comment.range[1]];if(target!==tokens.length){comment.extendedRange[1]=tokens[target].range[0]}target-=1;if(target>=0){comment.extendedRange[0]=tokens[target].range[1]}return comment}function attachComments(tree,providedComments,tokens){var comments=[],comment,len,i,cursor;if(!tree.range){throw new Error("attachComments needs range information")}if(!tokens.length){if(providedComments.length){for(i=0,len=providedComments.length;i<len;i+=1){comment=deepCopy(providedComments[i]);comment.extendedRange=[0,tree.range[0]];comments.push(comment)}tree.leadingComments=comments}return tree}for(i=0,len=providedComments.length;i<len;i+=1){comments.push(extendCommentRange(deepCopy(providedComments[i]),tokens))}cursor=0;traverse(tree,{enter:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(comment.extendedRange[1]>node.range[0]){break}if(comment.extendedRange[1]===node.range[0]){if(!node.leadingComments){node.leadingComments=[]}node.leadingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});cursor=0;traverse(tree,{leave:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(node.range[1]<comment.extendedRange[0]){break}if(node.range[1]===comment.extendedRange[0]){if(!node.trailingComments){node.trailingComments=[]}node.trailingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});return tree}exports.version=require("./package.json").version;exports.Syntax=Syntax;exports.traverse=traverse;exports.replace=replace;exports.attachComments=attachComments;exports.VisitorKeys=VisitorKeys;exports.VisitorOption=VisitorOption;exports.Controller=Controller;exports.cloneEnvironment=function(){return clone({})};return exports})(exports)},{"./package.json":83}],83:[function(require,module,exports){module.exports={_args:[["estraverse@2.0.0","/Users/lestera/Documents/git/webppl"]],_from:"estraverse@2.0.0",_id:"estraverse@2.0.0",_inBundle:false,_integrity:"sha1-WuRpYyQ2ACBmdMyySgnhZnT83KE=",_location:"/escope/estraverse",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"estraverse@2.0.0",name:"estraverse",escapedName:"estraverse",rawSpec:"2.0.0",saveSpec:null,fetchSpec:"2.0.0"},_requiredBy:["/escope"],_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-2.0.0.tgz",_spec:"2.0.0",_where:"/Users/lestera/Documents/git/webppl",bugs:{url:"https://github.com/estools/estraverse/issues"},description:"ECMAScript JS AST traversal functions",devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},engines:{node:">=0.10.0"},homepage:"https://github.com/estools/estraverse",licenses:[{type:"BSD",url:"http://github.com/estools/estraverse/raw/master/LICENSE.BSD"}],main:"estraverse.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"estraverse",repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},scripts:{lint:"jshint estraverse.js",test:"npm run-script lint && npm run-script unit-test","unit-test":"mocha --compilers coffee:coffee-script/register"},version:"2.0.0"}},{}],84:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common;Name="annotate-directive";common=require("./common");Syntax=common.Syntax;function isDirective(stmt){var expr;if(stmt.type===Syntax.ExpressionStatement){expr=stmt.expression;if(expr.type===Syntax.Literal&&typeof expr.value==="string"){return true}}return false}function escapeAllowedCharacter(ch,next){var code=ch.charCodeAt(0),hex=code.toString(16),result="\\";switch(ch){case"\b":result+="b";break;case"\f":result+="f";break;case"\t":result+="t";break;default:if(code>255){result+="u"+"0000".slice(hex.length)+hex}else if(ch==="\0"&&"0123456789".indexOf(next)<0){result+="0"}else if(ch==="\v"){result+="v"}else{result+="x"+"00".slice(hex.length)+hex}break}return result}function escapeDisallowedCharacter(ch){var result="\\";switch(ch){case"\\":result+="\\";break;case"\n":result+="n";break;case"\r":result+="r";break;case"\u2028":result+="u2028";break;case"\u2029":result+="u2029";break;default:throw new Error("Incorrectly classified character")}return result}function escapeString(str){var result="",i,len,ch;if(typeof str[0]==="undefined"){str=common.stringToArray(str)}for(i=0,len=str.length;i<len;i+=1){ch=str[i];if(ch==="'"){result+="\\'";continue}else if("\\\n\r\u2028\u2029".indexOf(ch)>=0){result+=escapeDisallowedCharacter(ch);continue}else if(!(ch>=" "&&ch<="~")){result+=escapeAllowedCharacter(ch,str[i+1]);continue}result+=ch}return result}function annotateDirective(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);common.traverse(result,{enter:function enter(node,parent){var stmt,i,iz;if(!(node.type===Syntax.Program||node.type===Syntax.BlockStatement&&(parent.type===Syntax.FunctionExpression||parent.type===Syntax.FunctionDeclaration))){return}for(i=0,iz=node.body.length;i<iz;++i){stmt=node.body[i];if(isDirective(stmt)){stmt.type=Syntax.DirectiveStatement;if(stmt.expression.raw){stmt.directive=stmt.expression.raw.substring(1,stmt.expression.raw.length-1);stmt.value=stmt.expression.value;stmt.raw=stmt.expression.raw}else{stmt.directive=escapeString(stmt.expression.value);stmt.value=stmt.expression.value;stmt.raw="'"+stmt.directive+"'"}delete stmt.expression}else{return}}}});return result}annotateDirective.passName=Name;module.exports=annotateDirective})()},{"./common":85}],85:[function(require,module,exports){(function(){"use strict";var Syntax,isArray,arrayFrom,arrayOf,has,sameValue,estraverse,escope,esutils;estraverse=require("estraverse");escope=require("escope");esutils=require("esutils");Syntax=estraverse.Syntax;isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function isObject(obj){return typeof obj==="object"&&obj!==null}has=function(){var method={}.hasOwnProperty;return function has(obj,prop){return method.call(obj,prop)}}();arrayFrom=function(){var slice=Array.prototype.slice;return function arrayFrom(array){return slice.call(array)}}();arrayOf=function(){var slice=Array.prototype.slice;return function arrayOf(){return slice.call(arguments)}}();function arrayLast(array){return array[array.length-1]}function arrayEmpty(array){return array.length===0}function stringRepeat(str,num){var result="";for(num|=0;num>0;num>>>=1,str+=str){if(num&1){result+=str}}return result}if(Object.is){sameValue=Object.is}else{sameValue=function sameValue(x,y){if(x===y){return x!==0||1/x===1/y}return x!==x&&y!==y}}function deepCopy(obj){function deepCopyInternal(obj,result){var key,val;for(key in obj){if(key.lastIndexOf("__",0)===0){continue}if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){if(val instanceof RegExp){val=new RegExp(val)}else{val=deepCopyInternal(val,isArray(val)?[]:{})}}result[key]=val}}return result}return deepCopyInternal(obj,isArray(obj)?[]:{})}function assert(cond,text){if(!cond){throw new Error(text)}}function unreachable(){throw new Error("Unreachable point. logically broken.")}function isIdentifier(name){if(esutils.keyword.isKeywordES5(name,true)||esutils.keyword.isRestrictedWord(name)){return false}return esutils.keyword.isIdentifierName(name)}function mayBeCompletionValue(node,ancestors){var i,ancestor;if(node.type!==Syntax.ExpressionStatement){return true}for(i=ancestors.length-1;i>=0;--i,node=ancestor){ancestor=ancestors[i];switch(ancestor.type){case Syntax.FunctionExpression:case Syntax.FunctionDeclaration:return false;case Syntax.BlockStatement:case Syntax.Program:if(arrayLast(ancestor.body)!==node){return false}break;case Syntax.SwitchCase:if(arrayLast(ancestor.consequent)!==node){return false}break}}return true}function moveLocation(from,to){if(from.loc==null){return to}to.loc=deepCopy(from.loc);return to}function deleteLocation(node){if(node.hasOwnProperty("loc")){return delete node.loc}return false}function convertToEmptyStatement(node){var i,iz,keys;keys=estraverse.VisitorKeys[node.type];for(i=0,iz=keys.length;i<iz;++i){delete node[keys[i]]}node.type=Syntax.EmptyStatement;return node}function isNegative(value){return value===value&&(value<0||value===0&&1/value<0)}function isFunctionBody(node,parent){return node.type===Syntax.BlockStatement&&(parent.type===Syntax.FunctionDeclaration||parent.type===Syntax.FunctionExpression)}function isNumberLiteral(node){return node.type===Syntax.Literal&&typeof node.value==="number"}function isOptimizedArgument(argument){return isNumberLiteral(argument)&&String(argument.value).length===1}function generateNegativeNode(value,node){var result;result={type:Syntax.UnaryExpression,operator:"-",argument:{type:Syntax.Literal,value:-value}};return node?moveLocation(node,result):result}function isNegativeNode(node){return node.type===Syntax.UnaryExpression&&node.operator==="-"&&isNumberLiteral(node.argument)}function generateUndefined(node){var result={type:Syntax.UnaryExpression,operator:"void",argument:{type:Syntax.Literal,value:0}};return node?moveLocation(node,result):result}function isUndefined(node){return node.type===Syntax.UnaryExpression&&node.operator==="void"&&isOptimizedArgument(node.argument)}function generateNaN(node){var result={type:Syntax.BinaryExpression,operator:"/",left:{type:Syntax.Literal,value:0},right:{type:Syntax.Literal,value:0}};return node?moveLocation(node,result):result}function isNaNNode(node){if(node.type===Syntax.BinaryExpression){if(isOptimizedArgument(node.left)&&isOptimizedArgument(node.right)){return node.left.value===0&&node.right.value===0}}return false}function generateFromValue(value){if(typeof value==="number"){if(isNaN(value)){return generateNaN()}if(isNegative(value)){return generateNegativeNode(value)}}if(value===undefined){return generateUndefined()}return{type:Syntax.Literal,value:value}}function isReference(node){var type=node.type;return type===Syntax.Identifier||type===Syntax.MemberExpression}function canExtractSequence(last,parent,scope){var ref;if(parent.type===Syntax.CallExpression){if(last.type===Syntax.Identifier){if(last.name==="eval"){return false}ref=scope.resolve(last);return ref&&ref.isStatic()}return last.type!==Syntax.MemberExpression}else if(parent.type===Syntax.UnaryExpression){if(parent.operator==="delete"){return!isReference(last)}else if(parent.operator==="typeof"){if(last.type===Syntax.Identifier){ref=scope.resolve(last);return ref&&ref.isStatic()}}}else if(parent.type===Syntax.UpdateExpression){return!isReference(last)}return true}function delegateVariableDeclarations(stmt,func){var decls,target;decls=[];estraverse.traverse(stmt,{enter:function(node){var i,iz,decl;if(node.type===Syntax.VariableDeclaration){if(node.kind==="let"||node.kind==="const"){return}for(i=0,iz=node.declarations.length;i<iz;++i){decl=node.declarations[i];delete decl.init;decls.push(decl)}return estraverse.VisitorOption.Skip}else if(escope.Scope.isVariableScopeRequired(node)){return estraverse.VisitorOption.Skip}}});if(!decls.length){return null}target=null;estraverse.traverse(func.body,{enter:function(node,parent){if(node===stmt){return estraverse.VisitorOption.Skip}else if(escope.Scope.isVariableScopeRequired(node)){return estraverse.VisitorOption.Skip}else if(node.type===Syntax.VariableDeclaration&&node.kind==="var"){if(parent.type!==Syntax.ForInStatement){target=node;return estraverse.VisitorOption.Break}}}});if(target){target.declarations=target.declarations.concat(decls);return null}else{return{type:Syntax.VariableDeclaration,kind:"var",declarations:decls}}}function isScopedDeclaration(node){if(node.type===Syntax.VariableDeclaration&&(node.kind==="let"||node.kind==="const")){return true}else if(node.type===Syntax.FunctionDeclaration){return true}return false}exports.deepCopy=deepCopy;exports.stringRepeat=stringRepeat;exports.sameValue=sameValue;exports.Array={isArray:isArray,from:arrayFrom,of:arrayOf,last:arrayLast,empty:arrayEmpty};exports.Object={isObject:isObject,has:has};exports.Syntax=Syntax;exports.traverse=estraverse.traverse;exports.replace=estraverse.replace;exports.VisitorKeys=estraverse.VisitorKeys;exports.VisitorOption=estraverse.VisitorOption;exports.assert=assert;exports.unreachable=unreachable;exports.isIdentifier=isIdentifier;exports.moveLocation=moveLocation;exports.deleteLocation=deleteLocation;exports.convertToEmptyStatement=convertToEmptyStatement;exports.mayBeCompletionValue=mayBeCompletionValue;exports.isNegative=isNegative;exports.isFunctionBody=isFunctionBody;exports.SpecialNode={generateNegative:generateNegativeNode,isNegative:isNegativeNode,generateUndefined:generateUndefined,isUndefined:isUndefined,generateNaN:generateNaN,isNaN:isNaNNode,isReference:isReference,canExtractSequence:canExtractSequence,generateFromValue:generateFromValue};exports.delegateVariableDeclarations=delegateVariableDeclarations;exports.isScopedDeclaration=isScopedDeclaration})()},{escope:81,estraverse:121,esutils:124}],86:[function(require,module,exports){(function(){"use strict";var esshorten,common,Options,Syntax,Pass,annotateDirective;esshorten=require("esshorten");common=require("./common");Options=require("./options");Pass=require("./pass");annotateDirective=require("./annotate-directive");Syntax=common.Syntax;function recover(tree,useDirectiveStatement){function trailingIf(node){while(true){switch(node.type){case Syntax.IfStatement:if(!node.alternate){return true}node=node.alternate;continue;case Syntax.LabeledStatement:case Syntax.ForStatement:case Syntax.ForInStatement:case Syntax.WhileStatement:case Syntax.WithStatement:node=node.body;continue}return false}}common.traverse(tree,{leave:function leave(node){if(node.type===Syntax.IfStatement&&node.alternate){if(node.consequent.type!==Syntax.BlockStatement){if(trailingIf(node.consequent)){node.consequent={type:Syntax.BlockStatement,body:[node.consequent]}}}}if(!useDirectiveStatement&&node.type===Syntax.DirectiveStatement){node.type=Syntax.ExpressionStatement;node.expression=common.moveLocation(node,{type:Syntax.Literal,value:node.value,raw:node.raw});delete node.directive;delete node.value;delete node.raw}}});return tree}function iteration(tree,p,options){var i,iz,pass,res,changed,statuses,passes,result;function addPass(pass){var name;if(typeof pass!=="function"){name=Object.keys(pass)[0];pass=pass[name]}if(pass.hasOwnProperty("passName")){name=pass.passName}else{name=pass.name}passes.push(pass);statuses.push(true)}function fillStatuses(bool){var i,iz;for(i=0,iz=statuses.length;i<iz;++i){statuses[i]=bool}}result=options.get("destructive")?tree:common.deepCopy(tree);statuses=[];passes=[];for(i=0,iz=p.length;i<iz;++i){addPass(p[i])}do{changed=false;for(i=0,iz=passes.length;i<iz;++i){pass=passes[i];if(statuses[i]){res=pass(result,options);if(res.modified){changed=true;fillStatuses(true)}else{statuses[i]=false}result=res.result}}}while(changed);return result}function optimize(tree,pipeline,options){var i,iz,j,jz,section,pass;tree=annotateDirective(tree,new Options({destructive:false}));if(null==pipeline){pipeline=Pass.__defaultPipeline}options=new Options(options);for(i=0,iz=pipeline.length;i<iz;++i){section=pipeline[i];if(common.Array.isArray(section)){tree=iteration(tree,section,options)}else if(section.once){pass=section.pass;for(j=0,jz=pass.length;j<jz;++j){tree=pass[j](tree,options).result}}}return recover(tree,options.get("directive"))}exports.version=require("../package.json").version;exports.mangle=esshorten.mangle;exports.optimize=optimize;exports.pass=Pass})()},{"../package.json":125,"./annotate-directive":84,"./common":85,"./options":89,"./pass":90,esshorten:127}],87:[function(require,module,exports){(function(){"use strict";var Syntax,common;common=require("./common");Syntax=common.Syntax;function isConstant(node,allowRegExp){if(node.type===Syntax.Literal){if(typeof node.value==="object"&&node.value!==null){return allowRegExp}return true}if(node.type===Syntax.UnaryExpression){if(node.operator==="void"||node.operator==="delete"||node.operator==="!"){return isConstant(node.argument,true)}return isConstant(node.argument,false)}if(node.type===Syntax.BinaryExpression){if(node.operator==="in"||node.operator==="instanceof"){return false}return isConstant(node.left,false)&&isConstant(node.right,false)}if(node.type===Syntax.LogicalExpression){return isConstant(node.left,true)&&isConstant(node.right,true)}return false}function getConstant(node){if(node.type===Syntax.Literal){return node.value}if(node.type===Syntax.UnaryExpression){return doUnary(node.operator,getConstant(node.argument))}if(node.type===Syntax.BinaryExpression){return doBinary(node.operator,getConstant(node.left),getConstant(node.right))}if(node.type===Syntax.LogicalExpression){return doLogical(node.operator,getConstant(node.left),getConstant(node.right))}common.unreachable()}function doLogical(operator,left,right){if(operator==="||"){return left||right}if(operator==="&&"){return left&&right}common.unreachable()}function doUnary(operator,argument){switch(operator){case"+":return+argument;case"-":return-argument;case"~":return~argument;case"!":return!argument;case"delete":return true;case"void":return undefined;case"typeof":return typeof argument}common.unreachable()}function doBinary(operator,left,right){switch(operator){case"|":return left|right;case"^":return left^right;case"&":return left&right;case"==":return left==right;case"!=":return left!=right;case"===":return left===right;case"!==":return left!==right;case"<":return left<right;case">":return left>right;case"<=":return left<=right;case">=":return left>=right;case"<<":return left<<right;case">>":return left>>right;case">>>":return left>>>right;case"+":return left+right;case"-":return left-right;case"*":return left*right;case"/":return left/right;case"%":return left%right}common.unreachable()}exports.constant={doBinary:doBinary,doUnary:doUnary,doLogical:doLogical,evaluate:getConstant,isConstant:isConstant};function hasSideEffect(expr,scope){function visit(expr){var i,iz,ref;switch(expr.type){case Syntax.AssignmentExpression:return true;case Syntax.ArrayExpression:for(i=0,iz=expr.elements.length;i<iz;++i){if(expr.elements[i]!==null&&visit(expr.elements[i])){return true}}return false;case Syntax.BinaryExpression:return!isConstant(expr);case Syntax.CallExpression:return true;case Syntax.ConditionalExpression:return visit(expr.test)||visit(expr.consequent)||visit(expr.alternate);case Syntax.FunctionExpression:return false;case Syntax.Identifier:ref=scope.resolve(expr);if(ref&&ref.isStatic()){return false}return true;case Syntax.Literal:return false;case Syntax.LogicalExpression:return visit(expr.left)||visit(expr.right);case Syntax.MemberExpression:return true;case Syntax.NewExpression:return true;case Syntax.ObjectExpression:for(i=0,iz=expr.properties.length;i<iz;++i){if(visit(expr.properties[i])){return true}}return false;case Syntax.Property:return visit(expr.value);case Syntax.SequenceExpression:for(i=0,iz=expr.expressions.length;i<iz;++i){if(visit(expr.expressions[i])){return true}}return false;case Syntax.ThisExpression:return false;case Syntax.UnaryExpression:if(expr.operator==="void"||expr.operator==="delete"||expr.operator==="typeof"||expr.operator==="!"){return visit(expr.argument)}return!isConstant(expr);case Syntax.UpdateExpression:return true}return true}return visit(expr)}exports.hasSideEffect=hasSideEffect;function booleanCondition(expr){var ret;switch(expr.type){case Syntax.AssignmentExpression:return booleanCondition(expr.right);case Syntax.ArrayExpression:return true;case Syntax.BinaryExpression:if(isConstant(expr)){return!!getConstant(expr)}return null;case Syntax.CallExpression:return null;case Syntax.ConditionalExpression:ret=booleanCondition(expr.test);if(ret===true){return booleanCondition(expr.consequent)}if(ret===false){return booleanCondition(expr.alternate)}ret=booleanCondition(expr.consequent);if(ret===booleanCondition(expr.alternate)){return ret}return null;case Syntax.FunctionExpression:return true;case Syntax.Identifier:return null;case Syntax.Literal:return!!getConstant(expr);case Syntax.LogicalExpression:if(expr.operator==="&&"){ret=booleanCondition(expr.left);if(ret===null){return null}if(!ret){return false}return booleanCondition(expr.right)}else{ret=booleanCondition(expr.left);if(ret===null){return null}if(ret){return true}return booleanCondition(expr.right)}return null;case Syntax.MemberExpression:return null;case Syntax.NewExpression:return true;case Syntax.ObjectExpression:return true;case Syntax.Property:common.unreachable();return null;case Syntax.SequenceExpression:return booleanCondition(common.Array.last(expr.expressions));case Syntax.ThisExpression:return null;case Syntax.UnaryExpression:if(expr.operator==="void"){return false}if(expr.operator==="typeof"){return true}if(expr.operator==="!"){ret=booleanCondition(expr.argument);if(ret===null){return null}return!ret}if(isConstant(expr)){return!!getConstant(expr)}return null;case Syntax.UpdateExpression:return null}return null}exports.booleanCondition=booleanCondition})()},{"./common":85}],88:[function(require,module,exports){(function(global){(function(){(function(){"use strict";var Map;if(typeof global.Map!=="undefined"){Map=global.Map}else{Map=function Map(){this.__data={}};Map.prototype.get=function MapGet(key){key="$"+key;if(this.__data.hasOwnProperty(key)){return this.__data[key]}};Map.prototype.has=function MapHas(key){key="$"+key;return this.__data.hasOwnProperty(key)};Map.prototype.set=function MapSet(key,val){key="$"+key;this.__data[key]=val};Map.prototype["delete"]=function MapDelete(key){key="$"+key;return delete this.__data[key]};Map.prototype.clear=function MapClear(){this.__data={}};Map.prototype.forEach=function MapForEach(callback,thisArg){var real,key;for(real in this.__data){if(this.__data.hasOwnProperty(real)){key=real.substring(1);callback.call(thisArg,this.__data[real],key,this)}}};Map.prototype.keys=function MapKeys(){var real,result;result=[];for(real in this.__data){if(this.__data.hasOwnProperty(real)){result.push(real.substring(1))}}return result};Map.prototype.values=function MapValues(){var real,result;result=[];for(real in this.__data){if(this.__data.hasOwnProperty(real)){result.push(this.__data[real])}}return result};Map.prototype.items=function MapItems(){var real,result;result=[];for(real in this.__data){if(this.__data.hasOwnProperty(real)){result.push([real.substring(1),this.__data[real]])}}return result}}module.exports=Map})()}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],89:[function(require,module,exports){(function(){"use strict";var common;common=require("./common");function extend(result,update){var prop,lhs,rhs;for(prop in update){if(!common.Object.has(update,prop)){continue}if(prop in result){lhs=result[prop];rhs=update[prop];if(common.Object.isObject(rhs)&&common.Object.isObject(lhs)){result[prop]=extend(lhs,rhs)}else{result[prop]=update[prop]}}else{result[prop]=update[prop]}}return result}function Options(override){var defaults={destructive:true,preserveCompletionValue:false};if(override==null){this.data=defaults;return}this.data=extend(defaults,override)}Options.prototype.get=function get(name,details){var local;if(details!=null){if(common.Object.has(details,"pathName")){local=this.data[details.pathName];if(local!=null&&common.Object.has(local,name)){return local[name]}}}return this.data[name]};module.exports=Options})()},{"./common":85}],90:[function(require,module,exports){(function(){"use strict";var query,Registry,pass,post,common;common=require("./common");query=require("./query");Registry={};Registry.__direct={};function initialize(kind,passes){var i,iz,pass;Registry[kind]={};for(i=0,iz=passes.length;i<iz;++i){pass=passes[i];common.assert(Registry[kind][pass.passName]==null,"don't create duplicate pass names");Registry[kind][pass.passName]=pass}common.assert(Registry.__direct[pass.passName]==null,"don't create duplicate pass names");Registry.__direct[pass.passName]=pass}pass=[require("./pass/hoist-variable-to-arguments"),require("./pass/transform-dynamic-to-static-property-access"),require("./pass/transform-dynamic-to-static-property-definition"),require("./pass/transform-immediate-function-call"),require("./pass/transform-logical-association"),require("./pass/reordering-function-declarations"),require("./pass/remove-unused-label"),require("./pass/remove-empty-statement"),require("./pass/remove-wasted-blocks"),require("./pass/transform-to-compound-assignment"),require("./pass/transform-to-sequence-expression"),require("./pass/transform-branch-to-expression"),require("./pass/transform-typeof-undefined"),require("./pass/reduce-sequence-expression"),require("./pass/reduce-branch-jump"),require("./pass/reduce-multiple-if-statements"),require("./pass/dead-code-elimination"),require("./pass/remove-side-effect-free-expressions"),require("./pass/remove-context-sensitive-expressions"),require("./pass/tree-based-constant-folding"),require("./pass/concatenate-variable-definition"),require("./pass/drop-variable-definition"),require("./pass/remove-unreachable-branch"),require("./pass/eliminate-duplicate-function-declarations")];post=[require("./post/transform-static-to-dynamic-property-access"),require("./post/transform-infinity"),require("./post/rewrite-boolean"),require("./post/rewrite-conditional-expression"),require("./post/omit-parens-in-void-context-iife")];initialize("pass",pass);initialize("post",post);function passRequire(name){if(common.Object.has(Registry.__direct,name)){return Registry.__direct[name]}return query.get(Registry,name.split("/"))}exports.require=passRequire;exports.Registry=Registry;exports.__defaultPipeline=[pass,{once:true,pass:post}]})()},{"./common":85,"./pass/concatenate-variable-definition":91,"./pass/dead-code-elimination":92,"./pass/drop-variable-definition":93,"./pass/eliminate-duplicate-function-declarations":94,"./pass/hoist-variable-to-arguments":95,"./pass/reduce-branch-jump":96,"./pass/reduce-multiple-if-statements":97,"./pass/reduce-sequence-expression":98,"./pass/remove-context-sensitive-expressions":99,"./pass/remove-empty-statement":100,"./pass/remove-side-effect-free-expressions":101,"./pass/remove-unreachable-branch":102,"./pass/remove-unused-label":103,"./pass/remove-wasted-blocks":104,"./pass/reordering-function-declarations":105,"./pass/transform-branch-to-expression":106,"./pass/transform-dynamic-to-static-property-access":107,"./pass/transform-dynamic-to-static-property-definition":108,"./pass/transform-immediate-function-call":109,"./pass/transform-logical-association":110,"./pass/transform-to-compound-assignment":111,"./pass/transform-to-sequence-expression":112,"./pass/transform-typeof-undefined":113,"./pass/tree-based-constant-folding":114,"./post/omit-parens-in-void-context-iife":115,"./post/rewrite-boolean":116,"./post/rewrite-conditional-expression":117,"./post/transform-infinity":118,"./post/transform-static-to-dynamic-property-access":119,"./query":120}],91:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="concatenate-variable-definition";common=require("../common");Syntax=common.Syntax;function concatenateVariableDefinition(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{leave:function leave(node){var i,iz,j,jz,stmt,decl,target,body;if(node.type!==Syntax.BlockStatement&&node.type!==Syntax.Program){return}target=null;body=[];for(i=0,iz=node.body.length;i<iz;++i){stmt=node.body[i];if(stmt.type===Syntax.VariableDeclaration&&stmt.kind==="var"){if(!target){target=stmt;body.push(stmt);continue}modified=true;for(j=0,jz=stmt.declarations.length;j<jz;++j){decl=stmt.declarations[j];target.declarations.push(decl)}}else{target=null;body.push(stmt)}}node.body=body}});return{result:result,modified:modified}}concatenateVariableDefinition.passName=Name;module.exports=concatenateVariableDefinition})()},{"../common":85}],92:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,status,modified;Name="dead-code-elimination";common=require("../common");Syntax=common.Syntax;function JumpTarget(node,status,type){this.node=node;this.type=type;this.labels=status.labels||[];status.labels=null}JumpTarget.NAMED_ONLY=0;JumpTarget.ITERATION=2;JumpTarget.SWITCH=3;JumpTarget.prototype.isIteration=function isIteration(){return this.type===JumpTarget.ITERATION};JumpTarget.prototype.isAnonymous=function isAnonymous(){return this.type&2};JumpTarget.prototype.contains=function contains(label){return this.labels.indexOf(label)!==-1};function Jumps(){this.targets=[]}Jumps.prototype.lookupContinuableTarget=function lookupContinuableTarget(label){var i,target;for(i=this.targets.length-1;i>=0;--i){target=this.targets[i];if(target.isIteration()&&(!label||target.contains(label.name))){return target.node}}common.unreachable()};Jumps.prototype.lookupBreakableTarget=function lookupBreakableTarget(label){var i,target;for(i=this.targets.length-1;i>=0;--i){target=this.targets[i];if(label){if(target.contains(label.name)){return target.node}}else{if(target.isAnonymous()){return target.node}}}common.unreachable()};Jumps.prototype.push=function push(target){this.targets.push(target)};Jumps.prototype.pop=function pop(){this.targets.pop()};function Status(upper){this.current=[];this.upper=upper;this.jumps=new Jumps;this.labels=null;this.next()}Status.NEXT={};Status.prototype.insert=function insert(stmt){this.current.push(stmt)};Status.prototype.erase=function erase(stmt){var index=this.current.indexOf(stmt);if(index===-1){return false}this.current.splice(index,1);return true};Status.prototype.kill=function kill(){return this.erase(Status.NEXT)};Status.prototype.has=function has(stmt){return this.current.indexOf(stmt)!==-1};Status.prototype.jumpTo=function jumpTo(stmt){this.kill();this.insert(stmt)};Status.prototype.resolveJump=function resolveJump(stmt){var index=this.current.indexOf(stmt);if(index!==-1){this.current.splice(index,1);this.insert(Status.NEXT)}};Status.prototype.clear=function clear(){this.current.length=0};Status.prototype.next=function next(){this.insert(Status.NEXT)};Status.prototype.isDead=function isDead(){return!this.has(Status.NEXT)};Status.prototype.revive=function revive(){if(this.isDead()){this.next();return true}return false};Status.prototype.register=function register(node){if(!this.labels){this.labels=[]}this.labels.push(node.label.name)};Status.prototype.unregister=function unregister(){this.labels=null};Status.isRequired=function isRequired(node){var type=node.type;common.assert(node,"should be node");return type===Syntax.Program||type===Syntax.FunctionExpression||type===Syntax.FunctionDeclaration};function Context(node){node.__$context=this;this.node=node}Context.prototype.detach=function detach(){delete this.node.__$context};Context.lookup=function lookup(node){return node.__$context};function getForwardLastNode(node){while(true){switch(node.type){case Syntax.IfStatement:if(node.alternate){return null}node=node.consequent;continue;case Syntax.WithStatement:case Syntax.LabeledStatement:node=node.body;continue;case Syntax.BlockStatement:if(node.body.length){node=common.Array.last(node.body);continue}break}return node}}function visitLoopBody(loop,body){var jump,last;last=getForwardLastNode(body);if(last){if(last.type===Syntax.ContinueStatement){jump=status.jumps.lookupContinuableTarget(last.label);if(jump===loop){modified=true;common.convertToEmptyStatement(last)}}}return visit(body)}function visit(target){var live=false;if(!target){return!status.isDead()}function eliminate(node,array){var i,iz,stmt,ret,info,result;result=[];for(i=0,iz=array.length;i<iz;++i){stmt=array[i];if(stmt.type===Syntax.IfStatement){info=new Context(stmt);ret=visit(stmt);info.detach()}else{ret=visit(stmt)}if(ret){live|=1;result.push(stmt);if(stmt.type===Syntax.IfStatement&&stmt.alternate){if((!info.consequent||!info.alternate)&&info.consequent!==info.alternate){modified=true;if(info.consequent){stmt.test=common.moveLocation(stmt.test,{type:Syntax.UnaryExpression,operator:"!",argument:stmt.test});result.push(stmt.consequent);stmt.consequent=stmt.alternate;stmt.alternate=null}else{result.push(stmt.alternate);stmt.alternate=null}}}}else{modified=true}}return result}common.traverse(target,{enter:function enter(node){var i,iz,stmt,consequent,alternate,ctx,hasDefaultClause;if(Status.isRequired(node)){status=new Status(status)}live|=!status.isDead();switch(node.type){case Syntax.Program:node.body=eliminate(node,node.body);return common.VisitorOption.Skip;case Syntax.BlockStatement:status.jumps.push(new JumpTarget(node,status,JumpTarget.NAMED_ONLY));node.body=eliminate(node,node.body);status.jumps.pop();status.resolveJump(node);return common.VisitorOption.Skip;case Syntax.BreakStatement:if(node.label&&status.labels&&status.labels.indexOf(node.label)){modified=true;common.convertToEmptyStatement(node)}else{status.jumpTo(status.jumps.lookupBreakableTarget(node.label))}return common.VisitorOption.Skip;case Syntax.CatchClause:live|=visit(node.body);return common.VisitorOption.Skip;case Syntax.ContinueStatement:status.jumpTo(status.jumps.lookupContinuableTarget(node.label));return common.VisitorOption.Skip;case Syntax.DoWhileStatement:status.jumps.push(new JumpTarget(node,status,JumpTarget.ITERATION));live|=visitLoopBody(node,node.body);status.jumps.pop();live|=visit(node.test);status.resolveJump(node);status.revive();return common.VisitorOption.Skip;case Syntax.DebuggerStatement:return common.VisitorOption.Skip;case Syntax.EmptyStatement:return common.VisitorOption.Skip;case Syntax.ExpressionStatement:break;case Syntax.ForStatement:live|=visit(node.init);live|=visit(node.test);status.jumps.push(new JumpTarget(node,status,JumpTarget.ITERATION));live|=visitLoopBody(node,node.body);status.jumps.pop();live|=visit(node.update);status.resolveJump(node);status.revive();return common.VisitorOption.Skip;case Syntax.ForInStatement:live|=visit(node.left);live|=visit(node.right);status.jumps.push(new JumpTarget(node,status,JumpTarget.ITERATION));live|=visitLoopBody(node,node.body);status.jumps.pop();status.resolveJump(node);status.revive();return common.VisitorOption.Skip;case Syntax.IfStatement:live|=visit(node.test);live|=visit(node.consequent);if(!node.alternate){status.revive();return common.VisitorOption.Skip}consequent=!status.isDead();if(!status.revive()){status.insert(node)}live|=visit(node.alternate);alternate=!status.isDead();if(status.erase(node)){status.revive()}if(ctx=Context.lookup(node)){ctx.consequent=consequent;ctx.alternate=alternate}return common.VisitorOption.Skip;case Syntax.LabeledStatement:status.register(node);break;case Syntax.ReturnStatement:live|=visit(node.argument);status.kill();return common.VisitorOption.Skip;case Syntax.SwitchStatement:visit(node.discriminant);status.jumps.push(new JumpTarget(node,status,JumpTarget.SWITCH));for(i=0,iz=node.cases.length;i<iz;++i){stmt=node.cases[i];live|=visit(stmt);if(!stmt.test){hasDefaultClause=true}if(status.isDead()&&i+1<iz){status.next()}}status.jumps.pop();status.resolveJump(node);if(status.isDead()&&!hasDefaultClause){status.next()}return common.VisitorOption.Skip;case Syntax.SwitchCase:if(node.test){live|=visit(node.test)}node.consequent=eliminate(node,node.consequent);return common.VisitorOption.Skip;case Syntax.ThrowStatement:live|=visit(node.argument);status.kill();return common.VisitorOption.Skip;case Syntax.TryStatement:live|=visit(node.block);if(node.handlers&&node.handlers.length){if(!status.revive()){status.insert(node)}node.handlers=eliminate(node,node.handlers);if(status.erase(node)){status.revive()}}if(node.finalizer){if(!status.revive()){status.insert(node)}live|=visit(node.finalizer);if(!status.erase(node)){status.kill()}}return common.VisitorOption.Skip;case Syntax.WhileStatement:live|=visit(node.test);status.jumps.push(new JumpTarget(node,status,JumpTarget.ITERATION));live|=visitLoopBody(node,node.body);status.jumps.pop();status.resolveJump(node);status.revive();return common.VisitorOption.Skip;case Syntax.WithStatement:break;case Syntax.VariableDeclaration:case Syntax.FunctionDeclaration:live=true;break}},leave:function leave(node){if(Status.isRequired(node)){status=status.upper;return}if(node.type===Syntax.LabeledStatement){status.unregister()}}});return live}function deadCodeElimination(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);status=null;modified=false;visit(result);common.assert(status===null,"status should be null");return{result:result,modified:modified}}deadCodeElimination.passName=Name;module.exports=deadCodeElimination})()},{"../common":85}],93:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified,escope,evaluator;Name="drop-variable-definition";common=require("../common");escope=require("escope");evaluator=require("../evaluator");Syntax=common.Syntax;function getCandidates(scope){var i,iz,j,jz,identifiers,slots,v;if(!scope.candidates){slots=[];identifiers=[];for(i=0,iz=scope.variables.length;i<iz;++i){v=scope.variables[i];for(j=0,jz=v.identifiers.length;j<jz;++j){identifiers.push(v.identifiers[j]);slots.push(v)}}scope.candidates={slots:slots,identifiers:identifiers}}return scope.candidates}function isRemovableDefinition(slot){var i,iz,ref,parent;if(slot.identifiers.length!==1){return false}if(slot.references.length===0){return true}for(i=0,iz=slot.references.length;i<iz;++i){ref=slot.references[i];if(ref.isRead()){return false}if(ref.isWrite()){if(!ref.writeExpr){return false}parent=ref.writeExpr.__$parent$__;if(!parent){return false}if(parent.type!==Syntax.AssignmentExpression&&parent.type!==Syntax.VariableDeclarator){return false}if(evaluator.hasSideEffect(ref.writeExpr,ref.from)){return false}}}return true}function overrideExpression(from,to){var key;for(key in from){delete from[key]}for(key in to){from[key]=to[key]}return from}function removeDefinition(node,index,slot){var i,iz,ref,parent;node.declarations.splice(index,1);for(i=0,iz=slot.references.length;i<iz;++i){ref=slot.references[i];common.assert(!ref.isRead());if(ref.isWrite()){parent=ref.writeExpr.__$parent$__;if(parent.type===Syntax.AssignmentExpression){overrideExpression(ref.writeExpr.__$parent$__,ref.writeExpr)}}}}function attachParent(tree){return common.traverse(tree,{enter:function(node,parent){node.__$parent$__=parent}})}function removeParent(tree){return common.traverse(tree,{enter:function(node){delete node.__$parent$__;delete node.__$escope$__}})}function dropVariableDefinition(tree,options){var result,manager,scope;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();attachParent(result);result=common.replace(result,{enter:function enter(node,parent){var i,decl,cand,index,slot,ret;ret=node;if(scope){if(scope.variableScope.isStatic()){cand=getCandidates(scope.variableScope);if(node.type===Syntax.VariableDeclaration&&node.kind==="var"){i=node.declarations.length;while(i--){decl=node.declarations[i];index=cand.identifiers.indexOf(decl.id);if(index!==-1){slot=cand.slots[index];if(isRemovableDefinition(slot)){modified=true;removeDefinition(node,i,slot);continue}}}if(node.declarations.length===0){if(parent.type===Syntax.ForStatement){ret=null}else{ret=common.moveLocation(node,{type:Syntax.EmptyStatement})}}}if(node.type===Syntax.FunctionDeclaration){index=cand.identifiers.indexOf(node.id);if(index!==-1){slot=cand.slots[index];if(slot.identifiers.length===1&&slot.references.length===0){modified=true;ret=common.moveLocation(node,{type:Syntax.EmptyStatement});return ret}}}}}scope=manager.acquire(node)||scope;return ret},leave:function leave(node){scope=manager.release(node)||scope}});manager.detach();removeParent(result);return{result:result,modified:modified}}dropVariableDefinition.passName=Name;module.exports=dropVariableDefinition})()},{"../common":85,"../evaluator":87,escope:81}],94:[function(require,module,exports){(function(){"use strict";var Name,Syntax,Map,common,modified;Name="eliminate-duplicate-function-declarations";common=require("../common");Map=require("../map");Syntax=common.Syntax;function unique(map,root){return common.replace(root,{enter:function(node){var name,info;if(node.type===Syntax.FunctionDeclaration){name=node.id.name;info=map.get(name);--info.count;if(info.count!==0){modified=true;return common.moveLocation(node,{type:Syntax.EmptyStatement})}}if(node!==root&&node.type===Syntax.BlockStatement){return this.skip()}}})}function uniqueInGlobal(map,root){return common.replace(root,{enter:function(node){var name,info,first;if(node.type===Syntax.FunctionDeclaration){name=node.id.name;info=map.get(name);first=info.count===info.declarations.length;--info.count;if(info.declarations.length>1){if(first){modified=true;return common.Array.last(info.declarations)}else{modified=true;return common.moveLocation(node,{type:Syntax.EmptyStatement})}}}if(node!==root&&node.type===Syntax.BlockStatement){return this.skip()}}})}function main(tree,options){var result,stack,functionDepth,globalBlockFound;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;functionDepth=0;globalBlockFound=false;stack=[new Map];result=common.replace(result,{enter:function enter(node){var map,name,info;if(node.type===Syntax.FunctionDeclaration){name=node.id.name;map=common.Array.last(stack);if(map.has(name)){info=map.get(name);info.declarations.push(node);++info.count}else{info={declarations:[node],count:1};map.set(name,info)}}if(node.type===Syntax.BlockStatement){stack.push(new Map)}if(node.type===Syntax.FunctionDeclaration||node.type===Syntax.FunctionExpression){++functionDepth}},leave:function leave(node){var map,ret;if(node.type===Syntax.BlockStatement){map=stack.pop();if(functionDepth===0){if(map.keys().length!==0){globalBlockFound=true}}else{ret=unique(map,node)}}if(node.type===Syntax.FunctionDeclaration||node.type===Syntax.FunctionExpression){--functionDepth}return ret}});common.assert(stack.length===1,"global map remains");if(!globalBlockFound){result=uniqueInGlobal(stack[0],result)}return{result:result,modified:modified}}main.passName=Name;module.exports=main})()},{"../common":85,"../map":88}],95:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,escope,modified;Name="hoist-variable-to-arguments";escope=require("escope");common=require("../common");Syntax=common.Syntax;function hoist(callee){function hoisting(ident){var hoisted,i,iz;hoisted=false;for(i=0,iz=callee.params.length;i<iz;++i){if(ident.name===callee.params[i].name){hoisted=true;break}}if(!hoisted){callee.params.push(ident)}}callee.body=common.replace(callee.body,{enter:function(node,parent){var i,iz,expressions,declaration,forstmt,expr;if(node.type===Syntax.FunctionExpression||node.type===Syntax.FunctionDeclaration){this.skip();return}if(node.type===Syntax.VariableDeclaration&&node.kind==="var"){if(parent.type===Syntax.ForInStatement){common.assert(node.declarations.length===1,"for-in declaration length should be 1");declaration=node.declarations[0];if(declaration.init){return}if(declaration.id.type!==Syntax.Identifier){return}hoisting(declaration.id);modified=true;return declaration.id}forstmt=parent.type===Syntax.ForStatement;expressions=[];for(i=0,iz=node.declarations.length;i<iz;++i){declaration=node.declarations[i];if(declaration.id.type!==Syntax.Identifier){return}hoisting(declaration.id);if(declaration.init){expressions.push(common.moveLocation(declaration,{type:Syntax.AssignmentExpression,operator:"=",left:declaration.id,right:declaration.init}))}}modified=true;if(expressions.length===0){if(forstmt){return null}return common.moveLocation(node,{type:Syntax.EmptyStatement})}if(expressions.length===1){expr=expressions[0]}else{expr=common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:expressions})}if(forstmt){return expr}return common.moveLocation(node,{type:Syntax.ExpressionStatement,expression:expr})}}})}function hoistVariableToArguments(tree,options){var result,scope,manager;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();common.traverse(result,{enter:function enter(node){var callee;if(node.type===Syntax.CallExpression||node.type===Syntax.NewExpression){callee=node.callee;if(callee.type===Syntax.FunctionExpression&&!callee.id){if(callee.params.length===node["arguments"].length){scope=manager.acquire(callee);if(!scope.isArgumentsMaterialized()&&(node.type!==Syntax.NewExpression||!scope.isThisMaterialized())){hoist(callee)}}}}}});manager.detach();return{result:result,modified:modified}}hoistVariableToArguments.passName=Name;module.exports=hoistVariableToArguments})()},{"../common":85,escope:81}],96:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="reduce-branch-jump";common=require("../common");Syntax=common.Syntax;function reduceLast(ary,index){var node,left;node=ary[index];if(node.type===Syntax.IfStatement){if(!node.alternate){if(node.consequent.type===Syntax.ReturnStatement){modified=true;left=node.consequent.argument;if(!left){ary[index]=common.moveLocation(node,{type:Syntax.ReturnStatement,argument:{type:Syntax.SequenceExpression,expressions:[node.test,common.SpecialNode.generateUndefined()]}});return true}ary[index]=common.moveLocation(node,{type:Syntax.ReturnStatement,argument:{type:Syntax.ConditionalExpression,test:node.test,consequent:left,alternate:common.SpecialNode.generateUndefined()}});return true}}}}function reduce(ary,index){var node,sibling,left,right;node=ary[index];sibling=ary[index+1];if(node.type===Syntax.IfStatement){if(!node.alternate){if(node.consequent.type===Syntax.ReturnStatement&&sibling.type===Syntax.ReturnStatement){modified=true;ary.splice(index,1);left=node.consequent.argument;right=sibling.argument;if(!left&&!right){ary[index]=common.moveLocation(node,{type:Syntax.ReturnStatement,argument:{type:Syntax.SequenceExpression,expressions:[node.test,common.SpecialNode.generateUndefined()]}});return true}if(!left){left=common.SpecialNode.generateUndefined()}if(!right){right=common.SpecialNode.generateUndefined()}ary[index]=common.moveLocation(node,{type:Syntax.ReturnStatement,argument:{type:Syntax.ConditionalExpression,test:node.test,consequent:left,alternate:right}});return true}}}return false}function reduceBranchJump(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{leave:function leave(node,parent){var i;switch(node.type){case Syntax.BlockStatement:case Syntax.Program:i=0;while(i<node.body.length-1){if(!reduce(node.body,i)){++i}}if(common.isFunctionBody(node,parent)){if(node.body.length>0){i=node.body.length-1;reduceLast(node.body,i)}}break;case Syntax.SwitchCase:i=0;while(i<node.consequent.length-1){if(!reduce(node.consequent,i)){++i}}break}}});return{result:result,modified:modified}}reduceBranchJump.passName=Name;module.exports=reduceBranchJump})()},{"../common":85}],97:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="reduce-multiple-if-statements";common=require("../common");Syntax=common.Syntax;function reduceMultipleIfStatements(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{leave:function leave(node){if(node.type===Syntax.IfStatement&&!node.alternate&&node.consequent.type===Syntax.IfStatement&&!node.consequent.alternate){modified=true;node.test={type:Syntax.LogicalExpression,operator:"&&",left:node.test,right:node.consequent.test};node.consequent=node.consequent.consequent}}});return{result:result,modified:modified}}reduceMultipleIfStatements.passName=Name;module.exports=reduceMultipleIfStatements})()},{"../common":85}],98:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,evaluator,escope,modified;Name="reduce-sequence-expression";escope=require("escope");common=require("../common");evaluator=require("../evaluator");Syntax=common.Syntax;function reduce(node){var i,iz,j,jz,expr,result;result=[];for(i=0,iz=node.expressions.length;i<iz;++i){expr=node.expressions[i];if(expr.type===Syntax.SequenceExpression){modified=true;common.deleteLocation(node);for(j=0,jz=expr.expressions.length;j<jz;++j){result.push(expr.expressions[j])}}else{result.push(expr)}}node.expressions=result}function isLoadSideEffectFree(node,scope){var ref,value;if(evaluator.constant.isConstant(node)){value=evaluator.constant.evaluate(node);if(value===null||typeof value!=="object"){return true}}if(node.type===Syntax.Identifier){ref=scope.resolve(node);return ref&&ref.isStatic()}return false}function isStoreSideEffectFree(node,scope){if(!evaluator.hasSideEffect(node,scope)){return true}if(node.type===Syntax.Identifier){return true}if(node.type===Syntax.MemberExpression){if(!evaluator.hasSideEffect(node.object,scope)){if(!node.computed||isLoadSideEffectFree(node.property,scope)){return true}}return false}return false}function reduceSequenceExpression(tree,options){var result,scope,manager;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();result=common.replace(result,{enter:function enter(node){scope=manager.acquire(node)||scope},leave:function leave(node){var result,last;switch(node.type){case Syntax.SequenceExpression:reduce(node);break;case Syntax.ConditionalExpression:if(node.test.type===Syntax.SequenceExpression){modified=true;result=node.test;node.test=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}break;case Syntax.LogicalExpression:if(node.left.type===Syntax.SequenceExpression){modified=true;result=node.left;node.left=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}break;case Syntax.BinaryExpression:if(node.left.type===Syntax.SequenceExpression){modified=true;result=node.left;node.left=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}else if(node.right.type===Syntax.SequenceExpression&&!evaluator.hasSideEffect(node.left,scope)){modified=true;result=node.right;node.right=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}break;case Syntax.UpdateExpression:case Syntax.UnaryExpression:if(node.argument.type===Syntax.SequenceExpression){last=common.Array.last(node.argument.expressions);if(!common.SpecialNode.canExtractSequence(last,node,scope)){break}modified=true;result=node.argument;node.argument=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}break;case Syntax.AssignmentExpression:if(node.operator==="="&&node.right.type===Syntax.SequenceExpression&&isStoreSideEffectFree(node.left,scope)){modified=true;result=node.right;node.right=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}break}scope=manager.release(node)||scope;return result}});manager.detach();return{result:result,modified:modified}}reduceSequenceExpression.passName=Name;module.exports=reduceSequenceExpression})()},{"../common":85,"../evaluator":87,escope:81}],99:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,evaluator,escope,modified;Name="remove-context-sensitive-expressions";common=require("../common");evaluator=require("../evaluator");escope=require("escope");Syntax=common.Syntax;function Transformer(trans,booleanFunction,voidFunction,scope){this.transform=trans;this.booleanFunction=booleanFunction;this.voidFunction=voidFunction;this.scope=scope}Transformer.prototype.booleanTransformation=function(expr){var consequent;do{if(expr.type===Syntax.UnaryExpression){if(expr.operator==="!"&&expr.argument.type===Syntax.UnaryExpression&&expr.argument.operator==="!"){modified=true;expr=expr.argument.argument;continue}}else if(expr.type===Syntax.LogicalExpression){if(expr.left.type===Syntax.UnaryExpression&&expr.left.operator==="!"&&expr.right.type===Syntax.UnaryExpression&&expr.right.operator==="!"){modified=true;expr.left=expr.left.argument;expr.right=expr.right.argument;expr.operator=expr.operator==="||"?"&&":"||";expr=common.moveLocation(expr,{type:Syntax.UnaryExpression,operator:"!",argument:expr});continue}}else if(expr.type===Syntax.ConditionalExpression){if(expr.test.type===Syntax.UnaryExpression&&expr.test.operator==="!"){modified=true;expr.test=expr.test.argument;consequent=expr.consequent;expr.consequent=expr.alternate;expr.alternate=consequent}}break}while(true);return expr};Transformer.prototype.voidTransformation=function(expr){var leftHasSideEffect,rightHasSideEffect;do{expr=this.booleanTransformation(expr);if(expr.type===Syntax.UnaryExpression){if(expr.operator==="!"||expr.operator==="void"){modified=true;expr=expr.argument;continue}}else if(expr.type===Syntax.LogicalExpression){if(expr.left.type===Syntax.UnaryExpression&&expr.left.operator==="!"){modified=true;expr.left=expr.left.argument;expr.operator=expr.operator==="||"?"&&":"||"}}else if(expr.type===Syntax.ConditionalExpression){leftHasSideEffect=evaluator.hasSideEffect(expr.consequent,this.scope);rightHasSideEffect=evaluator.hasSideEffect(expr.alternate,this.scope);if(!leftHasSideEffect&&!rightHasSideEffect){modified=true;expr=expr.test}else if(!leftHasSideEffect){modified=true;expr=common.moveLocation(expr,{type:Syntax.LogicalExpression,operator:"||",left:expr.test,right:expr.alternate})}else if(!rightHasSideEffect){modified=true;expr=common.moveLocation(expr,{type:Syntax.LogicalExpression,operator:"&&",left:expr.test,right:expr.consequent})}}break}while(true);return expr};Transformer.prototype.apply=function(expr){var prev;do{prev=expr;expr=this.transform(expr);if(prev!==expr){continue}if(expr.type===Syntax.LogicalExpression){expr.left=this.booleanFunction(expr.left,this.scope);expr.right=this.voidFunction(expr.right,this.scope)}else if(expr.type===Syntax.ConditionalExpression){expr.consequent=this.voidFunction(expr.consequent,this.scope);expr.alternate=this.voidFunction(expr.alternate,this.scope)}else if(expr.type===Syntax.SequenceExpression){expr.expressions[expr.expressions.length-1]=this.voidFunction(common.Array.last(expr.expressions),this.scope)}break}while(true);return expr};function voidContext(expr,scope){var trans=new Transformer(Transformer.prototype.voidTransformation,booleanContext,voidContext,scope);return trans.apply(expr)}function booleanContext(expr,scope){var trans=new Transformer(Transformer.prototype.booleanTransformation,booleanContext,booleanContext,scope);return trans.apply(expr)}function removeContextSensitiveExpressions(tree,options){var result,stackCount,preserveCompletionValue,scope,manager;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;stackCount=0;preserveCompletionValue=options.get("preserveCompletionValue",{pathName:Name});scope=null;manager=escope.analyze(result,{directive:true});manager.attach();result=common.replace(result,{enter:function enter(node){var i,iz;scope=manager.acquire(node)||scope;if(node.type===Syntax.FunctionExpression||node.type===Syntax.FunctionDeclaration){++stackCount}switch(node.type){case Syntax.AssignmentExpression:break;case Syntax.ArrayExpression:break;case Syntax.BlockStatement:break;case Syntax.BinaryExpression:break;case Syntax.BreakStatement:break;case Syntax.CallExpression:break;case Syntax.CatchClause:break;case Syntax.ConditionalExpression:node.test=booleanContext(node.test,scope);break;case Syntax.ContinueStatement:break;case Syntax.DoWhileStatement:node.test=booleanContext(node.test,scope);break;case Syntax.DebuggerStatement:break;case Syntax.EmptyStatement:break;case Syntax.ExpressionStatement:if(!preserveCompletionValue||stackCount!==0){node.expression=voidContext(node.expression,scope)}break;case Syntax.FunctionExpression:break;case Syntax.ForInStatement:break;case Syntax.FunctionDeclaration:break;case Syntax.ForStatement:if(node.init&&node.init.type!==Syntax.VariableDeclaration){node.init=voidContext(node.init,scope)}if(node.test){node.test=booleanContext(node.test,scope)}if(node.update){node.update=voidContext(node.update,scope)}break;case Syntax.Identifier:break;case Syntax.IfStatement:node.test=booleanContext(node.test,scope);break;case Syntax.Literal:break;case Syntax.LabeledStatement:break;case Syntax.LogicalExpression:break;case Syntax.MemberExpression:break;case Syntax.NewExpression:break;case Syntax.ObjectExpression:break;case Syntax.Program:break;case Syntax.Property:break;case Syntax.ReturnStatement:break;case Syntax.SequenceExpression:for(i=0,iz=node.expressions.length-1;i<iz;++i){node.expressions[i]=voidContext(node.expressions[i],scope)}break;case Syntax.SwitchStatement:break;case Syntax.SwitchCase:break;case Syntax.ThisExpression:break;case Syntax.ThrowStatement:break;case Syntax.TryStatement:break;case Syntax.UnaryExpression:if(node.operator==="!"){node.argument=booleanContext(node.argument,scope)}else if(node.operator==="void"){node.argument=voidContext(node.argument,scope)}break;case Syntax.UpdateExpression:break;case Syntax.VariableDeclaration:break;case Syntax.VariableDeclarator:break;case Syntax.WhileStatement:node.test=booleanContext(node.test,scope);break;case Syntax.WithStatement:break}},leave:function leave(node){scope=manager.release(node)||scope;if(node.type===Syntax.FunctionExpression||node.type===Syntax.FunctionDeclaration){--stackCount}}});manager.detach();return{result:result,modified:modified}}removeContextSensitiveExpressions.passName=Name;module.exports=removeContextSensitiveExpressions})()},{"../common":85,"../evaluator":87,escope:81}],100:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="remove-empty-statement";common=require("../common");Syntax=common.Syntax;function remove(array){var i,iz,node,result;result=[];for(i=0,iz=array.length;i<iz;++i){node=array[i];if(node.type===Syntax.EmptyStatement){modified=true}else{result.push(node)}}return result}function removeAlternate(node){if(node.alternate){if(node.alternate.type===Syntax.EmptyStatement){modified=true;node.alternate=null}else if(node.consequent.type===Syntax.EmptyStatement){modified=true;node.consequent=node.alternate;node.alternate=null;node.test=common.moveLocation(node.test,{type:Syntax.UnaryExpression,operator:"!",argument:node.test})}}}function removeEmptyStatement(tree,options){var result;modified=false;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);common.traverse(result,{enter:function enter(node){var clause;switch(node.type){case Syntax.BlockStatement:case Syntax.Program:node.body=remove(node.body);break;case Syntax.SwitchCase:node.consequent=remove(node.consequent);break;case Syntax.IfStatement:removeAlternate(node);break;case Syntax.SwitchStatement:if(node.cases.length){clause=common.Array.last(node.cases);if(!clause.test&&common.Array.empty(clause.consequent)){modified=true;node.cases.pop()}}}}});return{result:result,modified:modified}}removeEmptyStatement.passName=Name;module.exports=removeEmptyStatement})()},{"../common":85}],101:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,escope,evaluator,modified;Name="remove-side-effect-free-expressions";escope=require("escope");common=require("../common");evaluator=require("../evaluator");Syntax=common.Syntax;function reduce(node,scope,parent,isResultNeeded){var i,iz,expr,result,prev;common.assert(node.expressions.length>1,"expressions should be more than one");result=[];for(i=0,iz=node.expressions.length;i<iz;++i){prev=expr;expr=node.expressions[i];if(i+1!==iz||!isResultNeeded){if(!evaluator.hasSideEffect(expr,scope)){continue}}result.push(expr)}if(!isResultNeeded&&result.length===0){modified=true;return expr}common.assert(result.length>0,"result should be more than zero");do{if(iz===result.length){return node}if(result.length===1){if(!common.SpecialNode.canExtractSequence(result[0],parent,scope)){result.unshift(prev);continue}modified=true;return result[0]}modified=true;node.expressions=result;return node}while(true)}function removeSideEffectFreeExpressions(tree,options){var result,scope,manager,preserveCompletionValue;function isResultNeeded(parent,scope){if(parent.type===Syntax.ExpressionStatement&&(!preserveCompletionValue||scope.type!=="global")){return false}return true}result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);preserveCompletionValue=options.get("preserveCompletionValue",{pathName:Name});modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();result=common.replace(result,{enter:function enter(node,parent){var res,unary,trans;res=node;scope=manager.acquire(node)||scope;if(res.type===Syntax.SequenceExpression){res=reduce(res,scope,parent,isResultNeeded(parent,scope))}if(res.type===Syntax.SequenceExpression){common.assert(res.expressions.length>1,"sequences' length should be more than 1");unary=common.Array.last(res.expressions);if(unary.type===Syntax.UnaryExpression&&unary.operator==="void"&&!evaluator.hasSideEffect(unary.argument,scope)){modified=true;res.expressions.pop();trans=common.moveLocation(unary,{type:Syntax.UnaryExpression,operator:"void",argument:common.Array.last(res.expressions)});if(res.expressions.length===1){res=trans}else{res.expressions[res.expressions.length-1]=trans}}}if(!isResultNeeded(res,scope)){if(!evaluator.hasSideEffect(res.expression,scope)){modified=true;res=common.moveLocation(res,{type:Syntax.EmptyStatement})}}return res},leave:function leave(node){scope=manager.release(node)||scope}});manager.detach();return{result:result,modified:modified}}removeSideEffectFreeExpressions.passName=Name;module.exports=removeSideEffectFreeExpressions})()},{"../common":85,"../evaluator":87,escope:81}],102:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,escope,evaluator,modified;Name="remove-unreachable-branch";escope=require("escope");common=require("../common");evaluator=require("../evaluator");Syntax=common.Syntax;function handleIfStatement(func,node){var test,body,decl;test=evaluator.booleanCondition(node.test);if(!node.alternate){if(typeof test==="boolean"){modified=true;body=[];if(test){body.push(common.moveLocation(node.test,{type:Syntax.ExpressionStatement,expression:node.test}),node.consequent);return{type:Syntax.BlockStatement,body:body}}else{decl=common.delegateVariableDeclarations(node.consequent,func);if(decl){body.push(decl)}body.push(common.moveLocation(node.test,{type:Syntax.ExpressionStatement,expression:node.test}));return{type:Syntax.BlockStatement,body:body}}}}else{if(typeof test==="boolean"){modified=true;body=[];if(test){decl=common.delegateVariableDeclarations(node.alternate,func);if(decl){body.push(decl)}body.push(common.moveLocation(node.test,{type:Syntax.ExpressionStatement,expression:node.test}),node.consequent);return{type:Syntax.BlockStatement,body:body}}else{decl=common.delegateVariableDeclarations(node.consequent,func);if(decl){body.push(decl)}body.push(common.moveLocation(node.test,{type:Syntax.ExpressionStatement,expression:node.test}),node.alternate);return{type:Syntax.BlockStatement,body:body}}}}}function handleLogicalExpression(func,node){var test;test=evaluator.booleanCondition(node.left);if(typeof test==="boolean"){modified=true;if(test){if(node.operator==="&&"){return common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.left,node.right]})}else{return node.left}}else{if(node.operator==="&&"){return node.left}else{return common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.left,node.right]})}}}}function handleConditionalExpression(func,node){var test;test=evaluator.booleanCondition(node.test);if(typeof test==="boolean"){modified=true;if(test){return common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.test,node.consequent]})}else{return common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.test,node.alternate]})}}}function removeUnreachableBranch(tree,options){var result,stack;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;stack=[];result=common.replace(result,{enter:function enter(node){var func;if(escope.Scope.isVariableScopeRequired(node)){stack.push(node);return}func=common.Array.last(stack);switch(node.type){case Syntax.IfStatement:return handleIfStatement(func,node);case Syntax.LogicalExpression:return handleLogicalExpression(func,node);case Syntax.ConditionalExpression:return handleConditionalExpression(func,node)}},leave:function leave(node){if(escope.Scope.isVariableScopeRequired(node)){stack.pop()}}});return{result:result,modified:modified}}removeUnreachableBranch.passName=Name;module.exports=removeUnreachableBranch})()},{"../common":85,"../evaluator":87,escope:81}],103:[function(require,module,exports){(function(){"use strict";var Name,Syntax,Map,common,scope,modified;Name="remove-unused-label";common=require("../common");Map=require("../map");Syntax=common.Syntax;function Scope(upper){this.set=new Map;this.unused=[];this.upper=upper}Scope.prototype.register=function register(node){var name;common.assert(node.type===Syntax.LabeledStatement);name=node.label.name;common.assert(!this.set.has(name),"duplicate label is found");this.set.set(name,{used:false,stmt:node})};Scope.prototype.unregister=function unregister(node){var name,ref;if(node.type===Syntax.LabeledStatement){name=node.label.name;ref=this.set.get(name);this.set["delete"](name);if(!ref.used){modified=true;return node.body}}return node};Scope.prototype.resolve=function resolve(node){var name;if(node.label){name=node.label.name;common.assert(this.set.has(name),"unresolved label");this.set.get(name).used=true}};Scope.prototype.close=function close(){return this.upper};function removeUnusedLabel(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);scope=null;modified=false;result=common.replace(result,{enter:function enter(node){switch(node.type){case Syntax.Program:case Syntax.FunctionDeclaration:case Syntax.FunctionExpression:scope=new Scope(scope);break;case Syntax.LabeledStatement:scope.register(node);break;case Syntax.BreakStatement:case Syntax.ContinueStatement:scope.resolve(node);break}},leave:function leave(node){var ret;ret=scope.unregister(node);if(node.type===Syntax.Program||node.type===Syntax.FunctionDeclaration||node.type===Syntax.FunctionExpression){scope=scope.close()}return ret}});return{result:result,modified:modified}}removeUnusedLabel.passName=Name;module.exports=removeUnusedLabel})()},{"../common":85,"../map":88}],104:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="remove-wasted-blocks";common=require("../common");Syntax=common.Syntax;function flattenBlockStatement(body){var i,iz,j,jz,result,stmt,inner,ok;result=[];for(i=0,iz=body.length;i<iz;++i){stmt=body[i];if(stmt.type===Syntax.BlockStatement){ok=true;for(j=0,jz=stmt.body.length;j<jz;++j){inner=stmt.body[j];if(common.isScopedDeclaration(inner)){ok=false}}if(ok){modified=true;result=result.concat(stmt.body)}else{result.push(stmt)}}else{result.push(stmt)}}return result}function removeWastedBlocks(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;result=common.replace(result,{leave:function leave(node,parent){var i,iz,stmt;if(node.type===Syntax.BlockStatement||node.type===Syntax.Program){for(i=0,iz=node.body.length;i<iz;++i){stmt=node.body[i];if(stmt.type===Syntax.BlockStatement){node.body=flattenBlockStatement(node.body);break}}}if(parent.type===Syntax.FunctionDeclaration||parent.type===Syntax.FunctionExpression||parent.type===Syntax.TryStatement||parent.type===Syntax.CatchClause){return}while(node.type===Syntax.BlockStatement&&node.body.length===1&&!common.isScopedDeclaration(node.body[0])){modified=true;node=node.body[0]}if(node.type===Syntax.BlockStatement&&node.body.length===0){modified=true;return{type:Syntax.EmptyStatement}}return node}});return{result:result,modified:modified}}removeWastedBlocks.passName=Name;module.exports=removeWastedBlocks})()},{"../common":85}],105:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="reordering-function-declarations";common=require("../common");Syntax=common.Syntax;function reordering(array){var i,iz,node,directives,declarations,others;directives=[];declarations=[];others=[];for(i=0,iz=array.length;i<iz;++i){node=array[i];if(node.type===Syntax.FunctionDeclaration){if(declarations.length+directives.length!==i){modified=true}declarations.push(node)}else if(node.type===Syntax.DirectiveStatement){directives.push(node)}else{others.push(node)}}return directives.concat(declarations,others)}function reorderingFunctionDeclarations(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{leave:function leave(node){switch(node.type){case Syntax.Program:node.body=reordering(node.body);break;case Syntax.FunctionDeclaration:case Syntax.FunctionExpression:node.body.body=reordering(node.body.body);break}}});return{result:result,modified:modified}}reorderingFunctionDeclarations.passName=Name;module.exports=reorderingFunctionDeclarations})()},{"../common":85}],106:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-branch-to-expression";common=require("../common");Syntax=common.Syntax;function transformBranchToExpression(tree,options){var result,preserveCompletionValue;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);preserveCompletionValue=options.get("preserveCompletionValue",{pathName:Name});modified=false;result=common.replace(result,{leave:function leave(node){var consequent,alternate,ancestors;if(node.type===Syntax.IfStatement){ancestors=this.parents();if(preserveCompletionValue&&common.mayBeCompletionValue(node,ancestors)){return}if(node.alternate){if(node.consequent.type===Syntax.ExpressionStatement&&node.alternate.type===Syntax.ExpressionStatement){modified=true;return common.moveLocation(node,{type:Syntax.ExpressionStatement,expression:common.moveLocation(node,{type:Syntax.ConditionalExpression,test:node.test,consequent:node.consequent.expression,alternate:node.alternate.expression})})}if(node.consequent.type===Syntax.ReturnStatement&&node.alternate.type===Syntax.ReturnStatement){modified=true;if(!node.consequent.argument&&!node.alternate.argument){return common.moveLocation(node,{type:Syntax.ReturnStatement,argument:common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.test,common.SpecialNode.generateUndefined()]})})}consequent=node.consequent.argument||common.SpecialNode.generateUndefined();alternate=node.alternate.argument||common.SpecialNode.generateUndefined();return common.moveLocation(node,{type:Syntax.ReturnStatement,argument:common.moveLocation(node,{type:Syntax.ConditionalExpression,test:node.test,consequent:consequent,alternate:alternate})})}if(node.consequent.type===Syntax.ThrowStatement&&node.alternate.type===Syntax.ThrowStatement){modified=true;return common.moveLocation(node,{type:Syntax.ThrowStatement,argument:common.moveLocation(node,{type:Syntax.ConditionalExpression,test:node.test,consequent:node.consequent.argument,alternate:node.alternate.argument})})}}else{if(node.consequent.type===Syntax.ExpressionStatement){modified=true;return common.moveLocation(node,{type:Syntax.ExpressionStatement,expression:common.moveLocation(node,{type:Syntax.LogicalExpression,operator:"&&",left:node.test,right:node.consequent.expression})})}else if(node.consequent.type===Syntax.EmptyStatement){modified=true;return common.moveLocation(node,{type:Syntax.ExpressionStatement,expression:node.test})}}}}});return{result:result,modified:modified}}transformBranchToExpression.passName=Name;module.exports=transformBranchToExpression})()},{"../common":85}],107:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-dynamic-to-static-property-access";common=require("../common");Syntax=common.Syntax;function transformDynamicToStaticPropertyAccess(tree,options){var result;modified=false;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);common.traverse(result,{enter:function enter(node){var property;if(node.type===Syntax.MemberExpression&&node.computed){property=node.property;if(property.type===Syntax.Literal&&typeof property.value==="string"){if(common.isIdentifier(property.value)){modified=true;node.computed=false;node.property=common.moveLocation(property,{type:Syntax.Identifier,name:property.value})}else if(property.value===Number(property.value).toString()){modified=true;node.computed=true;node.property=common.moveLocation(node.property,common.SpecialNode.generateFromValue(Number(node.property.value)))}}}}});return{result:result,modified:modified}}transformDynamicToStaticPropertyAccess.passName=Name;module.exports=transformDynamicToStaticPropertyAccess})()},{"../common":85}],108:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-dynamic-to-static-property-definition";common=require("../common");Syntax=common.Syntax;function transformDynamicToStaticPropertyDefinition(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{enter:function enter(node){var generated;if(node.type===Syntax.Property){if(node.key.type===Syntax.Literal&&typeof node.key.value==="string"){if(common.isIdentifier(node.key.value)){modified=true;node.key=common.moveLocation(node.key,{type:Syntax.Identifier,name:node.key.value})}else if(node.key.value===Number(node.key.value).toString()){generated=common.SpecialNode.generateFromValue(Number(node.key.value));if(generated.type===Syntax.Literal){modified=true;node.key=common.moveLocation(node.key,generated)}}}}}});return{result:result,modified:modified}}transformDynamicToStaticPropertyDefinition.passName=Name;module.exports=transformDynamicToStaticPropertyDefinition})()},{"../common":85}],109:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-immediate-function-call";common=require("../common");Syntax=common.Syntax;function isEmptyFunctionCall(call){var callee,i,iz,stmt;if(call.type!==Syntax.CallExpression){return false}callee=call.callee;if(callee.type!==Syntax.FunctionExpression){return false}if(callee.body.type!==Syntax.BlockStatement){return false}if(callee.body.body.length===0){return true}for(i=0,iz=callee.body.body.length;i<iz;++i){stmt=callee.body.body[i];if(stmt.type!==Syntax.FunctionDeclaration){return false}}return true}function callToSequence(call){var expressions;expressions=common.Array.from(call["arguments"]);if(expressions.length===0){return common.SpecialNode.generateUndefined(call)}expressions.push(common.SpecialNode.generateUndefined());return common.moveLocation(call,{type:Syntax.SequenceExpression,expressions:expressions})}function transformImmediateFunctionCall(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;result=common.replace(result,{leave:function leave(node){if(isEmptyFunctionCall(node)){modified=true;return callToSequence(node)}}});return{result:result,modified:modified}}transformImmediateFunctionCall.passName=Name;module.exports=transformImmediateFunctionCall})()},{"../common":85}],110:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-logical-association";common=require("../common");Syntax=common.Syntax;function transformLogicalAssociation(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{enter:function enter(node){if(node.type===Syntax.LogicalExpression){if(node.right.type===Syntax.LogicalExpression&&node.operator===node.right.operator){modified=true;node.left={type:Syntax.LogicalExpression,operator:node.operator,left:node.left,right:node.right.left};node.right=node.right.right}}}});return{result:result,modified:modified}}transformLogicalAssociation.passName=Name;module.exports=transformLogicalAssociation})()},{"../common":85}],111:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,escope,modified;Name="transform-to-compound-assignment";escope=require("escope");common=require("../common");Syntax=common.Syntax;function equals(lhs,rhs){if(lhs.type!==rhs.type){return false}if(lhs.type===Syntax.Identifier){return lhs.name===rhs.name}return false}function compound(operator){switch(operator){case"*":case"/":case"%":case"+":case"-":case"<<":case">>":case">>>":case"&":case"^":case"|":return operator+"="}return null}function observableCompound(operator){switch(operator){case"*=":case"/=":case"%=":case"+=":case"-=":case"<<=":case">>=":case">>>=":case"&=":case"^=":case"|=":return operator}return null}function transformToCompoundAssignment(tree,options){var result,scope,manager;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();common.traverse(result,{enter:function enter(node){var left,right,operator,ref;scope=manager.acquire(node)||scope;if(node.type===Syntax.AssignmentExpression&&node.operator==="="){left=node.left;right=node.right;if(right.type===Syntax.BinaryExpression&&equals(right.left,left)){operator=compound(right.operator);if(operator){modified=true;node.operator=operator;node.right=right.right}}else if(right.type===Syntax.AssignmentExpression&&equals(right.left,left)){if(observableCompound(right.operator)){ref=scope.resolve(node.left);if(ref.isStatic()){modified=true;node.operator=right.operator;node.right=right.right}}}}},leave:function leave(node){scope=manager.release(node)||scope}});manager.detach();return{result:result,modified:modified}}transformToCompoundAssignment.passName=Name;module.exports=transformToCompoundAssignment})()},{"../common":85,escope:81}],112:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-to-sequence-expression";common=require("../common");Syntax=common.Syntax;function transform(node){var i,iz,expressions,stmt,prev,body;function constructSeq(expressions,stmt){var seq;if(expressions.length!==1){modified=true;seq={type:Syntax.SequenceExpression,expressions:expressions};if(stmt.type===Syntax.ExpressionStatement){stmt.expression=seq}else{stmt.argument=seq}}return stmt}body=[];expressions=[];for(i=0,iz=node.body.length;i<iz;++i){prev=stmt;stmt=node.body[i];if(stmt.type===Syntax.ExpressionStatement){expressions.push(stmt.expression)}else if(stmt.type===Syntax.ReturnStatement&&stmt.argument!=null||stmt.type===Syntax.ThrowStatement){expressions.push(stmt.argument);body.push(constructSeq(expressions,stmt));expressions=[]}else if(stmt.type===Syntax.ForStatement&&(!stmt.init||stmt.init.type!==Syntax.VariableDeclaration)){if(expressions.length){modified=true;if(stmt.init){expressions.push(stmt.init)}if(expressions.length===1){stmt.init=expressions[0]}else{stmt.init={type:Syntax.SequenceExpression,expressions:expressions}}expressions=[]}body.push(stmt)}else if(stmt.type===Syntax.IfStatement){if(expressions.length){modified=true;expressions.push(stmt.test);stmt.test={type:Syntax.SequenceExpression,expressions:expressions};expressions=[]}body.push(stmt)}else{if(expressions.length){body.push(constructSeq(expressions,prev));expressions=[]}body.push(stmt)}}if(expressions.length){body.push(constructSeq(expressions,stmt))}node.body=body}function transformToSequenceExpression(tree,options){var result;modified=false;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);common.traverse(result,{enter:function enter(node){switch(node.type){case Syntax.BlockStatement:case Syntax.Program:transform(node);break}}});return{result:result,modified:modified}}transformToSequenceExpression.passName=Name;module.exports=transformToSequenceExpression})()},{"../common":85}],113:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,escope,modified;Name="transform-typeof-undefined";escope=require("escope");common=require("../common");Syntax=common.Syntax;function isUndefinedStringLiteral(node){return node.type===Syntax.Literal&&node.value==="undefined"}function transformTypeofUndefined(tree,options){var result,manager,scope;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();common.traverse(result,{enter:function enter(node){var target,undef,argument,ref;scope=manager.acquire(node)||scope;if(node.type===Syntax.BinaryExpression&&(node.operator==="==="||node.operator==="!=="||node.operator==="=="||node.operator==="!=")){if(isUndefinedStringLiteral(node.left)){undef="left";target="right"}else if(isUndefinedStringLiteral(node.right)){undef="right";target="left"}else{return}if(node[target].type===Syntax.UnaryExpression&&node[target].operator==="typeof"){argument=node[target].argument;if(argument.type===Syntax.Identifier){ref=scope.resolve(argument);if(!ref||!ref.isStatic()||!ref.resolved){return}}modified=true;node[undef]=common.SpecialNode.generateUndefined();node[target]=argument;node.operator=node.operator.charAt(0)==="!"?"!==":"==="}}},leave:function leave(node){scope=manager.release(node)||scope}});manager.detach();return{result:result,modified:modified}}transformTypeofUndefined.passName=Name;module.exports=transformTypeofUndefined})()},{"../common":85,escope:81}],114:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,evaluator,modified;Name="tree-based-constant-folding";common=require("../common");evaluator=require("../evaluator");Syntax=common.Syntax;function isModifiedConstant(node){if(common.SpecialNode.isUndefined(node)){return false}if(common.SpecialNode.isNegative(node)){return false}if(common.SpecialNode.isNaN(node)){return false}return evaluator.constant.isConstant(node,false)}function isFoldableConditional(node){if(node.type!==Syntax.ConditionalExpression){return false}return evaluator.constant.isConstant(node.consequent)||evaluator.constant.isConstant(node.alternate)}function foldConditional(node){var binary,unary,operator,left,right;switch(node.type){case Syntax.BinaryExpression:if(node.operator==="in"||node.operator==="instanceof"){return node}if(evaluator.constant.isConstant(node.left)&&isFoldableConditional(node.right)){modified=true;binary=node;operator=binary.operator;left=evaluator.constant.evaluate(binary.left);node=node.right;if(evaluator.constant.isConstant(node.consequent)){node.consequent=common.SpecialNode.generateFromValue(evaluator.constant.doBinary(operator,left,evaluator.constant.evaluate(node.consequent)))}else{binary.right=node.consequent;node.consequent=binary}if(evaluator.constant.isConstant(node.alternate)){node.alternate=common.SpecialNode.generateFromValue(evaluator.constant.doBinary(operator,left,evaluator.constant.evaluate(node.alternate)))}else{binary.right=node.alternate;node.alternate=binary}}else if(evaluator.constant.isConstant(node.right)&&isFoldableConditional(node.left)){modified=true;binary=node;operator=binary.operator;right=evaluator.constant.evaluate(binary.right);node=node.left;if(evaluator.constant.isConstant(node.consequent)){node.consequent=common.SpecialNode.generateFromValue(evaluator.constant.doBinary(operator,evaluator.constant.evaluate(node.consequent),right))}else{binary.left=node.consequent;node.consequent=binary}if(evaluator.constant.isConstant(node.alternate)){node.alternate=common.SpecialNode.generateFromValue(evaluator.constant.doBinary(operator,evaluator.constant.evaluate(node.alternate),right))}else{binary.left=node.alternate;node.alternate=binary}}break;case Syntax.LogicalExpression:break;case Syntax.UnaryExpression:if(isFoldableConditional(node.argument)){modified=true;unary=node;operator=unary.operator;node=unary.argument;if(evaluator.constant.isConstant(node.consequent)){node.consequent=common.SpecialNode.generateFromValue(evaluator.constant.doUnary(operator,evaluator.constant.evaluate(node.consequent)))}else{unary.argument=node.consequent;node.consequent=unary}if(evaluator.constant.isConstant(node.alternate)){node.alternate=common.SpecialNode.generateFromValue(evaluator.constant.doUnary(operator,evaluator.constant.evaluate(node.alternate)))}else{unary.argument=node.alternate;node.alternate=unary}}break}return node}function treeBasedConstantFolding(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;result=common.replace(result,{leave:function leave(node){var con,alt;switch(node.type){case Syntax.BinaryExpression:case Syntax.LogicalExpression:case Syntax.UnaryExpression:if(isModifiedConstant(node)){modified=true;return common.moveLocation(node,common.SpecialNode.generateFromValue(evaluator.constant.evaluate(node)))}return foldConditional(node);case Syntax.ConditionalExpression:if(evaluator.constant.isConstant(node.consequent)&&evaluator.constant.isConstant(node.alternate)){con=evaluator.constant.evaluate(node.consequent);alt=evaluator.constant.evaluate(node.alternate);if(common.sameValue(con,alt)){modified=true;return common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.test,common.SpecialNode.generateFromValue(con)]})}}break}}});return{result:result,modified:modified}}treeBasedConstantFolding.passName=Name;module.exports=treeBasedConstantFolding})()},{"../common":85,"../evaluator":87}],115:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="omit-parens-in-void-context-iife";common=require("../common");Syntax=common.Syntax;function isIIFE(node){var callee;if(node.type!==Syntax.CallExpression){return false}callee=node.callee;return callee.type===Syntax.FunctionExpression}function main(tree,options){var result,stackCount,preserveCompletionValue;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);preserveCompletionValue=options.get("preserveCompletionValue",{pathName:Name});modified=false;result=common.replace(result,{enter:function enter(node,parent){var ancestors,target;if(!isIIFE(node)){return}target=parent;if(target.type===Syntax.ExpressionStatement){ancestors=this.parents();ancestors.pop();if(preserveCompletionValue&&common.mayBeCompletionValue(target,ancestors)){return}}else if(target.type===Syntax.SequenceExpression&&target.expressions.length>=2&&target.expressions[0]===node){ancestors=this.parents();ancestors.pop();target=ancestors.pop();if(target.type!==Syntax.ExpressionStatement){return}}else{return}modified=true;return{type:Syntax.UnaryExpression,operator:"!",argument:node}},leave:function leave(node){if(node.type===Syntax.FunctionExpression||node.type===Syntax.FunctionDeclaration){--stackCount}}});return{result:result,modified:modified}}main.passName=Name;module.exports=main})()},{"../common":85}],116:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="rewrite-boolean";common=require("../common");Syntax=common.Syntax;function isBooleanLiteral(node){return node.type===Syntax.Literal&&typeof node.value==="boolean"}function rewrite(node){if(isBooleanLiteral(node)){modified=true;return common.moveLocation(node,{type:Syntax.UnaryExpression,operator:"!",argument:common.moveLocation(node,{type:Syntax.Literal,value:+!node.value})})}if(node.type===Syntax.BinaryExpression&&node.operator==="=="||node.operator==="!="){if(isBooleanLiteral(node.left)){modified=true;node.left=common.moveLocation(node.left,{type:Syntax.Literal,value:+node.left.value});return node}if(isBooleanLiteral(node.right)){modified=true;node.right=common.moveLocation(node.right,{type:Syntax.Literal,value:+node.right.value});return node}}return node}function rewriteBoolean(tree,options){var result;modified=false;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);result=common.replace(result,{enter:rewrite});return{result:result,modified:modified}}rewriteBoolean.passName=Name;module.exports=rewriteBoolean})()},{"../common":85}],117:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="rewrite-conditional-expression";common=require("../common");Syntax=common.Syntax;function rewrite(node){var test,consequent,alternate;test=node.test;consequent=node.consequent;alternate=node.alternate;if(test.type===Syntax.UnaryExpression&&test.operator==="!"){modified=true;node.consequent=alternate;node.alternate=consequent;node.test=test.argument}}function rewriteConditionalExpression(tree,options){var result;modified=false;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);common.traverse(result,{enter:function enter(node){if(node.type===Syntax.ConditionalExpression){rewrite(node)}}});return{result:result,modified:modified}}rewriteConditionalExpression.passName=Name;module.exports=rewriteConditionalExpression})()},{"../common":85}],118:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common;Name="transform-infinity";common=require("../common");Syntax=common.Syntax;function transformInfinity(tree,options){var result,modified;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;result=common.replace(result,{enter:function enter(node){if(node.type===Syntax.Literal&&typeof node.value==="number"){if(node.value===Infinity){modified=true;return common.moveLocation(node,{type:Syntax.BinaryExpression,operator:"/",left:{type:Syntax.Literal,value:1},right:{type:Syntax.Literal,value:0}})}}}});return{result:result,modified:modified}}transformInfinity.passName=Name;module.exports=transformInfinity})()},{"../common":85}],119:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common;Name="transform-static-to-dynamic-property-access";common=require("../common");Syntax=common.Syntax;function transformStaticToDynamicPropertyAccess(tree,options){var result,modified;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{enter:function enter(node){var property;if(node.type!==Syntax.MemberExpression||node.computed||node.property.type!==Syntax.Identifier){return}property=node.property;switch(property.name){case"undefined":modified=true;node.computed=true;node.property=common.moveLocation(property,{type:Syntax.UnaryExpression,operator:"void",argument:{type:Syntax.Literal,value:0}});break;case"true":case"false":modified=true;node.computed=true;node.property=common.moveLocation(property,{type:Syntax.Literal,value:property.name==="true"});break;case"Infinity":modified=true;node.computed=true;node.property=common.moveLocation(property,{type:Syntax.BinaryExpression,operator:"/",left:{type:Syntax.Literal,value:1},right:{type:Syntax.Literal,value:0}});break}}});return{result:result,modified:modified}}transformStaticToDynamicPropertyAccess.passName=Name;module.exports=transformStaticToDynamicPropertyAccess})()},{"../common":85}],120:[function(require,module,exports){(function(){"use strict";var common;common=require("./common");exports.get=function get(root,query){var i,iz,name,node;node=root;for(i=0,iz=query.length;i<iz;++i){name=query[i];node=node[name]}return node};exports.set=function set(root,query,value){var i,iz,name,node;common.assert(query.length>0);node=root;for(i=0,iz=query.length-1;i<iz;++i){name=query[i];node=node[name]}name=query[i];node[name]=value}})()},{"./common":85}],121:[function(require,module,exports){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{factory(root.estraverse={})}})(this,function(exports){"use strict";var Syntax,isArray,VisitorOption,VisitorKeys,BREAK,SKIP;Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};function ignoreJSHintError(){}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){var ret={},key,val;for(key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){ret[key]=deepCopy(val)}else{ret[key]=val}}}return ret}function shallowCopy(obj){var ret={},key;for(key in obj){if(obj.hasOwnProperty(key)){ret[key]=obj[key]}}return ret}ignoreJSHintError(shallowCopy);function upperBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){len=diff}else{i=current+1;len-=diff+1}}return i}function lowerBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){i=current+1;len-=diff+1}else{len=diff}}return i}ignoreJSHintError(lowerBound);VisitorKeys={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};BREAK={};SKIP={};VisitorOption={Break:BREAK,Skip:SKIP};function Reference(parent,key){this.parent=parent;this.key=key}Reference.prototype.replace=function replace(node){this.parent[this.key]=node};function Element(node,path,wrap,ref){this.node=node;this.path=path;this.wrap=wrap;this.ref=ref}function Controller(){}Controller.prototype.path=function path(){var i,iz,j,jz,result,element;function addToPath(result,path){if(isArray(path)){for(j=0,jz=path.length;j<jz;++j){result.push(path[j])}}else{result.push(path)}}if(!this.__current.path){return null}result=[];for(i=2,iz=this.__leavelist.length;i<iz;++i){element=this.__leavelist[i];addToPath(result,element.path)}addToPath(result,this.__current.path);return result};Controller.prototype.parents=function parents(){var i,iz,result;result=[];for(i=1,iz=this.__leavelist.length;i<iz;++i){result.push(this.__leavelist[i].node)}return result};Controller.prototype.current=function current(){return this.__current.node};Controller.prototype.__execute=function __execute(callback,element){var previous,result;result=undefined;previous=this.__current;this.__current=element;this.__state=null;if(callback){result=callback.call(this,element.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=previous;return result};Controller.prototype.notify=function notify(flag){this.__state=flag};Controller.prototype.skip=function(){this.notify(SKIP)};Controller.prototype["break"]=function(){this.notify(BREAK)};Controller.prototype.__initialize=function(root,visitor){this.visitor=visitor;this.root=root;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null};Controller.prototype.traverse=function traverse(root,visitor){var worklist,leavelist,element,node,nodeType,ret,key,current,current2,candidates,candidate,sentinel;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;worklist.push(new Element(root,null,null,null));leavelist.push(new Element(null,null,null,null));while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();ret=this.__execute(visitor.leave,element);if(this.__state===BREAK||ret===BREAK){return}continue}if(element.node){ret=this.__execute(visitor.enter,element);if(this.__state===BREAK||ret===BREAK){return}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||ret===SKIP){continue}node=element.node;nodeType=element.wrap||node.type;candidates=VisitorKeys[nodeType];current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(!isArray(candidate)){worklist.push(new Element(candidate,key,null,null));continue}current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if((nodeType===Syntax.ObjectExpression||nodeType===Syntax.ObjectPattern)&&"properties"===candidates[current]){element=new Element(candidate[current2],[key,current2],"Property",null)}else{element=new Element(candidate[current2],[key,current2],null,null)}worklist.push(element)}}}}};Controller.prototype.replace=function replace(root,visitor){var worklist,leavelist,node,nodeType,target,element,current,current2,candidates,candidate,sentinel,outer,key;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;outer={root:root};element=new Element(root,null,null,new Reference(outer,"root"));worklist.push(element);leavelist.push(element);while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();target=this.__execute(visitor.leave,element);if(target!==undefined&&target!==BREAK&&target!==SKIP){element.ref.replace(target)}if(this.__state===BREAK||target===BREAK){return outer.root}continue}target=this.__execute(visitor.enter,element);if(target!==undefined&&target!==BREAK&&target!==SKIP){element.ref.replace(target);element.node=target}if(this.__state===BREAK||target===BREAK){return outer.root}node=element.node;if(!node){continue}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||target===SKIP){continue}nodeType=element.wrap||node.type;candidates=VisitorKeys[nodeType];current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(!isArray(candidate)){worklist.push(new Element(candidate,key,null,new Reference(node,key)));continue}current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(nodeType===Syntax.ObjectExpression&&"properties"===candidates[current]){element=new Element(candidate[current2],[key,current2],"Property",new Reference(candidate,current2))}else{element=new Element(candidate[current2],[key,current2],null,new Reference(candidate,current2))}worklist.push(element)}}}return outer.root};function traverse(root,visitor){var controller=new Controller;return controller.traverse(root,visitor)}function replace(root,visitor){var controller=new Controller;return controller.replace(root,visitor)}function extendCommentRange(comment,tokens){var target;target=upperBound(tokens,function search(token){return token.range[0]>comment.range[0]});comment.extendedRange=[comment.range[0],comment.range[1]];if(target!==tokens.length){comment.extendedRange[1]=tokens[target].range[0]}target-=1;if(target>=0){comment.extendedRange[0]=tokens[target].range[1]}return comment}function attachComments(tree,providedComments,tokens){var comments=[],comment,len,i,cursor;if(!tree.range){throw new Error("attachComments needs range information")}if(!tokens.length){if(providedComments.length){for(i=0,len=providedComments.length;i<len;i+=1){comment=deepCopy(providedComments[i]);comment.extendedRange=[0,tree.range[0]];comments.push(comment)}tree.leadingComments=comments}return tree}for(i=0,len=providedComments.length;i<len;i+=1){comments.push(extendCommentRange(deepCopy(providedComments[i]),tokens))}cursor=0;traverse(tree,{enter:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(comment.extendedRange[1]>node.range[0]){break}if(comment.extendedRange[1]===node.range[0]){if(!node.leadingComments){node.leadingComments=[]}node.leadingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});cursor=0;traverse(tree,{leave:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(node.range[1]<comment.extendedRange[0]){break}if(node.range[1]===comment.extendedRange[0]){if(!node.trailingComments){node.trailingComments=[]}node.trailingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});return tree}exports.version="1.5.1-dev";exports.Syntax=Syntax;exports.traverse=traverse;exports.replace=replace;exports.attachComments=attachComments;exports.VisitorKeys=VisitorKeys;exports.VisitorOption=VisitorOption;exports.Controller=Controller})},{}],122:[function(require,module,exports){(function(){"use strict";var Regex;Regex={NonAsciiIdentifierStart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),NonAsciiIdentifierPart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};function isDecimalDigit(ch){return ch>=48&&ch<=57}function isHexDigit(ch){return isDecimalDigit(ch)||97<=ch&&ch<=102||65<=ch&&ch<=70}function isOctalDigit(ch){return ch>=48&&ch<=55}function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)>=0}function isLineTerminator(ch){return ch===10||ch===13||ch===8232||ch===8233}function isIdentifierStart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch===92||ch>=128&&Regex.NonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=48&&ch<=57||ch===92||ch>=128&&Regex.NonAsciiIdentifierPart.test(String.fromCharCode(ch))}module.exports={isDecimalDigit:isDecimalDigit,isHexDigit:isHexDigit,isOctalDigit:isOctalDigit,isWhiteSpace:isWhiteSpace,isLineTerminator:isLineTerminator,isIdentifierStart:isIdentifierStart,isIdentifierPart:isIdentifierPart}})()},{}],123:[function(require,module,exports){(function(){"use strict";var code=require("./code");function isStrictModeReservedWordES6(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return true;default:return false}}function isKeywordES5(id,strict){if(!strict&&id==="yield"){return false}return isKeywordES6(id,strict)}function isKeywordES6(id,strict){if(strict&&isStrictModeReservedWordES6(id)){return true}switch(id.length){case 2:return id==="if"||id==="in"||id==="do";case 3:return id==="var"||id==="for"||id==="new"||id==="try";case 4:return id==="this"||id==="else"||id==="case"||id==="void"||id==="with"||id==="enum";case 5:return id==="while"||id==="break"||id==="catch"||id==="throw"||id==="const"||id==="yield"||id==="class"||id==="super";case 6:return id==="return"||id==="typeof"||id==="delete"||id==="switch"||id==="export"||id==="import";case 7:return id==="default"||id==="finally"||id==="extends";case 8:return id==="function"||id==="continue"||id==="debugger";case 10:return id==="instanceof";default:return false}}function isRestrictedWord(id){return id==="eval"||id==="arguments"}function isIdentifierName(id){var i,iz,ch;if(id.length===0){return false}ch=id.charCodeAt(0);if(!code.isIdentifierStart(ch)||ch===92){return false}for(i=1,iz=id.length;i<iz;++i){ch=id.charCodeAt(i);if(!code.isIdentifierPart(ch)||ch===92){return false}}return true}module.exports={isKeywordES5:isKeywordES5,isKeywordES6:isKeywordES6,isRestrictedWord:isRestrictedWord,isIdentifierName:isIdentifierName}})()},{"./code":122}],124:[function(require,module,exports){(function(){"use strict";exports.code=require("./code");exports.keyword=require("./keyword")})()},{"./code":122,"./keyword":123}],125:[function(require,module,exports){module.exports={_args:[["esmangle@1.0.1","/Users/lestera/Documents/git/webppl"]],_from:"esmangle@1.0.1",_id:"esmangle@1.0.1",_inBundle:false,_integrity:"sha1-2bs3uPjq+/Tm1O1reqKVarvTxMI=",_location:"/esmangle",_phantomChildren:{amdefine:"1.0.1","deep-is":"0.1.3","prelude-ls":"1.1.2","type-check":"0.3.2"},_requested:{type:"version",registry:true,raw:"esmangle@1.0.1",name:"esmangle",escapedName:"esmangle",rawSpec:"1.0.1",saveSpec:null,fetchSpec:"1.0.1"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/esmangle/-/esmangle-1.0.1.tgz",_spec:"1.0.1",_where:"/Users/lestera/Documents/git/webppl",bin:{esmangle:"bin/esmangle.js"},bugs:{url:"https://github.com/Constellation/esmangle/issues"},dependencies:{escodegen:"~1.3.2",escope:"~1.0.1",esprima:"~1.1.1",esshorten:"~1.1.0",estraverse:"~1.5.0",esutils:"~ 1.0.0",optionator:"~0.3.0","source-map":"~0.1.33"},description:"ECMAScript code mangler / minifier",devDependencies:{async:"~0.2.9",chai:"*",clone:"~0.1.11","commonjs-everywhere":"~0.9.4",grunt:"~0.4.2","grunt-cli":"~0.1.11","grunt-contrib-clean":"~0.5.0","grunt-contrib-copy":"~0.5.0","grunt-contrib-jshint":"~0.8.0","grunt-mocha-test":"~0.8.1","grunt-shell":"~0.6.1","grunt-update-submodules":"~0.2.1",q:"~0.9.7"},directories:{lib:"./lib"},engines:{node:">=0.6.0"},homepage:"http://github.com/Constellation/esmangle.html",licenses:[{type:"BSD",url:"http://github.com/Constellation/esmangle/raw/master/LICENSE.BSD"}],main:"lib/esmangle.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"esmangle",repository:{type:"git",url:"git+ssh://git@github.com/Constellation/esmangle.git"},scripts:{build:"grunt build",lint:"grunt lint","regression-test":"grunt test:regression",test:"grunt travis","unit-test":"grunt test"},version:"1.0.1"}},{}],126:[function(require,module,exports){(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define([],factory);else if(typeof exports==="object")exports["esprima"]=factory();else root["esprima"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";var comment_handler_1=__webpack_require__(1);var parser_1=__webpack_require__(3);var jsx_parser_1=__webpack_require__(11);var tokenizer_1=__webpack_require__(15);function parse(code,options,delegate){var commentHandler=null;var proxyDelegate=function(node,metadata){if(delegate){delegate(node,metadata)}if(commentHandler){commentHandler.visit(node,metadata)}};var parserDelegate=typeof delegate==="function"?proxyDelegate:null;var collectComment=false;if(options){collectComment=typeof options.comment==="boolean"&&options.comment;var attachComment=typeof options.attachComment==="boolean"&&options.attachComment;if(collectComment||attachComment){commentHandler=new comment_handler_1.CommentHandler;commentHandler.attach=attachComment;options.comment=true;parserDelegate=proxyDelegate}}var parser;if(options&&typeof options.jsx==="boolean"&&options.jsx){parser=new jsx_parser_1.JSXParser(code,options,parserDelegate)}else{parser=new parser_1.Parser(code,options,parserDelegate)}var ast=parser.parseProgram();if(collectComment){ast.comments=commentHandler.comments}if(parser.config.tokens){ast.tokens=parser.tokens}if(parser.config.tolerant){ast.errors=parser.errorHandler.errors}return ast}exports.parse=parse;function tokenize(code,options,delegate){var tokenizer=new tokenizer_1.Tokenizer(code,options);var tokens;tokens=[];try{while(true){var token=tokenizer.getNextToken();if(!token){break}if(delegate){token=delegate(token)}tokens.push(token)}}catch(e){tokenizer.errorHandler.tolerate(e)}if(tokenizer.errorHandler.tolerant){tokens.errors=tokenizer.errors()}return tokens}exports.tokenize=tokenize;var syntax_1=__webpack_require__(2);exports.Syntax=syntax_1.Syntax;exports.version="3.1.3"},function(module,exports,__webpack_require__){"use strict";var syntax_1=__webpack_require__(2);var CommentHandler=function(){function CommentHandler(){this.attach=false;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}CommentHandler.prototype.insertInnerComments=function(node,metadata){if(node.type===syntax_1.Syntax.BlockStatement&&node.body.length===0){var innerComments=[];for(var i=this.leading.length-1;i>=0;--i){var entry=this.leading[i];if(metadata.end.offset>=entry.start){innerComments.unshift(entry.comment);this.leading.splice(i,1);this.trailing.splice(i,1)}}if(innerComments.length){node.innerComments=innerComments}}};CommentHandler.prototype.findTrailingComments=function(node,metadata){var trailingComments=[];if(this.trailing.length>0){for(var i=this.trailing.length-1;i>=0;--i){var entry_1=this.trailing[i];if(entry_1.start>=metadata.end.offset){trailingComments.unshift(entry_1.comment)}}this.trailing.length=0;return trailingComments}var entry=this.stack[this.stack.length-1];if(entry&&entry.node.trailingComments){var firstComment=entry.node.trailingComments[0];if(firstComment&&firstComment.range[0]>=metadata.end.offset){trailingComments=entry.node.trailingComments;delete entry.node.trailingComments}}return trailingComments};CommentHandler.prototype.findLeadingComments=function(node,metadata){var leadingComments=[];var target;while(this.stack.length>0){var entry=this.stack[this.stack.length-1];if(entry&&entry.start>=metadata.start.offset){target=this.stack.pop().node}else{break}}if(target){var count=target.leadingComments?target.leadingComments.length:0;for(var i=count-1;i>=0;--i){var comment=target.leadingComments[i];if(comment.range[1]<=metadata.start.offset){leadingComments.unshift(comment);target.leadingComments.splice(i,1)}}if(target.leadingComments&&target.leadingComments.length===0){delete target.leadingComments}return leadingComments}for(var i=this.leading.length-1;i>=0;--i){var entry=this.leading[i];if(entry.start<=metadata.start.offset){leadingComments.unshift(entry.comment);this.leading.splice(i,1)}}return leadingComments};CommentHandler.prototype.visitNode=function(node,metadata){if(node.type===syntax_1.Syntax.Program&&node.body.length>0){return}this.insertInnerComments(node,metadata);var trailingComments=this.findTrailingComments(node,metadata);var leadingComments=this.findLeadingComments(node,metadata);if(leadingComments.length>0){node.leadingComments=leadingComments}if(trailingComments.length>0){node.trailingComments=trailingComments}this.stack.push({node:node,start:metadata.start.offset})};CommentHandler.prototype.visitComment=function(node,metadata){var type=node.type[0]==="L"?"Line":"Block";var comment={type:type,value:node.value};if(node.range){comment.range=node.range}if(node.loc){comment.loc=node.loc}this.comments.push(comment);if(this.attach){var entry={comment:{type:type,value:node.value,range:[metadata.start.offset,metadata.end.offset]},start:metadata.start.offset};if(node.loc){entry.comment.loc=node.loc}node.type=type;this.leading.push(entry);this.trailing.push(entry)}};CommentHandler.prototype.visit=function(node,metadata){if(node.type==="LineComment"){this.visitComment(node,metadata)}else if(node.type==="BlockComment"){this.visitComment(node,metadata)}else if(this.attach){this.visitNode(node,metadata)}};return CommentHandler}();exports.CommentHandler=CommentHandler},function(module,exports){"use strict";exports.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(module,exports,__webpack_require__){"use strict";var assert_1=__webpack_require__(4);var messages_1=__webpack_require__(5);var error_handler_1=__webpack_require__(6);var token_1=__webpack_require__(7);var scanner_1=__webpack_require__(8);var syntax_1=__webpack_require__(2);var Node=__webpack_require__(10);var ArrowParameterPlaceHolder="ArrowParameterPlaceHolder";var Parser=function(){function Parser(code,options,delegate){if(options===void 0){options={}}this.config={range:typeof options.range==="boolean"&&options.range,loc:typeof options.loc==="boolean"&&options.loc,source:null,tokens:typeof options.tokens==="boolean"&&options.tokens,comment:typeof options.comment==="boolean"&&options.comment,tolerant:typeof options.tolerant==="boolean"&&options.tolerant};if(this.config.loc&&options.source&&options.source!==null){this.config.source=String(options.source)}this.delegate=delegate;this.errorHandler=new error_handler_1.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new scanner_1.Scanner(code,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.sourceType=options&&options.sourceType==="module"?"module":"script";this.lookahead=null;this.hasLineTerminator=false;this.context={allowIn:true,allowYield:true,firstCoverInitializedNameError:null,isAssignmentTarget:false,isBindingElement:false,inFunctionBody:false,inIteration:false,inSwitch:false,labelSet:{},strict:this.sourceType==="module"};this.tokens=[];this.startMarker={index:0,lineNumber:this.scanner.lineNumber,lineStart:0};this.lastMarker={index:0,lineNumber:this.scanner.lineNumber,lineStart:0};this.nextToken();this.lastMarker={index:this.scanner.index,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart}}Parser.prototype.throwError=function(messageFormat){var values=[];for(var _i=1;_i<arguments.length;_i++){values[_i-1]=arguments[_i]}var args=Array.prototype.slice.call(arguments,1);var msg=messageFormat.replace(/%(\d)/g,function(whole,idx){assert_1.assert(idx<args.length,"Message reference must be in range");return args[idx]});var index=this.lastMarker.index;var line=this.lastMarker.lineNumber;var column=this.lastMarker.index-this.lastMarker.lineStart+1;throw this.errorHandler.createError(index,line,column,msg)};Parser.prototype.tolerateError=function(messageFormat){var values=[];for(var _i=1;_i<arguments.length;_i++){values[_i-1]=arguments[_i]}var args=Array.prototype.slice.call(arguments,1);var msg=messageFormat.replace(/%(\d)/g,function(whole,idx){assert_1.assert(idx<args.length,"Message reference must be in range");return args[idx]});var index=this.lastMarker.index;var line=this.scanner.lineNumber;var column=this.lastMarker.index-this.lastMarker.lineStart+1;this.errorHandler.tolerateError(index,line,column,msg)};Parser.prototype.unexpectedTokenError=function(token,message){var msg=message||messages_1.Messages.UnexpectedToken;var value;if(token){if(!message){msg=token.type===token_1.Token.EOF?messages_1.Messages.UnexpectedEOS:token.type===token_1.Token.Identifier?messages_1.Messages.UnexpectedIdentifier:token.type===token_1.Token.NumericLiteral?messages_1.Messages.UnexpectedNumber:token.type===token_1.Token.StringLiteral?messages_1.Messages.UnexpectedString:token.type===token_1.Token.Template?messages_1.Messages.UnexpectedTemplate:messages_1.Messages.UnexpectedToken;if(token.type===token_1.Token.Keyword){if(this.scanner.isFutureReservedWord(token.value)){msg=messages_1.Messages.UnexpectedReserved}else if(this.context.strict&&this.scanner.isStrictModeReservedWord(token.value)){msg=messages_1.Messages.StrictReservedWord}}}value=token.type===token_1.Token.Template?token.value.raw:token.value}else{value="ILLEGAL"}msg=msg.replace("%0",value);if(token&&typeof token.lineNumber==="number"){var index=token.start;var line=token.lineNumber;var column=token.start-this.lastMarker.lineStart+1;return this.errorHandler.createError(index,line,column,msg)}else{var index=this.lastMarker.index;var line=this.lastMarker.lineNumber;var column=index-this.lastMarker.lineStart+1;return this.errorHandler.createError(index,line,column,msg)}};Parser.prototype.throwUnexpectedToken=function(token,message){throw this.unexpectedTokenError(token,message)};Parser.prototype.tolerateUnexpectedToken=function(token,message){this.errorHandler.tolerate(this.unexpectedTokenError(token,message))};Parser.prototype.collectComments=function(){if(!this.config.comment){this.scanner.scanComments()}else{var comments=this.scanner.scanComments();if(comments.length>0&&this.delegate){for(var i=0;i<comments.length;++i){var e=comments[i];var node=void 0;node={type:e.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(e.slice[0],e.slice[1])};if(this.config.range){node.range=e.range}if(this.config.loc){node.loc=e.loc}var metadata={start:{line:e.loc.start.line,column:e.loc.start.column,offset:e.range[0]},end:{line:e.loc.end.line,column:e.loc.end.column,offset:e.range[1]}};this.delegate(node,metadata)}}}};Parser.prototype.getTokenRaw=function(token){return this.scanner.source.slice(token.start,token.end)};Parser.prototype.convertToken=function(token){var t;t={type:token_1.TokenName[token.type],value:this.getTokenRaw(token)};if(this.config.range){t.range=[token.start,token.end]}if(this.config.loc){t.loc={start:{line:this.startMarker.lineNumber,column:this.startMarker.index-this.startMarker.lineStart},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}if(token.regex){t.regex=token.regex}return t};Parser.prototype.nextToken=function(){var token=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.lineNumber=this.scanner.lineNumber;this.lastMarker.lineStart=this.scanner.lineStart;this.collectComments();this.startMarker.index=this.scanner.index;this.startMarker.lineNumber=this.scanner.lineNumber;this.startMarker.lineStart=this.scanner.lineStart;var next;next=this.scanner.lex();this.hasLineTerminator=token&&next?token.lineNumber!==next.lineNumber:false;if(next&&this.context.strict&&next.type===token_1.Token.Identifier){if(this.scanner.isStrictModeReservedWord(next.value)){next.type=token_1.Token.Keyword}}this.lookahead=next;if(this.config.tokens&&next.type!==token_1.Token.EOF){this.tokens.push(this.convertToken(next))}return token};Parser.prototype.nextRegexToken=function(){this.collectComments();var token=this.scanner.scanRegExp();if(this.config.tokens){this.tokens.pop();this.tokens.push(this.convertToken(token))}this.lookahead=token;this.nextToken();return token};Parser.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.lineNumber,column:this.startMarker.index-this.startMarker.lineStart}};Parser.prototype.startNode=function(token){return{index:token.start,line:token.lineNumber,column:token.start-token.lineStart}};Parser.prototype.finalize=function(meta,node){if(this.config.range){node.range=[meta.index,this.lastMarker.index]}if(this.config.loc){node.loc={start:{line:meta.line,column:meta.column},end:{line:this.lastMarker.lineNumber,column:this.lastMarker.index-this.lastMarker.lineStart}};if(this.config.source){node.loc.source=this.config.source}}if(this.delegate){var metadata={start:{line:meta.line,column:meta.column,offset:meta.index},end:{line:this.lastMarker.lineNumber,column:this.lastMarker.index-this.lastMarker.lineStart,offset:this.lastMarker.index}};this.delegate(node,metadata)}return node};Parser.prototype.expect=function(value){var token=this.nextToken();if(token.type!==token_1.Token.Punctuator||token.value!==value){this.throwUnexpectedToken(token)}};Parser.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var token=this.lookahead;if(token.type===token_1.Token.Punctuator&&token.value===","){this.nextToken()}else if(token.type===token_1.Token.Punctuator&&token.value===";"){this.nextToken();this.tolerateUnexpectedToken(token)}else{this.tolerateUnexpectedToken(token,messages_1.Messages.UnexpectedToken)}}else{this.expect(",")}};Parser.prototype.expectKeyword=function(keyword){var token=this.nextToken();if(token.type!==token_1.Token.Keyword||token.value!==keyword){this.throwUnexpectedToken(token)}};Parser.prototype.match=function(value){return this.lookahead.type===token_1.Token.Punctuator&&this.lookahead.value===value};Parser.prototype.matchKeyword=function(keyword){return this.lookahead.type===token_1.Token.Keyword&&this.lookahead.value===keyword};Parser.prototype.matchContextualKeyword=function(keyword){return this.lookahead.type===token_1.Token.Identifier&&this.lookahead.value===keyword};Parser.prototype.matchAssign=function(){if(this.lookahead.type!==token_1.Token.Punctuator){return false}var op=this.lookahead.value;return op==="="||op==="*="||op==="**="||op==="/="||op==="%="||op==="+="||op==="-="||op==="<<="||op===">>="||op===">>>="||op==="&="||op==="^="||op==="|="};Parser.prototype.isolateCoverGrammar=function(parseFunction){var previousIsBindingElement=this.context.isBindingElement;var previousIsAssignmentTarget=this.context.isAssignmentTarget;var previousFirstCoverInitializedNameError=this.context.firstCoverInitializedNameError;this.context.isBindingElement=true;this.context.isAssignmentTarget=true;this.context.firstCoverInitializedNameError=null;var result=parseFunction.call(this);if(this.context.firstCoverInitializedNameError!==null){this.throwUnexpectedToken(this.context.firstCoverInitializedNameError)}this.context.isBindingElement=previousIsBindingElement;this.context.isAssignmentTarget=previousIsAssignmentTarget;this.context.firstCoverInitializedNameError=previousFirstCoverInitializedNameError;return result};Parser.prototype.inheritCoverGrammar=function(parseFunction){var previousIsBindingElement=this.context.isBindingElement;var previousIsAssignmentTarget=this.context.isAssignmentTarget;var previousFirstCoverInitializedNameError=this.context.firstCoverInitializedNameError;this.context.isBindingElement=true;this.context.isAssignmentTarget=true;this.context.firstCoverInitializedNameError=null;var result=parseFunction.call(this);this.context.isBindingElement=this.context.isBindingElement&&previousIsBindingElement;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&previousIsAssignmentTarget;this.context.firstCoverInitializedNameError=previousFirstCoverInitializedNameError||this.context.firstCoverInitializedNameError;return result};Parser.prototype.consumeSemicolon=function(){if(this.match(";")){this.nextToken()}else if(!this.hasLineTerminator){if(this.lookahead.type!==token_1.Token.EOF&&!this.match("}")){this.throwUnexpectedToken(this.lookahead)}this.lastMarker.index=this.startMarker.index;this.lastMarker.lineNumber=this.startMarker.lineNumber;this.lastMarker.lineStart=this.startMarker.lineStart}};Parser.prototype.parsePrimaryExpression=function(){var node=this.createNode();var expr;var value,token,raw;switch(this.lookahead.type){case token_1.Token.Identifier:if(this.sourceType==="module"&&this.lookahead.value==="await"){this.tolerateUnexpectedToken(this.lookahead)}expr=this.finalize(node,new Node.Identifier(this.nextToken().value));break;case token_1.Token.NumericLiteral:case token_1.Token.StringLiteral:if(this.context.strict&&this.lookahead.octal){this.tolerateUnexpectedToken(this.lookahead,messages_1.Messages.StrictOctalLiteral)}this.context.isAssignmentTarget=false;this.context.isBindingElement=false;token=this.nextToken();raw=this.getTokenRaw(token);expr=this.finalize(node,new Node.Literal(token.value,raw));break;case token_1.Token.BooleanLiteral:this.context.isAssignmentTarget=false;this.context.isBindingElement=false;token=this.nextToken();token.value=token.value==="true";raw=this.getTokenRaw(token);expr=this.finalize(node,new Node.Literal(token.value,raw));break;case token_1.Token.NullLiteral:this.context.isAssignmentTarget=false;this.context.isBindingElement=false;token=this.nextToken();token.value=null;raw=this.getTokenRaw(token);expr=this.finalize(node,new Node.Literal(token.value,raw));break;case token_1.Token.Template:expr=this.parseTemplateLiteral();break;case token_1.Token.Punctuator:value=this.lookahead.value;switch(value){case"(":this.context.isBindingElement=false;expr=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":expr=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":expr=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=false;this.context.isBindingElement=false;this.scanner.index=this.startMarker.index;token=this.nextRegexToken();raw=this.getTokenRaw(token);expr=this.finalize(node,new Node.RegexLiteral(token.value,raw,token.regex));break;default:this.throwUnexpectedToken(this.nextToken())}break;case token_1.Token.Keyword:if(!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")){expr=this.parseIdentifierName()}else if(!this.context.strict&&this.matchKeyword("let")){expr=this.finalize(node,new Node.Identifier(this.nextToken().value))}else{this.context.isAssignmentTarget=false;this.context.isBindingElement=false;if(this.matchKeyword("function")){expr=this.parseFunctionExpression()}else if(this.matchKeyword("this")){this.nextToken();expr=this.finalize(node,new Node.ThisExpression)}else if(this.matchKeyword("class")){expr=this.parseClassExpression()}else{this.throwUnexpectedToken(this.nextToken())}}break;default:this.throwUnexpectedToken(this.nextToken())}return expr};Parser.prototype.parseSpreadElement=function(){var node=this.createNode();this.expect("...");var arg=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(node,new Node.SpreadElement(arg))};Parser.prototype.parseArrayInitializer=function(){var node=this.createNode();var elements=[];this.expect("[");while(!this.match("]")){if(this.match(",")){this.nextToken();elements.push(null)}else if(this.match("...")){var element=this.parseSpreadElement();if(!this.match("]")){this.context.isAssignmentTarget=false;this.context.isBindingElement=false;this.expect(",")}elements.push(element)}else{elements.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(!this.match("]")){this.expect(",")}}}this.expect("]");return this.finalize(node,new Node.ArrayExpression(elements))};Parser.prototype.parsePropertyMethod=function(params){this.context.isAssignmentTarget=false;this.context.isBindingElement=false;var previousStrict=this.context.strict;var body=this.isolateCoverGrammar(this.parseFunctionSourceElements);if(this.context.strict&&params.firstRestricted){this.tolerateUnexpectedToken(params.firstRestricted,params.message)}if(this.context.strict&&params.stricted){this.tolerateUnexpectedToken(params.stricted,params.message)}this.context.strict=previousStrict;return body};Parser.prototype.parsePropertyMethodFunction=function(){var isGenerator=false;var node=this.createNode();var previousAllowYield=this.context.allowYield;this.context.allowYield=false;var params=this.parseFormalParameters();var method=this.parsePropertyMethod(params);this.context.allowYield=previousAllowYield;return this.finalize(node,new Node.FunctionExpression(null,params.params,method,isGenerator))};Parser.prototype.parseObjectPropertyKey=function(){var node=this.createNode();var token=this.nextToken();var key=null;switch(token.type){case token_1.Token.StringLiteral:case token_1.Token.NumericLiteral:if(this.context.strict&&token.octal){this.tolerateUnexpectedToken(token,messages_1.Messages.StrictOctalLiteral)}var raw=this.getTokenRaw(token);key=this.finalize(node,new Node.Literal(token.value,raw));break;case token_1.Token.Identifier:case token_1.Token.BooleanLiteral:case token_1.Token.NullLiteral:case token_1.Token.Keyword:key=this.finalize(node,new Node.Identifier(token.value));break;case token_1.Token.Punctuator:if(token.value==="["){key=this.isolateCoverGrammar(this.parseAssignmentExpression);this.expect("]")}else{this.throwUnexpectedToken(token)}break;default:this.throwUnexpectedToken(token)}return key};Parser.prototype.isPropertyKey=function(key,value){return key.type===syntax_1.Syntax.Identifier&&key.name===value||key.type===syntax_1.Syntax.Literal&&key.value===value};Parser.prototype.parseObjectProperty=function(hasProto){var node=this.createNode();var token=this.lookahead;var kind;var key;var value;var computed=false;var method=false;var shorthand=false;if(token.type===token_1.Token.Identifier){this.nextToken();key=this.finalize(node,new Node.Identifier(token.value))}else if(this.match("*")){this.nextToken()}else{computed=this.match("[");key=this.parseObjectPropertyKey()}var lookaheadPropertyKey=this.qualifiedPropertyName(this.lookahead);if(token.type===token_1.Token.Identifier&&token.value==="get"&&lookaheadPropertyKey){kind="get";computed=this.match("[");key=this.parseObjectPropertyKey();this.context.allowYield=false;value=this.parseGetterMethod()}else if(token.type===token_1.Token.Identifier&&token.value==="set"&&lookaheadPropertyKey){kind="set";computed=this.match("[");key=this.parseObjectPropertyKey();value=this.parseSetterMethod()}else if(token.type===token_1.Token.Punctuator&&token.value==="*"&&lookaheadPropertyKey){kind="init";computed=this.match("[");key=this.parseObjectPropertyKey();value=this.parseGeneratorMethod();method=true}else{if(!key){this.throwUnexpectedToken(this.lookahead)}kind="init";if(this.match(":")){if(!computed&&this.isPropertyKey(key,"__proto__")){if(hasProto.value){this.tolerateError(messages_1.Messages.DuplicateProtoProperty)}hasProto.value=true}this.nextToken();value=this.inheritCoverGrammar(this.parseAssignmentExpression)}else if(this.match("(")){value=this.parsePropertyMethodFunction();method=true}else if(token.type===token_1.Token.Identifier){var id=this.finalize(node,new Node.Identifier(token.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead;this.nextToken();shorthand=true;var init=this.isolateCoverGrammar(this.parseAssignmentExpression);value=this.finalize(node,new Node.AssignmentPattern(id,init))}else{shorthand=true;value=id}}else{this.throwUnexpectedToken(this.nextToken())}}return this.finalize(node,new Node.Property(kind,key,computed,value,method,shorthand))};Parser.prototype.parseObjectInitializer=function(){var node=this.createNode();this.expect("{");var properties=[];var hasProto={value:false};while(!this.match("}")){properties.push(this.parseObjectProperty(hasProto));if(!this.match("}")){this.expectCommaSeparator()}}this.expect("}");return this.finalize(node,new Node.ObjectExpression(properties))};Parser.prototype.parseTemplateHead=function(){assert_1.assert(this.lookahead.head,"Template literal must start with a template head");var node=this.createNode();var token=this.nextToken();var value={raw:token.value.raw,cooked:token.value.cooked};return this.finalize(node,new Node.TemplateElement(value,token.tail))};Parser.prototype.parseTemplateElement=function(){if(this.lookahead.type!==token_1.Token.Template){this.throwUnexpectedToken()}var node=this.createNode();var token=this.nextToken();var value={raw:token.value.raw,cooked:token.value.cooked};return this.finalize(node,new Node.TemplateElement(value,token.tail))};Parser.prototype.parseTemplateLiteral=function(){var node=this.createNode();var expressions=[];var quasis=[];var quasi=this.parseTemplateHead();quasis.push(quasi);while(!quasi.tail){expressions.push(this.parseExpression());quasi=this.parseTemplateElement();quasis.push(quasi)}return this.finalize(node,new Node.TemplateLiteral(quasis,expressions))};Parser.prototype.reinterpretExpressionAsPattern=function(expr){switch(expr.type){case syntax_1.Syntax.Identifier:case syntax_1.Syntax.MemberExpression:case syntax_1.Syntax.RestElement:case syntax_1.Syntax.AssignmentPattern:break;case syntax_1.Syntax.SpreadElement:expr.type=syntax_1.Syntax.RestElement;this.reinterpretExpressionAsPattern(expr.argument);break;case syntax_1.Syntax.ArrayExpression:expr.type=syntax_1.Syntax.ArrayPattern;for(var i=0;i<expr.elements.length;i++){if(expr.elements[i]!==null){this.reinterpretExpressionAsPattern(expr.elements[i])}}break;case syntax_1.Syntax.ObjectExpression:expr.type=syntax_1.Syntax.ObjectPattern;for(var i=0;i<expr.properties.length;i++){this.reinterpretExpressionAsPattern(expr.properties[i].value)}break;case syntax_1.Syntax.AssignmentExpression:expr.type=syntax_1.Syntax.AssignmentPattern;delete expr.operator;this.reinterpretExpressionAsPattern(expr.left);break;default:break}};Parser.prototype.parseGroupExpression=function(){var expr;this.expect("(");if(this.match(")")){this.nextToken();if(!this.match("=>")){this.expect("=>")}expr={type:ArrowParameterPlaceHolder,params:[]}}else{var startToken=this.lookahead;var params=[];if(this.match("...")){expr=this.parseRestElement(params);this.expect(")");if(!this.match("=>")){this.expect("=>")}expr={type:ArrowParameterPlaceHolder,params:[expr]}}else{var arrow=false;this.context.isBindingElement=true;expr=this.inheritCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var expressions=[];this.context.isAssignmentTarget=false;expressions.push(expr);while(this.startMarker.index<this.scanner.length){if(!this.match(",")){break}this.nextToken();if(this.match("...")){if(!this.context.isBindingElement){this.throwUnexpectedToken(this.lookahead)}expressions.push(this.parseRestElement(params));this.expect(")");if(!this.match("=>")){this.expect("=>")}this.context.isBindingElement=false;for(var i=0;i<expressions.length;i++){this.reinterpretExpressionAsPattern(expressions[i])}arrow=true;expr={type:ArrowParameterPlaceHolder,params:expressions}}else{expressions.push(this.inheritCoverGrammar(this.parseAssignmentExpression))}if(arrow){break}}if(!arrow){expr=this.finalize(this.startNode(startToken),new Node.SequenceExpression(expressions))}}if(!arrow){this.expect(")");if(this.match("=>")){if(expr.type===syntax_1.Syntax.Identifier&&expr.name==="yield"){arrow=true;expr={type:ArrowParameterPlaceHolder,params:[expr]}}if(!arrow){if(!this.context.isBindingElement){this.throwUnexpectedToken(this.lookahead)}if(expr.type===syntax_1.Syntax.SequenceExpression){for(var i=0;i<expr.expressions.length;i++){this.reinterpretExpressionAsPattern(expr.expressions[i])}}else{this.reinterpretExpressionAsPattern(expr)}var params_1=expr.type===syntax_1.Syntax.SequenceExpression?expr.expressions:[expr];expr={type:ArrowParameterPlaceHolder,params:params_1}}}this.context.isBindingElement=false}}}return expr};Parser.prototype.parseArguments=function(){this.expect("(");var args=[];if(!this.match(")")){while(true){var expr=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);args.push(expr);if(this.match(")")){break}this.expectCommaSeparator()}}this.expect(")");return args};Parser.prototype.isIdentifierName=function(token){return token.type===token_1.Token.Identifier||token.type===token_1.Token.Keyword||token.type===token_1.Token.BooleanLiteral||token.type===token_1.Token.NullLiteral};Parser.prototype.parseIdentifierName=function(){var node=this.createNode();var token=this.nextToken();if(!this.isIdentifierName(token)){this.throwUnexpectedToken(token)}return this.finalize(node,new Node.Identifier(token.value))};Parser.prototype.parseNewExpression=function(){var node=this.createNode();var id=this.parseIdentifierName();assert_1.assert(id.name==="new","New expression must start with `new`");var expr;if(this.match(".")){this.nextToken();if(this.lookahead.type===token_1.Token.Identifier&&this.context.inFunctionBody&&this.lookahead.value==="target"){var property=this.parseIdentifierName();expr=new Node.MetaProperty(id,property)}else{this.throwUnexpectedToken(this.lookahead)}}else{var callee=this.isolateCoverGrammar(this.parseLeftHandSideExpression);var args=this.match("(")?this.parseArguments():[];expr=new Node.NewExpression(callee,args);this.context.isAssignmentTarget=false;this.context.isBindingElement=false}return this.finalize(node,expr)};Parser.prototype.parseLeftHandSideExpressionAllowCall=function(){var startToken=this.lookahead;var previousAllowIn=this.context.allowIn;this.context.allowIn=true;var expr;if(this.matchKeyword("super")&&this.context.inFunctionBody){expr=this.createNode();this.nextToken();expr=this.finalize(expr,new Node.Super);if(!this.match("(")&&!this.match(".")&&!this.match("[")){this.throwUnexpectedToken(this.lookahead)}}else{expr=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression)}while(true){if(this.match(".")){this.context.isBindingElement=false;this.context.isAssignmentTarget=true;this.expect(".");var property=this.parseIdentifierName();expr=this.finalize(this.startNode(startToken),new Node.StaticMemberExpression(expr,property))}else if(this.match("(")){this.context.isBindingElement=false;this.context.isAssignmentTarget=false;var args=this.parseArguments();expr=this.finalize(this.startNode(startToken),new Node.CallExpression(expr,args))}else if(this.match("[")){this.context.isBindingElement=false;this.context.isAssignmentTarget=true;this.expect("[");var property=this.isolateCoverGrammar(this.parseExpression);this.expect("]");expr=this.finalize(this.startNode(startToken),new Node.ComputedMemberExpression(expr,property))}else if(this.lookahead.type===token_1.Token.Template&&this.lookahead.head){var quasi=this.parseTemplateLiteral();expr=this.finalize(this.startNode(startToken),new Node.TaggedTemplateExpression(expr,quasi))}else{break}}this.context.allowIn=previousAllowIn;return expr};Parser.prototype.parseSuper=function(){var node=this.createNode();this.expectKeyword("super");if(!this.match("[")&&!this.match(".")){this.throwUnexpectedToken(this.lookahead)}return this.finalize(node,new Node.Super)};Parser.prototype.parseLeftHandSideExpression=function(){assert_1.assert(this.context.allowIn,"callee of new expression always allow in keyword.");var node=this.startNode(this.lookahead);var expr=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);while(true){if(this.match("[")){this.context.isBindingElement=false;this.context.isAssignmentTarget=true;this.expect("[");var property=this.isolateCoverGrammar(this.parseExpression);this.expect("]");expr=this.finalize(node,new Node.ComputedMemberExpression(expr,property))}else if(this.match(".")){this.context.isBindingElement=false;this.context.isAssignmentTarget=true;this.expect(".");var property=this.parseIdentifierName();expr=this.finalize(node,new Node.StaticMemberExpression(expr,property))}else if(this.lookahead.type===token_1.Token.Template&&this.lookahead.head){var quasi=this.parseTemplateLiteral();expr=this.finalize(node,new Node.TaggedTemplateExpression(expr,quasi))}else{break}}return expr};Parser.prototype.parseUpdateExpression=function(){var expr;var startToken=this.lookahead;if(this.match("++")||this.match("--")){var node=this.startNode(startToken);var token=this.nextToken();expr=this.inheritCoverGrammar(this.parseUnaryExpression);if(this.context.strict&&expr.type===syntax_1.Syntax.Identifier&&this.scanner.isRestrictedWord(expr.name)){this.tolerateError(messages_1.Messages.StrictLHSPrefix)}if(!this.context.isAssignmentTarget){this.tolerateError(messages_1.Messages.InvalidLHSInAssignment)}var prefix=true;expr=this.finalize(node,new Node.UpdateExpression(token.value,expr,prefix));this.context.isAssignmentTarget=false;this.context.isBindingElement=false}else{expr=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall);if(!this.hasLineTerminator&&this.lookahead.type===token_1.Token.Punctuator){if(this.match("++")||this.match("--")){if(this.context.strict&&expr.type===syntax_1.Syntax.Identifier&&this.scanner.isRestrictedWord(expr.name)){this.tolerateError(messages_1.Messages.StrictLHSPostfix)}if(!this.context.isAssignmentTarget){this.tolerateError(messages_1.Messages.InvalidLHSInAssignment)}this.context.isAssignmentTarget=false;this.context.isBindingElement=false;var operator=this.nextToken().value;var prefix=false;expr=this.finalize(this.startNode(startToken),new Node.UpdateExpression(operator,expr,prefix))}}}return expr};Parser.prototype.parseUnaryExpression=function(){var expr;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var node=this.startNode(this.lookahead);var token=this.nextToken();expr=this.inheritCoverGrammar(this.parseUnaryExpression);expr=this.finalize(node,new Node.UnaryExpression(token.value,expr));if(this.context.strict&&expr.operator==="delete"&&expr.argument.type===syntax_1.Syntax.Identifier){this.tolerateError(messages_1.Messages.StrictDelete)}this.context.isAssignmentTarget=false;this.context.isBindingElement=false}else{expr=this.parseUpdateExpression()}return expr};Parser.prototype.parseExponentiationExpression=function(){var startToken=this.lookahead;var expr=this.inheritCoverGrammar(this.parseUnaryExpression);if(expr.type!==syntax_1.Syntax.UnaryExpression&&this.match("**")){this.nextToken();this.context.isAssignmentTarget=false;this.context.isBindingElement=false;var left=expr;var right=this.isolateCoverGrammar(this.parseExponentiationExpression);expr=this.finalize(this.startNode(startToken),new Node.BinaryExpression("**",left,right))}return expr};Parser.prototype.binaryPrecedence=function(token){var op=token.value;var precedence;if(token.type===token_1.Token.Punctuator){precedence=this.operatorPrecedence[op]||0}else if(token.type===token_1.Token.Keyword){precedence=op==="instanceof"||this.context.allowIn&&op==="in"?7:0}else{precedence=0}return precedence};Parser.prototype.parseBinaryExpression=function(){var startToken=this.lookahead;var expr=this.inheritCoverGrammar(this.parseExponentiationExpression);var token=this.lookahead;var prec=this.binaryPrecedence(token);if(prec>0){this.nextToken();token.prec=prec;this.context.isAssignmentTarget=false;this.context.isBindingElement=false;var markers=[startToken,this.lookahead];var left=expr;var right=this.isolateCoverGrammar(this.parseExponentiationExpression);var stack=[left,token,right];while(true){prec=this.binaryPrecedence(this.lookahead);if(prec<=0){break}while(stack.length>2&&prec<=stack[stack.length-2].prec){right=stack.pop();var operator=stack.pop().value;left=stack.pop();markers.pop();var node=this.startNode(markers[markers.length-1]);stack.push(this.finalize(node,new Node.BinaryExpression(operator,left,right)))}token=this.nextToken();token.prec=prec;stack.push(token);markers.push(this.lookahead);stack.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var i=stack.length-1;expr=stack[i];markers.pop();while(i>1){var node=this.startNode(markers.pop());expr=this.finalize(node,new Node.BinaryExpression(stack[i-1].value,stack[i-2],expr));i-=2}}return expr};Parser.prototype.parseConditionalExpression=function(){var startToken=this.lookahead;var expr=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var previousAllowIn=this.context.allowIn;this.context.allowIn=true;var consequent=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=previousAllowIn;this.expect(":");var alternate=this.isolateCoverGrammar(this.parseAssignmentExpression);expr=this.finalize(this.startNode(startToken),new Node.ConditionalExpression(expr,consequent,alternate));this.context.isAssignmentTarget=false;this.context.isBindingElement=false}return expr};Parser.prototype.checkPatternParam=function(options,param){switch(param.type){case syntax_1.Syntax.Identifier:this.validateParam(options,param,param.name);break;case syntax_1.Syntax.RestElement:this.checkPatternParam(options,param.argument);break;case syntax_1.Syntax.AssignmentPattern:this.checkPatternParam(options,param.left);break;case syntax_1.Syntax.ArrayPattern:for(var i=0;i<param.elements.length;i++){if(param.elements[i]!==null){this.checkPatternParam(options,param.elements[i])}}break;case syntax_1.Syntax.YieldExpression:break;default:assert_1.assert(param.type===syntax_1.Syntax.ObjectPattern,"Invalid type");for(var i=0;i<param.properties.length;i++){this.checkPatternParam(options,param.properties[i].value)}break}};Parser.prototype.reinterpretAsCoverFormalsList=function(expr){var params=[expr];var options;switch(expr.type){case syntax_1.Syntax.Identifier:break;case ArrowParameterPlaceHolder:params=expr.params;break;default:return null}options={paramSet:{}};for(var i=0;i<params.length;++i){var param=params[i];if(param.type===syntax_1.Syntax.AssignmentPattern){if(param.right.type===syntax_1.Syntax.YieldExpression){if(param.right.argument){this.throwUnexpectedToken(this.lookahead)}param.right.type=syntax_1.Syntax.Identifier;param.right.name="yield";delete param.right.argument;delete param.right.delegate}}this.checkPatternParam(options,param);params[i]=param}if(this.context.strict||!this.context.allowYield){for(var i=0;i<params.length;++i){var param=params[i];if(param.type===syntax_1.Syntax.YieldExpression){this.throwUnexpectedToken(this.lookahead)}}}if(options.message===messages_1.Messages.StrictParamDupe){var token=this.context.strict?options.stricted:options.firstRestricted;this.throwUnexpectedToken(token,options.message)}return{params:params,stricted:options.stricted,firstRestricted:options.firstRestricted,message:options.message}};Parser.prototype.parseAssignmentExpression=function(){var expr;if(!this.context.allowYield&&this.matchKeyword("yield")){expr=this.parseYieldExpression()}else{var startToken=this.lookahead;var token=startToken;expr=this.parseConditionalExpression();if(expr.type===ArrowParameterPlaceHolder||this.match("=>")){this.context.isAssignmentTarget=false;this.context.isBindingElement=false;var list=this.reinterpretAsCoverFormalsList(expr);if(list){if(this.hasLineTerminator){this.tolerateUnexpectedToken(this.lookahead)}this.context.firstCoverInitializedNameError=null;var previousStrict=this.context.strict;var previousAllowYield=this.context.allowYield;this.context.allowYield=true;var node=this.startNode(startToken);this.expect("=>");var body=this.match("{")?this.parseFunctionSourceElements():this.isolateCoverGrammar(this.parseAssignmentExpression);var expression=body.type!==syntax_1.Syntax.BlockStatement;if(this.context.strict&&list.firstRestricted){this.throwUnexpectedToken(list.firstRestricted,list.message)}if(this.context.strict&&list.stricted){this.tolerateUnexpectedToken(list.stricted,list.message)}expr=this.finalize(node,new Node.ArrowFunctionExpression(list.params,body,expression));this.context.strict=previousStrict;this.context.allowYield=previousAllowYield}}else{if(this.matchAssign()){if(!this.context.isAssignmentTarget){this.tolerateError(messages_1.Messages.InvalidLHSInAssignment)}if(this.context.strict&&expr.type===syntax_1.Syntax.Identifier){var id=expr;if(this.scanner.isRestrictedWord(id.name)){this.tolerateUnexpectedToken(token,messages_1.Messages.StrictLHSAssignment)}if(this.scanner.isStrictModeReservedWord(id.name)){this.tolerateUnexpectedToken(token,messages_1.Messages.StrictReservedWord)}}if(!this.match("=")){this.context.isAssignmentTarget=false;this.context.isBindingElement=false}else{this.reinterpretExpressionAsPattern(expr)}token=this.nextToken();var right=this.isolateCoverGrammar(this.parseAssignmentExpression);expr=this.finalize(this.startNode(startToken),new Node.AssignmentExpression(token.value,expr,right));this.context.firstCoverInitializedNameError=null}}}return expr};Parser.prototype.parseExpression=function(){var startToken=this.lookahead;var expr=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var expressions=[];expressions.push(expr);while(this.startMarker.index<this.scanner.length){if(!this.match(",")){break}this.nextToken();expressions.push(this.isolateCoverGrammar(this.parseAssignmentExpression))}expr=this.finalize(this.startNode(startToken),new Node.SequenceExpression(expressions))}return expr};Parser.prototype.parseStatementListItem=function(){var statement=null;this.context.isAssignmentTarget=true;this.context.isBindingElement=true;if(this.lookahead.type===token_1.Token.Keyword){switch(this.lookahead.value){case"export":if(this.sourceType!=="module"){this.tolerateUnexpectedToken(this.lookahead,messages_1.Messages.IllegalExportDeclaration)}statement=this.parseExportDeclaration();break;case"import":if(this.sourceType!=="module"){this.tolerateUnexpectedToken(this.lookahead,messages_1.Messages.IllegalImportDeclaration)}statement=this.parseImportDeclaration();break;case"const":statement=this.parseLexicalDeclaration({inFor:false});break;case"function":statement=this.parseFunctionDeclaration();break;case"class":statement=this.parseClassDeclaration();break;case"let":statement=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:false}):this.parseStatement();break;default:statement=this.parseStatement();break}}else{statement=this.parseStatement()}return statement};Parser.prototype.parseBlock=function(){var node=this.createNode();this.expect("{");var block=[];while(true){if(this.match("}")){break}block.push(this.parseStatementListItem())}this.expect("}");return this.finalize(node,new Node.BlockStatement(block))};Parser.prototype.parseLexicalBinding=function(kind,options){var node=this.createNode();var params=[];var id=this.parsePattern(params,kind);if(this.context.strict&&id.type===syntax_1.Syntax.Identifier){if(this.scanner.isRestrictedWord(id.name)){this.tolerateError(messages_1.Messages.StrictVarName)}}var init=null;if(kind==="const"){if(!this.matchKeyword("in")&&!this.matchContextualKeyword("of")){this.expect("=");init=this.isolateCoverGrammar(this.parseAssignmentExpression)}}else if(!options.inFor&&id.type!==syntax_1.Syntax.Identifier||this.match("=")){this.expect("=");init=this.isolateCoverGrammar(this.parseAssignmentExpression)}return this.finalize(node,new Node.VariableDeclarator(id,init))};Parser.prototype.parseBindingList=function(kind,options){var list=[this.parseLexicalBinding(kind,options)];while(this.match(",")){this.nextToken();list.push(this.parseLexicalBinding(kind,options))}return list};Parser.prototype.isLexicalDeclaration=function(){var previousIndex=this.scanner.index;var previousLineNumber=this.scanner.lineNumber;var previousLineStart=this.scanner.lineStart;this.collectComments();var next=this.scanner.lex();this.scanner.index=previousIndex;this.scanner.lineNumber=previousLineNumber;this.scanner.lineStart=previousLineStart;return next.type===token_1.Token.Identifier||next.type===token_1.Token.Punctuator&&next.value==="["||next.type===token_1.Token.Punctuator&&next.value==="{"||next.type===token_1.Token.Keyword&&next.value==="let"||next.type===token_1.Token.Keyword&&next.value==="yield"};Parser.prototype.parseLexicalDeclaration=function(options){var node=this.createNode();var kind=this.nextToken().value;assert_1.assert(kind==="let"||kind==="const","Lexical declaration must be either let or const");var declarations=this.parseBindingList(kind,options);this.consumeSemicolon();return this.finalize(node,new Node.VariableDeclaration(declarations,kind))};Parser.prototype.parseBindingRestElement=function(params,kind){var node=this.createNode();this.expect("...");var arg=this.parsePattern(params,kind);return this.finalize(node,new Node.RestElement(arg))};Parser.prototype.parseArrayPattern=function(params,kind){var node=this.createNode();this.expect("[");var elements=[];while(!this.match("]")){if(this.match(",")){this.nextToken();elements.push(null)}else{if(this.match("...")){elements.push(this.parseBindingRestElement(params,kind));break}else{elements.push(this.parsePatternWithDefault(params,kind))}if(!this.match("]")){this.expect(",")}}}this.expect("]");return this.finalize(node,new Node.ArrayPattern(elements))};Parser.prototype.parsePropertyPattern=function(params,kind){var node=this.createNode();var computed=false;var shorthand=false;var method=false;var key;var value;if(this.lookahead.type===token_1.Token.Identifier){var keyToken=this.lookahead;key=this.parseVariableIdentifier();var init=this.finalize(node,new Node.Identifier(keyToken.value));if(this.match("=")){params.push(keyToken);shorthand=true;this.nextToken();var expr=this.parseAssignmentExpression();value=this.finalize(this.startNode(keyToken),new Node.AssignmentPattern(init,expr))}else if(!this.match(":")){params.push(keyToken);shorthand=true;value=init}else{this.expect(":");value=this.parsePatternWithDefault(params,kind)}}else{computed=this.match("[");key=this.parseObjectPropertyKey();this.expect(":");value=this.parsePatternWithDefault(params,kind)}return this.finalize(node,new Node.Property("init",key,computed,value,method,shorthand))};Parser.prototype.parseObjectPattern=function(params,kind){var node=this.createNode();var properties=[];this.expect("{");while(!this.match("}")){properties.push(this.parsePropertyPattern(params,kind));if(!this.match("}")){this.expect(",")}}this.expect("}");return this.finalize(node,new Node.ObjectPattern(properties))};Parser.prototype.parsePattern=function(params,kind){var pattern;if(this.match("[")){pattern=this.parseArrayPattern(params,kind)}else if(this.match("{")){pattern=this.parseObjectPattern(params,kind)}else{if(this.matchKeyword("let")&&(kind==="const"||kind==="let")){this.tolerateUnexpectedToken(this.lookahead,messages_1.Messages.UnexpectedToken)}params.push(this.lookahead);pattern=this.parseVariableIdentifier(kind)}return pattern};Parser.prototype.parsePatternWithDefault=function(params,kind){var startToken=this.lookahead;var pattern=this.parsePattern(params,kind);if(this.match("=")){this.nextToken();var previousAllowYield=this.context.allowYield;this.context.allowYield=true;var right=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=previousAllowYield;pattern=this.finalize(this.startNode(startToken),new Node.AssignmentPattern(pattern,right))}return pattern};Parser.prototype.parseVariableIdentifier=function(kind){var node=this.createNode();var token=this.nextToken();if(token.type===token_1.Token.Keyword&&token.value==="yield"){if(this.context.strict){this.tolerateUnexpectedToken(token,messages_1.Messages.StrictReservedWord)}if(!this.context.allowYield){this.throwUnexpectedToken(token)}}else if(token.type!==token_1.Token.Identifier){if(this.context.strict&&token.type===token_1.Token.Keyword&&this.scanner.isStrictModeReservedWord(token.value)){this.tolerateUnexpectedToken(token,messages_1.Messages.StrictReservedWord)}else{if(this.context.strict||token.value!=="let"||kind!=="var"){this.throwUnexpectedToken(token)}}}else if(this.sourceType==="module"&&token.type===token_1.Token.Identifier&&token.value==="await"){this.tolerateUnexpectedToken(token)}return this.finalize(node,new Node.Identifier(token.value))};Parser.prototype.parseVariableDeclaration=function(options){var node=this.createNode();var params=[];var id=this.parsePattern(params,"var");if(this.context.strict&&id.type===syntax_1.Syntax.Identifier){if(this.scanner.isRestrictedWord(id.name)){this.tolerateError(messages_1.Messages.StrictVarName)}}var init=null;if(this.match("=")){this.nextToken();init=this.isolateCoverGrammar(this.parseAssignmentExpression)}else if(id.type!==syntax_1.Syntax.Identifier&&!options.inFor){this.expect("=")}return this.finalize(node,new Node.VariableDeclarator(id,init))};Parser.prototype.parseVariableDeclarationList=function(options){var opt={inFor:options.inFor};var list=[];list.push(this.parseVariableDeclaration(opt));while(this.match(",")){this.nextToken();list.push(this.parseVariableDeclaration(opt))}return list};Parser.prototype.parseVariableStatement=function(){var node=this.createNode();this.expectKeyword("var");var declarations=this.parseVariableDeclarationList({inFor:false});this.consumeSemicolon();return this.finalize(node,new Node.VariableDeclaration(declarations,"var"))};Parser.prototype.parseEmptyStatement=function(){var node=this.createNode();this.expect(";");return this.finalize(node,new Node.EmptyStatement)};Parser.prototype.parseExpressionStatement=function(){var node=this.createNode();var expr=this.parseExpression();this.consumeSemicolon();return this.finalize(node,new Node.ExpressionStatement(expr))};Parser.prototype.parseIfStatement=function(){var node=this.createNode();var consequent;var alternate=null;this.expectKeyword("if");this.expect("(");var test=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());consequent=this.finalize(this.createNode(),new Node.EmptyStatement)}else{this.expect(")");consequent=this.parseStatement();if(this.matchKeyword("else")){this.nextToken();alternate=this.parseStatement()}}return this.finalize(node,new Node.IfStatement(test,consequent,alternate))};Parser.prototype.parseDoWhileStatement=function(){var node=this.createNode();this.expectKeyword("do");var previousInIteration=this.context.inIteration;this.context.inIteration=true;var body=this.parseStatement();this.context.inIteration=previousInIteration;this.expectKeyword("while");this.expect("(");var test=this.parseExpression();this.expect(")");if(this.match(";")){this.nextToken()}return this.finalize(node,new Node.DoWhileStatement(body,test))};Parser.prototype.parseWhileStatement=function(){var node=this.createNode();var body;this.expectKeyword("while");this.expect("(");var test=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());body=this.finalize(this.createNode(),new Node.EmptyStatement)}else{this.expect(")");var previousInIteration=this.context.inIteration;this.context.inIteration=true;body=this.parseStatement();this.context.inIteration=previousInIteration}return this.finalize(node,new Node.WhileStatement(test,body))};Parser.prototype.parseForStatement=function(){var init=null;var test=null;var update=null;var forIn=true;var left,right;var node=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";")){this.nextToken()}else{if(this.matchKeyword("var")){init=this.createNode();this.nextToken();var previousAllowIn=this.context.allowIn;this.context.allowIn=false;var declarations=this.parseVariableDeclarationList({inFor:true});this.context.allowIn=previousAllowIn;if(declarations.length===1&&this.matchKeyword("in")){var decl=declarations[0];if(decl.init&&(decl.id.type===syntax_1.Syntax.ArrayPattern||decl.id.type===syntax_1.Syntax.ObjectPattern||this.context.strict)){this.tolerateError(messages_1.Messages.ForInOfLoopInitializer,"for-in")}init=this.finalize(init,new Node.VariableDeclaration(declarations,"var"));this.nextToken();left=init;right=this.parseExpression();init=null}else if(declarations.length===1&&declarations[0].init===null&&this.matchContextualKeyword("of")){init=this.finalize(init,new Node.VariableDeclaration(declarations,"var"));this.nextToken();left=init;right=this.parseAssignmentExpression();init=null;forIn=false}else{init=this.finalize(init,new Node.VariableDeclaration(declarations,"var"));this.expect(";")}}else if(this.matchKeyword("const")||this.matchKeyword("let")){init=this.createNode();var kind=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in"){init=this.finalize(init,new Node.Identifier(kind));this.nextToken();left=init;right=this.parseExpression();init=null}else{var previousAllowIn=this.context.allowIn;this.context.allowIn=false;var declarations=this.parseBindingList(kind,{inFor:true});this.context.allowIn=previousAllowIn;if(declarations.length===1&&declarations[0].init===null&&this.matchKeyword("in")){init=this.finalize(init,new Node.VariableDeclaration(declarations,kind));this.nextToken();left=init;right=this.parseExpression();init=null}else if(declarations.length===1&&declarations[0].init===null&&this.matchContextualKeyword("of")){init=this.finalize(init,new Node.VariableDeclaration(declarations,kind));this.nextToken();left=init;right=this.parseAssignmentExpression();init=null;forIn=false}else{this.consumeSemicolon();init=this.finalize(init,new Node.VariableDeclaration(declarations,kind))}}}else{var initStartToken=this.lookahead;var previousAllowIn=this.context.allowIn;this.context.allowIn=false;init=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=previousAllowIn;if(this.matchKeyword("in")){if(!this.context.isAssignmentTarget||init.type===syntax_1.Syntax.AssignmentExpression){this.tolerateError(messages_1.Messages.InvalidLHSInForIn)}this.nextToken();this.reinterpretExpressionAsPattern(init);left=init;right=this.parseExpression();init=null}else if(this.matchContextualKeyword("of")){if(!this.context.isAssignmentTarget||init.type===syntax_1.Syntax.AssignmentExpression){this.tolerateError(messages_1.Messages.InvalidLHSInForLoop)}this.nextToken();this.reinterpretExpressionAsPattern(init);left=init;right=this.parseAssignmentExpression();init=null;forIn=false}else{if(this.match(",")){var initSeq=[init];while(this.match(",")){this.nextToken();initSeq.push(this.isolateCoverGrammar(this.parseAssignmentExpression))}init=this.finalize(this.startNode(initStartToken),new Node.SequenceExpression(initSeq))}this.expect(";")}}}if(typeof left==="undefined"){if(!this.match(";")){test=this.parseExpression()}this.expect(";");if(!this.match(")")){update=this.parseExpression()}}var body;if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());body=this.finalize(this.createNode(),new Node.EmptyStatement)}else{this.expect(")");var previousInIteration=this.context.inIteration;this.context.inIteration=true;body=this.isolateCoverGrammar(this.parseStatement);this.context.inIteration=previousInIteration}return typeof left==="undefined"?this.finalize(node,new Node.ForStatement(init,test,update,body)):forIn?this.finalize(node,new Node.ForInStatement(left,right,body)):this.finalize(node,new Node.ForOfStatement(left,right,body))};Parser.prototype.parseContinueStatement=function(){var node=this.createNode();this.expectKeyword("continue");var label=null;if(this.lookahead.type===token_1.Token.Identifier&&!this.hasLineTerminator){label=this.parseVariableIdentifier();var key="$"+label.name;if(!Object.prototype.hasOwnProperty.call(this.context.labelSet,key)){this.throwError(messages_1.Messages.UnknownLabel,label.name)}}this.consumeSemicolon();if(label===null&&!this.context.inIteration){this.throwError(messages_1.Messages.IllegalContinue)}return this.finalize(node,new Node.ContinueStatement(label))};Parser.prototype.parseBreakStatement=function(){var node=this.createNode();this.expectKeyword("break");var label=null;if(this.lookahead.type===token_1.Token.Identifier&&!this.hasLineTerminator){label=this.parseVariableIdentifier();var key="$"+label.name;if(!Object.prototype.hasOwnProperty.call(this.context.labelSet,key)){this.throwError(messages_1.Messages.UnknownLabel,label.name)}}this.consumeSemicolon();if(label===null&&!this.context.inIteration&&!this.context.inSwitch){this.throwError(messages_1.Messages.IllegalBreak)}return this.finalize(node,new Node.BreakStatement(label))};Parser.prototype.parseReturnStatement=function(){if(!this.context.inFunctionBody){this.tolerateError(messages_1.Messages.IllegalReturn)}var node=this.createNode();this.expectKeyword("return");var hasArgument=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==token_1.Token.EOF;var argument=hasArgument?this.parseExpression():null;this.consumeSemicolon();return this.finalize(node,new Node.ReturnStatement(argument))};Parser.prototype.parseWithStatement=function(){if(this.context.strict){this.tolerateError(messages_1.Messages.StrictModeWith)}var node=this.createNode();this.expectKeyword("with");this.expect("(");var object=this.parseExpression();this.expect(")");var body=this.parseStatement();return this.finalize(node,new Node.WithStatement(object,body))};Parser.prototype.parseSwitchCase=function(){var node=this.createNode();var test;if(this.matchKeyword("default")){this.nextToken();test=null}else{this.expectKeyword("case");test=this.parseExpression()}this.expect(":");var consequent=[];while(true){if(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case")){break}consequent.push(this.parseStatementListItem())}return this.finalize(node,new Node.SwitchCase(test,consequent))};Parser.prototype.parseSwitchStatement=function(){var node=this.createNode();this.expectKeyword("switch");this.expect("(");var discriminant=this.parseExpression();this.expect(")");var previousInSwitch=this.context.inSwitch;this.context.inSwitch=true;var cases=[];var defaultFound=false;this.expect("{");while(true){if(this.match("}")){break}var clause=this.parseSwitchCase();if(clause.test===null){if(defaultFound){this.throwError(messages_1.Messages.MultipleDefaultsInSwitch)}defaultFound=true}cases.push(clause)}this.expect("}");this.context.inSwitch=previousInSwitch;return this.finalize(node,new Node.SwitchStatement(discriminant,cases))};Parser.prototype.parseLabelledStatement=function(){var node=this.createNode();var expr=this.parseExpression();var statement;if(expr.type===syntax_1.Syntax.Identifier&&this.match(":")){this.nextToken();var id=expr;var key="$"+id.name;if(Object.prototype.hasOwnProperty.call(this.context.labelSet,key)){this.throwError(messages_1.Messages.Redeclaration,"Label",id.name)}this.context.labelSet[key]=true;var labeledBody=this.parseStatement();delete this.context.labelSet[key];statement=new Node.LabeledStatement(id,labeledBody)}else{this.consumeSemicolon();statement=new Node.ExpressionStatement(expr)}return this.finalize(node,statement)};Parser.prototype.parseThrowStatement=function(){var node=this.createNode();this.expectKeyword("throw");if(this.hasLineTerminator){this.throwError(messages_1.Messages.NewlineAfterThrow)}var argument=this.parseExpression();this.consumeSemicolon();return this.finalize(node,new Node.ThrowStatement(argument))};Parser.prototype.parseCatchClause=function(){var node=this.createNode();this.expectKeyword("catch");this.expect("(");if(this.match(")")){this.throwUnexpectedToken(this.lookahead)}var params=[];var param=this.parsePattern(params);var paramMap={};for(var i=0;i<params.length;i++){var key="$"+params[i].value;if(Object.prototype.hasOwnProperty.call(paramMap,key)){this.tolerateError(messages_1.Messages.DuplicateBinding,params[i].value)}paramMap[key]=true}if(this.context.strict&&param.type===syntax_1.Syntax.Identifier){if(this.scanner.isRestrictedWord(param.name)){this.tolerateError(messages_1.Messages.StrictCatchVariable)}}this.expect(")");var body=this.parseBlock();return this.finalize(node,new Node.CatchClause(param,body))};Parser.prototype.parseFinallyClause=function(){this.expectKeyword("finally");return this.parseBlock()};Parser.prototype.parseTryStatement=function(){var node=this.createNode();this.expectKeyword("try");var block=this.parseBlock();var handler=this.matchKeyword("catch")?this.parseCatchClause():null;var finalizer=this.matchKeyword("finally")?this.parseFinallyClause():null;if(!handler&&!finalizer){this.throwError(messages_1.Messages.NoCatchOrFinally)}return this.finalize(node,new Node.TryStatement(block,handler,finalizer))};Parser.prototype.parseDebuggerStatement=function(){var node=this.createNode();this.expectKeyword("debugger");this.consumeSemicolon();return this.finalize(node,new Node.DebuggerStatement)};Parser.prototype.parseStatement=function(){var statement=null;switch(this.lookahead.type){case token_1.Token.BooleanLiteral:case token_1.Token.NullLiteral:case token_1.Token.NumericLiteral:case token_1.Token.StringLiteral:case token_1.Token.Template:case token_1.Token.RegularExpression:statement=this.parseExpressionStatement();break;case token_1.Token.Punctuator:var value=this.lookahead.value;if(value==="{"){statement=this.parseBlock()}else if(value==="("){statement=this.parseExpressionStatement()}else if(value===";"){statement=this.parseEmptyStatement()}else{statement=this.parseExpressionStatement()}break;case token_1.Token.Identifier:statement=this.parseLabelledStatement();break;case token_1.Token.Keyword:switch(this.lookahead.value){case"break":statement=this.parseBreakStatement();break;case"continue":statement=this.parseContinueStatement();break;case"debugger":statement=this.parseDebuggerStatement();break;case"do":statement=this.parseDoWhileStatement();break;case"for":statement=this.parseForStatement();break;case"function":statement=this.parseFunctionDeclaration();break;case"if":statement=this.parseIfStatement();break;case"return":statement=this.parseReturnStatement();break;case"switch":statement=this.parseSwitchStatement();break;case"throw":statement=this.parseThrowStatement();break;case"try":statement=this.parseTryStatement();break;case"var":statement=this.parseVariableStatement();break;case"while":statement=this.parseWhileStatement();break;case"with":statement=this.parseWithStatement();break;default:statement=this.parseExpressionStatement();break}break;default:this.throwUnexpectedToken(this.lookahead)}return statement};Parser.prototype.parseFunctionSourceElements=function(){var node=this.createNode();this.expect("{");var body=this.parseDirectivePrologues();var previousLabelSet=this.context.labelSet;var previousInIteration=this.context.inIteration;var previousInSwitch=this.context.inSwitch;var previousInFunctionBody=this.context.inFunctionBody;this.context.labelSet={};this.context.inIteration=false;this.context.inSwitch=false;this.context.inFunctionBody=true;while(this.startMarker.index<this.scanner.length){if(this.match("}")){break}body.push(this.parseStatementListItem())}this.expect("}");this.context.labelSet=previousLabelSet;this.context.inIteration=previousInIteration;this.context.inSwitch=previousInSwitch;this.context.inFunctionBody=previousInFunctionBody;return this.finalize(node,new Node.BlockStatement(body))};Parser.prototype.validateParam=function(options,param,name){var key="$"+name;if(this.context.strict){if(this.scanner.isRestrictedWord(name)){options.stricted=param;options.message=messages_1.Messages.StrictParamName}if(Object.prototype.hasOwnProperty.call(options.paramSet,key)){options.stricted=param;options.message=messages_1.Messages.StrictParamDupe}}else if(!options.firstRestricted){if(this.scanner.isRestrictedWord(name)){options.firstRestricted=param;options.message=messages_1.Messages.StrictParamName}else if(this.scanner.isStrictModeReservedWord(name)){options.firstRestricted=param;options.message=messages_1.Messages.StrictReservedWord}else if(Object.prototype.hasOwnProperty.call(options.paramSet,key)){options.stricted=param;options.message=messages_1.Messages.StrictParamDupe}}if(typeof Object.defineProperty==="function"){Object.defineProperty(options.paramSet,key,{value:true,enumerable:true,writable:true,configurable:true})}else{options.paramSet[key]=true}};Parser.prototype.parseRestElement=function(params){var node=this.createNode();this.expect("...");var arg=this.parsePattern(params);if(this.match("=")){this.throwError(messages_1.Messages.DefaultRestParameter)}if(!this.match(")")){this.throwError(messages_1.Messages.ParameterAfterRestParameter)}return this.finalize(node,new Node.RestElement(arg))};Parser.prototype.parseFormalParameter=function(options){var params=[];var param=this.match("...")?this.parseRestElement(params):this.parsePatternWithDefault(params);for(var i=0;i<params.length;i++){this.validateParam(options,params[i],params[i].value)}options.params.push(param);return!this.match(")")};Parser.prototype.parseFormalParameters=function(firstRestricted){var options;options={params:[],firstRestricted:firstRestricted};this.expect("(");if(!this.match(")")){options.paramSet={};while(this.startMarker.index<this.scanner.length){if(!this.parseFormalParameter(options)){break}this.expect(",")}}this.expect(")");return{params:options.params,stricted:options.stricted,firstRestricted:options.firstRestricted,message:options.message}};Parser.prototype.parseFunctionDeclaration=function(identifierIsOptional){var node=this.createNode();this.expectKeyword("function");var isGenerator=this.match("*");if(isGenerator){this.nextToken()}var message;var id=null;var firstRestricted=null;if(!identifierIsOptional||!this.match("(")){var token=this.lookahead;id=this.parseVariableIdentifier();if(this.context.strict){if(this.scanner.isRestrictedWord(token.value)){this.tolerateUnexpectedToken(token,messages_1.Messages.StrictFunctionName)}}else{if(this.scanner.isRestrictedWord(token.value)){firstRestricted=token;message=messages_1.Messages.StrictFunctionName}else if(this.scanner.isStrictModeReservedWord(token.value)){firstRestricted=token;message=messages_1.Messages.StrictReservedWord}}}var previousAllowYield=this.context.allowYield;this.context.allowYield=!isGenerator;var formalParameters=this.parseFormalParameters(firstRestricted);var params=formalParameters.params;var stricted=formalParameters.stricted;firstRestricted=formalParameters.firstRestricted;if(formalParameters.message){message=formalParameters.message}var previousStrict=this.context.strict;var body=this.parseFunctionSourceElements();if(this.context.strict&&firstRestricted){this.throwUnexpectedToken(firstRestricted,message)}if(this.context.strict&&stricted){this.tolerateUnexpectedToken(stricted,message)}this.context.strict=previousStrict;this.context.allowYield=previousAllowYield;return this.finalize(node,new Node.FunctionDeclaration(id,params,body,isGenerator))};Parser.prototype.parseFunctionExpression=function(){var node=this.createNode();this.expectKeyword("function");var isGenerator=this.match("*");if(isGenerator){this.nextToken()}var message;var id=null;var firstRestricted;var previousAllowYield=this.context.allowYield;this.context.allowYield=!isGenerator;if(!this.match("(")){var token=this.lookahead;id=!this.context.strict&&!isGenerator&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier();if(this.context.strict){if(this.scanner.isRestrictedWord(token.value)){this.tolerateUnexpectedToken(token,messages_1.Messages.StrictFunctionName)}}else{if(this.scanner.isRestrictedWord(token.value)){firstRestricted=token;message=messages_1.Messages.StrictFunctionName}else if(this.scanner.isStrictModeReservedWord(token.value)){firstRestricted=token;message=messages_1.Messages.StrictReservedWord}}}var formalParameters=this.parseFormalParameters(firstRestricted);var params=formalParameters.params;var stricted=formalParameters.stricted;firstRestricted=formalParameters.firstRestricted;if(formalParameters.message){message=formalParameters.message}var previousStrict=this.context.strict;var body=this.parseFunctionSourceElements();if(this.context.strict&&firstRestricted){this.throwUnexpectedToken(firstRestricted,message)}if(this.context.strict&&stricted){this.tolerateUnexpectedToken(stricted,message)}this.context.strict=previousStrict;this.context.allowYield=previousAllowYield;return this.finalize(node,new Node.FunctionExpression(id,params,body,isGenerator))};Parser.prototype.parseDirective=function(){var token=this.lookahead;var directive=null;var node=this.createNode();var expr=this.parseExpression();if(expr.type===syntax_1.Syntax.Literal){directive=this.getTokenRaw(token).slice(1,-1)}this.consumeSemicolon();return this.finalize(node,directive?new Node.Directive(expr,directive):new Node.ExpressionStatement(expr))};Parser.prototype.parseDirectivePrologues=function(){var firstRestricted=null;var body=[];while(true){var token=this.lookahead;if(token.type!==token_1.Token.StringLiteral){break}var statement=this.parseDirective();body.push(statement);var directive=statement.directive;if(typeof directive!=="string"){break}if(directive==="use strict"){this.context.strict=true;if(firstRestricted){this.tolerateUnexpectedToken(firstRestricted,messages_1.Messages.StrictOctalLiteral)}}else{if(!firstRestricted&&token.octal){firstRestricted=token}}}return body};Parser.prototype.qualifiedPropertyName=function(token){switch(token.type){case token_1.Token.Identifier:case token_1.Token.StringLiteral:case token_1.Token.BooleanLiteral:case token_1.Token.NullLiteral:case token_1.Token.NumericLiteral:case token_1.Token.Keyword:return true;case token_1.Token.Punctuator:return token.value==="["}return false};Parser.prototype.parseGetterMethod=function(){var node=this.createNode();this.expect("(");this.expect(")");var isGenerator=false;var params={params:[],stricted:null,firstRestricted:null,message:null};var previousAllowYield=this.context.allowYield;this.context.allowYield=false;var method=this.parsePropertyMethod(params);this.context.allowYield=previousAllowYield;return this.finalize(node,new Node.FunctionExpression(null,params.params,method,isGenerator))};Parser.prototype.parseSetterMethod=function(){var node=this.createNode();var options={params:[],firstRestricted:null,paramSet:{}};var isGenerator=false;var previousAllowYield=this.context.allowYield;this.context.allowYield=false;this.expect("(");if(this.match(")")){this.tolerateUnexpectedToken(this.lookahead)}else{this.parseFormalParameter(options)}this.expect(")");var method=this.parsePropertyMethod(options);this.context.allowYield=previousAllowYield;return this.finalize(node,new Node.FunctionExpression(null,options.params,method,isGenerator))};Parser.prototype.parseGeneratorMethod=function(){var node=this.createNode();var isGenerator=true;var previousAllowYield=this.context.allowYield;this.context.allowYield=true;var params=this.parseFormalParameters();this.context.allowYield=false;var method=this.parsePropertyMethod(params);this.context.allowYield=previousAllowYield;return this.finalize(node,new Node.FunctionExpression(null,params.params,method,isGenerator))};Parser.prototype.isStartOfExpression=function(){var start=true;var value=this.lookahead.value;switch(this.lookahead.type){case token_1.Token.Punctuator:start=value==="["||value==="("||value==="{"||value==="+"||value==="-"||value==="!"||value==="~"||value==="++"||value==="--"||value==="/"||value==="/=";break;case token_1.Token.Keyword:start=value==="class"||value==="delete"||value==="function"||value==="let"||value==="new"||value==="super"||value==="this"||value==="typeof"||value==="void"||value==="yield";break;default:break}return start};Parser.prototype.parseYieldExpression=function(){var node=this.createNode();this.expectKeyword("yield");var argument=null;var delegate=false;if(!this.hasLineTerminator){var previousAllowYield=this.context.allowYield;this.context.allowYield=false;delegate=this.match("*");if(delegate){this.nextToken();argument=this.parseAssignmentExpression()}else if(this.isStartOfExpression()){argument=this.parseAssignmentExpression()}this.context.allowYield=previousAllowYield}return this.finalize(node,new Node.YieldExpression(argument,delegate))};Parser.prototype.parseClassElement=function(hasConstructor){var token=this.lookahead;var node=this.createNode();var kind;var key;var value;var computed=false;var method=false;var isStatic=false;if(this.match("*")){this.nextToken()}else{computed=this.match("[");key=this.parseObjectPropertyKey();var id=key;if(id.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))){token=this.lookahead;isStatic=true;computed=this.match("[");if(this.match("*")){this.nextToken()}else{key=this.parseObjectPropertyKey()}}}var lookaheadPropertyKey=this.qualifiedPropertyName(this.lookahead);if(token.type===token_1.Token.Identifier){if(token.value==="get"&&lookaheadPropertyKey){kind="get";computed=this.match("[");key=this.parseObjectPropertyKey();this.context.allowYield=false;value=this.parseGetterMethod()}else if(token.value==="set"&&lookaheadPropertyKey){kind="set";computed=this.match("[");key=this.parseObjectPropertyKey();value=this.parseSetterMethod()}}else if(token.type===token_1.Token.Punctuator&&token.value==="*"&&lookaheadPropertyKey){kind="init";computed=this.match("[");key=this.parseObjectPropertyKey();value=this.parseGeneratorMethod();method=true}if(!kind&&key&&this.match("(")){kind="init";value=this.parsePropertyMethodFunction();method=true}if(!kind){this.throwUnexpectedToken(this.lookahead)}if(kind==="init"){kind="method"}if(!computed){if(isStatic&&this.isPropertyKey(key,"prototype")){this.throwUnexpectedToken(token,messages_1.Messages.StaticPrototype)}if(!isStatic&&this.isPropertyKey(key,"constructor")){if(kind!=="method"||!method||value.generator){this.throwUnexpectedToken(token,messages_1.Messages.ConstructorSpecialMethod)}if(hasConstructor.value){this.throwUnexpectedToken(token,messages_1.Messages.DuplicateConstructor)}else{hasConstructor.value=true}kind="constructor"}}return this.finalize(node,new Node.MethodDefinition(key,computed,value,kind,isStatic))};Parser.prototype.parseClassElementList=function(){var body=[];var hasConstructor={value:false};this.expect("{");while(!this.match("}")){if(this.match(";")){this.nextToken()}else{body.push(this.parseClassElement(hasConstructor))}}this.expect("}");return body};Parser.prototype.parseClassBody=function(){var node=this.createNode();var elementList=this.parseClassElementList();return this.finalize(node,new Node.ClassBody(elementList))};Parser.prototype.parseClassDeclaration=function(identifierIsOptional){var node=this.createNode();var previousStrict=this.context.strict;this.context.strict=true;this.expectKeyword("class");var id=identifierIsOptional&&this.lookahead.type!==token_1.Token.Identifier?null:this.parseVariableIdentifier();var superClass=null;if(this.matchKeyword("extends")){this.nextToken();superClass=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall)}var classBody=this.parseClassBody();this.context.strict=previousStrict;return this.finalize(node,new Node.ClassDeclaration(id,superClass,classBody))};Parser.prototype.parseClassExpression=function(){var node=this.createNode();var previousStrict=this.context.strict;this.context.strict=true;this.expectKeyword("class");var id=this.lookahead.type===token_1.Token.Identifier?this.parseVariableIdentifier():null;var superClass=null;if(this.matchKeyword("extends")){this.nextToken();superClass=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall)}var classBody=this.parseClassBody();this.context.strict=previousStrict;return this.finalize(node,new Node.ClassExpression(id,superClass,classBody))};Parser.prototype.parseProgram=function(){var node=this.createNode();var body=this.parseDirectivePrologues();while(this.startMarker.index<this.scanner.length){body.push(this.parseStatementListItem())}return this.finalize(node,new Node.Program(body,this.sourceType))};Parser.prototype.parseModuleSpecifier=function(){var node=this.createNode();if(this.lookahead.type!==token_1.Token.StringLiteral){this.throwError(messages_1.Messages.InvalidModuleSpecifier)}var token=this.nextToken();var raw=this.getTokenRaw(token);return this.finalize(node,new Node.Literal(token.value,raw))};Parser.prototype.parseImportSpecifier=function(){var node=this.createNode();var imported;var local;if(this.lookahead.type===token_1.Token.Identifier){imported=this.parseVariableIdentifier();local=imported;if(this.matchContextualKeyword("as")){this.nextToken();local=this.parseVariableIdentifier()}}else{imported=this.parseIdentifierName();local=imported;if(this.matchContextualKeyword("as")){this.nextToken();local=this.parseVariableIdentifier()}else{this.throwUnexpectedToken(this.nextToken())}}return this.finalize(node,new Node.ImportSpecifier(local,imported))};Parser.prototype.parseNamedImports=function(){this.expect("{");var specifiers=[];while(!this.match("}")){specifiers.push(this.parseImportSpecifier());if(!this.match("}")){this.expect(",")}}this.expect("}");return specifiers};Parser.prototype.parseImportDefaultSpecifier=function(){var node=this.createNode();var local=this.parseIdentifierName();return this.finalize(node,new Node.ImportDefaultSpecifier(local))};Parser.prototype.parseImportNamespaceSpecifier=function(){var node=this.createNode();this.expect("*");if(!this.matchContextualKeyword("as")){this.throwError(messages_1.Messages.NoAsAfterImportNamespace)}this.nextToken();var local=this.parseIdentifierName();return this.finalize(node,new Node.ImportNamespaceSpecifier(local))};Parser.prototype.parseImportDeclaration=function(){if(this.context.inFunctionBody){this.throwError(messages_1.Messages.IllegalImportDeclaration)}var node=this.createNode();this.expectKeyword("import");var src;var specifiers=[];if(this.lookahead.type===token_1.Token.StringLiteral){src=this.parseModuleSpecifier()}else{if(this.match("{")){specifiers=specifiers.concat(this.parseNamedImports())}else if(this.match("*")){specifiers.push(this.parseImportNamespaceSpecifier())}else if(this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")){specifiers.push(this.parseImportDefaultSpecifier());if(this.match(",")){this.nextToken();if(this.match("*")){specifiers.push(this.parseImportNamespaceSpecifier())}else if(this.match("{")){specifiers=specifiers.concat(this.parseNamedImports())}else{this.throwUnexpectedToken(this.lookahead)}}}else{this.throwUnexpectedToken(this.nextToken())}if(!this.matchContextualKeyword("from")){var message=this.lookahead.value?messages_1.Messages.UnexpectedToken:messages_1.Messages.MissingFromClause;this.throwError(message,this.lookahead.value)}this.nextToken();src=this.parseModuleSpecifier()}this.consumeSemicolon();return this.finalize(node,new Node.ImportDeclaration(specifiers,src))};Parser.prototype.parseExportSpecifier=function(){var node=this.createNode();var local=this.parseIdentifierName();var exported=local;if(this.matchContextualKeyword("as")){this.nextToken();exported=this.parseIdentifierName()}return this.finalize(node,new Node.ExportSpecifier(local,exported))};Parser.prototype.parseExportDeclaration=function(){if(this.context.inFunctionBody){this.throwError(messages_1.Messages.IllegalExportDeclaration)}var node=this.createNode();this.expectKeyword("export");var exportDeclaration;if(this.matchKeyword("default")){this.nextToken();if(this.matchKeyword("function")){var declaration=this.parseFunctionDeclaration(true);exportDeclaration=this.finalize(node,new Node.ExportDefaultDeclaration(declaration))}else if(this.matchKeyword("class")){var declaration=this.parseClassDeclaration(true);exportDeclaration=this.finalize(node,new Node.ExportDefaultDeclaration(declaration))}else{if(this.matchContextualKeyword("from")){this.throwError(messages_1.Messages.UnexpectedToken,this.lookahead.value)}var declaration=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon();exportDeclaration=this.finalize(node,new Node.ExportDefaultDeclaration(declaration))}}else if(this.match("*")){this.nextToken();if(!this.matchContextualKeyword("from")){var message=this.lookahead.value?messages_1.Messages.UnexpectedToken:messages_1.Messages.MissingFromClause;this.throwError(message,this.lookahead.value)}this.nextToken();var src=this.parseModuleSpecifier();this.consumeSemicolon();exportDeclaration=this.finalize(node,new Node.ExportAllDeclaration(src))}else if(this.lookahead.type===token_1.Token.Keyword){var declaration=void 0;switch(this.lookahead.value){case"let":case"const":declaration=this.parseLexicalDeclaration({inFor:false});break;case"var":case"class":case"function":declaration=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}exportDeclaration=this.finalize(node,new Node.ExportNamedDeclaration(declaration,[],null))}else{var specifiers=[];var source=null;var isExportFromIdentifier=false;this.expect("{");while(!this.match("}")){isExportFromIdentifier=isExportFromIdentifier||this.matchKeyword("default");specifiers.push(this.parseExportSpecifier());if(!this.match("}")){this.expect(",")}}this.expect("}");if(this.matchContextualKeyword("from")){this.nextToken();source=this.parseModuleSpecifier();this.consumeSemicolon()}else if(isExportFromIdentifier){var message=this.lookahead.value?messages_1.Messages.UnexpectedToken:messages_1.Messages.MissingFromClause;this.throwError(message,this.lookahead.value)}else{this.consumeSemicolon()}exportDeclaration=this.finalize(node,new Node.ExportNamedDeclaration(null,specifiers,source))}return exportDeclaration};return Parser}();exports.Parser=Parser},function(module,exports){"use strict";function assert(condition,message){if(!condition){throw new Error("ASSERT: "+message)}}exports.assert=assert},function(module,exports){"use strict";exports.Messages={UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token =",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token",InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalExportDeclaration:"Unexpected token",DuplicateBinding:"Duplicate binding %0",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer"}},function(module,exports){"use strict";var ErrorHandler=function(){function ErrorHandler(){this.errors=[];this.tolerant=false}ErrorHandler.prototype.recordError=function(error){this.errors.push(error)};ErrorHandler.prototype.tolerate=function(error){if(this.tolerant){this.recordError(error)}else{throw error}};ErrorHandler.prototype.constructError=function(msg,column){var error=new Error(msg);try{throw error}catch(base){if(Object.create&&Object.defineProperty){error=Object.create(base);Object.defineProperty(error,"column",{value:column})}}finally{return error}};ErrorHandler.prototype.createError=function(index,line,col,description){var msg="Line "+line+": "+description;var error=this.constructError(msg,col);error.index=index;error.lineNumber=line;error.description=description;return error};ErrorHandler.prototype.throwError=function(index,line,col,description){throw this.createError(index,line,col,description)};ErrorHandler.prototype.tolerateError=function(index,line,col,description){var error=this.createError(index,line,col,description);if(this.tolerant){this.recordError(error)}else{throw error}};return ErrorHandler}();exports.ErrorHandler=ErrorHandler},function(module,exports){"use strict";(function(Token){Token[Token["BooleanLiteral"]=1]="BooleanLiteral";Token[Token["EOF"]=2]="EOF";Token[Token["Identifier"]=3]="Identifier";Token[Token["Keyword"]=4]="Keyword";Token[Token["NullLiteral"]=5]="NullLiteral";Token[Token["NumericLiteral"]=6]="NumericLiteral";Token[Token["Punctuator"]=7]="Punctuator";Token[Token["StringLiteral"]=8]="StringLiteral";Token[Token["RegularExpression"]=9]="RegularExpression";Token[Token["Template"]=10]="Template"})(exports.Token||(exports.Token={}));var Token=exports.Token;exports.TokenName={};exports.TokenName[Token.BooleanLiteral]="Boolean";exports.TokenName[Token.EOF]="<end>";exports.TokenName[Token.Identifier]="Identifier";exports.TokenName[Token.Keyword]="Keyword";exports.TokenName[Token.NullLiteral]="Null";exports.TokenName[Token.NumericLiteral]="Numeric";exports.TokenName[Token.Punctuator]="Punctuator";exports.TokenName[Token.StringLiteral]="String";exports.TokenName[Token.RegularExpression]="RegularExpression";exports.TokenName[Token.Template]="Template"},function(module,exports,__webpack_require__){"use strict";var assert_1=__webpack_require__(4);var messages_1=__webpack_require__(5);var character_1=__webpack_require__(9);var token_1=__webpack_require__(7);function hexValue(ch){return"0123456789abcdef".indexOf(ch.toLowerCase())}function octalValue(ch){return"01234567".indexOf(ch)}var Scanner=function(){function Scanner(code,handler){this.source=code;this.errorHandler=handler;this.trackComment=false;this.length=code.length;this.index=0;this.lineNumber=code.length>0?1:0;this.lineStart=0;this.curlyStack=[]}Scanner.prototype.eof=function(){return this.index>=this.length};Scanner.prototype.throwUnexpectedToken=function(message){if(message===void 0){message=messages_1.Messages.UnexpectedTokenIllegal}this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,message)};Scanner.prototype.tolerateUnexpectedToken=function(){this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,messages_1.Messages.UnexpectedTokenIllegal)};Scanner.prototype.skipSingleLineComment=function(offset){var comments;var start,loc;if(this.trackComment){comments=[];start=this.index-offset;loc={start:{line:this.lineNumber,column:this.index-this.lineStart-offset},end:{}}}while(!this.eof()){var ch=this.source.charCodeAt(this.index);++this.index;if(character_1.Character.isLineTerminator(ch)){if(this.trackComment){loc.end={line:this.lineNumber,column:this.index-this.lineStart-1};var entry={multiLine:false,slice:[start+offset,this.index-1],range:[start,this.index-1],loc:loc};comments.push(entry)}if(ch===13&&this.source.charCodeAt(this.index)===10){++this.index}++this.lineNumber;this.lineStart=this.index;return comments}}if(this.trackComment){loc.end={line:this.lineNumber,column:this.index-this.lineStart};var entry={multiLine:false,slice:[start+offset,this.index],range:[start,this.index],loc:loc};comments.push(entry)}return comments};Scanner.prototype.skipMultiLineComment=function(){var comments;var start,loc;if(this.trackComment){comments=[];start=this.index-2;loc={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}}}while(!this.eof()){var ch=this.source.charCodeAt(this.index);if(character_1.Character.isLineTerminator(ch)){if(ch===13&&this.source.charCodeAt(this.index+1)===10){++this.index}++this.lineNumber;++this.index;this.lineStart=this.index}else if(ch===42){if(this.source.charCodeAt(this.index+1)===47){this.index+=2;if(this.trackComment){loc.end={line:this.lineNumber,column:this.index-this.lineStart};var entry={multiLine:true,slice:[start+2,this.index-2],range:[start,this.index],loc:loc};comments.push(entry)}return comments}++this.index}else{++this.index}}if(this.trackComment){loc.end={line:this.lineNumber,column:this.index-this.lineStart};var entry={multiLine:true,slice:[start+2,this.index],range:[start,this.index],loc:loc};comments.push(entry)}this.tolerateUnexpectedToken();return comments};Scanner.prototype.scanComments=function(){var comments;if(this.trackComment){comments=[]}var start=this.index===0;while(!this.eof()){var ch=this.source.charCodeAt(this.index);if(character_1.Character.isWhiteSpace(ch)){++this.index}else if(character_1.Character.isLineTerminator(ch)){++this.index;if(ch===13&&this.source.charCodeAt(this.index)===10){++this.index}++this.lineNumber;this.lineStart=this.index;start=true}else if(ch===47){ch=this.source.charCodeAt(this.index+1);if(ch===47){this.index+=2;var comment=this.skipSingleLineComment(2);if(this.trackComment){comments=comments.concat(comment)}start=true}else if(ch===42){this.index+=2;var comment=this.skipMultiLineComment();if(this.trackComment){comments=comments.concat(comment)}}else{break}}else if(start&&ch===45){if(this.source.charCodeAt(this.index+1)===45&&this.source.charCodeAt(this.index+2)===62){this.index+=3;var comment=this.skipSingleLineComment(3);if(this.trackComment){comments=comments.concat(comment)}}else{break}}else if(ch===60){if(this.source.slice(this.index+1,this.index+4)==="!--"){this.index+=4;var comment=this.skipSingleLineComment(4);if(this.trackComment){comments=comments.concat(comment)}}else{break}}else{break}}return comments};Scanner.prototype.isFutureReservedWord=function(id){switch(id){case"enum":case"export":case"import":case"super":return true;default:return false}};Scanner.prototype.isStrictModeReservedWord=function(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true;default:return false}};Scanner.prototype.isRestrictedWord=function(id){return id==="eval"||id==="arguments"};Scanner.prototype.isKeyword=function(id){switch(id.length){case 2:return id==="if"||id==="in"||id==="do";case 3:return id==="var"||id==="for"||id==="new"||id==="try"||id==="let";case 4:return id==="this"||id==="else"||id==="case"||id==="void"||id==="with"||id==="enum";case 5:return id==="while"||id==="break"||id==="catch"||id==="throw"||id==="const"||id==="yield"||id==="class"||id==="super";case 6:return id==="return"||id==="typeof"||id==="delete"||id==="switch"||id==="export"||id==="import";case 7:return id==="default"||id==="finally"||id==="extends";case 8:return id==="function"||id==="continue"||id==="debugger";case 10:return id==="instanceof";default:return false}};Scanner.prototype.codePointAt=function(i){var cp=this.source.charCodeAt(i);if(cp>=55296&&cp<=56319){var second=this.source.charCodeAt(i+1);if(second>=56320&&second<=57343){var first=cp;cp=(first-55296)*1024+second-56320+65536}}return cp};Scanner.prototype.scanHexEscape=function(prefix){var len=prefix==="u"?4:2;var code=0;for(var i=0;i<len;++i){if(!this.eof()&&character_1.Character.isHexDigit(this.source.charCodeAt(this.index))){code=code*16+hexValue(this.source[this.index++])}else{return""}}return String.fromCharCode(code)};Scanner.prototype.scanUnicodeCodePointEscape=function(){var ch=this.source[this.index];var code=0;if(ch==="}"){this.throwUnexpectedToken()}while(!this.eof()){ch=this.source[this.index++];if(!character_1.Character.isHexDigit(ch.charCodeAt(0))){break}code=code*16+hexValue(ch)}if(code>1114111||ch!=="}"){this.throwUnexpectedToken()}return character_1.Character.fromCodePoint(code)};Scanner.prototype.getIdentifier=function(){var start=this.index++;while(!this.eof()){var ch=this.source.charCodeAt(this.index);if(ch===92){this.index=start;return this.getComplexIdentifier()}else if(ch>=55296&&ch<57343){this.index=start;return this.getComplexIdentifier()}if(character_1.Character.isIdentifierPart(ch)){++this.index}else{break}}return this.source.slice(start,this.index)};Scanner.prototype.getComplexIdentifier=function(){var cp=this.codePointAt(this.index);var id=character_1.Character.fromCodePoint(cp);this.index+=id.length;var ch;if(cp===92){if(this.source.charCodeAt(this.index)!==117){this.throwUnexpectedToken()}++this.index;if(this.source[this.index]==="{"){++this.index;ch=this.scanUnicodeCodePointEscape()}else{ch=this.scanHexEscape("u");cp=ch.charCodeAt(0);if(!ch||ch==="\\"||!character_1.Character.isIdentifierStart(cp)){this.throwUnexpectedToken()}}id=ch}while(!this.eof()){cp=this.codePointAt(this.index);if(!character_1.Character.isIdentifierPart(cp)){break}ch=character_1.Character.fromCodePoint(cp);id+=ch;this.index+=ch.length;if(cp===92){id=id.substr(0,id.length-1);if(this.source.charCodeAt(this.index)!==117){this.throwUnexpectedToken()}++this.index;if(this.source[this.index]==="{"){++this.index;ch=this.scanUnicodeCodePointEscape()}else{ch=this.scanHexEscape("u");cp=ch.charCodeAt(0);if(!ch||ch==="\\"||!character_1.Character.isIdentifierPart(cp)){this.throwUnexpectedToken()}}id+=ch}}return id};Scanner.prototype.octalToDecimal=function(ch){var octal=ch!=="0";var code=octalValue(ch);if(!this.eof()&&character_1.Character.isOctalDigit(this.source.charCodeAt(this.index))){octal=true;code=code*8+octalValue(this.source[this.index++]);if("0123".indexOf(ch)>=0&&!this.eof()&&character_1.Character.isOctalDigit(this.source.charCodeAt(this.index))){code=code*8+octalValue(this.source[this.index++])}}return{code:code,octal:octal}};Scanner.prototype.scanIdentifier=function(){var type;var start=this.index;var id=this.source.charCodeAt(start)===92?this.getComplexIdentifier():this.getIdentifier();if(id.length===1){type=token_1.Token.Identifier}else if(this.isKeyword(id)){type=token_1.Token.Keyword}else if(id==="null"){type=token_1.Token.NullLiteral}else if(id==="true"||id==="false"){type=token_1.Token.BooleanLiteral}else{type=token_1.Token.Identifier}return{type:type,value:id,lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}};Scanner.prototype.scanPunctuator=function(){var token={type:token_1.Token.Punctuator,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var str=this.source[this.index];switch(str){case"(":case"{":if(str==="{"){this.curlyStack.push("{")}++this.index;break;case".":++this.index;if(this.source[this.index]==="."&&this.source[this.index+1]==="."){this.index+=2;str="..."}break;case"}":++this.index;this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:str=this.source.substr(this.index,4);if(str===">>>="){this.index+=4}else{str=str.substr(0,3);if(str==="==="||str==="!=="||str===">>>"||str==="<<="||str===">>="||str==="**="){this.index+=3}else{str=str.substr(0,2);if(str==="&&"||str==="||"||str==="=="||str==="!="||str==="+="||str==="-="||str==="*="||str==="/="||str==="++"||str==="--"||str==="<<"||str===">>"||str==="&="||str==="|="||str==="^="||str==="%="||str==="<="||str===">="||str==="=>"||str==="**"){this.index+=2}else{str=this.source[this.index];if("<>=!+-*%&|^/".indexOf(str)>=0){++this.index}}}}}if(this.index===token.start){this.throwUnexpectedToken()}token.end=this.index;token.value=str;return token};Scanner.prototype.scanHexLiteral=function(start){var number="";while(!this.eof()){if(!character_1.Character.isHexDigit(this.source.charCodeAt(this.index))){break}number+=this.source[this.index++]}if(number.length===0){this.throwUnexpectedToken()}if(character_1.Character.isIdentifierStart(this.source.charCodeAt(this.index))){this.throwUnexpectedToken()}return{type:token_1.Token.NumericLiteral,value:parseInt("0x"+number,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}};Scanner.prototype.scanBinaryLiteral=function(start){var number="";var ch;while(!this.eof()){ch=this.source[this.index];if(ch!=="0"&&ch!=="1"){break}number+=this.source[this.index++]}if(number.length===0){this.throwUnexpectedToken()}if(!this.eof()){ch=this.source.charCodeAt(this.index);if(character_1.Character.isIdentifierStart(ch)||character_1.Character.isDecimalDigit(ch)){this.throwUnexpectedToken()}}return{type:token_1.Token.NumericLiteral,value:parseInt(number,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}};Scanner.prototype.scanOctalLiteral=function(prefix,start){var number="";var octal=false;if(character_1.Character.isOctalDigit(prefix.charCodeAt(0))){octal=true;number="0"+this.source[this.index++]}else{++this.index}while(!this.eof()){if(!character_1.Character.isOctalDigit(this.source.charCodeAt(this.index))){break}number+=this.source[this.index++]}if(!octal&&number.length===0){this.throwUnexpectedToken()}if(character_1.Character.isIdentifierStart(this.source.charCodeAt(this.index))||character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index))){this.throwUnexpectedToken()}return{type:token_1.Token.NumericLiteral,value:parseInt(number,8),octal:octal,lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}};Scanner.prototype.isImplicitOctalLiteral=function(){for(var i=this.index+1;i<this.length;++i){var ch=this.source[i];if(ch==="8"||ch==="9"){return false}if(!character_1.Character.isOctalDigit(ch.charCodeAt(0))){return true}}return true};Scanner.prototype.scanNumericLiteral=function(){var start=this.index;var ch=this.source[start];assert_1.assert(character_1.Character.isDecimalDigit(ch.charCodeAt(0))||ch===".","Numeric literal must start with a decimal digit or a decimal point");var number="";if(ch!=="."){number=this.source[this.index++];ch=this.source[this.index];if(number==="0"){if(ch==="x"||ch==="X"){++this.index;return this.scanHexLiteral(start)}if(ch==="b"||ch==="B"){++this.index;return this.scanBinaryLiteral(start)}if(ch==="o"||ch==="O"){return this.scanOctalLiteral(ch,start)}if(ch&&character_1.Character.isOctalDigit(ch.charCodeAt(0))){if(this.isImplicitOctalLiteral()){return this.scanOctalLiteral(ch,start)}}}while(character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index))){number+=this.source[this.index++]}ch=this.source[this.index]}if(ch==="."){number+=this.source[this.index++];while(character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index))){number+=this.source[this.index++]}ch=this.source[this.index]}if(ch==="e"||ch==="E"){number+=this.source[this.index++];ch=this.source[this.index];if(ch==="+"||ch==="-"){number+=this.source[this.index++]}if(character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index))){while(character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index))){number+=this.source[this.index++]}}else{this.throwUnexpectedToken()}}if(character_1.Character.isIdentifierStart(this.source.charCodeAt(this.index))){this.throwUnexpectedToken()}return{type:token_1.Token.NumericLiteral,value:parseFloat(number),lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}};Scanner.prototype.scanStringLiteral=function(){var start=this.index;var quote=this.source[start];assert_1.assert(quote==="'"||quote==='"',"String literal must starts with a quote");++this.index;var octal=false;var str="";while(!this.eof()){var ch=this.source[this.index++];if(ch===quote){quote="";break}else if(ch==="\\"){ch=this.source[this.index++];if(!ch||!character_1.Character.isLineTerminator(ch.charCodeAt(0))){switch(ch){case"u":case"x":if(this.source[this.index]==="{"){++this.index;str+=this.scanUnicodeCodePointEscape()}else{var unescaped=this.scanHexEscape(ch);if(!unescaped){this.throwUnexpectedToken()}str+=unescaped}break;case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="\t";break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="\v";break;case"8":case"9":str+=ch;this.tolerateUnexpectedToken();break;default:if(ch&&character_1.Character.isOctalDigit(ch.charCodeAt(0))){var octToDec=this.octalToDecimal(ch);octal=octToDec.octal||octal;str+=String.fromCharCode(octToDec.code)}else{str+=ch}break}}else{++this.lineNumber;if(ch==="\r"&&this.source[this.index]==="\n"){++this.index}this.lineStart=this.index}}else if(character_1.Character.isLineTerminator(ch.charCodeAt(0))){break}else{str+=ch}}if(quote!==""){this.index=start;this.throwUnexpectedToken()}return{type:token_1.Token.StringLiteral,value:str,octal:octal,lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}};Scanner.prototype.scanTemplate=function(){var cooked="";var terminated=false;var start=this.index;var head=this.source[start]==="`";var tail=false;var rawOffset=2;++this.index;while(!this.eof()){var ch=this.source[this.index++];if(ch==="`"){rawOffset=1;tail=true;terminated=true;break}else if(ch==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${");++this.index;terminated=true;break}cooked+=ch}else if(ch==="\\"){ch=this.source[this.index++];if(!character_1.Character.isLineTerminator(ch.charCodeAt(0))){switch(ch){case"n":cooked+="\n";break;case"r":cooked+="\r";break;case"t":cooked+="\t";break;case"u":case"x":if(this.source[this.index]==="{"){++this.index;cooked+=this.scanUnicodeCodePointEscape()}else{var restore=this.index;var unescaped=this.scanHexEscape(ch);if(unescaped){cooked+=unescaped}else{this.index=restore;cooked+=ch}}break;case"b":cooked+="\b";break;case"f":cooked+="\f";break;case"v":cooked+="\v";break;default:if(ch==="0"){if(character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index))){this.throwUnexpectedToken(messages_1.Messages.TemplateOctalLiteral)}cooked+="\0"}else if(character_1.Character.isOctalDigit(ch.charCodeAt(0))){this.throwUnexpectedToken(messages_1.Messages.TemplateOctalLiteral)}else{cooked+=ch}break}}else{++this.lineNumber;if(ch==="\r"&&this.source[this.index]==="\n"){++this.index}this.lineStart=this.index}}else if(character_1.Character.isLineTerminator(ch.charCodeAt(0))){++this.lineNumber;if(ch==="\r"&&this.source[this.index]==="\n"){++this.index}this.lineStart=this.index;cooked+="\n"}else{cooked+=ch}}if(!terminated){this.throwUnexpectedToken()}if(!head){this.curlyStack.pop()}return{type:token_1.Token.Template,value:{cooked:cooked,raw:this.source.slice(start+1,this.index-rawOffset)},head:head,tail:tail,lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}};Scanner.prototype.testRegExp=function(pattern,flags){var astralSubstitute="\uffff";var tmp=pattern;var self=this;if(flags.indexOf("u")>=0){tmp=tmp.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function($0,$1,$2){var codePoint=parseInt($1||$2,16);if(codePoint>1114111){self.throwUnexpectedToken(messages_1.Messages.InvalidRegExp)}if(codePoint<=65535){return String.fromCharCode(codePoint)}return astralSubstitute}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,astralSubstitute)}try{RegExp(tmp)}catch(e){this.throwUnexpectedToken(messages_1.Messages.InvalidRegExp)}try{return new RegExp(pattern,flags)}catch(exception){return null}};Scanner.prototype.scanRegExpBody=function(){var ch=this.source[this.index];assert_1.assert(ch==="/","Regular expression literal must start with a slash");var str=this.source[this.index++];var classMarker=false;var terminated=false;while(!this.eof()){ch=this.source[this.index++];str+=ch;if(ch==="\\"){ch=this.source[this.index++];if(character_1.Character.isLineTerminator(ch.charCodeAt(0))){this.throwUnexpectedToken(messages_1.Messages.UnterminatedRegExp)}str+=ch}else if(character_1.Character.isLineTerminator(ch.charCodeAt(0))){this.throwUnexpectedToken(messages_1.Messages.UnterminatedRegExp)}else if(classMarker){if(ch==="]"){classMarker=false}}else{if(ch==="/"){terminated=true;break}else if(ch==="["){classMarker=true}}}if(!terminated){this.throwUnexpectedToken(messages_1.Messages.UnterminatedRegExp)}var body=str.substr(1,str.length-2);return{value:body,literal:str}};Scanner.prototype.scanRegExpFlags=function(){var str="";var flags="";while(!this.eof()){var ch=this.source[this.index];if(!character_1.Character.isIdentifierPart(ch.charCodeAt(0))){break}++this.index;if(ch==="\\"&&!this.eof()){ch=this.source[this.index];if(ch==="u"){++this.index;var restore=this.index;ch=this.scanHexEscape("u");if(ch){flags+=ch;for(str+="\\u";restore<this.index;++restore){str+=this.source[restore]}}else{this.index=restore;flags+="u";str+="\\u"}this.tolerateUnexpectedToken()}else{str+="\\";this.tolerateUnexpectedToken()}}else{flags+=ch;str+=ch}}return{value:flags,literal:str}};Scanner.prototype.scanRegExp=function(){var start=this.index;var body=this.scanRegExpBody();var flags=this.scanRegExpFlags();var value=this.testRegExp(body.value,flags.value);return{type:token_1.Token.RegularExpression,value:value,literal:body.literal+flags.literal,regex:{pattern:body.value,flags:flags.value},lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}};Scanner.prototype.lex=function(){if(this.eof()){return{type:token_1.Token.EOF,lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index}}var cp=this.source.charCodeAt(this.index);if(character_1.Character.isIdentifierStart(cp)){return this.scanIdentifier()}if(cp===40||cp===41||cp===59){return this.scanPunctuator()}if(cp===39||cp===34){return this.scanStringLiteral()}if(cp===46){if(character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))){return this.scanNumericLiteral()}return this.scanPunctuator()}if(character_1.Character.isDecimalDigit(cp)){return this.scanNumericLiteral()}if(cp===96||cp===125&&this.curlyStack[this.curlyStack.length-1]==="${"){return this.scanTemplate()}if(cp>=55296&&cp<57343){if(character_1.Character.isIdentifierStart(this.codePointAt(this.index))){return this.scanIdentifier()}}return this.scanPunctuator()};return Scanner}();exports.Scanner=Scanner},function(module,exports){"use strict";var Regex={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};exports.Character={fromCodePoint:function(cp){return cp<65536?String.fromCharCode(cp):String.fromCharCode(55296+(cp-65536>>10))+String.fromCharCode(56320+(cp-65536&1023))},isWhiteSpace:function(cp){return cp===32||cp===9||cp===11||cp===12||cp===160||cp>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(cp)>=0},isLineTerminator:function(cp){return cp===10||cp===13||cp===8232||cp===8233},isIdentifierStart:function(cp){return cp===36||cp===95||cp>=65&&cp<=90||cp>=97&&cp<=122||cp===92||cp>=128&&Regex.NonAsciiIdentifierStart.test(exports.Character.fromCodePoint(cp))},isIdentifierPart:function(cp){return cp===36||cp===95||cp>=65&&cp<=90||cp>=97&&cp<=122||cp>=48&&cp<=57||cp===92||cp>=128&&Regex.NonAsciiIdentifierPart.test(exports.Character.fromCodePoint(cp))},isDecimalDigit:function(cp){return cp>=48&&cp<=57},isHexDigit:function(cp){return cp>=48&&cp<=57||cp>=65&&cp<=70||cp>=97&&cp<=102},isOctalDigit:function(cp){return cp>=48&&cp<=55}}},function(module,exports,__webpack_require__){"use strict";var syntax_1=__webpack_require__(2);var ArrayExpression=function(){function ArrayExpression(elements){this.type=syntax_1.Syntax.ArrayExpression;this.elements=elements}return ArrayExpression}();exports.ArrayExpression=ArrayExpression;var ArrayPattern=function(){function ArrayPattern(elements){this.type=syntax_1.Syntax.ArrayPattern;this.elements=elements}return ArrayPattern}();exports.ArrayPattern=ArrayPattern;var ArrowFunctionExpression=function(){function ArrowFunctionExpression(params,body,expression){this.type=syntax_1.Syntax.ArrowFunctionExpression;this.id=null;this.params=params;this.body=body;this.generator=false;this.expression=expression}return ArrowFunctionExpression}();exports.ArrowFunctionExpression=ArrowFunctionExpression;var AssignmentExpression=function(){function AssignmentExpression(operator,left,right){this.type=syntax_1.Syntax.AssignmentExpression;this.operator=operator;this.left=left;this.right=right}return AssignmentExpression}();exports.AssignmentExpression=AssignmentExpression;var AssignmentPattern=function(){function AssignmentPattern(left,right){this.type=syntax_1.Syntax.AssignmentPattern;this.left=left;this.right=right}return AssignmentPattern}();exports.AssignmentPattern=AssignmentPattern;var BinaryExpression=function(){function BinaryExpression(operator,left,right){var logical=operator==="||"||operator==="&&";this.type=logical?syntax_1.Syntax.LogicalExpression:syntax_1.Syntax.BinaryExpression;this.operator=operator;this.left=left;this.right=right}return BinaryExpression}();exports.BinaryExpression=BinaryExpression;var BlockStatement=function(){function BlockStatement(body){this.type=syntax_1.Syntax.BlockStatement;this.body=body}return BlockStatement}();exports.BlockStatement=BlockStatement;var BreakStatement=function(){function BreakStatement(label){this.type=syntax_1.Syntax.BreakStatement;this.label=label}return BreakStatement}();exports.BreakStatement=BreakStatement;var CallExpression=function(){function CallExpression(callee,args){this.type=syntax_1.Syntax.CallExpression;this.callee=callee;this.arguments=args}return CallExpression}();exports.CallExpression=CallExpression;var CatchClause=function(){function CatchClause(param,body){this.type=syntax_1.Syntax.CatchClause;this.param=param;this.body=body}return CatchClause}();exports.CatchClause=CatchClause;var ClassBody=function(){function ClassBody(body){this.type=syntax_1.Syntax.ClassBody;this.body=body}return ClassBody}();exports.ClassBody=ClassBody;var ClassDeclaration=function(){function ClassDeclaration(id,superClass,body){this.type=syntax_1.Syntax.ClassDeclaration;this.id=id;this.superClass=superClass;this.body=body}return ClassDeclaration}();exports.ClassDeclaration=ClassDeclaration;var ClassExpression=function(){function ClassExpression(id,superClass,body){this.type=syntax_1.Syntax.ClassExpression;this.id=id;this.superClass=superClass;this.body=body}return ClassExpression}();exports.ClassExpression=ClassExpression;var ComputedMemberExpression=function(){function ComputedMemberExpression(object,property){this.type=syntax_1.Syntax.MemberExpression;this.computed=true;this.object=object;this.property=property}return ComputedMemberExpression}();exports.ComputedMemberExpression=ComputedMemberExpression;var ConditionalExpression=function(){function ConditionalExpression(test,consequent,alternate){this.type=syntax_1.Syntax.ConditionalExpression;this.test=test;this.consequent=consequent;this.alternate=alternate}return ConditionalExpression}();exports.ConditionalExpression=ConditionalExpression;var ContinueStatement=function(){function ContinueStatement(label){this.type=syntax_1.Syntax.ContinueStatement;this.label=label}return ContinueStatement}();exports.ContinueStatement=ContinueStatement;var DebuggerStatement=function(){function DebuggerStatement(){this.type=syntax_1.Syntax.DebuggerStatement}return DebuggerStatement}();exports.DebuggerStatement=DebuggerStatement;var Directive=function(){function Directive(expression,directive){this.type=syntax_1.Syntax.ExpressionStatement;this.expression=expression;this.directive=directive}return Directive}();exports.Directive=Directive;var DoWhileStatement=function(){function DoWhileStatement(body,test){this.type=syntax_1.Syntax.DoWhileStatement;this.body=body;this.test=test}return DoWhileStatement}();exports.DoWhileStatement=DoWhileStatement;var EmptyStatement=function(){function EmptyStatement(){this.type=syntax_1.Syntax.EmptyStatement}return EmptyStatement}();exports.EmptyStatement=EmptyStatement;var ExportAllDeclaration=function(){function ExportAllDeclaration(source){this.type=syntax_1.Syntax.ExportAllDeclaration;this.source=source}return ExportAllDeclaration}();exports.ExportAllDeclaration=ExportAllDeclaration;var ExportDefaultDeclaration=function(){function ExportDefaultDeclaration(declaration){this.type=syntax_1.Syntax.ExportDefaultDeclaration;this.declaration=declaration}return ExportDefaultDeclaration}();exports.ExportDefaultDeclaration=ExportDefaultDeclaration;var ExportNamedDeclaration=function(){function ExportNamedDeclaration(declaration,specifiers,source){this.type=syntax_1.Syntax.ExportNamedDeclaration;this.declaration=declaration;this.specifiers=specifiers;this.source=source}return ExportNamedDeclaration}();exports.ExportNamedDeclaration=ExportNamedDeclaration;var ExportSpecifier=function(){function ExportSpecifier(local,exported){this.type=syntax_1.Syntax.ExportSpecifier;this.exported=exported;this.local=local}return ExportSpecifier}();exports.ExportSpecifier=ExportSpecifier;var ExpressionStatement=function(){function ExpressionStatement(expression){this.type=syntax_1.Syntax.ExpressionStatement;this.expression=expression}return ExpressionStatement}();exports.ExpressionStatement=ExpressionStatement;var ForInStatement=function(){function ForInStatement(left,right,body){this.type=syntax_1.Syntax.ForInStatement;this.left=left;this.right=right;this.body=body;this.each=false}return ForInStatement}();exports.ForInStatement=ForInStatement;var ForOfStatement=function(){function ForOfStatement(left,right,body){this.type=syntax_1.Syntax.ForOfStatement;this.left=left;this.right=right;this.body=body}return ForOfStatement}();exports.ForOfStatement=ForOfStatement;var ForStatement=function(){function ForStatement(init,test,update,body){this.type=syntax_1.Syntax.ForStatement;this.init=init;this.test=test;this.update=update;this.body=body}return ForStatement}();exports.ForStatement=ForStatement;var FunctionDeclaration=function(){function FunctionDeclaration(id,params,body,generator){this.type=syntax_1.Syntax.FunctionDeclaration;this.id=id;this.params=params;this.body=body;this.generator=generator;this.expression=false}return FunctionDeclaration}();exports.FunctionDeclaration=FunctionDeclaration;var FunctionExpression=function(){function FunctionExpression(id,params,body,generator){this.type=syntax_1.Syntax.FunctionExpression;this.id=id;this.params=params;this.body=body;this.generator=generator;this.expression=false}return FunctionExpression}();exports.FunctionExpression=FunctionExpression;var Identifier=function(){function Identifier(name){this.type=syntax_1.Syntax.Identifier;this.name=name}return Identifier}();exports.Identifier=Identifier;var IfStatement=function(){function IfStatement(test,consequent,alternate){this.type=syntax_1.Syntax.IfStatement;this.test=test;this.consequent=consequent;this.alternate=alternate}return IfStatement}();exports.IfStatement=IfStatement;var ImportDeclaration=function(){function ImportDeclaration(specifiers,source){this.type=syntax_1.Syntax.ImportDeclaration;this.specifiers=specifiers;this.source=source}return ImportDeclaration}();exports.ImportDeclaration=ImportDeclaration;var ImportDefaultSpecifier=function(){function ImportDefaultSpecifier(local){this.type=syntax_1.Syntax.ImportDefaultSpecifier;this.local=local}return ImportDefaultSpecifier}();exports.ImportDefaultSpecifier=ImportDefaultSpecifier;var ImportNamespaceSpecifier=function(){function ImportNamespaceSpecifier(local){this.type=syntax_1.Syntax.ImportNamespaceSpecifier;this.local=local}return ImportNamespaceSpecifier}();exports.ImportNamespaceSpecifier=ImportNamespaceSpecifier;var ImportSpecifier=function(){function ImportSpecifier(local,imported){this.type=syntax_1.Syntax.ImportSpecifier;this.local=local;this.imported=imported}return ImportSpecifier}();exports.ImportSpecifier=ImportSpecifier;var LabeledStatement=function(){function LabeledStatement(label,body){this.type=syntax_1.Syntax.LabeledStatement;this.label=label;this.body=body}return LabeledStatement}();exports.LabeledStatement=LabeledStatement;var Literal=function(){function Literal(value,raw){this.type=syntax_1.Syntax.Literal;this.value=value;this.raw=raw}return Literal}();exports.Literal=Literal;var MetaProperty=function(){function MetaProperty(meta,property){this.type=syntax_1.Syntax.MetaProperty;this.meta=meta;this.property=property}return MetaProperty}();exports.MetaProperty=MetaProperty;var MethodDefinition=function(){function MethodDefinition(key,computed,value,kind,isStatic){this.type=syntax_1.Syntax.MethodDefinition;this.key=key;this.computed=computed;this.value=value;this.kind=kind;this.static=isStatic}return MethodDefinition}();exports.MethodDefinition=MethodDefinition;var NewExpression=function(){function NewExpression(callee,args){this.type=syntax_1.Syntax.NewExpression;this.callee=callee;this.arguments=args}return NewExpression}();exports.NewExpression=NewExpression;var ObjectExpression=function(){function ObjectExpression(properties){this.type=syntax_1.Syntax.ObjectExpression;this.properties=properties}return ObjectExpression}();exports.ObjectExpression=ObjectExpression;var ObjectPattern=function(){function ObjectPattern(properties){this.type=syntax_1.Syntax.ObjectPattern;this.properties=properties}return ObjectPattern}();exports.ObjectPattern=ObjectPattern;var Program=function(){function Program(body,sourceType){this.type=syntax_1.Syntax.Program;this.body=body;this.sourceType=sourceType}return Program}();exports.Program=Program;var Property=function(){function Property(kind,key,computed,value,method,shorthand){this.type=syntax_1.Syntax.Property;this.key=key;this.computed=computed;this.value=value;this.kind=kind;this.method=method;this.shorthand=shorthand}return Property}();exports.Property=Property;var RegexLiteral=function(){function RegexLiteral(value,raw,regex){this.type=syntax_1.Syntax.Literal;this.value=value;this.raw=raw;this.regex=regex}return RegexLiteral}();exports.RegexLiteral=RegexLiteral;var RestElement=function(){function RestElement(argument){this.type=syntax_1.Syntax.RestElement;this.argument=argument}return RestElement}();exports.RestElement=RestElement;var ReturnStatement=function(){function ReturnStatement(argument){this.type=syntax_1.Syntax.ReturnStatement;this.argument=argument}return ReturnStatement}();exports.ReturnStatement=ReturnStatement;var SequenceExpression=function(){function SequenceExpression(expressions){this.type=syntax_1.Syntax.SequenceExpression;this.expressions=expressions}return SequenceExpression}();exports.SequenceExpression=SequenceExpression;var SpreadElement=function(){function SpreadElement(argument){this.type=syntax_1.Syntax.SpreadElement;this.argument=argument}return SpreadElement}();exports.SpreadElement=SpreadElement;var StaticMemberExpression=function(){function StaticMemberExpression(object,property){this.type=syntax_1.Syntax.MemberExpression;this.computed=false;this.object=object;this.property=property}return StaticMemberExpression}();exports.StaticMemberExpression=StaticMemberExpression;var Super=function(){function Super(){this.type=syntax_1.Syntax.Super}return Super}();exports.Super=Super;var SwitchCase=function(){function SwitchCase(test,consequent){this.type=syntax_1.Syntax.SwitchCase;this.test=test;this.consequent=consequent}return SwitchCase}();exports.SwitchCase=SwitchCase;var SwitchStatement=function(){function SwitchStatement(discriminant,cases){this.type=syntax_1.Syntax.SwitchStatement;this.discriminant=discriminant;this.cases=cases}return SwitchStatement}();exports.SwitchStatement=SwitchStatement;var TaggedTemplateExpression=function(){function TaggedTemplateExpression(tag,quasi){this.type=syntax_1.Syntax.TaggedTemplateExpression;this.tag=tag;this.quasi=quasi}return TaggedTemplateExpression}();exports.TaggedTemplateExpression=TaggedTemplateExpression;var TemplateElement=function(){function TemplateElement(value,tail){this.type=syntax_1.Syntax.TemplateElement;this.value=value;this.tail=tail}return TemplateElement}();exports.TemplateElement=TemplateElement;var TemplateLiteral=function(){function TemplateLiteral(quasis,expressions){this.type=syntax_1.Syntax.TemplateLiteral;this.quasis=quasis;this.expressions=expressions}return TemplateLiteral}();exports.TemplateLiteral=TemplateLiteral;var ThisExpression=function(){function ThisExpression(){this.type=syntax_1.Syntax.ThisExpression}return ThisExpression}();exports.ThisExpression=ThisExpression;var ThrowStatement=function(){function ThrowStatement(argument){this.type=syntax_1.Syntax.ThrowStatement;this.argument=argument}return ThrowStatement}();exports.ThrowStatement=ThrowStatement;var TryStatement=function(){function TryStatement(block,handler,finalizer){this.type=syntax_1.Syntax.TryStatement;this.block=block;this.handler=handler;this.finalizer=finalizer}return TryStatement}();exports.TryStatement=TryStatement;var UnaryExpression=function(){function UnaryExpression(operator,argument){this.type=syntax_1.Syntax.UnaryExpression;this.operator=operator;this.argument=argument;this.prefix=true}return UnaryExpression}();exports.UnaryExpression=UnaryExpression;var UpdateExpression=function(){function UpdateExpression(operator,argument,prefix){this.type=syntax_1.Syntax.UpdateExpression;this.operator=operator;this.argument=argument;this.prefix=prefix}return UpdateExpression}();exports.UpdateExpression=UpdateExpression;var VariableDeclaration=function(){function VariableDeclaration(declarations,kind){this.type=syntax_1.Syntax.VariableDeclaration;this.declarations=declarations;this.kind=kind}return VariableDeclaration}();exports.VariableDeclaration=VariableDeclaration;var VariableDeclarator=function(){function VariableDeclarator(id,init){this.type=syntax_1.Syntax.VariableDeclarator;this.id=id;this.init=init}return VariableDeclarator}();exports.VariableDeclarator=VariableDeclarator;var WhileStatement=function(){function WhileStatement(test,body){this.type=syntax_1.Syntax.WhileStatement;this.test=test;this.body=body}return WhileStatement}();exports.WhileStatement=WhileStatement;var WithStatement=function(){function WithStatement(object,body){this.type=syntax_1.Syntax.WithStatement;this.object=object;this.body=body}return WithStatement}();exports.WithStatement=WithStatement;var YieldExpression=function(){function YieldExpression(argument,delegate){this.type=syntax_1.Syntax.YieldExpression;this.argument=argument;this.delegate=delegate}return YieldExpression}();exports.YieldExpression=YieldExpression},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var character_1=__webpack_require__(9);var token_1=__webpack_require__(7);var parser_1=__webpack_require__(3);var xhtml_entities_1=__webpack_require__(12);var jsx_syntax_1=__webpack_require__(13);var Node=__webpack_require__(10);var JSXNode=__webpack_require__(14);var JSXToken;(function(JSXToken){JSXToken[JSXToken["Identifier"]=100]="Identifier";JSXToken[JSXToken["Text"]=101]="Text"})(JSXToken||(JSXToken={}));token_1.TokenName[JSXToken.Identifier]="JSXIdentifier";token_1.TokenName[JSXToken.Text]="JSXText";function getQualifiedElementName(elementName){var qualifiedName;switch(elementName.type){case jsx_syntax_1.JSXSyntax.JSXIdentifier:var id=elementName;qualifiedName=id.name;break;case jsx_syntax_1.JSXSyntax.JSXNamespacedName:var ns=elementName;qualifiedName=getQualifiedElementName(ns.namespace)+":"+getQualifiedElementName(ns.name);break;case jsx_syntax_1.JSXSyntax.JSXMemberExpression:var expr=elementName;qualifiedName=getQualifiedElementName(expr.object)+"."+getQualifiedElementName(expr.property);break}return qualifiedName}var JSXParser=function(_super){__extends(JSXParser,_super);function JSXParser(code,options,delegate){_super.call(this,code,options,delegate)}JSXParser.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():_super.prototype.parsePrimaryExpression.call(this)};JSXParser.prototype.startJSX=function(){this.scanner.index=this.startMarker.index;this.scanner.lineNumber=this.startMarker.lineNumber;this.scanner.lineStart=this.startMarker.lineStart};JSXParser.prototype.finishJSX=function(){this.nextToken()};JSXParser.prototype.reenterJSX=function(){this.startJSX();this.expectJSX("}");if(this.config.tokens){this.tokens.pop()}};JSXParser.prototype.createJSXNode=function(){this.collectComments();return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}};JSXParser.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}};JSXParser.prototype.scanXHTMLEntity=function(quote){var result="&";var valid=true;var terminated=false;var numeric=false;var hex=false;while(!this.scanner.eof()&&valid&&!terminated){var ch=this.scanner.source[this.scanner.index];if(ch===quote){break}terminated=ch===";";result+=ch;++this.scanner.index;if(!terminated){switch(result.length){case 2:numeric=ch==="#";break;case 3:if(numeric){hex=ch==="x";valid=hex||character_1.Character.isDecimalDigit(ch.charCodeAt(0));numeric=numeric&&!hex}break;default:valid=valid&&!(numeric&&!character_1.Character.isDecimalDigit(ch.charCodeAt(0)));valid=valid&&!(hex&&!character_1.Character.isHexDigit(ch.charCodeAt(0)));break}}}if(valid&&terminated&&result.length>2){var str=result.substr(1,result.length-2);if(numeric&&str.length>1){result=String.fromCharCode(parseInt(str.substr(1),10))}else if(hex&&str.length>2){result=String.fromCharCode(parseInt("0"+str.substr(1),16))}else if(!numeric&&!hex&&xhtml_entities_1.XHTMLEntities[str]){result=xhtml_entities_1.XHTMLEntities[str]}}return result};JSXParser.prototype.lexJSX=function(){var cp=this.scanner.source.charCodeAt(this.scanner.index);if(cp===60||cp===62||cp===47||cp===58||cp===61||cp===123||cp===125){var value=this.scanner.source[this.scanner.index++];return{type:token_1.Token.Punctuator,value:value,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(cp===34||cp===39){var start=this.scanner.index;var quote=this.scanner.source[this.scanner.index++];var str="";while(!this.scanner.eof()){var ch=this.scanner.source[this.scanner.index++];if(ch===quote){break}else if(ch==="&"){str+=this.scanXHTMLEntity(quote)}else{str+=ch}}return{type:token_1.Token.StringLiteral,value:str,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:start,end:this.scanner.index}}if(cp===46){var n1=this.scanner.source.charCodeAt(this.scanner.index+1);var n2=this.scanner.source.charCodeAt(this.scanner.index+2);var value=n1===46&&n2===46?"...":".";var start=this.scanner.index;this.scanner.index+=value.length;return{type:token_1.Token.Punctuator,value:value,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:start,end:this.scanner.index}}if(cp===96){return{type:token_1.Token.Template,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index}}if(character_1.Character.isIdentifierStart(cp)&&cp!==92){var start=this.scanner.index;++this.scanner.index;while(!this.scanner.eof()){var ch=this.scanner.source.charCodeAt(this.scanner.index);if(character_1.Character.isIdentifierPart(ch)&&ch!==92){++this.scanner.index}else if(ch===45){++this.scanner.index}else{break}}var id=this.scanner.source.slice(start,this.scanner.index);return{type:JSXToken.Identifier,value:id,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:start,end:this.scanner.index}}this.scanner.throwUnexpectedToken()};JSXParser.prototype.nextJSXToken=function(){this.collectComments();this.startMarker.index=this.scanner.index;this.startMarker.lineNumber=this.scanner.lineNumber;this.startMarker.lineStart=this.scanner.lineStart;var token=this.lexJSX();this.lastMarker.index=this.scanner.index;this.lastMarker.lineNumber=this.scanner.lineNumber;this.lastMarker.lineStart=this.scanner.lineStart;if(this.config.tokens){this.tokens.push(this.convertToken(token))}return token};JSXParser.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index;this.startMarker.lineNumber=this.scanner.lineNumber;this.startMarker.lineStart=this.scanner.lineStart;var start=this.scanner.index;var text="";while(!this.scanner.eof()){var ch=this.scanner.source[this.scanner.index];if(ch==="{"||ch==="<"){break}++this.scanner.index;text+=ch;if(character_1.Character.isLineTerminator(ch.charCodeAt(0))){++this.scanner.lineNumber;if(ch==="\r"&&this.scanner.source[this.scanner.index]==="\n"){++this.scanner.index}this.scanner.lineStart=this.scanner.index}}this.lastMarker.index=this.scanner.index;this.lastMarker.lineNumber=this.scanner.lineNumber;this.lastMarker.lineStart=this.scanner.lineStart;var token={type:JSXToken.Text,value:text,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:start,end:this.scanner.index};if(text.length>0&&this.config.tokens){this.tokens.push(this.convertToken(token))}return token};JSXParser.prototype.peekJSXToken=function(){var previousIndex=this.scanner.index;var previousLineNumber=this.scanner.lineNumber;var previousLineStart=this.scanner.lineStart;this.scanner.scanComments();var next=this.lexJSX();this.scanner.index=previousIndex;this.scanner.lineNumber=previousLineNumber;this.scanner.lineStart=previousLineStart;return next};JSXParser.prototype.expectJSX=function(value){var token=this.nextJSXToken();if(token.type!==token_1.Token.Punctuator||token.value!==value){this.throwUnexpectedToken(token)}};JSXParser.prototype.matchJSX=function(value){var next=this.peekJSXToken();return next.type===token_1.Token.Punctuator&&next.value===value};JSXParser.prototype.parseJSXIdentifier=function(){var node=this.createJSXNode();var token=this.nextJSXToken();if(token.type!==JSXToken.Identifier){this.throwUnexpectedToken(token)}return this.finalize(node,new JSXNode.JSXIdentifier(token.value))};JSXParser.prototype.parseJSXElementName=function(){var node=this.createJSXNode();var elementName=this.parseJSXIdentifier();if(this.matchJSX(":")){var namespace=elementName;this.expectJSX(":");var name_1=this.parseJSXIdentifier();elementName=this.finalize(node,new JSXNode.JSXNamespacedName(namespace,name_1))}else if(this.matchJSX(".")){while(this.matchJSX(".")){var object=elementName;this.expectJSX(".");var property=this.parseJSXIdentifier();elementName=this.finalize(node,new JSXNode.JSXMemberExpression(object,property))}}return elementName};JSXParser.prototype.parseJSXAttributeName=function(){var node=this.createJSXNode();var attributeName;var identifier=this.parseJSXIdentifier();if(this.matchJSX(":")){var namespace=identifier;this.expectJSX(":");var name_2=this.parseJSXIdentifier();attributeName=this.finalize(node,new JSXNode.JSXNamespacedName(namespace,name_2))}else{attributeName=identifier}return attributeName};JSXParser.prototype.parseJSXStringLiteralAttribute=function(){var node=this.createJSXNode();var token=this.nextJSXToken();if(token.type!==token_1.Token.StringLiteral){this.throwUnexpectedToken(token)}var raw=this.getTokenRaw(token);return this.finalize(node,new Node.Literal(token.value,raw))};JSXParser.prototype.parseJSXExpressionAttribute=function(){var node=this.createJSXNode();this.expectJSX("{");this.finishJSX();if(this.match("}")){this.tolerateError("JSX attributes must only be assigned a non-empty expression")}var expression=this.parseAssignmentExpression();this.reenterJSX();return this.finalize(node,new JSXNode.JSXExpressionContainer(expression))};JSXParser.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()};JSXParser.prototype.parseJSXNameValueAttribute=function(){var node=this.createJSXNode();var name=this.parseJSXAttributeName();var value=null;if(this.matchJSX("=")){this.expectJSX("=");value=this.parseJSXAttributeValue()}return this.finalize(node,new JSXNode.JSXAttribute(name,value))};JSXParser.prototype.parseJSXSpreadAttribute=function(){var node=this.createJSXNode();this.expectJSX("{");this.expectJSX("...");this.finishJSX();var argument=this.parseAssignmentExpression();this.reenterJSX();return this.finalize(node,new JSXNode.JSXSpreadAttribute(argument))};JSXParser.prototype.parseJSXAttributes=function(){var attributes=[];while(!this.matchJSX("/")&&!this.matchJSX(">")){var attribute=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();attributes.push(attribute)}return attributes};JSXParser.prototype.parseJSXOpeningElement=function(){var node=this.createJSXNode();this.expectJSX("<");var name=this.parseJSXElementName();var attributes=this.parseJSXAttributes();var selfClosing=this.matchJSX("/");if(selfClosing){this.expectJSX("/")}this.expectJSX(">");return this.finalize(node,new JSXNode.JSXOpeningElement(name,selfClosing,attributes))};JSXParser.prototype.parseJSXBoundaryElement=function(){var node=this.createJSXNode();this.expectJSX("<");if(this.matchJSX("/")){this.expectJSX("/");var name_3=this.parseJSXElementName();this.expectJSX(">");return this.finalize(node,new JSXNode.JSXClosingElement(name_3))}var name=this.parseJSXElementName();var attributes=this.parseJSXAttributes();var selfClosing=this.matchJSX("/");if(selfClosing){this.expectJSX("/")}this.expectJSX(">");return this.finalize(node,new JSXNode.JSXOpeningElement(name,selfClosing,attributes))};JSXParser.prototype.parseJSXEmptyExpression=function(){var node=this.createJSXChildNode();this.collectComments();this.lastMarker.index=this.scanner.index;this.lastMarker.lineNumber=this.scanner.lineNumber;this.lastMarker.lineStart=this.scanner.lineStart;return this.finalize(node,new JSXNode.JSXEmptyExpression)};JSXParser.prototype.parseJSXExpressionContainer=function(){var node=this.createJSXNode();this.expectJSX("{");var expression;if(this.matchJSX("}")){expression=this.parseJSXEmptyExpression();this.expectJSX("}")}else{this.finishJSX();expression=this.parseAssignmentExpression();this.reenterJSX()}return this.finalize(node,new JSXNode.JSXExpressionContainer(expression))};JSXParser.prototype.parseJSXChildren=function(){var children=[];while(!this.scanner.eof()){var node=this.createJSXChildNode();var token=this.nextJSXText();if(token.start<token.end){var raw=this.getTokenRaw(token);var child=this.finalize(node,new JSXNode.JSXText(token.value,raw));children.push(child)}if(this.scanner.source[this.scanner.index]==="{"){var container=this.parseJSXExpressionContainer();children.push(container)}else{break}}return children};JSXParser.prototype.parseComplexJSXElement=function(el){var stack=[];while(!this.scanner.eof()){el.children=el.children.concat(this.parseJSXChildren());var node=this.createJSXChildNode();var element=this.parseJSXBoundaryElement();if(element.type===jsx_syntax_1.JSXSyntax.JSXOpeningElement){var opening=element;if(opening.selfClosing){var child=this.finalize(node,new JSXNode.JSXElement(opening,[],null));el.children.push(child)}else{stack.push(el);el={node:node,opening:opening,closing:null,children:[]}}}if(element.type===jsx_syntax_1.JSXSyntax.JSXClosingElement){el.closing=element;var open_1=getQualifiedElementName(el.opening.name);var close_1=getQualifiedElementName(el.closing.name);if(open_1!==close_1){this.tolerateError("Expected corresponding JSX closing tag for %0",open_1)}if(stack.length>0){var child=this.finalize(el.node,new JSXNode.JSXElement(el.opening,el.children,el.closing));el=stack.pop();el.children.push(child)}else{break}}}return el};JSXParser.prototype.parseJSXElement=function(){var node=this.createJSXNode();var opening=this.parseJSXOpeningElement();var children=[];var closing=null;if(!opening.selfClosing){var el=this.parseComplexJSXElement({node:node,opening:opening,closing:closing,children:children});children=el.children;closing=el.closing}return this.finalize(node,new JSXNode.JSXElement(opening,children,closing))};JSXParser.prototype.parseJSXRoot=function(){if(this.config.tokens){this.tokens.pop()}this.startJSX();var element=this.parseJSXElement();this.finishJSX();return element};return JSXParser}(parser_1.Parser);exports.JSXParser=JSXParser},function(module,exports){"use strict";exports.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",frasl:"\u2044",euro:"\u20ac",image:"\u2111",weierp:"\u2118",real:"\u211c",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lArr:"\u21d0",uArr:"\u21d1",rArr:"\u21d2",dArr:"\u21d3",hArr:"\u21d4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",lang:"\u27e8",rang:"\u27e9"}},function(module,exports){"use strict";exports.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(module,exports,__webpack_require__){"use strict";var jsx_syntax_1=__webpack_require__(13);var JSXClosingElement=function(){function JSXClosingElement(name){this.type=jsx_syntax_1.JSXSyntax.JSXClosingElement;this.name=name}return JSXClosingElement}();exports.JSXClosingElement=JSXClosingElement;var JSXElement=function(){function JSXElement(openingElement,children,closingElement){this.type=jsx_syntax_1.JSXSyntax.JSXElement;this.openingElement=openingElement;this.children=children;this.closingElement=closingElement}return JSXElement}();exports.JSXElement=JSXElement;var JSXEmptyExpression=function(){function JSXEmptyExpression(){this.type=jsx_syntax_1.JSXSyntax.JSXEmptyExpression}return JSXEmptyExpression}();exports.JSXEmptyExpression=JSXEmptyExpression;var JSXExpressionContainer=function(){function JSXExpressionContainer(expression){this.type=jsx_syntax_1.JSXSyntax.JSXExpressionContainer;this.expression=expression}return JSXExpressionContainer}();exports.JSXExpressionContainer=JSXExpressionContainer;var JSXIdentifier=function(){function JSXIdentifier(name){this.type=jsx_syntax_1.JSXSyntax.JSXIdentifier;this.name=name}return JSXIdentifier}();exports.JSXIdentifier=JSXIdentifier;var JSXMemberExpression=function(){function JSXMemberExpression(object,property){this.type=jsx_syntax_1.JSXSyntax.JSXMemberExpression;this.object=object;this.property=property}return JSXMemberExpression}();exports.JSXMemberExpression=JSXMemberExpression;var JSXAttribute=function(){function JSXAttribute(name,value){this.type=jsx_syntax_1.JSXSyntax.JSXAttribute;this.name=name;this.value=value}return JSXAttribute}();exports.JSXAttribute=JSXAttribute;var JSXNamespacedName=function(){function JSXNamespacedName(namespace,name){this.type=jsx_syntax_1.JSXSyntax.JSXNamespacedName;this.namespace=namespace;this.name=name}return JSXNamespacedName}();exports.JSXNamespacedName=JSXNamespacedName;var JSXOpeningElement=function(){function JSXOpeningElement(name,selfClosing,attributes){this.type=jsx_syntax_1.JSXSyntax.JSXOpeningElement;this.name=name;this.selfClosing=selfClosing;this.attributes=attributes}return JSXOpeningElement}();exports.JSXOpeningElement=JSXOpeningElement;var JSXSpreadAttribute=function(){function JSXSpreadAttribute(argument){this.type=jsx_syntax_1.JSXSyntax.JSXSpreadAttribute;this.argument=argument}return JSXSpreadAttribute}();exports.JSXSpreadAttribute=JSXSpreadAttribute;var JSXText=function(){function JSXText(value,raw){this.type=jsx_syntax_1.JSXSyntax.JSXText;this.value=value;this.raw=raw}return JSXText}();exports.JSXText=JSXText},function(module,exports,__webpack_require__){"use strict";var scanner_1=__webpack_require__(8);var error_handler_1=__webpack_require__(6);var token_1=__webpack_require__(7);var Reader=function(){function Reader(){this.values=[];this.curly=this.paren=-1}Reader.prototype.beforeFunctionExpression=function(t){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(t)>=0};Reader.prototype.isRegexStart=function(){var previous=this.values[this.values.length-1];var regex=previous!==null;switch(previous){case"this":case"]":regex=false;break;case")":var check=this.values[this.paren-1];regex=check==="if"||check==="while"||check==="for"||check==="with";break;case"}":regex=false;if(this.values[this.curly-3]==="function"){var check_1=this.values[this.curly-4];regex=check_1?!this.beforeFunctionExpression(check_1):false}else if(this.values[this.curly-4]==="function"){var check_2=this.values[this.curly-5];regex=check_2?!this.beforeFunctionExpression(check_2):true}}return regex};Reader.prototype.push=function(token){if(token.type===token_1.Token.Punctuator||token.type===token_1.Token.Keyword){if(token.value==="{"){this.curly=this.values.length}else if(token.value==="("){this.paren=this.values.length}this.values.push(token.value)}else{this.values.push(null)}};return Reader}();var Tokenizer=function(){function Tokenizer(code,config){this.errorHandler=new error_handler_1.ErrorHandler;this.errorHandler.tolerant=config?typeof config.tolerant==="boolean"&&config.tolerant:false;this.scanner=new scanner_1.Scanner(code,this.errorHandler);this.scanner.trackComment=config?typeof config.comment==="boolean"&&config.comment:false;this.trackRange=config?typeof config.range==="boolean"&&config.range:false;this.trackLoc=config?typeof config.loc==="boolean"&&config.loc:false;this.buffer=[];this.reader=new Reader}Tokenizer.prototype.errors=function(){return this.errorHandler.errors};Tokenizer.prototype.getNextToken=function(){if(this.buffer.length===0){var comments=this.scanner.scanComments();if(this.scanner.trackComment){for(var i=0;i<comments.length;++i){var e=comments[i];var comment=void 0;var value=this.scanner.source.slice(e.slice[0],e.slice[1]);comment={type:e.multiLine?"BlockComment":"LineComment",value:value};if(this.trackRange){comment.range=e.range}if(this.trackLoc){comment.loc=e.loc}this.buffer.push(comment)}}if(!this.scanner.eof()){var loc=void 0;if(this.trackLoc){loc={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}}}var token=void 0;if(this.scanner.source[this.scanner.index]==="/"){token=this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.scanPunctuator()}else{token=this.scanner.lex()}this.reader.push(token);var entry=void 0;entry={type:token_1.TokenName[token.type],value:this.scanner.source.slice(token.start,token.end)};if(this.trackRange){entry.range=[token.start,token.end]}if(this.trackLoc){loc.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};entry.loc=loc}if(token.regex){entry.regex=token.regex}this.buffer.push(entry)}}return this.buffer.shift()};return Tokenizer}();exports.Tokenizer=Tokenizer}])})},{}],127:[function(require,module,exports){(function(){"use strict";var escope,estraverse,esutils,utility,version,assert,Syntax,Map;escope=require("escope");estraverse=require("estraverse");esutils=require("esutils");utility=require("./utility");Map=require("./map");version=require("../package.json").version;Syntax=estraverse.Syntax;assert=function assert(cond,message){if(!cond){throw new Error(message)}};if(version.indexOf("-dev",version.length-4)===-1){assert=function(){}}function NameGenerator(scope,options){this._scope=scope;this._functionName="";if(!options.distinguishFunctionExpressionScope&&this._scope.upper&&this._scope.upper.functionExpressionScope){this._functionName=this._scope.upper.block.id.name}}NameGenerator.prototype.passAsUnique=function passAsUnique(name){var i,iz;if(this._functionName===name){return false}if(esutils.keyword.isKeywordES5(name,true)||esutils.keyword.isRestrictedWord(name)){return false}if(this._scope.taints.has(name)){return false}for(i=0,iz=this._scope.through.length;i<iz;++i){if(this._scope.through[i].identifier.name===name){return false}}return true};NameGenerator.prototype.generateName=function generateName(tip){do{tip=utility.generateNextName(tip)}while(!this.passAsUnique(tip));return tip};function run(scope,options){var i,iz,j,jz,variable,name,def,ref,generator;generator=new NameGenerator(scope,options);if(scope.isStatic()){name="9";scope.variables.sort(function(a,b){if(a.tainted){return 1}if(b.tainted){return-1}return b.identifiers.length+b.references.length-(a.identifiers.length+a.references.length)});for(i=0,iz=scope.variables.length;i<iz;++i){variable=scope.variables[i];if(variable.tainted){continue}if(variable.identifiers.length===0){continue}name=generator.generateName(name);for(j=0,jz=variable.identifiers.length;j<jz;++j){def=variable.identifiers[j];def.name=name}for(j=0,jz=variable.references.length;j<jz;++j){ref=variable.references[j];ref.identifier.name=name}}}}function Label(node,upper){this.node=node;this.upper=upper;this.users=[];this.names=new Map;this.name=null}Label.prototype.mangle=function(){var tip,current,i,iz;tip="9";for(current=this.upper;current;current=current.upper){if(current.name!==null){this.names.set(current.name,true)}}do{tip=utility.generateNextName(tip)}while(this.names.has(tip));this.name=tip;for(current=this.upper;current;current=current.upper){current.names.set(tip,true)}this.node.label.name=tip;for(i=0,iz=this.users.length;i<iz;++i){this.users[i].label.name=tip}};function LabelScope(upper){this.map=new Map;this.upper=upper;this.label=null;this.labels=[]}LabelScope.prototype.register=function register(node){var name;assert(node.type===Syntax.LabeledStatement,"node should be LabeledStatement");this.label=new Label(node,this.label);this.labels.push(this.label);name=node.label.name;assert(!this.map.has(name),"duplicate label is found");this.map.set(name,this.label)};LabelScope.prototype.unregister=function unregister(node){var name,ref;if(node.type!==Syntax.LabeledStatement){return}name=node.label.name;ref=this.map.get(name);this.map["delete"](name);this.label=ref.upper};LabelScope.prototype.resolve=function resolve(node){var name;if(node.label){name=node.label.name;assert(this.map.has(name),"unresolved label");this.map.get(name).users.push(node)}};LabelScope.prototype.close=function close(){var i,iz,label;this.labels.sort(function(lhs,rhs){return rhs.users.length-lhs.users.length});for(i=0,iz=this.labels.length;i<iz;++i){label=this.labels[i];label.mangle()}return this.upper};function mangleLabels(tree){var labelScope;estraverse.traverse(tree,{enter:function(node){if(escope.Scope.isVariableScopeRequired(node)){labelScope=new LabelScope(labelScope);return}switch(node.type){case Syntax.LabeledStatement:labelScope.register(node);break;case Syntax.BreakStatement:case Syntax.ContinueStatement:labelScope.resolve(node);break}},leave:function(node){labelScope.unregister(node);if(escope.Scope.isVariableScopeRequired(node)){labelScope=labelScope.close()}}});return tree}function mangle(tree,options){var result,manager,i,iz;if(options==null){options={destructive:true}}result=options.destructive==null||options.destructive?tree:utility.deepCopy(tree);manager=escope.analyze(result,{directive:true});for(i=0,iz=manager.scopes.length;i<iz;++i){run(manager.scopes[i],options)}return mangleLabels(result)}exports.mangle=mangle;exports.version=version;exports.generateNextName=utility.generateNextName})()},{"../package.json":132,"./map":128,"./utility":129,escope:81,estraverse:130,esutils:138}],128:[function(require,module,exports){arguments[4][88][0].apply(exports,arguments)},{dup:88}],129:[function(require,module,exports){(function(){"use strict";var isArray,NameSequence,ZeroSequenceCache;isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){function deepCopyInternal(obj,result){var key,val;for(key in obj){if(key.lastIndexOf("__",0)===0){continue}if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){if(val instanceof RegExp){val=new RegExp(val)}else{val=deepCopyInternal(val,isArray(val)?[]:{})}}result[key]=val}}return result}return deepCopyInternal(obj,isArray(obj)?[]:{})}function stringRepeat(str,num){var result="";for(num|=0;num>0;num>>>=1,str+=str){if(num&1){result+=str}}return result}ZeroSequenceCache=[];function zeroSequence(num){var res=ZeroSequenceCache[num];if(res!==undefined){return res}res=stringRepeat("0",num);ZeroSequenceCache[num]=res;return res}NameSequence="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$".split("");function generateNextName(name){var ch,index,cur;cur=name.length-1;do{ch=name.charAt(cur);index=NameSequence.indexOf(ch);if(index!==NameSequence.length-1){return name.substring(0,cur)+NameSequence[index+1]+zeroSequence(name.length-(cur+1))}--cur}while(cur>=0);return"a"+zeroSequence(name.length)}exports.generateNextName=generateNextName;exports.deepCopy=deepCopy})()},{}],130:[function(require,module,exports){(function clone(exports){"use strict";var Syntax,isArray,VisitorOption,VisitorKeys,objectCreate,objectKeys,BREAK,SKIP,REMOVE;function ignoreJSHintError(){}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){var ret={},key,val;for(key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){ret[key]=deepCopy(val)}else{ret[key]=val}}}return ret}function shallowCopy(obj){var ret={},key;for(key in obj){if(obj.hasOwnProperty(key)){ret[key]=obj[key]}}return ret}ignoreJSHintError(shallowCopy);function upperBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){len=diff}else{i=current+1;len-=diff+1}}return i}function lowerBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){i=current+1;len-=diff+1}else{len=diff}}return i}ignoreJSHintError(lowerBound);objectCreate=Object.create||function(){function F(){}return function(o){F.prototype=o;return new F}}();objectKeys=Object.keys||function(o){var keys=[],key;for(key in o){keys.push(key)}return keys};function extend(to,from){var keys=objectKeys(from),key,i,len;for(i=0,len=keys.length;i<len;i+=1){key=keys[i];to[key]=from[key]}return to}Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};VisitorKeys={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};BREAK={};SKIP={};REMOVE={};VisitorOption={Break:BREAK,Skip:SKIP,Remove:REMOVE};function Reference(parent,key){this.parent=parent;this.key=key}Reference.prototype.replace=function replace(node){this.parent[this.key]=node};Reference.prototype.remove=function remove(){if(isArray(this.parent)){this.parent.splice(this.key,1);return true}else{this.replace(null);return false}};function Element(node,path,wrap,ref){this.node=node;this.path=path;this.wrap=wrap;this.ref=ref}function Controller(){}Controller.prototype.path=function path(){var i,iz,j,jz,result,element;function addToPath(result,path){if(isArray(path)){for(j=0,jz=path.length;j<jz;++j){result.push(path[j])}}else{result.push(path)}}if(!this.__current.path){return null}result=[];for(i=2,iz=this.__leavelist.length;i<iz;++i){element=this.__leavelist[i];addToPath(result,element.path)}addToPath(result,this.__current.path);return result};Controller.prototype.type=function(){var node=this.current();return node.type||this.__current.wrap};Controller.prototype.parents=function parents(){var i,iz,result;result=[];for(i=1,iz=this.__leavelist.length;i<iz;++i){result.push(this.__leavelist[i].node)}return result};Controller.prototype.current=function current(){return this.__current.node};Controller.prototype.__execute=function __execute(callback,element){var previous,result;result=undefined;previous=this.__current;this.__current=element;this.__state=null;if(callback){result=callback.call(this,element.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=previous;return result};Controller.prototype.notify=function notify(flag){this.__state=flag};Controller.prototype.skip=function(){this.notify(SKIP)};Controller.prototype["break"]=function(){this.notify(BREAK)};Controller.prototype.remove=function(){this.notify(REMOVE)};Controller.prototype.__initialize=function(root,visitor){this.visitor=visitor;this.root=root;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null;this.__fallback=visitor.fallback==="iteration";this.__keys=VisitorKeys;if(visitor.keys){this.__keys=extend(objectCreate(this.__keys),visitor.keys)}};function isNode(node){if(node==null){return false}return typeof node==="object"&&typeof node.type==="string"}function isProperty(nodeType,key){return(nodeType===Syntax.ObjectExpression||nodeType===Syntax.ObjectPattern)&&"properties"===key}Controller.prototype.traverse=function traverse(root,visitor){var worklist,leavelist,element,node,nodeType,ret,key,current,current2,candidates,candidate,sentinel;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;worklist.push(new Element(root,null,null,null));leavelist.push(new Element(null,null,null,null));while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();ret=this.__execute(visitor.leave,element);if(this.__state===BREAK||ret===BREAK){return}continue}if(element.node){ret=this.__execute(visitor.enter,element);if(this.__state===BREAK||ret===BREAK){return}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||ret===SKIP){continue}node=element.node;nodeType=node.type||element.wrap;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",null)}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,null)}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,null))}}}}};Controller.prototype.replace=function replace(root,visitor){function removeElem(element){var i,key,nextElem,parent;if(element.ref.remove()){key=element.ref.key;parent=element.ref.parent;i=worklist.length;while(i--){nextElem=worklist[i];if(nextElem.ref&&nextElem.ref.parent===parent){if(nextElem.ref.key<key){break}--nextElem.ref.key}}}}var worklist,leavelist,node,nodeType,target,element,current,current2,candidates,candidate,sentinel,outer,key;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;outer={root:root};element=new Element(root,null,null,new Reference(outer,"root"));worklist.push(element);leavelist.push(element);while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();target=this.__execute(visitor.leave,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target)}if(this.__state===REMOVE||target===REMOVE){removeElem(element)}if(this.__state===BREAK||target===BREAK){return outer.root}continue}target=this.__execute(visitor.enter,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target);element.node=target}if(this.__state===REMOVE||target===REMOVE){removeElem(element);element.node=null}if(this.__state===BREAK||target===BREAK){return outer.root}node=element.node;if(!node){continue}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||target===SKIP){continue}nodeType=node.type||element.wrap;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",new Reference(candidate,current2))}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,new Reference(candidate,current2))}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,new Reference(node,key)))}}}return outer.root};function traverse(root,visitor){var controller=new Controller;return controller.traverse(root,visitor)}function replace(root,visitor){var controller=new Controller;return controller.replace(root,visitor)}function extendCommentRange(comment,tokens){var target;target=upperBound(tokens,function search(token){return token.range[0]>comment.range[0]});comment.extendedRange=[comment.range[0],comment.range[1]];if(target!==tokens.length){comment.extendedRange[1]=tokens[target].range[0]}target-=1;if(target>=0){comment.extendedRange[0]=tokens[target].range[1]}return comment}function attachComments(tree,providedComments,tokens){var comments=[],comment,len,i,cursor;if(!tree.range){throw new Error("attachComments needs range information")}if(!tokens.length){if(providedComments.length){for(i=0,len=providedComments.length;i<len;i+=1){comment=deepCopy(providedComments[i]);comment.extendedRange=[0,tree.range[0]];comments.push(comment)}tree.leadingComments=comments}return tree}for(i=0,len=providedComments.length;i<len;i+=1){comments.push(extendCommentRange(deepCopy(providedComments[i]),tokens))}cursor=0;traverse(tree,{enter:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(comment.extendedRange[1]>node.range[0]){break}if(comment.extendedRange[1]===node.range[0]){if(!node.leadingComments){node.leadingComments=[]}node.leadingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});cursor=0;traverse(tree,{leave:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(node.range[1]<comment.extendedRange[0]){break}if(node.range[1]===comment.extendedRange[0]){if(!node.trailingComments){node.trailingComments=[]}node.trailingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});return tree}exports.version=require("./package.json").version;exports.Syntax=Syntax;exports.traverse=traverse;exports.replace=replace;exports.attachComments=attachComments;exports.VisitorKeys=VisitorKeys;exports.VisitorOption=VisitorOption;exports.Controller=Controller;exports.cloneEnvironment=function(){return clone({})};return exports})(exports)},{"./package.json":131}],131:[function(require,module,exports){module.exports={_args:[["estraverse@4.1.1","/Users/lestera/Documents/git/webppl"]],_from:"estraverse@4.1.1",_id:"estraverse@4.1.1",_inBundle:false,_integrity:"sha1-9srKcokzqFDvkGYdDheYK6RxEaI=",_location:"/esshorten/estraverse",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"estraverse@4.1.1",name:"estraverse",escapedName:"estraverse",rawSpec:"4.1.1",saveSpec:null,fetchSpec:"4.1.1"},_requiredBy:["/esshorten"],_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-4.1.1.tgz",_spec:"4.1.1",_where:"/Users/lestera/Documents/git/webppl",bugs:{url:"https://github.com/estools/estraverse/issues"},description:"ECMAScript JS AST traversal functions",devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},engines:{node:">=0.10.0"},homepage:"https://github.com/estools/estraverse",license:"BSD-2-Clause",main:"estraverse.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"estraverse",repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},scripts:{lint:"jshint estraverse.js",test:"npm run-script lint && npm run-script unit-test","unit-test":"mocha --compilers coffee:coffee-script/register"},version:"4.1.1"}},{}],132:[function(require,module,exports){module.exports={_args:[["esshorten@1.1.1","/Users/lestera/Documents/git/webppl"]],_from:"esshorten@1.1.1",_id:"esshorten@1.1.1",_inBundle:false,_integrity:"sha1-F0+Wt8wmfkaHLYFOfbfCkL3/Yak=",_location:"/esshorten",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"esshorten@1.1.1",name:"esshorten",escapedName:"esshorten",rawSpec:"1.1.1",saveSpec:null,fetchSpec:"1.1.1"},_requiredBy:["/esmangle"],_resolved:"https://registry.npmjs.org/esshorten/-/esshorten-1.1.1.tgz",_spec:"1.1.1",_where:"/Users/lestera/Documents/git/webppl",bugs:{url:"https://github.com/estools/esshorten/issues"},dependencies:{escope:"~1.0.1",estraverse:"~4.1.1",esutils:"~2.0.2"},description:"Shorten (mangle) names in JavaScript code",devDependencies:{chai:"*","coffee-script":"~1.10.0","commonjs-everywhere":"~0.9.7",gulp:"~3.9.0","gulp-jshint":"~1.11.2","gulp-mocha":"~2.1.3","jshint-stylish":"~2.0.1"},directories:{lib:"./lib"},engines:{node:">=0.6.0"},homepage:"https://github.com/estools/esshorten#readme",licenses:[{type:"BSD",url:"http://github.com/estools/esshorten/raw/master/LICENSE.BSD"}],main:"lib/esshorten.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"esshorten",repository:{type:"git",url:"git+ssh://git@github.com/estools/esshorten.git"},scripts:{lint:"gulp lint",test:"gulp travis","unit-test":"gulp test"},version:"1.1.1"}},{}],133:[function(require,module,exports){(function clone(exports){"use strict";var Syntax,isArray,VisitorOption,VisitorKeys,objectCreate,objectKeys,BREAK,SKIP,REMOVE;function ignoreJSHintError(){}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){var ret={},key,val;for(key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){ret[key]=deepCopy(val)}else{ret[key]=val}}}return ret}function shallowCopy(obj){var ret={},key;for(key in obj){if(obj.hasOwnProperty(key)){ret[key]=obj[key]}}return ret}ignoreJSHintError(shallowCopy);function upperBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){len=diff}else{i=current+1;len-=diff+1}}return i}function lowerBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){i=current+1;len-=diff+1}else{len=diff}}return i}ignoreJSHintError(lowerBound);objectCreate=Object.create||function(){function F(){}return function(o){F.prototype=o;return new F}}();objectKeys=Object.keys||function(o){var keys=[],key;for(key in o){keys.push(key)}return keys};function extend(to,from){var keys=objectKeys(from),key,i,len;for(i=0,len=keys.length;i<len;i+=1){key=keys[i];to[key]=from[key]}return to}Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};VisitorKeys={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};BREAK={};SKIP={};REMOVE={};VisitorOption={Break:BREAK,Skip:SKIP,Remove:REMOVE};function Reference(parent,key){this.parent=parent;this.key=key}Reference.prototype.replace=function replace(node){this.parent[this.key]=node};Reference.prototype.remove=function remove(){if(isArray(this.parent)){this.parent.splice(this.key,1);return true}else{this.replace(null);return false}};function Element(node,path,wrap,ref){this.node=node;this.path=path;this.wrap=wrap;this.ref=ref}function Controller(){}Controller.prototype.path=function path(){var i,iz,j,jz,result,element;function addToPath(result,path){if(isArray(path)){for(j=0,jz=path.length;j<jz;++j){result.push(path[j])}}else{result.push(path)}}if(!this.__current.path){return null}result=[];for(i=2,iz=this.__leavelist.length;i<iz;++i){element=this.__leavelist[i];addToPath(result,element.path)}addToPath(result,this.__current.path);return result};Controller.prototype.type=function(){var node=this.current();return node.type||this.__current.wrap};Controller.prototype.parents=function parents(){var i,iz,result;result=[];for(i=1,iz=this.__leavelist.length;i<iz;++i){result.push(this.__leavelist[i].node)}return result};Controller.prototype.current=function current(){return this.__current.node};Controller.prototype.__execute=function __execute(callback,element){var previous,result;result=undefined;previous=this.__current;this.__current=element;this.__state=null;if(callback){result=callback.call(this,element.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=previous;return result};Controller.prototype.notify=function notify(flag){this.__state=flag};Controller.prototype.skip=function(){this.notify(SKIP)};Controller.prototype["break"]=function(){this.notify(BREAK)};Controller.prototype.remove=function(){this.notify(REMOVE)};Controller.prototype.__initialize=function(root,visitor){this.visitor=visitor;this.root=root;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null;this.__fallback=null;if(visitor.fallback==="iteration"){this.__fallback=objectKeys}else if(typeof visitor.fallback==="function"){this.__fallback=visitor.fallback}this.__keys=VisitorKeys;if(visitor.keys){this.__keys=extend(objectCreate(this.__keys),visitor.keys)}};function isNode(node){if(node==null){return false}return typeof node==="object"&&typeof node.type==="string"}function isProperty(nodeType,key){return(nodeType===Syntax.ObjectExpression||nodeType===Syntax.ObjectPattern)&&"properties"===key}Controller.prototype.traverse=function traverse(root,visitor){var worklist,leavelist,element,node,nodeType,ret,key,current,current2,candidates,candidate,sentinel;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;worklist.push(new Element(root,null,null,null));leavelist.push(new Element(null,null,null,null));while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();ret=this.__execute(visitor.leave,element);if(this.__state===BREAK||ret===BREAK){return}continue}if(element.node){ret=this.__execute(visitor.enter,element);if(this.__state===BREAK||ret===BREAK){return}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||ret===SKIP){continue}node=element.node;nodeType=node.type||element.wrap;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=this.__fallback(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",null)}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,null)}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,null))}}}}};Controller.prototype.replace=function replace(root,visitor){var worklist,leavelist,node,nodeType,target,element,current,current2,candidates,candidate,sentinel,outer,key;function removeElem(element){var i,key,nextElem,parent;if(element.ref.remove()){key=element.ref.key;parent=element.ref.parent;i=worklist.length;while(i--){nextElem=worklist[i];if(nextElem.ref&&nextElem.ref.parent===parent){if(nextElem.ref.key<key){break}--nextElem.ref.key}}}}this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;outer={root:root};element=new Element(root,null,null,new Reference(outer,"root"));worklist.push(element);leavelist.push(element);while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();target=this.__execute(visitor.leave,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target)}if(this.__state===REMOVE||target===REMOVE){removeElem(element)}if(this.__state===BREAK||target===BREAK){return outer.root}continue}target=this.__execute(visitor.enter,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target);element.node=target}if(this.__state===REMOVE||target===REMOVE){removeElem(element);element.node=null}if(this.__state===BREAK||target===BREAK){return outer.root}node=element.node;if(!node){continue}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||target===SKIP){continue}nodeType=node.type||element.wrap;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=this.__fallback(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",new Reference(candidate,current2))}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,new Reference(candidate,current2))}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,new Reference(node,key)))}}}return outer.root};function traverse(root,visitor){var controller=new Controller;return controller.traverse(root,visitor)}function replace(root,visitor){var controller=new Controller;return controller.replace(root,visitor)}function extendCommentRange(comment,tokens){var target;target=upperBound(tokens,function search(token){return token.range[0]>comment.range[0]});comment.extendedRange=[comment.range[0],comment.range[1]];if(target!==tokens.length){comment.extendedRange[1]=tokens[target].range[0]}target-=1;if(target>=0){comment.extendedRange[0]=tokens[target].range[1]}return comment}function attachComments(tree,providedComments,tokens){var comments=[],comment,len,i,cursor;if(!tree.range){throw new Error("attachComments needs range information")}if(!tokens.length){if(providedComments.length){for(i=0,len=providedComments.length;i<len;i+=1){comment=deepCopy(providedComments[i]);comment.extendedRange=[0,tree.range[0]];comments.push(comment)}tree.leadingComments=comments}return tree}for(i=0,len=providedComments.length;i<len;i+=1){comments.push(extendCommentRange(deepCopy(providedComments[i]),tokens))}cursor=0;traverse(tree,{enter:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(comment.extendedRange[1]>node.range[0]){break}if(comment.extendedRange[1]===node.range[0]){if(!node.leadingComments){node.leadingComments=[]}node.leadingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});cursor=0;traverse(tree,{leave:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(node.range[1]<comment.extendedRange[0]){break}if(node.range[1]===comment.extendedRange[0]){if(!node.trailingComments){node.trailingComments=[]}node.trailingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});return tree}exports.version=require("./package.json").version;exports.Syntax=Syntax;exports.traverse=traverse;exports.replace=replace;exports.attachComments=attachComments;exports.VisitorKeys=VisitorKeys;exports.VisitorOption=VisitorOption;exports.Controller=Controller;exports.cloneEnvironment=function(){return clone({})};return exports})(exports)},{"./package.json":134}],134:[function(require,module,exports){module.exports={_args:[["estraverse@4.2.0","/Users/lestera/Documents/git/webppl"]],_from:"estraverse@4.2.0",_id:"estraverse@4.2.0",_inBundle:false,_integrity:"sha1-De4/7TH81GlhjOc0IJn8GvoL2xM=",_location:"/estraverse",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"estraverse@4.2.0",name:"estraverse",escapedName:"estraverse",rawSpec:"4.2.0",saveSpec:null,fetchSpec:"4.2.0"},_requiredBy:["/","/escodegen","/eslint-scope","/esquery","/esrecurse","/estemplate","/grunt-eslint/escope","/grunt-eslint/eslint"],_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-4.2.0.tgz",_spec:"4.2.0",_where:"/Users/lestera/Documents/git/webppl",bugs:{url:"https://github.com/estools/estraverse/issues"},description:"ECMAScript JS AST traversal functions",devDependencies:{"babel-preset-es2015":"^6.3.13","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},engines:{node:">=0.10.0"},homepage:"https://github.com/estools/estraverse",license:"BSD-2-Clause",main:"estraverse.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"estraverse",repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},scripts:{lint:"jshint estraverse.js",test:"npm run-script lint && npm run-script unit-test","unit-test":"mocha --compilers js:babel-register"},version:"4.2.0"}},{}],135:[function(require,module,exports){(function(){"use strict";function isExpression(node){if(node==null){return false}switch(node.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return true}return false}function isIterationStatement(node){if(node==null){return false}switch(node.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return true}return false}function isStatement(node){if(node==null){return false}switch(node.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return true}return false}function isSourceElement(node){return isStatement(node)||node!=null&&node.type==="FunctionDeclaration"}function trailingStatement(node){switch(node.type){case"IfStatement":if(node.alternate!=null){return node.alternate}return node.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return node.body}return null}function isProblematicIfStatement(node){var current;if(node.type!=="IfStatement"){return false}if(node.alternate==null){return false}current=node.consequent;do{if(current.type==="IfStatement"){if(current.alternate==null){return true}}current=trailingStatement(current)}while(current);return false}module.exports={isExpression:isExpression,isStatement:isStatement,isIterationStatement:isIterationStatement,isSourceElement:isSourceElement,isProblematicIfStatement:isProblematicIfStatement,trailingStatement:trailingStatement}})()},{}],136:[function(require,module,exports){(function(){"use strict";var ES6Regex,ES5Regex,NON_ASCII_WHITESPACES,IDENTIFIER_START,IDENTIFIER_PART,ch;ES5Regex={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};ES6Regex={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function isDecimalDigit(ch){return 48<=ch&&ch<=57}function isHexDigit(ch){return 48<=ch&&ch<=57||97<=ch&&ch<=102||65<=ch&&ch<=70}function isOctalDigit(ch){return ch>=48&&ch<=55}NON_ASCII_WHITESPACES=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch>=5760&&NON_ASCII_WHITESPACES.indexOf(ch)>=0}function isLineTerminator(ch){return ch===10||ch===13||ch===8232||ch===8233}function fromCodePoint(cp){if(cp<=65535){return String.fromCharCode(cp)}var cu1=String.fromCharCode(Math.floor((cp-65536)/1024)+55296);var cu2=String.fromCharCode((cp-65536)%1024+56320);return cu1+cu2}IDENTIFIER_START=new Array(128);for(ch=0;ch<128;++ch){IDENTIFIER_START[ch]=ch>=97&&ch<=122||ch>=65&&ch<=90||ch===36||ch===95}IDENTIFIER_PART=new Array(128);for(ch=0;ch<128;++ch){IDENTIFIER_PART[ch]=ch>=97&&ch<=122||ch>=65&&ch<=90||ch>=48&&ch<=57||ch===36||ch===95}function isIdentifierStartES5(ch){return ch<128?IDENTIFIER_START[ch]:ES5Regex.NonAsciiIdentifierStart.test(fromCodePoint(ch))}function isIdentifierPartES5(ch){return ch<128?IDENTIFIER_PART[ch]:ES5Regex.NonAsciiIdentifierPart.test(fromCodePoint(ch))}function isIdentifierStartES6(ch){return ch<128?IDENTIFIER_START[ch]:ES6Regex.NonAsciiIdentifierStart.test(fromCodePoint(ch))}function isIdentifierPartES6(ch){return ch<128?IDENTIFIER_PART[ch]:ES6Regex.NonAsciiIdentifierPart.test(fromCodePoint(ch))}module.exports={isDecimalDigit:isDecimalDigit,isHexDigit:isHexDigit,isOctalDigit:isOctalDigit,isWhiteSpace:isWhiteSpace,isLineTerminator:isLineTerminator,isIdentifierStartES5:isIdentifierStartES5,isIdentifierPartES5:isIdentifierPartES5,isIdentifierStartES6:isIdentifierStartES6,isIdentifierPartES6:isIdentifierPartES6}})()},{}],137:[function(require,module,exports){(function(){"use strict";var code=require("./code");function isStrictModeReservedWordES6(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return true;default:return false}}function isKeywordES5(id,strict){if(!strict&&id==="yield"){return false}return isKeywordES6(id,strict)}function isKeywordES6(id,strict){if(strict&&isStrictModeReservedWordES6(id)){return true}switch(id.length){case 2:return id==="if"||id==="in"||id==="do";case 3:return id==="var"||id==="for"||id==="new"||id==="try";case 4:return id==="this"||id==="else"||id==="case"||id==="void"||id==="with"||id==="enum";case 5:return id==="while"||id==="break"||id==="catch"||id==="throw"||id==="const"||id==="yield"||id==="class"||id==="super";case 6:return id==="return"||id==="typeof"||id==="delete"||id==="switch"||id==="export"||id==="import";case 7:return id==="default"||id==="finally"||id==="extends";case 8:return id==="function"||id==="continue"||id==="debugger";case 10:return id==="instanceof";default:return false}}function isReservedWordES5(id,strict){return id==="null"||id==="true"||id==="false"||isKeywordES5(id,strict)}function isReservedWordES6(id,strict){return id==="null"||id==="true"||id==="false"||isKeywordES6(id,strict)}function isRestrictedWord(id){return id==="eval"||id==="arguments"}function isIdentifierNameES5(id){var i,iz,ch;if(id.length===0){return false}ch=id.charCodeAt(0);if(!code.isIdentifierStartES5(ch)){return false}for(i=1,iz=id.length;i<iz;++i){ch=id.charCodeAt(i);if(!code.isIdentifierPartES5(ch)){return false}}return true}function decodeUtf16(lead,trail){return(lead-55296)*1024+(trail-56320)+65536}function isIdentifierNameES6(id){var i,iz,ch,lowCh,check;if(id.length===0){return false}check=code.isIdentifierStartES6;for(i=0,iz=id.length;i<iz;++i){ch=id.charCodeAt(i);if(55296<=ch&&ch<=56319){++i;if(i>=iz){return false}lowCh=id.charCodeAt(i);if(!(56320<=lowCh&&lowCh<=57343)){return false}ch=decodeUtf16(ch,lowCh)}if(!check(ch)){return false}check=code.isIdentifierPartES6}return true}function isIdentifierES5(id,strict){return isIdentifierNameES5(id)&&!isReservedWordES5(id,strict)}function isIdentifierES6(id,strict){return isIdentifierNameES6(id)&&!isReservedWordES6(id,strict)}module.exports={isKeywordES5:isKeywordES5,isKeywordES6:isKeywordES6,isReservedWordES5:isReservedWordES5,isReservedWordES6:isReservedWordES6,isRestrictedWord:isRestrictedWord,isIdentifierNameES5:isIdentifierNameES5,isIdentifierNameES6:isIdentifierNameES6,isIdentifierES5:isIdentifierES5,isIdentifierES6:isIdentifierES6}})()},{"./code":136}],138:[function(require,module,exports){(function(){"use strict";exports.ast=require("./ast");exports.code=require("./code");exports.keyword=require("./keyword")})()},{"./ast":135,"./code":136,"./keyword":137}],139:[function(require,module,exports){(function(process){(function(){"use strict";var emptyFunction=require("./emptyFunction");var EventListener={listen:function listen(target,eventType,callback){if(target.addEventListener){target.addEventListener(eventType,callback,false);return{remove:function remove(){target.removeEventListener(eventType,callback,false)}}}else if(target.attachEvent){target.attachEvent("on"+eventType,callback);return{remove:function remove(){target.detachEvent("on"+eventType,callback)}}}},capture:function capture(target,eventType,callback){if(target.addEventListener){target.addEventListener(eventType,callback,true);return{remove:function remove(){target.removeEventListener(eventType,callback,true)}}}else{if(process.env.NODE_ENV!=="production"){console.error("Attempted to listen to events during the capture phase on a "+"browser that does not support the capture phase. Your application "+"will not receive some events.")}return{remove:emptyFunction}}},registerDefault:function registerDefault(){}};module.exports=EventListener}).call(this)}).call(this,require("_process"))},{"./emptyFunction":146,_process:25}],140:[function(require,module,exports){"use strict";var canUseDOM=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);var ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:typeof Worker!=="undefined",canUseEventListeners:canUseDOM&&!!(window.addEventListener||window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment},{}],141:[function(require,module,exports){"use strict";var _hyphenPattern=/-(.)/g;function camelize(string){return string.replace(_hyphenPattern,function(_,character){return character.toUpperCase()})}module.exports=camelize},{}],142:[function(require,module,exports){"use strict";var camelize=require("./camelize");var msPattern=/^-ms-/;function camelizeStyleName(string){return camelize(string.replace(msPattern,"ms-"))}module.exports=camelizeStyleName},{"./camelize":141}],143:[function(require,module,exports){"use strict";var isTextNode=require("./isTextNode");function containsNode(outerNode,innerNode){if(!outerNode||!innerNode){return false}else if(outerNode===innerNode){return true}else if(isTextNode(outerNode)){return false}else if(isTextNode(innerNode)){return containsNode(outerNode,innerNode.parentNode)}else if("contains"in outerNode){return outerNode.contains(innerNode)}else if(outerNode.compareDocumentPosition){return!!(outerNode.compareDocumentPosition(innerNode)&16)}else{return false}}module.exports=containsNode},{"./isTextNode":156}],144:[function(require,module,exports){(function(process){(function(){"use strict";var invariant=require("./invariant");function toArray(obj){var length=obj.length;!(!Array.isArray(obj)&&(typeof obj==="object"||typeof obj==="function"))?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Array-like object expected"):invariant(false):void 0;!(typeof length==="number")?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Object needs a length property"):invariant(false):void 0;!(length===0||length-1 in obj)?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Object should have keys for indices"):invariant(false):void 0;!(typeof obj.callee!=="function")?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Object can't be `arguments`. Use rest params "+"(function(...args) {}) or Array.from() instead."):invariant(false):void 0;if(obj.hasOwnProperty){try{return Array.prototype.slice.call(obj)}catch(e){}}var ret=Array(length);for(var ii=0;ii<length;ii++){ret[ii]=obj[ii]}return ret}function hasArrayNature(obj){return!!obj&&(typeof obj=="object"||typeof obj=="function")&&"length"in obj&&!("setInterval"in obj)&&typeof obj.nodeType!="number"&&(Array.isArray(obj)||"callee"in obj||"item"in obj)}function createArrayFromMixed(obj){if(!hasArrayNature(obj)){return[obj]}else if(Array.isArray(obj)){return obj.slice()}else{return toArray(obj)}}module.exports=createArrayFromMixed}).call(this)}).call(this,require("_process"))},{"./invariant":154,_process:25}],145:[function(require,module,exports){(function(process){(function(){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var createArrayFromMixed=require("./createArrayFromMixed");var getMarkupWrap=require("./getMarkupWrap");var invariant=require("./invariant");var dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null;var nodeNamePattern=/^\s*<(\w+)/;function getNodeName(markup){var nodeNameMatch=markup.match(nodeNamePattern);return nodeNameMatch&&nodeNameMatch[1].toLowerCase()}function createNodesFromMarkup(markup,handleScript){var node=dummyNode;!!!dummyNode?process.env.NODE_ENV!=="production"?invariant(false,"createNodesFromMarkup dummy not initialized"):invariant(false):void 0;var nodeName=getNodeName(markup);var wrap=nodeName&&getMarkupWrap(nodeName);if(wrap){node.innerHTML=wrap[1]+markup+wrap[2];var wrapDepth=wrap[0];while(wrapDepth--){node=node.lastChild}}else{node.innerHTML=markup}var scripts=node.getElementsByTagName("script");if(scripts.length){!handleScript?process.env.NODE_ENV!=="production"?invariant(false,"createNodesFromMarkup(...): Unexpected <script> element rendered."):invariant(false):void 0;createArrayFromMixed(scripts).forEach(handleScript)}var nodes=Array.from(node.childNodes);while(node.lastChild){node.removeChild(node.lastChild)}return nodes}module.exports=createNodesFromMarkup}).call(this)}).call(this,require("_process"))},{"./ExecutionEnvironment":140,"./createArrayFromMixed":144,"./getMarkupWrap":150,"./invariant":154,_process:25}],146:[function(require,module,exports){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function emptyFunction(){};emptyFunction.thatReturns=makeEmptyFunction;emptyFunction.thatReturnsFalse=makeEmptyFunction(false);emptyFunction.thatReturnsTrue=makeEmptyFunction(true);emptyFunction.thatReturnsNull=makeEmptyFunction(null);emptyFunction.thatReturnsThis=function(){return this};emptyFunction.thatReturnsArgument=function(arg){return arg};module.exports=emptyFunction},{}],147:[function(require,module,exports){(function(process){(function(){"use strict";var emptyObject={};if(process.env.NODE_ENV!=="production"){Object.freeze(emptyObject)}module.exports=emptyObject}).call(this)}).call(this,require("_process"))},{_process:25}],148:[function(require,module,exports){"use strict";function focusNode(node){try{node.focus()}catch(e){}}module.exports=focusNode},{}],149:[function(require,module,exports){"use strict";function getActiveElement(doc){doc=doc||(typeof document!=="undefined"?document:undefined);if(typeof doc==="undefined"){return null}try{return doc.activeElement||doc.body}catch(e){return doc.body}}module.exports=getActiveElement},{}],150:[function(require,module,exports){(function(process){(function(){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var invariant=require("./invariant");var dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null;var shouldWrap={};var selectWrap=[1,'<select multiple="true">',"</select>"];var tableWrap=[1,"<table>","</table>"];var trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"];var svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"];var markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap};var svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(nodeName){markupWrap[nodeName]=svgWrap;shouldWrap[nodeName]=true});function getMarkupWrap(nodeName){!!!dummyNode?process.env.NODE_ENV!=="production"?invariant(false,"Markup wrapping node not initialized"):invariant(false):void 0;if(!markupWrap.hasOwnProperty(nodeName)){nodeName="*"}if(!shouldWrap.hasOwnProperty(nodeName)){if(nodeName==="*"){dummyNode.innerHTML="<link />"}else{dummyNode.innerHTML="<"+nodeName+"></"+nodeName+">"}shouldWrap[nodeName]=!dummyNode.firstChild}return shouldWrap[nodeName]?markupWrap[nodeName]:null}module.exports=getMarkupWrap}).call(this)}).call(this,require("_process"))},{"./ExecutionEnvironment":140,"./invariant":154,_process:25}],151:[function(require,module,exports){"use strict";function getUnboundedScrollPosition(scrollable){if(scrollable.Window&&scrollable instanceof scrollable.Window){return{x:scrollable.pageXOffset||scrollable.document.documentElement.scrollLeft,y:scrollable.pageYOffset||scrollable.document.documentElement.scrollTop}}return{x:scrollable.scrollLeft,y:scrollable.scrollTop}}module.exports=getUnboundedScrollPosition},{}],152:[function(require,module,exports){"use strict";var _uppercasePattern=/([A-Z])/g;function hyphenate(string){return string.replace(_uppercasePattern,"-$1").toLowerCase()}module.exports=hyphenate},{}],153:[function(require,module,exports){"use strict";var hyphenate=require("./hyphenate");var msPattern=/^ms-/;function hyphenateStyleName(string){return hyphenate(string).replace(msPattern,"-ms-")}module.exports=hyphenateStyleName},{"./hyphenate":152}],154:[function(require,module,exports){(function(process){(function(){"use strict";var validateFormat=function validateFormat(format){};if(process.env.NODE_ENV!=="production"){validateFormat=function validateFormat(format){if(format===undefined){throw new Error("invariant requires an error message argument")}}}function invariant(condition,format,a,b,c,d,e,f){validateFormat(format);if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]}));error.name="Invariant Violation"}error.framesToPop=1;throw error}}module.exports=invariant}).call(this)}).call(this,require("_process"))},{_process:25}],155:[function(require,module,exports){"use strict";function isNode(object){var doc=object?object.ownerDocument||object:document;var defaultView=doc.defaultView||window;return!!(object&&(typeof defaultView.Node==="function"?object instanceof defaultView.Node:typeof object==="object"&&typeof object.nodeType==="number"&&typeof object.nodeName==="string"))}module.exports=isNode},{}],156:[function(require,module,exports){"use strict";var isNode=require("./isNode");function isTextNode(object){return isNode(object)&&object.nodeType==3}module.exports=isTextNode},{"./isNode":155}],157:[function(require,module,exports){"use strict";function memoizeStringOnly(callback){var cache={};return function(string){if(!cache.hasOwnProperty(string)){cache[string]=callback.call(this,string)}return cache[string]}}module.exports=memoizeStringOnly},{}],158:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var performance;if(ExecutionEnvironment.canUseDOM){performance=window.performance||window.msPerformance||window.webkitPerformance}module.exports=performance||{}},{"./ExecutionEnvironment":140}],159:[function(require,module,exports){"use strict";var performance=require("./performance");var performanceNow;if(performance.now){performanceNow=function performanceNow(){return performance.now()}}else{performanceNow=function performanceNow(){return Date.now()}}module.exports=performanceNow},{"./performance":158}],160:[function(require,module,exports){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;function is(x,y){if(x===y){return x!==0||y!==0||1/x===1/y}else{return x!==x&&y!==y}}function shallowEqual(objA,objB){if(is(objA,objB)){return true}if(typeof objA!=="object"||objA===null||typeof objB!=="object"||objB===null){return false}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length){return false}for(var i=0;i<keysA.length;i++){if(!hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]])){return false}}return true}module.exports=shallowEqual},{}],161:[function(require,module,exports){(function(process){(function(){"use strict";var emptyFunction=require("./emptyFunction");var warning=emptyFunction;if(process.env.NODE_ENV!=="production"){var printWarning=function printWarning(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var argIndex=0;var message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}};warning=function warning(condition,format){if(format===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(format.indexOf("Failed Composite propType: ")===0){return}if(!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}printWarning.apply(undefined,[format].concat(args))}}}module.exports=warning}).call(this)}).call(this,require("_process"))},{"./emptyFunction":146,_process:25}],162:[function(require,module,exports){(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}else{factory(global)}})(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];var document=window.document;var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var version="2.2.4",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return num!=null?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window},isNumeric:function(obj){var realStringObj=obj&&obj.toString();return!jQuery.isArray(obj)&&realStringObj-parseFloat(realStringObj)+1>=0},isPlainObject:function(obj){var key;if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype||{},"isPrototypeOf")){return false}for(key in obj){}return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},type:function(obj){if(obj==null){return obj+""}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break}}}return obj},trim:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator]}jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true}return 0},MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i}}return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]){}target.length=j-1}}}function Sizzle(selector,context,results,seed){var m,i,elem,nid,nidselect,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results}if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)}context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if(m=match[1]){if(nodeType===9){if(elem=context.getElementById(m)){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector}else if(context.nodeName.toLowerCase()!=="object"){if(nid=context.getAttribute("id")){nid=nid.replace(rescape,"\\$&")}else{context.setAttribute("id",nid=expando)}groups=tokenize(selector);i=groups.length;nidselect=ridentifier.test(nid)?"#"+nid:"[id='"+nid+"']";while(i--){groups[i]=nidselect+" "+toSelector(groups[i])}newSelector=groups.join(",");newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(nid===expando){context.removeAttribute("id")}}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]}return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{if(div.parentNode){div.parentNode.removeChild(div)}div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--){Expr.attrHandle[arr[i]]=handler}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff}if(cur){while(cur=cur.nextSibling){if(cur===b){return-1}}}return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j])}}})})}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if((parent=document.defaultView)&&parent.top!==parent){if(parent.addEventListener){parent.addEventListener("unload",unloadHandler,false)}else if(parent.attachEvent){parent.attachEvent("onunload",unloadHandler)}}support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className")});support.getElementsByTagName=assert(function(div){div.appendChild(document.createComment(""));return!div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var m=context.getElementById(id);return m?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag)}else if(support.qsa){return context.querySelectorAll(tag)}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++]){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className)}};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(document.querySelectorAll)){assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(div.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")}if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!div.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}if(!div.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]")}});assert(function(div){var input=document.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=")}if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)})}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true}}}return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1}if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1}return sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}else if(aup===bup){return siblingCheck(a,b)}cur=a;while(cur=cur.parentNode){ap.unshift(cur)}cur=b;while(cur=cur.parentNode){bp.unshift(cur)}while(ap[i]===bp[i]){i++}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return document};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)}return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=getText(node)}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3]){Sizzle.error(match[0])}return match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null}if(match[3]){match[2]=match[4]||match[5]||""}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false}},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex}if(diff===false){while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff]}if(node===elem){break}}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false}}return true},parent:function(elem){return!Expr.pseudos["empty"](elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},text:function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if((oldCache=uniqueCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2]}else{uniqueCache[dir]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true}}}}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem)}}postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||.1,len=elems.length;if(outermost){outermostContext=context===document||context||outermost}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML}while(matcher=elementMatchers[j++]){if(matcher(elem,context||document,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique}}if(bySet){if(elem=!matcher&&elem){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector)}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}else if(compiled){context=context.parentNode}selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#"})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)}})}if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue}})}if(!assert(function(div){return div.getAttribute("disabled")==null})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}})}return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched};var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>-1!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this}root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else if(!context||context.jquery){return(context||root).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery)}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem)},children:function(elem){return siblings(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnotwhite=/\S+/g;function createOptions(options){var object={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false}}}if(!options.memory){memory=false}firing=false;if(locked){if(memory){list=[]}else{list=""}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory)}(function add(args){jQuery.each(args,function(_,arg){if(jQuery.isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&jQuery.type(arg)!=="string"){add(arg)}})})(arguments);if(memory&&!firing){fire()}}return this},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--}}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function(){if(list){list=[]}return this},disable:function(){locked=queue=[];list=memory="";return this},disabled:function(){return!list},lock:function(){locked=queue=[];if(!memory){list=memory=""}return this},locked:function(){return!!locked},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire()}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject)}else{newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else if(!--remaining){deferred.resolveWith(contexts,values)}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().progress(updateFunc(i,progressContexts,progressValues)).done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject)}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");jQuery(document).off("ready")}}});function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready()}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll){window.setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed)}}return readyList.promise(obj)};jQuery.ready.promise();var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType};function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1;Data.prototype={register:function(owner,initial){var value=initial||{};if(owner.nodeType){owner[this.expando]=value}else{Object.defineProperty(owner,this.expando,{value:value,writable:true,configurable:true})}return owner[this.expando]},cache:function(owner){if(!acceptData(owner)){return{}}var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true})}}}return value},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[data]=value}else{for(prop in data){cache[prop]=data[prop]}}return cache},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][key]},access:function(owner,key,value){var stored;if(key===undefined||key&&typeof key==="string"&&value===undefined){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))}this.set(owner,key,value);return value!==undefined?value:key},remove:function(owner,key){var i,name,camel,cache=owner[this.expando];if(cache===undefined){return}if(key===undefined){this.register(owner)}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase))}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel]}else{name=camel;name=name in cache?[name]:name.match(rnotwhite)||[]}}i=name.length;while(i--){delete cache[name[i]]}}if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined}else{delete owner[this.expando]}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache)}};var dataPriv=new Data;var dataUser=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}dataUser.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem)},data:function(elem,name,data){return dataUser.access(elem,name,data)},removeData:function(elem,name){dataUser.remove(elem,name)},_data:function(elem,name,data){return dataPriv.access(elem,name,data)},_removeData:function(elem,name){dataPriv.remove(elem,name)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}dataPriv.set(elem,"hasDataAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){dataUser.set(this,key)})}return access(this,function(value){var data,camelKey;if(elem&&value===undefined){data=dataUser.get(elem,key)||dataUser.get(elem,key.replace(rmultiDash,"-$&").toLowerCase());if(data!==undefined){return data}camelKey=jQuery.camelCase(key);data=dataUser.get(elem,camelKey);if(data!==undefined){return data}data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data}return}camelKey=jQuery.camelCase(key);this.each(function(){var data=dataUser.get(this,camelKey);dataUser.set(this,camelKey,value);if(key.indexOf("-")>-1&&data!==undefined){dataUser.set(this,key,value)}})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){dataUser.remove(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3];valueParts=valueParts||[];initialInUnit=+initial||1;do{scale=scale||".5";initialInUnit=initialInUnit/scale;jQuery.style(elem,prop,initialInUnit+unit)}while(scale!==(scale=currentValue()/initial)&&scale!==1&&--maxIterations)}if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted}}return adjusted}var rcheckableType=/^(?:checkbox|radio)$/i;var rtagName=/<([\w:-]+)/;var rscriptType=/^$|\/(?:java|ecma)script/i;var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var ret=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!=="undefined"?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"))}}var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem)}continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment}(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){on(elem,type,selector,data,types[type],one)}return elem}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return elem}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return elem.each(function(){jQuery.event.add(this,types,fn,data,selector)})}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined}}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events")}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(event.type!=="click"||isNaN(event.button)||event.button<1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&(cur.disabled!==true||event.type!=="click")){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length}if(matches[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})}}}}if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)})}return handlerQueue},props:("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:("button buttons clientX clientY offsetX offsetY pageX pageY "+"screenX screenY toElement").split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.which&&button!==undefined){event.which=button&1?1:button&2?3:button&4?2:0}return event}},fix:function(event){if(event[jQuery.expando]){return event}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}}copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target){event.target=document}if(event.target.nodeType===3){event.target=event.target.parentNode}return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn)},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(dataPriv.hasData(src)){pdataOld=dataPriv.access(src);pdataCur=dataPriv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur)}}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return collection.each(function(index){var self=collection.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}domManip(self,args,callback,ignored)})}if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(collection[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}}}}}return collection}function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node))}if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node)){setGlobalEval(getAll(node,"script"))}node.parentNode.removeChild(node)}}return elem}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>")},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if(data=elem[dataPriv.expando]){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}elem[dataPriv.expando]=undefined}if(elem[dataUser.expando]){elem[dataUser.expando]=undefined}}}}});jQuery.fn.extend({domManip:domManip,detach:function(selector){return remove(this,selector,true)},remove:function(selector){return remove(this,selector)},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this)}}},ignored)}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={HTML:"block",BODY:"block"};function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window}return view.getComputedStyle(elem)};var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};var documentElement=document.documentElement;(function(){var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";container.appendChild(div);function computeStyleTests(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";div.innerHTML="";documentElement.appendChild(container);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=divStyle.marginLeft==="2px";boxSizingReliableVal=divStyle.width==="4px";div.style.marginRight="50%";pixelMarginRightVal=divStyle.marginRight==="4px";documentElement.removeChild(container)}jQuery.extend(support,{pixelPosition:function(){computeStyleTests();return pixelPositionVal},boxSizingReliable:function(){if(boxSizingReliableVal==null){computeStyleTests()}return boxSizingReliableVal},pixelMarginRight:function(){if(boxSizingReliableVal==null){computeStyleTests()}return pixelMarginRightVal},reliableMarginLeft:function(){if(boxSizingReliableVal==null){computeStyleTests()}return reliableMarginLeftVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;"+"display:block;margin:0;border:0;padding:0";marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";documentElement.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv).marginRight);documentElement.removeChild(container);div.removeChild(marginDiv);return ret}})})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed.getPropertyValue(name)||computed[name]:undefined;if((ret===""||ret===undefined)&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(computed){if(!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}var rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle){return name}var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name}}}function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=dataPriv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=dataPriv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))}}else{hidden=isHidden(elem);if(display!=="none"||!hidden){dataPriv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number"}if(value==null||value!==value){return}if(type==="number"){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function(elem,value,extra){var matches,styles=extra&&getStyles(elem),subtract=extra&&augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles);if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[name]=value;value=jQuery.css(elem,name)}return setPositiveNumber(elem,value,subtract)}}});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left}))+"px"}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function createFxNow(){window.setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(tween=collection[index].call(animation,prop,value)){return tween}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");checkDisplay=display==="none"?dataPriv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display;if(checkDisplay==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block"}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true}else{continue}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else{display=undefined}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden}}else{dataShow=dataPriv.access(elem,"fxshow",{})}if(toggle){dataShow.hidden=!hidden}if(hidden){jQuery(elem).show()}else{anim.done(function(){jQuery(elem).hide()})}anim.done(function(){var prop;dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}else if((display==="none"?defaultDisplay(elem.nodeName):display)==="inline"){style.display=display}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(jQuery.isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result)}return result}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween}]},tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.match(rnotwhite)}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback)}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback)}else{Animation.prefilters.push(callback)}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start()}else{jQuery.timers.pop()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=window.setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){window.clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:undefined)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return}if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}elem.setAttribute(name,value+"");return value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false}elem.removeAttribute(name)}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}return elem[name]=value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}return elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||""}jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))})}if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=jQuery.trim(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue)}}}}return this},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))})}if(!arguments.length){return this.attr("class","")}if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>-1){cur=cur.replace(" "+clazz+" "," ")}}finalValue=jQuery.trim(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue)}}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)})}return this.each(function(){var className,i,self,classNames;if(type==="string"){i=0;self=jQuery(this);classNames=value.match(rnotwhite)||[];while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className)}if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"")}}})},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while(elem=this[i++]){if(elem.nodeType===1&&(" "+getClass(elem)+" ").replace(rclass," ").indexOf(className)>-1){return true}}return false}});var rreturn=/\r/g,rspaces=/[\x20\t\r\n\f]+/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:jQuery.trim(jQuery.text(elem)).replace(rspaces," ")}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem)}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});support.focusin="onfocusin"in window;if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event))};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}dataPriv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix)}else{dataPriv.access(doc,fix,attaches)}}}})}var location=window.location;var nonce=jQuery.now();var rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")};jQuery.parseXML=function(data){var xml;if(!data||typeof data!=="string"){return null}try{xml=(new window.DOMParser).parseFromString(data,"text/xml")}catch(e){xml=undefined}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func)){while(dataType=dataTypes[i++]){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport){return!(selected=dataTypeOrTransport)}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}}if(conv!==true){if(conv&&s.throws){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]]}}else{jqXHR.always(map[jqXHR.status])}}return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||location.href)+"").replace(rhash,"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host}catch(e){s.crossDomain=true}}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++}}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(state===2){return jqXHR}if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return}state=2;if(timeoutTimer){window.clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204||s.type==="HEAD"){statusText="nocontent"}else if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,throws:true})};jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});jQuery.expr.filters.hidden=function(elem){return!jQuery.expr.filters.visible(elem)};jQuery.expr.filters.visible=function(elem){return elem.offsetWidth>0||elem.offsetHeight>0||elem.getClientRects().length>0};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){xhr.setRequestHeader(i,headers[i])}callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort()}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error")}else{complete(xhr.status,xhr.statusText)}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders())}}}};xhr.onload=callback();errorCallback=xhr.onerror=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback()}})}}}callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback){throw e}}},abort:function(){if(callback){callback()}}}}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET"}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type)}});document.head.appendChild(script[0])},abort:function(){if(callback){callback()}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName)}else{window[callbackName]=overwritten}if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=jQuery.trim(url.slice(off));url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object"){type="POST"}if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])})})}return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset))}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}box=elem.getBoundingClientRect();win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}},position:function(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent}return offsetParent||documentElement})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset)}else{elem[method]=val}},method,val,arguments.length)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)},size:function(){return this.length}});jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if(!noGlobal){window.jQuery=window.$=jQuery}return jQuery})},{}],163:[function(require,module,exports){(function(global){(function(){var FUNC_ERROR_TEXT="Expected a function";var NAN=0/0;var symbolTag="[object Symbol]";var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var objectProto=Object.prototype;var objectToString=objectProto.toString;var nativeMax=Math.max,nativeMin=Math.min;var now=function(){return root.Date.now()};function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time)}timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime)}if(maxing){timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&typeof value=="object"}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=debounce}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],164:[function(require,module,exports){(function(global){(function(){(function(){var undefined;var VERSION="4.17.4";var LARGE_ARRAY_SIZE=200;var CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var MAX_MEMOIZE_SIZE=500;var PLACEHOLDER="__lodash_placeholder__";var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=800,HOT_SPAN=16;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=17976931348623157e292,NAN=0/0;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]];var argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);var reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/;var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange;var rsApos="['\u2019]",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d";var rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",rsOrdUpper="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")";var reApos=RegExp(rsApos,"g");var reComboMark=RegExp(rsCombo,"g");var reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");var reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");var reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]");var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;var deburredLetters={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeParseFloat=parseFloat,freeParseInt=parseInt;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function addMapEntry(map,pair){map.set(pair[0],pair[1]);return map}function addSetEntry(set,value){set.add(value);return set}function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array==null?0:array.length;while(++index<length){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayEachRight(array,iteratee){var length=array==null?0:array.length;while(length--){if(iteratee(array[length],length,array)===false){break}}return array}function arrayEvery(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(!predicate(array[index],index,array)){return false}}return true}function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){var index=-1,length=array==null?0:array.length;while(++index<length){if(comparator(value,array[index])){return true}}return false}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;if(initAccum&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array==null?0:array.length;if(initAccum&&length){accumulator=array[--length]}while(length--){accumulator=iteratee(accumulator,array[length],length,array)}return accumulator}function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}var asciiSize=baseProperty("length");function asciiToArray(string){return string.split("")}function asciiWords(string){return string.match(reAsciiWord)||[]}function baseFindKey(collection,predicate,eachFunc){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=key;return false}});return result}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){var index=fromIndex-1,length=array.length;while(++index<length){if(comparator(array[index],value)){return index}}return-1}function baseIsNaN(value){return value!==value}function baseMean(array,iteratee){var length=array==null?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyOf(object){return function(key){return object==null?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=false,value):iteratee(accumulator,value,index,collection)});return accumulator}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function baseSum(array,iteratee){var result,index=-1,length=array.length;while(++index<length){var current=iteratee(array[index]);if(current!==undefined){result=result===undefined?current:result+current}}return result}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){var index=-1,length=strSymbols.length;while(++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index}function charsEndIndex(strSymbols,chrSymbols){var index=strSymbols.length;while(index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index}function countHolders(array,placeholder){var length=array.length,result=0;while(length--){if(array[length]===placeholder){++result}}return result}var deburrLetter=basePropertyOf(deburredLetters);var escapeHtmlChar=basePropertyOf(htmlEscapes);function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function getValue(object,key){return object==null?undefined:object[key]}function hasUnicode(string){return reHasUnicode.test(string)}function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}function iteratorToArray(iterator){var data,result=[];while(!(data=iterator.next()).done){result.push(data.value)}return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value===placeholder||value===PLACEHOLDER){array[index]=PLACEHOLDER;result[resIndex++]=index}}return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}function setToPairs(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=[value,value]});return result}function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function strictLastIndexOf(array,value,fromIndex){var index=fromIndex+1;while(index--){if(array[index]===value){return index}}return index}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string)}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}var unescapeHtmlChar=basePropertyOf(htmlUnescapes);function unicodeSize(string){var result=reUnicode.lastIndex=0;while(reUnicode.test(string)){++result}return result}function unicodeToArray(string){return string.match(reUnicode)||[]}function unicodeWords(string){return string.match(reUnicodeWord)||[]}var runInContext=function runInContext(context){context=context==null?root:_.defaults(root.Object(),context,_.pick(root,contextProps));var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=context["__core-js_shared__"];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var nativeObjectToString=objectProto.toString;var objectCtorString=funcToString.call(Object);var oldDash=root._;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined;var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout;var nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse;var DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create");var metaMap=WeakMap&&new WeakMap;var realNames={};var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{}}if(objectCreate){return objectCreate(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value;this.__actions__=[];this.__chain__=!!chainAll;this.__index__=0;this.__values__=undefined}lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};lodash.prototype=baseLodash.prototype;lodash.prototype.constructor=lodash;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=MAX_ARRAY_LENGTH;this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=copyArray(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=copyArray(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=copyArray(this.__views__);return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length){return baseWrapperValue(array,this.__actions__)}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer}else{break outer}}}result[resIndex++]=value}return result}LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[];this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}function setCacheHas(value){return this.__data__.has(value)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseAggregator(collection,setter,iteratee,accumulator){baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)});return accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}function baseAt(object,paths){var index=-1,length=paths.length,result=Array(length),skip=object==null;while(++index<length){result[index]=skip?undefined:get(object,paths[index])}return result}function baseClamp(number,lower,upper){if(number===number){if(upper!==undefined){number=number<=upper?number:upper}if(lower!==undefined){number=number>=lower?number:lower}}return number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))});return result}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}function baseConformsTo(object,source,props){var length=props.length;if(object==null){return!length}object=Object(object);while(length--){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value)){return false}}return true}function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,result=[],valuesLength=values.length;if(!length){return result}if(iteratee){values=arrayMap(values,baseUnary(iteratee))}if(comparator){includes=arrayIncludesWith;isCommon=false}else if(values.length>=LARGE_ARRAY_SIZE){includes=cacheHas;isCommon=false;values=new SetCache(values)}outer:while(++index<length){var value=array[index],computed=iteratee==null?value:iteratee(value);value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===computed){continue outer}}result.push(value)}else if(!includes(values,computed,comparator)){result.push(value)}}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result});return result}function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index<length){var value=array[index],current=iteratee(value);if(current!=null&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed))){var computed=current,result=value}}return result}function baseFill(array,value,start,end){var length=array.length;start=toInteger(start);if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:toInteger(end);if(end<0){end+=length}end=start>end?0:toLength(end);while(start<end){array[start++]=value}return array}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return object!=null&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return object!=null&&key in Object(object)}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}function baseIntersection(arrays,iteratee,comparator){var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=Infinity,result=[];while(othIndex--){var array=arrays[othIndex];if(othIndex&&iteratee){array=arrayMap(array,baseUnary(iteratee))}maxLength=nativeMin(array.length,maxLength);caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined}array=arrays[0];var index=-1,seen=caches[0];outer:while(++index<length&&result.length<maxLength){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator))){continue outer}}if(seen){seen.push(computed)}result.push(value)}}return result}function baseInverter(object,setter,iteratee,accumulator){baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)});return accumulator}function baseInvoke(object,path,args){path=castPath(path,object);object=parent(object,path);var func=object==null?object:object[toKey(last(path))];return func==null?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false}}}return true}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity}if(typeof value=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return}baseFor(source,function(srcValue,key){if(isObject(srcValue)){stack||(stack=new Stack);baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack)}else{var newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):undefined;if(newValue===undefined){newValue=srcValue}assignMergeValue(object,key,newValue)}},keysIn)}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return}var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue)}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true)}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true)}else{newValue=[]}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue)}else if(!isObject(objValue)||srcIndex&&isFunction(objValue)){newValue=initCloneObject(srcValue)}}else{isCommon=false}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack["delete"](srcValue)}assignMergeValue(object,key,newValue)}function baseNth(array,n){var length=array.length;if(!length){return}n+=n<0?length:0;return isIndex(n,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee()));var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path)){baseSet(result,castPath(path,object),value)}}return result}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;if(array===values){values=copyArray(values)}if(iteratee){seen=arrayMap(array,baseUnary(iteratee))}while(++index<length){var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;while((fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1){if(seen!==array){splice.call(seen,fromIndex,1)}splice.call(array,fromIndex,1)}}return array}function basePullAt(array,indexes){var length=array?indexes.length:0,lastIndex=length-1;while(length--){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;if(isIndex(index)){splice.call(array,index,1)}else{baseUnset(array,index)}}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(length--){result[fromRight?length:++index]=start;start+=step}return result}function baseRepeat(string,n){var result="";if(!string||n<1||n>MAX_SAFE_INTEGER){return result}do{if(n%2){result+=string}n=nativeFloor(n/2);if(n){string+=string}}while(n);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start}end=end>length?length:end;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=array==null?low:array.length;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if(computed!==null&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)){low=mid+1}else{high=mid}}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array==null?0:array.length,valIsNaN=value!==value,valIsNull=value===null,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=computed===null,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN){var setLow=retHighest||othIsReflexive}else if(valIsUndefined){setLow=othIsReflexive&&(retHighest||othIsDefined)}else if(valIsNull){setLow=othIsReflexive&&othIsDefined&&(retHighest||!othIsNull)}else if(valIsSymbol){setLow=othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol)}else if(othIsNull||othIsSymbol){setLow=false}else{setLow=retHighest?computed<=value:computed<value}if(setLow){low=mid+1}else{high=mid}}return nativeMin(high,MAX_ARRAY_INDEX)}function baseSortedUniq(array,iteratee){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=value===0?0:value}}return result}function baseToNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}return+value}function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith}else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set){return setToArray(set)}isCommon=false;includes=cacheHas;seen=new SetCache}else{seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(!includes(seen,computed,comparator)){if(seen!==result){seen.push(computed)}result.push(value)}}return result}function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value()}return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2){return length?baseUniq(arrays[0]):[]}var index=-1,result=Array(length);while(++index<length){var array=arrays[index],othIndex=-1;while(++othIndex<length){if(othIndex!=index){result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator)}}}return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){var index=-1,length=props.length,valsLength=values.length,result={};while(++index<length){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return typeof value=="function"?value:identity}function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;end=end===undefined?length:end;return!start&&end>=length?array:baseSlice(array,start,end)}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),CLONE_DEEP_FLAG):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),CLONE_DEEP_FLAG):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value);var othIsDefined=other!==undefined,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive){return 1}if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive){return-1}}return 0}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}var order=orders[index];return result*(order=="desc"?-1:1)}}return object.index-other.index}function composeArgs(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[holders[argsIndex]]=args[argsIndex]}}while(rangeLength--){result[leftIndex++]=args[argsIndex++]}return result}function composeArgsRight(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;while(++argsIndex<rangeLength){result[argsIndex]=args[argsIndex]}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[offset+holders[holdersIndex]]=args[argsIndex++]}}return result}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function createBind(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments)}return wrapper}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined;var chr=strSymbols?strSymbols[0]:string.charAt(0);var trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){var Ctor=createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);while(index--){args[index]=arguments[index]}var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);length-=holders.length;if(length<arity){return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length)}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args)}return wrapper}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection);predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;if(fromRight){funcs.reverse()}while(index--){var func=funcs[index];if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(prereq&&!wrapper&&getFuncName(func)=="wrapper"){var wrapper=new LodashWrapper([],true)}}index=wrapper?index:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=="wrapper"?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3])}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)){return wrapper.plant(value).value()}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result)}return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length;while(index--){args[index]=arguments[index]}if(isCurried){var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder)}if(partials){args=composeArgs(args,partials,holders,isCurried)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight,isCurried)}length-=holdersCount;if(isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;length=args.length;if(argPos){args=reorder(args,argPos)}else if(isFlip&&length>1){args.reverse()}if(isAry&&ary<length){args.length=ary}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtor(fn)}return fn.apply(thisBinding,args)}return wrapper}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined){return defaultValue}if(value!==undefined){result=value}if(other!==undefined){if(result===undefined){return other}if(typeof value=="string"||typeof other=="string"){value=baseToString(value);other=baseToString(other)}else{value=baseToNumber(value);other=baseToNumber(other)}result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){iteratees=arrayMap(iteratees,baseUnary(getIteratee()));return baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){chars=chars===undefined?" ":baseToString(chars);var charsLength=chars.length;if(charsLength<2){return charsLength?baseRepeat(chars,length):chars}var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}return apply(fn,isBind?thisArg:this,args)}return wrapper}function createRange(fromRight){return function(start,end,step){if(step&&typeof step!="number"&&isIterateeCall(start,end,step)){end=step=undefined}start=toFinite(start);if(end===undefined){end=start;start=0}else{end=toFinite(end)}step=step===undefined?start<end?1:-1:toFinite(step);return baseRange(start,end,step,fromRight)}}function createRelationalOperation(operator){return function(value,other){if(!(typeof value=="string"&&typeof other=="string")){value=toNumber(value);other=toNumber(other)}return operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG);if(!(bitmask&WRAP_CURRY_BOUND_FLAG)){bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity];var result=wrapFunc.apply(undefined,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){number=toNumber(number);precision=precision==null?0:nativeMin(toInteger(precision),292);if(precision){var pair=(toString(number)+"e").split("e"),value=func(pair[0]+"e"+(+pair[1]+precision));pair=(toString(value)+"e").split("e");return+(pair[0]+"e"+(+pair[1]-precision))}return func(number)}}var createSet=!(Set&&1/setToArray(new Set([,-0]))[1]==INFINITY)?noop:function(values){return new Set(values)};function createToPairs(keysFunc){return function(object){var tag=getTag(object);if(tag==mapTag){return mapToArray(object)}if(tag==setTag){return setToPairs(object)}return baseToPairs(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG);partials=holders=undefined}ary=ary===undefined?ary:nativeMax(toInteger(ary),0);arity=arity===undefined?arity:toInteger(arity);length-=holders?holders.length:0;if(bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func);var newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data)}func=newData[0];bitmask=newData[1];thisArg=newData[2];partials=newData[3];holders=newData[4];arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0);if(!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)){bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)}if(!bitmask||bitmask==WRAP_BIND_FLAG){var result=createBind(func,bitmask,thisArg)}else if(bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG){result=createCurry(func,bitmask,arity)}else if((bitmask==WRAP_PARTIAL_FLAG||bitmask==(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG))&&!holders.length){result=createPartial(func,bitmask,thisArg,partials)}else{result=createHybrid.apply(undefined,newData)}var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){if(objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)){return srcValue}return objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){if(isObject(objValue)&&isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack);stack["delete"](srcValue)}return objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=!metaMap?noop:function(func){return metaMap.get(func)};function getFuncName(func){var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}function getHolder(func){var object=hasOwnProperty.call(lodash,"placeholder")?lodash:func;return object.placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;result=result===iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object)}return result};var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);break}}return{start:start,end:end}}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneArray(array){var length=array.length,result=array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function insertWrapDetails(source,details){var length=details.length;if(!length){return source}var lastIndex=length-1;details[lastIndex]=(length>1?"& ":"")+details[lastIndex];details=details.join(length>2?", ":" ");return source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if(typeof other!="function"||!(funcName in LazyWrapper.prototype)){return false}if(func===other){return true}var data=getData(other);return!!data&&func===data[0]}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG);var isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&WRAP_BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value;data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):value;data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]}value=source[7];if(value){data[7]=value}if(srcBitmask&WRAP_ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}function objectToString(value){return nativeObjectToString.call(value)}function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}var setData=shortOut(baseSetData);var setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)};var setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;size=size===undefined?length:size;while(++index<size){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index];array[index]=value}array.length=size;return array}var stringToPath=memoizeCapped(function(string){var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function updateWrapDetails(details,bitmask){arrayEach(wrapFlags,function(pair){var value="_."+pair[0];if(bitmask&pair[1]&&!arrayIncludes(details,value)){details.push(value)}});return details.sort()}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper){return wrapper.clone()}var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);result.__actions__=copyArray(wrapper.__actions__);result.__index__=wrapper.__index__;result.__values__=wrapper.__values__;return result}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size===undefined){size=1}else{size=nativeMax(toInteger(size),0)}var length=array==null?0:array.length;if(!length||size<1){return[]}var index=0,resIndex=0,result=Array(nativeCeil(length/size));while(index<length){result[resIndex++]=baseSlice(array,index,index+=size)}return result}function compact(array){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value){result[resIndex++]=value}}return result}function concat(){var length=arguments.length;if(!length){return[]}var args=Array(length-1),array=arguments[0],index=length;while(index--){args[index-1]=arguments[index]}return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true)):[]});var differenceBy=baseRest(function(array,values){var iteratee=last(values);if(isArrayLikeObject(iteratee)){iteratee=undefined}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),getIteratee(iteratee,2)):[]});var differenceWith=baseRest(function(array,values){var comparator=last(values);if(isArrayLikeObject(comparator)){comparator=undefined}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),undefined,comparator):[]});function drop(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,n<0?0:n,length)}function dropRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true,true):[]}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true):[]}function fill(array,value,start,end){var length=array==null?0:array.length;if(!length){return[]}if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=length-1;if(fromIndex!==undefined){index=toInteger(fromIndex);index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)}return baseFindIndex(array,getIteratee(predicate,3),index,true)}function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}function flattenDeep(array){var length=array==null?0:array.length;return length?baseFlatten(array,INFINITY):[]}function flattenDepth(array,depth){var length=array==null?0:array.length;if(!length){return[]}depth=depth===undefined?1:toInteger(depth);return baseFlatten(array,depth)}function fromPairs(pairs){var index=-1,length=pairs==null?0:pairs.length,result={};while(++index<length){var pair=pairs[index];result[pair[0]]=pair[1]}return result}function head(array){return array&&array.length?array[0]:undefined}function indexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseIndexOf(array,value,index)}function initial(array){var length=array==null?0:array.length;return length?baseSlice(array,0,-1):[]}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]});var intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);if(iteratee===last(mapped)){iteratee=undefined}else{mapped.pop()}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]});var intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);comparator=typeof comparator=="function"?comparator:undefined;if(comparator){mapped.pop()}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]});function join(array,separator){return array==null?"":nativeJoin.call(array,separator)}function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=length;if(fromIndex!==undefined){index=toInteger(fromIndex);index=index<0?nativeMax(length+index,0):nativeMin(index,length-1)}return value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,true)}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array}var pullAt=flatRest(function(array,indexes){var length=array==null?0:array.length,result=baseAt(array,indexes);basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending));return result});function remove(array,predicate){var result=[];if(!(array&&array.length)){return result}var index=-1,indexes=[],length=array.length;predicate=getIteratee(predicate,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index)}}basePullAt(array,indexes);return result}function reverse(array){return array==null?array:nativeReverse.call(array)}function slice(array,start,end){var length=array==null?0:array.length;if(!length){return[]}if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}else{start=start==null?0:toInteger(start);end=end===undefined?length:toInteger(end)}return baseSlice(array,start,end)}function sortedIndex(array,value){return baseSortedIndex(array,value)}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))}function sortedIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value)){return index}}return-1}function sortedLastIndex(array,value){return baseSortedIndex(array,value,true)}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),true)}function sortedLastIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value,true)-1;if(eq(array[index],value)){return index}}return-1}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[]}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]}function tail(array){var length=array==null?0:array.length;return length?baseSlice(array,1,length):[]}function take(array,n,guard){if(!(array&&array.length)){return[]}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,n<0?0:n,length)}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),false,true):[]}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true))});var unionBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined}return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),getIteratee(iteratee,2))});var unionWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=="function"?comparator:undefined;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),undefined,comparator)});function uniq(array){return array&&array.length?baseUniq(array):[]}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]}function uniqWith(array,comparator){comparator=typeof comparator=="function"?comparator:undefined;return array&&array.length?baseUniq(array,undefined,comparator):[]}function unzip(array){if(!(array&&array.length)){return[]}var length=0;array=arrayFilter(array,function(group){if(isArrayLikeObject(group)){length=nativeMax(group.length,length);return true}});return baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(array,iteratee){if(!(array&&array.length)){return[]}var result=unzip(array);if(iteratee==null){return result}return arrayMap(result,function(group){return apply(iteratee,undefined,group)})}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]});var xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))});var xorBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined}return baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))});var xorWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=="function"?comparator:undefined;return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)});var zip=baseRest(unzip);function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue)}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet)}var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;iteratee=typeof iteratee=="function"?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee)});function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor){interceptor(value);return value}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};if(length>1||this.__actions__.length||!(value instanceof LazyWrapper)||!isIndex(start)){return this.thru(interceptor)}value=value.slice(start,+start+(length?1:0));value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(value,this.__chain__).thru(function(array){if(length&&!array.length){array.push(undefined)}return array})});function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperNext(){if(this.__values__===undefined){this.__values__=toArray(this.value())}var done=this.__index__>=this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return{done:done,value:value}}function wrapperToIterator(){return this}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);clone.__index__=0;clone.__values__=undefined;if(result){previous.__wrapped__=clone}else{result=clone}var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this)}wrapped=wrapped.reverse();wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined});return new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var countBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){++result[key]}else{baseAssignValue(result,key,1)}});function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined}return func(collection,getIteratee(predicate,3))}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3))}var find=createFind(findIndex);var findLast=createFind(findLastIndex);function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1)}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY)}function flatMapDepth(collection,iteratee,depth){depth=depth===undefined?1:toInteger(depth);return baseFlatten(map(collection,iteratee),depth)}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee,3))}var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{baseAssignValue(result,key,[value])}});function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex<0){fromIndex=nativeMax(length+fromIndex,0)}return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc=typeof path=="function",result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)});return result});var keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3))}function orderBy(collection,iteratees,orders,guard){if(collection==null){return[]}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees]}orders=guard?undefined:orders;if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseOrderBy(collection,iteratees,orders)}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)))}function sample(collection){var func=isArray(collection)?arraySample:baseSample;return func(collection)}function sampleSize(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n===undefined){n=1}else{n=toInteger(n)}var func=isArray(collection)?arraySampleSize:baseSampleSize;return func(collection,n)}function shuffle(collection){var func=isArray(collection)?arrayShuffle:baseShuffle;return func(collection)}function size(collection){if(collection==null){return 0}if(isArrayLike(collection)){return isString(collection)?stringSize(collection):collection.length}var tag=getTag(collection);if(tag==mapTag||tag==setTag){return collection.size}return baseKeys(collection).length}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined}return func(collection,getIteratee(predicate,3))}var sortBy=baseRest(function(collection,iteratees){if(collection==null){return[]}var length=iteratees.length;if(length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])){iteratees=[]}else if(length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])){iteratees=[iteratees[0]]}return baseOrderBy(collection,baseFlatten(iteratees,1),[])});var now=ctxNow||function(){return root.Date.now()};function after(n,func){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}n=toInteger(n);return function(){if(--n<1){return func.apply(this,arguments)}}}function ary(func,n,guard){n=guard?undefined:n;n=func&&n==null?func.length:n;return createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}n=toInteger(n);return function(){if(--n>0){result=func.apply(this,arguments)}if(n<=1){func=undefined}return result}}var bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)});var bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders)});function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curry.placeholder;return result}function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryRight.placeholder;return result}function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time)}timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime)}if(maxing){timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}var defer=baseRest(function(func,args){return baseDelay(func,1,args)});var delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});function flip(func){return createWrap(func,WRAP_FLIP_FLAG)}function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}function once(func){return before(2,func)}var overArgs=castRest(function(func,transforms){transforms=transforms.length==1&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){var index=-1,length=nativeMin(args.length,funcsLength);while(++index<length){args[index]=transforms[index].call(this,args[index])}return apply(func,this,args)})});var partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined,partials,holders)});var partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders)});var rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes)});function rest(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=start===undefined?start:toInteger(start);return baseRest(func,start)}function spread(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=start==null?0:nativeMax(toInteger(start),0);return baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);if(array){arrayPush(otherArgs,array)}return apply(func,this,otherArgs)})}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function unary(func){return ary(func,1)}function wrap(value,wrapper){return partial(castFunction(wrapper),value)}function castArray(){if(!arguments.length){return[]}var value=arguments[0];return isArray(value)?value:[value]}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG)}function cloneWith(value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseClone(value,CLONE_SYMBOLS_FLAG,customizer)}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function cloneDeepWith(value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer)}function conformsTo(object,source){return source==null||baseConformsTo(object,source,keys(source))}function eq(value,other){return value===other||value!==value&&other!==other}var gt=createRelationalOperation(baseGt);var gte=createRelationalOperation(function(value,other){return value>=other});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};var isArray=Array.isArray;var isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isBoolean(value){return value===true||value===false||isObjectLike(value)&&baseGetTag(value)==boolTag}var isBuffer=nativeIsBuffer||stubFalse;var isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isElement(value){return isObjectLike(value)&&value.nodeType===1&&!isPlainObject(value)}function isEmpty(value){if(value==null){return true}if(isArrayLike(value)&&(isArray(value)||typeof value=="string"||typeof value.splice=="function"||isBuffer(value)||isTypedArray(value)||isArguments(value))){return!value.length}var tag=getTag(value);if(tag==mapTag||tag==setTag){return!value.size}if(isPrototype(value)){return!baseKeys(value).length}for(var key in value){if(hasOwnProperty.call(value,key)){return false}}return true}function isEqual(value,other){return baseIsEqual(value,other)}function isEqualWith(value,other,customizer){customizer=typeof customizer=="function"?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result}function isError(value){if(!isObjectLike(value)){return false}var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||typeof value.message=="string"&&typeof value.name=="string"&&!isPlainObject(value)}function isFinite(value){return typeof value=="number"&&nativeIsFinite(value)}function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isInteger(value){return typeof value=="number"&&value==toInteger(value)}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function isObjectLike(value){return value!=null&&typeof value=="object"}var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))}function isMatchWith(object,source,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseIsMatch(object,source,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(isMaskable(value)){throw new Error(CORE_ERROR_TEXT)}return baseIsNative(value)}function isNull(value){return value===null}function isNil(value){return value==null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false}var proto=getPrototype(value);if(proto===null){return true}var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER}var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;function isString(value){return typeof value=="string"||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function isUndefined(value){return value===undefined}function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag}function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag}var lt=createRelationalOperation(baseLt);var lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value){return[]}if(isArrayLike(value)){return isString(value)?stringToArray(value):copyArray(value)}if(symIterator&&value[symIterator]){return iteratorToArray(value[symIterator]())}var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:values;return func(value)}function toFinite(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toSafeInteger(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):value===0?value:0}function toString(value){return value==null?"":baseToString(value)}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return}for(var key in source){if(hasOwnProperty.call(source,key)){assignValue(object,key,source[key])}}});var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)});var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)});var assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)});var at=flatRest(baseAt);function create(prototype,properties){var result=baseCreate(prototype);return properties==null?result:baseAssign(result,properties)}var defaults=baseRest(function(args){args.push(undefined,customDefaultsAssignIn);return apply(assignInWith,undefined,args)});var defaultsDeep=baseRest(function(args){args.push(undefined,customDefaultsMerge);return apply(mergeWith,undefined,args)});function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)}function forIn(object,iteratee){return object==null?object:baseFor(object,getIteratee(iteratee,3),keysIn)}function forInRight(object,iteratee){return object==null?object:baseForRight(object,getIteratee(iteratee,3),keysIn)}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))}function functions(object){return object==null?[]:baseFunctions(object,keys(object))}function functionsIn(object){return object==null?[]:baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function has(object,path){return object!=null&&hasPath(object,path,baseHas)}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var invert=createInverter(function(result,value,key){result[value]=key},constant(identity));var invertBy=createInverter(function(result,value,key){if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}},getIteratee);var invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}function mapKeys(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)});return result}function mapValues(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))});return result}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)});var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)});var omit=flatRest(function(object,paths){var result={};if(object==null){return result}var isDeep=false;paths=arrayMap(paths,function(path){path=castPath(path,object);isDeep||(isDeep=path.length>1);return path});copyObject(object,getAllKeysIn(object),result);if(isDeep){result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone)}var length=paths.length;while(length--){baseUnset(result,paths[length])}return result});function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)))}var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths)});function pickBy(object,predicate){if(object==null){return{}}var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});predicate=getIteratee(predicate);return basePickBy(object,props,function(value,path){return predicate(value,path[0])})}function result(object,path,defaultValue){path=castPath(path,object);var index=-1,length=path.length;if(!length){length=1;object=undefined}while(++index<length){var value=object==null?undefined:object[toKey(path[index])];if(value===undefined){index=length;value=defaultValue}object=isFunction(value)?value.call(object):value}return object}function set(object,path,value){return object==null?object:baseSet(object,path,value)}function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}var toPairs=createToPairs(keys);var toPairsIn=createToPairs(keysIn);function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);iteratee=getIteratee(iteratee,4);if(accumulator==null){var Ctor=object&&object.constructor;if(isArrLike){accumulator=isArr?new Ctor:[]}else if(isObject(object)){accumulator=isFunction(Ctor)?baseCreate(getPrototype(object)):{}}else{accumulator={}}}(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)});return accumulator}function unset(object,path){return object==null?true:baseUnset(object,path)}function update(object,path,updater){return object==null?object:baseUpdate(object,path,castFunction(updater))}function updateWith(object,path,updater,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseUpdate(object,path,castFunction(updater),customizer)}function values(object){return object==null?[]:baseValues(object,keys(object))}function valuesIn(object){return object==null?[]:baseValues(object,keysIn(object))}function clamp(number,lower,upper){if(upper===undefined){upper=lower;lower=undefined}if(upper!==undefined){upper=toNumber(upper);upper=upper===upper?upper:0}if(lower!==undefined){lower=toNumber(lower);lower=lower===lower?lower:0}return baseClamp(toNumber(number),lower,upper)}function inRange(number,start,end){start=toFinite(start);if(end===undefined){end=start;start=0}else{end=toFinite(end)}number=toNumber(number);return baseInRange(number,start,end)}function random(lower,upper,floating){if(floating&&typeof floating!="boolean"&&isIterateeCall(lower,upper,floating)){upper=floating=undefined}if(floating===undefined){if(typeof upper=="boolean"){floating=upper;upper=undefined}else if(typeof lower=="boolean"){floating=lower;lower=undefined}}if(lower===undefined&&upper===undefined){lower=0;upper=1}else{lower=toFinite(lower);if(upper===undefined){upper=lower;lower=0}else{upper=toFinite(upper)}}if(lower>upper){var temp=lower;lower=upper;upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){string=toString(string);return string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=toString(string);target=baseToString(target);var length=string.length;position=position===undefined?length:baseClamp(toInteger(position),0,length);var end=position;position-=target.length;return position>=0&&string.slice(position,end)==target}function escape(string){string=toString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){string=toString(string);return string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});var lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()});var lowerFirst=createCaseFirst("toLowerCase");function pad(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length){return string}var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)}function padEnd(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string}function padStart(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string}function parseInt(string,radix,guard){if(guard||radix==null){radix=0}else if(radix){radix=+radix}return nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)}function repeat(string,n,guard){if(guard?isIterateeCall(string,n,guard):n===undefined){n=1}else{n=toInteger(n)}return baseRepeat(toString(string),n)}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});function split(string,separator,limit){if(limit&&typeof limit!="number"&&isIterateeCall(string,separator,limit)){separator=limit=undefined}limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0;if(!limit){return[]}string=toString(string);if(string&&(typeof separator=="string"||separator!=null&&!isRegExp(separator))){separator=baseToString(separator);if(!separator&&hasUnicode(string)){return castSlice(stringToArray(string),0,limit)}}return string.split(separator,limit)}var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});function startsWith(string,target,position){string=toString(string);position=position==null?0:baseClamp(toInteger(position),0,string.length);target=baseToString(target);return string.slice(position,position+target.length)==target}function template(string,options,guard){var settings=lodash.templateSettings;if(guard&&isIterateeCall(string,options,guard)){options=undefined}string=toString(string);options=assignInWith({},options,settings,customDefaultsAssignIn);var imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});result.source=source;if(isError(result)){throw result}return result}function toLower(value){return toString(value).toLowerCase()}function toUpper(value){return toString(value).toUpperCase()}function trim(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrim,"")}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join("")}function trimEnd(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrimEnd,"")}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join("")}function trimStart(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrimStart,"")}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join("")}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?toInteger(options.length):length;omission="omission"in options?baseToString(options.omission):omission}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength){return string}var end=length-stringSize(omission);if(end<1){return omission}var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined){return result+omission}if(strSymbols){end+=result.length-end}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;if(!separator.global){separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")}separator.lastIndex=0;while(match=separator.exec(substring)){var newEnd=match.index}result=result.slice(0,newEnd===undefined?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index)}}return result+omission}function unescape(string){string=toString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}var upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()});var upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){string=toString(string);pattern=guard?undefined:pattern;if(pattern===undefined){return hasUnicodeWord(string)?unicodeWords(string):asciiWords(string)}return string.match(pattern)||[]}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}});var bindAll=flatRest(function(object,methodNames){arrayEach(methodNames,function(key){key=toKey(key);baseAssignValue(object,key,bind(object[key],object))});return object});function cond(pairs){var length=pairs==null?0:pairs.length,toIteratee=getIteratee();pairs=!length?[]:arrayMap(pairs,function(pair){if(typeof pair[1]!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return[toIteratee(pair[0]),pair[1]]});return baseRest(function(args){var index=-1;while(++index<length){var pair=pairs[index];if(apply(pair[0],this,args)){return apply(pair[1],this,args)}}})}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG))}function constant(value){return function(){return value}}function defaultTo(value,defaultValue){return value==null||value!==value?defaultValue:value}var flow=createFlow();var flowRight=createFlow(true);function identity(value){return value}function iteratee(func){return baseIteratee(typeof func=="function"?func:baseClone(func,CLONE_DEEP_FLAG))}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG))}var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}});var methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);if(options==null&&!(isObject(source)&&(methodNames.length||!props.length))){options=source;source=object;object=this;methodNames=baseFunctions(source,keys(source))}var chain=!(isObject(options)&&"chain"in options)||!!options.chain,isFunc=isFunction(object);arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__=chainAll;return result}return func.apply(object,arrayPush([this.value()],arguments))}}});return object}function noConflict(){if(root._===this){root._=oldDash}return this}function noop(){}function nthArg(n){n=toInteger(n);return baseRest(function(args){return baseNth(args,n)})}var over=createOver(arrayMap);var overEvery=createOver(arrayEvery);var overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function propertyOf(object){return function(path){return object==null?undefined:baseGet(object,path)}}var range=createRange();var rangeRight=createRange(true);function stubArray(){return[]}function stubFalse(){return false}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return true}function times(n,iteratee){n=toInteger(n);if(n<1||n>MAX_SAFE_INTEGER){return[]}var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee);n-=MAX_ARRAY_LENGTH;var result=baseTimes(length,iteratee);while(++index<n){iteratee(index)}return result}function toPath(value){if(isArray(value)){return arrayMap(value,toKey)}return isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}var add=createMathOperation(function(augend,addend){return augend+addend},0);var ceil=createRound("ceil");var divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1);var floor=createRound("floor");function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined}function mean(array){return baseMean(array,identity)}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2))}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined}var multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1);var round=createRound("round");var subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);function sum(array){return array&&array.length?baseSum(array,identity):0}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0}lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.assignIn=assignIn;lodash.assignInWith=assignInWith;lodash.assignWith=assignWith;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.castArray=castArray;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.concat=concat;lodash.cond=cond;lodash.conforms=conforms;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.differenceBy=differenceBy;lodash.differenceWith=differenceWith;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatMap=flatMap;lodash.flatMapDeep=flatMapDeep;lodash.flatMapDepth=flatMapDepth;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flattenDepth=flattenDepth;lodash.flip=flip;lodash.flow=flow;lodash.flowRight=flowRight;lodash.fromPairs=fromPairs;lodash.functions=functions;lodash.functionsIn=functionsIn;lodash.groupBy=groupBy;lodash.initial=initial;lodash.intersection=intersection;lodash.intersectionBy=intersectionBy;lodash.intersectionWith=intersectionWith;lodash.invert=invert;lodash.invertBy=invertBy;lodash.invokeMap=invokeMap;lodash.iteratee=iteratee;lodash.keyBy=keyBy;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.mergeWith=mergeWith;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.negate=negate;lodash.nthArg=nthArg;lodash.omit=omit;lodash.omitBy=omitBy;lodash.once=once;lodash.orderBy=orderBy;lodash.over=over;lodash.overArgs=overArgs;lodash.overEvery=overEvery;lodash.overSome=overSome;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pickBy=pickBy;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAll=pullAll;lodash.pullAllBy=pullAllBy;lodash.pullAllWith=pullAllWith;lodash.pullAt=pullAt;lodash.range=range;lodash.rangeRight=rangeRight;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.reverse=reverse;lodash.sampleSize=sampleSize;lodash.set=set;lodash.setWith=setWith;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortedUniq=sortedUniq;lodash.sortedUniqBy=sortedUniqBy;lodash.split=split;lodash.spread=spread;lodash.tail=tail;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.toArray=toArray;lodash.toPairs=toPairs;lodash.toPairsIn=toPairsIn;lodash.toPath=toPath;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.unary=unary;lodash.union=union;lodash.unionBy=unionBy;lodash.unionWith=unionWith;lodash.uniq=uniq;lodash.uniqBy=uniqBy;lodash.uniqWith=uniqWith;lodash.unset=unset;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.update=update;lodash.updateWith=updateWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.without=without;lodash.words=words;lodash.wrap=wrap;lodash.xor=xor;lodash.xorBy=xorBy;lodash.xorWith=xorWith;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipObjectDeep=zipObjectDeep;lodash.zipWith=zipWith;lodash.entries=toPairs;lodash.entriesIn=toPairsIn;lodash.extend=assignIn;lodash.extendWith=assignInWith;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clamp=clamp;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.cloneDeepWith=cloneDeepWith;lodash.cloneWith=cloneWith;lodash.conformsTo=conformsTo;lodash.deburr=deburr;lodash.defaultTo=defaultTo;lodash.divide=divide;lodash.endsWith=endsWith;lodash.eq=eq;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.floor=floor;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.hasIn=hasIn;lodash.head=head;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.invoke=invoke;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isArrayBuffer=isArrayBuffer;lodash.isArrayLike=isArrayLike;lodash.isArrayLikeObject=isArrayLikeObject;lodash.isBoolean=isBoolean;lodash.isBuffer=isBuffer;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isEqualWith=isEqualWith;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isInteger=isInteger;lodash.isLength=isLength;lodash.isMap=isMap;lodash.isMatch=isMatch;lodash.isMatchWith=isMatchWith;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNil=isNil;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isObjectLike=isObjectLike;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isSafeInteger=isSafeInteger;lodash.isSet=isSet;lodash.isString=isString;lodash.isSymbol=isSymbol;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.isWeakMap=isWeakMap;lodash.isWeakSet=isWeakSet;lodash.join=join;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lowerCase=lowerCase;lodash.lowerFirst=lowerFirst;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.maxBy=maxBy;lodash.mean=mean;lodash.meanBy=meanBy;lodash.min=min;lodash.minBy=minBy;lodash.stubArray=stubArray;lodash.stubFalse=stubFalse;lodash.stubObject=stubObject;lodash.stubString=stubString;lodash.stubTrue=stubTrue;lodash.multiply=multiply;lodash.nth=nth;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padEnd=padEnd;lodash.padStart=padStart;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.replace=replace;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.sample=sample;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedIndexBy=sortedIndexBy;lodash.sortedIndexOf=sortedIndexOf;lodash.sortedLastIndex=sortedLastIndex;lodash.sortedLastIndexBy=sortedLastIndexBy;lodash.sortedLastIndexOf=sortedLastIndexOf;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.subtract=subtract;lodash.sum=sum;lodash.sumBy=sumBy;lodash.template=template;lodash.times=times;lodash.toFinite=toFinite;lodash.toInteger=toInteger;lodash.toLength=toLength;lodash.toLower=toLower;lodash.toNumber=toNumber;lodash.toSafeInteger=toSafeInteger;lodash.toString=toString;lodash.toUpper=toUpper;lodash.trim=trim;lodash.trimEnd=trimEnd;lodash.trimStart=trimStart;lodash.truncate=truncate;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.upperCase=upperCase;lodash.upperFirst=upperFirst;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.first=head;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!hasOwnProperty.call(lodash.prototype,methodName)){source[methodName]=func}});return source}(),{chain:false});lodash.VERSION=VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash});arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();if(result.__filtered__){result.__takeCount__=nativeMin(n,result.__takeCount__)}else{result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName+(result.__dir__<0?"Right":"")})}return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}});arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type});result.__filtered__=result.__filtered__||isFilter;return result}});arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}});arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}});LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()};LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)};LazyWrapper.prototype.invokeMap=baseRest(function(path,args){if(typeof path=="function"){return new LazyWrapper(this)}return this.map(function(value){return baseInvoke(value,path,args)})});LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))};LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result)}if(start<0){result=result.takeRight(-start)}else if(start){result=result.drop(start)}if(end!==undefined){end=toInteger(end);result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()};LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+(methodName=="last"?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);if(!lodashFunc){return}lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);var interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result};if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1){isLazy=useLazy=false}var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(result,chainAll)}if(isUnwrapped&&onlyLazy){return func.apply(this,args)}result=this.thru(interceptor);return isUnwrapped?isTaker?result.value()[0]:result.value():result}});arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args)}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"",names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}});realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.at=wrapperAt;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.next=wrapperNext;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.first=lodash.prototype.head;if(symIterator){lodash.prototype[symIterator]=wrapperToIterator}return lodash};var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeModule){(freeModule.exports=_)._=_;freeExports._=_}else{root._=_}}).call(this)}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],165:[function(require,module,exports){"use strict";module.exports=LRUCache;var Map=require("pseudomap");var util=require("util");var Yallist=require("yallist");var hasSymbol=typeof Symbol==="function";var makeSymbol;if(hasSymbol){makeSymbol=function(key){return Symbol.for(key)}}else{makeSymbol=function(key){return"_"+key}}var MAX=makeSymbol("max");var LENGTH=makeSymbol("length");var LENGTH_CALCULATOR=makeSymbol("lengthCalculator");var ALLOW_STALE=makeSymbol("allowStale");var MAX_AGE=makeSymbol("maxAge");var DISPOSE=makeSymbol("dispose");var NO_DISPOSE_ON_SET=makeSymbol("noDisposeOnSet");var LRU_LIST=makeSymbol("lruList");var CACHE=makeSymbol("cache");function naiveLength(){return 1}function LRUCache(options){if(!(this instanceof LRUCache)){return new LRUCache(options)}if(typeof options==="number"){options={max:options}}if(!options){options={}}var max=this[MAX]=options.max;if(!max||!(typeof max==="number")||max<=0){this[MAX]=Infinity}var lc=options.length||naiveLength;if(typeof lc!=="function"){lc=naiveLength}this[LENGTH_CALCULATOR]=lc;this[ALLOW_STALE]=options.stale||false;this[MAX_AGE]=options.maxAge||0;this[DISPOSE]=options.dispose;this[NO_DISPOSE_ON_SET]=options.noDisposeOnSet||false;this.reset()}Object.defineProperty(LRUCache.prototype,"max",{set:function(mL){if(!mL||!(typeof mL==="number")||mL<=0){mL=Infinity}this[MAX]=mL;trim(this)},get:function(){return this[MAX]},enumerable:true});Object.defineProperty(LRUCache.prototype,"allowStale",{set:function(allowStale){this[ALLOW_STALE]=!!allowStale},get:function(){return this[ALLOW_STALE]},enumerable:true});Object.defineProperty(LRUCache.prototype,"maxAge",{set:function(mA){if(!mA||!(typeof mA==="number")||mA<0){mA=0}this[MAX_AGE]=mA;trim(this)},get:function(){return this[MAX_AGE]},enumerable:true});Object.defineProperty(LRUCache.prototype,"lengthCalculator",{set:function(lC){if(typeof lC!=="function"){lC=naiveLength}if(lC!==this[LENGTH_CALCULATOR]){this[LENGTH_CALCULATOR]=lC;this[LENGTH]=0;this[LRU_LIST].forEach(function(hit){hit.length=this[LENGTH_CALCULATOR](hit.value,hit.key);this[LENGTH]+=hit.length},this)}trim(this)},get:function(){return this[LENGTH_CALCULATOR]},enumerable:true});Object.defineProperty(LRUCache.prototype,"length",{get:function(){return this[LENGTH]},enumerable:true});Object.defineProperty(LRUCache.prototype,"itemCount",{get:function(){return this[LRU_LIST].length},enumerable:true});LRUCache.prototype.rforEach=function(fn,thisp){thisp=thisp||this;for(var walker=this[LRU_LIST].tail;walker!==null;){var prev=walker.prev;forEachStep(this,fn,walker,thisp);walker=prev}};function forEachStep(self,fn,node,thisp){var hit=node.value;if(isStale(self,hit)){del(self,node);if(!self[ALLOW_STALE]){hit=undefined}}if(hit){fn.call(thisp,hit.value,hit.key,self)}}LRUCache.prototype.forEach=function(fn,thisp){thisp=thisp||this;for(var walker=this[LRU_LIST].head;walker!==null;){var next=walker.next;forEachStep(this,fn,walker,thisp);walker=next}};LRUCache.prototype.keys=function(){return this[LRU_LIST].toArray().map(function(k){return k.key},this)};LRUCache.prototype.values=function(){return this[LRU_LIST].toArray().map(function(k){return k.value},this)};LRUCache.prototype.reset=function(){if(this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length){this[LRU_LIST].forEach(function(hit){this[DISPOSE](hit.key,hit.value)},this)}this[CACHE]=new Map;this[LRU_LIST]=new Yallist;this[LENGTH]=0};LRUCache.prototype.dump=function(){return this[LRU_LIST].map(function(hit){if(!isStale(this,hit)){return{k:hit.key,v:hit.value,e:hit.now+(hit.maxAge||0)}}},this).toArray().filter(function(h){return h})};LRUCache.prototype.dumpLru=function(){return this[LRU_LIST]};LRUCache.prototype.inspect=function(n,opts){var str="LRUCache {";var extras=false;var as=this[ALLOW_STALE];if(as){str+="\n  allowStale: true";extras=true}var max=this[MAX];if(max&&max!==Infinity){if(extras){str+=","}str+="\n  max: "+util.inspect(max,opts);extras=true}var maxAge=this[MAX_AGE];if(maxAge){if(extras){str+=","}str+="\n  maxAge: "+util.inspect(maxAge,opts);extras=true}var lc=this[LENGTH_CALCULATOR];if(lc&&lc!==naiveLength){if(extras){str+=","}str+="\n  length: "+util.inspect(this[LENGTH],opts);extras=true}var didFirst=false;this[LRU_LIST].forEach(function(item){if(didFirst){str+=",\n  "}else{if(extras){str+=",\n"}didFirst=true;str+="\n  "}var key=util.inspect(item.key).split("\n").join("\n  ");var val={value:item.value};if(item.maxAge!==maxAge){val.maxAge=item.maxAge}if(lc!==naiveLength){val.length=item.length}if(isStale(this,item)){val.stale=true}val=util.inspect(val,opts).split("\n").join("\n  ");str+=key+" => "+val});if(didFirst||extras){str+="\n"}str+="}";return str};LRUCache.prototype.set=function(key,value,maxAge){maxAge=maxAge||this[MAX_AGE];var now=maxAge?Date.now():0;var len=this[LENGTH_CALCULATOR](value,key);if(this[CACHE].has(key)){if(len>this[MAX]){del(this,this[CACHE].get(key));return false}var node=this[CACHE].get(key);var item=node.value;if(this[DISPOSE]){if(!this[NO_DISPOSE_ON_SET]){this[DISPOSE](key,item.value)}}item.now=now;item.maxAge=maxAge;item.value=value;this[LENGTH]+=len-item.length;item.length=len;this.get(key);trim(this);return true}var hit=new Entry(key,value,len,now,maxAge);if(hit.length>this[MAX]){if(this[DISPOSE]){this[DISPOSE](key,value)}return false}this[LENGTH]+=hit.length;this[LRU_LIST].unshift(hit);this[CACHE].set(key,this[LRU_LIST].head);trim(this);return true};LRUCache.prototype.has=function(key){if(!this[CACHE].has(key))return false;var hit=this[CACHE].get(key).value;if(isStale(this,hit)){return false}return true};LRUCache.prototype.get=function(key){return get(this,key,true)};LRUCache.prototype.peek=function(key){return get(this,key,false)};LRUCache.prototype.pop=function(){var node=this[LRU_LIST].tail;if(!node)return null;del(this,node);return node.value};LRUCache.prototype.del=function(key){del(this,this[CACHE].get(key))};LRUCache.prototype.load=function(arr){this.reset();var now=Date.now();for(var l=arr.length-1;l>=0;l--){var hit=arr[l];var expiresAt=hit.e||0;if(expiresAt===0){this.set(hit.k,hit.v)}else{var maxAge=expiresAt-now;if(maxAge>0){this.set(hit.k,hit.v,maxAge)}}}};LRUCache.prototype.prune=function(){var self=this;this[CACHE].forEach(function(value,key){get(self,key,false)})};function get(self,key,doUse){var node=self[CACHE].get(key);if(node){var hit=node.value;if(isStale(self,hit)){del(self,node);if(!self[ALLOW_STALE])hit=undefined}else{if(doUse){self[LRU_LIST].unshiftNode(node)}}if(hit)hit=hit.value}return hit}function isStale(self,hit){if(!hit||!hit.maxAge&&!self[MAX_AGE]){return false}var stale=false;var diff=Date.now()-hit.now;if(hit.maxAge){stale=diff>hit.maxAge}else{stale=self[MAX_AGE]&&diff>self[MAX_AGE]}return stale}function trim(self){if(self[LENGTH]>self[MAX]){for(var walker=self[LRU_LIST].tail;self[LENGTH]>self[MAX]&&walker!==null;){var prev=walker.prev;del(self,walker);walker=prev}}}function del(self,node){if(node){var hit=node.value;if(self[DISPOSE]){self[DISPOSE](hit.key,hit.value)}self[LENGTH]-=hit.length;self[CACHE].delete(hit.key);self[LRU_LIST].removeNode(node)}}function Entry(key,value,length,now,maxAge){this.key=key;this.value=value;this.length=length;this.now=now;this.maxAge=maxAge||0}},{pseudomap:173,util:28,yallist:887}],166:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{dup:23}],167:[function(require,module,exports){(function(global){(function(){var performance=global.performance||{};var present=function(){var names=["now","webkitNow","msNow","mozNow","oNow"];while(names.length){var name=names.shift();if(name in performance){return performance[name].bind(performance)}}var dateNow=Date.now||function(){return(new Date).getTime()};var navigationStart=(performance.timing||{}).navigationStart||dateNow();return function(){return dateNow()-navigationStart}}();present.performanceNow=performance.now;present.noConflict=function(){performance.now=present.performanceNow};present.conflict=function(){performance.now=present};present.conflict();module.exports=present}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],168:[function(require,module,exports){module.exports=PriorityQueue;function PriorityQueue(comparator){this._comparator=comparator||PriorityQueue.DEFAULT_COMPARATOR;this._elements=[]}PriorityQueue.DEFAULT_COMPARATOR=function(a,b){if(typeof a==="number"&&typeof b==="number"){return a-b}else{a=a.toString();b=b.toString();if(a==b)return 0;return a>b?1:-1}};PriorityQueue.prototype.isEmpty=function(){return this.size()===0};PriorityQueue.prototype.peek=function(){if(this.isEmpty())throw new Error("PriorityQueue is empty");return this._elements[0]};PriorityQueue.prototype.deq=function(){var first=this.peek();var last=this._elements.pop();var size=this.size();if(size===0)return first;this._elements[0]=last;var current=0;while(current<size){var largest=current;var left=2*current+1;var right=2*current+2;if(left<size&&this._compare(left,largest)>=0){largest=left}if(right<size&&this._compare(right,largest)>=0){largest=right}if(largest===current)break;this._swap(largest,current);current=largest}return first};PriorityQueue.prototype.enq=function(element){var size=this._elements.push(element);var current=size-1;while(current>0){var parent=Math.floor((current-1)/2);if(this._compare(current,parent)<=0)break;this._swap(parent,current);current=parent}return size};PriorityQueue.prototype.size=function(){return this._elements.length};PriorityQueue.prototype.forEach=function(fn){return this._elements.forEach(fn)};PriorityQueue.prototype._compare=function(a,b){return this._comparator(this._elements[a],this._elements[b])};PriorityQueue.prototype._swap=function(a,b){var aux=this._elements[a];this._elements[a]=this._elements[b];this._elements[b]=aux}},{}],169:[function(require,module,exports){(function(process){(function(){"use strict";var printWarning=function(){};if(process.env.NODE_ENV!=="production"){var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");var loggedTypeFailures={};var has=Function.call.bind(Object.prototype.hasOwnProperty);printWarning=function(text){var message="Warning: "+text;if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}}}function checkPropTypes(typeSpecs,values,location,componentName,getStack){if(process.env.NODE_ENV!=="production"){for(var typeSpecName in typeSpecs){if(has(typeSpecs,typeSpecName)){var error;try{if(typeof typeSpecs[typeSpecName]!=="function"){var err=Error((componentName||"React class")+": "+location+" type `"+typeSpecName+"` is invalid; "+"it must be a function, usually from the `prop-types` package, but received `"+typeof typeSpecs[typeSpecName]+"`.");err.name="Invariant Violation";throw err}error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}if(error&&!(error instanceof Error)){printWarning((componentName||"React class")+": type specification of "+location+" `"+typeSpecName+"` is invalid; the type checker "+"function must return `null` or an `Error` but returned a "+typeof error+". "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).")}if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var stack=getStack?getStack():"";printWarning("Failed "+location+" type: "+error.message+(stack!=null?stack:""))}}}}}checkPropTypes.resetWarningCache=function(){if(process.env.NODE_ENV!=="production"){loggedTypeFailures={}}};module.exports=checkPropTypes}).call(this)}).call(this,require("_process"))},{"./lib/ReactPropTypesSecret":172,_process:25}],170:[function(require,module,exports){"use strict";var factory=require("./factoryWithTypeCheckers");module.exports=function(isValidElement){var throwOnDirectAccess=false;return factory(isValidElement,throwOnDirectAccess)}},{"./factoryWithTypeCheckers":171}],171:[function(require,module,exports){(function(process){(function(){"use strict";var ReactIs=require("react-is");var assign=require("object-assign");var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");var checkPropTypes=require("./checkPropTypes");var has=Function.call.bind(Object.prototype.hasOwnProperty);var printWarning=function(){};if(process.env.NODE_ENV!=="production"){printWarning=function(text){var message="Warning: "+text;if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}}}function emptyFunctionThatReturnsNull(){return null}module.exports=function(isValidElement,throwOnDirectAccess){var ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}var ANONYMOUS="<<anonymous>>";var ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),elementType:createElementTypeTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker,exact:createStrictShapeTypeChecker};function is(x,y){if(x===y){return x!==0||1/x===1/y}else{return x!==x&&y!==y}}function PropTypeError(message){this.message=message;this.stack=""}PropTypeError.prototype=Error.prototype;function createChainableTypeChecker(validate){if(process.env.NODE_ENV!=="production"){var manualPropTypeCallCache={};var manualPropTypeWarningCount=0}function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS;propFullName=propFullName||propName;if(secret!==ReactPropTypesSecret){if(throwOnDirectAccess){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use `PropTypes.checkPropTypes()` to call them. "+"Read more at http://fb.me/use-check-prop-types");err.name="Invariant Violation";throw err}else if(process.env.NODE_ENV!=="production"&&typeof console!=="undefined"){var cacheKey=componentName+":"+propName;if(!manualPropTypeCallCache[cacheKey]&&manualPropTypeWarningCount<3){printWarning("You are manually calling a React.PropTypes validation "+"function for the `"+propFullName+"` prop on `"+componentName+"`. This is deprecated "+"and will throw in the standalone `prop-types` package. "+"You may be seeing this warning due to a third-party PropTypes "+"library. See https://fb.me/react-warning-dont-call-proptypes "+"for details.");manualPropTypeCallCache[cacheKey]=true;manualPropTypeWarningCount++}}}if(props[propName]==null){if(isRequired){if(props[propName]===null){return new PropTypeError("The "+location+" `"+propFullName+"` is marked as required "+("in `"+componentName+"`, but its value is `null`."))}return new PropTypeError("The "+location+" `"+propFullName+"` is marked as required in "+("`"+componentName+"`, but its value is `undefined`."))}return null}else{return validate(props,propName,componentName,location,propFullName)}}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];var propType=getPropType(propValue);if(propType!==expectedType){var preciseType=getPreciseType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunctionThatReturnsNull)}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.")}var propValue=props[propName];if(!Array.isArray(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error){return error}}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createElementTypeTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!ReactIs.isValidElementType(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected a single ReactElement type."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;var actualClassName=getClassName(props[propName]);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues)){if(process.env.NODE_ENV!=="production"){if(arguments.length>1){printWarning("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. "+"A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).")}else{printWarning("Invalid argument supplied to oneOf, expected an array.")}}return emptyFunctionThatReturnsNull}function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];for(var i=0;i<expectedValues.length;i++){if(is(propValue,expectedValues[i])){return null}}var valuesString=JSON.stringify(expectedValues,function replacer(key,value){var type=getPreciseType(value);if(type==="symbol"){return String(value)}return value});return new PropTypeError("Invalid "+location+" `"+propFullName+"` of value `"+String(propValue)+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(validate)}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.")}var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue){if(has(propValue,key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error){return error}}}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers)){process.env.NODE_ENV!=="production"?printWarning("Invalid argument supplied to oneOfType, expected an instance of array."):void 0;return emptyFunctionThatReturnsNull}for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(typeof checker!=="function"){printWarning("Invalid argument supplied to oneOfType. Expected an array of check functions, but "+"received "+getPostfixForTypeWarning(checker)+" at index "+i+".");return emptyFunctionThatReturnsNull}}function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret)==null){return null}}return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(validate)}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue}var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error){return error}}return null}return createChainableTypeChecker(validate)}function createStrictShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}var allKeys=assign({},props[propName],shapeTypes);for(var key in allKeys){var checker=shapeTypes[key];if(!checker){return new PropTypeError("Invalid "+location+" `"+propFullName+"` key `"+key+"` supplied to `"+componentName+"`."+"\nBad object: "+JSON.stringify(props[propName],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(shapeTypes),null,"  "))}var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error){return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return true;case"boolean":return!propValue;case"object":if(Array.isArray(propValue)){return propValue.every(isNode)}if(propValue===null||isValidElement(propValue)){return true}var iteratorFn=getIteratorFn(propValue);if(iteratorFn){var iterator=iteratorFn.call(propValue);var step;if(iteratorFn!==propValue.entries){while(!(step=iterator.next()).done){if(!isNode(step.value)){return false}}}else{while(!(step=iterator.next()).done){var entry=step.value;if(entry){if(!isNode(entry[1])){return false}}}}}else{return false}return true;default:return false}}function isSymbol(propType,propValue){if(propType==="symbol"){return true}if(!propValue){return false}if(propValue["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&propValue instanceof Symbol){return true}return false}function getPropType(propValue){var propType=typeof propValue;if(Array.isArray(propValue)){return"array"}if(propValue instanceof RegExp){return"object"}if(isSymbol(propType,propValue)){return"symbol"}return propType}function getPreciseType(propValue){if(typeof propValue==="undefined"||propValue===null){return""+propValue}var propType=getPropType(propValue);if(propType==="object"){if(propValue instanceof Date){return"date"}else if(propValue instanceof RegExp){return"regexp"}}return propType}function getPostfixForTypeWarning(value){var type=getPreciseType(value);switch(type){case"array":case"object":return"an "+type;case"boolean":case"date":case"regexp":return"a "+type;default:return type}}function getClassName(propValue){if(!propValue.constructor||!propValue.constructor.name){return ANONYMOUS}return propValue.constructor.name}ReactPropTypes.checkPropTypes=checkPropTypes;ReactPropTypes.resetWarningCache=checkPropTypes.resetWarningCache;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}}).call(this)}).call(this,require("_process"))},{"./checkPropTypes":169,"./lib/ReactPropTypesSecret":172,_process:25,"object-assign":166,"react-is":306}],172:[function(require,module,exports){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},{}],173:[function(require,module,exports){(function(process){(function(){if(process.env.npm_package_name==="pseudomap"&&process.env.npm_lifecycle_script==="test")process.env.TEST_PSEUDOMAP="true";if(typeof Map==="function"&&!process.env.TEST_PSEUDOMAP){module.exports=Map}else{module.exports=require("./pseudomap")}}).call(this)}).call(this,require("_process"))},{"./pseudomap":174,_process:25}],174:[function(require,module,exports){var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=PseudoMap;function PseudoMap(set){if(!(this instanceof PseudoMap))throw new TypeError("Constructor PseudoMap requires 'new'");this.clear();if(set){if(set instanceof PseudoMap||typeof Map==="function"&&set instanceof Map)set.forEach(function(value,key){this.set(key,value)},this);else if(Array.isArray(set))set.forEach(function(kv){this.set(kv[0],kv[1])},this);else throw new TypeError("invalid argument")}}PseudoMap.prototype.forEach=function(fn,thisp){thisp=thisp||this;Object.keys(this._data).forEach(function(k){if(k!=="size")fn.call(thisp,this._data[k].value,this._data[k].key)},this)};PseudoMap.prototype.has=function(k){return!!find(this._data,k)};PseudoMap.prototype.get=function(k){var res=find(this._data,k);return res&&res.value};PseudoMap.prototype.set=function(k,v){set(this._data,k,v)};PseudoMap.prototype.delete=function(k){var res=find(this._data,k);if(res){delete this._data[res._index];this._data.size--}};PseudoMap.prototype.clear=function(){var data=Object.create(null);data.size=0;Object.defineProperty(this,"_data",{value:data,enumerable:false,configurable:true,writable:false})};Object.defineProperty(PseudoMap.prototype,"size",{get:function(){return this._data.size},set:function(n){},enumerable:true,configurable:true});PseudoMap.prototype.values=PseudoMap.prototype.keys=PseudoMap.prototype.entries=function(){throw new Error("iterators are not implemented in this version")};function same(a,b){return a===b||a!==a&&b!==b}function Entry(k,v,i){this.key=k;this.value=v;this._index=i}function find(data,k){for(var i=0,s="_"+k,key=s;hasOwnProperty.call(data,key);key=s+i++){if(same(data[key].key,k))return data[key]}}function set(data,k,v){for(var i=0,s="_"+k,key=s;hasOwnProperty.call(data,key);key=s+i++){if(same(data[key].key,k)){data[key].value=v;return}}data.size++;data[key]=new Entry(k,v,key)}},{}],175:[function(require,module,exports){"use strict";var React=require("react");var ReactDOM=require("react-dom-polyfill")(React);var findDOMNode=ReactDOM.findDOMNode;var className=require("classnames");var debounce=require("lodash.debounce");var CodeMirror=React.createClass({displayName:"CodeMirror",propTypes:{onChange:React.PropTypes.func,onFocusChange:React.PropTypes.func,onScroll:React.PropTypes.func,options:React.PropTypes.object,path:React.PropTypes.string,value:React.PropTypes.string,className:React.PropTypes.any,codeMirrorInstance:React.PropTypes.func},getCodeMirrorInstance:function getCodeMirrorInstance(){return this.props.codeMirrorInstance||require("codemirror")},getInitialState:function getInitialState(){return{isFocused:false}},componentDidMount:function componentDidMount(){var textareaNode=findDOMNode(this.refs.textarea);var codeMirrorInstance=this.getCodeMirrorInstance();this.codeMirror=codeMirrorInstance.fromTextArea(textareaNode,this.props.options);this.codeMirror.on("change",this.codemirrorValueChanged);this.codeMirror.on("focus",this.focusChanged.bind(this,true));this.codeMirror.on("blur",this.focusChanged.bind(this,false));this.codeMirror.on("scroll",this.scrollChanged);this.codeMirror.setValue(this.props.defaultValue||this.props.value||"")},componentWillUnmount:function componentWillUnmount(){if(this.codeMirror){this.codeMirror.toTextArea()}},componentWillReceiveProps:debounce(function(nextProps){if(this.codeMirror&&nextProps.value!==undefined&&this.codeMirror.getValue()!=nextProps.value){this.codeMirror.setValue(nextProps.value)}if(typeof nextProps.options==="object"){for(var optionName in nextProps.options){if(nextProps.options.hasOwnProperty(optionName)){this.codeMirror.setOption(optionName,nextProps.options[optionName])}}}},0),getCodeMirror:function getCodeMirror(){return this.codeMirror},focus:function focus(){if(this.codeMirror){this.codeMirror.focus()}},focusChanged:function focusChanged(focused){this.setState({isFocused:focused});this.props.onFocusChange&&this.props.onFocusChange(focused)},scrollChanged:function scrollChanged(cm){this.props.onScroll&&this.props.onScroll(cm.getScrollInfo())},codemirrorValueChanged:function codemirrorValueChanged(doc,change){if(this.props.onChange&&change.origin!="setValue"){this.props.onChange(doc.getValue())}},render:function render(){var editorClassName=className("ReactCodeMirror",this.state.isFocused?"ReactCodeMirror--focused":null,this.props.className);return React.createElement("div",{className:editorClassName},React.createElement("textarea",{ref:"textarea",name:this.props.path,defaultValue:this.props.value,autoComplete:"off"}))}});module.exports=CodeMirror},{classnames:73,codemirror:77,"lodash.debounce":163,react:332,"react-dom-polyfill":176}],176:[function(require,module,exports){"use strict";module.exports=function(React){var version=parseFloat(React.version);if(version>=.14){try{return require("react-dom")}catch(e){return null}}else{var render=React.render;var unmountComponentAtNode=React.unmountComponentAtNode;return{findDOMNode:function findDOMNode(reactElement){return typeof reactElement.getDOMNode==="function"?reactElement.getDOMNode():reactElement},render:render,unmountComponentAtNode:unmountComponentAtNode}}}},{"react-dom":177}],177:[function(require,module,exports){"use strict";module.exports=require("./lib/ReactDOM")},{"./lib/ReactDOM":207}],178:[function(require,module,exports){"use strict";var ARIADOMPropertyConfig={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};module.exports=ARIADOMPropertyConfig},{}],179:[function(require,module,exports){"use strict";var ReactDOMComponentTree=require("./ReactDOMComponentTree");var focusNode=require("fbjs/lib/focusNode");var AutoFocusUtils={focusDOMComponent:function(){focusNode(ReactDOMComponentTree.getNodeFromInstance(this))}};module.exports=AutoFocusUtils},{"./ReactDOMComponentTree":210,"fbjs/lib/focusNode":148}],180:[function(require,module,exports){"use strict";var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var FallbackCompositionState=require("./FallbackCompositionState");var SyntheticCompositionEvent=require("./SyntheticCompositionEvent");var SyntheticInputEvent=require("./SyntheticInputEvent");var END_KEYCODES=[9,13,27,32];var START_KEYCODE=229;var canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window;var documentMode=null;if(ExecutionEnvironment.canUseDOM&&"documentMode"in document){documentMode=document.documentMode}var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto();var useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11);function isPresto(){var opera=window.opera;return typeof opera==="object"&&typeof opera.version==="function"&&parseInt(opera.version(),10)<=12}var SPACEBAR_CODE=32;var SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE);var eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}};var hasSpaceKeypress=false;function isKeypressCommand(nativeEvent){return(nativeEvent.ctrlKey||nativeEvent.altKey||nativeEvent.metaKey)&&!(nativeEvent.ctrlKey&&nativeEvent.altKey)}function getCompositionEventType(topLevelType){switch(topLevelType){case"topCompositionStart":return eventTypes.compositionStart;case"topCompositionEnd":return eventTypes.compositionEnd;case"topCompositionUpdate":return eventTypes.compositionUpdate}}function isFallbackCompositionStart(topLevelType,nativeEvent){return topLevelType==="topKeyDown"&&nativeEvent.keyCode===START_KEYCODE}function isFallbackCompositionEnd(topLevelType,nativeEvent){switch(topLevelType){case"topKeyUp":return END_KEYCODES.indexOf(nativeEvent.keyCode)!==-1;case"topKeyDown":return nativeEvent.keyCode!==START_KEYCODE;case"topKeyPress":case"topMouseDown":case"topBlur":return true;default:return false}}function getDataFromCustomEvent(nativeEvent){var detail=nativeEvent.detail;if(typeof detail==="object"&&"data"in detail){return detail.data}return null}var currentComposition=null;function extractCompositionEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget){var eventType;var fallbackData;if(canUseCompositionEvent){eventType=getCompositionEventType(topLevelType)}else if(!currentComposition){if(isFallbackCompositionStart(topLevelType,nativeEvent)){eventType=eventTypes.compositionStart}}else if(isFallbackCompositionEnd(topLevelType,nativeEvent)){eventType=eventTypes.compositionEnd}if(!eventType){return null}if(useFallbackCompositionData){if(!currentComposition&&eventType===eventTypes.compositionStart){currentComposition=FallbackCompositionState.getPooled(nativeEventTarget)}else if(eventType===eventTypes.compositionEnd){if(currentComposition){fallbackData=currentComposition.getData()}}}var event=SyntheticCompositionEvent.getPooled(eventType,targetInst,nativeEvent,nativeEventTarget);if(fallbackData){event.data=fallbackData}else{var customData=getDataFromCustomEvent(nativeEvent);if(customData!==null){event.data=customData}}EventPropagators.accumulateTwoPhaseDispatches(event);return event}function getNativeBeforeInputChars(topLevelType,nativeEvent){switch(topLevelType){case"topCompositionEnd":return getDataFromCustomEvent(nativeEvent);case"topKeyPress":var which=nativeEvent.which;if(which!==SPACEBAR_CODE){return null}hasSpaceKeypress=true;return SPACEBAR_CHAR;case"topTextInput":var chars=nativeEvent.data;if(chars===SPACEBAR_CHAR&&hasSpaceKeypress){return null}return chars;default:return null}}function getFallbackBeforeInputChars(topLevelType,nativeEvent){if(currentComposition){if(topLevelType==="topCompositionEnd"||!canUseCompositionEvent&&isFallbackCompositionEnd(topLevelType,nativeEvent)){var chars=currentComposition.getData();FallbackCompositionState.release(currentComposition);currentComposition=null;return chars}return null}switch(topLevelType){case"topPaste":return null;case"topKeyPress":if(nativeEvent.which&&!isKeypressCommand(nativeEvent)){return String.fromCharCode(nativeEvent.which)}return null;case"topCompositionEnd":return useFallbackCompositionData?null:nativeEvent.data;default:return null}}function extractBeforeInputEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget){var chars;if(canUseTextInputEvent){chars=getNativeBeforeInputChars(topLevelType,nativeEvent)}else{chars=getFallbackBeforeInputChars(topLevelType,nativeEvent)}if(!chars){return null}var event=SyntheticInputEvent.getPooled(eventTypes.beforeInput,targetInst,nativeEvent,nativeEventTarget);event.data=chars;EventPropagators.accumulateTwoPhaseDispatches(event);return event}var BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){return[extractCompositionEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget),extractBeforeInputEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget)]}};module.exports=BeforeInputEventPlugin},{"./EventPropagators":196,"./FallbackCompositionState":197,"./SyntheticCompositionEvent":261,"./SyntheticInputEvent":265,"fbjs/lib/ExecutionEnvironment":140}],181:[function(require,module,exports){"use strict";var isUnitlessNumber={animationIterationCount:true,borderImageOutset:true,borderImageSlice:true,borderImageWidth:true,boxFlex:true,boxFlexGroup:true,boxOrdinalGroup:true,columnCount:true,columns:true,flex:true,flexGrow:true,flexPositive:true,flexShrink:true,flexNegative:true,flexOrder:true,gridRow:true,gridRowEnd:true,gridRowSpan:true,gridRowStart:true,gridColumn:true,gridColumnEnd:true,gridColumnSpan:true,gridColumnStart:true,fontWeight:true,lineClamp:true,lineHeight:true,opacity:true,order:true,orphans:true,tabSize:true,widows:true,zIndex:true,zoom:true,fillOpacity:true,floodOpacity:true,stopOpacity:true,strokeDasharray:true,strokeDashoffset:true,strokeMiterlimit:true,strokeOpacity:true,strokeWidth:true};function prefixKey(prefix,key){return prefix+key.charAt(0).toUpperCase()+key.substring(1)}var prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(prop){prefixes.forEach(function(prefix){isUnitlessNumber[prefixKey(prefix,prop)]=isUnitlessNumber[prop]})});var shorthandPropertyExpansions={background:{backgroundAttachment:true,backgroundColor:true,backgroundImage:true,backgroundPositionX:true,backgroundPositionY:true,backgroundRepeat:true},backgroundPosition:{backgroundPositionX:true,backgroundPositionY:true},border:{borderWidth:true,borderStyle:true,borderColor:true},borderBottom:{borderBottomWidth:true,borderBottomStyle:true,borderBottomColor:true},borderLeft:{borderLeftWidth:true,borderLeftStyle:true,borderLeftColor:true},borderRight:{borderRightWidth:true,borderRightStyle:true,borderRightColor:true},borderTop:{borderTopWidth:true,borderTopStyle:true,borderTopColor:true},font:{fontStyle:true,fontVariant:true,fontWeight:true,fontSize:true,lineHeight:true,fontFamily:true},outline:{outlineWidth:true,outlineStyle:true,outlineColor:true}};var CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty},{}],182:[function(require,module,exports){(function(process){(function(){"use strict";var CSSProperty=require("./CSSProperty");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var ReactInstrumentation=require("./ReactInstrumentation");var camelizeStyleName=require("fbjs/lib/camelizeStyleName");var dangerousStyleValue=require("./dangerousStyleValue");var hyphenateStyleName=require("fbjs/lib/hyphenateStyleName");var memoizeStringOnly=require("fbjs/lib/memoizeStringOnly");var warning=require("fbjs/lib/warning");var processStyleName=memoizeStringOnly(function(styleName){return hyphenateStyleName(styleName)});var hasShorthandPropertyBug=false;var styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=true}if(document.documentElement.style.cssFloat===undefined){styleFloatAccessor="styleFloat"}}if(process.env.NODE_ENV!=="production"){var badVendoredStyleNamePattern=/^(?:webkit|moz|o)[A-Z]/;var badStyleValueWithSemicolonPattern=/;\s*$/;var warnedStyleNames={};var warnedStyleValues={};var warnedForNaNValue=false;var warnHyphenatedStyleName=function(name,owner){if(warnedStyleNames.hasOwnProperty(name)&&warnedStyleNames[name]){return}warnedStyleNames[name]=true;process.env.NODE_ENV!=="production"?warning(false,"Unsupported style property %s. Did you mean %s?%s",name,camelizeStyleName(name),checkRenderMessage(owner)):void 0};var warnBadVendoredStyleName=function(name,owner){if(warnedStyleNames.hasOwnProperty(name)&&warnedStyleNames[name]){return}warnedStyleNames[name]=true;process.env.NODE_ENV!=="production"?warning(false,"Unsupported vendor-prefixed style property %s. Did you mean %s?%s",name,name.charAt(0).toUpperCase()+name.slice(1),checkRenderMessage(owner)):void 0};var warnStyleValueWithSemicolon=function(name,value,owner){if(warnedStyleValues.hasOwnProperty(value)&&warnedStyleValues[value]){return}warnedStyleValues[value]=true;process.env.NODE_ENV!=="production"?warning(false,"Style property values shouldn't contain a semicolon.%s "+'Try "%s: %s" instead.',checkRenderMessage(owner),name,value.replace(badStyleValueWithSemicolonPattern,"")):void 0};var warnStyleValueIsNaN=function(name,value,owner){if(warnedForNaNValue){return}warnedForNaNValue=true;process.env.NODE_ENV!=="production"?warning(false,"`NaN` is an invalid value for the `%s` css style property.%s",name,checkRenderMessage(owner)):void 0};var checkRenderMessage=function(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""};var warnValidStyle=function(name,value,component){var owner;if(component){owner=component._currentElement._owner}if(name.indexOf("-")>-1){warnHyphenatedStyleName(name,owner)}else if(badVendoredStyleNamePattern.test(name)){warnBadVendoredStyleName(name,owner)}else if(badStyleValueWithSemicolonPattern.test(value)){warnStyleValueWithSemicolon(name,value,owner)}if(typeof value==="number"&&isNaN(value)){warnStyleValueIsNaN(name,value,owner)}}}var CSSPropertyOperations={createMarkupForStyles:function(styles,component){var serialized="";for(var styleName in styles){if(!styles.hasOwnProperty(styleName)){continue}var isCustomProperty=styleName.indexOf("--")===0;var styleValue=styles[styleName];if(process.env.NODE_ENV!=="production"){if(!isCustomProperty){warnValidStyle(styleName,styleValue,component)}}if(styleValue!=null){serialized+=processStyleName(styleName)+":";serialized+=dangerousStyleValue(styleName,styleValue,component,isCustomProperty)+";"}}return serialized||null},setValueForStyles:function(node,styles,component){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:component._debugID,type:"update styles",payload:styles})}var style=node.style;for(var styleName in styles){if(!styles.hasOwnProperty(styleName)){continue}var isCustomProperty=styleName.indexOf("--")===0;if(process.env.NODE_ENV!=="production"){if(!isCustomProperty){warnValidStyle(styleName,styles[styleName],component)}}var styleValue=dangerousStyleValue(styleName,styles[styleName],component,isCustomProperty);if(styleName==="float"||styleName==="cssFloat"){styleName=styleFloatAccessor}if(isCustomProperty){style.setProperty(styleName,styleValue)}else if(styleValue){style[styleName]=styleValue}else{var expansion=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[styleName];if(expansion){for(var individualStyleName in expansion){style[individualStyleName]=""}}else{style[styleName]=""}}}}};module.exports=CSSPropertyOperations}).call(this)}).call(this,require("_process"))},{"./CSSProperty":181,"./ReactInstrumentation":239,"./dangerousStyleValue":278,_process:25,"fbjs/lib/ExecutionEnvironment":140,"fbjs/lib/camelizeStyleName":142,"fbjs/lib/hyphenateStyleName":153,"fbjs/lib/memoizeStringOnly":157,"fbjs/lib/warning":161}],183:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var PooledClass=require("./PooledClass");var invariant=require("fbjs/lib/invariant");var CallbackQueue=function(){function CallbackQueue(arg){_classCallCheck(this,CallbackQueue);this._callbacks=null;this._contexts=null;this._arg=arg}CallbackQueue.prototype.enqueue=function enqueue(callback,context){this._callbacks=this._callbacks||[];this._callbacks.push(callback);this._contexts=this._contexts||[];this._contexts.push(context)};CallbackQueue.prototype.notifyAll=function notifyAll(){var callbacks=this._callbacks;var contexts=this._contexts;var arg=this._arg;if(callbacks&&contexts){!(callbacks.length===contexts.length)?process.env.NODE_ENV!=="production"?invariant(false,"Mismatched list of contexts in callback queue"):_prodInvariant("24"):void 0;this._callbacks=null;this._contexts=null;for(var i=0;i<callbacks.length;i++){callbacks[i].call(contexts[i],arg)}callbacks.length=0;contexts.length=0}};CallbackQueue.prototype.checkpoint=function checkpoint(){return this._callbacks?this._callbacks.length:0};CallbackQueue.prototype.rollback=function rollback(len){if(this._callbacks&&this._contexts){this._callbacks.length=len;this._contexts.length=len}};CallbackQueue.prototype.reset=function reset(){this._callbacks=null;this._contexts=null};CallbackQueue.prototype.destructor=function destructor(){this.reset()};return CallbackQueue}();module.exports=PooledClass.addPoolingTo(CallbackQueue)}).call(this)}).call(this,require("_process"))},{"./PooledClass":201,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],184:[function(require,module,exports){"use strict";var EventPluginHub=require("./EventPluginHub");var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var SyntheticEvent=require("./SyntheticEvent");var inputValueTracking=require("./inputValueTracking");var getEventTarget=require("./getEventTarget");var isEventSupported=require("./isEventSupported");var isTextInputElement=require("./isTextInputElement");var eventTypes={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}};function createAndAccumulateChangeEvent(inst,nativeEvent,target){var event=SyntheticEvent.getPooled(eventTypes.change,inst,nativeEvent,target);event.type="change";EventPropagators.accumulateTwoPhaseDispatches(event);return event}var activeElement=null;var activeElementInst=null;function shouldUseChangeEvent(elem){var nodeName=elem.nodeName&&elem.nodeName.toLowerCase();return nodeName==="select"||nodeName==="input"&&elem.type==="file"}var doesChangeEventBubble=false;if(ExecutionEnvironment.canUseDOM){doesChangeEventBubble=isEventSupported("change")&&(!document.documentMode||document.documentMode>8)}function manualDispatchChangeEvent(nativeEvent){var event=createAndAccumulateChangeEvent(activeElementInst,nativeEvent,getEventTarget(nativeEvent));ReactUpdates.batchedUpdates(runEventInBatch,event)}function runEventInBatch(event){EventPluginHub.enqueueEvents(event);EventPluginHub.processEventQueue(false)}function startWatchingForChangeEventIE8(target,targetInst){activeElement=target;activeElementInst=targetInst;activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){if(!activeElement){return}activeElement.detachEvent("onchange",manualDispatchChangeEvent);activeElement=null;activeElementInst=null}function getInstIfValueChanged(targetInst,nativeEvent){var updated=inputValueTracking.updateValueIfChanged(targetInst);var simulated=nativeEvent.simulated===true&&ChangeEventPlugin._allowSimulatedPassThrough;if(updated||simulated){return targetInst}}function getTargetInstForChangeEvent(topLevelType,targetInst){if(topLevelType==="topChange"){return targetInst}}function handleEventsForChangeEventIE8(topLevelType,target,targetInst){if(topLevelType==="topFocus"){stopWatchingForChangeEventIE8();startWatchingForChangeEventIE8(target,targetInst)}else if(topLevelType==="topBlur"){stopWatchingForChangeEventIE8()}}var isInputEventSupported=false;if(ExecutionEnvironment.canUseDOM){isInputEventSupported=isEventSupported("input")&&(!document.documentMode||document.documentMode>9)}function startWatchingForValueChange(target,targetInst){activeElement=target;activeElementInst=targetInst;activeElement.attachEvent("onpropertychange",handlePropertyChange)}function stopWatchingForValueChange(){if(!activeElement){return}activeElement.detachEvent("onpropertychange",handlePropertyChange);activeElement=null;activeElementInst=null}function handlePropertyChange(nativeEvent){if(nativeEvent.propertyName!=="value"){return}if(getInstIfValueChanged(activeElementInst,nativeEvent)){manualDispatchChangeEvent(nativeEvent)}}function handleEventsForInputEventPolyfill(topLevelType,target,targetInst){if(topLevelType==="topFocus"){stopWatchingForValueChange();startWatchingForValueChange(target,targetInst)}else if(topLevelType==="topBlur"){stopWatchingForValueChange()}}function getTargetInstForInputEventPolyfill(topLevelType,targetInst,nativeEvent){if(topLevelType==="topSelectionChange"||topLevelType==="topKeyUp"||topLevelType==="topKeyDown"){return getInstIfValueChanged(activeElementInst,nativeEvent)}}function shouldUseClickEvent(elem){var nodeName=elem.nodeName;return nodeName&&nodeName.toLowerCase()==="input"&&(elem.type==="checkbox"||elem.type==="radio")}function getTargetInstForClickEvent(topLevelType,targetInst,nativeEvent){if(topLevelType==="topClick"){return getInstIfValueChanged(targetInst,nativeEvent)}}function getTargetInstForInputOrChangeEvent(topLevelType,targetInst,nativeEvent){if(topLevelType==="topInput"||topLevelType==="topChange"){return getInstIfValueChanged(targetInst,nativeEvent)}}function handleControlledInputBlur(inst,node){if(inst==null){return}var state=inst._wrapperState||node._wrapperState;if(!state||!state.controlled||node.type!=="number"){return}var value=""+node.value;if(node.getAttribute("value")!==value){node.setAttribute("value",value)}}var ChangeEventPlugin={eventTypes:eventTypes,_allowSimulatedPassThrough:true,_isInputEventSupported:isInputEventSupported,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var targetNode=targetInst?ReactDOMComponentTree.getNodeFromInstance(targetInst):window;var getTargetInstFunc,handleEventFunc;if(shouldUseChangeEvent(targetNode)){if(doesChangeEventBubble){getTargetInstFunc=getTargetInstForChangeEvent}else{handleEventFunc=handleEventsForChangeEventIE8}}else if(isTextInputElement(targetNode)){if(isInputEventSupported){getTargetInstFunc=getTargetInstForInputOrChangeEvent}else{getTargetInstFunc=getTargetInstForInputEventPolyfill;handleEventFunc=handleEventsForInputEventPolyfill}}else if(shouldUseClickEvent(targetNode)){getTargetInstFunc=getTargetInstForClickEvent}if(getTargetInstFunc){var inst=getTargetInstFunc(topLevelType,targetInst,nativeEvent);if(inst){var event=createAndAccumulateChangeEvent(inst,nativeEvent,nativeEventTarget);return event}}if(handleEventFunc){handleEventFunc(topLevelType,targetNode,targetInst)}if(topLevelType==="topBlur"){handleControlledInputBlur(targetInst,targetNode)}}};module.exports=ChangeEventPlugin},{"./EventPluginHub":193,"./EventPropagators":196,"./ReactDOMComponentTree":210,"./ReactUpdates":254,"./SyntheticEvent":263,"./getEventTarget":286,"./inputValueTracking":292,"./isEventSupported":294,"./isTextInputElement":295,"fbjs/lib/ExecutionEnvironment":140}],185:[function(require,module,exports){(function(process){(function(){"use strict";var DOMLazyTree=require("./DOMLazyTree");var Danger=require("./Danger");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInstrumentation=require("./ReactInstrumentation");var createMicrosoftUnsafeLocalFunction=require("./createMicrosoftUnsafeLocalFunction");var setInnerHTML=require("./setInnerHTML");var setTextContent=require("./setTextContent");function getNodeAfter(parentNode,node){if(Array.isArray(node)){node=node[1]}return node?node.nextSibling:parentNode.firstChild}var insertChildAt=createMicrosoftUnsafeLocalFunction(function(parentNode,childNode,referenceNode){parentNode.insertBefore(childNode,referenceNode)});function insertLazyTreeChildAt(parentNode,childTree,referenceNode){DOMLazyTree.insertTreeBefore(parentNode,childTree,referenceNode)}function moveChild(parentNode,childNode,referenceNode){if(Array.isArray(childNode)){moveDelimitedText(parentNode,childNode[0],childNode[1],referenceNode)}else{insertChildAt(parentNode,childNode,referenceNode)}}function removeChild(parentNode,childNode){if(Array.isArray(childNode)){var closingComment=childNode[1];childNode=childNode[0];removeDelimitedText(parentNode,childNode,closingComment);parentNode.removeChild(closingComment)}parentNode.removeChild(childNode)}function moveDelimitedText(parentNode,openingComment,closingComment,referenceNode){var node=openingComment;while(true){var nextNode=node.nextSibling;insertChildAt(parentNode,node,referenceNode);if(node===closingComment){break}node=nextNode}}function removeDelimitedText(parentNode,startNode,closingComment){while(true){var node=startNode.nextSibling;if(node===closingComment){break}else{parentNode.removeChild(node)}}}function replaceDelimitedText(openingComment,closingComment,stringText){var parentNode=openingComment.parentNode;var nodeAfterComment=openingComment.nextSibling;if(nodeAfterComment===closingComment){if(stringText){insertChildAt(parentNode,document.createTextNode(stringText),nodeAfterComment)}}else{if(stringText){setTextContent(nodeAfterComment,stringText);removeDelimitedText(parentNode,nodeAfterComment,closingComment)}else{removeDelimitedText(parentNode,openingComment,closingComment)}}if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(openingComment)._debugID,type:"replace text",payload:stringText})}}var dangerouslyReplaceNodeWithMarkup=Danger.dangerouslyReplaceNodeWithMarkup;if(process.env.NODE_ENV!=="production"){dangerouslyReplaceNodeWithMarkup=function(oldChild,markup,prevInstance){Danger.dangerouslyReplaceNodeWithMarkup(oldChild,markup);if(prevInstance._debugID!==0){ReactInstrumentation.debugTool.onHostOperation({instanceID:prevInstance._debugID,type:"replace with",payload:markup.toString()})}else{var nextInstance=ReactDOMComponentTree.getInstanceFromNode(markup.node);if(nextInstance._debugID!==0){ReactInstrumentation.debugTool.onHostOperation({instanceID:nextInstance._debugID,type:"mount",payload:markup.toString()})}}}}var DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:dangerouslyReplaceNodeWithMarkup,replaceDelimitedText:replaceDelimitedText,processUpdates:function(parentNode,updates){if(process.env.NODE_ENV!=="production"){var parentNodeDebugID=ReactDOMComponentTree.getInstanceFromNode(parentNode)._debugID}for(var k=0;k<updates.length;k++){var update=updates[k];switch(update.type){case"INSERT_MARKUP":insertLazyTreeChildAt(parentNode,update.content,getNodeAfter(parentNode,update.afterNode));if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"insert child",payload:{toIndex:update.toIndex,content:update.content.toString()}})}break;case"MOVE_EXISTING":moveChild(parentNode,update.fromNode,getNodeAfter(parentNode,update.afterNode));if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"move child",payload:{fromIndex:update.fromIndex,toIndex:update.toIndex}})}break;case"SET_MARKUP":setInnerHTML(parentNode,update.content);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"replace children",payload:update.content.toString()})}break;case"TEXT_CONTENT":setTextContent(parentNode,update.content);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"replace text",payload:update.content.toString()})}break;case"REMOVE_NODE":removeChild(parentNode,update.fromNode);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"remove child",payload:{fromIndex:update.fromIndex}})}break}}}};module.exports=DOMChildrenOperations}).call(this)}).call(this,require("_process"))},{"./DOMLazyTree":186,"./Danger":190,"./ReactDOMComponentTree":210,"./ReactInstrumentation":239,"./createMicrosoftUnsafeLocalFunction":277,"./setInnerHTML":299,"./setTextContent":300,_process:25}],186:[function(require,module,exports){"use strict";var DOMNamespaces=require("./DOMNamespaces");var setInnerHTML=require("./setInnerHTML");var createMicrosoftUnsafeLocalFunction=require("./createMicrosoftUnsafeLocalFunction");var setTextContent=require("./setTextContent");var ELEMENT_NODE_TYPE=1;var DOCUMENT_FRAGMENT_NODE_TYPE=11;var enableLazy=typeof document!=="undefined"&&typeof document.documentMode==="number"||typeof navigator!=="undefined"&&typeof navigator.userAgent==="string"&&/\bEdge\/\d/.test(navigator.userAgent);function insertTreeChildren(tree){if(!enableLazy){return}var node=tree.node;var children=tree.children;if(children.length){for(var i=0;i<children.length;i++){insertTreeBefore(node,children[i],null)}}else if(tree.html!=null){setInnerHTML(node,tree.html)}else if(tree.text!=null){setTextContent(node,tree.text)}}var insertTreeBefore=createMicrosoftUnsafeLocalFunction(function(parentNode,tree,referenceNode){if(tree.node.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE||tree.node.nodeType===ELEMENT_NODE_TYPE&&tree.node.nodeName.toLowerCase()==="object"&&(tree.node.namespaceURI==null||tree.node.namespaceURI===DOMNamespaces.html)){insertTreeChildren(tree);parentNode.insertBefore(tree.node,referenceNode)}else{parentNode.insertBefore(tree.node,referenceNode);insertTreeChildren(tree)}});function replaceChildWithTree(oldNode,newTree){oldNode.parentNode.replaceChild(newTree.node,oldNode);insertTreeChildren(newTree)}function queueChild(parentTree,childTree){if(enableLazy){parentTree.children.push(childTree)}else{parentTree.node.appendChild(childTree.node)}}function queueHTML(tree,html){if(enableLazy){tree.html=html}else{setInnerHTML(tree.node,html)}}function queueText(tree,text){if(enableLazy){tree.text=text}else{setTextContent(tree.node,text)}}function toString(){return this.node.nodeName}function DOMLazyTree(node){return{node:node,children:[],html:null,text:null,toString:toString}}DOMLazyTree.insertTreeBefore=insertTreeBefore;DOMLazyTree.replaceChildWithTree=replaceChildWithTree;DOMLazyTree.queueChild=queueChild;DOMLazyTree.queueHTML=queueHTML;DOMLazyTree.queueText=queueText;module.exports=DOMLazyTree},{"./DOMNamespaces":187,"./createMicrosoftUnsafeLocalFunction":277,"./setInnerHTML":299,"./setTextContent":300}],187:[function(require,module,exports){"use strict";var DOMNamespaces={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};module.exports=DOMNamespaces},{}],188:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function checkMask(value,bitmask){return(value&bitmask)===bitmask}var DOMPropertyInjection={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:16|8,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(domPropertyConfig){var Injection=DOMPropertyInjection;var Properties=domPropertyConfig.Properties||{};var DOMAttributeNamespaces=domPropertyConfig.DOMAttributeNamespaces||{};var DOMAttributeNames=domPropertyConfig.DOMAttributeNames||{};var DOMPropertyNames=domPropertyConfig.DOMPropertyNames||{};var DOMMutationMethods=domPropertyConfig.DOMMutationMethods||{};if(domPropertyConfig.isCustomAttribute){DOMProperty._isCustomAttributeFunctions.push(domPropertyConfig.isCustomAttribute)}for(var propName in Properties){!!DOMProperty.properties.hasOwnProperty(propName)?process.env.NODE_ENV!=="production"?invariant(false,"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",propName):_prodInvariant("48",propName):void 0;var lowerCased=propName.toLowerCase();var propConfig=Properties[propName];var propertyInfo={attributeName:lowerCased,attributeNamespace:null,propertyName:propName,mutationMethod:null,mustUseProperty:checkMask(propConfig,Injection.MUST_USE_PROPERTY),hasBooleanValue:checkMask(propConfig,Injection.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(propConfig,Injection.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(propConfig,Injection.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(propConfig,Injection.HAS_OVERLOADED_BOOLEAN_VALUE)};!(propertyInfo.hasBooleanValue+propertyInfo.hasNumericValue+propertyInfo.hasOverloadedBooleanValue<=1)?process.env.NODE_ENV!=="production"?invariant(false,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",propName):_prodInvariant("50",propName):void 0;if(process.env.NODE_ENV!=="production"){DOMProperty.getPossibleStandardName[lowerCased]=propName}if(DOMAttributeNames.hasOwnProperty(propName)){var attributeName=DOMAttributeNames[propName];propertyInfo.attributeName=attributeName;if(process.env.NODE_ENV!=="production"){DOMProperty.getPossibleStandardName[attributeName]=propName}}if(DOMAttributeNamespaces.hasOwnProperty(propName)){propertyInfo.attributeNamespace=DOMAttributeNamespaces[propName]}if(DOMPropertyNames.hasOwnProperty(propName)){propertyInfo.propertyName=DOMPropertyNames[propName]}if(DOMMutationMethods.hasOwnProperty(propName)){propertyInfo.mutationMethod=DOMMutationMethods[propName]}DOMProperty.properties[propName]=propertyInfo}}};var ATTRIBUTE_NAME_START_CHAR=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:ATTRIBUTE_NAME_START_CHAR,ATTRIBUTE_NAME_CHAR:ATTRIBUTE_NAME_START_CHAR+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:process.env.NODE_ENV!=="production"?{autofocus:"autoFocus"}:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(attributeName){for(var i=0;i<DOMProperty._isCustomAttributeFunctions.length;i++){var isCustomAttributeFn=DOMProperty._isCustomAttributeFunctions[i];if(isCustomAttributeFn(attributeName)){return true}}return false},injection:DOMPropertyInjection};module.exports=DOMProperty}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],189:[function(require,module,exports){(function(process){(function(){"use strict";var DOMProperty=require("./DOMProperty");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInstrumentation=require("./ReactInstrumentation");var quoteAttributeValueForBrowser=require("./quoteAttributeValueForBrowser");var warning=require("fbjs/lib/warning");var VALID_ATTRIBUTE_NAME_REGEX=new RegExp("^["+DOMProperty.ATTRIBUTE_NAME_START_CHAR+"]["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$");var illegalAttributeNameCache={};var validatedAttributeNameCache={};function isAttributeNameSafe(attributeName){if(validatedAttributeNameCache.hasOwnProperty(attributeName)){return true}if(illegalAttributeNameCache.hasOwnProperty(attributeName)){return false}if(VALID_ATTRIBUTE_NAME_REGEX.test(attributeName)){validatedAttributeNameCache[attributeName]=true;return true}illegalAttributeNameCache[attributeName]=true;process.env.NODE_ENV!=="production"?warning(false,"Invalid attribute name: `%s`",attributeName):void 0;return false}function shouldIgnoreValue(propertyInfo,value){return value==null||propertyInfo.hasBooleanValue&&!value||propertyInfo.hasNumericValue&&isNaN(value)||propertyInfo.hasPositiveNumericValue&&value<1||propertyInfo.hasOverloadedBooleanValue&&value===false}var DOMPropertyOperations={createMarkupForID:function(id){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(id)},setAttributeForID:function(node,id){node.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,id)},createMarkupForRoot:function(){return DOMProperty.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(node){node.setAttribute(DOMProperty.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){if(shouldIgnoreValue(propertyInfo,value)){return""}var attributeName=propertyInfo.attributeName;if(propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===true){return attributeName+'=""'}return attributeName+"="+quoteAttributeValueForBrowser(value)}else if(DOMProperty.isCustomAttribute(name)){if(value==null){return""}return name+"="+quoteAttributeValueForBrowser(value)}return null},createMarkupForCustomAttribute:function(name,value){if(!isAttributeNameSafe(name)||value==null){return""}return name+"="+quoteAttributeValueForBrowser(value)},setValueForProperty:function(node,name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod){mutationMethod(node,value)}else if(shouldIgnoreValue(propertyInfo,value)){this.deleteValueForProperty(node,name);return}else if(propertyInfo.mustUseProperty){node[propertyInfo.propertyName]=value}else{var attributeName=propertyInfo.attributeName;var namespace=propertyInfo.attributeNamespace;if(namespace){node.setAttributeNS(namespace,attributeName,""+value)}else if(propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===true){node.setAttribute(attributeName,"")}else{node.setAttribute(attributeName,""+value)}}}else if(DOMProperty.isCustomAttribute(name)){DOMPropertyOperations.setValueForAttribute(node,name,value);return}if(process.env.NODE_ENV!=="production"){var payload={};payload[name]=value;ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"update attribute",payload:payload})}},setValueForAttribute:function(node,name,value){if(!isAttributeNameSafe(name)){return}if(value==null){node.removeAttribute(name)}else{node.setAttribute(name,""+value)}if(process.env.NODE_ENV!=="production"){var payload={};payload[name]=value;ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"update attribute",payload:payload})}},deleteValueForAttribute:function(node,name){node.removeAttribute(name);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"remove attribute",payload:name})}},deleteValueForProperty:function(node,name){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod){mutationMethod(node,undefined)}else if(propertyInfo.mustUseProperty){var propName=propertyInfo.propertyName;if(propertyInfo.hasBooleanValue){node[propName]=false}else{node[propName]=""}}else{node.removeAttribute(propertyInfo.attributeName)}}else if(DOMProperty.isCustomAttribute(name)){node.removeAttribute(name)}if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"remove attribute",payload:name})}}};module.exports=DOMPropertyOperations}).call(this)}).call(this,require("_process"))},{"./DOMProperty":188,"./ReactDOMComponentTree":210,"./ReactInstrumentation":239,"./quoteAttributeValueForBrowser":296,_process:25,"fbjs/lib/warning":161}],190:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var DOMLazyTree=require("./DOMLazyTree");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var createNodesFromMarkup=require("fbjs/lib/createNodesFromMarkup");var emptyFunction=require("fbjs/lib/emptyFunction");var invariant=require("fbjs/lib/invariant");var Danger={dangerouslyReplaceNodeWithMarkup:function(oldChild,markup){!ExecutionEnvironment.canUseDOM?process.env.NODE_ENV!=="production"?invariant(false,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString() for server rendering."):_prodInvariant("56"):void 0;!markup?process.env.NODE_ENV!=="production"?invariant(false,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):_prodInvariant("57"):void 0;!(oldChild.nodeName!=="HTML")?process.env.NODE_ENV!=="production"?invariant(false,"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See ReactDOMServer.renderToString()."):_prodInvariant("58"):void 0;if(typeof markup==="string"){var newChild=createNodesFromMarkup(markup,emptyFunction)[0];oldChild.parentNode.replaceChild(newChild,oldChild)}else{DOMLazyTree.replaceChildWithTree(oldChild,markup)}}};module.exports=Danger}).call(this)}).call(this,require("_process"))},{"./DOMLazyTree":186,"./reactProdInvariant":297,_process:25,"fbjs/lib/ExecutionEnvironment":140,"fbjs/lib/createNodesFromMarkup":145,"fbjs/lib/emptyFunction":146,"fbjs/lib/invariant":154}],191:[function(require,module,exports){"use strict";var DefaultEventPluginOrder=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];module.exports=DefaultEventPluginOrder},{}],192:[function(require,module,exports){"use strict";var EventPropagators=require("./EventPropagators");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var SyntheticMouseEvent=require("./SyntheticMouseEvent");var eventTypes={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}};var EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){if(topLevelType==="topMouseOver"&&(nativeEvent.relatedTarget||nativeEvent.fromElement)){return null}if(topLevelType!=="topMouseOut"&&topLevelType!=="topMouseOver"){return null}var win;if(nativeEventTarget.window===nativeEventTarget){win=nativeEventTarget}else{var doc=nativeEventTarget.ownerDocument;if(doc){win=doc.defaultView||doc.parentWindow}else{win=window}}var from;var to;if(topLevelType==="topMouseOut"){from=targetInst;var related=nativeEvent.relatedTarget||nativeEvent.toElement;to=related?ReactDOMComponentTree.getClosestInstanceFromNode(related):null}else{from=null;to=targetInst}if(from===to){return null}var fromNode=from==null?win:ReactDOMComponentTree.getNodeFromInstance(from);var toNode=to==null?win:ReactDOMComponentTree.getNodeFromInstance(to);var leave=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,from,nativeEvent,nativeEventTarget);leave.type="mouseleave";leave.target=fromNode;leave.relatedTarget=toNode;var enter=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,to,nativeEvent,nativeEventTarget);enter.type="mouseenter";enter.target=toNode;enter.relatedTarget=fromNode;EventPropagators.accumulateEnterLeaveDispatches(leave,enter,from,to);return[leave,enter]}};module.exports=EnterLeaveEventPlugin},{"./EventPropagators":196,"./ReactDOMComponentTree":210,"./SyntheticMouseEvent":267}],193:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var EventPluginRegistry=require("./EventPluginRegistry");var EventPluginUtils=require("./EventPluginUtils");var ReactErrorUtils=require("./ReactErrorUtils");var accumulateInto=require("./accumulateInto");var forEachAccumulated=require("./forEachAccumulated");var invariant=require("fbjs/lib/invariant");var listenerBank={};var eventQueue=null;var executeDispatchesAndRelease=function(event,simulated){if(event){EventPluginUtils.executeDispatchesInOrder(event,simulated);if(!event.isPersistent()){event.constructor.release(event)}}};var executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,true)};var executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,false)};var getDictionaryKey=function(inst){return"."+inst._rootNodeID};function isInteractive(tag){return tag==="button"||tag==="input"||tag==="select"||tag==="textarea"}function shouldPreventMouseEvent(name,type,props){switch(name){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!!(props.disabled&&isInteractive(type));default:return false}}var EventPluginHub={injection:{injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},putListener:function(inst,registrationName,listener){!(typeof listener==="function")?process.env.NODE_ENV!=="production"?invariant(false,"Expected %s listener to be a function, instead got type %s",registrationName,typeof listener):_prodInvariant("94",registrationName,typeof listener):void 0;var key=getDictionaryKey(inst);var bankForRegistrationName=listenerBank[registrationName]||(listenerBank[registrationName]={});bankForRegistrationName[key]=listener;var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];if(PluginModule&&PluginModule.didPutListener){PluginModule.didPutListener(inst,registrationName,listener)}},getListener:function(inst,registrationName){var bankForRegistrationName=listenerBank[registrationName];if(shouldPreventMouseEvent(registrationName,inst._currentElement.type,inst._currentElement.props)){return null}var key=getDictionaryKey(inst);return bankForRegistrationName&&bankForRegistrationName[key]},deleteListener:function(inst,registrationName){var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];if(PluginModule&&PluginModule.willDeleteListener){PluginModule.willDeleteListener(inst,registrationName)}var bankForRegistrationName=listenerBank[registrationName];if(bankForRegistrationName){var key=getDictionaryKey(inst);delete bankForRegistrationName[key]}},deleteAllListeners:function(inst){var key=getDictionaryKey(inst);for(var registrationName in listenerBank){if(!listenerBank.hasOwnProperty(registrationName)){continue}if(!listenerBank[registrationName][key]){continue}var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];if(PluginModule&&PluginModule.willDeleteListener){PluginModule.willDeleteListener(inst,registrationName)}delete listenerBank[registrationName][key]}},extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var events;var plugins=EventPluginRegistry.plugins;for(var i=0;i<plugins.length;i++){var possiblePlugin=plugins[i];if(possiblePlugin){var extractedEvents=possiblePlugin.extractEvents(topLevelType,targetInst,nativeEvent,nativeEventTarget);if(extractedEvents){events=accumulateInto(events,extractedEvents)}}}return events},enqueueEvents:function(events){if(events){eventQueue=accumulateInto(eventQueue,events)}},processEventQueue:function(simulated){var processingEventQueue=eventQueue;eventQueue=null;if(simulated){forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseSimulated)}else{forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseTopLevel)}!!eventQueue?process.env.NODE_ENV!=="production"?invariant(false,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):_prodInvariant("95"):void 0;ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub}).call(this)}).call(this,require("_process"))},{"./EventPluginRegistry":194,"./EventPluginUtils":195,"./ReactErrorUtils":230,"./accumulateInto":274,"./forEachAccumulated":282,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],194:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var eventPluginOrder=null;var namesToPlugins={};function recomputePluginOrdering(){if(!eventPluginOrder){return}for(var pluginName in namesToPlugins){var pluginModule=namesToPlugins[pluginName];var pluginIndex=eventPluginOrder.indexOf(pluginName);!(pluginIndex>-1)?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",pluginName):_prodInvariant("96",pluginName):void 0;if(EventPluginRegistry.plugins[pluginIndex]){continue}!pluginModule.extractEvents?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",pluginName):_prodInvariant("97",pluginName):void 0;EventPluginRegistry.plugins[pluginIndex]=pluginModule;var publishedEvents=pluginModule.eventTypes;for(var eventName in publishedEvents){!publishEventForPlugin(publishedEvents[eventName],pluginModule,eventName)?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",eventName,pluginName):_prodInvariant("98",eventName,pluginName):void 0}}}function publishEventForPlugin(dispatchConfig,pluginModule,eventName){!!EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(eventName)?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",eventName):_prodInvariant("99",eventName):void 0;EventPluginRegistry.eventNameDispatchConfigs[eventName]=dispatchConfig;var phasedRegistrationNames=dispatchConfig.phasedRegistrationNames;if(phasedRegistrationNames){for(var phaseName in phasedRegistrationNames){if(phasedRegistrationNames.hasOwnProperty(phaseName)){var phasedRegistrationName=phasedRegistrationNames[phaseName];publishRegistrationName(phasedRegistrationName,pluginModule,eventName)}}return true}else if(dispatchConfig.registrationName){publishRegistrationName(dispatchConfig.registrationName,pluginModule,eventName);return true}return false}function publishRegistrationName(registrationName,pluginModule,eventName){!!EventPluginRegistry.registrationNameModules[registrationName]?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",registrationName):_prodInvariant("100",registrationName):void 0;EventPluginRegistry.registrationNameModules[registrationName]=pluginModule;EventPluginRegistry.registrationNameDependencies[registrationName]=pluginModule.eventTypes[eventName].dependencies;if(process.env.NODE_ENV!=="production"){var lowerCasedName=registrationName.toLowerCase();EventPluginRegistry.possibleRegistrationNames[lowerCasedName]=registrationName;if(registrationName==="onDoubleClick"){EventPluginRegistry.possibleRegistrationNames.ondblclick=registrationName}}}var EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:process.env.NODE_ENV!=="production"?{}:null,injectEventPluginOrder:function(injectedEventPluginOrder){!!eventPluginOrder?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):_prodInvariant("101"):void 0;eventPluginOrder=Array.prototype.slice.call(injectedEventPluginOrder);recomputePluginOrdering()},injectEventPluginsByName:function(injectedNamesToPlugins){var isOrderingDirty=false;for(var pluginName in injectedNamesToPlugins){if(!injectedNamesToPlugins.hasOwnProperty(pluginName)){continue}var pluginModule=injectedNamesToPlugins[pluginName];if(!namesToPlugins.hasOwnProperty(pluginName)||namesToPlugins[pluginName]!==pluginModule){!!namesToPlugins[pluginName]?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",pluginName):_prodInvariant("102",pluginName):void 0;namesToPlugins[pluginName]=pluginModule;isOrderingDirty=true}}if(isOrderingDirty){recomputePluginOrdering()}},getPluginModuleForEvent:function(event){var dispatchConfig=event.dispatchConfig;if(dispatchConfig.registrationName){return EventPluginRegistry.registrationNameModules[dispatchConfig.registrationName]||null}if(dispatchConfig.phasedRegistrationNames!==undefined){var phasedRegistrationNames=dispatchConfig.phasedRegistrationNames;for(var phase in phasedRegistrationNames){if(!phasedRegistrationNames.hasOwnProperty(phase)){continue}var pluginModule=EventPluginRegistry.registrationNameModules[phasedRegistrationNames[phase]];if(pluginModule){return pluginModule}}}return null},_resetEventPlugins:function(){eventPluginOrder=null;for(var pluginName in namesToPlugins){if(namesToPlugins.hasOwnProperty(pluginName)){delete namesToPlugins[pluginName]}}EventPluginRegistry.plugins.length=0;var eventNameDispatchConfigs=EventPluginRegistry.eventNameDispatchConfigs;for(var eventName in eventNameDispatchConfigs){if(eventNameDispatchConfigs.hasOwnProperty(eventName)){delete eventNameDispatchConfigs[eventName]}}var registrationNameModules=EventPluginRegistry.registrationNameModules;for(var registrationName in registrationNameModules){if(registrationNameModules.hasOwnProperty(registrationName)){delete registrationNameModules[registrationName]}}if(process.env.NODE_ENV!=="production"){var possibleRegistrationNames=EventPluginRegistry.possibleRegistrationNames;for(var lowerCasedName in possibleRegistrationNames){if(possibleRegistrationNames.hasOwnProperty(lowerCasedName)){delete possibleRegistrationNames[lowerCasedName]}}}}};module.exports=EventPluginRegistry}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],195:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactErrorUtils=require("./ReactErrorUtils");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ComponentTree;var TreeTraversal;var injection={injectComponentTree:function(Injected){ComponentTree=Injected;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(Injected&&Injected.getNodeFromInstance&&Injected.getInstanceFromNode,"EventPluginUtils.injection.injectComponentTree(...): Injected "+"module is missing getNodeFromInstance or getInstanceFromNode."):void 0}},injectTreeTraversal:function(Injected){TreeTraversal=Injected;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(Injected&&Injected.isAncestor&&Injected.getLowestCommonAncestor,"EventPluginUtils.injection.injectTreeTraversal(...): Injected "+"module is missing isAncestor or getLowestCommonAncestor."):void 0}}};function isEndish(topLevelType){return topLevelType==="topMouseUp"||topLevelType==="topTouchEnd"||topLevelType==="topTouchCancel"}function isMoveish(topLevelType){return topLevelType==="topMouseMove"||topLevelType==="topTouchMove"}function isStartish(topLevelType){return topLevelType==="topMouseDown"||topLevelType==="topTouchStart"}var validateEventDispatches;if(process.env.NODE_ENV!=="production"){validateEventDispatches=function(event){var dispatchListeners=event._dispatchListeners;var dispatchInstances=event._dispatchInstances;var listenersIsArr=Array.isArray(dispatchListeners);var listenersLen=listenersIsArr?dispatchListeners.length:dispatchListeners?1:0;var instancesIsArr=Array.isArray(dispatchInstances);var instancesLen=instancesIsArr?dispatchInstances.length:dispatchInstances?1:0;process.env.NODE_ENV!=="production"?warning(instancesIsArr===listenersIsArr&&instancesLen===listenersLen,"EventPluginUtils: Invalid `event`."):void 0}}function executeDispatch(event,simulated,listener,inst){var type=event.type||"unknown-event";event.currentTarget=EventPluginUtils.getNodeFromInstance(inst);if(simulated){ReactErrorUtils.invokeGuardedCallbackWithCatch(type,listener,event)}else{ReactErrorUtils.invokeGuardedCallback(type,listener,event)}event.currentTarget=null}function executeDispatchesInOrder(event,simulated){var dispatchListeners=event._dispatchListeners;var dispatchInstances=event._dispatchInstances;if(process.env.NODE_ENV!=="production"){validateEventDispatches(event)}if(Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length;i++){if(event.isPropagationStopped()){break}executeDispatch(event,simulated,dispatchListeners[i],dispatchInstances[i])}}else if(dispatchListeners){executeDispatch(event,simulated,dispatchListeners,dispatchInstances)}event._dispatchListeners=null;event._dispatchInstances=null}function executeDispatchesInOrderStopAtTrueImpl(event){var dispatchListeners=event._dispatchListeners;var dispatchInstances=event._dispatchInstances;if(process.env.NODE_ENV!=="production"){validateEventDispatches(event)}if(Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length;i++){if(event.isPropagationStopped()){break}if(dispatchListeners[i](event,dispatchInstances[i])){return dispatchInstances[i]}}}else if(dispatchListeners){if(dispatchListeners(event,dispatchInstances)){return dispatchInstances}}return null}function executeDispatchesInOrderStopAtTrue(event){var ret=executeDispatchesInOrderStopAtTrueImpl(event);event._dispatchInstances=null;event._dispatchListeners=null;return ret}function executeDirectDispatch(event){if(process.env.NODE_ENV!=="production"){validateEventDispatches(event)}var dispatchListener=event._dispatchListeners;var dispatchInstance=event._dispatchInstances;!!Array.isArray(dispatchListener)?process.env.NODE_ENV!=="production"?invariant(false,"executeDirectDispatch(...): Invalid `event`."):_prodInvariant("103"):void 0;event.currentTarget=dispatchListener?EventPluginUtils.getNodeFromInstance(dispatchInstance):null;var res=dispatchListener?dispatchListener(event):null;event.currentTarget=null;event._dispatchListeners=null;event._dispatchInstances=null;return res}function hasDispatches(event){return!!event._dispatchListeners}var EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getInstanceFromNode:function(node){return ComponentTree.getInstanceFromNode(node)},getNodeFromInstance:function(node){return ComponentTree.getNodeFromInstance(node)},isAncestor:function(a,b){return TreeTraversal.isAncestor(a,b)},getLowestCommonAncestor:function(a,b){return TreeTraversal.getLowestCommonAncestor(a,b)},getParentInstance:function(inst){return TreeTraversal.getParentInstance(inst)},traverseTwoPhase:function(target,fn,arg){return TreeTraversal.traverseTwoPhase(target,fn,arg)},traverseEnterLeave:function(from,to,fn,argFrom,argTo){return TreeTraversal.traverseEnterLeave(from,to,fn,argFrom,argTo)},injection:injection};module.exports=EventPluginUtils}).call(this)}).call(this,require("_process"))},{"./ReactErrorUtils":230,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161}],196:[function(require,module,exports){(function(process){(function(){"use strict";var EventPluginHub=require("./EventPluginHub");var EventPluginUtils=require("./EventPluginUtils");var accumulateInto=require("./accumulateInto");var forEachAccumulated=require("./forEachAccumulated");var warning=require("fbjs/lib/warning");var getListener=EventPluginHub.getListener;function listenerAtPhase(inst,event,propagationPhase){var registrationName=event.dispatchConfig.phasedRegistrationNames[propagationPhase];return getListener(inst,registrationName)}function accumulateDirectionalDispatches(inst,phase,event){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(inst,"Dispatching inst must not be null"):void 0}var listener=listenerAtPhase(inst,event,phase);if(listener){event._dispatchListeners=accumulateInto(event._dispatchListeners,listener);event._dispatchInstances=accumulateInto(event._dispatchInstances,inst)}}function accumulateTwoPhaseDispatchesSingle(event){if(event&&event.dispatchConfig.phasedRegistrationNames){EventPluginUtils.traverseTwoPhase(event._targetInst,accumulateDirectionalDispatches,event)}}function accumulateTwoPhaseDispatchesSingleSkipTarget(event){if(event&&event.dispatchConfig.phasedRegistrationNames){var targetInst=event._targetInst;var parentInst=targetInst?EventPluginUtils.getParentInstance(targetInst):null;EventPluginUtils.traverseTwoPhase(parentInst,accumulateDirectionalDispatches,event)}}function accumulateDispatches(inst,ignoredDirection,event){if(event&&event.dispatchConfig.registrationName){var registrationName=event.dispatchConfig.registrationName;var listener=getListener(inst,registrationName);if(listener){event._dispatchListeners=accumulateInto(event._dispatchListeners,listener);event._dispatchInstances=accumulateInto(event._dispatchInstances,inst)}}}function accumulateDirectDispatchesSingle(event){if(event&&event.dispatchConfig.registrationName){accumulateDispatches(event._targetInst,null,event)}}function accumulateTwoPhaseDispatches(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(leave,enter,from,to){EventPluginUtils.traverseEnterLeave(from,to,accumulateDispatches,leave,enter)}function accumulateDirectDispatches(events){forEachAccumulated(events,accumulateDirectDispatchesSingle)}var EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators}).call(this)}).call(this,require("_process"))},{"./EventPluginHub":193,"./EventPluginUtils":195,"./accumulateInto":274,"./forEachAccumulated":282,_process:25,"fbjs/lib/warning":161}],197:[function(require,module,exports){"use strict";var _assign=require("object-assign");var PooledClass=require("./PooledClass");var getTextContentAccessor=require("./getTextContentAccessor");function FallbackCompositionState(root){this._root=root;this._startText=this.getText();this._fallbackText=null}_assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null;this._startText=null;this._fallbackText=null},getText:function(){if("value"in this._root){return this._root.value}return this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText){return this._fallbackText}var start;var startValue=this._startText;var startLength=startValue.length;var end;var endValue=this.getText();var endLength=endValue.length;for(start=0;start<startLength;start++){if(startValue[start]!==endValue[start]){break}}var minEnd=startLength-start;for(end=1;end<=minEnd;end++){if(startValue[startLength-end]!==endValue[endLength-end]){break}}var sliceTail=end>1?1-end:undefined;this._fallbackText=endValue.slice(start,sliceTail);return this._fallbackText}});PooledClass.addPoolingTo(FallbackCompositionState);module.exports=FallbackCompositionState},{"./PooledClass":201,"./getTextContentAccessor":290,"object-assign":166}],198:[function(require,module,exports){"use strict";var DOMProperty=require("./DOMProperty");var MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY;var HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE;var HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE;var HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE;var HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE;var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:HAS_BOOLEAN_VALUE,allowTransparency:0,alt:0,as:0,async:HAS_BOOLEAN_VALUE,autoComplete:0,autoPlay:HAS_BOOLEAN_VALUE,capture:HAS_BOOLEAN_VALUE,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,cite:0,classID:0,className:0,cols:HAS_POSITIVE_NUMERIC_VALUE,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:HAS_BOOLEAN_VALUE,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,default:HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:0,disabled:HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:0,frameBorder:0,headers:0,height:0,hidden:HAS_BOOLEAN_VALUE,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:HAS_BOOLEAN_VALUE,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:0,nonce:0,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:0,pattern:0,placeholder:0,playsInline:HAS_BOOLEAN_VALUE,poster:0,preload:0,profile:0,radioGroup:0,readOnly:HAS_BOOLEAN_VALUE,referrerPolicy:0,rel:0,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:0,rows:HAS_POSITIVE_NUMERIC_VALUE,rowSpan:HAS_NUMERIC_VALUE,sandbox:0,scope:0,scoped:HAS_BOOLEAN_VALUE,scrolling:0,seamless:HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:0,size:HAS_POSITIVE_NUMERIC_VALUE,sizes:0,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:HAS_NUMERIC_VALUE,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:HAS_BOOLEAN_VALUE,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(node,value){if(value==null){return node.removeAttribute("value")}if(node.type!=="number"||node.hasAttribute("value")===false){node.setAttribute("value",""+value)}else if(node.validity&&!node.validity.badInput&&node.ownerDocument.activeElement!==node){node.setAttribute("value",""+value)}}}};module.exports=HTMLDOMPropertyConfig},{"./DOMProperty":188}],199:[function(require,module,exports){"use strict";function escape(key){var escapeRegex=/[=:]/g;var escaperLookup={"=":"=0",":":"=2"};var escapedString=(""+key).replace(escapeRegex,function(match){return escaperLookup[match]});return"$"+escapedString}function unescape(key){var unescapeRegex=/(=0|=2)/g;var unescaperLookup={"=0":"=","=2":":"};var keySubstring=key[0]==="."&&key[1]==="$"?key.substring(2):key.substring(1);return(""+keySubstring).replace(unescapeRegex,function(match){return unescaperLookup[match]})}var KeyEscapeUtils={escape:escape,unescape:unescape};module.exports=KeyEscapeUtils},{}],200:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactPropTypesSecret=require("./ReactPropTypesSecret");var propTypesFactory=require("prop-types/factory");var React=require("react/lib/React");var PropTypes=propTypesFactory(React.isValidElement);var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var hasReadOnlyValue={button:true,checkbox:true,image:true,hidden:true,radio:true,reset:true,submit:true};function _assertSingleLink(inputProps){!(inputProps.checkedLink==null||inputProps.valueLink==null)?process.env.NODE_ENV!=="production"?invariant(false,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):_prodInvariant("87"):void 0}function _assertValueLink(inputProps){_assertSingleLink(inputProps);!(inputProps.value==null&&inputProps.onChange==null)?process.env.NODE_ENV!=="production"?invariant(false,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):_prodInvariant("88"):void 0}function _assertCheckedLink(inputProps){_assertSingleLink(inputProps);!(inputProps.checked==null&&inputProps.onChange==null)?process.env.NODE_ENV!=="production"?invariant(false,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):_prodInvariant("89"):void 0}var propTypes={value:function(props,propName,componentName){if(!props[propName]||hasReadOnlyValue[props.type]||props.onChange||props.readOnly||props.disabled){return null}return new Error("You provided a `value` prop to a form field without an "+"`onChange` handler. This will render a read-only field. If "+"the field should be mutable use `defaultValue`. Otherwise, "+"set either `onChange` or `readOnly`.")},checked:function(props,propName,componentName){if(!props[propName]||props.onChange||props.readOnly||props.disabled){return null}return new Error("You provided a `checked` prop to a form field without an "+"`onChange` handler. This will render a read-only field. If "+"the field should be mutable use `defaultChecked`. Otherwise, "+"set either `onChange` or `readOnly`.")},onChange:PropTypes.func};var loggedTypeFailures={};function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""}var LinkedValueUtils={checkPropTypes:function(tagName,props,owner){for(var propName in propTypes){if(propTypes.hasOwnProperty(propName)){var error=propTypes[propName](props,propName,tagName,"prop",null,ReactPropTypesSecret)}if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var addendum=getDeclarationErrorAddendum(owner);process.env.NODE_ENV!=="production"?warning(false,"Failed form propType: %s%s",error.message,addendum):void 0}}},getValue:function(inputProps){if(inputProps.valueLink){_assertValueLink(inputProps);return inputProps.valueLink.value}return inputProps.value},getChecked:function(inputProps){if(inputProps.checkedLink){_assertCheckedLink(inputProps);return inputProps.checkedLink.value}return inputProps.checked},executeOnChange:function(inputProps,event){if(inputProps.valueLink){_assertValueLink(inputProps);return inputProps.valueLink.requestChange(event.target.value)}else if(inputProps.checkedLink){_assertCheckedLink(inputProps);return inputProps.checkedLink.requestChange(event.target.checked)}else if(inputProps.onChange){return inputProps.onChange.call(undefined,event)}}};module.exports=LinkedValueUtils}).call(this)}).call(this,require("_process"))},{"./ReactPropTypesSecret":247,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161,"prop-types/factory":170,"react/lib/React":309}],201:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var oneArgumentPooler=function(copyFieldsFrom){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,copyFieldsFrom);return instance}else{return new Klass(copyFieldsFrom)}};var twoArgumentPooler=function(a1,a2){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2);return instance}else{return new Klass(a1,a2)}};var threeArgumentPooler=function(a1,a2,a3){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2,a3);return instance}else{return new Klass(a1,a2,a3)}};var fourArgumentPooler=function(a1,a2,a3,a4){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2,a3,a4);return instance}else{return new Klass(a1,a2,a3,a4)}};var standardReleaser=function(instance){var Klass=this;!(instance instanceof Klass)?process.env.NODE_ENV!=="production"?invariant(false,"Trying to release an instance into a pool of a different type."):_prodInvariant("25"):void 0;instance.destructor();if(Klass.instancePool.length<Klass.poolSize){Klass.instancePool.push(instance)}};var DEFAULT_POOL_SIZE=10;var DEFAULT_POOLER=oneArgumentPooler;var addPoolingTo=function(CopyConstructor,pooler){var NewKlass=CopyConstructor;NewKlass.instancePool=[];NewKlass.getPooled=pooler||DEFAULT_POOLER;if(!NewKlass.poolSize){NewKlass.poolSize=DEFAULT_POOL_SIZE}NewKlass.release=standardReleaser;return NewKlass};var PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler};module.exports=PooledClass}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],202:[function(require,module,exports){"use strict";var _assign=require("object-assign");var EventPluginRegistry=require("./EventPluginRegistry");var ReactEventEmitterMixin=require("./ReactEventEmitterMixin");var ViewportMetrics=require("./ViewportMetrics");var getVendorPrefixedEventName=require("./getVendorPrefixedEventName");var isEventSupported=require("./isEventSupported");var hasEventPageXY;var alreadyListeningTo={};var isMonitoringScrollValue=false;var reactTopListenersCounter=0;var topEventMapping={topAbort:"abort",topAnimationEnd:getVendorPrefixedEventName("animationend")||"animationend",topAnimationIteration:getVendorPrefixedEventName("animationiteration")||"animationiteration",topAnimationStart:getVendorPrefixedEventName("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:getVendorPrefixedEventName("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"};var topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2);function getListeningForDocument(mountAt){if(!Object.prototype.hasOwnProperty.call(mountAt,topListenersIDKey)){mountAt[topListenersIDKey]=reactTopListenersCounter++;alreadyListeningTo[mountAt[topListenersIDKey]]={}}return alreadyListeningTo[mountAt[topListenersIDKey]]}var ReactBrowserEventEmitter=_assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(ReactEventListener){ReactEventListener.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel);ReactBrowserEventEmitter.ReactEventListener=ReactEventListener}},setEnabled:function(enabled){if(ReactBrowserEventEmitter.ReactEventListener){ReactBrowserEventEmitter.ReactEventListener.setEnabled(enabled)}},isEnabled:function(){return!!(ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(registrationName,contentDocumentHandle){var mountAt=contentDocumentHandle;var isListening=getListeningForDocument(mountAt);var dependencies=EventPluginRegistry.registrationNameDependencies[registrationName];for(var i=0;i<dependencies.length;i++){var dependency=dependencies[i];if(!(isListening.hasOwnProperty(dependency)&&isListening[dependency])){if(dependency==="topWheel"){if(isEventSupported("wheel")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topWheel","wheel",mountAt)}else if(isEventSupported("mousewheel")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",mountAt)}else{ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",mountAt)}}else if(dependency==="topScroll"){if(isEventSupported("scroll",true)){ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent("topScroll","scroll",mountAt)}else{ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topScroll","scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE)}}else if(dependency==="topFocus"||dependency==="topBlur"){if(isEventSupported("focus",true)){ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent("topFocus","focus",mountAt);ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent("topBlur","blur",mountAt)}else if(isEventSupported("focusin")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topFocus","focusin",mountAt);ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topBlur","focusout",mountAt)}isListening.topBlur=true;isListening.topFocus=true}else if(topEventMapping.hasOwnProperty(dependency)){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(dependency,topEventMapping[dependency],mountAt)}isListening[dependency]=true}}},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelType,handlerBaseName,handle)},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelType,handlerBaseName,handle)},supportsEventPageXY:function(){if(!document.createEvent){return false}var ev=document.createEvent("MouseEvent");return ev!=null&&"pageX"in ev},ensureScrollValueMonitoring:function(){if(hasEventPageXY===undefined){hasEventPageXY=ReactBrowserEventEmitter.supportsEventPageXY()}if(!hasEventPageXY&&!isMonitoringScrollValue){var refresh=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(refresh);isMonitoringScrollValue=true}}});module.exports=ReactBrowserEventEmitter},{"./EventPluginRegistry":194,"./ReactEventEmitterMixin":231,"./ViewportMetrics":273,"./getVendorPrefixedEventName":291,"./isEventSupported":294,"object-assign":166}],203:[function(require,module,exports){(function(process){(function(){"use strict";var ReactReconciler=require("./ReactReconciler");var instantiateReactComponent=require("./instantiateReactComponent");var KeyEscapeUtils=require("./KeyEscapeUtils");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var traverseAllChildren=require("./traverseAllChildren");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}function instantiateChild(childInstances,child,name,selfDebugID){var keyUnique=childInstances[name]===undefined;if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}if(!keyUnique){process.env.NODE_ENV!=="production"?warning(false,"flattenChildren(...): Encountered two children with the same key, "+"`%s`. Child keys must be unique; when two children share a key, only "+"the first child will be used.%s",KeyEscapeUtils.unescape(name),ReactComponentTreeHook.getStackAddendumByID(selfDebugID)):void 0}}if(child!=null&&keyUnique){childInstances[name]=instantiateReactComponent(child,true)}}var ReactChildReconciler={instantiateChildren:function(nestedChildNodes,transaction,context,selfDebugID){if(nestedChildNodes==null){return null}var childInstances={};if(process.env.NODE_ENV!=="production"){traverseAllChildren(nestedChildNodes,function(childInsts,child,name){return instantiateChild(childInsts,child,name,selfDebugID)},childInstances)}else{traverseAllChildren(nestedChildNodes,instantiateChild,childInstances)}return childInstances},updateChildren:function(prevChildren,nextChildren,mountImages,removedNodes,transaction,hostParent,hostContainerInfo,context,selfDebugID){if(!nextChildren&&!prevChildren){return}var name;var prevChild;for(name in nextChildren){if(!nextChildren.hasOwnProperty(name)){continue}prevChild=prevChildren&&prevChildren[name];var prevElement=prevChild&&prevChild._currentElement;var nextElement=nextChildren[name];if(prevChild!=null&&shouldUpdateReactComponent(prevElement,nextElement)){ReactReconciler.receiveComponent(prevChild,nextElement,transaction,context);nextChildren[name]=prevChild}else{if(prevChild){removedNodes[name]=ReactReconciler.getHostNode(prevChild);ReactReconciler.unmountComponent(prevChild,false)}var nextChildInstance=instantiateReactComponent(nextElement,true);nextChildren[name]=nextChildInstance;var nextChildMountImage=ReactReconciler.mountComponent(nextChildInstance,transaction,hostParent,hostContainerInfo,context,selfDebugID);mountImages.push(nextChildMountImage)}}for(name in prevChildren){if(prevChildren.hasOwnProperty(name)&&!(nextChildren&&nextChildren.hasOwnProperty(name))){prevChild=prevChildren[name];removedNodes[name]=ReactReconciler.getHostNode(prevChild);ReactReconciler.unmountComponent(prevChild,false)}}},unmountChildren:function(renderedChildren,safely){for(var name in renderedChildren){if(renderedChildren.hasOwnProperty(name)){var renderedChild=renderedChildren[name];ReactReconciler.unmountComponent(renderedChild,safely)}}}};module.exports=ReactChildReconciler}).call(this)}).call(this,require("_process"))},{"./KeyEscapeUtils":199,"./ReactReconciler":249,"./instantiateReactComponent":293,"./shouldUpdateReactComponent":301,"./traverseAllChildren":302,_process:25,"fbjs/lib/warning":161,"react/lib/ReactComponentTreeHook":312}],204:[function(require,module,exports){"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations");var ReactDOMIDOperations=require("./ReactDOMIDOperations");var ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup};module.exports=ReactComponentBrowserEnvironment},{"./DOMChildrenOperations":185,"./ReactDOMIDOperations":214}],205:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var injected=false;var ReactComponentEnvironment={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(environment){!!injected?process.env.NODE_ENV!=="production"?invariant(false,"ReactCompositeComponent: injectEnvironment() can only be called once."):_prodInvariant("104"):void 0;ReactComponentEnvironment.replaceNodeWithMarkup=environment.replaceNodeWithMarkup;ReactComponentEnvironment.processChildrenUpdates=environment.processChildrenUpdates;injected=true}}};module.exports=ReactComponentEnvironment}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],206:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var React=require("react/lib/React");var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactErrorUtils=require("./ReactErrorUtils");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactNodeTypes=require("./ReactNodeTypes");var ReactReconciler=require("./ReactReconciler");if(process.env.NODE_ENV!=="production"){var checkReactTypeSpec=require("./checkReactTypeSpec")}var emptyObject=require("fbjs/lib/emptyObject");var invariant=require("fbjs/lib/invariant");var shallowEqual=require("fbjs/lib/shallowEqual");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var warning=require("fbjs/lib/warning");var CompositeTypes={ImpureClass:0,PureClass:1,StatelessFunctional:2};function StatelessComponent(Component){}StatelessComponent.prototype.render=function(){var Component=ReactInstanceMap.get(this)._currentElement.type;var element=Component(this.props,this.context,this.updater);warnIfInvalidElement(Component,element);return element};function warnIfInvalidElement(Component,element){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(element===null||element===false||React.isValidElement(element),"%s(...): A valid React element (or null) must be returned. You may have "+"returned undefined, an array or some other invalid object.",Component.displayName||Component.name||"Component"):void 0;process.env.NODE_ENV!=="production"?warning(!Component.childContextTypes,"%s(...): childContextTypes cannot be defined on a functional component.",Component.displayName||Component.name||"Component"):void 0}}function shouldConstruct(Component){return!!(Component.prototype&&Component.prototype.isReactComponent)}function isPureComponent(Component){return!!(Component.prototype&&Component.prototype.isPureReactComponent)}function measureLifeCyclePerf(fn,debugID,timerType){if(debugID===0){return fn()}ReactInstrumentation.debugTool.onBeginLifeCycleTimer(debugID,timerType);try{return fn()}finally{ReactInstrumentation.debugTool.onEndLifeCycleTimer(debugID,timerType)}}var nextMountID=1;var ReactCompositeComponent={construct:function(element){this._currentElement=element;this._rootNodeID=0;this._compositeType=null;this._instance=null;this._hostParent=null;this._hostContainerInfo=null;this._updateBatchNumber=null;this._pendingElement=null;this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;this._renderedNodeType=null;this._renderedComponent=null;this._context=null;this._mountOrder=0;this._topLevelWrapper=null;this._pendingCallbacks=null;this._calledComponentWillUnmount=false;if(process.env.NODE_ENV!=="production"){this._warnedAboutRefsInRender=false}},mountComponent:function(transaction,hostParent,hostContainerInfo,context){var _this=this;this._context=context;this._mountOrder=nextMountID++;this._hostParent=hostParent;this._hostContainerInfo=hostContainerInfo;var publicProps=this._currentElement.props;var publicContext=this._processContext(context);var Component=this._currentElement.type;var updateQueue=transaction.getUpdateQueue();var doConstruct=shouldConstruct(Component);var inst=this._constructComponent(doConstruct,publicProps,publicContext,updateQueue);var renderedElement;if(!doConstruct&&(inst==null||inst.render==null)){renderedElement=inst;warnIfInvalidElement(Component,renderedElement);!(inst===null||inst===false||React.isValidElement(inst))?process.env.NODE_ENV!=="production"?invariant(false,"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",Component.displayName||Component.name||"Component"):_prodInvariant("105",Component.displayName||Component.name||"Component"):void 0;inst=new StatelessComponent(Component);this._compositeType=CompositeTypes.StatelessFunctional}else{if(isPureComponent(Component)){this._compositeType=CompositeTypes.PureClass}else{this._compositeType=CompositeTypes.ImpureClass}}if(process.env.NODE_ENV!=="production"){if(inst.render==null){process.env.NODE_ENV!=="production"?warning(false,"%s(...): No `render` method found on the returned component "+"instance: you may have forgotten to define `render`.",Component.displayName||Component.name||"Component"):void 0}var propsMutated=inst.props!==publicProps;var componentName=Component.displayName||Component.name||"Component";process.env.NODE_ENV!=="production"?warning(inst.props===undefined||!propsMutated,"%s(...): When calling super() in `%s`, make sure to pass "+"up the same props that your component's constructor was passed.",componentName,componentName):void 0}inst.props=publicProps;inst.context=publicContext;inst.refs=emptyObject;inst.updater=updateQueue;this._instance=inst;ReactInstanceMap.set(inst,this);if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!inst.getInitialState||inst.getInitialState.isReactClassApproved||inst.state,"getInitialState was defined on %s, a plain JavaScript class. "+"This is only supported for classes created using React.createClass. "+"Did you mean to define a state property instead?",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(!inst.getDefaultProps||inst.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. "+"This is only supported for classes created using React.createClass. "+"Use a static property to define defaultProps instead.",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(!inst.propTypes,"propTypes was defined as an instance property on %s. Use a static "+"property to define propTypes instead.",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(!inst.contextTypes,"contextTypes was defined as an instance property on %s. Use a "+"static property to define contextTypes instead.",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(typeof inst.componentShouldUpdate!=="function","%s has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value.",this.getName()||"A component"):void 0;process.env.NODE_ENV!=="production"?warning(typeof inst.componentDidUnmount!=="function","%s has a method called "+"componentDidUnmount(). But there is no such lifecycle method. "+"Did you mean componentWillUnmount()?",this.getName()||"A component"):void 0;process.env.NODE_ENV!=="production"?warning(typeof inst.componentWillRecieveProps!=="function","%s has a method called "+"componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",this.getName()||"A component"):void 0}var initialState=inst.state;if(initialState===undefined){inst.state=initialState=null}!(typeof initialState==="object"&&!Array.isArray(initialState))?process.env.NODE_ENV!=="production"?invariant(false,"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):_prodInvariant("106",this.getName()||"ReactCompositeComponent"):void 0;this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;var markup;if(inst.unstable_handleError){markup=this.performInitialMountWithErrorHandling(renderedElement,hostParent,hostContainerInfo,transaction,context)}else{markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}if(inst.componentDidMount){if(process.env.NODE_ENV!=="production"){transaction.getReactMountReady().enqueue(function(){measureLifeCyclePerf(function(){return inst.componentDidMount()},_this._debugID,"componentDidMount")})}else{transaction.getReactMountReady().enqueue(inst.componentDidMount,inst)}}return markup},_constructComponent:function(doConstruct,publicProps,publicContext,updateQueue){if(process.env.NODE_ENV!=="production"&&!doConstruct){ReactCurrentOwner.current=this;try{return this._constructComponentWithoutOwner(doConstruct,publicProps,publicContext,updateQueue)}finally{ReactCurrentOwner.current=null}}else{return this._constructComponentWithoutOwner(doConstruct,publicProps,publicContext,updateQueue)}},_constructComponentWithoutOwner:function(doConstruct,publicProps,publicContext,updateQueue){var Component=this._currentElement.type;if(doConstruct){if(process.env.NODE_ENV!=="production"){return measureLifeCyclePerf(function(){return new Component(publicProps,publicContext,updateQueue)},this._debugID,"ctor")}else{return new Component(publicProps,publicContext,updateQueue)}}if(process.env.NODE_ENV!=="production"){return measureLifeCyclePerf(function(){return Component(publicProps,publicContext,updateQueue)},this._debugID,"render")}else{return Component(publicProps,publicContext,updateQueue)}},performInitialMountWithErrorHandling:function(renderedElement,hostParent,hostContainerInfo,transaction,context){var markup;var checkpoint=transaction.checkpoint();try{markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}catch(e){transaction.rollback(checkpoint);this._instance.unstable_handleError(e);if(this._pendingStateQueue){this._instance.state=this._processPendingState(this._instance.props,this._instance.context)}checkpoint=transaction.checkpoint();this._renderedComponent.unmountComponent(true);transaction.rollback(checkpoint);markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}return markup},performInitialMount:function(renderedElement,hostParent,hostContainerInfo,transaction,context){var inst=this._instance;var debugID=0;if(process.env.NODE_ENV!=="production"){debugID=this._debugID}if(inst.componentWillMount){if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillMount()},debugID,"componentWillMount")}else{inst.componentWillMount()}if(this._pendingStateQueue){inst.state=this._processPendingState(inst.props,inst.context)}}if(renderedElement===undefined){renderedElement=this._renderValidatedComponent()}var nodeType=ReactNodeTypes.getType(renderedElement);this._renderedNodeType=nodeType;var child=this._instantiateReactComponent(renderedElement,nodeType!==ReactNodeTypes.EMPTY);this._renderedComponent=child;var markup=ReactReconciler.mountComponent(child,transaction,hostParent,hostContainerInfo,this._processChildContext(context),debugID);if(process.env.NODE_ENV!=="production"){if(debugID!==0){var childDebugIDs=child._debugID!==0?[child._debugID]:[];ReactInstrumentation.debugTool.onSetChildren(debugID,childDebugIDs)}}return markup},getHostNode:function(){return ReactReconciler.getHostNode(this._renderedComponent)},unmountComponent:function(safely){if(!this._renderedComponent){return}var inst=this._instance;if(inst.componentWillUnmount&&!inst._calledComponentWillUnmount){inst._calledComponentWillUnmount=true;if(safely){var name=this.getName()+".componentWillUnmount()";ReactErrorUtils.invokeGuardedCallback(name,inst.componentWillUnmount.bind(inst))}else{if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillUnmount()},this._debugID,"componentWillUnmount")}else{inst.componentWillUnmount()}}}if(this._renderedComponent){ReactReconciler.unmountComponent(this._renderedComponent,safely);this._renderedNodeType=null;this._renderedComponent=null;this._instance=null}this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;this._pendingCallbacks=null;this._pendingElement=null;this._context=null;this._rootNodeID=0;this._topLevelWrapper=null;ReactInstanceMap.remove(inst)},_maskContext:function(context){var Component=this._currentElement.type;var contextTypes=Component.contextTypes;if(!contextTypes){return emptyObject}var maskedContext={};for(var contextName in contextTypes){maskedContext[contextName]=context[contextName]}return maskedContext},_processContext:function(context){var maskedContext=this._maskContext(context);if(process.env.NODE_ENV!=="production"){var Component=this._currentElement.type;if(Component.contextTypes){this._checkContextTypes(Component.contextTypes,maskedContext,"context")}}return maskedContext},_processChildContext:function(currentContext){var Component=this._currentElement.type;var inst=this._instance;var childContext;if(inst.getChildContext){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onBeginProcessingChildContext();try{childContext=inst.getChildContext()}finally{ReactInstrumentation.debugTool.onEndProcessingChildContext()}}else{childContext=inst.getChildContext()}}if(childContext){!(typeof Component.childContextTypes==="object")?process.env.NODE_ENV!=="production"?invariant(false,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):_prodInvariant("107",this.getName()||"ReactCompositeComponent"):void 0;if(process.env.NODE_ENV!=="production"){this._checkContextTypes(Component.childContextTypes,childContext,"child context")}for(var name in childContext){!(name in Component.childContextTypes)?process.env.NODE_ENV!=="production"?invariant(false,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",name):_prodInvariant("108",this.getName()||"ReactCompositeComponent",name):void 0}return _assign({},currentContext,childContext)}return currentContext},_checkContextTypes:function(typeSpecs,values,location){if(process.env.NODE_ENV!=="production"){checkReactTypeSpec(typeSpecs,values,location,this.getName(),null,this._debugID)}},receiveComponent:function(nextElement,transaction,nextContext){var prevElement=this._currentElement;var prevContext=this._context;this._pendingElement=null;this.updateComponent(transaction,prevElement,nextElement,prevContext,nextContext)},performUpdateIfNecessary:function(transaction){if(this._pendingElement!=null){ReactReconciler.receiveComponent(this,this._pendingElement,transaction,this._context)}else if(this._pendingStateQueue!==null||this._pendingForceUpdate){this.updateComponent(transaction,this._currentElement,this._currentElement,this._context,this._context)}else{this._updateBatchNumber=null}},updateComponent:function(transaction,prevParentElement,nextParentElement,prevUnmaskedContext,nextUnmaskedContext){var inst=this._instance;!(inst!=null)?process.env.NODE_ENV!=="production"?invariant(false,"Attempted to update component `%s` that has already been unmounted (or failed to mount).",this.getName()||"ReactCompositeComponent"):_prodInvariant("136",this.getName()||"ReactCompositeComponent"):void 0;var willReceive=false;var nextContext;if(this._context===nextUnmaskedContext){nextContext=inst.context}else{nextContext=this._processContext(nextUnmaskedContext);willReceive=true}var prevProps=prevParentElement.props;var nextProps=nextParentElement.props;if(prevParentElement!==nextParentElement){willReceive=true}if(willReceive&&inst.componentWillReceiveProps){if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillReceiveProps(nextProps,nextContext)},this._debugID,"componentWillReceiveProps")}else{inst.componentWillReceiveProps(nextProps,nextContext)}}var nextState=this._processPendingState(nextProps,nextContext);var shouldUpdate=true;if(!this._pendingForceUpdate){if(inst.shouldComponentUpdate){if(process.env.NODE_ENV!=="production"){shouldUpdate=measureLifeCyclePerf(function(){return inst.shouldComponentUpdate(nextProps,nextState,nextContext)},this._debugID,"shouldComponentUpdate")}else{shouldUpdate=inst.shouldComponentUpdate(nextProps,nextState,nextContext)}}else{if(this._compositeType===CompositeTypes.PureClass){shouldUpdate=!shallowEqual(prevProps,nextProps)||!shallowEqual(inst.state,nextState)}}}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(shouldUpdate!==undefined,"%s.shouldComponentUpdate(): Returned undefined instead of a "+"boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"):void 0}this._updateBatchNumber=null;if(shouldUpdate){this._pendingForceUpdate=false;this._performComponentUpdate(nextParentElement,nextProps,nextState,nextContext,transaction,nextUnmaskedContext)}else{this._currentElement=nextParentElement;this._context=nextUnmaskedContext;inst.props=nextProps;inst.state=nextState;inst.context=nextContext}},_processPendingState:function(props,context){var inst=this._instance;var queue=this._pendingStateQueue;var replace=this._pendingReplaceState;this._pendingReplaceState=false;this._pendingStateQueue=null;if(!queue){return inst.state}if(replace&&queue.length===1){return queue[0]}var nextState=_assign({},replace?queue[0]:inst.state);for(var i=replace?1:0;i<queue.length;i++){var partial=queue[i];_assign(nextState,typeof partial==="function"?partial.call(inst,nextState,props,context):partial)}return nextState},_performComponentUpdate:function(nextElement,nextProps,nextState,nextContext,transaction,unmaskedContext){var _this2=this;var inst=this._instance;var hasComponentDidUpdate=Boolean(inst.componentDidUpdate);var prevProps;var prevState;var prevContext;if(hasComponentDidUpdate){prevProps=inst.props;prevState=inst.state;prevContext=inst.context}if(inst.componentWillUpdate){if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillUpdate(nextProps,nextState,nextContext)},this._debugID,"componentWillUpdate")}else{inst.componentWillUpdate(nextProps,nextState,nextContext)}}this._currentElement=nextElement;this._context=unmaskedContext;inst.props=nextProps;inst.state=nextState;inst.context=nextContext;this._updateRenderedComponent(transaction,unmaskedContext);if(hasComponentDidUpdate){if(process.env.NODE_ENV!=="production"){transaction.getReactMountReady().enqueue(function(){measureLifeCyclePerf(inst.componentDidUpdate.bind(inst,prevProps,prevState,prevContext),_this2._debugID,"componentDidUpdate")})}else{transaction.getReactMountReady().enqueue(inst.componentDidUpdate.bind(inst,prevProps,prevState,prevContext),inst)}}},_updateRenderedComponent:function(transaction,context){var prevComponentInstance=this._renderedComponent;var prevRenderedElement=prevComponentInstance._currentElement;var nextRenderedElement=this._renderValidatedComponent();var debugID=0;if(process.env.NODE_ENV!=="production"){debugID=this._debugID}if(shouldUpdateReactComponent(prevRenderedElement,nextRenderedElement)){ReactReconciler.receiveComponent(prevComponentInstance,nextRenderedElement,transaction,this._processChildContext(context))}else{var oldHostNode=ReactReconciler.getHostNode(prevComponentInstance);ReactReconciler.unmountComponent(prevComponentInstance,false);var nodeType=ReactNodeTypes.getType(nextRenderedElement);this._renderedNodeType=nodeType;var child=this._instantiateReactComponent(nextRenderedElement,nodeType!==ReactNodeTypes.EMPTY);this._renderedComponent=child;var nextMarkup=ReactReconciler.mountComponent(child,transaction,this._hostParent,this._hostContainerInfo,this._processChildContext(context),debugID);if(process.env.NODE_ENV!=="production"){if(debugID!==0){var childDebugIDs=child._debugID!==0?[child._debugID]:[];ReactInstrumentation.debugTool.onSetChildren(debugID,childDebugIDs)}}this._replaceNodeWithMarkup(oldHostNode,nextMarkup,prevComponentInstance)}},_replaceNodeWithMarkup:function(oldHostNode,nextMarkup,prevInstance){ReactComponentEnvironment.replaceNodeWithMarkup(oldHostNode,nextMarkup,prevInstance)},_renderValidatedComponentWithoutOwnerOrContext:function(){var inst=this._instance;var renderedElement;if(process.env.NODE_ENV!=="production"){renderedElement=measureLifeCyclePerf(function(){return inst.render()},this._debugID,"render")}else{renderedElement=inst.render()}if(process.env.NODE_ENV!=="production"){if(renderedElement===undefined&&inst.render._isMockFunction){renderedElement=null}}return renderedElement},_renderValidatedComponent:function(){var renderedElement;if(process.env.NODE_ENV!=="production"||this._compositeType!==CompositeTypes.StatelessFunctional){ReactCurrentOwner.current=this;try{renderedElement=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}}else{renderedElement=this._renderValidatedComponentWithoutOwnerOrContext()}!(renderedElement===null||renderedElement===false||React.isValidElement(renderedElement))?process.env.NODE_ENV!=="production"?invariant(false,"%s.render(): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"):_prodInvariant("109",this.getName()||"ReactCompositeComponent"):void 0;return renderedElement},attachRef:function(ref,component){var inst=this.getPublicInstance();!(inst!=null)?process.env.NODE_ENV!=="production"?invariant(false,"Stateless function components cannot have refs."):_prodInvariant("110"):void 0;var publicComponentInstance=component.getPublicInstance();if(process.env.NODE_ENV!=="production"){var componentName=component&&component.getName?component.getName():"a component";process.env.NODE_ENV!=="production"?warning(publicComponentInstance!=null||component._compositeType!==CompositeTypes.StatelessFunctional,"Stateless function components cannot be given refs "+'(See ref "%s" in %s created by %s). '+"Attempts to access this ref will fail.",ref,componentName,this.getName()):void 0}var refs=inst.refs===emptyObject?inst.refs={}:inst.refs;refs[ref]=publicComponentInstance},detachRef:function(ref){var refs=this.getPublicInstance().refs;delete refs[ref]},getName:function(){var type=this._currentElement.type;var constructor=this._instance&&this._instance.constructor;return type.displayName||constructor&&constructor.displayName||type.name||constructor&&constructor.name||null},getPublicInstance:function(){var inst=this._instance;if(this._compositeType===CompositeTypes.StatelessFunctional){return null}return inst},_instantiateReactComponent:null};module.exports=ReactCompositeComponent}).call(this)}).call(this,require("_process"))},{"./ReactComponentEnvironment":205,"./ReactErrorUtils":230,"./ReactInstanceMap":238,"./ReactInstrumentation":239,"./ReactNodeTypes":244,"./ReactReconciler":249,"./checkReactTypeSpec":276,"./reactProdInvariant":297,"./shouldUpdateReactComponent":301,_process:25,"fbjs/lib/emptyObject":147,"fbjs/lib/invariant":154,"fbjs/lib/shallowEqual":160,"fbjs/lib/warning":161,"object-assign":166,"react/lib/React":309,"react/lib/ReactCurrentOwner":313}],207:[function(require,module,exports){(function(process){(function(){"use strict";var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDefaultInjection=require("./ReactDefaultInjection");var ReactMount=require("./ReactMount");var ReactReconciler=require("./ReactReconciler");var ReactUpdates=require("./ReactUpdates");var ReactVersion=require("./ReactVersion");var findDOMNode=require("./findDOMNode");var getHostComponentFromComposite=require("./getHostComponentFromComposite");var renderSubtreeIntoContainer=require("./renderSubtreeIntoContainer");var warning=require("fbjs/lib/warning");ReactDefaultInjection.inject();var ReactDOM={findDOMNode:findDOMNode,render:ReactMount.render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject==="function"){__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:ReactDOMComponentTree.getClosestInstanceFromNode,getNodeFromInstance:function(inst){if(inst._renderedComponent){inst=getHostComponentFromComposite(inst)}if(inst){return ReactDOMComponentTree.getNodeFromInstance(inst)}else{return null}}},Mount:ReactMount,Reconciler:ReactReconciler})}if(process.env.NODE_ENV!=="production"){var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");if(ExecutionEnvironment.canUseDOM&&window.top===window.self){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__==="undefined"){if(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1){var showFileUrlMessage=window.location.protocol.indexOf("http")===-1&&navigator.userAgent.indexOf("Firefox")===-1;console.debug("Download the React DevTools "+(showFileUrlMessage?"and use an HTTP server (instead of a file: URL) ":"")+"for a better development experience: "+"https://fb.me/react-devtools")}}var testFunc=function testFn(){};process.env.NODE_ENV!=="production"?warning((testFunc.name||testFunc.toString()).indexOf("testFn")!==-1,"It looks like you're using a minified copy of the development build "+"of React. When deploying React apps to production, make sure to use "+"the production build which skips development warnings and is faster. "+"See https://fb.me/react-minification for more details."):void 0;var ieCompatibilityMode=document.documentMode&&document.documentMode<8;process.env.NODE_ENV!=="production"?warning(!ieCompatibilityMode,"Internet Explorer is running in compatibility mode; please add the "+"following tag to your HTML to prevent this from happening: "+'<meta http-equiv="X-UA-Compatible" content="IE=edge" />'):void 0;var expectedFeatures=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.trim];for(var i=0;i<expectedFeatures.length;i++){if(!expectedFeatures[i]){process.env.NODE_ENV!=="production"?warning(false,"One or more ES5 shims expected by React are not available: "+"https://fb.me/react-warning-polyfills"):void 0;break}}}}if(process.env.NODE_ENV!=="production"){var ReactInstrumentation=require("./ReactInstrumentation");var ReactDOMUnknownPropertyHook=require("./ReactDOMUnknownPropertyHook");var ReactDOMNullInputValuePropHook=require("./ReactDOMNullInputValuePropHook");var ReactDOMInvalidARIAHook=require("./ReactDOMInvalidARIAHook");ReactInstrumentation.debugTool.addHook(ReactDOMUnknownPropertyHook);ReactInstrumentation.debugTool.addHook(ReactDOMNullInputValuePropHook);ReactInstrumentation.debugTool.addHook(ReactDOMInvalidARIAHook)}module.exports=ReactDOM}).call(this)}).call(this,require("_process"))},{"./ReactDOMComponentTree":210,"./ReactDOMInvalidARIAHook":216,"./ReactDOMNullInputValuePropHook":217,"./ReactDOMUnknownPropertyHook":224,"./ReactDefaultInjection":227,"./ReactInstrumentation":239,"./ReactMount":242,"./ReactReconciler":249,"./ReactUpdates":254,"./ReactVersion":255,"./findDOMNode":280,"./getHostComponentFromComposite":287,"./renderSubtreeIntoContainer":298,_process:25,"fbjs/lib/ExecutionEnvironment":140,"fbjs/lib/warning":161}],208:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var AutoFocusUtils=require("./AutoFocusUtils");var CSSPropertyOperations=require("./CSSPropertyOperations");var DOMLazyTree=require("./DOMLazyTree");var DOMNamespaces=require("./DOMNamespaces");var DOMProperty=require("./DOMProperty");var DOMPropertyOperations=require("./DOMPropertyOperations");var EventPluginHub=require("./EventPluginHub");var EventPluginRegistry=require("./EventPluginRegistry");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactDOMComponentFlags=require("./ReactDOMComponentFlags");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMInput=require("./ReactDOMInput");var ReactDOMOption=require("./ReactDOMOption");var ReactDOMSelect=require("./ReactDOMSelect");var ReactDOMTextarea=require("./ReactDOMTextarea");var ReactInstrumentation=require("./ReactInstrumentation");var ReactMultiChild=require("./ReactMultiChild");var ReactServerRenderingTransaction=require("./ReactServerRenderingTransaction");var emptyFunction=require("fbjs/lib/emptyFunction");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var invariant=require("fbjs/lib/invariant");var isEventSupported=require("./isEventSupported");var shallowEqual=require("fbjs/lib/shallowEqual");var inputValueTracking=require("./inputValueTracking");var validateDOMNesting=require("./validateDOMNesting");var warning=require("fbjs/lib/warning");var Flags=ReactDOMComponentFlags;var deleteListener=EventPluginHub.deleteListener;var getNode=ReactDOMComponentTree.getNodeFromInstance;var listenTo=ReactBrowserEventEmitter.listenTo;var registrationNameModules=EventPluginRegistry.registrationNameModules;var CONTENT_TYPES={string:true,number:true};var STYLE="style";var HTML="__html";var RESERVED_PROPS={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null};var DOC_FRAGMENT_TYPE=11;function getDeclarationErrorAddendum(internalInstance){if(internalInstance){var owner=internalInstance._currentElement._owner||null;if(owner){var name=owner.getName();if(name){return" This DOM node was rendered by `"+name+"`."}}}return""}function friendlyStringify(obj){if(typeof obj==="object"){if(Array.isArray(obj)){return"["+obj.map(friendlyStringify).join(", ")+"]"}else{var pairs=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var keyEscaped=/^[a-z$_][\w$_]*$/i.test(key)?key:JSON.stringify(key);pairs.push(keyEscaped+": "+friendlyStringify(obj[key]))}}return"{"+pairs.join(", ")+"}"}}else if(typeof obj==="string"){return JSON.stringify(obj)}else if(typeof obj==="function"){return"[function object]"}return String(obj)}var styleMutationWarning={};function checkAndWarnForMutatedStyle(style1,style2,component){if(style1==null||style2==null){return}if(shallowEqual(style1,style2)){return}var componentName=component._tag;var owner=component._currentElement._owner;var ownerName;if(owner){ownerName=owner.getName()}var hash=ownerName+"|"+componentName;if(styleMutationWarning.hasOwnProperty(hash)){return}styleMutationWarning[hash]=true;process.env.NODE_ENV!=="production"?warning(false,"`%s` was passed a style object that has previously been mutated. "+"Mutating `style` is deprecated. Consider cloning it beforehand. Check "+"the `render` %s. Previous style: %s. Mutated style: %s.",componentName,owner?"of `"+ownerName+"`":"using <"+componentName+">",friendlyStringify(style1),friendlyStringify(style2)):void 0}function assertValidProps(component,props){if(!props){return}if(voidElementTags[component._tag]){!(props.children==null&&props.dangerouslySetInnerHTML==null)?process.env.NODE_ENV!=="production"?invariant(false,"%s is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.%s",component._tag,component._currentElement._owner?" Check the render method of "+component._currentElement._owner.getName()+".":""):_prodInvariant("137",component._tag,component._currentElement._owner?" Check the render method of "+component._currentElement._owner.getName()+".":""):void 0}if(props.dangerouslySetInnerHTML!=null){!(props.children==null)?process.env.NODE_ENV!=="production"?invariant(false,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):_prodInvariant("60"):void 0;!(typeof props.dangerouslySetInnerHTML==="object"&&HTML in props.dangerouslySetInnerHTML)?process.env.NODE_ENV!=="production"?invariant(false,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information."):_prodInvariant("61"):void 0}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(props.innerHTML==null,"Directly setting property `innerHTML` is not permitted. "+"For more information, lookup documentation on `dangerouslySetInnerHTML`."):void 0;process.env.NODE_ENV!=="production"?warning(props.suppressContentEditableWarning||!props.contentEditable||props.children==null,"A component is `contentEditable` and contains `children` managed by "+"React. It is now your responsibility to guarantee that none of "+"those nodes are unexpectedly modified or duplicated. This is "+"probably not intentional."):void 0;process.env.NODE_ENV!=="production"?warning(props.onFocusIn==null&&props.onFocusOut==null,"React uses onFocus and onBlur instead of onFocusIn and onFocusOut. "+"All React events are normalized to bubble, so onFocusIn and onFocusOut "+"are not needed/supported by React."):void 0}!(props.style==null||typeof props.style==="object")?process.env.NODE_ENV!=="production"?invariant(false,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",getDeclarationErrorAddendum(component)):_prodInvariant("62",getDeclarationErrorAddendum(component)):void 0}function enqueuePutListener(inst,registrationName,listener,transaction){if(transaction instanceof ReactServerRenderingTransaction){return}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(registrationName!=="onScroll"||isEventSupported("scroll",true),"This browser doesn't support the `onScroll` event"):void 0}var containerInfo=inst._hostContainerInfo;var isDocumentFragment=containerInfo._node&&containerInfo._node.nodeType===DOC_FRAGMENT_TYPE;var doc=isDocumentFragment?containerInfo._node:containerInfo._ownerDocument;listenTo(registrationName,doc);transaction.getReactMountReady().enqueue(putListener,{inst:inst,registrationName:registrationName,listener:listener})}function putListener(){var listenerToPut=this;EventPluginHub.putListener(listenerToPut.inst,listenerToPut.registrationName,listenerToPut.listener)}function inputPostMount(){var inst=this;ReactDOMInput.postMountWrapper(inst)}function textareaPostMount(){var inst=this;ReactDOMTextarea.postMountWrapper(inst)}function optionPostMount(){var inst=this;ReactDOMOption.postMountWrapper(inst)}var setAndValidateContentChildDev=emptyFunction;if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev=function(content){var hasExistingContent=this._contentDebugID!=null;var debugID=this._debugID;var contentDebugID=-debugID;if(content==null){if(hasExistingContent){ReactInstrumentation.debugTool.onUnmountComponent(this._contentDebugID)}this._contentDebugID=null;return}validateDOMNesting(null,String(content),this,this._ancestorInfo);this._contentDebugID=contentDebugID;if(hasExistingContent){ReactInstrumentation.debugTool.onBeforeUpdateComponent(contentDebugID,content);ReactInstrumentation.debugTool.onUpdateComponent(contentDebugID)}else{ReactInstrumentation.debugTool.onBeforeMountComponent(contentDebugID,content,debugID);ReactInstrumentation.debugTool.onMountComponent(contentDebugID);ReactInstrumentation.debugTool.onSetChildren(debugID,[contentDebugID])}}}var mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"};function trackInputValue(){inputValueTracking.track(this)}function trapBubbledEventsLocal(){var inst=this;!inst._rootNodeID?process.env.NODE_ENV!=="production"?invariant(false,"Must be mounted to trap events"):_prodInvariant("63"):void 0;var node=getNode(inst);!node?process.env.NODE_ENV!=="production"?invariant(false,"trapBubbledEvent(...): Requires node to be rendered."):_prodInvariant("64"):void 0;switch(inst._tag){case"iframe":case"object":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topLoad","load",node)];break;case"video":case"audio":inst._wrapperState.listeners=[];for(var event in mediaEvents){if(mediaEvents.hasOwnProperty(event)){inst._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(event,mediaEvents[event],node))}}break;case"source":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topError","error",node)];break;case"img":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topError","error",node),ReactBrowserEventEmitter.trapBubbledEvent("topLoad","load",node)];break;case"form":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topReset","reset",node),ReactBrowserEventEmitter.trapBubbledEvent("topSubmit","submit",node)];break;case"input":case"select":case"textarea":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topInvalid","invalid",node)];break}}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}var omittedCloseTags={area:true,base:true,br:true,col:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true};var newlineEatingTags={listing:true,pre:true,textarea:true};var voidElementTags=_assign({menuitem:true},omittedCloseTags);var VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/;var validatedTagCache={};var hasOwnProperty={}.hasOwnProperty;function validateDangerousTag(tag){if(!hasOwnProperty.call(validatedTagCache,tag)){!VALID_TAG_REGEX.test(tag)?process.env.NODE_ENV!=="production"?invariant(false,"Invalid tag: %s",tag):_prodInvariant("65",tag):void 0;validatedTagCache[tag]=true}}function isCustomComponent(tagName,props){return tagName.indexOf("-")>=0||props.is!=null}var globalIdCounter=1;function ReactDOMComponent(element){var tag=element.type;validateDangerousTag(tag);this._currentElement=element;this._tag=tag.toLowerCase();this._namespaceURI=null;this._renderedChildren=null;this._previousStyle=null;this._previousStyleCopy=null;this._hostNode=null;this._hostParent=null;this._rootNodeID=0;this._domID=0;this._hostContainerInfo=null;this._wrapperState=null;this._topLevelWrapper=null;this._flags=0;if(process.env.NODE_ENV!=="production"){this._ancestorInfo=null;setAndValidateContentChildDev.call(this,null)}}ReactDOMComponent.displayName="ReactDOMComponent";ReactDOMComponent.Mixin={mountComponent:function(transaction,hostParent,hostContainerInfo,context){this._rootNodeID=globalIdCounter++;this._domID=hostContainerInfo._idCounter++;this._hostParent=hostParent;this._hostContainerInfo=hostContainerInfo;var props=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null};transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"input":ReactDOMInput.mountWrapper(this,props,hostParent);props=ReactDOMInput.getHostProps(this,props);transaction.getReactMountReady().enqueue(trackInputValue,this);transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"option":ReactDOMOption.mountWrapper(this,props,hostParent);props=ReactDOMOption.getHostProps(this,props);break;case"select":ReactDOMSelect.mountWrapper(this,props,hostParent);props=ReactDOMSelect.getHostProps(this,props);transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"textarea":ReactDOMTextarea.mountWrapper(this,props,hostParent);props=ReactDOMTextarea.getHostProps(this,props);transaction.getReactMountReady().enqueue(trackInputValue,this);transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break}assertValidProps(this,props);var namespaceURI;var parentTag;if(hostParent!=null){namespaceURI=hostParent._namespaceURI;parentTag=hostParent._tag}else if(hostContainerInfo._tag){namespaceURI=hostContainerInfo._namespaceURI;parentTag=hostContainerInfo._tag}if(namespaceURI==null||namespaceURI===DOMNamespaces.svg&&parentTag==="foreignobject"){namespaceURI=DOMNamespaces.html}if(namespaceURI===DOMNamespaces.html){if(this._tag==="svg"){namespaceURI=DOMNamespaces.svg}else if(this._tag==="math"){namespaceURI=DOMNamespaces.mathml}}this._namespaceURI=namespaceURI;if(process.env.NODE_ENV!=="production"){var parentInfo;if(hostParent!=null){parentInfo=hostParent._ancestorInfo}else if(hostContainerInfo._tag){parentInfo=hostContainerInfo._ancestorInfo}if(parentInfo){validateDOMNesting(this._tag,null,this,parentInfo)}this._ancestorInfo=validateDOMNesting.updatedAncestorInfo(parentInfo,this._tag,this)}var mountImage;if(transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument;var el;if(namespaceURI===DOMNamespaces.html){if(this._tag==="script"){var div=ownerDocument.createElement("div");var type=this._currentElement.type;div.innerHTML="<"+type+"></"+type+">";el=div.removeChild(div.firstChild)}else if(props.is){el=ownerDocument.createElement(this._currentElement.type,props.is)}else{el=ownerDocument.createElement(this._currentElement.type)}}else{el=ownerDocument.createElementNS(namespaceURI,this._currentElement.type)}ReactDOMComponentTree.precacheNode(this,el);this._flags|=Flags.hasCachedChildNodes;if(!this._hostParent){DOMPropertyOperations.setAttributeForRoot(el)}this._updateDOMProperties(null,props,transaction);var lazyTree=DOMLazyTree(el);this._createInitialChildren(transaction,props,context,lazyTree);mountImage=lazyTree}else{var tagOpen=this._createOpenTagMarkupAndPutListeners(transaction,props);var tagContent=this._createContentMarkup(transaction,props,context);if(!tagContent&&omittedCloseTags[this._tag]){mountImage=tagOpen+"/>"}else{mountImage=tagOpen+">"+tagContent+"</"+this._currentElement.type+">"}}switch(this._tag){case"input":transaction.getReactMountReady().enqueue(inputPostMount,this);if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"textarea":transaction.getReactMountReady().enqueue(textareaPostMount,this);if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"select":if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"button":if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"option":transaction.getReactMountReady().enqueue(optionPostMount,this);break}return mountImage},_createOpenTagMarkupAndPutListeners:function(transaction,props){var ret="<"+this._currentElement.type;for(var propKey in props){if(!props.hasOwnProperty(propKey)){continue}var propValue=props[propKey];if(propValue==null){continue}if(registrationNameModules.hasOwnProperty(propKey)){if(propValue){enqueuePutListener(this,propKey,propValue,transaction)}}else{if(propKey===STYLE){if(propValue){if(process.env.NODE_ENV!=="production"){this._previousStyle=propValue}propValue=this._previousStyleCopy=_assign({},props.style)}propValue=CSSPropertyOperations.createMarkupForStyles(propValue,this)}var markup=null;if(this._tag!=null&&isCustomComponent(this._tag,props)){if(!RESERVED_PROPS.hasOwnProperty(propKey)){markup=DOMPropertyOperations.createMarkupForCustomAttribute(propKey,propValue)}}else{markup=DOMPropertyOperations.createMarkupForProperty(propKey,propValue)}if(markup){ret+=" "+markup}}}if(transaction.renderToStaticMarkup){return ret}if(!this._hostParent){ret+=" "+DOMPropertyOperations.createMarkupForRoot()}ret+=" "+DOMPropertyOperations.createMarkupForID(this._domID);return ret},_createContentMarkup:function(transaction,props,context){var ret="";var innerHTML=props.dangerouslySetInnerHTML;if(innerHTML!=null){if(innerHTML.__html!=null){ret=innerHTML.__html}}else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null;var childrenToUse=contentToUse!=null?null:props.children;if(contentToUse!=null){ret=escapeTextContentForBrowser(contentToUse);if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,contentToUse)}}else if(childrenToUse!=null){var mountImages=this.mountChildren(childrenToUse,transaction,context);ret=mountImages.join("")}}if(newlineEatingTags[this._tag]&&ret.charAt(0)==="\n"){return"\n"+ret}else{return ret}},_createInitialChildren:function(transaction,props,context,lazyTree){var innerHTML=props.dangerouslySetInnerHTML;if(innerHTML!=null){if(innerHTML.__html!=null){DOMLazyTree.queueHTML(lazyTree,innerHTML.__html)}}else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null;var childrenToUse=contentToUse!=null?null:props.children;if(contentToUse!=null){if(contentToUse!==""){if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,contentToUse)}DOMLazyTree.queueText(lazyTree,contentToUse)}}else if(childrenToUse!=null){var mountImages=this.mountChildren(childrenToUse,transaction,context);for(var i=0;i<mountImages.length;i++){DOMLazyTree.queueChild(lazyTree,mountImages[i])}}}},receiveComponent:function(nextElement,transaction,context){var prevElement=this._currentElement;this._currentElement=nextElement;this.updateComponent(transaction,prevElement,nextElement,context)},updateComponent:function(transaction,prevElement,nextElement,context){var lastProps=prevElement.props;var nextProps=this._currentElement.props;switch(this._tag){case"input":lastProps=ReactDOMInput.getHostProps(this,lastProps);nextProps=ReactDOMInput.getHostProps(this,nextProps);break;case"option":lastProps=ReactDOMOption.getHostProps(this,lastProps);nextProps=ReactDOMOption.getHostProps(this,nextProps);break;case"select":lastProps=ReactDOMSelect.getHostProps(this,lastProps);nextProps=ReactDOMSelect.getHostProps(this,nextProps);break;case"textarea":lastProps=ReactDOMTextarea.getHostProps(this,lastProps);nextProps=ReactDOMTextarea.getHostProps(this,nextProps);break}assertValidProps(this,nextProps);this._updateDOMProperties(lastProps,nextProps,transaction);this._updateDOMChildren(lastProps,nextProps,transaction,context);switch(this._tag){case"input":ReactDOMInput.updateWrapper(this);inputValueTracking.updateValueIfChanged(this);break;case"textarea":ReactDOMTextarea.updateWrapper(this);break;case"select":transaction.getReactMountReady().enqueue(postUpdateSelectWrapper,this);break}},_updateDOMProperties:function(lastProps,nextProps,transaction){var propKey;var styleName;var styleUpdates;for(propKey in lastProps){if(nextProps.hasOwnProperty(propKey)||!lastProps.hasOwnProperty(propKey)||lastProps[propKey]==null){continue}if(propKey===STYLE){var lastStyle=this._previousStyleCopy;for(styleName in lastStyle){if(lastStyle.hasOwnProperty(styleName)){styleUpdates=styleUpdates||{};styleUpdates[styleName]=""}}this._previousStyleCopy=null}else if(registrationNameModules.hasOwnProperty(propKey)){if(lastProps[propKey]){deleteListener(this,propKey)}}else if(isCustomComponent(this._tag,lastProps)){if(!RESERVED_PROPS.hasOwnProperty(propKey)){DOMPropertyOperations.deleteValueForAttribute(getNode(this),propKey)}}else if(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey)){DOMPropertyOperations.deleteValueForProperty(getNode(this),propKey)}}for(propKey in nextProps){var nextProp=nextProps[propKey];var lastProp=propKey===STYLE?this._previousStyleCopy:lastProps!=null?lastProps[propKey]:undefined;if(!nextProps.hasOwnProperty(propKey)||nextProp===lastProp||nextProp==null&&lastProp==null){continue}if(propKey===STYLE){if(nextProp){if(process.env.NODE_ENV!=="production"){checkAndWarnForMutatedStyle(this._previousStyleCopy,this._previousStyle,this);this._previousStyle=nextProp}nextProp=this._previousStyleCopy=_assign({},nextProp)}else{this._previousStyleCopy=null}if(lastProp){for(styleName in lastProp){if(lastProp.hasOwnProperty(styleName)&&(!nextProp||!nextProp.hasOwnProperty(styleName))){styleUpdates=styleUpdates||{};styleUpdates[styleName]=""}}for(styleName in nextProp){if(nextProp.hasOwnProperty(styleName)&&lastProp[styleName]!==nextProp[styleName]){styleUpdates=styleUpdates||{};styleUpdates[styleName]=nextProp[styleName]}}}else{styleUpdates=nextProp}}else if(registrationNameModules.hasOwnProperty(propKey)){if(nextProp){enqueuePutListener(this,propKey,nextProp,transaction)}else if(lastProp){deleteListener(this,propKey)}}else if(isCustomComponent(this._tag,nextProps)){if(!RESERVED_PROPS.hasOwnProperty(propKey)){DOMPropertyOperations.setValueForAttribute(getNode(this),propKey,nextProp)}}else if(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey)){var node=getNode(this);if(nextProp!=null){DOMPropertyOperations.setValueForProperty(node,propKey,nextProp)}else{DOMPropertyOperations.deleteValueForProperty(node,propKey)}}}if(styleUpdates){CSSPropertyOperations.setValueForStyles(getNode(this),styleUpdates,this)}},_updateDOMChildren:function(lastProps,nextProps,transaction,context){var lastContent=CONTENT_TYPES[typeof lastProps.children]?lastProps.children:null;var nextContent=CONTENT_TYPES[typeof nextProps.children]?nextProps.children:null;var lastHtml=lastProps.dangerouslySetInnerHTML&&lastProps.dangerouslySetInnerHTML.__html;var nextHtml=nextProps.dangerouslySetInnerHTML&&nextProps.dangerouslySetInnerHTML.__html;var lastChildren=lastContent!=null?null:lastProps.children;var nextChildren=nextContent!=null?null:nextProps.children;var lastHasContentOrHtml=lastContent!=null||lastHtml!=null;var nextHasContentOrHtml=nextContent!=null||nextHtml!=null;if(lastChildren!=null&&nextChildren==null){this.updateChildren(null,transaction,context)}else if(lastHasContentOrHtml&&!nextHasContentOrHtml){this.updateTextContent("");if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onSetChildren(this._debugID,[])}}if(nextContent!=null){if(lastContent!==nextContent){this.updateTextContent(""+nextContent);if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,nextContent)}}}else if(nextHtml!=null){if(lastHtml!==nextHtml){this.updateMarkup(""+nextHtml)}if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onSetChildren(this._debugID,[])}}else if(nextChildren!=null){if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,null)}this.updateChildren(nextChildren,transaction,context)}},getHostNode:function(){return getNode(this)},unmountComponent:function(safely){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var listeners=this._wrapperState.listeners;if(listeners){for(var i=0;i<listeners.length;i++){listeners[i].remove()}}break;case"input":case"textarea":inputValueTracking.stopTracking(this);break;case"html":case"head":case"body":!false?process.env.NODE_ENV!=="production"?invariant(false,"<%s> tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this._tag):_prodInvariant("66",this._tag):void 0;break}this.unmountChildren(safely);ReactDOMComponentTree.uncacheNode(this);EventPluginHub.deleteAllListeners(this);this._rootNodeID=0;this._domID=0;this._wrapperState=null;if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,null)}},getPublicInstance:function(){return getNode(this)}};_assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin);module.exports=ReactDOMComponent}).call(this)}).call(this,require("_process"))},{"./AutoFocusUtils":179,"./CSSPropertyOperations":182,"./DOMLazyTree":186,"./DOMNamespaces":187,"./DOMProperty":188,"./DOMPropertyOperations":189,"./EventPluginHub":193,"./EventPluginRegistry":194,"./ReactBrowserEventEmitter":202,"./ReactDOMComponentFlags":209,"./ReactDOMComponentTree":210,"./ReactDOMInput":215,"./ReactDOMOption":218,"./ReactDOMSelect":219,"./ReactDOMTextarea":222,"./ReactInstrumentation":239,"./ReactMultiChild":243,"./ReactServerRenderingTransaction":251,"./escapeTextContentForBrowser":279,"./inputValueTracking":292,"./isEventSupported":294,"./reactProdInvariant":297,"./validateDOMNesting":303,_process:25,"fbjs/lib/emptyFunction":146,"fbjs/lib/invariant":154,"fbjs/lib/shallowEqual":160,"fbjs/lib/warning":161,"object-assign":166}],209:[function(require,module,exports){"use strict";var ReactDOMComponentFlags={hasCachedChildNodes:1<<0};module.exports=ReactDOMComponentFlags},{}],210:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var DOMProperty=require("./DOMProperty");var ReactDOMComponentFlags=require("./ReactDOMComponentFlags");var invariant=require("fbjs/lib/invariant");var ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME;var Flags=ReactDOMComponentFlags;var internalInstanceKey="__reactInternalInstance$"+Math.random().toString(36).slice(2);function shouldPrecacheNode(node,nodeID){return node.nodeType===1&&node.getAttribute(ATTR_NAME)===String(nodeID)||node.nodeType===8&&node.nodeValue===" react-text: "+nodeID+" "||node.nodeType===8&&node.nodeValue===" react-empty: "+nodeID+" "}function getRenderedHostOrTextFromComponent(component){var rendered;while(rendered=component._renderedComponent){component=rendered}return component}function precacheNode(inst,node){var hostInst=getRenderedHostOrTextFromComponent(inst);hostInst._hostNode=node;node[internalInstanceKey]=hostInst}function uncacheNode(inst){var node=inst._hostNode;if(node){delete node[internalInstanceKey];inst._hostNode=null}}function precacheChildNodes(inst,node){if(inst._flags&Flags.hasCachedChildNodes){return}var children=inst._renderedChildren;var childNode=node.firstChild;outer:for(var name in children){if(!children.hasOwnProperty(name)){continue}var childInst=children[name];var childID=getRenderedHostOrTextFromComponent(childInst)._domID;if(childID===0){continue}for(;childNode!==null;childNode=childNode.nextSibling){if(shouldPrecacheNode(childNode,childID)){precacheNode(childInst,childNode);continue outer}}!false?process.env.NODE_ENV!=="production"?invariant(false,"Unable to find element with ID %s.",childID):_prodInvariant("32",childID):void 0}inst._flags|=Flags.hasCachedChildNodes}function getClosestInstanceFromNode(node){if(node[internalInstanceKey]){return node[internalInstanceKey]}var parents=[];while(!node[internalInstanceKey]){parents.push(node);if(node.parentNode){node=node.parentNode}else{return null}}var closest;var inst;for(;node&&(inst=node[internalInstanceKey]);node=parents.pop()){closest=inst;if(parents.length){precacheChildNodes(inst,node)}}return closest}function getInstanceFromNode(node){var inst=getClosestInstanceFromNode(node);if(inst!=null&&inst._hostNode===node){return inst}else{return null}}function getNodeFromInstance(inst){!(inst._hostNode!==undefined)?process.env.NODE_ENV!=="production"?invariant(false,"getNodeFromInstance: Invalid argument."):_prodInvariant("33"):void 0;if(inst._hostNode){return inst._hostNode}var parents=[];while(!inst._hostNode){parents.push(inst);!inst._hostParent?process.env.NODE_ENV!=="production"?invariant(false,"React DOM tree root should always have a node reference."):_prodInvariant("34"):void 0;inst=inst._hostParent}for(;parents.length;inst=parents.pop()){precacheChildNodes(inst,inst._hostNode)}return inst._hostNode}var ReactDOMComponentTree={getClosestInstanceFromNode:getClosestInstanceFromNode,getInstanceFromNode:getInstanceFromNode,getNodeFromInstance:getNodeFromInstance,precacheChildNodes:precacheChildNodes,precacheNode:precacheNode,uncacheNode:uncacheNode};module.exports=ReactDOMComponentTree}).call(this)}).call(this,require("_process"))},{"./DOMProperty":188,"./ReactDOMComponentFlags":209,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],211:[function(require,module,exports){(function(process){(function(){"use strict";var validateDOMNesting=require("./validateDOMNesting");var DOC_NODE_TYPE=9;function ReactDOMContainerInfo(topLevelWrapper,node){var info={_topLevelWrapper:topLevelWrapper,_idCounter:1,_ownerDocument:node?node.nodeType===DOC_NODE_TYPE?node:node.ownerDocument:null,_node:node,_tag:node?node.nodeName.toLowerCase():null,_namespaceURI:node?node.namespaceURI:null};if(process.env.NODE_ENV!=="production"){info._ancestorInfo=node?validateDOMNesting.updatedAncestorInfo(null,info._tag,null):null}return info}module.exports=ReactDOMContainerInfo}).call(this)}).call(this,require("_process"))},{"./validateDOMNesting":303,_process:25}],212:[function(require,module,exports){"use strict";var _assign=require("object-assign");var DOMLazyTree=require("./DOMLazyTree");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMEmptyComponent=function(instantiate){this._currentElement=null;this._hostNode=null;this._hostParent=null;this._hostContainerInfo=null;this._domID=0};_assign(ReactDOMEmptyComponent.prototype,{mountComponent:function(transaction,hostParent,hostContainerInfo,context){var domID=hostContainerInfo._idCounter++;this._domID=domID;this._hostParent=hostParent;this._hostContainerInfo=hostContainerInfo;var nodeValue=" react-empty: "+this._domID+" ";if(transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument;var node=ownerDocument.createComment(nodeValue);ReactDOMComponentTree.precacheNode(this,node);return DOMLazyTree(node)}else{if(transaction.renderToStaticMarkup){return""}return"\x3c!--"+nodeValue+"--\x3e"}},receiveComponent:function(){},getHostNode:function(){return ReactDOMComponentTree.getNodeFromInstance(this)},unmountComponent:function(){ReactDOMComponentTree.uncacheNode(this)}});module.exports=ReactDOMEmptyComponent},{"./DOMLazyTree":186,"./ReactDOMComponentTree":210,"object-assign":166}],213:[function(require,module,exports){"use strict";var ReactDOMFeatureFlags={useCreateElement:true,useFiber:false};module.exports=ReactDOMFeatureFlags},{}],214:[function(require,module,exports){"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMIDOperations={dangerouslyProcessChildrenUpdates:function(parentInst,updates){var node=ReactDOMComponentTree.getNodeFromInstance(parentInst);DOMChildrenOperations.processUpdates(node,updates)}};module.exports=ReactDOMIDOperations},{"./DOMChildrenOperations":185,"./ReactDOMComponentTree":210}],215:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var DOMPropertyOperations=require("./DOMPropertyOperations");var LinkedValueUtils=require("./LinkedValueUtils");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var didWarnValueLink=false;var didWarnCheckedLink=false;var didWarnValueDefaultValue=false;var didWarnCheckedDefaultChecked=false;var didWarnControlledToUncontrolled=false;var didWarnUncontrolledToControlled=false;function forceUpdateIfMounted(){if(this._rootNodeID){ReactDOMInput.updateWrapper(this)}}function isControlled(props){var usesChecked=props.type==="checkbox"||props.type==="radio";return usesChecked?props.checked!=null:props.value!=null}var ReactDOMInput={getHostProps:function(inst,props){var value=LinkedValueUtils.getValue(props);var checked=LinkedValueUtils.getChecked(props);var hostProps=_assign({type:undefined,step:undefined,min:undefined,max:undefined},props,{defaultChecked:undefined,defaultValue:undefined,value:value!=null?value:inst._wrapperState.initialValue,checked:checked!=null?checked:inst._wrapperState.initialChecked,onChange:inst._wrapperState.onChange});return hostProps},mountWrapper:function(inst,props){if(process.env.NODE_ENV!=="production"){LinkedValueUtils.checkPropTypes("input",props,inst._currentElement._owner);var owner=inst._currentElement._owner;if(props.valueLink!==undefined&&!didWarnValueLink){process.env.NODE_ENV!=="production"?warning(false,"`valueLink` prop on `input` is deprecated; set `value` and `onChange` instead."):void 0;didWarnValueLink=true}if(props.checkedLink!==undefined&&!didWarnCheckedLink){process.env.NODE_ENV!=="production"?warning(false,"`checkedLink` prop on `input` is deprecated; set `value` and `onChange` instead."):void 0;didWarnCheckedLink=true}if(props.checked!==undefined&&props.defaultChecked!==undefined&&!didWarnCheckedDefaultChecked){process.env.NODE_ENV!=="production"?warning(false,"%s contains an input of type %s with both checked and defaultChecked props. "+"Input elements must be either controlled or uncontrolled "+"(specify either the checked prop, or the defaultChecked prop, but not "+"both). Decide between using a controlled or uncontrolled input "+"element and remove one of these props. More info: "+"https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnCheckedDefaultChecked=true}if(props.value!==undefined&&props.defaultValue!==undefined&&!didWarnValueDefaultValue){process.env.NODE_ENV!=="production"?warning(false,"%s contains an input of type %s with both value and defaultValue props. "+"Input elements must be either controlled or uncontrolled "+"(specify either the value prop, or the defaultValue prop, but not "+"both). Decide between using a controlled or uncontrolled input "+"element and remove one of these props. More info: "+"https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnValueDefaultValue=true}}var defaultValue=props.defaultValue;inst._wrapperState={initialChecked:props.checked!=null?props.checked:props.defaultChecked,initialValue:props.value!=null?props.value:defaultValue,listeners:null,onChange:_handleChange.bind(inst),controlled:isControlled(props)}},updateWrapper:function(inst){var props=inst._currentElement.props;if(process.env.NODE_ENV!=="production"){var controlled=isControlled(props);var owner=inst._currentElement._owner;if(!inst._wrapperState.controlled&&controlled&&!didWarnUncontrolledToControlled){process.env.NODE_ENV!=="production"?warning(false,"%s is changing an uncontrolled input of type %s to be controlled. "+"Input elements should not switch from uncontrolled to controlled (or vice versa). "+"Decide between using a controlled or uncontrolled input "+"element for the lifetime of the component. More info: https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnUncontrolledToControlled=true}if(inst._wrapperState.controlled&&!controlled&&!didWarnControlledToUncontrolled){process.env.NODE_ENV!=="production"?warning(false,"%s is changing a controlled input of type %s to be uncontrolled. "+"Input elements should not switch from controlled to uncontrolled (or vice versa). "+"Decide between using a controlled or uncontrolled input "+"element for the lifetime of the component. More info: https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnControlledToUncontrolled=true}}var checked=props.checked;if(checked!=null){DOMPropertyOperations.setValueForProperty(ReactDOMComponentTree.getNodeFromInstance(inst),"checked",checked||false)}var node=ReactDOMComponentTree.getNodeFromInstance(inst);var value=LinkedValueUtils.getValue(props);if(value!=null){if(value===0&&node.value===""){node.value="0"}else if(props.type==="number"){var valueAsNumber=parseFloat(node.value,10)||0;if(value!=valueAsNumber||value==valueAsNumber&&node.value!=value){node.value=""+value}}else if(node.value!==""+value){node.value=""+value}}else{if(props.value==null&&props.defaultValue!=null){if(node.defaultValue!==""+props.defaultValue){node.defaultValue=""+props.defaultValue}}if(props.checked==null&&props.defaultChecked!=null){node.defaultChecked=!!props.defaultChecked}}},postMountWrapper:function(inst){var props=inst._currentElement.props;var node=ReactDOMComponentTree.getNodeFromInstance(inst);switch(props.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":node.value="";node.value=node.defaultValue;break;default:node.value=node.value;break}var name=node.name;if(name!==""){node.name=""}node.defaultChecked=!node.defaultChecked;node.defaultChecked=!node.defaultChecked;if(name!==""){node.name=name}}};function _handleChange(event){var props=this._currentElement.props;var returnValue=LinkedValueUtils.executeOnChange(props,event);ReactUpdates.asap(forceUpdateIfMounted,this);var name=props.name;if(props.type==="radio"&&name!=null){var rootNode=ReactDOMComponentTree.getNodeFromInstance(this);var queryRoot=rootNode;while(queryRoot.parentNode){queryRoot=queryRoot.parentNode}var group=queryRoot.querySelectorAll("input[name="+JSON.stringify(""+name)+'][type="radio"]');for(var i=0;i<group.length;i++){var otherNode=group[i];if(otherNode===rootNode||otherNode.form!==rootNode.form){continue}var otherInstance=ReactDOMComponentTree.getInstanceFromNode(otherNode);!otherInstance?process.env.NODE_ENV!=="production"?invariant(false,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."):_prodInvariant("90"):void 0;ReactUpdates.asap(forceUpdateIfMounted,otherInstance)}}return returnValue}module.exports=ReactDOMInput}).call(this)}).call(this,require("_process"))},{"./DOMPropertyOperations":189,"./LinkedValueUtils":200,"./ReactDOMComponentTree":210,"./ReactUpdates":254,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161,"object-assign":166}],216:[function(require,module,exports){(function(process){(function(){"use strict";var DOMProperty=require("./DOMProperty");var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var warning=require("fbjs/lib/warning");var warnedProperties={};var rARIA=new RegExp("^(aria)-["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$");function validateProperty(tagName,name,debugID){if(warnedProperties.hasOwnProperty(name)&&warnedProperties[name]){return true}if(rARIA.test(name)){var lowerCasedName=name.toLowerCase();var standardName=DOMProperty.getPossibleStandardName.hasOwnProperty(lowerCasedName)?DOMProperty.getPossibleStandardName[lowerCasedName]:null;if(standardName==null){warnedProperties[name]=true;return false}if(name!==standardName){process.env.NODE_ENV!=="production"?warning(false,"Unknown ARIA attribute %s. Did you mean %s?%s",name,standardName,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;warnedProperties[name]=true;return true}}return true}function warnInvalidARIAProps(debugID,element){var invalidProps=[];for(var key in element.props){var isValid=validateProperty(element.type,key,debugID);if(!isValid){invalidProps.push(key)}}var unknownPropString=invalidProps.map(function(prop){return"`"+prop+"`"}).join(", ");if(invalidProps.length===1){process.env.NODE_ENV!=="production"?warning(false,"Invalid aria prop %s on <%s> tag. "+"For details, see https://fb.me/invalid-aria-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}else if(invalidProps.length>1){process.env.NODE_ENV!=="production"?warning(false,"Invalid aria props %s on <%s> tag. "+"For details, see https://fb.me/invalid-aria-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}}function handleElement(debugID,element){if(element==null||typeof element.type!=="string"){return}if(element.type.indexOf("-")>=0||element.props.is){return}warnInvalidARIAProps(debugID,element)}var ReactDOMInvalidARIAHook={onBeforeMountComponent:function(debugID,element){if(process.env.NODE_ENV!=="production"){handleElement(debugID,element)}},onBeforeUpdateComponent:function(debugID,element){if(process.env.NODE_ENV!=="production"){handleElement(debugID,element)}}};module.exports=ReactDOMInvalidARIAHook}).call(this)}).call(this,require("_process"))},{"./DOMProperty":188,_process:25,"fbjs/lib/warning":161,"react/lib/ReactComponentTreeHook":312}],217:[function(require,module,exports){(function(process){(function(){"use strict";var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var warning=require("fbjs/lib/warning");var didWarnValueNull=false;function handleElement(debugID,element){if(element==null){return}if(element.type!=="input"&&element.type!=="textarea"&&element.type!=="select"){return}if(element.props!=null&&element.props.value===null&&!didWarnValueNull){process.env.NODE_ENV!=="production"?warning(false,"`value` prop on `%s` should not be null. "+"Consider using the empty string to clear the component or `undefined` "+"for uncontrolled components.%s",element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;didWarnValueNull=true}}var ReactDOMNullInputValuePropHook={onBeforeMountComponent:function(debugID,element){handleElement(debugID,element)},onBeforeUpdateComponent:function(debugID,element){handleElement(debugID,element)}};module.exports=ReactDOMNullInputValuePropHook}).call(this)}).call(this,require("_process"))},{_process:25,"fbjs/lib/warning":161,"react/lib/ReactComponentTreeHook":312}],218:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var React=require("react/lib/React");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMSelect=require("./ReactDOMSelect");var warning=require("fbjs/lib/warning");var didWarnInvalidOptionChildren=false;function flattenChildren(children){var content="";React.Children.forEach(children,function(child){if(child==null){return}if(typeof child==="string"||typeof child==="number"){content+=child}else if(!didWarnInvalidOptionChildren){didWarnInvalidOptionChildren=true;process.env.NODE_ENV!=="production"?warning(false,"Only strings and numbers are supported as <option> children."):void 0}});return content}var ReactDOMOption={mountWrapper:function(inst,props,hostParent){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(props.selected==null,"Use the `defaultValue` or `value` props on <select> instead of "+"setting `selected` on <option>."):void 0}var selectValue=null;if(hostParent!=null){var selectParent=hostParent;if(selectParent._tag==="optgroup"){selectParent=selectParent._hostParent}if(selectParent!=null&&selectParent._tag==="select"){selectValue=ReactDOMSelect.getSelectValueContext(selectParent)}}var selected=null;if(selectValue!=null){var value;if(props.value!=null){value=props.value+""}else{value=flattenChildren(props.children)}selected=false;if(Array.isArray(selectValue)){for(var i=0;i<selectValue.length;i++){if(""+selectValue[i]===value){selected=true;break}}}else{selected=""+selectValue===value}}inst._wrapperState={selected:selected}},postMountWrapper:function(inst){var props=inst._currentElement.props;if(props.value!=null){var node=ReactDOMComponentTree.getNodeFromInstance(inst);node.setAttribute("value",props.value)}},getHostProps:function(inst,props){var hostProps=_assign({selected:undefined,children:undefined},props);if(inst._wrapperState.selected!=null){hostProps.selected=inst._wrapperState.selected}var content=flattenChildren(props.children);if(content){hostProps.children=content}return hostProps}};module.exports=ReactDOMOption}).call(this)}).call(this,require("_process"))},{"./ReactDOMComponentTree":210,"./ReactDOMSelect":219,_process:25,"fbjs/lib/warning":161,"object-assign":166,"react/lib/React":309}],219:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var LinkedValueUtils=require("./LinkedValueUtils");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var warning=require("fbjs/lib/warning");var didWarnValueLink=false;var didWarnValueDefaultValue=false;function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=false;var props=this._currentElement.props;var value=LinkedValueUtils.getValue(props);if(value!=null){updateOptions(this,Boolean(props.multiple),value)}}}function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""}var valuePropNames=["value","defaultValue"];function checkSelectPropTypes(inst,props){var owner=inst._currentElement._owner;LinkedValueUtils.checkPropTypes("select",props,owner);if(props.valueLink!==undefined&&!didWarnValueLink){process.env.NODE_ENV!=="production"?warning(false,"`valueLink` prop on `select` is deprecated; set `value` and `onChange` instead."):void 0;didWarnValueLink=true}for(var i=0;i<valuePropNames.length;i++){var propName=valuePropNames[i];if(props[propName]==null){continue}var isArray=Array.isArray(props[propName]);if(props.multiple&&!isArray){process.env.NODE_ENV!=="production"?warning(false,"The `%s` prop supplied to <select> must be an array if "+"`multiple` is true.%s",propName,getDeclarationErrorAddendum(owner)):void 0}else if(!props.multiple&&isArray){process.env.NODE_ENV!=="production"?warning(false,"The `%s` prop supplied to <select> must be a scalar "+"value if `multiple` is false.%s",propName,getDeclarationErrorAddendum(owner)):void 0}}}function updateOptions(inst,multiple,propValue){var selectedValue,i;var options=ReactDOMComponentTree.getNodeFromInstance(inst).options;if(multiple){selectedValue={};for(i=0;i<propValue.length;i++){selectedValue[""+propValue[i]]=true}for(i=0;i<options.length;i++){var selected=selectedValue.hasOwnProperty(options[i].value);if(options[i].selected!==selected){options[i].selected=selected}}}else{selectedValue=""+propValue;for(i=0;i<options.length;i++){if(options[i].value===selectedValue){options[i].selected=true;return}}if(options.length){options[0].selected=true}}}var ReactDOMSelect={getHostProps:function(inst,props){return _assign({},props,{onChange:inst._wrapperState.onChange,value:undefined})},mountWrapper:function(inst,props){if(process.env.NODE_ENV!=="production"){checkSelectPropTypes(inst,props)}var value=LinkedValueUtils.getValue(props);inst._wrapperState={pendingUpdate:false,initialValue:value!=null?value:props.defaultValue,listeners:null,onChange:_handleChange.bind(inst),wasMultiple:Boolean(props.multiple)};if(props.value!==undefined&&props.defaultValue!==undefined&&!didWarnValueDefaultValue){process.env.NODE_ENV!=="production"?warning(false,"Select elements must be either controlled or uncontrolled "+"(specify either the value prop, or the defaultValue prop, but not "+"both). Decide between using a controlled or uncontrolled select "+"element and remove one of these props. More info: "+"https://fb.me/react-controlled-components"):void 0;didWarnValueDefaultValue=true}},getSelectValueContext:function(inst){return inst._wrapperState.initialValue},postUpdateWrapper:function(inst){var props=inst._currentElement.props;inst._wrapperState.initialValue=undefined;var wasMultiple=inst._wrapperState.wasMultiple;inst._wrapperState.wasMultiple=Boolean(props.multiple);var value=LinkedValueUtils.getValue(props);if(value!=null){inst._wrapperState.pendingUpdate=false;updateOptions(inst,Boolean(props.multiple),value)}else if(wasMultiple!==Boolean(props.multiple)){if(props.defaultValue!=null){updateOptions(inst,Boolean(props.multiple),props.defaultValue)}else{updateOptions(inst,Boolean(props.multiple),props.multiple?[]:"")}}}};function _handleChange(event){var props=this._currentElement.props;var returnValue=LinkedValueUtils.executeOnChange(props,event);if(this._rootNodeID){this._wrapperState.pendingUpdate=true}ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this);return returnValue}module.exports=ReactDOMSelect}).call(this)}).call(this,require("_process"))},{"./LinkedValueUtils":200,"./ReactDOMComponentTree":210,"./ReactUpdates":254,_process:25,"fbjs/lib/warning":161,"object-assign":166}],220:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var getNodeForCharacterOffset=require("./getNodeForCharacterOffset");var getTextContentAccessor=require("./getTextContentAccessor");function isCollapsed(anchorNode,anchorOffset,focusNode,focusOffset){return anchorNode===focusNode&&anchorOffset===focusOffset}function getIEOffsets(node){var selection=document.selection;var selectedRange=selection.createRange();var selectedLength=selectedRange.text.length;var fromStart=selectedRange.duplicate();fromStart.moveToElementText(node);fromStart.setEndPoint("EndToStart",selectedRange);var startOffset=fromStart.text.length;var endOffset=startOffset+selectedLength;return{start:startOffset,end:endOffset}}function getModernOffsets(node){var selection=window.getSelection&&window.getSelection();if(!selection||selection.rangeCount===0){return null}var anchorNode=selection.anchorNode;var anchorOffset=selection.anchorOffset;var focusNode=selection.focusNode;var focusOffset=selection.focusOffset;var currentRange=selection.getRangeAt(0);try{currentRange.startContainer.nodeType;currentRange.endContainer.nodeType}catch(e){return null}var isSelectionCollapsed=isCollapsed(selection.anchorNode,selection.anchorOffset,selection.focusNode,selection.focusOffset);var rangeLength=isSelectionCollapsed?0:currentRange.toString().length;var tempRange=currentRange.cloneRange();tempRange.selectNodeContents(node);tempRange.setEnd(currentRange.startContainer,currentRange.startOffset);var isTempRangeCollapsed=isCollapsed(tempRange.startContainer,tempRange.startOffset,tempRange.endContainer,tempRange.endOffset);var start=isTempRangeCollapsed?0:tempRange.toString().length;var end=start+rangeLength;var detectionRange=document.createRange();detectionRange.setStart(anchorNode,anchorOffset);detectionRange.setEnd(focusNode,focusOffset);var isBackward=detectionRange.collapsed;return{start:isBackward?end:start,end:isBackward?start:end}}function setIEOffsets(node,offsets){var range=document.selection.createRange().duplicate();var start,end;if(offsets.end===undefined){start=offsets.start;end=start}else if(offsets.start>offsets.end){start=offsets.end;end=offsets.start}else{start=offsets.start;end=offsets.end}range.moveToElementText(node);range.moveStart("character",start);range.setEndPoint("EndToStart",range);range.moveEnd("character",end-start);range.select()}function setModernOffsets(node,offsets){if(!window.getSelection){return}var selection=window.getSelection();var length=node[getTextContentAccessor()].length;var start=Math.min(offsets.start,length);var end=offsets.end===undefined?start:Math.min(offsets.end,length);if(!selection.extend&&start>end){var temp=end;end=start;start=temp}var startMarker=getNodeForCharacterOffset(node,start);var endMarker=getNodeForCharacterOffset(node,end);if(startMarker&&endMarker){var range=document.createRange();range.setStart(startMarker.node,startMarker.offset);selection.removeAllRanges();if(start>end){selection.addRange(range);selection.extend(endMarker.node,endMarker.offset)}else{range.setEnd(endMarker.node,endMarker.offset);selection.addRange(range)}}}var useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window);var ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection},{"./getNodeForCharacterOffset":289,"./getTextContentAccessor":290,"fbjs/lib/ExecutionEnvironment":140}],221:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var DOMChildrenOperations=require("./DOMChildrenOperations");var DOMLazyTree=require("./DOMLazyTree");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var invariant=require("fbjs/lib/invariant");var validateDOMNesting=require("./validateDOMNesting");var ReactDOMTextComponent=function(text){this._currentElement=text;this._stringText=""+text;this._hostNode=null;this._hostParent=null;this._domID=0;this._mountIndex=0;this._closingComment=null;this._commentNodes=null};_assign(ReactDOMTextComponent.prototype,{mountComponent:function(transaction,hostParent,hostContainerInfo,context){if(process.env.NODE_ENV!=="production"){var parentInfo;if(hostParent!=null){parentInfo=hostParent._ancestorInfo}else if(hostContainerInfo!=null){parentInfo=hostContainerInfo._ancestorInfo}if(parentInfo){validateDOMNesting(null,this._stringText,this,parentInfo)}}var domID=hostContainerInfo._idCounter++;var openingValue=" react-text: "+domID+" ";var closingValue=" /react-text ";this._domID=domID;this._hostParent=hostParent;if(transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument;var openingComment=ownerDocument.createComment(openingValue);var closingComment=ownerDocument.createComment(closingValue);var lazyTree=DOMLazyTree(ownerDocument.createDocumentFragment());DOMLazyTree.queueChild(lazyTree,DOMLazyTree(openingComment));if(this._stringText){DOMLazyTree.queueChild(lazyTree,DOMLazyTree(ownerDocument.createTextNode(this._stringText)))}DOMLazyTree.queueChild(lazyTree,DOMLazyTree(closingComment));ReactDOMComponentTree.precacheNode(this,openingComment);this._closingComment=closingComment;return lazyTree}else{var escapedText=escapeTextContentForBrowser(this._stringText);if(transaction.renderToStaticMarkup){return escapedText}return"\x3c!--"+openingValue+"--\x3e"+escapedText+"\x3c!--"+closingValue+"--\x3e"}},receiveComponent:function(nextText,transaction){if(nextText!==this._currentElement){this._currentElement=nextText;var nextStringText=""+nextText;if(nextStringText!==this._stringText){this._stringText=nextStringText;var commentNodes=this.getHostNode();DOMChildrenOperations.replaceDelimitedText(commentNodes[0],commentNodes[1],nextStringText)}}},getHostNode:function(){var hostNode=this._commentNodes;if(hostNode){return hostNode}if(!this._closingComment){var openingComment=ReactDOMComponentTree.getNodeFromInstance(this);var node=openingComment.nextSibling;while(true){!(node!=null)?process.env.NODE_ENV!=="production"?invariant(false,"Missing closing comment for text component %s",this._domID):_prodInvariant("67",this._domID):void 0;if(node.nodeType===8&&node.nodeValue===" /react-text "){this._closingComment=node;break}node=node.nextSibling}}hostNode=[this._hostNode,this._closingComment];this._commentNodes=hostNode;return hostNode},unmountComponent:function(){this._closingComment=null;this._commentNodes=null;ReactDOMComponentTree.uncacheNode(this)}});module.exports=ReactDOMTextComponent}).call(this)}).call(this,require("_process"))},{"./DOMChildrenOperations":185,"./DOMLazyTree":186,"./ReactDOMComponentTree":210,"./escapeTextContentForBrowser":279,"./reactProdInvariant":297,"./validateDOMNesting":303,_process:25,"fbjs/lib/invariant":154,"object-assign":166}],222:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var LinkedValueUtils=require("./LinkedValueUtils");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var didWarnValueLink=false;var didWarnValDefaultVal=false;function forceUpdateIfMounted(){if(this._rootNodeID){ReactDOMTextarea.updateWrapper(this)}}var ReactDOMTextarea={getHostProps:function(inst,props){!(props.dangerouslySetInnerHTML==null)?process.env.NODE_ENV!=="production"?invariant(false,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):_prodInvariant("91"):void 0;var hostProps=_assign({},props,{value:undefined,defaultValue:undefined,children:""+inst._wrapperState.initialValue,onChange:inst._wrapperState.onChange});return hostProps},mountWrapper:function(inst,props){if(process.env.NODE_ENV!=="production"){LinkedValueUtils.checkPropTypes("textarea",props,inst._currentElement._owner);if(props.valueLink!==undefined&&!didWarnValueLink){process.env.NODE_ENV!=="production"?warning(false,"`valueLink` prop on `textarea` is deprecated; set `value` and `onChange` instead."):void 0;didWarnValueLink=true}if(props.value!==undefined&&props.defaultValue!==undefined&&!didWarnValDefaultVal){process.env.NODE_ENV!=="production"?warning(false,"Textarea elements must be either controlled or uncontrolled "+"(specify either the value prop, or the defaultValue prop, but not "+"both). Decide between using a controlled or uncontrolled textarea "+"and remove one of these props. More info: "+"https://fb.me/react-controlled-components"):void 0;didWarnValDefaultVal=true}}var value=LinkedValueUtils.getValue(props);var initialValue=value;if(value==null){var defaultValue=props.defaultValue;var children=props.children;if(children!=null){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(false,"Use the `defaultValue` or `value` props instead of setting "+"children on <textarea>."):void 0}!(defaultValue==null)?process.env.NODE_ENV!=="production"?invariant(false,"If you supply `defaultValue` on a <textarea>, do not pass children."):_prodInvariant("92"):void 0;if(Array.isArray(children)){!(children.length<=1)?process.env.NODE_ENV!=="production"?invariant(false,"<textarea> can only have at most one child."):_prodInvariant("93"):void 0;children=children[0]}defaultValue=""+children}if(defaultValue==null){defaultValue=""}initialValue=defaultValue}inst._wrapperState={initialValue:""+initialValue,listeners:null,onChange:_handleChange.bind(inst)}},updateWrapper:function(inst){var props=inst._currentElement.props;var node=ReactDOMComponentTree.getNodeFromInstance(inst);var value=LinkedValueUtils.getValue(props);if(value!=null){var newValue=""+value;if(newValue!==node.value){node.value=newValue}if(props.defaultValue==null){node.defaultValue=newValue}}if(props.defaultValue!=null){node.defaultValue=props.defaultValue}},postMountWrapper:function(inst){var node=ReactDOMComponentTree.getNodeFromInstance(inst);var textContent=node.textContent;if(textContent===inst._wrapperState.initialValue){node.value=textContent}}};function _handleChange(event){var props=this._currentElement.props;var returnValue=LinkedValueUtils.executeOnChange(props,event);ReactUpdates.asap(forceUpdateIfMounted,this);return returnValue}module.exports=ReactDOMTextarea}).call(this)}).call(this,require("_process"))},{"./LinkedValueUtils":200,"./ReactDOMComponentTree":210,"./ReactUpdates":254,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161,"object-assign":166}],223:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function getLowestCommonAncestor(instA,instB){!("_hostNode"in instA)?process.env.NODE_ENV!=="production"?invariant(false,"getNodeFromInstance: Invalid argument."):_prodInvariant("33"):void 0;!("_hostNode"in instB)?process.env.NODE_ENV!=="production"?invariant(false,"getNodeFromInstance: Invalid argument."):_prodInvariant("33"):void 0;var depthA=0;for(var tempA=instA;tempA;tempA=tempA._hostParent){depthA++}var depthB=0;for(var tempB=instB;tempB;tempB=tempB._hostParent){depthB++}while(depthA-depthB>0){instA=instA._hostParent;depthA--}while(depthB-depthA>0){instB=instB._hostParent;depthB--}var depth=depthA;while(depth--){if(instA===instB){return instA}instA=instA._hostParent;instB=instB._hostParent}return null}function isAncestor(instA,instB){!("_hostNode"in instA)?process.env.NODE_ENV!=="production"?invariant(false,"isAncestor: Invalid argument."):_prodInvariant("35"):void 0;!("_hostNode"in instB)?process.env.NODE_ENV!=="production"?invariant(false,"isAncestor: Invalid argument."):_prodInvariant("35"):void 0;while(instB){if(instB===instA){return true}instB=instB._hostParent}return false}function getParentInstance(inst){!("_hostNode"in inst)?process.env.NODE_ENV!=="production"?invariant(false,"getParentInstance: Invalid argument."):_prodInvariant("36"):void 0;return inst._hostParent}function traverseTwoPhase(inst,fn,arg){var path=[];while(inst){path.push(inst);inst=inst._hostParent}var i;for(i=path.length;i-- >0;){fn(path[i],"captured",arg)}for(i=0;i<path.length;i++){fn(path[i],"bubbled",arg)}}function traverseEnterLeave(from,to,fn,argFrom,argTo){var common=from&&to?getLowestCommonAncestor(from,to):null;var pathFrom=[];while(from&&from!==common){pathFrom.push(from);from=from._hostParent}var pathTo=[];while(to&&to!==common){pathTo.push(to);to=to._hostParent}var i;for(i=0;i<pathFrom.length;i++){fn(pathFrom[i],"bubbled",argFrom)}for(i=pathTo.length;i-- >0;){fn(pathTo[i],"captured",argTo)}}module.exports={isAncestor:isAncestor,getLowestCommonAncestor:getLowestCommonAncestor,getParentInstance:getParentInstance,traverseTwoPhase:traverseTwoPhase,traverseEnterLeave:traverseEnterLeave}}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],224:[function(require,module,exports){(function(process){(function(){"use strict";var DOMProperty=require("./DOMProperty");var EventPluginRegistry=require("./EventPluginRegistry");var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var warning=require("fbjs/lib/warning");if(process.env.NODE_ENV!=="production"){var reactProps={children:true,dangerouslySetInnerHTML:true,key:true,ref:true,autoFocus:true,defaultValue:true,valueLink:true,defaultChecked:true,checkedLink:true,innerHTML:true,suppressContentEditableWarning:true,onFocusIn:true,onFocusOut:true};var warnedProperties={};var validateProperty=function(tagName,name,debugID){if(DOMProperty.properties.hasOwnProperty(name)||DOMProperty.isCustomAttribute(name)){return true}if(reactProps.hasOwnProperty(name)&&reactProps[name]||warnedProperties.hasOwnProperty(name)&&warnedProperties[name]){return true}if(EventPluginRegistry.registrationNameModules.hasOwnProperty(name)){return true}warnedProperties[name]=true;var lowerCasedName=name.toLowerCase();var standardName=DOMProperty.isCustomAttribute(lowerCasedName)?lowerCasedName:DOMProperty.getPossibleStandardName.hasOwnProperty(lowerCasedName)?DOMProperty.getPossibleStandardName[lowerCasedName]:null;var registrationName=EventPluginRegistry.possibleRegistrationNames.hasOwnProperty(lowerCasedName)?EventPluginRegistry.possibleRegistrationNames[lowerCasedName]:null;if(standardName!=null){process.env.NODE_ENV!=="production"?warning(false,"Unknown DOM property %s. Did you mean %s?%s",name,standardName,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;return true}else if(registrationName!=null){process.env.NODE_ENV!=="production"?warning(false,"Unknown event handler property %s. Did you mean `%s`?%s",name,registrationName,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;return true}else{return false}}}var warnUnknownProperties=function(debugID,element){var unknownProps=[];for(var key in element.props){var isValid=validateProperty(element.type,key,debugID);if(!isValid){unknownProps.push(key)}}var unknownPropString=unknownProps.map(function(prop){return"`"+prop+"`"}).join(", ");if(unknownProps.length===1){process.env.NODE_ENV!=="production"?warning(false,"Unknown prop %s on <%s> tag. Remove this prop from the element. "+"For details, see https://fb.me/react-unknown-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}else if(unknownProps.length>1){process.env.NODE_ENV!=="production"?warning(false,"Unknown props %s on <%s> tag. Remove these props from the element. "+"For details, see https://fb.me/react-unknown-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}};function handleElement(debugID,element){if(element==null||typeof element.type!=="string"){return}if(element.type.indexOf("-")>=0||element.props.is){return}warnUnknownProperties(debugID,element)}var ReactDOMUnknownPropertyHook={onBeforeMountComponent:function(debugID,element){handleElement(debugID,element)},onBeforeUpdateComponent:function(debugID,element){handleElement(debugID,element)}};module.exports=ReactDOMUnknownPropertyHook}).call(this)}).call(this,require("_process"))},{"./DOMProperty":188,"./EventPluginRegistry":194,_process:25,"fbjs/lib/warning":161,"react/lib/ReactComponentTreeHook":312}],225:[function(require,module,exports){(function(process){(function(){"use strict";var ReactInvalidSetStateWarningHook=require("./ReactInvalidSetStateWarningHook");var ReactHostOperationHistoryHook=require("./ReactHostOperationHistoryHook");var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var performanceNow=require("fbjs/lib/performanceNow");var warning=require("fbjs/lib/warning");var hooks=[];var didHookThrowForEvent={};function callHook(event,fn,context,arg1,arg2,arg3,arg4,arg5){try{fn.call(context,arg1,arg2,arg3,arg4,arg5)}catch(e){process.env.NODE_ENV!=="production"?warning(didHookThrowForEvent[event],"Exception thrown by hook while handling %s: %s",event,e+"\n"+e.stack):void 0;didHookThrowForEvent[event]=true}}function emitEvent(event,arg1,arg2,arg3,arg4,arg5){for(var i=0;i<hooks.length;i++){var hook=hooks[i];var fn=hook[event];if(fn){callHook(event,fn,hook,arg1,arg2,arg3,arg4,arg5)}}}var isProfiling=false;var flushHistory=[];var lifeCycleTimerStack=[];var currentFlushNesting=0;var currentFlushMeasurements=[];var currentFlushStartTime=0;var currentTimerDebugID=null;var currentTimerStartTime=0;var currentTimerNestedFlushDuration=0;var currentTimerType=null;var lifeCycleTimerHasWarned=false;function clearHistory(){ReactComponentTreeHook.purgeUnmountedComponents();ReactHostOperationHistoryHook.clearHistory()}function getTreeSnapshot(registeredIDs){return registeredIDs.reduce(function(tree,id){var ownerID=ReactComponentTreeHook.getOwnerID(id);var parentID=ReactComponentTreeHook.getParentID(id);tree[id]={displayName:ReactComponentTreeHook.getDisplayName(id),text:ReactComponentTreeHook.getText(id),updateCount:ReactComponentTreeHook.getUpdateCount(id),childIDs:ReactComponentTreeHook.getChildIDs(id),ownerID:ownerID||parentID&&ReactComponentTreeHook.getOwnerID(parentID)||0,parentID:parentID};return tree},{})}function resetMeasurements(){var previousStartTime=currentFlushStartTime;var previousMeasurements=currentFlushMeasurements;var previousOperations=ReactHostOperationHistoryHook.getHistory();if(currentFlushNesting===0){currentFlushStartTime=0;currentFlushMeasurements=[];clearHistory();return}if(previousMeasurements.length||previousOperations.length){var registeredIDs=ReactComponentTreeHook.getRegisteredIDs();flushHistory.push({duration:performanceNow()-previousStartTime,measurements:previousMeasurements||[],operations:previousOperations||[],treeSnapshot:getTreeSnapshot(registeredIDs)})}clearHistory();currentFlushStartTime=performanceNow();currentFlushMeasurements=[]}function checkDebugID(debugID){var allowRoot=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(allowRoot&&debugID===0){return}if(!debugID){process.env.NODE_ENV!=="production"?warning(false,"ReactDebugTool: debugID may not be empty."):void 0}}function beginLifeCycleTimer(debugID,timerType){if(currentFlushNesting===0){return}if(currentTimerType&&!lifeCycleTimerHasWarned){process.env.NODE_ENV!=="production"?warning(false,"There is an internal error in the React performance measurement code. "+"Did not expect %s timer to start while %s timer is still in "+"progress for %s instance.",timerType,currentTimerType||"no",debugID===currentTimerDebugID?"the same":"another"):void 0;lifeCycleTimerHasWarned=true}currentTimerStartTime=performanceNow();currentTimerNestedFlushDuration=0;currentTimerDebugID=debugID;currentTimerType=timerType}function endLifeCycleTimer(debugID,timerType){if(currentFlushNesting===0){return}if(currentTimerType!==timerType&&!lifeCycleTimerHasWarned){process.env.NODE_ENV!=="production"?warning(false,"There is an internal error in the React performance measurement code. "+"We did not expect %s timer to stop while %s timer is still in "+"progress for %s instance. Please report this as a bug in React.",timerType,currentTimerType||"no",debugID===currentTimerDebugID?"the same":"another"):void 0;lifeCycleTimerHasWarned=true}if(isProfiling){currentFlushMeasurements.push({timerType:timerType,instanceID:debugID,duration:performanceNow()-currentTimerStartTime-currentTimerNestedFlushDuration})}currentTimerStartTime=0;currentTimerNestedFlushDuration=0;currentTimerDebugID=null;currentTimerType=null}function pauseCurrentLifeCycleTimer(){var currentTimer={startTime:currentTimerStartTime,nestedFlushStartTime:performanceNow(),debugID:currentTimerDebugID,timerType:currentTimerType};lifeCycleTimerStack.push(currentTimer);currentTimerStartTime=0;currentTimerNestedFlushDuration=0;currentTimerDebugID=null;currentTimerType=null}function resumeCurrentLifeCycleTimer(){var _lifeCycleTimerStack$=lifeCycleTimerStack.pop(),startTime=_lifeCycleTimerStack$.startTime,nestedFlushStartTime=_lifeCycleTimerStack$.nestedFlushStartTime,debugID=_lifeCycleTimerStack$.debugID,timerType=_lifeCycleTimerStack$.timerType;var nestedFlushDuration=performanceNow()-nestedFlushStartTime;currentTimerStartTime=startTime;currentTimerNestedFlushDuration+=nestedFlushDuration;currentTimerDebugID=debugID;currentTimerType=timerType}var lastMarkTimeStamp=0;var canUsePerformanceMeasure=typeof performance!=="undefined"&&typeof performance.mark==="function"&&typeof performance.clearMarks==="function"&&typeof performance.measure==="function"&&typeof performance.clearMeasures==="function";function shouldMark(debugID){if(!isProfiling||!canUsePerformanceMeasure){return false}var element=ReactComponentTreeHook.getElement(debugID);if(element==null||typeof element!=="object"){return false}var isHostElement=typeof element.type==="string";if(isHostElement){return false}return true}function markBegin(debugID,markType){if(!shouldMark(debugID)){return}var markName=debugID+"::"+markType;lastMarkTimeStamp=performanceNow();performance.mark(markName)}function markEnd(debugID,markType){if(!shouldMark(debugID)){return}var markName=debugID+"::"+markType;var displayName=ReactComponentTreeHook.getDisplayName(debugID)||"Unknown";var timeStamp=performanceNow();if(timeStamp-lastMarkTimeStamp>.1){var measurementName=displayName+" ["+markType+"]";performance.measure(measurementName,markName)}performance.clearMarks(markName);if(measurementName){performance.clearMeasures(measurementName)}}var ReactDebugTool={addHook:function(hook){hooks.push(hook)},removeHook:function(hook){for(var i=0;i<hooks.length;i++){if(hooks[i]===hook){hooks.splice(i,1);i--}}},isProfiling:function(){return isProfiling},beginProfiling:function(){if(isProfiling){return}isProfiling=true;flushHistory.length=0;resetMeasurements();ReactDebugTool.addHook(ReactHostOperationHistoryHook)},endProfiling:function(){if(!isProfiling){return}isProfiling=false;resetMeasurements();ReactDebugTool.removeHook(ReactHostOperationHistoryHook)},getFlushHistory:function(){return flushHistory},onBeginFlush:function(){currentFlushNesting++;resetMeasurements();pauseCurrentLifeCycleTimer();emitEvent("onBeginFlush")},onEndFlush:function(){resetMeasurements();currentFlushNesting--;resumeCurrentLifeCycleTimer();emitEvent("onEndFlush")},onBeginLifeCycleTimer:function(debugID,timerType){checkDebugID(debugID);emitEvent("onBeginLifeCycleTimer",debugID,timerType);markBegin(debugID,timerType);beginLifeCycleTimer(debugID,timerType)},onEndLifeCycleTimer:function(debugID,timerType){checkDebugID(debugID);endLifeCycleTimer(debugID,timerType);markEnd(debugID,timerType);emitEvent("onEndLifeCycleTimer",debugID,timerType)},onBeginProcessingChildContext:function(){emitEvent("onBeginProcessingChildContext")},onEndProcessingChildContext:function(){emitEvent("onEndProcessingChildContext")},onHostOperation:function(operation){checkDebugID(operation.instanceID);emitEvent("onHostOperation",operation)},onSetState:function(){emitEvent("onSetState")},onSetChildren:function(debugID,childDebugIDs){checkDebugID(debugID);childDebugIDs.forEach(checkDebugID);emitEvent("onSetChildren",debugID,childDebugIDs)},onBeforeMountComponent:function(debugID,element,parentDebugID){checkDebugID(debugID);checkDebugID(parentDebugID,true);emitEvent("onBeforeMountComponent",debugID,element,parentDebugID);markBegin(debugID,"mount")},onMountComponent:function(debugID){checkDebugID(debugID);markEnd(debugID,"mount");emitEvent("onMountComponent",debugID)},onBeforeUpdateComponent:function(debugID,element){checkDebugID(debugID);emitEvent("onBeforeUpdateComponent",debugID,element);markBegin(debugID,"update")},onUpdateComponent:function(debugID){checkDebugID(debugID);markEnd(debugID,"update");emitEvent("onUpdateComponent",debugID)},onBeforeUnmountComponent:function(debugID){checkDebugID(debugID);emitEvent("onBeforeUnmountComponent",debugID);markBegin(debugID,"unmount")},onUnmountComponent:function(debugID){checkDebugID(debugID);markEnd(debugID,"unmount");emitEvent("onUnmountComponent",debugID)},onTestEvent:function(){emitEvent("onTestEvent")}};ReactDebugTool.addDevtool=ReactDebugTool.addHook;ReactDebugTool.removeDevtool=ReactDebugTool.removeHook;ReactDebugTool.addHook(ReactInvalidSetStateWarningHook);ReactDebugTool.addHook(ReactComponentTreeHook);var url=ExecutionEnvironment.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(url)){ReactDebugTool.beginProfiling()}module.exports=ReactDebugTool}).call(this)}).call(this,require("_process"))},{"./ReactHostOperationHistoryHook":235,"./ReactInvalidSetStateWarningHook":240,_process:25,"fbjs/lib/ExecutionEnvironment":140,"fbjs/lib/performanceNow":159,"fbjs/lib/warning":161,"react/lib/ReactComponentTreeHook":312}],226:[function(require,module,exports){"use strict";var _assign=require("object-assign");var ReactUpdates=require("./ReactUpdates");var Transaction=require("./Transaction");var emptyFunction=require("fbjs/lib/emptyFunction");var RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=false}};var FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)};var TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}_assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction;var ReactDefaultBatchingStrategy={isBatchingUpdates:false,batchedUpdates:function(callback,a,b,c,d,e){var alreadyBatchingUpdates=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=true;if(alreadyBatchingUpdates){return callback(a,b,c,d,e)}else{return transaction.perform(callback,null,a,b,c,d,e)}}};module.exports=ReactDefaultBatchingStrategy},{"./ReactUpdates":254,"./Transaction":272,"fbjs/lib/emptyFunction":146,"object-assign":166}],227:[function(require,module,exports){"use strict";var ARIADOMPropertyConfig=require("./ARIADOMPropertyConfig");var BeforeInputEventPlugin=require("./BeforeInputEventPlugin");var ChangeEventPlugin=require("./ChangeEventPlugin");var DefaultEventPluginOrder=require("./DefaultEventPluginOrder");var EnterLeaveEventPlugin=require("./EnterLeaveEventPlugin");var HTMLDOMPropertyConfig=require("./HTMLDOMPropertyConfig");var ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment");var ReactDOMComponent=require("./ReactDOMComponent");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMEmptyComponent=require("./ReactDOMEmptyComponent");var ReactDOMTreeTraversal=require("./ReactDOMTreeTraversal");var ReactDOMTextComponent=require("./ReactDOMTextComponent");var ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy");var ReactEventListener=require("./ReactEventListener");var ReactInjection=require("./ReactInjection");var ReactReconcileTransaction=require("./ReactReconcileTransaction");var SVGDOMPropertyConfig=require("./SVGDOMPropertyConfig");var SelectEventPlugin=require("./SelectEventPlugin");var SimpleEventPlugin=require("./SimpleEventPlugin");var alreadyInjected=false;function inject(){if(alreadyInjected){return}alreadyInjected=true;ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener);ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder);ReactInjection.EventPluginUtils.injectComponentTree(ReactDOMComponentTree);ReactInjection.EventPluginUtils.injectTreeTraversal(ReactDOMTreeTraversal);ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin});ReactInjection.HostComponent.injectGenericComponentClass(ReactDOMComponent);ReactInjection.HostComponent.injectTextComponentClass(ReactDOMTextComponent);ReactInjection.DOMProperty.injectDOMPropertyConfig(ARIADOMPropertyConfig);ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig);ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig);ReactInjection.EmptyComponent.injectEmptyComponentFactory(function(instantiate){return new ReactDOMEmptyComponent(instantiate)});ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction);ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy);ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment)}module.exports={inject:inject}},{"./ARIADOMPropertyConfig":178,"./BeforeInputEventPlugin":180,"./ChangeEventPlugin":184,"./DefaultEventPluginOrder":191,"./EnterLeaveEventPlugin":192,"./HTMLDOMPropertyConfig":198,"./ReactComponentBrowserEnvironment":204,"./ReactDOMComponent":208,"./ReactDOMComponentTree":210,"./ReactDOMEmptyComponent":212,"./ReactDOMTextComponent":221,"./ReactDOMTreeTraversal":223,"./ReactDefaultBatchingStrategy":226,"./ReactEventListener":232,"./ReactInjection":236,"./ReactReconcileTransaction":248,"./SVGDOMPropertyConfig":256,"./SelectEventPlugin":257,"./SimpleEventPlugin":258}],228:[function(require,module,exports){"use strict";var REACT_ELEMENT_TYPE=typeof Symbol==="function"&&Symbol["for"]&&Symbol["for"]("react.element")||60103;module.exports=REACT_ELEMENT_TYPE},{}],229:[function(require,module,exports){"use strict";var emptyComponentFactory;var ReactEmptyComponentInjection={injectEmptyComponentFactory:function(factory){emptyComponentFactory=factory}};var ReactEmptyComponent={create:function(instantiate){return emptyComponentFactory(instantiate)}};ReactEmptyComponent.injection=ReactEmptyComponentInjection;module.exports=ReactEmptyComponent},{}],230:[function(require,module,exports){(function(process){(function(){"use strict";var caughtError=null;function invokeGuardedCallback(name,func,a){try{func(a)}catch(x){if(caughtError===null){caughtError=x}}}var ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var error=caughtError;caughtError=null;throw error}}};if(process.env.NODE_ENV!=="production"){if(typeof window!=="undefined"&&typeof window.dispatchEvent==="function"&&typeof document!=="undefined"&&typeof document.createEvent==="function"){var fakeNode=document.createElement("react");ReactErrorUtils.invokeGuardedCallback=function(name,func,a){var boundFunc=function(){func(a)};var evtType="react-"+name;fakeNode.addEventListener(evtType,boundFunc,false);var evt=document.createEvent("Event");evt.initEvent(evtType,false,false);fakeNode.dispatchEvent(evt);fakeNode.removeEventListener(evtType,boundFunc,false)}}}module.exports=ReactErrorUtils}).call(this)}).call(this,require("_process"))},{_process:25}],231:[function(require,module,exports){"use strict";var EventPluginHub=require("./EventPluginHub");function runEventQueueInBatch(events){EventPluginHub.enqueueEvents(events);EventPluginHub.processEventQueue(false)}var ReactEventEmitterMixin={handleTopLevel:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var events=EventPluginHub.extractEvents(topLevelType,targetInst,nativeEvent,nativeEventTarget);runEventQueueInBatch(events)}};module.exports=ReactEventEmitterMixin},{"./EventPluginHub":193}],232:[function(require,module,exports){"use strict";var _assign=require("object-assign");var EventListener=require("fbjs/lib/EventListener");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var PooledClass=require("./PooledClass");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var getEventTarget=require("./getEventTarget");var getUnboundedScrollPosition=require("fbjs/lib/getUnboundedScrollPosition");function findParent(inst){while(inst._hostParent){inst=inst._hostParent}var rootNode=ReactDOMComponentTree.getNodeFromInstance(inst);var container=rootNode.parentNode;return ReactDOMComponentTree.getClosestInstanceFromNode(container)}function TopLevelCallbackBookKeeping(topLevelType,nativeEvent){this.topLevelType=topLevelType;this.nativeEvent=nativeEvent;this.ancestors=[]}_assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null;this.nativeEvent=null;this.ancestors.length=0}});PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);function handleTopLevelImpl(bookKeeping){var nativeEventTarget=getEventTarget(bookKeeping.nativeEvent);var targetInst=ReactDOMComponentTree.getClosestInstanceFromNode(nativeEventTarget);var ancestor=targetInst;do{bookKeeping.ancestors.push(ancestor);ancestor=ancestor&&findParent(ancestor)}while(ancestor);for(var i=0;i<bookKeeping.ancestors.length;i++){targetInst=bookKeeping.ancestors[i];ReactEventListener._handleTopLevel(bookKeeping.topLevelType,targetInst,bookKeeping.nativeEvent,getEventTarget(bookKeeping.nativeEvent))}}function scrollValueMonitor(cb){var scrollPosition=getUnboundedScrollPosition(window);cb(scrollPosition)}var ReactEventListener={_enabled:true,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(handleTopLevel){ReactEventListener._handleTopLevel=handleTopLevel},setEnabled:function(enabled){ReactEventListener._enabled=!!enabled},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(topLevelType,handlerBaseName,element){if(!element){return null}return EventListener.listen(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType))},trapCapturedEvent:function(topLevelType,handlerBaseName,element){if(!element){return null}return EventListener.capture(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType))},monitorScrollValue:function(refresh){var callback=scrollValueMonitor.bind(null,refresh);EventListener.listen(window,"scroll",callback)},dispatchEvent:function(topLevelType,nativeEvent){if(!ReactEventListener._enabled){return}var bookKeeping=TopLevelCallbackBookKeeping.getPooled(topLevelType,nativeEvent);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,bookKeeping)}finally{TopLevelCallbackBookKeeping.release(bookKeeping)}}};module.exports=ReactEventListener},{"./PooledClass":201,"./ReactDOMComponentTree":210,"./ReactUpdates":254,"./getEventTarget":286,"fbjs/lib/EventListener":139,"fbjs/lib/ExecutionEnvironment":140,"fbjs/lib/getUnboundedScrollPosition":151,"object-assign":166}],233:[function(require,module,exports){"use strict";var ReactFeatureFlags={logTopLevelRenders:false};module.exports=ReactFeatureFlags},{}],234:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var genericComponentClass=null;var textComponentClass=null;var ReactHostComponentInjection={injectGenericComponentClass:function(componentClass){genericComponentClass=componentClass},injectTextComponentClass:function(componentClass){textComponentClass=componentClass}};function createInternalComponent(element){!genericComponentClass?process.env.NODE_ENV!=="production"?invariant(false,"There is no registered component for the tag %s",element.type):_prodInvariant("111",element.type):void 0;return new genericComponentClass(element)}function createInstanceForText(text){return new textComponentClass(text)}function isTextComponent(component){return component instanceof textComponentClass}var ReactHostComponent={createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactHostComponentInjection};module.exports=ReactHostComponent}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],235:[function(require,module,exports){"use strict";var history=[];var ReactHostOperationHistoryHook={onHostOperation:function(operation){history.push(operation)},clearHistory:function(){if(ReactHostOperationHistoryHook._preventClearing){return}history=[]},getHistory:function(){return history}};module.exports=ReactHostOperationHistoryHook},{}],236:[function(require,module,exports){"use strict";var DOMProperty=require("./DOMProperty");var EventPluginHub=require("./EventPluginHub");var EventPluginUtils=require("./EventPluginUtils");var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactEmptyComponent=require("./ReactEmptyComponent");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactHostComponent=require("./ReactHostComponent");var ReactUpdates=require("./ReactUpdates");var ReactInjection={Component:ReactComponentEnvironment.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventPluginUtils:EventPluginUtils.injection,EventEmitter:ReactBrowserEventEmitter.injection,HostComponent:ReactHostComponent.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection},{"./DOMProperty":188,"./EventPluginHub":193,"./EventPluginUtils":195,"./ReactBrowserEventEmitter":202,"./ReactComponentEnvironment":205,"./ReactEmptyComponent":229,"./ReactHostComponent":234,"./ReactUpdates":254}],237:[function(require,module,exports){"use strict";var ReactDOMSelection=require("./ReactDOMSelection");var containsNode=require("fbjs/lib/containsNode");var focusNode=require("fbjs/lib/focusNode");var getActiveElement=require("fbjs/lib/getActiveElement");function isInDocument(node){return containsNode(document.documentElement,node)}var ReactInputSelection={hasSelectionCapabilities:function(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName&&(nodeName==="input"&&elem.type==="text"||nodeName==="textarea"||elem.contentEditable==="true")},getSelectionInformation:function(){var focusedElem=getActiveElement();return{focusedElem:focusedElem,selectionRange:ReactInputSelection.hasSelectionCapabilities(focusedElem)?ReactInputSelection.getSelection(focusedElem):null}},restoreSelection:function(priorSelectionInformation){var curFocusedElem=getActiveElement();var priorFocusedElem=priorSelectionInformation.focusedElem;var priorSelectionRange=priorSelectionInformation.selectionRange;if(curFocusedElem!==priorFocusedElem&&isInDocument(priorFocusedElem)){if(ReactInputSelection.hasSelectionCapabilities(priorFocusedElem)){ReactInputSelection.setSelection(priorFocusedElem,priorSelectionRange)}focusNode(priorFocusedElem)}},getSelection:function(input){var selection;if("selectionStart"in input){selection={start:input.selectionStart,end:input.selectionEnd}}else if(document.selection&&input.nodeName&&input.nodeName.toLowerCase()==="input"){var range=document.selection.createRange();if(range.parentElement()===input){selection={start:-range.moveStart("character",-input.value.length),end:-range.moveEnd("character",-input.value.length)}}}else{selection=ReactDOMSelection.getOffsets(input)}return selection||{start:0,end:0}},setSelection:function(input,offsets){var start=offsets.start;var end=offsets.end;if(end===undefined){end=start}if("selectionStart"in input){input.selectionStart=start;input.selectionEnd=Math.min(end,input.value.length)}else if(document.selection&&input.nodeName&&input.nodeName.toLowerCase()==="input"){var range=input.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",end-start);range.select()}else{ReactDOMSelection.setOffsets(input,offsets)}}};module.exports=ReactInputSelection},{"./ReactDOMSelection":220,"fbjs/lib/containsNode":143,"fbjs/lib/focusNode":148,"fbjs/lib/getActiveElement":149}],238:[function(require,module,exports){"use strict";var ReactInstanceMap={remove:function(key){key._reactInternalInstance=undefined},get:function(key){return key._reactInternalInstance},has:function(key){return key._reactInternalInstance!==undefined},set:function(key,value){key._reactInternalInstance=value}};module.exports=ReactInstanceMap},{}],239:[function(require,module,exports){(function(process){(function(){"use strict";var debugTool=null;if(process.env.NODE_ENV!=="production"){var ReactDebugTool=require("./ReactDebugTool");debugTool=ReactDebugTool}module.exports={debugTool:debugTool}}).call(this)}).call(this,require("_process"))},{"./ReactDebugTool":225,_process:25}],240:[function(require,module,exports){(function(process){(function(){"use strict";var warning=require("fbjs/lib/warning");if(process.env.NODE_ENV!=="production"){var processingChildContext=false;var warnInvalidSetState=function(){process.env.NODE_ENV!=="production"?warning(!processingChildContext,"setState(...): Cannot call setState() inside getChildContext()"):void 0}}var ReactInvalidSetStateWarningHook={onBeginProcessingChildContext:function(){processingChildContext=true},onEndProcessingChildContext:function(){processingChildContext=false},onSetState:function(){warnInvalidSetState()}};module.exports=ReactInvalidSetStateWarningHook}).call(this)}).call(this,require("_process"))},{_process:25,"fbjs/lib/warning":161}],241:[function(require,module,exports){"use strict";var adler32=require("./adler32");var TAG_END=/\/?>/;var COMMENT_START=/^<\!\-\-/;var ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(markup){var checksum=adler32(markup);if(COMMENT_START.test(markup)){return markup}else{return markup.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+checksum+'"$&')}},canReuseMarkup:function(markup,element){var existingChecksum=element.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);existingChecksum=existingChecksum&&parseInt(existingChecksum,10);var markupChecksum=adler32(markup);return markupChecksum===existingChecksum}};module.exports=ReactMarkupChecksum},{"./adler32":275}],242:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var DOMLazyTree=require("./DOMLazyTree");var DOMProperty=require("./DOMProperty");var React=require("react/lib/React");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMContainerInfo=require("./ReactDOMContainerInfo");var ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags");var ReactFeatureFlags=require("./ReactFeatureFlags");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactMarkupChecksum=require("./ReactMarkupChecksum");var ReactReconciler=require("./ReactReconciler");var ReactUpdateQueue=require("./ReactUpdateQueue");var ReactUpdates=require("./ReactUpdates");var emptyObject=require("fbjs/lib/emptyObject");var instantiateReactComponent=require("./instantiateReactComponent");var invariant=require("fbjs/lib/invariant");var setInnerHTML=require("./setInnerHTML");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var warning=require("fbjs/lib/warning");var ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME;var ROOT_ATTR_NAME=DOMProperty.ROOT_ATTRIBUTE_NAME;var ELEMENT_NODE_TYPE=1;var DOC_NODE_TYPE=9;var DOCUMENT_FRAGMENT_NODE_TYPE=11;var instancesByReactRootID={};function firstDifferenceIndex(string1,string2){var minLen=Math.min(string1.length,string2.length);for(var i=0;i<minLen;i++){if(string1.charAt(i)!==string2.charAt(i)){return i}}return string1.length===string2.length?-1:minLen}function getReactRootElementInContainer(container){if(!container){return null}if(container.nodeType===DOC_NODE_TYPE){return container.documentElement}else{return container.firstChild}}function internalGetID(node){return node.getAttribute&&node.getAttribute(ATTR_NAME)||""}function mountComponentIntoNode(wrapperInstance,container,transaction,shouldReuseMarkup,context){var markerName;if(ReactFeatureFlags.logTopLevelRenders){var wrappedElement=wrapperInstance._currentElement.props.child;var type=wrappedElement.type;markerName="React mount: "+(typeof type==="string"?type:type.displayName||type.name);console.time(markerName)}var markup=ReactReconciler.mountComponent(wrapperInstance,transaction,null,ReactDOMContainerInfo(wrapperInstance,container),context,0);if(markerName){console.timeEnd(markerName)}wrapperInstance._renderedComponent._topLevelWrapper=wrapperInstance;ReactMount._mountImageIntoNode(markup,container,wrapperInstance,shouldReuseMarkup,transaction)}function batchedMountComponentIntoNode(componentInstance,container,shouldReuseMarkup,context){var transaction=ReactUpdates.ReactReconcileTransaction.getPooled(!shouldReuseMarkup&&ReactDOMFeatureFlags.useCreateElement);transaction.perform(mountComponentIntoNode,null,componentInstance,container,transaction,shouldReuseMarkup,context);ReactUpdates.ReactReconcileTransaction.release(transaction)}function unmountComponentFromNode(instance,container,safely){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onBeginFlush()}ReactReconciler.unmountComponent(instance,safely);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onEndFlush()}if(container.nodeType===DOC_NODE_TYPE){container=container.documentElement}while(container.lastChild){container.removeChild(container.lastChild)}}function hasNonRootReactChild(container){var rootEl=getReactRootElementInContainer(container);if(rootEl){var inst=ReactDOMComponentTree.getInstanceFromNode(rootEl);return!!(inst&&inst._hostParent)}}function nodeIsRenderedByOtherInstance(container){var rootEl=getReactRootElementInContainer(container);return!!(rootEl&&isReactNode(rootEl)&&!ReactDOMComponentTree.getInstanceFromNode(rootEl))}function isValidContainer(node){return!!(node&&(node.nodeType===ELEMENT_NODE_TYPE||node.nodeType===DOC_NODE_TYPE||node.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE))}function isReactNode(node){return isValidContainer(node)&&(node.hasAttribute(ROOT_ATTR_NAME)||node.hasAttribute(ATTR_NAME))}function getHostRootInstanceInContainer(container){var rootEl=getReactRootElementInContainer(container);var prevHostInstance=rootEl&&ReactDOMComponentTree.getInstanceFromNode(rootEl);return prevHostInstance&&!prevHostInstance._hostParent?prevHostInstance:null}function getTopLevelWrapperInContainer(container){var root=getHostRootInstanceInContainer(container);return root?root._hostContainerInfo._topLevelWrapper:null}var topLevelRootCounter=1;var TopLevelWrapper=function(){this.rootID=topLevelRootCounter++};TopLevelWrapper.prototype.isReactComponent={};if(process.env.NODE_ENV!=="production"){TopLevelWrapper.displayName="TopLevelWrapper"}TopLevelWrapper.prototype.render=function(){return this.props.child};TopLevelWrapper.isReactTopLevelWrapper=true;var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(container,renderCallback){renderCallback()},_updateRootComponent:function(prevComponent,nextElement,nextContext,container,callback){ReactMount.scrollMonitor(container,function(){ReactUpdateQueue.enqueueElementInternal(prevComponent,nextElement,nextContext);if(callback){ReactUpdateQueue.enqueueCallbackInternal(prevComponent,callback)}});return prevComponent},_renderNewRootComponent:function(nextElement,container,shouldReuseMarkup,context){process.env.NODE_ENV!=="production"?warning(ReactCurrentOwner.current==null,"_renderNewRootComponent(): Render methods should be a pure function "+"of props and state; triggering nested component updates from "+"render is not allowed. If necessary, trigger nested updates in "+"componentDidUpdate. Check the render method of %s.",ReactCurrentOwner.current&&ReactCurrentOwner.current.getName()||"ReactCompositeComponent"):void 0;!isValidContainer(container)?process.env.NODE_ENV!=="production"?invariant(false,"_registerComponent(...): Target container is not a DOM element."):_prodInvariant("37"):void 0;ReactBrowserEventEmitter.ensureScrollValueMonitoring();var componentInstance=instantiateReactComponent(nextElement,false);ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,componentInstance,container,shouldReuseMarkup,context);var wrapperID=componentInstance._instance.rootID;instancesByReactRootID[wrapperID]=componentInstance;return componentInstance},renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){!(parentComponent!=null&&ReactInstanceMap.has(parentComponent))?process.env.NODE_ENV!=="production"?invariant(false,"parentComponent must be a valid React Component"):_prodInvariant("38"):void 0;return ReactMount._renderSubtreeIntoContainer(parentComponent,nextElement,container,callback)},_renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){ReactUpdateQueue.validateCallback(callback,"ReactDOM.render");!React.isValidElement(nextElement)?process.env.NODE_ENV!=="production"?invariant(false,"ReactDOM.render(): Invalid component element.%s",typeof nextElement==="string"?" Instead of passing a string like 'div', pass "+"React.createElement('div') or <div />.":typeof nextElement==="function"?" Instead of passing a class like Foo, pass "+"React.createElement(Foo) or <Foo />.":nextElement!=null&&nextElement.props!==undefined?" This may be caused by unintentionally loading two independent "+"copies of React.":""):_prodInvariant("39",typeof nextElement==="string"?" Instead of passing a string like 'div', pass "+"React.createElement('div') or <div />.":typeof nextElement==="function"?" Instead of passing a class like Foo, pass "+"React.createElement(Foo) or <Foo />.":nextElement!=null&&nextElement.props!==undefined?" This may be caused by unintentionally loading two independent "+"copies of React.":""):void 0;process.env.NODE_ENV!=="production"?warning(!container||!container.tagName||container.tagName.toUpperCase()!=="BODY","render(): Rendering components directly into document.body is "+"discouraged, since its children are often manipulated by third-party "+"scripts and browser extensions. This may lead to subtle "+"reconciliation issues. Try rendering into a container element created "+"for your app."):void 0;var nextWrappedElement=React.createElement(TopLevelWrapper,{child:nextElement});var nextContext;if(parentComponent){var parentInst=ReactInstanceMap.get(parentComponent);nextContext=parentInst._processChildContext(parentInst._context)}else{nextContext=emptyObject}var prevComponent=getTopLevelWrapperInContainer(container);if(prevComponent){var prevWrappedElement=prevComponent._currentElement;var prevElement=prevWrappedElement.props.child;if(shouldUpdateReactComponent(prevElement,nextElement)){var publicInst=prevComponent._renderedComponent.getPublicInstance();var updatedCallback=callback&&function(){callback.call(publicInst)};ReactMount._updateRootComponent(prevComponent,nextWrappedElement,nextContext,container,updatedCallback);return publicInst}else{ReactMount.unmountComponentAtNode(container)}}var reactRootElement=getReactRootElementInContainer(container);var containerHasReactMarkup=reactRootElement&&!!internalGetID(reactRootElement);var containerHasNonRootReactChild=hasNonRootReactChild(container);if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!containerHasNonRootReactChild,"render(...): Replacing React-rendered children with a new root "+"component. If you intended to update the children of this node, "+"you should instead have the existing children update their state "+"and render the new components instead of calling ReactDOM.render."):void 0;if(!containerHasReactMarkup||reactRootElement.nextSibling){var rootElementSibling=reactRootElement;while(rootElementSibling){if(internalGetID(rootElementSibling)){process.env.NODE_ENV!=="production"?warning(false,"render(): Target node has markup rendered by React, but there "+"are unrelated nodes as well. This is most commonly caused by "+"white-space inserted around server-rendered markup."):void 0;break}rootElementSibling=rootElementSibling.nextSibling}}}var shouldReuseMarkup=containerHasReactMarkup&&!prevComponent&&!containerHasNonRootReactChild;var component=ReactMount._renderNewRootComponent(nextWrappedElement,container,shouldReuseMarkup,nextContext)._renderedComponent.getPublicInstance();if(callback){callback.call(component)}return component},render:function(nextElement,container,callback){return ReactMount._renderSubtreeIntoContainer(null,nextElement,container,callback)},unmountComponentAtNode:function(container){process.env.NODE_ENV!=="production"?warning(ReactCurrentOwner.current==null,"unmountComponentAtNode(): Render methods should be a pure function "+"of props and state; triggering nested component updates from render "+"is not allowed. If necessary, trigger nested updates in "+"componentDidUpdate. Check the render method of %s.",ReactCurrentOwner.current&&ReactCurrentOwner.current.getName()||"ReactCompositeComponent"):void 0;!isValidContainer(container)?process.env.NODE_ENV!=="production"?invariant(false,"unmountComponentAtNode(...): Target container is not a DOM element."):_prodInvariant("40"):void 0;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!nodeIsRenderedByOtherInstance(container),"unmountComponentAtNode(): The node you're attempting to unmount "+"was rendered by another copy of React."):void 0}var prevComponent=getTopLevelWrapperInContainer(container);if(!prevComponent){var containerHasNonRootReactChild=hasNonRootReactChild(container);var isContainerReactRoot=container.nodeType===1&&container.hasAttribute(ROOT_ATTR_NAME);if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!containerHasNonRootReactChild,"unmountComponentAtNode(): The node you're attempting to unmount "+"was rendered by React and is not a top-level container. %s",isContainerReactRoot?"You may have accidentally passed in a React root node instead "+"of its container.":"Instead, have the parent component update its state and "+"rerender in order to remove this component."):void 0}return false}delete instancesByReactRootID[prevComponent._instance.rootID];ReactUpdates.batchedUpdates(unmountComponentFromNode,prevComponent,container,false);return true},_mountImageIntoNode:function(markup,container,instance,shouldReuseMarkup,transaction){!isValidContainer(container)?process.env.NODE_ENV!=="production"?invariant(false,"mountComponentIntoNode(...): Target container is not valid."):_prodInvariant("41"):void 0;if(shouldReuseMarkup){var rootElement=getReactRootElementInContainer(container);if(ReactMarkupChecksum.canReuseMarkup(markup,rootElement)){ReactDOMComponentTree.precacheNode(instance,rootElement);return}else{var checksum=rootElement.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);rootElement.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var rootMarkup=rootElement.outerHTML;rootElement.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,checksum);var normalizedMarkup=markup;if(process.env.NODE_ENV!=="production"){var normalizer;if(container.nodeType===ELEMENT_NODE_TYPE){normalizer=document.createElement("div");normalizer.innerHTML=markup;normalizedMarkup=normalizer.innerHTML}else{normalizer=document.createElement("iframe");document.body.appendChild(normalizer);normalizer.contentDocument.write(markup);normalizedMarkup=normalizer.contentDocument.documentElement.outerHTML;document.body.removeChild(normalizer)}}var diffIndex=firstDifferenceIndex(normalizedMarkup,rootMarkup);var difference=" (client) "+normalizedMarkup.substring(diffIndex-20,diffIndex+20)+"\n (server) "+rootMarkup.substring(diffIndex-20,diffIndex+20);!(container.nodeType!==DOC_NODE_TYPE)?process.env.NODE_ENV!=="production"?invariant(false,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",difference):_prodInvariant("42",difference):void 0;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(false,"React attempted to reuse markup in a container but the "+"checksum was invalid. This generally means that you are "+"using server rendering and the markup generated on the "+"server was not what the client was expecting. React injected "+"new markup to compensate which works but you have lost many "+"of the benefits of server rendering. Instead, figure out "+"why the markup being generated is different on the client "+"or server:\n%s",difference):void 0}}}!(container.nodeType!==DOC_NODE_TYPE)?process.env.NODE_ENV!=="production"?invariant(false,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See ReactDOMServer.renderToString() for server rendering."):_prodInvariant("43"):void 0;if(transaction.useCreateElement){while(container.lastChild){container.removeChild(container.lastChild)}DOMLazyTree.insertTreeBefore(container,markup,null)}else{setInnerHTML(container,markup);ReactDOMComponentTree.precacheNode(instance,container.firstChild)}if(process.env.NODE_ENV!=="production"){var hostNode=ReactDOMComponentTree.getInstanceFromNode(container.firstChild);if(hostNode._debugID!==0){ReactInstrumentation.debugTool.onHostOperation({instanceID:hostNode._debugID,type:"mount",payload:markup.toString()})}}}};module.exports=ReactMount}).call(this)}).call(this,require("_process"))},{"./DOMLazyTree":186,"./DOMProperty":188,"./ReactBrowserEventEmitter":202,"./ReactDOMComponentTree":210,"./ReactDOMContainerInfo":211,"./ReactDOMFeatureFlags":213,"./ReactFeatureFlags":233,"./ReactInstanceMap":238,"./ReactInstrumentation":239,"./ReactMarkupChecksum":241,"./ReactReconciler":249,"./ReactUpdateQueue":253,"./ReactUpdates":254,"./instantiateReactComponent":293,"./reactProdInvariant":297,"./setInnerHTML":299,"./shouldUpdateReactComponent":301,_process:25,"fbjs/lib/emptyObject":147,"fbjs/lib/invariant":154,"fbjs/lib/warning":161,"react/lib/React":309,"react/lib/ReactCurrentOwner":313}],243:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactReconciler=require("./ReactReconciler");var ReactChildReconciler=require("./ReactChildReconciler");var emptyFunction=require("fbjs/lib/emptyFunction");var flattenChildren=require("./flattenChildren");var invariant=require("fbjs/lib/invariant");function makeInsertMarkup(markup,afterNode,toIndex){return{type:"INSERT_MARKUP",content:markup,fromIndex:null,fromNode:null,toIndex:toIndex,afterNode:afterNode}}function makeMove(child,afterNode,toIndex){return{type:"MOVE_EXISTING",content:null,fromIndex:child._mountIndex,fromNode:ReactReconciler.getHostNode(child),toIndex:toIndex,afterNode:afterNode}}function makeRemove(child,node){return{type:"REMOVE_NODE",content:null,fromIndex:child._mountIndex,fromNode:node,toIndex:null,afterNode:null}}function makeSetMarkup(markup){return{type:"SET_MARKUP",content:markup,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function makeTextContent(textContent){return{type:"TEXT_CONTENT",content:textContent,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function enqueue(queue,update){if(update){queue=queue||[];queue.push(update)}return queue}function processQueue(inst,updateQueue){ReactComponentEnvironment.processChildrenUpdates(inst,updateQueue)}var setChildrenForInstrumentation=emptyFunction;if(process.env.NODE_ENV!=="production"){var getDebugID=function(inst){if(!inst._debugID){var internal;if(internal=ReactInstanceMap.get(inst)){inst=internal}}return inst._debugID};setChildrenForInstrumentation=function(children){var debugID=getDebugID(this);if(debugID!==0){ReactInstrumentation.debugTool.onSetChildren(debugID,children?Object.keys(children).map(function(key){return children[key]._debugID}):[])}}}var ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(nestedChildren,transaction,context){if(process.env.NODE_ENV!=="production"){var selfDebugID=getDebugID(this);if(this._currentElement){try{ReactCurrentOwner.current=this._currentElement._owner;return ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context,selfDebugID)}finally{ReactCurrentOwner.current=null}}}return ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context)},_reconcilerUpdateChildren:function(prevChildren,nextNestedChildrenElements,mountImages,removedNodes,transaction,context){var nextChildren;var selfDebugID=0;if(process.env.NODE_ENV!=="production"){selfDebugID=getDebugID(this);if(this._currentElement){try{ReactCurrentOwner.current=this._currentElement._owner;nextChildren=flattenChildren(nextNestedChildrenElements,selfDebugID)}finally{ReactCurrentOwner.current=null}ReactChildReconciler.updateChildren(prevChildren,nextChildren,mountImages,removedNodes,transaction,this,this._hostContainerInfo,context,selfDebugID);return nextChildren}}nextChildren=flattenChildren(nextNestedChildrenElements,selfDebugID);ReactChildReconciler.updateChildren(prevChildren,nextChildren,mountImages,removedNodes,transaction,this,this._hostContainerInfo,context,selfDebugID);return nextChildren},mountChildren:function(nestedChildren,transaction,context){var children=this._reconcilerInstantiateChildren(nestedChildren,transaction,context);this._renderedChildren=children;var mountImages=[];var index=0;for(var name in children){if(children.hasOwnProperty(name)){var child=children[name];var selfDebugID=0;if(process.env.NODE_ENV!=="production"){selfDebugID=getDebugID(this)}var mountImage=ReactReconciler.mountComponent(child,transaction,this,this._hostContainerInfo,context,selfDebugID);child._mountIndex=index++;mountImages.push(mountImage)}}if(process.env.NODE_ENV!=="production"){setChildrenForInstrumentation.call(this,children)}return mountImages},updateTextContent:function(nextContent){var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren,false);for(var name in prevChildren){if(prevChildren.hasOwnProperty(name)){!false?process.env.NODE_ENV!=="production"?invariant(false,"updateTextContent called on non-empty component."):_prodInvariant("118"):void 0}}var updates=[makeTextContent(nextContent)];processQueue(this,updates)},updateMarkup:function(nextMarkup){var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren,false);for(var name in prevChildren){if(prevChildren.hasOwnProperty(name)){!false?process.env.NODE_ENV!=="production"?invariant(false,"updateTextContent called on non-empty component."):_prodInvariant("118"):void 0}}var updates=[makeSetMarkup(nextMarkup)];processQueue(this,updates)},updateChildren:function(nextNestedChildrenElements,transaction,context){this._updateChildren(nextNestedChildrenElements,transaction,context)},_updateChildren:function(nextNestedChildrenElements,transaction,context){var prevChildren=this._renderedChildren;var removedNodes={};var mountImages=[];var nextChildren=this._reconcilerUpdateChildren(prevChildren,nextNestedChildrenElements,mountImages,removedNodes,transaction,context);if(!nextChildren&&!prevChildren){return}var updates=null;var name;var nextIndex=0;var lastIndex=0;var nextMountIndex=0;var lastPlacedNode=null;for(name in nextChildren){if(!nextChildren.hasOwnProperty(name)){continue}var prevChild=prevChildren&&prevChildren[name];var nextChild=nextChildren[name];if(prevChild===nextChild){updates=enqueue(updates,this.moveChild(prevChild,lastPlacedNode,nextIndex,lastIndex));lastIndex=Math.max(prevChild._mountIndex,lastIndex);prevChild._mountIndex=nextIndex}else{if(prevChild){lastIndex=Math.max(prevChild._mountIndex,lastIndex)}updates=enqueue(updates,this._mountChildAtIndex(nextChild,mountImages[nextMountIndex],lastPlacedNode,nextIndex,transaction,context));nextMountIndex++}nextIndex++;lastPlacedNode=ReactReconciler.getHostNode(nextChild)}for(name in removedNodes){if(removedNodes.hasOwnProperty(name)){updates=enqueue(updates,this._unmountChild(prevChildren[name],removedNodes[name]))}}if(updates){processQueue(this,updates)}this._renderedChildren=nextChildren;if(process.env.NODE_ENV!=="production"){setChildrenForInstrumentation.call(this,nextChildren)}},unmountChildren:function(safely){var renderedChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(renderedChildren,safely);this._renderedChildren=null},moveChild:function(child,afterNode,toIndex,lastIndex){if(child._mountIndex<lastIndex){return makeMove(child,afterNode,toIndex)}},createChild:function(child,afterNode,mountImage){return makeInsertMarkup(mountImage,afterNode,child._mountIndex)},removeChild:function(child,node){return makeRemove(child,node)},_mountChildAtIndex:function(child,mountImage,afterNode,index,transaction,context){child._mountIndex=index;return this.createChild(child,afterNode,mountImage)},_unmountChild:function(child,node){var update=this.removeChild(child,node);child._mountIndex=null;return update}}};module.exports=ReactMultiChild}).call(this)}).call(this,require("_process"))},{"./ReactChildReconciler":203,"./ReactComponentEnvironment":205,"./ReactInstanceMap":238,"./ReactInstrumentation":239,"./ReactReconciler":249,"./flattenChildren":281,"./reactProdInvariant":297,_process:25,"fbjs/lib/emptyFunction":146,"fbjs/lib/invariant":154,"react/lib/ReactCurrentOwner":313}],244:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var React=require("react/lib/React");var invariant=require("fbjs/lib/invariant");var ReactNodeTypes={HOST:0,COMPOSITE:1,EMPTY:2,getType:function(node){if(node===null||node===false){return ReactNodeTypes.EMPTY}else if(React.isValidElement(node)){if(typeof node.type==="function"){return ReactNodeTypes.COMPOSITE}else{return ReactNodeTypes.HOST}}!false?process.env.NODE_ENV!=="production"?invariant(false,"Unexpected node: %s",node):_prodInvariant("26",node):void 0}};module.exports=ReactNodeTypes}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"react/lib/React":309}],245:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function isValidOwner(object){return!!(object&&typeof object.attachRef==="function"&&typeof object.detachRef==="function")}var ReactOwner={addComponentAsRefTo:function(component,ref,owner){!isValidOwner(owner)?process.env.NODE_ENV!=="production"?invariant(false,"addComponentAsRefTo(...): Only a ReactOwner can have refs. You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):_prodInvariant("119"):void 0;owner.attachRef(ref,component)},removeComponentAsRefFrom:function(component,ref,owner){!isValidOwner(owner)?process.env.NODE_ENV!=="production"?invariant(false,"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. You might be removing a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):_prodInvariant("120"):void 0;var ownerPublicInstance=owner.getPublicInstance();if(ownerPublicInstance&&ownerPublicInstance.refs[ref]===component.getPublicInstance()){owner.detachRef(ref)}}};module.exports=ReactOwner}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],246:[function(require,module,exports){(function(process){(function(){"use strict";var ReactPropTypeLocationNames={};if(process.env.NODE_ENV!=="production"){ReactPropTypeLocationNames={prop:"prop",context:"context",childContext:"child context"}}module.exports=ReactPropTypeLocationNames}).call(this)}).call(this,require("_process"))},{_process:25}],247:[function(require,module,exports){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},{}],248:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var CallbackQueue=require("./CallbackQueue");var PooledClass=require("./PooledClass");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactInputSelection=require("./ReactInputSelection");var ReactInstrumentation=require("./ReactInstrumentation");var Transaction=require("./Transaction");var ReactUpdateQueue=require("./ReactUpdateQueue");var SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection};var EVENT_SUPPRESSION={initialize:function(){var currentlyEnabled=ReactBrowserEventEmitter.isEnabled();ReactBrowserEventEmitter.setEnabled(false);return currentlyEnabled},close:function(previouslyEnabled){ReactBrowserEventEmitter.setEnabled(previouslyEnabled)}};var ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}};var TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING];if(process.env.NODE_ENV!=="production"){TRANSACTION_WRAPPERS.push({initialize:ReactInstrumentation.debugTool.onBeginFlush,close:ReactInstrumentation.debugTool.onEndFlush})}function ReactReconcileTransaction(useCreateElement){this.reinitializeTransaction();this.renderToStaticMarkup=false;this.reactMountReady=CallbackQueue.getPooled(null);this.useCreateElement=useCreateElement}var Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return ReactUpdateQueue},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(checkpoint){this.reactMountReady.rollback(checkpoint)},destructor:function(){CallbackQueue.release(this.reactMountReady);this.reactMountReady=null}};_assign(ReactReconcileTransaction.prototype,Transaction,Mixin);PooledClass.addPoolingTo(ReactReconcileTransaction);module.exports=ReactReconcileTransaction}).call(this)}).call(this,require("_process"))},{"./CallbackQueue":183,"./PooledClass":201,"./ReactBrowserEventEmitter":202,"./ReactInputSelection":237,"./ReactInstrumentation":239,"./ReactUpdateQueue":253,"./Transaction":272,_process:25,"object-assign":166}],249:[function(require,module,exports){(function(process){(function(){"use strict";var ReactRef=require("./ReactRef");var ReactInstrumentation=require("./ReactInstrumentation");var warning=require("fbjs/lib/warning");function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactReconciler={mountComponent:function(internalInstance,transaction,hostParent,hostContainerInfo,context,parentDebugID){if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeMountComponent(internalInstance._debugID,internalInstance._currentElement,parentDebugID)}}var markup=internalInstance.mountComponent(transaction,hostParent,hostContainerInfo,context,parentDebugID);if(internalInstance._currentElement&&internalInstance._currentElement.ref!=null){transaction.getReactMountReady().enqueue(attachRefs,internalInstance)}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onMountComponent(internalInstance._debugID)}}return markup},getHostNode:function(internalInstance){return internalInstance.getHostNode()},unmountComponent:function(internalInstance,safely){if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeUnmountComponent(internalInstance._debugID)}}ReactRef.detachRefs(internalInstance,internalInstance._currentElement);internalInstance.unmountComponent(safely);if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onUnmountComponent(internalInstance._debugID)}}},receiveComponent:function(internalInstance,nextElement,transaction,context){var prevElement=internalInstance._currentElement;if(nextElement===prevElement&&context===internalInstance._context){return}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeUpdateComponent(internalInstance._debugID,nextElement)}}var refsChanged=ReactRef.shouldUpdateRefs(prevElement,nextElement);if(refsChanged){ReactRef.detachRefs(internalInstance,prevElement)}internalInstance.receiveComponent(nextElement,transaction,context);if(refsChanged&&internalInstance._currentElement&&internalInstance._currentElement.ref!=null){transaction.getReactMountReady().enqueue(attachRefs,internalInstance)}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onUpdateComponent(internalInstance._debugID)}}},performUpdateIfNecessary:function(internalInstance,transaction,updateBatchNumber){if(internalInstance._updateBatchNumber!==updateBatchNumber){process.env.NODE_ENV!=="production"?warning(internalInstance._updateBatchNumber==null||internalInstance._updateBatchNumber===updateBatchNumber+1,"performUpdateIfNecessary: Unexpected batch number (current %s, "+"pending %s)",updateBatchNumber,internalInstance._updateBatchNumber):void 0;return}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeUpdateComponent(internalInstance._debugID,internalInstance._currentElement)}}internalInstance.performUpdateIfNecessary(transaction);if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onUpdateComponent(internalInstance._debugID)}}}};module.exports=ReactReconciler}).call(this)}).call(this,require("_process"))},{"./ReactInstrumentation":239,"./ReactRef":250,_process:25,"fbjs/lib/warning":161}],250:[function(require,module,exports){"use strict";var ReactOwner=require("./ReactOwner");var ReactRef={};function attachRef(ref,component,owner){if(typeof ref==="function"){ref(component.getPublicInstance())}else{ReactOwner.addComponentAsRefTo(component,ref,owner)}}function detachRef(ref,component,owner){if(typeof ref==="function"){ref(null)}else{ReactOwner.removeComponentAsRefFrom(component,ref,owner)}}ReactRef.attachRefs=function(instance,element){if(element===null||typeof element!=="object"){return}var ref=element.ref;if(ref!=null){attachRef(ref,instance,element._owner)}};ReactRef.shouldUpdateRefs=function(prevElement,nextElement){var prevRef=null;var prevOwner=null;if(prevElement!==null&&typeof prevElement==="object"){prevRef=prevElement.ref;prevOwner=prevElement._owner}var nextRef=null;var nextOwner=null;if(nextElement!==null&&typeof nextElement==="object"){nextRef=nextElement.ref;nextOwner=nextElement._owner}return prevRef!==nextRef||typeof nextRef==="string"&&nextOwner!==prevOwner};ReactRef.detachRefs=function(instance,element){if(element===null||typeof element!=="object"){return}var ref=element.ref;if(ref!=null){detachRef(ref,instance,element._owner)}};module.exports=ReactRef},{"./ReactOwner":245}],251:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var PooledClass=require("./PooledClass");var Transaction=require("./Transaction");var ReactInstrumentation=require("./ReactInstrumentation");var ReactServerUpdateQueue=require("./ReactServerUpdateQueue");var TRANSACTION_WRAPPERS=[];if(process.env.NODE_ENV!=="production"){TRANSACTION_WRAPPERS.push({initialize:ReactInstrumentation.debugTool.onBeginFlush,close:ReactInstrumentation.debugTool.onEndFlush})}var noopCallbackQueue={enqueue:function(){}};function ReactServerRenderingTransaction(renderToStaticMarkup){this.reinitializeTransaction();this.renderToStaticMarkup=renderToStaticMarkup;this.useCreateElement=false;this.updateQueue=new ReactServerUpdateQueue(this)}var Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return noopCallbackQueue},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};_assign(ReactServerRenderingTransaction.prototype,Transaction,Mixin);PooledClass.addPoolingTo(ReactServerRenderingTransaction);module.exports=ReactServerRenderingTransaction}).call(this)}).call(this,require("_process"))},{"./PooledClass":201,"./ReactInstrumentation":239,"./ReactServerUpdateQueue":252,"./Transaction":272,_process:25,"object-assign":166}],252:[function(require,module,exports){(function(process){(function(){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ReactUpdateQueue=require("./ReactUpdateQueue");var warning=require("fbjs/lib/warning");function warnNoop(publicInstance,callerName){if(process.env.NODE_ENV!=="production"){var constructor=publicInstance.constructor;process.env.NODE_ENV!=="production"?warning(false,"%s(...): Can only update a mounting component. "+"This usually means you called %s() outside componentWillMount() on the server. "+"This is a no-op. Please check the code for the %s component.",callerName,callerName,constructor&&(constructor.displayName||constructor.name)||"ReactClass"):void 0}}var ReactServerUpdateQueue=function(){function ReactServerUpdateQueue(transaction){_classCallCheck(this,ReactServerUpdateQueue);this.transaction=transaction}ReactServerUpdateQueue.prototype.isMounted=function isMounted(publicInstance){return false};ReactServerUpdateQueue.prototype.enqueueCallback=function enqueueCallback(publicInstance,callback,callerName){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueCallback(publicInstance,callback,callerName)}};ReactServerUpdateQueue.prototype.enqueueForceUpdate=function enqueueForceUpdate(publicInstance){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueForceUpdate(publicInstance)}else{warnNoop(publicInstance,"forceUpdate")}};ReactServerUpdateQueue.prototype.enqueueReplaceState=function enqueueReplaceState(publicInstance,completeState){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueReplaceState(publicInstance,completeState)}else{warnNoop(publicInstance,"replaceState")}};ReactServerUpdateQueue.prototype.enqueueSetState=function enqueueSetState(publicInstance,partialState){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueSetState(publicInstance,partialState)}else{warnNoop(publicInstance,"setState")}};return ReactServerUpdateQueue}();module.exports=ReactServerUpdateQueue}).call(this)}).call(this,require("_process"))},{"./ReactUpdateQueue":253,_process:25,"fbjs/lib/warning":161}],253:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactUpdates=require("./ReactUpdates");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");function enqueueUpdate(internalInstance){ReactUpdates.enqueueUpdate(internalInstance)}function formatUnexpectedArgument(arg){var type=typeof arg;if(type!=="object"){return type}var displayName=arg.constructor&&arg.constructor.name||type;var keys=Object.keys(arg);if(keys.length>0&&keys.length<20){return displayName+" (keys: "+keys.join(", ")+")"}return displayName}function getInternalInstanceReadyForUpdate(publicInstance,callerName){var internalInstance=ReactInstanceMap.get(publicInstance);if(!internalInstance){if(process.env.NODE_ENV!=="production"){var ctor=publicInstance.constructor;process.env.NODE_ENV!=="production"?warning(!callerName,"%s(...): Can only update a mounted or mounting component. "+"This usually means you called %s() on an unmounted component. "+"This is a no-op. Please check the code for the %s component.",callerName,callerName,ctor&&(ctor.displayName||ctor.name)||"ReactClass"):void 0}return null}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(ReactCurrentOwner.current==null,"%s(...): Cannot update during an existing state transition (such as "+"within `render` or another component's constructor). Render methods "+"should be a pure function of props and state; constructor "+"side-effects are an anti-pattern, but can be moved to "+"`componentWillMount`.",callerName):void 0}return internalInstance}var ReactUpdateQueue={isMounted:function(publicInstance){if(process.env.NODE_ENV!=="production"){var owner=ReactCurrentOwner.current;if(owner!==null){process.env.NODE_ENV!=="production"?warning(owner._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. "+"render() should be a pure function of props and state. It should "+"never access something that requires stale data from the previous "+"render, such as refs. Move this logic to componentDidMount and "+"componentDidUpdate instead.",owner.getName()||"A component"):void 0;owner._warnedAboutRefsInRender=true}}var internalInstance=ReactInstanceMap.get(publicInstance);if(internalInstance){return!!internalInstance._renderedComponent}else{return false}},enqueueCallback:function(publicInstance,callback,callerName){ReactUpdateQueue.validateCallback(callback,callerName);var internalInstance=getInternalInstanceReadyForUpdate(publicInstance);if(!internalInstance){return null}if(internalInstance._pendingCallbacks){internalInstance._pendingCallbacks.push(callback)}else{internalInstance._pendingCallbacks=[callback]}enqueueUpdate(internalInstance)},enqueueCallbackInternal:function(internalInstance,callback){if(internalInstance._pendingCallbacks){internalInstance._pendingCallbacks.push(callback)}else{internalInstance._pendingCallbacks=[callback]}enqueueUpdate(internalInstance)},enqueueForceUpdate:function(publicInstance){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"forceUpdate");if(!internalInstance){return}internalInstance._pendingForceUpdate=true;enqueueUpdate(internalInstance)},enqueueReplaceState:function(publicInstance,completeState,callback){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"replaceState");if(!internalInstance){return}internalInstance._pendingStateQueue=[completeState];internalInstance._pendingReplaceState=true;if(callback!==undefined&&callback!==null){ReactUpdateQueue.validateCallback(callback,"replaceState");if(internalInstance._pendingCallbacks){internalInstance._pendingCallbacks.push(callback)}else{internalInstance._pendingCallbacks=[callback]}}enqueueUpdate(internalInstance)},enqueueSetState:function(publicInstance,partialState){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onSetState();process.env.NODE_ENV!=="production"?warning(partialState!=null,"setState(...): You passed an undefined or null state object; "+"instead, use forceUpdate()."):void 0}var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"setState");if(!internalInstance){return}var queue=internalInstance._pendingStateQueue||(internalInstance._pendingStateQueue=[]);queue.push(partialState);enqueueUpdate(internalInstance)},enqueueElementInternal:function(internalInstance,nextElement,nextContext){internalInstance._pendingElement=nextElement;internalInstance._context=nextContext;enqueueUpdate(internalInstance)},validateCallback:function(callback,callerName){!(!callback||typeof callback==="function")?process.env.NODE_ENV!=="production"?invariant(false,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",callerName,formatUnexpectedArgument(callback)):_prodInvariant("122",callerName,formatUnexpectedArgument(callback)):void 0}};module.exports=ReactUpdateQueue}).call(this)}).call(this,require("_process"))},{"./ReactInstanceMap":238,"./ReactInstrumentation":239,"./ReactUpdates":254,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161,"react/lib/ReactCurrentOwner":313}],254:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var CallbackQueue=require("./CallbackQueue");var PooledClass=require("./PooledClass");var ReactFeatureFlags=require("./ReactFeatureFlags");var ReactReconciler=require("./ReactReconciler");var Transaction=require("./Transaction");var invariant=require("fbjs/lib/invariant");var dirtyComponents=[];var updateBatchNumber=0;var asapCallbackQueue=CallbackQueue.getPooled();var asapEnqueued=false;var batchingStrategy=null;function ensureInjected(){!(ReactUpdates.ReactReconcileTransaction&&batchingStrategy)?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must inject a reconcile transaction class and batching strategy"):_prodInvariant("123"):void 0}var NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){if(this.dirtyComponentsLength!==dirtyComponents.length){dirtyComponents.splice(0,this.dirtyComponentsLength);flushBatchedUpdates()}else{dirtyComponents.length=0}}};var UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}};var TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];function ReactUpdatesFlushTransaction(){this.reinitializeTransaction();this.dirtyComponentsLength=null;this.callbackQueue=CallbackQueue.getPooled();this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(true)}_assign(ReactUpdatesFlushTransaction.prototype,Transaction,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null;CallbackQueue.release(this.callbackQueue);this.callbackQueue=null;ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction);this.reconcileTransaction=null},perform:function(method,scope,a){return Transaction.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,method,scope,a)}});PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);function batchedUpdates(callback,a,b,c,d,e){ensureInjected();return batchingStrategy.batchedUpdates(callback,a,b,c,d,e)}function mountOrderComparator(c1,c2){return c1._mountOrder-c2._mountOrder}function runBatchedUpdates(transaction){var len=transaction.dirtyComponentsLength;!(len===dirtyComponents.length)?process.env.NODE_ENV!=="production"?invariant(false,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",len,dirtyComponents.length):_prodInvariant("124",len,dirtyComponents.length):void 0;dirtyComponents.sort(mountOrderComparator);updateBatchNumber++;for(var i=0;i<len;i++){var component=dirtyComponents[i];var callbacks=component._pendingCallbacks;component._pendingCallbacks=null;var markerName;if(ReactFeatureFlags.logTopLevelRenders){var namedComponent=component;if(component._currentElement.type.isReactTopLevelWrapper){namedComponent=component._renderedComponent}markerName="React update: "+namedComponent.getName();console.time(markerName)}ReactReconciler.performUpdateIfNecessary(component,transaction.reconcileTransaction,updateBatchNumber);if(markerName){console.timeEnd(markerName)}if(callbacks){for(var j=0;j<callbacks.length;j++){transaction.callbackQueue.enqueue(callbacks[j],component.getPublicInstance())}}}}var flushBatchedUpdates=function(){while(dirtyComponents.length||asapEnqueued){if(dirtyComponents.length){var transaction=ReactUpdatesFlushTransaction.getPooled();transaction.perform(runBatchedUpdates,null,transaction);ReactUpdatesFlushTransaction.release(transaction)}if(asapEnqueued){asapEnqueued=false;var queue=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled();queue.notifyAll();CallbackQueue.release(queue)}}};function enqueueUpdate(component){ensureInjected();if(!batchingStrategy.isBatchingUpdates){batchingStrategy.batchedUpdates(enqueueUpdate,component);return}dirtyComponents.push(component);if(component._updateBatchNumber==null){component._updateBatchNumber=updateBatchNumber+1}}function asap(callback,context){invariant(batchingStrategy.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context where"+"updates are not being batched.");asapCallbackQueue.enqueue(callback,context);asapEnqueued=true}var ReactUpdatesInjection={injectReconcileTransaction:function(ReconcileTransaction){!ReconcileTransaction?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide a reconcile transaction class"):_prodInvariant("126"):void 0;ReactUpdates.ReactReconcileTransaction=ReconcileTransaction},injectBatchingStrategy:function(_batchingStrategy){!_batchingStrategy?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide a batching strategy"):_prodInvariant("127"):void 0;!(typeof _batchingStrategy.batchedUpdates==="function")?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide a batchedUpdates() function"):_prodInvariant("128"):void 0;!(typeof _batchingStrategy.isBatchingUpdates==="boolean")?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):_prodInvariant("129"):void 0;batchingStrategy=_batchingStrategy}};var ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates}).call(this)}).call(this,require("_process"))},{"./CallbackQueue":183,"./PooledClass":201,"./ReactFeatureFlags":233,"./ReactReconciler":249,"./Transaction":272,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"object-assign":166}],255:[function(require,module,exports){"use strict";module.exports="15.6.2"},{}],256:[function(require,module,exports){"use strict";var NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};var ATTRS={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"};var SVGDOMPropertyConfig={Properties:{},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{}};Object.keys(ATTRS).forEach(function(key){SVGDOMPropertyConfig.Properties[key]=0;if(ATTRS[key]){SVGDOMPropertyConfig.DOMAttributeNames[key]=ATTRS[key]}});module.exports=SVGDOMPropertyConfig},{}],257:[function(require,module,exports){"use strict";var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInputSelection=require("./ReactInputSelection");var SyntheticEvent=require("./SyntheticEvent");var getActiveElement=require("fbjs/lib/getActiveElement");var isTextInputElement=require("./isTextInputElement");var shallowEqual=require("fbjs/lib/shallowEqual");var skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11;var eventTypes={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}};var activeElement=null;var activeElementInst=null;var lastSelection=null;var mouseDown=false;var hasListener=false;function getSelection(node){if("selectionStart"in node&&ReactInputSelection.hasSelectionCapabilities(node)){return{start:node.selectionStart,end:node.selectionEnd}}else if(window.getSelection){var selection=window.getSelection();return{anchorNode:selection.anchorNode,anchorOffset:selection.anchorOffset,focusNode:selection.focusNode,focusOffset:selection.focusOffset}}else if(document.selection){var range=document.selection.createRange();return{parentElement:range.parentElement(),text:range.text,top:range.boundingTop,left:range.boundingLeft}}}function constructSelectEvent(nativeEvent,nativeEventTarget){if(mouseDown||activeElement==null||activeElement!==getActiveElement()){return null}var currentSelection=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,currentSelection)){lastSelection=currentSelection;var syntheticEvent=SyntheticEvent.getPooled(eventTypes.select,activeElementInst,nativeEvent,nativeEventTarget);syntheticEvent.type="select";syntheticEvent.target=activeElement;EventPropagators.accumulateTwoPhaseDispatches(syntheticEvent);return syntheticEvent}return null}var SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){if(!hasListener){return null}var targetNode=targetInst?ReactDOMComponentTree.getNodeFromInstance(targetInst):window;switch(topLevelType){case"topFocus":if(isTextInputElement(targetNode)||targetNode.contentEditable==="true"){activeElement=targetNode;activeElementInst=targetInst;lastSelection=null}break;case"topBlur":activeElement=null;activeElementInst=null;lastSelection=null;break;case"topMouseDown":mouseDown=true;break;case"topContextMenu":case"topMouseUp":mouseDown=false;return constructSelectEvent(nativeEvent,nativeEventTarget);case"topSelectionChange":if(skipSelectionChangeEvent){break}case"topKeyDown":case"topKeyUp":return constructSelectEvent(nativeEvent,nativeEventTarget)}return null},didPutListener:function(inst,registrationName,listener){if(registrationName==="onSelect"){hasListener=true}}};module.exports=SelectEventPlugin},{"./EventPropagators":196,"./ReactDOMComponentTree":210,"./ReactInputSelection":237,"./SyntheticEvent":263,"./isTextInputElement":295,"fbjs/lib/ExecutionEnvironment":140,"fbjs/lib/getActiveElement":149,"fbjs/lib/shallowEqual":160}],258:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var EventListener=require("fbjs/lib/EventListener");var EventPropagators=require("./EventPropagators");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var SyntheticAnimationEvent=require("./SyntheticAnimationEvent");var SyntheticClipboardEvent=require("./SyntheticClipboardEvent");var SyntheticEvent=require("./SyntheticEvent");var SyntheticFocusEvent=require("./SyntheticFocusEvent");var SyntheticKeyboardEvent=require("./SyntheticKeyboardEvent");var SyntheticMouseEvent=require("./SyntheticMouseEvent");var SyntheticDragEvent=require("./SyntheticDragEvent");var SyntheticTouchEvent=require("./SyntheticTouchEvent");var SyntheticTransitionEvent=require("./SyntheticTransitionEvent");var SyntheticUIEvent=require("./SyntheticUIEvent");var SyntheticWheelEvent=require("./SyntheticWheelEvent");var emptyFunction=require("fbjs/lib/emptyFunction");var getEventCharCode=require("./getEventCharCode");var invariant=require("fbjs/lib/invariant");var eventTypes={};var topLevelEventsToDispatchConfig={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(event){var capitalizedEvent=event[0].toUpperCase()+event.slice(1);var onEvent="on"+capitalizedEvent;var topEvent="top"+capitalizedEvent;var type={phasedRegistrationNames:{bubbled:onEvent,captured:onEvent+"Capture"},dependencies:[topEvent]};eventTypes[event]=type;topLevelEventsToDispatchConfig[topEvent]=type});var onClickListeners={};function getDictionaryKey(inst){return"."+inst._rootNodeID}function isInteractive(tag){return tag==="button"||tag==="input"||tag==="select"||tag==="textarea"}var SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var dispatchConfig=topLevelEventsToDispatchConfig[topLevelType];if(!dispatchConfig){return null}var EventConstructor;switch(topLevelType){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":EventConstructor=SyntheticEvent;break;case"topKeyPress":if(getEventCharCode(nativeEvent)===0){return null}case"topKeyDown":case"topKeyUp":EventConstructor=SyntheticKeyboardEvent;break;case"topBlur":case"topFocus":EventConstructor=SyntheticFocusEvent;break;case"topClick":if(nativeEvent.button===2){return null}case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":EventConstructor=SyntheticMouseEvent;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":EventConstructor=SyntheticDragEvent;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":EventConstructor=SyntheticTouchEvent;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":EventConstructor=SyntheticAnimationEvent;break;case"topTransitionEnd":EventConstructor=SyntheticTransitionEvent;break;case"topScroll":EventConstructor=SyntheticUIEvent;break;case"topWheel":EventConstructor=SyntheticWheelEvent;break;case"topCopy":case"topCut":case"topPaste":EventConstructor=SyntheticClipboardEvent;break}!EventConstructor?process.env.NODE_ENV!=="production"?invariant(false,"SimpleEventPlugin: Unhandled event type, `%s`.",topLevelType):_prodInvariant("86",topLevelType):void 0;var event=EventConstructor.getPooled(dispatchConfig,targetInst,nativeEvent,nativeEventTarget);EventPropagators.accumulateTwoPhaseDispatches(event);return event},didPutListener:function(inst,registrationName,listener){if(registrationName==="onClick"&&!isInteractive(inst._tag)){var key=getDictionaryKey(inst);var node=ReactDOMComponentTree.getNodeFromInstance(inst);if(!onClickListeners[key]){onClickListeners[key]=EventListener.listen(node,"click",emptyFunction)}}},willDeleteListener:function(inst,registrationName){if(registrationName==="onClick"&&!isInteractive(inst._tag)){var key=getDictionaryKey(inst);onClickListeners[key].remove();delete onClickListeners[key]}}};module.exports=SimpleEventPlugin}).call(this)}).call(this,require("_process"))},{"./EventPropagators":196,"./ReactDOMComponentTree":210,"./SyntheticAnimationEvent":259,"./SyntheticClipboardEvent":260,"./SyntheticDragEvent":262,"./SyntheticEvent":263,"./SyntheticFocusEvent":264,"./SyntheticKeyboardEvent":266,"./SyntheticMouseEvent":267,"./SyntheticTouchEvent":268,"./SyntheticTransitionEvent":269,"./SyntheticUIEvent":270,"./SyntheticWheelEvent":271,"./getEventCharCode":283,"./reactProdInvariant":297,_process:25,"fbjs/lib/EventListener":139,"fbjs/lib/emptyFunction":146,"fbjs/lib/invariant":154}],259:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var AnimationEventInterface={animationName:null,elapsedTime:null,pseudoElement:null};function SyntheticAnimationEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticAnimationEvent,AnimationEventInterface);module.exports=SyntheticAnimationEvent},{"./SyntheticEvent":263}],260:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var ClipboardEventInterface={clipboardData:function(event){return"clipboardData"in event?event.clipboardData:window.clipboardData}};function SyntheticClipboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface);module.exports=SyntheticClipboardEvent},{"./SyntheticEvent":263}],261:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var CompositionEventInterface={data:null};function SyntheticCompositionEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface);module.exports=SyntheticCompositionEvent},{"./SyntheticEvent":263}],262:[function(require,module,exports){"use strict";var SyntheticMouseEvent=require("./SyntheticMouseEvent");var DragEventInterface={dataTransfer:null};function SyntheticDragEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface);module.exports=SyntheticDragEvent},{"./SyntheticMouseEvent":267}],263:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var PooledClass=require("./PooledClass");var emptyFunction=require("fbjs/lib/emptyFunction");var warning=require("fbjs/lib/warning");var didWarnForAddedNewProperty=false;var isProxySupported=typeof Proxy==="function";var shouldBeReleasedProperties=["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"];var EventInterface={type:null,target:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(event){return event.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function SyntheticEvent(dispatchConfig,targetInst,nativeEvent,nativeEventTarget){if(process.env.NODE_ENV!=="production"){delete this.nativeEvent;delete this.preventDefault;delete this.stopPropagation}this.dispatchConfig=dispatchConfig;this._targetInst=targetInst;this.nativeEvent=nativeEvent;var Interface=this.constructor.Interface;for(var propName in Interface){if(!Interface.hasOwnProperty(propName)){continue}if(process.env.NODE_ENV!=="production"){delete this[propName]}var normalize=Interface[propName];if(normalize){this[propName]=normalize(nativeEvent)}else{if(propName==="target"){this.target=nativeEventTarget}else{this[propName]=nativeEvent[propName]}}}var defaultPrevented=nativeEvent.defaultPrevented!=null?nativeEvent.defaultPrevented:nativeEvent.returnValue===false;if(defaultPrevented){this.isDefaultPrevented=emptyFunction.thatReturnsTrue}else{this.isDefaultPrevented=emptyFunction.thatReturnsFalse}this.isPropagationStopped=emptyFunction.thatReturnsFalse;return this}_assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=true;var event=this.nativeEvent;if(!event){return}if(event.preventDefault){event.preventDefault()}else if(typeof event.returnValue!=="unknown"){event.returnValue=false}this.isDefaultPrevented=emptyFunction.thatReturnsTrue},stopPropagation:function(){var event=this.nativeEvent;if(!event){return}if(event.stopPropagation){event.stopPropagation()}else if(typeof event.cancelBubble!=="unknown"){event.cancelBubble=true}this.isPropagationStopped=emptyFunction.thatReturnsTrue},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var Interface=this.constructor.Interface;for(var propName in Interface){if(process.env.NODE_ENV!=="production"){Object.defineProperty(this,propName,getPooledWarningPropertyDefinition(propName,Interface[propName]))}else{this[propName]=null}}for(var i=0;i<shouldBeReleasedProperties.length;i++){this[shouldBeReleasedProperties[i]]=null}if(process.env.NODE_ENV!=="production"){Object.defineProperty(this,"nativeEvent",getPooledWarningPropertyDefinition("nativeEvent",null));Object.defineProperty(this,"preventDefault",getPooledWarningPropertyDefinition("preventDefault",emptyFunction));Object.defineProperty(this,"stopPropagation",getPooledWarningPropertyDefinition("stopPropagation",emptyFunction))}}});SyntheticEvent.Interface=EventInterface;SyntheticEvent.augmentClass=function(Class,Interface){var Super=this;var E=function(){};E.prototype=Super.prototype;var prototype=new E;_assign(prototype,Class.prototype);Class.prototype=prototype;Class.prototype.constructor=Class;Class.Interface=_assign({},Super.Interface,Interface);Class.augmentClass=Super.augmentClass;PooledClass.addPoolingTo(Class,PooledClass.fourArgumentPooler)};if(process.env.NODE_ENV!=="production"){if(isProxySupported){SyntheticEvent=new Proxy(SyntheticEvent,{construct:function(target,args){return this.apply(target,Object.create(target.prototype),args)},apply:function(constructor,that,args){return new Proxy(constructor.apply(that,args),{set:function(target,prop,value){if(prop!=="isPersistent"&&!target.constructor.Interface.hasOwnProperty(prop)&&shouldBeReleasedProperties.indexOf(prop)===-1){process.env.NODE_ENV!=="production"?warning(didWarnForAddedNewProperty||target.isPersistent(),"This synthetic event is reused for performance reasons. If you're "+"seeing this, you're adding a new property in the synthetic event object. "+"The property is never released. See "+"https://fb.me/react-event-pooling for more information."):void 0;didWarnForAddedNewProperty=true}target[prop]=value;return true}})}})}}PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler);module.exports=SyntheticEvent;function getPooledWarningPropertyDefinition(propName,getVal){var isFunction=typeof getVal==="function";return{configurable:true,set:set,get:get};function set(val){var action=isFunction?"setting the method":"setting the property";warn(action,"This is effectively a no-op");return val}function get(){var action=isFunction?"accessing the method":"accessing the property";var result=isFunction?"This is a no-op function":"This is set to null";warn(action,result);return getVal}function warn(action,result){var warningCondition=false;process.env.NODE_ENV!=="production"?warning(warningCondition,"This synthetic event is reused for performance reasons. If you're seeing this, "+"you're %s `%s` on a released/nullified synthetic event. %s. "+"If you must keep the original synthetic event around, use event.persist(). "+"See https://fb.me/react-event-pooling for more information.",action,propName,result):void 0}}}).call(this)}).call(this,require("_process"))},{"./PooledClass":201,_process:25,"fbjs/lib/emptyFunction":146,"fbjs/lib/warning":161,"object-assign":166}],264:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var FocusEventInterface={relatedTarget:null};function SyntheticFocusEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface);module.exports=SyntheticFocusEvent},{"./SyntheticUIEvent":270}],265:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var InputEventInterface={data:null};function SyntheticInputEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface);module.exports=SyntheticInputEvent},{"./SyntheticEvent":263}],266:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var getEventCharCode=require("./getEventCharCode");var getEventKey=require("./getEventKey");var getEventModifierState=require("./getEventModifierState");var KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(event){if(event.type==="keypress"){return getEventCharCode(event)}return 0},keyCode:function(event){if(event.type==="keydown"||event.type==="keyup"){return event.keyCode}return 0},which:function(event){if(event.type==="keypress"){return getEventCharCode(event)}if(event.type==="keydown"||event.type==="keyup"){return event.keyCode}return 0}};function SyntheticKeyboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface);module.exports=SyntheticKeyboardEvent},{"./SyntheticUIEvent":270,"./getEventCharCode":283,"./getEventKey":284,"./getEventModifierState":285}],267:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var ViewportMetrics=require("./ViewportMetrics");var getEventModifierState=require("./getEventModifierState");var MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(event){var button=event.button;if("which"in event){return button}return button===2?2:button===4?1:0},buttons:null,relatedTarget:function(event){return event.relatedTarget||(event.fromElement===event.srcElement?event.toElement:event.fromElement)},pageX:function(event){return"pageX"in event?event.pageX:event.clientX+ViewportMetrics.currentScrollLeft},pageY:function(event){return"pageY"in event?event.pageY:event.clientY+ViewportMetrics.currentScrollTop}};function SyntheticMouseEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface);module.exports=SyntheticMouseEvent},{"./SyntheticUIEvent":270,"./ViewportMetrics":273,"./getEventModifierState":285}],268:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var getEventModifierState=require("./getEventModifierState");var TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};function SyntheticTouchEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface);module.exports=SyntheticTouchEvent},{"./SyntheticUIEvent":270,"./getEventModifierState":285}],269:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var TransitionEventInterface={propertyName:null,elapsedTime:null,pseudoElement:null};function SyntheticTransitionEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticTransitionEvent,TransitionEventInterface);module.exports=SyntheticTransitionEvent},{"./SyntheticEvent":263}],270:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var getEventTarget=require("./getEventTarget");var UIEventInterface={view:function(event){if(event.view){return event.view}var target=getEventTarget(event);if(target.window===target){return target}var doc=target.ownerDocument;if(doc){return doc.defaultView||doc.parentWindow}else{return window}},detail:function(event){return event.detail||0}};function SyntheticUIEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface);module.exports=SyntheticUIEvent},{"./SyntheticEvent":263,"./getEventTarget":286}],271:[function(require,module,exports){"use strict";var SyntheticMouseEvent=require("./SyntheticMouseEvent");var WheelEventInterface={deltaX:function(event){return"deltaX"in event?event.deltaX:"wheelDeltaX"in event?-event.wheelDeltaX:0},deltaY:function(event){return"deltaY"in event?event.deltaY:"wheelDeltaY"in event?-event.wheelDeltaY:"wheelDelta"in event?-event.wheelDelta:0},deltaZ:null,deltaMode:null};function SyntheticWheelEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface);module.exports=SyntheticWheelEvent},{"./SyntheticMouseEvent":267}],272:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var OBSERVED_ERROR={};var TransactionImpl={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers();if(this.wrapperInitData){this.wrapperInitData.length=0}else{this.wrapperInitData=[]}this._isInTransaction=false},_isInTransaction:false,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(method,scope,a,b,c,d,e,f){!!this.isInTransaction()?process.env.NODE_ENV!=="production"?invariant(false,"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):_prodInvariant("27"):void 0;var errorThrown;var ret;try{this._isInTransaction=true;errorThrown=true;this.initializeAll(0);ret=method.call(scope,a,b,c,d,e,f);errorThrown=false}finally{try{if(errorThrown){try{this.closeAll(0)}catch(err){}}else{this.closeAll(0)}}finally{this._isInTransaction=false}}return ret},initializeAll:function(startIndex){var transactionWrappers=this.transactionWrappers;for(var i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];try{this.wrapperInitData[i]=OBSERVED_ERROR;this.wrapperInitData[i]=wrapper.initialize?wrapper.initialize.call(this):null}finally{if(this.wrapperInitData[i]===OBSERVED_ERROR){try{this.initializeAll(i+1)}catch(err){}}}}},closeAll:function(startIndex){!this.isInTransaction()?process.env.NODE_ENV!=="production"?invariant(false,"Transaction.closeAll(): Cannot close transaction when none are open."):_prodInvariant("28"):void 0;var transactionWrappers=this.transactionWrappers;for(var i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];var initData=this.wrapperInitData[i];var errorThrown;try{errorThrown=true;if(initData!==OBSERVED_ERROR&&wrapper.close){wrapper.close.call(this,initData)}errorThrown=false}finally{if(errorThrown){try{this.closeAll(i+1)}catch(e){}}}}this.wrapperInitData.length=0}};module.exports=TransactionImpl}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],273:[function(require,module,exports){"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(scrollPosition){ViewportMetrics.currentScrollLeft=scrollPosition.x;ViewportMetrics.currentScrollTop=scrollPosition.y}};module.exports=ViewportMetrics},{}],274:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function accumulateInto(current,next){!(next!=null)?process.env.NODE_ENV!=="production"?invariant(false,"accumulateInto(...): Accumulated items must not be null or undefined."):_prodInvariant("30"):void 0;if(current==null){return next}if(Array.isArray(current)){if(Array.isArray(next)){current.push.apply(current,next);return current}current.push(next);return current}if(Array.isArray(next)){return[current].concat(next)}return[current,next]}module.exports=accumulateInto}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154}],275:[function(require,module,exports){"use strict";var MOD=65521;function adler32(data){var a=1;var b=0;var i=0;var l=data.length;var m=l&~3;while(i<m){var n=Math.min(i+4096,m);for(;i<n;i+=4){b+=(a+=data.charCodeAt(i))+(a+=data.charCodeAt(i+1))+(a+=data.charCodeAt(i+2))+(a+=data.charCodeAt(i+3))}a%=MOD;b%=MOD}for(;i<l;i++){b+=a+=data.charCodeAt(i)}a%=MOD;b%=MOD;return a|b<<16}module.exports=adler32},{}],276:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactPropTypesSecret=require("./ReactPropTypesSecret");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}var loggedTypeFailures={};function checkReactTypeSpec(typeSpecs,values,location,componentName,element,debugID){for(var typeSpecName in typeSpecs){if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{!(typeof typeSpecs[typeSpecName]==="function")?process.env.NODE_ENV!=="production"?invariant(false,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):_prodInvariant("84",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):void 0;error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}process.env.NODE_ENV!=="production"?warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName,typeof error):void 0;if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var componentStackInfo="";if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}if(debugID!==null){componentStackInfo=ReactComponentTreeHook.getStackAddendumByID(debugID)}else if(element!==null){componentStackInfo=ReactComponentTreeHook.getCurrentStackAddendum(element)}}process.env.NODE_ENV!=="production"?warning(false,"Failed %s type: %s%s",location,error.message,componentStackInfo):void 0}}}}module.exports=checkReactTypeSpec}).call(this)}).call(this,require("_process"))},{"./ReactPropTypeLocationNames":246,"./ReactPropTypesSecret":247,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161,"react/lib/ReactComponentTreeHook":312}],277:[function(require,module,exports){"use strict";var createMicrosoftUnsafeLocalFunction=function(func){if(typeof MSApp!=="undefined"&&MSApp.execUnsafeLocalFunction){return function(arg0,arg1,arg2,arg3){MSApp.execUnsafeLocalFunction(function(){return func(arg0,arg1,arg2,arg3)})}}else{return func}};module.exports=createMicrosoftUnsafeLocalFunction},{}],278:[function(require,module,exports){(function(process){(function(){"use strict";var CSSProperty=require("./CSSProperty");var warning=require("fbjs/lib/warning");var isUnitlessNumber=CSSProperty.isUnitlessNumber;var styleWarnings={};function dangerousStyleValue(name,value,component,isCustomProperty){var isEmpty=value==null||typeof value==="boolean"||value==="";if(isEmpty){return""}var isNonNumeric=isNaN(value);if(isCustomProperty||isNonNumeric||value===0||isUnitlessNumber.hasOwnProperty(name)&&isUnitlessNumber[name]){return""+value}if(typeof value==="string"){if(process.env.NODE_ENV!=="production"){if(component&&value!=="0"){var owner=component._currentElement._owner;var ownerName=owner?owner.getName():null;if(ownerName&&!styleWarnings[ownerName]){styleWarnings[ownerName]={}}var warned=false;if(ownerName){var warnings=styleWarnings[ownerName];warned=warnings[name];if(!warned){warnings[name]=true}}if(!warned){process.env.NODE_ENV!=="production"?warning(false,"a `%s` tag (owner: `%s`) was passed a numeric string value "+"for CSS property `%s` (value: `%s`) which will be treated "+"as a unitless number in a future version of React.",component._currentElement.type,ownerName||"unknown",name,value):void 0}}}value=value.trim()}return value+"px"}module.exports=dangerousStyleValue}).call(this)}).call(this,require("_process"))},{"./CSSProperty":181,_process:25,"fbjs/lib/warning":161}],279:[function(require,module,exports){"use strict";var matchHtmlRegExp=/["'&<>]/;function escapeHtml(string){var str=""+string;var match=matchHtmlRegExp.exec(str);if(!match){return str}var escape;var html="";var index=0;var lastIndex=0;for(index=match.index;index<str.length;index++){switch(str.charCodeAt(index)){case 34:escape="&quot;";break;case 38:escape="&amp;";break;case 39:escape="&#x27;";break;case 60:escape="&lt;";break;case 62:escape="&gt;";break;default:continue}if(lastIndex!==index){html+=str.substring(lastIndex,index)}lastIndex=index+1;html+=escape}return lastIndex!==index?html+str.substring(lastIndex,index):html}function escapeTextContentForBrowser(text){if(typeof text==="boolean"||typeof text==="number"){return""+text}return escapeHtml(text)}module.exports=escapeTextContentForBrowser},{}],280:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInstanceMap=require("./ReactInstanceMap");var getHostComponentFromComposite=require("./getHostComponentFromComposite");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");function findDOMNode(componentOrElement){if(process.env.NODE_ENV!=="production"){var owner=ReactCurrentOwner.current;if(owner!==null){process.env.NODE_ENV!=="production"?warning(owner._warnedAboutRefsInRender,"%s is accessing findDOMNode inside its render(). "+"render() should be a pure function of props and state. It should "+"never access something that requires stale data from the previous "+"render, such as refs. Move this logic to componentDidMount and "+"componentDidUpdate instead.",owner.getName()||"A component"):void 0;owner._warnedAboutRefsInRender=true}}if(componentOrElement==null){return null}if(componentOrElement.nodeType===1){return componentOrElement}var inst=ReactInstanceMap.get(componentOrElement);if(inst){inst=getHostComponentFromComposite(inst);return inst?ReactDOMComponentTree.getNodeFromInstance(inst):null}if(typeof componentOrElement.render==="function"){!false?process.env.NODE_ENV!=="production"?invariant(false,"findDOMNode was called on an unmounted component."):_prodInvariant("44"):void 0}else{!false?process.env.NODE_ENV!=="production"?invariant(false,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(componentOrElement)):_prodInvariant("45",Object.keys(componentOrElement)):void 0}}module.exports=findDOMNode}).call(this)}).call(this,require("_process"))},{"./ReactDOMComponentTree":210,"./ReactInstanceMap":238,"./getHostComponentFromComposite":287,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161,"react/lib/ReactCurrentOwner":313}],281:[function(require,module,exports){(function(process){(function(){"use strict";var KeyEscapeUtils=require("./KeyEscapeUtils");var traverseAllChildren=require("./traverseAllChildren");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}function flattenSingleChildIntoContext(traverseContext,child,name,selfDebugID){if(traverseContext&&typeof traverseContext==="object"){var result=traverseContext;var keyUnique=result[name]===undefined;if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}if(!keyUnique){process.env.NODE_ENV!=="production"?warning(false,"flattenChildren(...): Encountered two children with the same key, "+"`%s`. Child keys must be unique; when two children share a key, only "+"the first child will be used.%s",KeyEscapeUtils.unescape(name),ReactComponentTreeHook.getStackAddendumByID(selfDebugID)):void 0}}if(keyUnique&&child!=null){result[name]=child}}}function flattenChildren(children,selfDebugID){if(children==null){return children}var result={};if(process.env.NODE_ENV!=="production"){traverseAllChildren(children,function(traverseContext,child,name){return flattenSingleChildIntoContext(traverseContext,child,name,selfDebugID)},result)}else{traverseAllChildren(children,flattenSingleChildIntoContext,result)}return result}module.exports=flattenChildren}).call(this)}).call(this,require("_process"))},{"./KeyEscapeUtils":199,"./traverseAllChildren":302,_process:25,"fbjs/lib/warning":161,"react/lib/ReactComponentTreeHook":312}],282:[function(require,module,exports){"use strict";function forEachAccumulated(arr,cb,scope){if(Array.isArray(arr)){arr.forEach(cb,scope)}else if(arr){cb.call(scope,arr)}}module.exports=forEachAccumulated},{}],283:[function(require,module,exports){"use strict";function getEventCharCode(nativeEvent){var charCode;var keyCode=nativeEvent.keyCode;if("charCode"in nativeEvent){charCode=nativeEvent.charCode;if(charCode===0&&keyCode===13){charCode=13}}else{charCode=keyCode}if(charCode>=32||charCode===13){return charCode}return 0}module.exports=getEventCharCode},{}],284:[function(require,module,exports){"use strict";var getEventCharCode=require("./getEventCharCode");var normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"};var translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function getEventKey(nativeEvent){if(nativeEvent.key){var key=normalizeKey[nativeEvent.key]||nativeEvent.key;if(key!=="Unidentified"){return key}}if(nativeEvent.type==="keypress"){var charCode=getEventCharCode(nativeEvent);return charCode===13?"Enter":String.fromCharCode(charCode)}if(nativeEvent.type==="keydown"||nativeEvent.type==="keyup"){return translateToKey[nativeEvent.keyCode]||"Unidentified"}return""}module.exports=getEventKey},{"./getEventCharCode":283}],285:[function(require,module,exports){"use strict";var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function modifierStateGetter(keyArg){var syntheticEvent=this;var nativeEvent=syntheticEvent.nativeEvent;if(nativeEvent.getModifierState){return nativeEvent.getModifierState(keyArg)}var keyProp=modifierKeyToProp[keyArg];return keyProp?!!nativeEvent[keyProp]:false}function getEventModifierState(nativeEvent){return modifierStateGetter}module.exports=getEventModifierState},{}],286:[function(require,module,exports){"use strict";function getEventTarget(nativeEvent){var target=nativeEvent.target||nativeEvent.srcElement||window;if(target.correspondingUseElement){target=target.correspondingUseElement}return target.nodeType===3?target.parentNode:target}module.exports=getEventTarget},{}],287:[function(require,module,exports){"use strict";var ReactNodeTypes=require("./ReactNodeTypes");function getHostComponentFromComposite(inst){var type;while((type=inst._renderedNodeType)===ReactNodeTypes.COMPOSITE){inst=inst._renderedComponent}if(type===ReactNodeTypes.HOST){return inst._renderedComponent}else if(type===ReactNodeTypes.EMPTY){return null}}module.exports=getHostComponentFromComposite},{"./ReactNodeTypes":244}],288:[function(require,module,exports){"use strict";var ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}module.exports=getIteratorFn},{}],289:[function(require,module,exports){"use strict";function getLeafNode(node){while(node&&node.firstChild){node=node.firstChild}return node}function getSiblingNode(node){while(node){if(node.nextSibling){return node.nextSibling}node=node.parentNode}}function getNodeForCharacterOffset(root,offset){var node=getLeafNode(root);var nodeStart=0;var nodeEnd=0;while(node){if(node.nodeType===3){nodeEnd=nodeStart+node.textContent.length;if(nodeStart<=offset&&nodeEnd>=offset){return{node:node,offset:offset-nodeStart}}nodeStart=nodeEnd}node=getLeafNode(getSiblingNode(node))}}module.exports=getNodeForCharacterOffset},{}],290:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var contentKey=null;function getTextContentAccessor(){if(!contentKey&&ExecutionEnvironment.canUseDOM){contentKey="textContent"in document.documentElement?"textContent":"innerText"}return contentKey}module.exports=getTextContentAccessor},{"fbjs/lib/ExecutionEnvironment":140}],291:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");function makePrefixMap(styleProp,eventName){var prefixes={};prefixes[styleProp.toLowerCase()]=eventName.toLowerCase();prefixes["Webkit"+styleProp]="webkit"+eventName;prefixes["Moz"+styleProp]="moz"+eventName;prefixes["ms"+styleProp]="MS"+eventName;prefixes["O"+styleProp]="o"+eventName.toLowerCase();return prefixes}var vendorPrefixes={animationend:makePrefixMap("Animation","AnimationEnd"),animationiteration:makePrefixMap("Animation","AnimationIteration"),animationstart:makePrefixMap("Animation","AnimationStart"),transitionend:makePrefixMap("Transition","TransitionEnd")};var prefixedEventNames={};var style={};if(ExecutionEnvironment.canUseDOM){style=document.createElement("div").style;if(!("AnimationEvent"in window)){delete vendorPrefixes.animationend.animation;delete vendorPrefixes.animationiteration.animation;delete vendorPrefixes.animationstart.animation}if(!("TransitionEvent"in window)){delete vendorPrefixes.transitionend.transition}}function getVendorPrefixedEventName(eventName){if(prefixedEventNames[eventName]){return prefixedEventNames[eventName]}else if(!vendorPrefixes[eventName]){return eventName}var prefixMap=vendorPrefixes[eventName];for(var styleProp in prefixMap){if(prefixMap.hasOwnProperty(styleProp)&&styleProp in style){return prefixedEventNames[eventName]=prefixMap[styleProp]}}return""}module.exports=getVendorPrefixedEventName},{"fbjs/lib/ExecutionEnvironment":140}],292:[function(require,module,exports){"use strict";var ReactDOMComponentTree=require("./ReactDOMComponentTree");function isCheckable(elem){var type=elem.type;var nodeName=elem.nodeName;return nodeName&&nodeName.toLowerCase()==="input"&&(type==="checkbox"||type==="radio")}function getTracker(inst){return inst._wrapperState.valueTracker}function attachTracker(inst,tracker){inst._wrapperState.valueTracker=tracker}function detachTracker(inst){inst._wrapperState.valueTracker=null}function getValueFromNode(node){var value;if(node){value=isCheckable(node)?""+node.checked:node.value}return value}var inputValueTracking={_getTrackerFromNode:function(node){return getTracker(ReactDOMComponentTree.getInstanceFromNode(node))},track:function(inst){if(getTracker(inst)){return}var node=ReactDOMComponentTree.getNodeFromInstance(inst);var valueField=isCheckable(node)?"checked":"value";var descriptor=Object.getOwnPropertyDescriptor(node.constructor.prototype,valueField);var currentValue=""+node[valueField];if(node.hasOwnProperty(valueField)||typeof descriptor.get!=="function"||typeof descriptor.set!=="function"){return}Object.defineProperty(node,valueField,{enumerable:descriptor.enumerable,configurable:true,get:function(){return descriptor.get.call(this)},set:function(value){currentValue=""+value;descriptor.set.call(this,value)}});attachTracker(inst,{getValue:function(){return currentValue},setValue:function(value){currentValue=""+value},stopTracking:function(){detachTracker(inst);delete node[valueField]}})},updateValueIfChanged:function(inst){if(!inst){return false}var tracker=getTracker(inst);if(!tracker){inputValueTracking.track(inst);return true}var lastValue=tracker.getValue();var nextValue=getValueFromNode(ReactDOMComponentTree.getNodeFromInstance(inst));if(nextValue!==lastValue){tracker.setValue(nextValue);return true}return false},stopTracking:function(inst){var tracker=getTracker(inst);if(tracker){tracker.stopTracking()}}};module.exports=inputValueTracking},{"./ReactDOMComponentTree":210}],293:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var ReactCompositeComponent=require("./ReactCompositeComponent");var ReactEmptyComponent=require("./ReactEmptyComponent");var ReactHostComponent=require("./ReactHostComponent");var getNextDebugID=require("react/lib/getNextDebugID");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactCompositeComponentWrapper=function(element){this.construct(element)};function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""}function isInternalComponentType(type){return typeof type==="function"&&typeof type.prototype!=="undefined"&&typeof type.prototype.mountComponent==="function"&&typeof type.prototype.receiveComponent==="function"}function instantiateReactComponent(node,shouldHaveDebugID){var instance;if(node===null||node===false){instance=ReactEmptyComponent.create(instantiateReactComponent)}else if(typeof node==="object"){var element=node;var type=element.type;if(typeof type!=="function"&&typeof type!=="string"){var info="";if(process.env.NODE_ENV!=="production"){if(type===undefined||typeof type==="object"&&type!==null&&Object.keys(type).length===0){info+=" You likely forgot to export your component from the file "+"it's defined in."}}info+=getDeclarationErrorAddendum(element._owner);!false?process.env.NODE_ENV!=="production"?invariant(false,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",type==null?type:typeof type,info):_prodInvariant("130",type==null?type:typeof type,info):void 0}if(typeof element.type==="string"){instance=ReactHostComponent.createInternalComponent(element)}else if(isInternalComponentType(element.type)){instance=new element.type(element);if(!instance.getHostNode){instance.getHostNode=instance.getNativeNode}}else{instance=new ReactCompositeComponentWrapper(element)}}else if(typeof node==="string"||typeof node==="number"){instance=ReactHostComponent.createInstanceForText(node)}else{!false?process.env.NODE_ENV!=="production"?invariant(false,"Encountered invalid React node of type %s",typeof node):_prodInvariant("131",typeof node):void 0}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(typeof instance.mountComponent==="function"&&typeof instance.receiveComponent==="function"&&typeof instance.getHostNode==="function"&&typeof instance.unmountComponent==="function","Only React Components can be mounted."):void 0}instance._mountIndex=0;instance._mountImage=null;if(process.env.NODE_ENV!=="production"){instance._debugID=shouldHaveDebugID?getNextDebugID():0}if(process.env.NODE_ENV!=="production"){if(Object.preventExtensions){Object.preventExtensions(instance)}}return instance}_assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent,{_instantiateReactComponent:instantiateReactComponent});module.exports=instantiateReactComponent}).call(this)}).call(this,require("_process"))},{"./ReactCompositeComponent":206,"./ReactEmptyComponent":229,"./ReactHostComponent":234,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161,"object-assign":166,"react/lib/getNextDebugID":327}],294:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var useHasFeature;if(ExecutionEnvironment.canUseDOM){useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==true}function isEventSupported(eventNameSuffix,capture){if(!ExecutionEnvironment.canUseDOM||capture&&!("addEventListener"in document)){return false}var eventName="on"+eventNameSuffix;var isSupported=eventName in document;if(!isSupported){var element=document.createElement("div");element.setAttribute(eventName,"return;");isSupported=typeof element[eventName]==="function"}if(!isSupported&&useHasFeature&&eventNameSuffix==="wheel"){isSupported=document.implementation.hasFeature("Events.wheel","3.0")}return isSupported}module.exports=isEventSupported},{"fbjs/lib/ExecutionEnvironment":140}],295:[function(require,module,exports){"use strict";var supportedInputTypes={color:true,date:true,datetime:true,"datetime-local":true,email:true,month:true,number:true,password:true,range:true,search:true,tel:true,text:true,time:true,url:true,week:true};function isTextInputElement(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();if(nodeName==="input"){return!!supportedInputTypes[elem.type]}if(nodeName==="textarea"){return true}return false}module.exports=isTextInputElement},{}],296:[function(require,module,exports){"use strict";var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");function quoteAttributeValueForBrowser(value){return'"'+escapeTextContentForBrowser(value)+'"'}module.exports=quoteAttributeValueForBrowser},{"./escapeTextContentForBrowser":279}],297:[function(require,module,exports){"use strict";function reactProdInvariant(code){var argCount=arguments.length-1;var message="Minified React error #"+code+"; visit "+"http://facebook.github.io/react/docs/error-decoder.html?invariant="+code;for(var argIdx=0;argIdx<argCount;argIdx++){message+="&args[]="+encodeURIComponent(arguments[argIdx+1])}message+=" for the full message or use the non-minified dev environment"+" for full errors and additional helpful warnings.";var error=new Error(message);error.name="Invariant Violation";error.framesToPop=1;throw error}module.exports=reactProdInvariant},{}],298:[function(require,module,exports){"use strict";var ReactMount=require("./ReactMount");module.exports=ReactMount.renderSubtreeIntoContainer},{"./ReactMount":242}],299:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var DOMNamespaces=require("./DOMNamespaces");var WHITESPACE_TEST=/^[ \r\n\t\f]/;var NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/;var createMicrosoftUnsafeLocalFunction=require("./createMicrosoftUnsafeLocalFunction");var reusableSVGContainer;var setInnerHTML=createMicrosoftUnsafeLocalFunction(function(node,html){if(node.namespaceURI===DOMNamespaces.svg&&!("innerHTML"in node)){reusableSVGContainer=reusableSVGContainer||document.createElement("div");reusableSVGContainer.innerHTML="<svg>"+html+"</svg>";var svgNode=reusableSVGContainer.firstChild;while(svgNode.firstChild){node.appendChild(svgNode.firstChild)}}else{node.innerHTML=html}});if(ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ";if(testElement.innerHTML===""){setInnerHTML=function(node,html){if(node.parentNode){node.parentNode.replaceChild(node,node)}if(WHITESPACE_TEST.test(html)||html[0]==="<"&&NONVISIBLE_TEST.test(html)){node.innerHTML=String.fromCharCode(65279)+html;var textNode=node.firstChild;if(textNode.data.length===1){node.removeChild(textNode)}else{textNode.deleteData(0,1)}}else{node.innerHTML=html}}}testElement=null}module.exports=setInnerHTML},{"./DOMNamespaces":187,"./createMicrosoftUnsafeLocalFunction":277,"fbjs/lib/ExecutionEnvironment":140}],300:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var setInnerHTML=require("./setInnerHTML");var setTextContent=function(node,text){if(text){var firstChild=node.firstChild;if(firstChild&&firstChild===node.lastChild&&firstChild.nodeType===3){firstChild.nodeValue=text;return}}node.textContent=text};if(ExecutionEnvironment.canUseDOM){if(!("textContent"in document.documentElement)){setTextContent=function(node,text){if(node.nodeType===3){node.nodeValue=text;return}setInnerHTML(node,escapeTextContentForBrowser(text))}}}module.exports=setTextContent},{"./escapeTextContentForBrowser":279,"./setInnerHTML":299,"fbjs/lib/ExecutionEnvironment":140}],301:[function(require,module,exports){"use strict";function shouldUpdateReactComponent(prevElement,nextElement){var prevEmpty=prevElement===null||prevElement===false;var nextEmpty=nextElement===null||nextElement===false;if(prevEmpty||nextEmpty){return prevEmpty===nextEmpty}var prevType=typeof prevElement;var nextType=typeof nextElement;if(prevType==="string"||prevType==="number"){return nextType==="string"||nextType==="number"}else{return nextType==="object"&&prevElement.type===nextElement.type&&prevElement.key===nextElement.key}}module.exports=shouldUpdateReactComponent},{}],302:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var REACT_ELEMENT_TYPE=require("./ReactElementSymbol");var getIteratorFn=require("./getIteratorFn");var invariant=require("fbjs/lib/invariant");var KeyEscapeUtils=require("./KeyEscapeUtils");var warning=require("fbjs/lib/warning");var SEPARATOR=".";var SUBSEPARATOR=":";var didWarnAboutMaps=false;function getComponentKey(component,index){if(component&&typeof component==="object"&&component.key!=null){return KeyEscapeUtils.escape(component.key)}return index.toString(36)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if(type==="undefined"||type==="boolean"){children=null}if(children===null||type==="string"||type==="number"||type==="object"&&children.$$typeof===REACT_ELEMENT_TYPE){callback(traverseContext,children,nameSoFar===""?SEPARATOR+getComponentKey(children,0):nameSoFar);return 1}var child;var nextName;var subtreeCount=0;var nextNamePrefix=nameSoFar===""?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children)){for(var i=0;i<children.length;i++){child=children[i];nextName=nextNamePrefix+getComponentKey(child,i);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var iterator=iteratorFn.call(children);var step;if(iteratorFn!==children.entries){var ii=0;while(!(step=iterator.next()).done){child=step.value;nextName=nextNamePrefix+getComponentKey(child,ii++);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{if(process.env.NODE_ENV!=="production"){var mapsAsChildrenAddendum="";if(ReactCurrentOwner.current){var mapsAsChildrenOwnerName=ReactCurrentOwner.current.getName();if(mapsAsChildrenOwnerName){mapsAsChildrenAddendum=" Check the render method of `"+mapsAsChildrenOwnerName+"`."}}process.env.NODE_ENV!=="production"?warning(didWarnAboutMaps,"Using Maps as children is not yet fully supported. It is an "+"experimental feature that might be removed. Convert it to a "+"sequence / iterable of keyed ReactElements instead.%s",mapsAsChildrenAddendum):void 0;didWarnAboutMaps=true}while(!(step=iterator.next()).done){var entry=step.value;if(entry){child=entry[1];nextName=nextNamePrefix+KeyEscapeUtils.escape(entry[0])+SUBSEPARATOR+getComponentKey(child,0);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}}}else if(type==="object"){var addendum="";if(process.env.NODE_ENV!=="production"){addendum=" If you meant to render a collection of children, use an array "+"instead or wrap the object using createFragment(object) from the "+"React add-ons.";if(children._isReactElement){addendum=" It looks like you're using an element created by a different "+"version of React. Make sure to use only one copy of React."}if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name){addendum+=" Check the render method of `"+name+"`."}}}var childrenString=String(children);!false?process.env.NODE_ENV!=="production"?invariant(false,"Objects are not valid as a React child (found: %s).%s",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):_prodInvariant("31",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):void 0}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){if(children==null){return 0}return traverseAllChildrenImpl(children,"",callback,traverseContext)}module.exports=traverseAllChildren}).call(this)}).call(this,require("_process"))},{"./KeyEscapeUtils":199,"./ReactElementSymbol":228,"./getIteratorFn":288,"./reactProdInvariant":297,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161,"react/lib/ReactCurrentOwner":313}],303:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var emptyFunction=require("fbjs/lib/emptyFunction");var warning=require("fbjs/lib/warning");var validateDOMNesting=emptyFunction;if(process.env.NODE_ENV!=="production"){var specialTags=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"];var inScopeTags=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"];var buttonScopeTags=inScopeTags.concat(["button"]);var impliedEndTags=["dd","dt","li","option","optgroup","p","rp","rt"];var emptyAncestorInfo={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};var updatedAncestorInfo=function(oldInfo,tag,instance){var ancestorInfo=_assign({},oldInfo||emptyAncestorInfo);var info={tag:tag,instance:instance};if(inScopeTags.indexOf(tag)!==-1){ancestorInfo.aTagInScope=null;ancestorInfo.buttonTagInScope=null;ancestorInfo.nobrTagInScope=null}if(buttonScopeTags.indexOf(tag)!==-1){ancestorInfo.pTagInButtonScope=null}if(specialTags.indexOf(tag)!==-1&&tag!=="address"&&tag!=="div"&&tag!=="p"){ancestorInfo.listItemTagAutoclosing=null;ancestorInfo.dlItemTagAutoclosing=null}ancestorInfo.current=info;if(tag==="form"){ancestorInfo.formTag=info}if(tag==="a"){ancestorInfo.aTagInScope=info}if(tag==="button"){ancestorInfo.buttonTagInScope=info}if(tag==="nobr"){ancestorInfo.nobrTagInScope=info}if(tag==="p"){ancestorInfo.pTagInButtonScope=info}if(tag==="li"){ancestorInfo.listItemTagAutoclosing=info}if(tag==="dd"||tag==="dt"){ancestorInfo.dlItemTagAutoclosing=info}return ancestorInfo};var isTagValidWithParent=function(tag,parentTag){switch(parentTag){case"select":return tag==="option"||tag==="optgroup"||tag==="#text";case"optgroup":return tag==="option"||tag==="#text";case"option":return tag==="#text";case"tr":return tag==="th"||tag==="td"||tag==="style"||tag==="script"||tag==="template";case"tbody":case"thead":case"tfoot":return tag==="tr"||tag==="style"||tag==="script"||tag==="template";case"colgroup":return tag==="col"||tag==="template";case"table":return tag==="caption"||tag==="colgroup"||tag==="tbody"||tag==="tfoot"||tag==="thead"||tag==="style"||tag==="script"||tag==="template";case"head":return tag==="base"||tag==="basefont"||tag==="bgsound"||tag==="link"||tag==="meta"||tag==="title"||tag==="noscript"||tag==="noframes"||tag==="style"||tag==="script"||tag==="template";case"html":return tag==="head"||tag==="body";case"#document":return tag==="html"}switch(tag){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return parentTag!=="h1"&&parentTag!=="h2"&&parentTag!=="h3"&&parentTag!=="h4"&&parentTag!=="h5"&&parentTag!=="h6";case"rp":case"rt":return impliedEndTags.indexOf(parentTag)===-1;case"body":case"caption":case"col":case"colgroup":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return parentTag==null}return true};var findInvalidAncestorForTag=function(tag,ancestorInfo){switch(tag){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return ancestorInfo.pTagInButtonScope;case"form":return ancestorInfo.formTag||ancestorInfo.pTagInButtonScope;case"li":return ancestorInfo.listItemTagAutoclosing;case"dd":case"dt":return ancestorInfo.dlItemTagAutoclosing;case"button":return ancestorInfo.buttonTagInScope;case"a":return ancestorInfo.aTagInScope;case"nobr":return ancestorInfo.nobrTagInScope}return null};var findOwnerStack=function(instance){if(!instance){return[]}var stack=[];do{stack.push(instance)}while(instance=instance._currentElement._owner);stack.reverse();return stack};var didWarn={};validateDOMNesting=function(childTag,childText,childInstance,ancestorInfo){ancestorInfo=ancestorInfo||emptyAncestorInfo;var parentInfo=ancestorInfo.current;var parentTag=parentInfo&&parentInfo.tag;if(childText!=null){process.env.NODE_ENV!=="production"?warning(childTag==null,"validateDOMNesting: when childText is passed, childTag should be null"):void 0;childTag="#text"}var invalidParent=isTagValidWithParent(childTag,parentTag)?null:parentInfo;var invalidAncestor=invalidParent?null:findInvalidAncestorForTag(childTag,ancestorInfo);var problematic=invalidParent||invalidAncestor;if(problematic){var ancestorTag=problematic.tag;var ancestorInstance=problematic.instance;var childOwner=childInstance&&childInstance._currentElement._owner;var ancestorOwner=ancestorInstance&&ancestorInstance._currentElement._owner;var childOwners=findOwnerStack(childOwner);var ancestorOwners=findOwnerStack(ancestorOwner);var minStackLen=Math.min(childOwners.length,ancestorOwners.length);var i;var deepestCommon=-1;for(i=0;i<minStackLen;i++){if(childOwners[i]===ancestorOwners[i]){deepestCommon=i}else{break}}var UNKNOWN="(unknown)";var childOwnerNames=childOwners.slice(deepestCommon+1).map(function(inst){return inst.getName()||UNKNOWN});var ancestorOwnerNames=ancestorOwners.slice(deepestCommon+1).map(function(inst){return inst.getName()||UNKNOWN});var ownerInfo=[].concat(deepestCommon!==-1?childOwners[deepestCommon].getName()||UNKNOWN:[],ancestorOwnerNames,ancestorTag,invalidAncestor?["..."]:[],childOwnerNames,childTag).join(" > ");var warnKey=!!invalidParent+"|"+childTag+"|"+ancestorTag+"|"+ownerInfo;if(didWarn[warnKey]){return}didWarn[warnKey]=true;var tagDisplayName=childTag;var whitespaceInfo="";if(childTag==="#text"){if(/\S/.test(childText)){tagDisplayName="Text nodes"}else{tagDisplayName="Whitespace text nodes";whitespaceInfo=" Make sure you don't have any extra whitespace between tags on "+"each line of your source code."}}else{tagDisplayName="<"+childTag+">"}if(invalidParent){var info="";if(ancestorTag==="table"&&childTag==="tr"){info+=" Add a <tbody> to your code to match the DOM tree generated by "+"the browser."}process.env.NODE_ENV!=="production"?warning(false,"validateDOMNesting(...): %s cannot appear as a child of <%s>.%s "+"See %s.%s",tagDisplayName,ancestorTag,whitespaceInfo,ownerInfo,info):void 0}else{process.env.NODE_ENV!=="production"?warning(false,"validateDOMNesting(...): %s cannot appear as a descendant of "+"<%s>. See %s.",tagDisplayName,ancestorTag,ownerInfo):void 0}}};validateDOMNesting.updatedAncestorInfo=updatedAncestorInfo;validateDOMNesting.isTagValidInContext=function(tag,ancestorInfo){ancestorInfo=ancestorInfo||emptyAncestorInfo;var parentInfo=ancestorInfo.current;var parentTag=parentInfo&&parentInfo.tag;return isTagValidWithParent(tag,parentTag)&&!findInvalidAncestorForTag(tag,ancestorInfo)}}module.exports=validateDOMNesting}).call(this)}).call(this,require("_process"))},{_process:25,"fbjs/lib/emptyFunction":146,"fbjs/lib/warning":161,"object-assign":166}],304:[function(require,module,exports){(function(process){(function(){"use strict";if(process.env.NODE_ENV!=="production"){(function(){"use strict";var hasSymbol=typeof Symbol==="function"&&Symbol.for;var REACT_ELEMENT_TYPE=hasSymbol?Symbol.for("react.element"):60103;var REACT_PORTAL_TYPE=hasSymbol?Symbol.for("react.portal"):60106;var REACT_FRAGMENT_TYPE=hasSymbol?Symbol.for("react.fragment"):60107;var REACT_STRICT_MODE_TYPE=hasSymbol?Symbol.for("react.strict_mode"):60108;var REACT_PROFILER_TYPE=hasSymbol?Symbol.for("react.profiler"):60114;var REACT_PROVIDER_TYPE=hasSymbol?Symbol.for("react.provider"):60109;var REACT_CONTEXT_TYPE=hasSymbol?Symbol.for("react.context"):60110;var REACT_ASYNC_MODE_TYPE=hasSymbol?Symbol.for("react.async_mode"):60111;var REACT_CONCURRENT_MODE_TYPE=hasSymbol?Symbol.for("react.concurrent_mode"):60111;var REACT_FORWARD_REF_TYPE=hasSymbol?Symbol.for("react.forward_ref"):60112;var REACT_SUSPENSE_TYPE=hasSymbol?Symbol.for("react.suspense"):60113;var REACT_SUSPENSE_LIST_TYPE=hasSymbol?Symbol.for("react.suspense_list"):60120;var REACT_MEMO_TYPE=hasSymbol?Symbol.for("react.memo"):60115;var REACT_LAZY_TYPE=hasSymbol?Symbol.for("react.lazy"):60116;var REACT_BLOCK_TYPE=hasSymbol?Symbol.for("react.block"):60121;var REACT_FUNDAMENTAL_TYPE=hasSymbol?Symbol.for("react.fundamental"):60117;var REACT_RESPONDER_TYPE=hasSymbol?Symbol.for("react.responder"):60118;var REACT_SCOPE_TYPE=hasSymbol?Symbol.for("react.scope"):60119;function isValidElementType(type){return typeof type==="string"||typeof type==="function"||type===REACT_FRAGMENT_TYPE||type===REACT_CONCURRENT_MODE_TYPE||type===REACT_PROFILER_TYPE||type===REACT_STRICT_MODE_TYPE||type===REACT_SUSPENSE_TYPE||type===REACT_SUSPENSE_LIST_TYPE||typeof type==="object"&&type!==null&&(type.$$typeof===REACT_LAZY_TYPE||type.$$typeof===REACT_MEMO_TYPE||type.$$typeof===REACT_PROVIDER_TYPE||type.$$typeof===REACT_CONTEXT_TYPE||type.$$typeof===REACT_FORWARD_REF_TYPE||type.$$typeof===REACT_FUNDAMENTAL_TYPE||type.$$typeof===REACT_RESPONDER_TYPE||type.$$typeof===REACT_SCOPE_TYPE||type.$$typeof===REACT_BLOCK_TYPE)}function typeOf(object){if(typeof object==="object"&&object!==null){var $$typeof=object.$$typeof;switch($$typeof){case REACT_ELEMENT_TYPE:var type=object.type;switch(type){case REACT_ASYNC_MODE_TYPE:case REACT_CONCURRENT_MODE_TYPE:case REACT_FRAGMENT_TYPE:case REACT_PROFILER_TYPE:case REACT_STRICT_MODE_TYPE:case REACT_SUSPENSE_TYPE:return type;default:var $$typeofType=type&&type.$$typeof;switch($$typeofType){case REACT_CONTEXT_TYPE:case REACT_FORWARD_REF_TYPE:case REACT_LAZY_TYPE:case REACT_MEMO_TYPE:case REACT_PROVIDER_TYPE:return $$typeofType;default:return $$typeof}}case REACT_PORTAL_TYPE:return $$typeof}}return undefined}var AsyncMode=REACT_ASYNC_MODE_TYPE;var ConcurrentMode=REACT_CONCURRENT_MODE_TYPE;var ContextConsumer=REACT_CONTEXT_TYPE;var ContextProvider=REACT_PROVIDER_TYPE;var Element=REACT_ELEMENT_TYPE;var ForwardRef=REACT_FORWARD_REF_TYPE;var Fragment=REACT_FRAGMENT_TYPE;var Lazy=REACT_LAZY_TYPE;var Memo=REACT_MEMO_TYPE;var Portal=REACT_PORTAL_TYPE;var Profiler=REACT_PROFILER_TYPE;var StrictMode=REACT_STRICT_MODE_TYPE;var Suspense=REACT_SUSPENSE_TYPE;var hasWarnedAboutDeprecatedIsAsyncMode=false;function isAsyncMode(object){{if(!hasWarnedAboutDeprecatedIsAsyncMode){hasWarnedAboutDeprecatedIsAsyncMode=true;console["warn"]("The ReactIs.isAsyncMode() alias has been deprecated, "+"and will be removed in React 17+. Update your code to use "+"ReactIs.isConcurrentMode() instead. It has the exact same API.")}}return isConcurrentMode(object)||typeOf(object)===REACT_ASYNC_MODE_TYPE}function isConcurrentMode(object){return typeOf(object)===REACT_CONCURRENT_MODE_TYPE}function isContextConsumer(object){return typeOf(object)===REACT_CONTEXT_TYPE}function isContextProvider(object){return typeOf(object)===REACT_PROVIDER_TYPE}function isElement(object){return typeof object==="object"&&object!==null&&object.$$typeof===REACT_ELEMENT_TYPE}function isForwardRef(object){return typeOf(object)===REACT_FORWARD_REF_TYPE}function isFragment(object){return typeOf(object)===REACT_FRAGMENT_TYPE}function isLazy(object){return typeOf(object)===REACT_LAZY_TYPE}function isMemo(object){return typeOf(object)===REACT_MEMO_TYPE}function isPortal(object){return typeOf(object)===REACT_PORTAL_TYPE}function isProfiler(object){return typeOf(object)===REACT_PROFILER_TYPE}function isStrictMode(object){return typeOf(object)===REACT_STRICT_MODE_TYPE}function isSuspense(object){return typeOf(object)===REACT_SUSPENSE_TYPE}exports.AsyncMode=AsyncMode;exports.ConcurrentMode=ConcurrentMode;exports.ContextConsumer=ContextConsumer;exports.ContextProvider=ContextProvider;exports.Element=Element;exports.ForwardRef=ForwardRef;exports.Fragment=Fragment;exports.Lazy=Lazy;exports.Memo=Memo;exports.Portal=Portal;exports.Profiler=Profiler;exports.StrictMode=StrictMode;exports.Suspense=Suspense;exports.isAsyncMode=isAsyncMode;exports.isConcurrentMode=isConcurrentMode;exports.isContextConsumer=isContextConsumer;exports.isContextProvider=isContextProvider;exports.isElement=isElement;exports.isForwardRef=isForwardRef;exports.isFragment=isFragment;exports.isLazy=isLazy;exports.isMemo=isMemo;exports.isPortal=isPortal;exports.isProfiler=isProfiler;exports.isStrictMode=isStrictMode;exports.isSuspense=isSuspense;exports.isValidElementType=isValidElementType;exports.typeOf=typeOf})()}}).call(this)}).call(this,require("_process"))},{_process:25}],305:[function(require,module,exports){"use strict";var b="function"===typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(a){if("object"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;exports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};exports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};exports.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||"object"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z},{}],306:[function(require,module,exports){(function(process){(function(){"use strict";if(process.env.NODE_ENV==="production"){module.exports=require("./cjs/react-is.production.min.js")}else{module.exports=require("./cjs/react-is.development.js")}}).call(this)}).call(this,require("_process"))},{"./cjs/react-is.development.js":304,"./cjs/react-is.production.min.js":305,_process:25}],307:[function(require,module,exports){arguments[4][199][0].apply(exports,arguments)},{dup:199}],308:[function(require,module,exports){arguments[4][201][0].apply(exports,arguments)},{"./reactProdInvariant":330,_process:25,dup:201,"fbjs/lib/invariant":154}],309:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var ReactBaseClasses=require("./ReactBaseClasses");var ReactChildren=require("./ReactChildren");var ReactDOMFactories=require("./ReactDOMFactories");var ReactElement=require("./ReactElement");var ReactPropTypes=require("./ReactPropTypes");var ReactVersion=require("./ReactVersion");var createReactClass=require("./createClass");var onlyChild=require("./onlyChild");var createElement=ReactElement.createElement;var createFactory=ReactElement.createFactory;var cloneElement=ReactElement.cloneElement;if(process.env.NODE_ENV!=="production"){var lowPriorityWarning=require("./lowPriorityWarning");var canDefineProperty=require("./canDefineProperty");var ReactElementValidator=require("./ReactElementValidator");var didWarnPropTypesDeprecated=false;createElement=ReactElementValidator.createElement;createFactory=ReactElementValidator.createFactory;cloneElement=ReactElementValidator.cloneElement}var __spread=_assign;var createMixin=function(mixin){return mixin};if(process.env.NODE_ENV!=="production"){var warnedForSpread=false;var warnedForCreateMixin=false;__spread=function(){lowPriorityWarning(warnedForSpread,"React.__spread is deprecated and should not be used. Use "+"Object.assign directly or another helper function with similar "+"semantics. You may be seeing this warning due to your compiler. "+"See https://fb.me/react-spread-deprecation for more details.");warnedForSpread=true;return _assign.apply(null,arguments)};createMixin=function(mixin){lowPriorityWarning(warnedForCreateMixin,"React.createMixin is deprecated and should not be used. "+"In React v16.0, it will be removed. "+"You can use this mixin directly instead. "+"See https://fb.me/createmixin-was-never-implemented for more info.");warnedForCreateMixin=true;return mixin}}var React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactBaseClasses.Component,PureComponent:ReactBaseClasses.PureComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:createReactClass,createFactory:createFactory,createMixin:createMixin,DOM:ReactDOMFactories,version:ReactVersion,__spread:__spread};if(process.env.NODE_ENV!=="production"){var warnedForCreateClass=false;if(canDefineProperty){Object.defineProperty(React,"PropTypes",{get:function(){lowPriorityWarning(didWarnPropTypesDeprecated,"Accessing PropTypes via the main React package is deprecated,"+" and will be removed in  React v16.0."+" Use the latest available v15.* prop-types package from npm instead."+" For info on usage, compatibility, migration and more, see "+"https://fb.me/prop-types-docs");didWarnPropTypesDeprecated=true;return ReactPropTypes}});Object.defineProperty(React,"createClass",{get:function(){lowPriorityWarning(warnedForCreateClass,"Accessing createClass via the main React package is deprecated,"+" and will be removed in React v16.0."+" Use a plain JavaScript class instead. If you're not yet "+"ready to migrate, create-react-class v15.* is available "+"on npm as a temporary, drop-in replacement. "+"For more info see https://fb.me/react-create-class");warnedForCreateClass=true;return createReactClass}})}React.DOM={};var warnedForFactories=false;Object.keys(ReactDOMFactories).forEach(function(factory){React.DOM[factory]=function(){if(!warnedForFactories){lowPriorityWarning(false,"Accessing factories like React.DOM.%s has been deprecated "+"and will be removed in v16.0+. Use the "+"react-dom-factories package instead. "+" Version 1.0 provides a drop-in replacement."+" For more info, see https://fb.me/react-dom-factories",factory);warnedForFactories=true}return ReactDOMFactories[factory].apply(ReactDOMFactories,arguments)}})}module.exports=React}).call(this)}).call(this,require("_process"))},{"./ReactBaseClasses":310,"./ReactChildren":311,"./ReactDOMFactories":314,"./ReactElement":315,"./ReactElementValidator":317,"./ReactPropTypes":320,"./ReactVersion":322,"./canDefineProperty":323,"./createClass":325,"./lowPriorityWarning":328,"./onlyChild":329,_process:25,"object-assign":166}],310:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue");var canDefineProperty=require("./canDefineProperty");var emptyObject=require("fbjs/lib/emptyObject");var invariant=require("fbjs/lib/invariant");var lowPriorityWarning=require("./lowPriorityWarning");function ReactComponent(props,context,updater){this.props=props;this.context=context;this.refs=emptyObject;this.updater=updater||ReactNoopUpdateQueue}ReactComponent.prototype.isReactComponent={};ReactComponent.prototype.setState=function(partialState,callback){!(typeof partialState==="object"||typeof partialState==="function"||partialState==null)?process.env.NODE_ENV!=="production"?invariant(false,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):_prodInvariant("85"):void 0;this.updater.enqueueSetState(this,partialState);if(callback){this.updater.enqueueCallback(this,callback,"setState")}};ReactComponent.prototype.forceUpdate=function(callback){this.updater.enqueueForceUpdate(this);if(callback){this.updater.enqueueCallback(this,callback,"forceUpdate")}};if(process.env.NODE_ENV!=="production"){var deprecatedAPIs={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in "+"componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see "+"https://github.com/facebook/react/issues/3236)."]};var defineDeprecationWarning=function(methodName,info){if(canDefineProperty){Object.defineProperty(ReactComponent.prototype,methodName,{get:function(){lowPriorityWarning(false,"%s(...) is deprecated in plain JavaScript React classes. %s",info[0],info[1]);return undefined}})}};for(var fnName in deprecatedAPIs){if(deprecatedAPIs.hasOwnProperty(fnName)){defineDeprecationWarning(fnName,deprecatedAPIs[fnName])}}}function ReactPureComponent(props,context,updater){this.props=props;this.context=context;this.refs=emptyObject;this.updater=updater||ReactNoopUpdateQueue}function ComponentDummy(){}ComponentDummy.prototype=ReactComponent.prototype;ReactPureComponent.prototype=new ComponentDummy;ReactPureComponent.prototype.constructor=ReactPureComponent;_assign(ReactPureComponent.prototype,ReactComponent.prototype);ReactPureComponent.prototype.isPureReactComponent=true;module.exports={Component:ReactComponent,PureComponent:ReactPureComponent}}).call(this)}).call(this,require("_process"))},{"./ReactNoopUpdateQueue":318,"./canDefineProperty":323,"./lowPriorityWarning":328,"./reactProdInvariant":330,_process:25,"fbjs/lib/emptyObject":147,"fbjs/lib/invariant":154,"object-assign":166}],311:[function(require,module,exports){"use strict";var PooledClass=require("./PooledClass");var ReactElement=require("./ReactElement");var emptyFunction=require("fbjs/lib/emptyFunction");var traverseAllChildren=require("./traverseAllChildren");var twoArgumentPooler=PooledClass.twoArgumentPooler;var fourArgumentPooler=PooledClass.fourArgumentPooler;var userProvidedKeyEscapeRegex=/\/+/g;function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,"$&/")}function ForEachBookKeeping(forEachFunction,forEachContext){this.func=forEachFunction;this.context=forEachContext;this.count=0}ForEachBookKeeping.prototype.destructor=function(){this.func=null;this.context=null;this.count=0};PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler);function forEachSingleChild(bookKeeping,child,name){var func=bookKeeping.func,context=bookKeeping.context;func.call(context,child,bookKeeping.count++)}function forEachChildren(children,forEachFunc,forEachContext){if(children==null){return children}var traverseContext=ForEachBookKeeping.getPooled(forEachFunc,forEachContext);traverseAllChildren(children,forEachSingleChild,traverseContext);ForEachBookKeeping.release(traverseContext)}function MapBookKeeping(mapResult,keyPrefix,mapFunction,mapContext){this.result=mapResult;this.keyPrefix=keyPrefix;this.func=mapFunction;this.context=mapContext;this.count=0}MapBookKeeping.prototype.destructor=function(){this.result=null;this.keyPrefix=null;this.func=null;this.context=null;this.count=0};PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);function mapSingleChildIntoContext(bookKeeping,child,childKey){var result=bookKeeping.result,keyPrefix=bookKeeping.keyPrefix,func=bookKeeping.func,context=bookKeeping.context;var mappedChild=func.call(context,child,bookKeeping.count++);if(Array.isArray(mappedChild)){mapIntoWithKeyPrefixInternal(mappedChild,result,childKey,emptyFunction.thatReturnsArgument)}else if(mappedChild!=null){if(ReactElement.isValidElement(mappedChild)){mappedChild=ReactElement.cloneAndReplaceKey(mappedChild,keyPrefix+(mappedChild.key&&(!child||child.key!==mappedChild.key)?escapeUserProvidedKey(mappedChild.key)+"/":"")+childKey)}result.push(mappedChild)}}function mapIntoWithKeyPrefixInternal(children,array,prefix,func,context){var escapedPrefix="";if(prefix!=null){escapedPrefix=escapeUserProvidedKey(prefix)+"/"}var traverseContext=MapBookKeeping.getPooled(array,escapedPrefix,func,context);traverseAllChildren(children,mapSingleChildIntoContext,traverseContext);MapBookKeeping.release(traverseContext)}function mapChildren(children,func,context){if(children==null){return children}var result=[];mapIntoWithKeyPrefixInternal(children,result,null,func,context);return result}function forEachSingleChildDummy(traverseContext,child,name){return null}function countChildren(children,context){return traverseAllChildren(children,forEachSingleChildDummy,null)}function toArray(children){var result=[];mapIntoWithKeyPrefixInternal(children,result,null,emptyFunction.thatReturnsArgument);return result}var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren},{"./PooledClass":308,"./ReactElement":315,"./traverseAllChildren":331,"fbjs/lib/emptyFunction":146}],312:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("./ReactCurrentOwner");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");function isNative(fn){var funcToString=Function.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var source=funcToString.call(fn);return reIsNative.test(source)}catch(err){return false}}var canUseCollections=typeof Array.from==="function"&&typeof Map==="function"&&isNative(Map)&&Map.prototype!=null&&typeof Map.prototype.keys==="function"&&isNative(Map.prototype.keys)&&typeof Set==="function"&&isNative(Set)&&Set.prototype!=null&&typeof Set.prototype.keys==="function"&&isNative(Set.prototype.keys);var setItem;var getItem;var removeItem;var getItemIDs;var addRoot;var removeRoot;var getRootIDs;if(canUseCollections){var itemMap=new Map;var rootIDSet=new Set;setItem=function(id,item){itemMap.set(id,item)};getItem=function(id){return itemMap.get(id)};removeItem=function(id){itemMap["delete"](id)};getItemIDs=function(){return Array.from(itemMap.keys())};addRoot=function(id){rootIDSet.add(id)};removeRoot=function(id){rootIDSet["delete"](id)};getRootIDs=function(){return Array.from(rootIDSet.keys())}}else{var itemByKey={};var rootByKey={};var getKeyFromID=function(id){return"."+id};var getIDFromKey=function(key){return parseInt(key.substr(1),10)};setItem=function(id,item){var key=getKeyFromID(id);itemByKey[key]=item};getItem=function(id){var key=getKeyFromID(id);return itemByKey[key]};removeItem=function(id){var key=getKeyFromID(id);delete itemByKey[key]};getItemIDs=function(){return Object.keys(itemByKey).map(getIDFromKey)};addRoot=function(id){var key=getKeyFromID(id);rootByKey[key]=true};removeRoot=function(id){var key=getKeyFromID(id);delete rootByKey[key]};getRootIDs=function(){return Object.keys(rootByKey).map(getIDFromKey)}}var unmountedIDs=[];function purgeDeep(id){var item=getItem(id);if(item){var childIDs=item.childIDs;removeItem(id);childIDs.forEach(purgeDeep)}}function describeComponentFrame(name,source,ownerName){return"\n    in "+(name||"Unknown")+(source?" (at "+source.fileName.replace(/^.*[\\\/]/,"")+":"+source.lineNumber+")":ownerName?" (created by "+ownerName+")":"")}function getDisplayName(element){if(element==null){return"#empty"}else if(typeof element==="string"||typeof element==="number"){return"#text"}else if(typeof element.type==="string"){return element.type}else{return element.type.displayName||element.type.name||"Unknown"}}function describeID(id){var name=ReactComponentTreeHook.getDisplayName(id);var element=ReactComponentTreeHook.getElement(id);var ownerID=ReactComponentTreeHook.getOwnerID(id);var ownerName;if(ownerID){ownerName=ReactComponentTreeHook.getDisplayName(ownerID)}process.env.NODE_ENV!=="production"?warning(element,"ReactComponentTreeHook: Missing React element for debugID %s when "+"building stack",id):void 0;return describeComponentFrame(name,element&&element._source,ownerName)}var ReactComponentTreeHook={onSetChildren:function(id,nextChildIDs){var item=getItem(id);!item?process.env.NODE_ENV!=="production"?invariant(false,"Item must have been set"):_prodInvariant("144"):void 0;item.childIDs=nextChildIDs;for(var i=0;i<nextChildIDs.length;i++){var nextChildID=nextChildIDs[i];var nextChild=getItem(nextChildID);!nextChild?process.env.NODE_ENV!=="production"?invariant(false,"Expected hook events to fire for the child before its parent includes it in onSetChildren()."):_prodInvariant("140"):void 0;!(nextChild.childIDs!=null||typeof nextChild.element!=="object"||nextChild.element==null)?process.env.NODE_ENV!=="production"?invariant(false,"Expected onSetChildren() to fire for a container child before its parent includes it in onSetChildren()."):_prodInvariant("141"):void 0;!nextChild.isMounted?process.env.NODE_ENV!=="production"?invariant(false,"Expected onMountComponent() to fire for the child before its parent includes it in onSetChildren()."):_prodInvariant("71"):void 0;if(nextChild.parentID==null){nextChild.parentID=id}!(nextChild.parentID===id)?process.env.NODE_ENV!=="production"?invariant(false,"Expected onBeforeMountComponent() parent and onSetChildren() to be consistent (%s has parents %s and %s).",nextChildID,nextChild.parentID,id):_prodInvariant("142",nextChildID,nextChild.parentID,id):void 0}},onBeforeMountComponent:function(id,element,parentID){var item={element:element,parentID:parentID,text:null,childIDs:[],isMounted:false,updateCount:0};setItem(id,item)},onBeforeUpdateComponent:function(id,element){var item=getItem(id);if(!item||!item.isMounted){return}item.element=element},onMountComponent:function(id){var item=getItem(id);!item?process.env.NODE_ENV!=="production"?invariant(false,"Item must have been set"):_prodInvariant("144"):void 0;item.isMounted=true;var isRoot=item.parentID===0;if(isRoot){addRoot(id)}},onUpdateComponent:function(id){var item=getItem(id);if(!item||!item.isMounted){return}item.updateCount++},onUnmountComponent:function(id){var item=getItem(id);if(item){item.isMounted=false;var isRoot=item.parentID===0;if(isRoot){removeRoot(id)}}unmountedIDs.push(id)},purgeUnmountedComponents:function(){if(ReactComponentTreeHook._preventPurging){return}for(var i=0;i<unmountedIDs.length;i++){var id=unmountedIDs[i];purgeDeep(id)}unmountedIDs.length=0},isMounted:function(id){var item=getItem(id);return item?item.isMounted:false},getCurrentStackAddendum:function(topElement){var info="";if(topElement){var name=getDisplayName(topElement);var owner=topElement._owner;info+=describeComponentFrame(name,topElement._source,owner&&owner.getName())}var currentOwner=ReactCurrentOwner.current;var id=currentOwner&&currentOwner._debugID;info+=ReactComponentTreeHook.getStackAddendumByID(id);return info},getStackAddendumByID:function(id){var info="";while(id){info+=describeID(id);id=ReactComponentTreeHook.getParentID(id)}return info},getChildIDs:function(id){var item=getItem(id);return item?item.childIDs:[]},getDisplayName:function(id){var element=ReactComponentTreeHook.getElement(id);if(!element){return null}return getDisplayName(element)},getElement:function(id){var item=getItem(id);return item?item.element:null},getOwnerID:function(id){var element=ReactComponentTreeHook.getElement(id);if(!element||!element._owner){return null}return element._owner._debugID},getParentID:function(id){var item=getItem(id);return item?item.parentID:null},getSource:function(id){var item=getItem(id);var element=item?item.element:null;var source=element!=null?element._source:null;return source},getText:function(id){var element=ReactComponentTreeHook.getElement(id);if(typeof element==="string"){return element}else if(typeof element==="number"){return""+element}else{return null}},getUpdateCount:function(id){var item=getItem(id);return item?item.updateCount:0},getRootIDs:getRootIDs,getRegisteredIDs:getItemIDs,pushNonStandardWarningStack:function(isCreatingElement,currentSource){if(typeof console.reactStack!=="function"){return}var stack=[];var currentOwner=ReactCurrentOwner.current;var id=currentOwner&&currentOwner._debugID;try{if(isCreatingElement){stack.push({name:id?ReactComponentTreeHook.getDisplayName(id):null,fileName:currentSource?currentSource.fileName:null,lineNumber:currentSource?currentSource.lineNumber:null})}while(id){var element=ReactComponentTreeHook.getElement(id);var parentID=ReactComponentTreeHook.getParentID(id);var ownerID=ReactComponentTreeHook.getOwnerID(id);var ownerName=ownerID?ReactComponentTreeHook.getDisplayName(ownerID):null;var source=element&&element._source;stack.push({name:ownerName,fileName:source?source.fileName:null,lineNumber:source?source.lineNumber:null});id=parentID}}catch(err){}console.reactStack(stack)},popNonStandardWarningStack:function(){if(typeof console.reactStackEnd!=="function"){return}console.reactStackEnd()}};module.exports=ReactComponentTreeHook}).call(this)}).call(this,require("_process"))},{"./ReactCurrentOwner":313,"./reactProdInvariant":330,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161}],313:[function(require,module,exports){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},{}],314:[function(require,module,exports){(function(process){(function(){"use strict";var ReactElement=require("./ReactElement");var createDOMFactory=ReactElement.createFactory;if(process.env.NODE_ENV!=="production"){var ReactElementValidator=require("./ReactElementValidator");createDOMFactory=ReactElementValidator.createFactory}var ReactDOMFactories={a:createDOMFactory("a"),abbr:createDOMFactory("abbr"),address:createDOMFactory("address"),area:createDOMFactory("area"),article:createDOMFactory("article"),aside:createDOMFactory("aside"),audio:createDOMFactory("audio"),b:createDOMFactory("b"),base:createDOMFactory("base"),bdi:createDOMFactory("bdi"),bdo:createDOMFactory("bdo"),big:createDOMFactory("big"),blockquote:createDOMFactory("blockquote"),body:createDOMFactory("body"),br:createDOMFactory("br"),button:createDOMFactory("button"),canvas:createDOMFactory("canvas"),caption:createDOMFactory("caption"),cite:createDOMFactory("cite"),code:createDOMFactory("code"),col:createDOMFactory("col"),colgroup:createDOMFactory("colgroup"),data:createDOMFactory("data"),datalist:createDOMFactory("datalist"),dd:createDOMFactory("dd"),del:createDOMFactory("del"),details:createDOMFactory("details"),dfn:createDOMFactory("dfn"),dialog:createDOMFactory("dialog"),div:createDOMFactory("div"),dl:createDOMFactory("dl"),dt:createDOMFactory("dt"),em:createDOMFactory("em"),embed:createDOMFactory("embed"),fieldset:createDOMFactory("fieldset"),figcaption:createDOMFactory("figcaption"),figure:createDOMFactory("figure"),footer:createDOMFactory("footer"),form:createDOMFactory("form"),h1:createDOMFactory("h1"),h2:createDOMFactory("h2"),h3:createDOMFactory("h3"),h4:createDOMFactory("h4"),h5:createDOMFactory("h5"),h6:createDOMFactory("h6"),head:createDOMFactory("head"),header:createDOMFactory("header"),hgroup:createDOMFactory("hgroup"),hr:createDOMFactory("hr"),html:createDOMFactory("html"),i:createDOMFactory("i"),iframe:createDOMFactory("iframe"),img:createDOMFactory("img"),input:createDOMFactory("input"),ins:createDOMFactory("ins"),kbd:createDOMFactory("kbd"),keygen:createDOMFactory("keygen"),label:createDOMFactory("label"),legend:createDOMFactory("legend"),li:createDOMFactory("li"),link:createDOMFactory("link"),main:createDOMFactory("main"),map:createDOMFactory("map"),mark:createDOMFactory("mark"),menu:createDOMFactory("menu"),menuitem:createDOMFactory("menuitem"),meta:createDOMFactory("meta"),meter:createDOMFactory("meter"),nav:createDOMFactory("nav"),noscript:createDOMFactory("noscript"),object:createDOMFactory("object"),ol:createDOMFactory("ol"),optgroup:createDOMFactory("optgroup"),option:createDOMFactory("option"),output:createDOMFactory("output"),p:createDOMFactory("p"),param:createDOMFactory("param"),picture:createDOMFactory("picture"),pre:createDOMFactory("pre"),progress:createDOMFactory("progress"),q:createDOMFactory("q"),rp:createDOMFactory("rp"),rt:createDOMFactory("rt"),ruby:createDOMFactory("ruby"),s:createDOMFactory("s"),samp:createDOMFactory("samp"),script:createDOMFactory("script"),section:createDOMFactory("section"),select:createDOMFactory("select"),small:createDOMFactory("small"),source:createDOMFactory("source"),span:createDOMFactory("span"),strong:createDOMFactory("strong"),style:createDOMFactory("style"),sub:createDOMFactory("sub"),summary:createDOMFactory("summary"),sup:createDOMFactory("sup"),table:createDOMFactory("table"),tbody:createDOMFactory("tbody"),td:createDOMFactory("td"),textarea:createDOMFactory("textarea"),tfoot:createDOMFactory("tfoot"),th:createDOMFactory("th"),thead:createDOMFactory("thead"),time:createDOMFactory("time"),title:createDOMFactory("title"),tr:createDOMFactory("tr"),track:createDOMFactory("track"),u:createDOMFactory("u"),ul:createDOMFactory("ul"),var:createDOMFactory("var"),video:createDOMFactory("video"),wbr:createDOMFactory("wbr"),circle:createDOMFactory("circle"),clipPath:createDOMFactory("clipPath"),defs:createDOMFactory("defs"),ellipse:createDOMFactory("ellipse"),g:createDOMFactory("g"),image:createDOMFactory("image"),line:createDOMFactory("line"),linearGradient:createDOMFactory("linearGradient"),mask:createDOMFactory("mask"),path:createDOMFactory("path"),pattern:createDOMFactory("pattern"),polygon:createDOMFactory("polygon"),polyline:createDOMFactory("polyline"),radialGradient:createDOMFactory("radialGradient"),rect:createDOMFactory("rect"),stop:createDOMFactory("stop"),svg:createDOMFactory("svg"),text:createDOMFactory("text"),tspan:createDOMFactory("tspan")};module.exports=ReactDOMFactories}).call(this)}).call(this,require("_process"))},{"./ReactElement":315,"./ReactElementValidator":317,_process:25}],315:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var ReactCurrentOwner=require("./ReactCurrentOwner");var warning=require("fbjs/lib/warning");var canDefineProperty=require("./canDefineProperty");var hasOwnProperty=Object.prototype.hasOwnProperty;var REACT_ELEMENT_TYPE=require("./ReactElementSymbol");var RESERVED_PROPS={key:true,ref:true,__self:true,__source:true};var specialPropKeyWarningShown,specialPropRefWarningShown;function hasValidRef(config){if(process.env.NODE_ENV!=="production"){if(hasOwnProperty.call(config,"ref")){var getter=Object.getOwnPropertyDescriptor(config,"ref").get;if(getter&&getter.isReactWarning){return false}}}return config.ref!==undefined}function hasValidKey(config){if(process.env.NODE_ENV!=="production"){if(hasOwnProperty.call(config,"key")){var getter=Object.getOwnPropertyDescriptor(config,"key").get;if(getter&&getter.isReactWarning){return false}}}return config.key!==undefined}function defineKeyPropWarningGetter(props,displayName){var warnAboutAccessingKey=function(){if(!specialPropKeyWarningShown){specialPropKeyWarningShown=true;process.env.NODE_ENV!=="production"?warning(false,"%s: `key` is not a prop. Trying to access it will result "+"in `undefined` being returned. If you need to access the same "+"value within the child component, you should pass it as a different "+"prop. (https://fb.me/react-special-props)",displayName):void 0}};warnAboutAccessingKey.isReactWarning=true;Object.defineProperty(props,"key",{get:warnAboutAccessingKey,configurable:true})}function defineRefPropWarningGetter(props,displayName){var warnAboutAccessingRef=function(){if(!specialPropRefWarningShown){specialPropRefWarningShown=true;process.env.NODE_ENV!=="production"?warning(false,"%s: `ref` is not a prop. Trying to access it will result "+"in `undefined` being returned. If you need to access the same "+"value within the child component, you should pass it as a different "+"prop. (https://fb.me/react-special-props)",displayName):void 0}};warnAboutAccessingRef.isReactWarning=true;Object.defineProperty(props,"ref",{get:warnAboutAccessingRef,configurable:true})}var ReactElement=function(type,key,ref,self,source,owner,props){var element={$$typeof:REACT_ELEMENT_TYPE,type:type,key:key,ref:ref,props:props,_owner:owner};if(process.env.NODE_ENV!=="production"){element._store={};if(canDefineProperty){Object.defineProperty(element._store,"validated",{configurable:false,enumerable:false,writable:true,value:false});Object.defineProperty(element,"_self",{configurable:false,enumerable:false,writable:false,value:self});Object.defineProperty(element,"_source",{configurable:false,enumerable:false,writable:false,value:source})}else{element._store.validated=false;element._self=self;element._source=source}if(Object.freeze){Object.freeze(element.props);Object.freeze(element)}}return element};ReactElement.createElement=function(type,config,children){var propName;var props={};var key=null;var ref=null;var self=null;var source=null;if(config!=null){if(hasValidRef(config)){ref=config.ref}if(hasValidKey(config)){key=""+config.key}self=config.__self===undefined?null:config.__self;source=config.__source===undefined?null:config.__source;for(propName in config){if(hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)){props[propName]=config[propName]}}}var childrenLength=arguments.length-2;if(childrenLength===1){props.children=children}else if(childrenLength>1){var childArray=Array(childrenLength);for(var i=0;i<childrenLength;i++){childArray[i]=arguments[i+2]}if(process.env.NODE_ENV!=="production"){if(Object.freeze){Object.freeze(childArray)}}props.children=childArray}if(type&&type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps){if(props[propName]===undefined){props[propName]=defaultProps[propName]}}}if(process.env.NODE_ENV!=="production"){if(key||ref){if(typeof props.$$typeof==="undefined"||props.$$typeof!==REACT_ELEMENT_TYPE){var displayName=typeof type==="function"?type.displayName||type.name||"Unknown":type;if(key){defineKeyPropWarningGetter(props,displayName)}if(ref){defineRefPropWarningGetter(props,displayName)}}}}return ReactElement(type,key,ref,self,source,ReactCurrentOwner.current,props)};ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);factory.type=type;return factory};ReactElement.cloneAndReplaceKey=function(oldElement,newKey){var newElement=ReactElement(oldElement.type,newKey,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,oldElement.props);return newElement};ReactElement.cloneElement=function(element,config,children){var propName;var props=_assign({},element.props);var key=element.key;var ref=element.ref;var self=element._self;var source=element._source;var owner=element._owner;if(config!=null){if(hasValidRef(config)){ref=config.ref;owner=ReactCurrentOwner.current}if(hasValidKey(config)){key=""+config.key}var defaultProps;if(element.type&&element.type.defaultProps){defaultProps=element.type.defaultProps}for(propName in config){if(hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)){if(config[propName]===undefined&&defaultProps!==undefined){props[propName]=defaultProps[propName]}else{props[propName]=config[propName]}}}}var childrenLength=arguments.length-2;if(childrenLength===1){props.children=children}else if(childrenLength>1){var childArray=Array(childrenLength);for(var i=0;i<childrenLength;i++){childArray[i]=arguments[i+2]}props.children=childArray}return ReactElement(element.type,key,ref,self,source,owner,props)};ReactElement.isValidElement=function(object){return typeof object==="object"&&object!==null&&object.$$typeof===REACT_ELEMENT_TYPE};module.exports=ReactElement}).call(this)}).call(this,require("_process"))},{"./ReactCurrentOwner":313,"./ReactElementSymbol":316,"./canDefineProperty":323,_process:25,"fbjs/lib/warning":161,"object-assign":166}],316:[function(require,module,exports){arguments[4][228][0].apply(exports,arguments)},{dup:228}],317:[function(require,module,exports){(function(process){(function(){"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactComponentTreeHook=require("./ReactComponentTreeHook");var ReactElement=require("./ReactElement");var checkReactTypeSpec=require("./checkReactTypeSpec");var canDefineProperty=require("./canDefineProperty");var getIteratorFn=require("./getIteratorFn");var warning=require("fbjs/lib/warning");var lowPriorityWarning=require("./lowPriorityWarning");function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name){return" Check the render method of `"+name+"`."}}return""}function getSourceInfoErrorAddendum(elementProps){if(elementProps!==null&&elementProps!==undefined&&elementProps.__source!==undefined){var source=elementProps.__source;var fileName=source.fileName.replace(/^.*[\\\/]/,"");var lineNumber=source.lineNumber;return" Check your code at "+fileName+":"+lineNumber+"."}return""}var ownerHasKeyUseWarning={};function getCurrentComponentErrorInfo(parentType){var info=getDeclarationErrorAddendum();if(!info){var parentName=typeof parentType==="string"?parentType:parentType.displayName||parentType.name;if(parentName){info=" Check the top-level render call using <"+parentName+">."}}return info}function validateExplicitKey(element,parentType){if(!element._store||element._store.validated||element.key!=null){return}element._store.validated=true;var memoizer=ownerHasKeyUseWarning.uniqueKey||(ownerHasKeyUseWarning.uniqueKey={});var currentComponentErrorInfo=getCurrentComponentErrorInfo(parentType);if(memoizer[currentComponentErrorInfo]){return}memoizer[currentComponentErrorInfo]=true;var childOwner="";if(element&&element._owner&&element._owner!==ReactCurrentOwner.current){childOwner=" It was passed a child from "+element._owner.getName()+"."}process.env.NODE_ENV!=="production"?warning(false,'Each child in an array or iterator should have a unique "key" prop.'+"%s%s See https://fb.me/react-warning-keys for more information.%s",currentComponentErrorInfo,childOwner,ReactComponentTreeHook.getCurrentStackAddendum(element)):void 0}function validateChildKeys(node,parentType){if(typeof node!=="object"){return}if(Array.isArray(node)){for(var i=0;i<node.length;i++){var child=node[i];if(ReactElement.isValidElement(child)){validateExplicitKey(child,parentType)}}}else if(ReactElement.isValidElement(node)){if(node._store){node._store.validated=true}}else if(node){var iteratorFn=getIteratorFn(node);if(iteratorFn){if(iteratorFn!==node.entries){var iterator=iteratorFn.call(node);var step;while(!(step=iterator.next()).done){if(ReactElement.isValidElement(step.value)){validateExplicitKey(step.value,parentType)}}}}}}function validatePropTypes(element){var componentClass=element.type;if(typeof componentClass!=="function"){return}var name=componentClass.displayName||componentClass.name;if(componentClass.propTypes){checkReactTypeSpec(componentClass.propTypes,element.props,"prop",name,element,null)}if(typeof componentClass.getDefaultProps==="function"){process.env.NODE_ENV!=="production"?warning(componentClass.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass "+"definitions. Use a static property named `defaultProps` instead."):void 0}}var ReactElementValidator={createElement:function(type,props,children){var validType=typeof type==="string"||typeof type==="function";if(!validType){if(typeof type!=="function"&&typeof type!=="string"){var info="";if(type===undefined||typeof type==="object"&&type!==null&&Object.keys(type).length===0){info+=" You likely forgot to export your component from the file "+"it's defined in."}var sourceInfo=getSourceInfoErrorAddendum(props);if(sourceInfo){info+=sourceInfo}else{info+=getDeclarationErrorAddendum()}info+=ReactComponentTreeHook.getCurrentStackAddendum();var currentSource=props!==null&&props!==undefined&&props.__source!==undefined?props.__source:null;ReactComponentTreeHook.pushNonStandardWarningStack(true,currentSource);process.env.NODE_ENV!=="production"?warning(false,"React.createElement: type is invalid -- expected a string (for "+"built-in components) or a class/function (for composite "+"components) but got: %s.%s",type==null?type:typeof type,info):void 0;ReactComponentTreeHook.popNonStandardWarningStack()}}var element=ReactElement.createElement.apply(this,arguments);if(element==null){return element}if(validType){for(var i=2;i<arguments.length;i++){validateChildKeys(arguments[i],type)}}validatePropTypes(element);return element},createFactory:function(type){var validatedFactory=ReactElementValidator.createElement.bind(null,type);validatedFactory.type=type;if(process.env.NODE_ENV!=="production"){if(canDefineProperty){Object.defineProperty(validatedFactory,"type",{enumerable:false,get:function(){lowPriorityWarning(false,"Factory.type is deprecated. Access the class directly "+"before passing it to createFactory.");Object.defineProperty(this,"type",{value:type});return type}})}}return validatedFactory},cloneElement:function(element,props,children){var newElement=ReactElement.cloneElement.apply(this,arguments);for(var i=2;i<arguments.length;i++){validateChildKeys(arguments[i],newElement.type)}validatePropTypes(newElement);return newElement}};module.exports=ReactElementValidator}).call(this)}).call(this,require("_process"))},{"./ReactComponentTreeHook":312,"./ReactCurrentOwner":313,"./ReactElement":315,"./canDefineProperty":323,"./checkReactTypeSpec":324,"./getIteratorFn":326,"./lowPriorityWarning":328,_process:25,"fbjs/lib/warning":161}],318:[function(require,module,exports){(function(process){(function(){"use strict";var warning=require("fbjs/lib/warning");function warnNoop(publicInstance,callerName){if(process.env.NODE_ENV!=="production"){var constructor=publicInstance.constructor;process.env.NODE_ENV!=="production"?warning(false,"%s(...): Can only update a mounted or mounting component. "+"This usually means you called %s() on an unmounted component. "+"This is a no-op. Please check the code for the %s component.",callerName,callerName,constructor&&(constructor.displayName||constructor.name)||"ReactClass"):void 0}}var ReactNoopUpdateQueue={isMounted:function(publicInstance){return false},enqueueCallback:function(publicInstance,callback){},enqueueForceUpdate:function(publicInstance){warnNoop(publicInstance,"forceUpdate")},enqueueReplaceState:function(publicInstance,completeState){warnNoop(publicInstance,"replaceState")},enqueueSetState:function(publicInstance,partialState){warnNoop(publicInstance,"setState")}};module.exports=ReactNoopUpdateQueue}).call(this)}).call(this,require("_process"))},{_process:25,"fbjs/lib/warning":161}],319:[function(require,module,exports){arguments[4][246][0].apply(exports,arguments)},{_process:25,dup:246}],320:[function(require,module,exports){"use strict";var _require=require("./ReactElement"),isValidElement=_require.isValidElement;var factory=require("prop-types/factory");module.exports=factory(isValidElement)},{"./ReactElement":315,"prop-types/factory":170}],321:[function(require,module,exports){arguments[4][247][0].apply(exports,arguments)},{dup:247}],322:[function(require,module,exports){"use strict";module.exports="15.7.0"},{}],323:[function(require,module,exports){(function(process){(function(){"use strict";var canDefineProperty=false;if(process.env.NODE_ENV!=="production"){try{Object.defineProperty({},"x",{get:function(){}});canDefineProperty=true}catch(x){}}module.exports=canDefineProperty}).call(this)}).call(this,require("_process"))},{_process:25}],324:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactPropTypesSecret=require("./ReactPropTypesSecret");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("./ReactComponentTreeHook")}var loggedTypeFailures={};function checkReactTypeSpec(typeSpecs,values,location,componentName,element,debugID){for(var typeSpecName in typeSpecs){if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{!(typeof typeSpecs[typeSpecName]==="function")?process.env.NODE_ENV!=="production"?invariant(false,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):_prodInvariant("84",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):void 0;error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}process.env.NODE_ENV!=="production"?warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName,typeof error):void 0;if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var componentStackInfo="";if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("./ReactComponentTreeHook")}if(debugID!==null){componentStackInfo=ReactComponentTreeHook.getStackAddendumByID(debugID)}else if(element!==null){componentStackInfo=ReactComponentTreeHook.getCurrentStackAddendum(element)}}process.env.NODE_ENV!=="production"?warning(false,"Failed %s type: %s%s",location,error.message,componentStackInfo):void 0}}}}module.exports=checkReactTypeSpec}).call(this)}).call(this,require("_process"))},{"./ReactComponentTreeHook":312,"./ReactPropTypeLocationNames":319,"./ReactPropTypesSecret":321,"./reactProdInvariant":330,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161}],325:[function(require,module,exports){"use strict";var _require=require("./ReactBaseClasses"),Component=_require.Component;var _require2=require("./ReactElement"),isValidElement=_require2.isValidElement;var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue");var factory=require("create-react-class/factory");module.exports=factory(Component,isValidElement,ReactNoopUpdateQueue)},{"./ReactBaseClasses":310,"./ReactElement":315,"./ReactNoopUpdateQueue":318,"create-react-class/factory":78}],326:[function(require,module,exports){arguments[4][288][0].apply(exports,arguments)},{dup:288}],327:[function(require,module,exports){"use strict";var nextDebugID=1;function getNextDebugID(){return nextDebugID++}module.exports=getNextDebugID},{}],328:[function(require,module,exports){(function(process){(function(){"use strict";var lowPriorityWarning=function(){};if(process.env.NODE_ENV!=="production"){var printWarning=function(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var argIndex=0;var message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});if(typeof console!=="undefined"){console.warn(message)}try{throw new Error(message)}catch(x){}};lowPriorityWarning=function(condition,format){if(format===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}printWarning.apply(undefined,[format].concat(args))}}}module.exports=lowPriorityWarning}).call(this)}).call(this,require("_process"))},{_process:25}],329:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactElement=require("./ReactElement");var invariant=require("fbjs/lib/invariant");function onlyChild(children){!ReactElement.isValidElement(children)?process.env.NODE_ENV!=="production"?invariant(false,"React.Children.only expected to receive a single React element child."):_prodInvariant("143"):void 0;return children}module.exports=onlyChild}).call(this)}).call(this,require("_process"))},{"./ReactElement":315,"./reactProdInvariant":330,_process:25,"fbjs/lib/invariant":154}],330:[function(require,module,exports){arguments[4][297][0].apply(exports,arguments)},{dup:297}],331:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("./ReactCurrentOwner");var REACT_ELEMENT_TYPE=require("./ReactElementSymbol");var getIteratorFn=require("./getIteratorFn");var invariant=require("fbjs/lib/invariant");var KeyEscapeUtils=require("./KeyEscapeUtils");var warning=require("fbjs/lib/warning");var SEPARATOR=".";var SUBSEPARATOR=":";var didWarnAboutMaps=false;function getComponentKey(component,index){if(component&&typeof component==="object"&&component.key!=null){return KeyEscapeUtils.escape(component.key)}return index.toString(36)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if(type==="undefined"||type==="boolean"){children=null}if(children===null||type==="string"||type==="number"||type==="object"&&children.$$typeof===REACT_ELEMENT_TYPE){callback(traverseContext,children,nameSoFar===""?SEPARATOR+getComponentKey(children,0):nameSoFar);return 1}var child;var nextName;var subtreeCount=0;var nextNamePrefix=nameSoFar===""?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children)){for(var i=0;i<children.length;i++){child=children[i];nextName=nextNamePrefix+getComponentKey(child,i);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var iterator=iteratorFn.call(children);var step;if(iteratorFn!==children.entries){var ii=0;while(!(step=iterator.next()).done){child=step.value;nextName=nextNamePrefix+getComponentKey(child,ii++);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{if(process.env.NODE_ENV!=="production"){var mapsAsChildrenAddendum="";if(ReactCurrentOwner.current){var mapsAsChildrenOwnerName=ReactCurrentOwner.current.getName();if(mapsAsChildrenOwnerName){mapsAsChildrenAddendum=" Check the render method of `"+mapsAsChildrenOwnerName+"`."}}process.env.NODE_ENV!=="production"?warning(didWarnAboutMaps,"Using Maps as children is not yet fully supported. It is an "+"experimental feature that might be removed. Convert it to a "+"sequence / iterable of keyed ReactElements instead.%s",mapsAsChildrenAddendum):void 0;didWarnAboutMaps=true}while(!(step=iterator.next()).done){var entry=step.value;if(entry){child=entry[1];nextName=nextNamePrefix+KeyEscapeUtils.escape(entry[0])+SUBSEPARATOR+getComponentKey(child,0);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}}}else if(type==="object"){var addendum="";if(process.env.NODE_ENV!=="production"){addendum=" If you meant to render a collection of children, use an array "+"instead or wrap the object using createFragment(object) from the "+"React add-ons.";if(children._isReactElement){addendum=" It looks like you're using an element created by a different "+"version of React. Make sure to use only one copy of React."}if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name){addendum+=" Check the render method of `"+name+"`."}}}var childrenString=String(children);!false?process.env.NODE_ENV!=="production"?invariant(false,"Objects are not valid as a React child (found: %s).%s",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):_prodInvariant("31",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):void 0}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){if(children==null){return 0}return traverseAllChildrenImpl(children,"",callback,traverseContext)}module.exports=traverseAllChildren}).call(this)}).call(this,require("_process"))},{"./KeyEscapeUtils":307,"./ReactCurrentOwner":313,"./ReactElementSymbol":316,"./getIteratorFn":326,"./reactProdInvariant":330,_process:25,"fbjs/lib/invariant":154,"fbjs/lib/warning":161}],332:[function(require,module,exports){"use strict";module.exports=require("./lib/React")},{"./lib/React":309}],333:[function(require,module,exports){var alea=require("./lib/alea");var xor128=require("./lib/xor128");var xorwow=require("./lib/xorwow");var xorshift7=require("./lib/xorshift7");var xor4096=require("./lib/xor4096");var tychei=require("./lib/tychei");var sr=require("./seedrandom");sr.alea=alea;sr.xor128=xor128;sr.xorwow=xorwow;sr.xorshift7=xorshift7;sr.xor4096=xor4096;sr.tychei=tychei;module.exports=sr},{"./lib/alea":334,"./lib/tychei":335,"./lib/xor128":336,"./lib/xor4096":337,"./lib/xorshift7":338,"./lib/xorwow":339,"./seedrandom":340}],334:[function(require,module,exports){(function(global,module,define){function Alea(seed){var me=this,mash=Mash();me.next=function(){var t=2091639*me.s0+me.c*2.3283064365386963e-10;me.s0=me.s1;me.s1=me.s2;return me.s2=t-(me.c=t|0)};me.c=1;me.s0=mash(" ");me.s1=mash(" ");me.s2=mash(" ");me.s0-=mash(seed);if(me.s0<0){me.s0+=1}me.s1-=mash(seed);if(me.s1<0){me.s1+=1}me.s2-=mash(seed);if(me.s2<0){me.s2+=1}mash=null}function copy(f,t){t.c=f.c;t.s0=f.s0;t.s1=f.s1;t.s2=f.s2;return t}function impl(seed,opts){var xg=new Alea(seed),state=opts&&opts.state,prng=xg.next;prng.int32=function(){return xg.next()*4294967296|0};prng.double=function(){return prng()+(prng()*2097152|0)*11102230246251565e-32};prng.quick=prng;if(state){if(typeof state=="object")copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}function Mash(){var n=4022871197;var mash=function(data){data=data.toString();for(var i=0;i<data.length;i++){n+=data.charCodeAt(i);var h=.02519603282416938*n;n=h>>>0;h-=n;h*=n;n=h>>>0;h-=n;n+=h*4294967296}return(n>>>0)*2.3283064365386963e-10};return mash}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.alea=impl}})(this,typeof module=="object"&&module,typeof define=="function"&&define)},{}],335:[function(require,module,exports){(function(global,module,define){function XorGen(seed){var me=this,strseed="";me.next=function(){var b=me.b,c=me.c,d=me.d,a=me.a;b=b<<25^b>>>7^c;c=c-d|0;d=d<<24^d>>>8^a;a=a-b|0;me.b=b=b<<20^b>>>12^c;me.c=c=c-d|0;me.d=d<<16^c>>>16^a;return me.a=a-b|0};me.a=0;me.b=0;me.c=2654435769|0;me.d=1367130551;if(seed===Math.floor(seed)){me.a=seed/4294967296|0;me.b=seed|0}else{strseed+=seed}for(var k=0;k<strseed.length+20;k++){me.b^=strseed.charCodeAt(k)|0;me.next()}}function copy(f,t){t.a=f.a;t.b=f.b;t.c=f.c;t.d=f.d;return t}function impl(seed,opts){var xg=new XorGen(seed),state=opts&&opts.state,prng=function(){return(xg.next()>>>0)/4294967296};prng.double=function(){do{var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21)}while(result===0);return result};prng.int32=xg.next;prng.quick=prng;if(state){if(typeof state=="object")copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.tychei=impl}})(this,typeof module=="object"&&module,typeof define=="function"&&define)},{}],336:[function(require,module,exports){(function(global,module,define){function XorGen(seed){var me=this,strseed="";me.x=0;me.y=0;me.z=0;me.w=0;me.next=function(){var t=me.x^me.x<<11;me.x=me.y;me.y=me.z;me.z=me.w;return me.w^=me.w>>>19^t^t>>>8};if(seed===(seed|0)){me.x=seed}else{strseed+=seed}for(var k=0;k<strseed.length+64;k++){me.x^=strseed.charCodeAt(k)|0;me.next()}}function copy(f,t){t.x=f.x;t.y=f.y;t.z=f.z;t.w=f.w;return t}function impl(seed,opts){var xg=new XorGen(seed),state=opts&&opts.state,prng=function(){return(xg.next()>>>0)/4294967296};prng.double=function(){do{var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21)}while(result===0);return result};prng.int32=xg.next;prng.quick=prng;if(state){if(typeof state=="object")copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.xor128=impl}})(this,typeof module=="object"&&module,typeof define=="function"&&define)},{}],337:[function(require,module,exports){(function(global,module,define){function XorGen(seed){var me=this;me.next=function(){var w=me.w,X=me.X,i=me.i,t,v;me.w=w=w+1640531527|0;v=X[i+34&127];t=X[i=i+1&127];v^=v<<13;t^=t<<17;v^=v>>>15;t^=t>>>12;v=X[i]=v^t;me.i=i;return v+(w^w>>>16)|0};function init(me,seed){var t,v,i,j,w,X=[],limit=128;if(seed===(seed|0)){v=seed;seed=null}else{seed=seed+"\0";v=0;limit=Math.max(limit,seed.length)}for(i=0,j=-32;j<limit;++j){if(seed)v^=seed.charCodeAt((j+32)%seed.length);if(j===0)w=v;v^=v<<10;v^=v>>>15;v^=v<<4;v^=v>>>13;if(j>=0){w=w+1640531527|0;t=X[j&127]^=v+w;i=0==t?i+1:0}}if(i>=128){X[(seed&&seed.length||0)&127]=-1}i=127;for(j=4*128;j>0;--j){v=X[i+34&127];t=X[i=i+1&127];v^=v<<13;t^=t<<17;v^=v>>>15;t^=t>>>12;X[i]=v^t}me.w=w;me.X=X;me.i=i}init(me,seed)}function copy(f,t){t.i=f.i;t.w=f.w;t.X=f.X.slice();return t}function impl(seed,opts){if(seed==null)seed=+new Date;var xg=new XorGen(seed),state=opts&&opts.state,prng=function(){return(xg.next()>>>0)/4294967296};prng.double=function(){do{var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21)}while(result===0);return result};prng.int32=xg.next;prng.quick=prng;if(state){if(state.X)copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.xor4096=impl}})(this,typeof module=="object"&&module,typeof define=="function"&&define)},{}],338:[function(require,module,exports){(function(global,module,define){function XorGen(seed){var me=this;me.next=function(){var X=me.x,i=me.i,t,v,w;t=X[i];t^=t>>>7;v=t^t<<24;t=X[i+1&7];v^=t^t>>>10;t=X[i+3&7];v^=t^t>>>3;t=X[i+4&7];v^=t^t<<7;t=X[i+7&7];t=t^t<<13;v^=t^t<<9;X[i]=v;me.i=i+1&7;return v};function init(me,seed){var j,w,X=[];if(seed===(seed|0)){w=X[0]=seed}else{seed=""+seed;for(j=0;j<seed.length;++j){X[j&7]=X[j&7]<<15^seed.charCodeAt(j)+X[j+1&7]<<13}}while(X.length<8)X.push(0);for(j=0;j<8&&X[j]===0;++j);if(j==8)w=X[7]=-1;else w=X[j];me.x=X;me.i=0;for(j=256;j>0;--j){me.next()}}init(me,seed)}function copy(f,t){t.x=f.x.slice();t.i=f.i;return t}function impl(seed,opts){if(seed==null)seed=+new Date;var xg=new XorGen(seed),state=opts&&opts.state,prng=function(){return(xg.next()>>>0)/4294967296};prng.double=function(){do{var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21)}while(result===0);return result};prng.int32=xg.next;prng.quick=prng;if(state){if(state.x)copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.xorshift7=impl}})(this,typeof module=="object"&&module,typeof define=="function"&&define)},{}],339:[function(require,module,exports){(function(global,module,define){function XorGen(seed){var me=this,strseed="";me.next=function(){var t=me.x^me.x>>>2;me.x=me.y;me.y=me.z;me.z=me.w;me.w=me.v;return(me.d=me.d+362437|0)+(me.v=me.v^me.v<<4^(t^t<<1))|0};me.x=0;me.y=0;me.z=0;me.w=0;me.v=0;if(seed===(seed|0)){me.x=seed}else{strseed+=seed}for(var k=0;k<strseed.length+64;k++){me.x^=strseed.charCodeAt(k)|0;if(k==strseed.length){me.d=me.x<<10^me.x>>>4}me.next()}}function copy(f,t){t.x=f.x;t.y=f.y;t.z=f.z;t.w=f.w;t.v=f.v;t.d=f.d;return t}function impl(seed,opts){var xg=new XorGen(seed),state=opts&&opts.state,prng=function(){return(xg.next()>>>0)/4294967296};prng.double=function(){do{var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21)}while(result===0);return result};prng.int32=xg.next;prng.quick=prng;if(state){if(typeof state=="object")copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.xorwow=impl}})(this,typeof module=="object"&&module,typeof define=="function"&&define)},{}],340:[function(require,module,exports){(function(pool,math){var global=this,width=256,chunks=6,digits=52,rngname="random",startdenom=math.pow(width,chunks),significance=math.pow(2,digits),overflow=significance*2,mask=width-1,nodecrypto;function seedrandom(seed,options,callback){var key=[];options=options==true?{entropy:true}:options||{};var shortseed=mixkey(flatten(options.entropy?[seed,tostring(pool)]:seed==null?autoseed():seed,3),key);var arc4=new ARC4(key);var prng=function(){var n=arc4.g(chunks),d=startdenom,x=0;while(n<significance){n=(n+x)*width;d*=width;x=arc4.g(1)}while(n>=overflow){n/=2;d/=2;x>>>=1}return(n+x)/d};prng.int32=function(){return arc4.g(4)|0};prng.quick=function(){return arc4.g(4)/4294967296};prng.double=prng;mixkey(tostring(arc4.S),pool);return(options.pass||callback||function(prng,seed,is_math_call,state){if(state){if(state.S){copy(state,arc4)}prng.state=function(){return copy(arc4,{})}}if(is_math_call){math[rngname]=prng;return seed}else return prng})(prng,shortseed,"global"in options?options.global:this==math,options.state)}math["seed"+rngname]=seedrandom;function ARC4(key){var t,keylen=key.length,me=this,i=0,j=me.i=me.j=0,s=me.S=[];if(!keylen){key=[keylen++]}while(i<width){s[i]=i++}for(i=0;i<width;i++){s[i]=s[j=mask&j+key[i%keylen]+(t=s[i])];s[j]=t}(me.g=function(count){var t,r=0,i=me.i,j=me.j,s=me.S;while(count--){t=s[i=mask&i+1];r=r*width+s[mask&(s[i]=s[j=mask&j+t])+(s[j]=t)]}me.i=i;me.j=j;return r})(width)}function copy(f,t){t.i=f.i;t.j=f.j;t.S=f.S.slice();return t}function flatten(obj,depth){var result=[],typ=typeof obj,prop;if(depth&&typ=="object"){for(prop in obj){try{result.push(flatten(obj[prop],depth-1))}catch(e){}}}return result.length?result:typ=="string"?obj:obj+"\0"}function mixkey(seed,key){var stringseed=seed+"",smear,j=0;while(j<stringseed.length){key[mask&j]=mask&(smear^=key[mask&j]*19)+stringseed.charCodeAt(j++)}return tostring(key)}function autoseed(){try{var out;if(nodecrypto&&(out=nodecrypto.randomBytes)){out=out(width)}else{out=new Uint8Array(width);(global.crypto||global.msCrypto).getRandomValues(out)}return tostring(out)}catch(e){var browser=global.navigator,plugins=browser&&browser.plugins;return[+new Date,global,plugins,global.screen,tostring(pool)]}}function tostring(a){return String.fromCharCode.apply(0,a)}mixkey(math.random(),pool);if(typeof module=="object"&&module.exports){module.exports=seedrandom;try{nodecrypto=require("crypto")}catch(ex){}}else if(typeof define=="function"&&define.amd){define(function(){return seedrandom})}})([],Math)},{crypto:8}],341:[function(require,module,exports){var util=require("./util");var has=Object.prototype.hasOwnProperty;var hasNativeMap=typeof Map!=="undefined";function ArraySet(){this._array=[];this._set=hasNativeMap?new Map:Object.create(null)}ArraySet.fromArray=function ArraySet_fromArray(aArray,aAllowDuplicates){var set=new ArraySet;for(var i=0,len=aArray.length;i<len;i++){set.add(aArray[i],aAllowDuplicates)}return set};ArraySet.prototype.size=function ArraySet_size(){return hasNativeMap?this._set.size:Object.getOwnPropertyNames(this._set).length};ArraySet.prototype.add=function ArraySet_add(aStr,aAllowDuplicates){var sStr=hasNativeMap?aStr:util.toSetString(aStr);var isDuplicate=hasNativeMap?this.has(aStr):has.call(this._set,sStr);var idx=this._array.length;if(!isDuplicate||aAllowDuplicates){this._array.push(aStr)}if(!isDuplicate){if(hasNativeMap){this._set.set(aStr,idx)}else{this._set[sStr]=idx}}};ArraySet.prototype.has=function ArraySet_has(aStr){if(hasNativeMap){return this._set.has(aStr)}else{var sStr=util.toSetString(aStr);return has.call(this._set,sStr)}};ArraySet.prototype.indexOf=function ArraySet_indexOf(aStr){if(hasNativeMap){var idx=this._set.get(aStr);if(idx>=0){return idx}}else{var sStr=util.toSetString(aStr);if(has.call(this._set,sStr)){return this._set[sStr]}}throw new Error('"'+aStr+'" is not in the set.')};ArraySet.prototype.at=function ArraySet_at(aIdx){if(aIdx>=0&&aIdx<this._array.length){return this._array[aIdx]}throw new Error("No element indexed by "+aIdx)};ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()};exports.ArraySet=ArraySet},{"./util":350}],342:[function(require,module,exports){var base64=require("./base64");var VLQ_BASE_SHIFT=5;var VLQ_BASE=1<<VLQ_BASE_SHIFT;var VLQ_BASE_MASK=VLQ_BASE-1;var VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(aValue){return aValue<0?(-aValue<<1)+1:(aValue<<1)+0}function fromVLQSigned(aValue){var isNegative=(aValue&1)===1;var shifted=aValue>>1;return isNegative?-shifted:shifted}exports.encode=function base64VLQ_encode(aValue){var encoded="";var digit;var vlq=toVLQSigned(aValue);do{digit=vlq&VLQ_BASE_MASK;vlq>>>=VLQ_BASE_SHIFT;if(vlq>0){digit|=VLQ_CONTINUATION_BIT}encoded+=base64.encode(digit)}while(vlq>0);return encoded};exports.decode=function base64VLQ_decode(aStr,aIndex,aOutParam){var strLen=aStr.length;var result=0;var shift=0;var continuation,digit;do{if(aIndex>=strLen){throw new Error("Expected more digits in base 64 VLQ value.")}digit=base64.decode(aStr.charCodeAt(aIndex++));if(digit===-1){throw new Error("Invalid base64 digit: "+aStr.charAt(aIndex-1))}continuation=!!(digit&VLQ_CONTINUATION_BIT);digit&=VLQ_BASE_MASK;result=result+(digit<<shift);shift+=VLQ_BASE_SHIFT}while(continuation);aOutParam.value=fromVLQSigned(result);aOutParam.rest=aIndex}},{"./base64":343}],343:[function(require,module,exports){var intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");exports.encode=function(number){if(0<=number&&number<intToCharMap.length){return intToCharMap[number]}throw new TypeError("Must be between 0 and 63: "+number)};exports.decode=function(charCode){var bigA=65;var bigZ=90;var littleA=97;var littleZ=122;var zero=48;var nine=57;var plus=43;var slash=47;var littleOffset=26;var numberOffset=52;if(bigA<=charCode&&charCode<=bigZ){return charCode-bigA}if(littleA<=charCode&&charCode<=littleZ){return charCode-littleA+littleOffset}if(zero<=charCode&&charCode<=nine){return charCode-zero+numberOffset}if(charCode==plus){return 62}if(charCode==slash){return 63}return-1}},{}],344:[function(require,module,exports){exports.GREATEST_LOWER_BOUND=1;exports.LEAST_UPPER_BOUND=2;function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare,aBias){var mid=Math.floor((aHigh-aLow)/2)+aLow;var cmp=aCompare(aNeedle,aHaystack[mid],true);if(cmp===0){return mid}else if(cmp>0){if(aHigh-mid>1){return recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare,aBias)}if(aBias==exports.LEAST_UPPER_BOUND){return aHigh<aHaystack.length?aHigh:-1}else{return mid}}else{if(mid-aLow>1){return recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare,aBias)}if(aBias==exports.LEAST_UPPER_BOUND){return mid}else{return aLow<0?-1:aLow}}}exports.search=function search(aNeedle,aHaystack,aCompare,aBias){if(aHaystack.length===0){return-1}var index=recursiveSearch(-1,aHaystack.length,aNeedle,aHaystack,aCompare,aBias||exports.GREATEST_LOWER_BOUND);if(index<0){return-1}while(index-1>=0){if(aCompare(aHaystack[index],aHaystack[index-1],true)!==0){break}--index}return index}},{}],345:[function(require,module,exports){var util=require("./util");function generatedPositionAfter(mappingA,mappingB){var lineA=mappingA.generatedLine;var lineB=mappingB.generatedLine;var columnA=mappingA.generatedColumn;var columnB=mappingB.generatedColumn;return lineB>lineA||lineB==lineA&&columnB>=columnA||util.compareByGeneratedPositionsInflated(mappingA,mappingB)<=0}function MappingList(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function MappingList_forEach(aCallback,aThisArg){this._array.forEach(aCallback,aThisArg)};MappingList.prototype.add=function MappingList_add(aMapping){if(generatedPositionAfter(this._last,aMapping)){this._last=aMapping;this._array.push(aMapping)}else{this._sorted=false;this._array.push(aMapping)}};MappingList.prototype.toArray=function MappingList_toArray(){if(!this._sorted){this._array.sort(util.compareByGeneratedPositionsInflated);this._sorted=true}return this._array};exports.MappingList=MappingList},{"./util":350}],346:[function(require,module,exports){function swap(ary,x,y){var temp=ary[x];ary[x]=ary[y];ary[y]=temp}function randomIntInRange(low,high){return Math.round(low+Math.random()*(high-low))}function doQuickSort(ary,comparator,p,r){if(p<r){var pivotIndex=randomIntInRange(p,r);var i=p-1;swap(ary,pivotIndex,r);var pivot=ary[r];for(var j=p;j<r;j++){if(comparator(ary[j],pivot)<=0){i+=1;swap(ary,i,j)}}swap(ary,i+1,j);var q=i+1;doQuickSort(ary,comparator,p,q-1);doQuickSort(ary,comparator,q+1,r)}}exports.quickSort=function(ary,comparator){doQuickSort(ary,comparator,0,ary.length-1)}},{}],347:[function(require,module,exports){var util=require("./util");var binarySearch=require("./binary-search");var ArraySet=require("./array-set").ArraySet;var base64VLQ=require("./base64-vlq");var quickSort=require("./quick-sort").quickSort;function SourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}return sourceMap.sections!=null?new IndexedSourceMapConsumer(sourceMap):new BasicSourceMapConsumer(sourceMap)}SourceMapConsumer.fromSourceMap=function(aSourceMap){return BasicSourceMapConsumer.fromSourceMap(aSourceMap)};SourceMapConsumer.prototype._version=3;SourceMapConsumer.prototype.__generatedMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});SourceMapConsumer.prototype.__originalMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});SourceMapConsumer.prototype._charIsMappingSeparator=function SourceMapConsumer_charIsMappingSeparator(aStr,index){var c=aStr.charAt(index);return c===";"||c===","};SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){throw new Error("Subclasses must implement _parseMappings")};SourceMapConsumer.GENERATED_ORDER=1;SourceMapConsumer.ORIGINAL_ORDER=2;SourceMapConsumer.GREATEST_LOWER_BOUND=1;SourceMapConsumer.LEAST_UPPER_BOUND=2;SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(aCallback,aContext,aOrder){var context=aContext||null;var order=aOrder||SourceMapConsumer.GENERATED_ORDER;var mappings;switch(order){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=mapping.source===null?null:this._sources.at(mapping.source);if(source!=null&&sourceRoot!=null){source=util.join(sourceRoot,source)}return{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:mapping.name===null?null:this._names.at(mapping.name)}},this).forEach(aCallback,context)};SourceMapConsumer.prototype.allGeneratedPositionsFor=function SourceMapConsumer_allGeneratedPositionsFor(aArgs){var line=util.getArg(aArgs,"line");var needle={source:util.getArg(aArgs,"source"),originalLine:line,originalColumn:util.getArg(aArgs,"column",0)};if(this.sourceRoot!=null){needle.source=util.relative(this.sourceRoot,needle.source)}if(!this._sources.has(needle.source)){return[]}needle.source=this._sources.indexOf(needle.source);var mappings=[];var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,binarySearch.LEAST_UPPER_BOUND);if(index>=0){var mapping=this._originalMappings[index];if(aArgs.column===undefined){var originalLine=mapping.originalLine;while(mapping&&mapping.originalLine===originalLine){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[++index]}}else{var originalColumn=mapping.originalColumn;while(mapping&&mapping.originalLine===line&&mapping.originalColumn==originalColumn){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[++index]}}}return mappings};exports.SourceMapConsumer=SourceMapConsumer;function BasicSourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}var version=util.getArg(sourceMap,"version");var sources=util.getArg(sourceMap,"sources");var names=util.getArg(sourceMap,"names",[]);var sourceRoot=util.getArg(sourceMap,"sourceRoot",null);var sourcesContent=util.getArg(sourceMap,"sourcesContent",null);var mappings=util.getArg(sourceMap,"mappings");var file=util.getArg(sourceMap,"file",null);if(version!=this._version){throw new Error("Unsupported version: "+version)}sources=sources.map(String).map(util.normalize).map(function(source){return sourceRoot&&util.isAbsolute(sourceRoot)&&util.isAbsolute(source)?util.relative(sourceRoot,source):source});this._names=ArraySet.fromArray(names.map(String),true);this._sources=ArraySet.fromArray(sources,true);this.sourceRoot=sourceRoot;this.sourcesContent=sourcesContent;this._mappings=mappings;this.file=file}BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype);BasicSourceMapConsumer.prototype.consumer=SourceMapConsumer;BasicSourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(aSourceMap){var smc=Object.create(BasicSourceMapConsumer.prototype);var names=smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),true);var sources=smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),true);smc.sourceRoot=aSourceMap._sourceRoot;smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot);smc.file=aSourceMap._file;var generatedMappings=aSourceMap._mappings.toArray().slice();var destGeneratedMappings=smc.__generatedMappings=[];var destOriginalMappings=smc.__originalMappings=[];for(var i=0,length=generatedMappings.length;i<length;i++){var srcMapping=generatedMappings[i];var destMapping=new Mapping;destMapping.generatedLine=srcMapping.generatedLine;destMapping.generatedColumn=srcMapping.generatedColumn;if(srcMapping.source){destMapping.source=sources.indexOf(srcMapping.source);destMapping.originalLine=srcMapping.originalLine;destMapping.originalColumn=srcMapping.originalColumn;if(srcMapping.name){destMapping.name=names.indexOf(srcMapping.name)}destOriginalMappings.push(destMapping)}destGeneratedMappings.push(destMapping)}quickSort(smc.__originalMappings,util.compareByOriginalPositions);return smc};BasicSourceMapConsumer.prototype._version=3;Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._sources.toArray().map(function(s){return this.sourceRoot!=null?util.join(this.sourceRoot,s):s},this)}});function Mapping(){this.generatedLine=0;this.generatedColumn=0;this.source=null;this.originalLine=null;this.originalColumn=null;this.name=null}BasicSourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){var generatedLine=1;var previousGeneratedColumn=0;var previousOriginalLine=0;var previousOriginalColumn=0;var previousSource=0;var previousName=0;var length=aStr.length;var index=0;var cachedSegments={};var temp={};var originalMappings=[];var generatedMappings=[];var mapping,str,segment,end,value;while(index<length){if(aStr.charAt(index)===";"){generatedLine++;index++;previousGeneratedColumn=0}else if(aStr.charAt(index)===","){index++}else{mapping=new Mapping;mapping.generatedLine=generatedLine;for(end=index;end<length;end++){if(this._charIsMappingSeparator(aStr,end)){break}}str=aStr.slice(index,end);segment=cachedSegments[str];if(segment){index+=str.length}else{segment=[];while(index<end){base64VLQ.decode(aStr,index,temp);value=temp.value;index=temp.rest;segment.push(value)}if(segment.length===2){throw new Error("Found a source, but no line and column")}if(segment.length===3){throw new Error("Found a source and line, but no column")}cachedSegments[str]=segment}mapping.generatedColumn=previousGeneratedColumn+segment[0];previousGeneratedColumn=mapping.generatedColumn;if(segment.length>1){mapping.source=previousSource+segment[1];previousSource+=segment[1];mapping.originalLine=previousOriginalLine+segment[2];previousOriginalLine=mapping.originalLine;mapping.originalLine+=1;mapping.originalColumn=previousOriginalColumn+segment[3];previousOriginalColumn=mapping.originalColumn;if(segment.length>4){mapping.name=previousName+segment[4];previousName+=segment[4]}}generatedMappings.push(mapping);if(typeof mapping.originalLine==="number"){originalMappings.push(mapping)}}}quickSort(generatedMappings,util.compareByGeneratedPositionsDeflated);this.__generatedMappings=generatedMappings;quickSort(originalMappings,util.compareByOriginalPositions);this.__originalMappings=originalMappings};BasicSourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(aNeedle,aMappings,aLineName,aColumnName,aComparator,aBias){if(aNeedle[aLineName]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName])}if(aNeedle[aColumnName]<0){throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName])}return binarySearch.search(aNeedle,aMappings,aComparator,aBias)};BasicSourceMapConsumer.prototype.computeColumnSpans=function SourceMapConsumer_computeColumnSpans(){for(var index=0;index<this._generatedMappings.length;++index){var mapping=this._generatedMappings[index];if(index+1<this._generatedMappings.length){var nextMapping=this._generatedMappings[index+1];if(mapping.generatedLine===nextMapping.generatedLine){mapping.lastGeneratedColumn=nextMapping.generatedColumn-1;continue}}mapping.lastGeneratedColumn=Infinity}};BasicSourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositionsDeflated,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(index>=0){var mapping=this._generatedMappings[index];if(mapping.generatedLine===needle.generatedLine){var source=util.getArg(mapping,"source",null);if(source!==null){source=this._sources.at(source);if(this.sourceRoot!=null){source=util.join(this.sourceRoot,source)}}var name=util.getArg(mapping,"name",null);if(name!==null){name=this._names.at(name)}return{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:name}}}return{source:null,line:null,column:null,name:null}};BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function BasicSourceMapConsumer_hasContentsOfAllSources(){if(!this.sourcesContent){return false}return this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(sc){return sc==null})};BasicSourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(aSource,nullOnMissing){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){aSource=util.relative(this.sourceRoot,aSource)}if(this._sources.has(aSource)){return this.sourcesContent[this._sources.indexOf(aSource)]}var url;if(this.sourceRoot!=null&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=aSource.replace(/^file:\/\//,"");if(url.scheme=="file"&&this._sources.has(fileUriAbsPath)){return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]}if((!url.path||url.path=="/")&&this._sources.has("/"+aSource)){return this.sourcesContent[this._sources.indexOf("/"+aSource)]}}if(nullOnMissing){return null}else{throw new Error('"'+aSource+'" is not in the SourceMap.')}};BasicSourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(aArgs){var source=util.getArg(aArgs,"source");if(this.sourceRoot!=null){source=util.relative(this.sourceRoot,source)}if(!this._sources.has(source)){return{line:null,column:null,lastColumn:null}}source=this._sources.indexOf(source);var needle={source:source,originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(index>=0){var mapping=this._originalMappings[index];if(mapping.source===needle.source){return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}};exports.BasicSourceMapConsumer=BasicSourceMapConsumer;function IndexedSourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}var version=util.getArg(sourceMap,"version");var sections=util.getArg(sourceMap,"sections");if(version!=this._version){throw new Error("Unsupported version: "+version)}this._sources=new ArraySet;this._names=new ArraySet;var lastOffset={line:-1,column:0};this._sections=sections.map(function(s){if(s.url){throw new Error("Support for url field in sections not implemented.")}var offset=util.getArg(s,"offset");var offsetLine=util.getArg(offset,"line");var offsetColumn=util.getArg(offset,"column");if(offsetLine<lastOffset.line||offsetLine===lastOffset.line&&offsetColumn<lastOffset.column){throw new Error("Section offsets must be ordered and non-overlapping.")}lastOffset=offset;return{generatedOffset:{generatedLine:offsetLine+1,generatedColumn:offsetColumn+1},consumer:new SourceMapConsumer(util.getArg(s,"map"))}})}IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype);IndexedSourceMapConsumer.prototype.constructor=SourceMapConsumer;IndexedSourceMapConsumer.prototype._version=3;Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){var sources=[];for(var i=0;i<this._sections.length;i++){for(var j=0;j<this._sections[i].consumer.sources.length;j++){sources.push(this._sections[i].consumer.sources[j])}}return sources}});IndexedSourceMapConsumer.prototype.originalPositionFor=function IndexedSourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var sectionIndex=binarySearch.search(needle,this._sections,function(needle,section){var cmp=needle.generatedLine-section.generatedOffset.generatedLine;if(cmp){return cmp}return needle.generatedColumn-section.generatedOffset.generatedColumn});var section=this._sections[sectionIndex];if(!section){return{source:null,line:null,column:null,name:null}}return section.consumer.originalPositionFor({line:needle.generatedLine-(section.generatedOffset.generatedLine-1),column:needle.generatedColumn-(section.generatedOffset.generatedLine===needle.generatedLine?section.generatedOffset.generatedColumn-1:0),bias:aArgs.bias})};IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function IndexedSourceMapConsumer_hasContentsOfAllSources(){return this._sections.every(function(s){return s.consumer.hasContentsOfAllSources()})};IndexedSourceMapConsumer.prototype.sourceContentFor=function IndexedSourceMapConsumer_sourceContentFor(aSource,nullOnMissing){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];var content=section.consumer.sourceContentFor(aSource,true);if(content){return content}}if(nullOnMissing){return null}else{throw new Error('"'+aSource+'" is not in the SourceMap.')}};IndexedSourceMapConsumer.prototype.generatedPositionFor=function IndexedSourceMapConsumer_generatedPositionFor(aArgs){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];if(section.consumer.sources.indexOf(util.getArg(aArgs,"source"))===-1){continue}var generatedPosition=section.consumer.generatedPositionFor(aArgs);if(generatedPosition){var ret={line:generatedPosition.line+(section.generatedOffset.generatedLine-1),column:generatedPosition.column+(section.generatedOffset.generatedLine===generatedPosition.line?section.generatedOffset.generatedColumn-1:0)};return ret}}return{line:null,column:null}};IndexedSourceMapConsumer.prototype._parseMappings=function IndexedSourceMapConsumer_parseMappings(aStr,aSourceRoot){this.__generatedMappings=[];this.__originalMappings=[];for(var i=0;i<this._sections.length;i++){var section=this._sections[i];var sectionMappings=section.consumer._generatedMappings;for(var j=0;j<sectionMappings.length;j++){var mapping=sectionMappings[j];var source=section.consumer._sources.at(mapping.source);if(section.consumer.sourceRoot!==null){source=util.join(section.consumer.sourceRoot,source)}this._sources.add(source);source=this._sources.indexOf(source);var name=section.consumer._names.at(mapping.name);this._names.add(name);name=this._names.indexOf(name);var adjustedMapping={source:source,generatedLine:mapping.generatedLine+(section.generatedOffset.generatedLine-1),generatedColumn:mapping.generatedColumn+(section.generatedOffset.generatedLine===mapping.generatedLine?section.generatedOffset.generatedColumn-1:0),originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:name};this.__generatedMappings.push(adjustedMapping);if(typeof adjustedMapping.originalLine==="number"){this.__originalMappings.push(adjustedMapping)}}}quickSort(this.__generatedMappings,util.compareByGeneratedPositionsDeflated);quickSort(this.__originalMappings,util.compareByOriginalPositions)};exports.IndexedSourceMapConsumer=IndexedSourceMapConsumer},{"./array-set":341,"./base64-vlq":342,"./binary-search":344,"./quick-sort":346,"./util":350}],348:[function(require,module,exports){var base64VLQ=require("./base64-vlq");var util=require("./util");var ArraySet=require("./array-set").ArraySet;var MappingList=require("./mapping-list").MappingList;function SourceMapGenerator(aArgs){if(!aArgs){aArgs={}}this._file=util.getArg(aArgs,"file",null);this._sourceRoot=util.getArg(aArgs,"sourceRoot",null);this._skipValidation=util.getArg(aArgs,"skipValidation",false);this._sources=new ArraySet;this._names=new ArraySet;this._mappings=new MappingList;this._sourcesContents=null}SourceMapGenerator.prototype._version=3;SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot;var generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};if(mapping.source!=null){newMapping.source=mapping.source;if(sourceRoot!=null){newMapping.source=util.relative(sourceRoot,newMapping.source)}newMapping.original={line:mapping.originalLine,column:mapping.originalColumn};if(mapping.name!=null){newMapping.name=mapping.name}}generator.addMapping(newMapping)});aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){generator.setSourceContent(sourceFile,content)}});return generator};SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(aArgs){var generated=util.getArg(aArgs,"generated");var original=util.getArg(aArgs,"original",null);var source=util.getArg(aArgs,"source",null);var name=util.getArg(aArgs,"name",null);if(!this._skipValidation){this._validateMapping(generated,original,source,name)}if(source!=null){source=String(source);if(!this._sources.has(source)){this._sources.add(source)}}if(name!=null){name=String(name);if(!this._names.has(name)){this._names.add(name)}}this._mappings.add({generatedLine:generated.line,generatedColumn:generated.column,originalLine:original!=null&&original.line,originalColumn:original!=null&&original.column,source:source,name:name})};SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(aSourceFile,aSourceContent){var source=aSourceFile;if(this._sourceRoot!=null){source=util.relative(this._sourceRoot,source)}if(aSourceContent!=null){if(!this._sourcesContents){this._sourcesContents=Object.create(null)}this._sourcesContents[util.toSetString(source)]=aSourceContent}else if(this._sourcesContents){delete this._sourcesContents[util.toSetString(source)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(aSourceMapConsumer,aSourceFile,aSourceMapPath){var sourceFile=aSourceFile;if(aSourceFile==null){if(aSourceMapConsumer.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}sourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}var newSources=new ArraySet;var newNames=new ArraySet;this._mappings.unsortedForEach(function(mapping){if(mapping.source===sourceFile&&mapping.originalLine!=null){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});if(original.source!=null){mapping.source=original.source;if(aSourceMapPath!=null){mapping.source=util.join(aSourceMapPath,mapping.source)}if(sourceRoot!=null){mapping.source=util.relative(sourceRoot,mapping.source)}mapping.originalLine=original.line;mapping.originalColumn=original.column;if(original.name!=null){mapping.name=original.name}}}var source=mapping.source;if(source!=null&&!newSources.has(source)){newSources.add(source)}var name=mapping.name;if(name!=null&&!newNames.has(name)){newNames.add(name)}},this);this._sources=newSources;this._names=newNames;aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aSourceMapPath!=null){sourceFile=util.join(aSourceMapPath,sourceFile)}if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}this.setSourceContent(sourceFile,content)}},this)};SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(aGenerated,aOriginal,aSource,aName){if(aOriginal&&typeof aOriginal.line!=="number"&&typeof aOriginal.column!=="number"){throw new Error("original.line and original.column are not numbers -- you probably meant to omit "+"the original mapping entirely and only map the generated position. If so, pass "+"null for the original mapping instead of an object with empty or null values.")}if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName){return}else if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))}};SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){var previousGeneratedColumn=0;var previousGeneratedLine=1;var previousOriginalColumn=0;var previousOriginalLine=0;var previousName=0;var previousSource=0;var result="";var next;var mapping;var nameIdx;var sourceIdx;var mappings=this._mappings.toArray();for(var i=0,len=mappings.length;i<len;i++){mapping=mappings[i];next="";if(mapping.generatedLine!==previousGeneratedLine){previousGeneratedColumn=0;while(mapping.generatedLine!==previousGeneratedLine){next+=";";previousGeneratedLine++}}else{if(i>0){if(!util.compareByGeneratedPositionsInflated(mapping,mappings[i-1])){continue}next+=","}}next+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn);previousGeneratedColumn=mapping.generatedColumn;if(mapping.source!=null){sourceIdx=this._sources.indexOf(mapping.source);next+=base64VLQ.encode(sourceIdx-previousSource);previousSource=sourceIdx;next+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine);previousOriginalLine=mapping.originalLine-1;next+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn);previousOriginalColumn=mapping.originalColumn;if(mapping.name!=null){nameIdx=this._names.indexOf(mapping.name);next+=base64VLQ.encode(nameIdx-previousName);previousName=nameIdx}}result+=next}return result};SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents){return null}if(aSourceRoot!=null){source=util.relative(aSourceRoot,source)}var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)};SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){map.file=this._file}if(this._sourceRoot!=null){map.sourceRoot=this._sourceRoot}if(this._sourcesContents){map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)}return map};SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this.toJSON())};exports.SourceMapGenerator=SourceMapGenerator},{"./array-set":341,"./base64-vlq":342,"./mapping-list":345,"./util":350}],349:[function(require,module,exports){var SourceMapGenerator=require("./source-map-generator").SourceMapGenerator;var util=require("./util");var REGEX_NEWLINE=/(\r?\n)/;var NEWLINE_CODE=10;var isSourceNode="$$$isSourceNode$$$";function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[];this.sourceContents={};this.line=aLine==null?null:aLine;this.column=aColumn==null?null:aColumn;this.source=aSource==null?null:aSource;this.name=aName==null?null:aName;this[isSourceNode]=true;if(aChunks!=null)this.add(aChunks)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(aGeneratedCode,aSourceMapConsumer,aRelativePath){var node=new SourceNode;var remainingLines=aGeneratedCode.split(REGEX_NEWLINE);var remainingLinesIndex=0;var shiftNextLine=function(){var lineContents=getNextLine();var newLine=getNextLine()||"";return lineContents+newLine;function getNextLine(){return remainingLinesIndex<remainingLines.length?remainingLines[remainingLinesIndex++]:undefined}};var lastGeneratedLine=1,lastGeneratedColumn=0;var lastMapping=null;aSourceMapConsumer.eachMapping(function(mapping){if(lastMapping!==null){if(lastGeneratedLine<mapping.generatedLine){addMappingWithCode(lastMapping,shiftNextLine());lastGeneratedLine++;lastGeneratedColumn=0}else{var nextLine=remainingLines[remainingLinesIndex];var code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[remainingLinesIndex]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn);lastGeneratedColumn=mapping.generatedColumn;addMappingWithCode(lastMapping,code);lastMapping=mapping;return}}while(lastGeneratedLine<mapping.generatedLine){node.add(shiftNextLine());lastGeneratedLine++}if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[remainingLinesIndex];node.add(nextLine.substr(0,mapping.generatedColumn));remainingLines[remainingLinesIndex]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping},this);if(remainingLinesIndex<remainingLines.length){if(lastMapping){addMappingWithCode(lastMapping,shiftNextLine())}node.add(remainingLines.splice(remainingLinesIndex).join(""))}aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aRelativePath!=null){sourceFile=util.join(aRelativePath,sourceFile)}node.setSourceContent(sourceFile,content)}});return node;function addMappingWithCode(mapping,code){if(mapping===null||mapping.source===undefined){node.add(code)}else{var source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}};SourceNode.prototype.add=function SourceNode_add(aChunk){if(Array.isArray(aChunk)){aChunk.forEach(function(chunk){this.add(chunk)},this)}else if(aChunk[isSourceNode]||typeof aChunk==="string"){if(aChunk){this.children.push(aChunk)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.prepend=function SourceNode_prepend(aChunk){if(Array.isArray(aChunk)){for(var i=aChunk.length-1;i>=0;i--){this.prepend(aChunk[i])}}else if(aChunk[isSourceNode]||typeof aChunk==="string"){this.children.unshift(aChunk)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.walk=function SourceNode_walk(aFn){var chunk;for(var i=0,len=this.children.length;i<len;i++){chunk=this.children[i];if(chunk[isSourceNode]){chunk.walk(aFn)}else{if(chunk!==""){aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};SourceNode.prototype.join=function SourceNode_join(aSep){var newChildren;var i;var len=this.children.length;if(len>0){newChildren=[];for(i=0;i<len-1;i++){newChildren.push(this.children[i]);newChildren.push(aSep)}newChildren.push(this.children[i]);this.children=newChildren}return this};SourceNode.prototype.replaceRight=function SourceNode_replaceRight(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];if(lastChild[isSourceNode]){lastChild.replaceRight(aPattern,aReplacement)}else if(typeof lastChild==="string"){this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement)}else{this.children.push("".replace(aPattern,aReplacement))}return this};SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent};SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(aFn){for(var i=0,len=this.children.length;i<len;i++){if(this.children[i][isSourceNode]){this.children[i].walkSourceContents(aFn)}}var sources=Object.keys(this.sourceContents);for(var i=0,len=sources.length;i<len;i++){aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])}};SourceNode.prototype.toString=function SourceNode_toString(){var str="";this.walk(function(chunk){str+=chunk});return str};SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(aArgs){var generated={code:"",line:1,column:0};var map=new SourceMapGenerator(aArgs);var sourceMappingActive=false;var lastOriginalSource=null;var lastOriginalLine=null;var lastOriginalColumn=null;var lastOriginalName=null;this.walk(function(chunk,original){generated.code+=chunk;if(original.source!==null&&original.line!==null&&original.column!==null){if(lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}lastOriginalSource=original.source;lastOriginalLine=original.line;lastOriginalColumn=original.column;lastOriginalName=original.name;sourceMappingActive=true}else if(sourceMappingActive){map.addMapping({generated:{line:generated.line,column:generated.column}});lastOriginalSource=null;sourceMappingActive=false}for(var idx=0,length=chunk.length;idx<length;idx++){if(chunk.charCodeAt(idx)===NEWLINE_CODE){generated.line++;generated.column=0;if(idx+1===length){lastOriginalSource=null;sourceMappingActive=false}else if(sourceMappingActive){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}}else{generated.column++}}});this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)});return{code:generated.code,map:map}};exports.SourceNode=SourceNode},{"./source-map-generator":348,"./util":350}],350:[function(require,module,exports){function getArg(aArgs,aName,aDefaultValue){if(aName in aArgs){return aArgs[aName]}else if(arguments.length===3){return aDefaultValue}else{throw new Error('"'+aName+'" is a required argument.')}}exports.getArg=getArg;var urlRegexp=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/;var dataUrlRegexp=/^data:.+\,.+$/;function urlParse(aUrl){var match=aUrl.match(urlRegexp);if(!match){return null}return{scheme:match[1],auth:match[2],host:match[3],port:match[4],path:match[5]}}exports.urlParse=urlParse;function urlGenerate(aParsedUrl){var url="";if(aParsedUrl.scheme){url+=aParsedUrl.scheme+":"}url+="//";if(aParsedUrl.auth){url+=aParsedUrl.auth+"@"}if(aParsedUrl.host){url+=aParsedUrl.host}if(aParsedUrl.port){url+=":"+aParsedUrl.port}if(aParsedUrl.path){url+=aParsedUrl.path}return url}exports.urlGenerate=urlGenerate;function normalize(aPath){var path=aPath;var url=urlParse(aPath);if(url){if(!url.path){return aPath}path=url.path}var isAbsolute=exports.isAbsolute(path);var parts=path.split(/\/+/);for(var part,up=0,i=parts.length-1;i>=0;i--){part=parts[i];if(part==="."){parts.splice(i,1)}else if(part===".."){up++}else if(up>0){if(part===""){parts.splice(i+1,up);up=0}else{parts.splice(i,2);up--}}}path=parts.join("/");if(path===""){path=isAbsolute?"/":"."}if(url){url.path=path;return urlGenerate(url)}return path}exports.normalize=normalize;function join(aRoot,aPath){if(aRoot===""){aRoot="."}if(aPath===""){aPath="."}var aPathUrl=urlParse(aPath);var aRootUrl=urlParse(aRoot);if(aRootUrl){aRoot=aRootUrl.path||"/"}if(aPathUrl&&!aPathUrl.scheme){if(aRootUrl){aPathUrl.scheme=aRootUrl.scheme}return urlGenerate(aPathUrl)}if(aPathUrl||aPath.match(dataUrlRegexp)){return aPath}if(aRootUrl&&!aRootUrl.host&&!aRootUrl.path){aRootUrl.host=aPath;return urlGenerate(aRootUrl)}var joined=aPath.charAt(0)==="/"?aPath:normalize(aRoot.replace(/\/+$/,"")+"/"+aPath);if(aRootUrl){aRootUrl.path=joined;return urlGenerate(aRootUrl)}return joined}exports.join=join;exports.isAbsolute=function(aPath){return aPath.charAt(0)==="/"||!!aPath.match(urlRegexp)};function relative(aRoot,aPath){if(aRoot===""){aRoot="."}aRoot=aRoot.replace(/\/$/,"");var level=0;while(aPath.indexOf(aRoot+"/")!==0){var index=aRoot.lastIndexOf("/");if(index<0){return aPath}aRoot=aRoot.slice(0,index);if(aRoot.match(/^([^\/]+:\/)?\/*$/)){return aPath}++level}return Array(level+1).join("../")+aPath.substr(aRoot.length+1)}exports.relative=relative;var supportsNullProto=function(){var obj=Object.create(null);return!("__proto__"in obj)}();function identity(s){return s}function toSetString(aStr){if(isProtoString(aStr)){return"$"+aStr}return aStr}exports.toSetString=supportsNullProto?identity:toSetString;function fromSetString(aStr){if(isProtoString(aStr)){return aStr.slice(1)}return aStr}exports.fromSetString=supportsNullProto?identity:fromSetString;function isProtoString(s){if(!s){return false}var length=s.length;if(length<9){return false}if(s.charCodeAt(length-1)!==95||s.charCodeAt(length-2)!==95||s.charCodeAt(length-3)!==111||s.charCodeAt(length-4)!==116||s.charCodeAt(length-5)!==111||s.charCodeAt(length-6)!==114||s.charCodeAt(length-7)!==112||s.charCodeAt(length-8)!==95||s.charCodeAt(length-9)!==95){return false}for(var i=length-10;i>=0;i--){if(s.charCodeAt(i)!==36){return false}}return true}function compareByOriginalPositions(mappingA,mappingB,onlyCompareOriginal){var cmp=mappingA.source-mappingB.source;if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0||onlyCompareOriginal){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0){return cmp}cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}return mappingA.name-mappingB.name}exports.compareByOriginalPositions=compareByOriginalPositions;function compareByGeneratedPositionsDeflated(mappingA,mappingB,onlyCompareGenerated){var cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0||onlyCompareGenerated){return cmp}cmp=mappingA.source-mappingB.source;if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0){return cmp}return mappingA.name-mappingB.name}exports.compareByGeneratedPositionsDeflated=compareByGeneratedPositionsDeflated;function strcmp(aStr1,aStr2){if(aStr1===aStr2){return 0}if(aStr1>aStr2){return 1}return-1}function compareByGeneratedPositionsInflated(mappingA,mappingB){var cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0){return cmp}cmp=strcmp(mappingA.source,mappingB.source);if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByGeneratedPositionsInflated=compareByGeneratedPositionsInflated},{}],351:[function(require,module,exports){exports.SourceMapGenerator=require("./lib/source-map-generator").SourceMapGenerator;exports.SourceMapConsumer=require("./lib/source-map-consumer").SourceMapConsumer;exports.SourceNode=require("./lib/source-node").SourceNode},{"./lib/source-map-consumer":347,"./lib/source-map-generator":348,"./lib/source-node":349}],352:[function(require,module,exports){exports.get=function(belowFn){var oldLimit=Error.stackTraceLimit;Error.stackTraceLimit=Infinity;var dummyObject={};var v8Handler=Error.prepareStackTrace;Error.prepareStackTrace=function(dummyObject,v8StackTrace){return v8StackTrace};Error.captureStackTrace(dummyObject,belowFn||exports.get);var v8StackTrace=dummyObject.stack;Error.prepareStackTrace=v8Handler;Error.stackTraceLimit=oldLimit;return v8StackTrace};exports.parse=function(err){if(!err.stack){return[]}var self=this;var lines=err.stack.split("\n").slice(1);return lines.map(function(line){if(line.match(/^\s*[-]{4,}$/)){return self._createParsedCallSite({fileName:line,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null})}var lineMatch=line.match(/at (?:(.+)\s+)?\(?(?:(.+?):(\d+):(\d+)|([^)]+))\)?/);if(!lineMatch){return}var object=null;var method=null;var functionName=null;var typeName=null;var methodName=null;var isNative=lineMatch[5]==="native";if(lineMatch[1]){var methodMatch=lineMatch[1].match(/([^\.]+)(?:\.(.+))?/);object=methodMatch[1];method=methodMatch[2];functionName=lineMatch[1];typeName="Object"}if(method){typeName=object;methodName=method}if(method==="<anonymous>"){methodName=null;functionName=""}var properties={fileName:lineMatch[2]||null,lineNumber:parseInt(lineMatch[3],10)||null,functionName:functionName,typeName:typeName,methodName:methodName,columnNumber:parseInt(lineMatch[4],10)||null,native:isNative};return self._createParsedCallSite(properties)}).filter(function(callSite){return!!callSite})};exports._createParsedCallSite=function(properties){var methods={};for(var property in properties){var prefix="get";if(property==="native"){prefix="is"}var method=prefix+property.substr(0,1).toUpperCase()+property.substr(1);(function(property){methods[method]=function(){return properties[property]}})(property)}var callSite=Object.create(methods);for(var property in properties){callSite[property]=properties[property]}return callSite}},{}],353:[function(require,module,exports){(function(global){(function(){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define("underscore",factory):(global=global||self,function(){var current=global._;var exports=global._=factory();exports.noConflict=function(){global._=current;return exports}}())})(this,function(){var VERSION="1.12.1";var root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{};var ArrayProto=Array.prototype,ObjProto=Object.prototype;var SymbolProto=typeof Symbol!=="undefined"?Symbol.prototype:null;var push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var supportsArrayBuffer=typeof ArrayBuffer!=="undefined",supportsDataView=typeof DataView!=="undefined";var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeCreate=Object.create,nativeIsView=supportsArrayBuffer&&ArrayBuffer.isView;var _isNaN=isNaN,_isFinite=isFinite;var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString");var nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];var MAX_ARRAY_INDEX=Math.pow(2,53)-1;function restArguments(func,startIndex){startIndex=startIndex==null?func.length-1:+startIndex;return function(){var length=Math.max(arguments.length-startIndex,0),rest=Array(length),index=0;for(;index<length;index++){rest[index]=arguments[index+startIndex]}switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest);case 2:return func.call(this,arguments[0],arguments[1],rest)}var args=Array(startIndex+1);for(index=0;index<startIndex;index++){args[index]=arguments[index]}args[startIndex]=rest;return func.apply(this,args)}}function isObject(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj}function isNull(obj){return obj===null}function isUndefined(obj){return obj===void 0}function isBoolean(obj){return obj===true||obj===false||toString.call(obj)==="[object Boolean]"}function isElement(obj){return!!(obj&&obj.nodeType===1)}function tagTester(name){var tag="[object "+name+"]";return function(obj){return toString.call(obj)===tag}}var isString=tagTester("String");var isNumber=tagTester("Number");var isDate=tagTester("Date");var isRegExp=tagTester("RegExp");var isError=tagTester("Error");var isSymbol=tagTester("Symbol");var isArrayBuffer=tagTester("ArrayBuffer");var isFunction=tagTester("Function");var nodelist=root.document&&root.document.childNodes;if(typeof/./!="function"&&typeof Int8Array!="object"&&typeof nodelist!="function"){isFunction=function(obj){return typeof obj=="function"||false}}var isFunction$1=isFunction;var hasObjectTag=tagTester("Object");var hasStringTagBug=supportsDataView&&hasObjectTag(new DataView(new ArrayBuffer(8))),isIE11=typeof Map!=="undefined"&&hasObjectTag(new Map);var isDataView=tagTester("DataView");function ie10IsDataView(obj){return obj!=null&&isFunction$1(obj.getInt8)&&isArrayBuffer(obj.buffer)}var isDataView$1=hasStringTagBug?ie10IsDataView:isDataView;var isArray=nativeIsArray||tagTester("Array");function has(obj,key){return obj!=null&&hasOwnProperty.call(obj,key)}var isArguments=tagTester("Arguments");(function(){if(!isArguments(arguments)){isArguments=function(obj){return has(obj,"callee")}}})();var isArguments$1=isArguments;function isFinite$1(obj){return!isSymbol(obj)&&_isFinite(obj)&&!isNaN(parseFloat(obj))}function isNaN$1(obj){return isNumber(obj)&&_isNaN(obj)}function constant(value){return function(){return value}}function createSizePropertyCheck(getSizeProperty){return function(collection){var sizeProperty=getSizeProperty(collection);return typeof sizeProperty=="number"&&sizeProperty>=0&&sizeProperty<=MAX_ARRAY_INDEX}}function shallowProperty(key){return function(obj){return obj==null?void 0:obj[key]}}var getByteLength=shallowProperty("byteLength");var isBufferLike=createSizePropertyCheck(getByteLength);var typedArrayPattern=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function isTypedArray(obj){return nativeIsView?nativeIsView(obj)&&!isDataView$1(obj):isBufferLike(obj)&&typedArrayPattern.test(toString.call(obj))}var isTypedArray$1=supportsArrayBuffer?isTypedArray:constant(false);var getLength=shallowProperty("length");function emulatedSet(keys){var hash={};for(var l=keys.length,i=0;i<l;++i)hash[keys[i]]=true;return{contains:function(key){return hash[key]},push:function(key){hash[key]=true;return keys.push(key)}}}function collectNonEnumProps(obj,keys){keys=emulatedSet(keys);var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=isFunction$1(constructor)&&constructor.prototype||ObjProto;var prop="constructor";if(has(obj,prop)&&!keys.contains(prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!keys.contains(prop)){keys.push(prop)}}}function keys(obj){if(!isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(has(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys}function isEmpty(obj){if(obj==null)return true;var length=getLength(obj);if(typeof length=="number"&&(isArray(obj)||isString(obj)||isArguments$1(obj)))return length===0;return getLength(keys(obj))===0}function isMatch(object,attrs){var _keys=keys(attrs),length=_keys.length;if(object==null)return!length;var obj=Object(object);for(var i=0;i<length;i++){var key=_keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false}return true}function _(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj}_.VERSION=VERSION;_.prototype.value=function(){return this._wrapped};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return String(this._wrapped)};function toBufferView(bufferSource){return new Uint8Array(bufferSource.buffer||bufferSource,bufferSource.byteOffset||0,getByteLength(bufferSource))}var tagDataView="[object DataView]";function eq(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return false;if(a!==a)return b!==b;var type=typeof a;if(type!=="function"&&type!=="object"&&typeof b!="object")return false;return deepEq(a,b,aStack,bStack)}function deepEq(a,b,aStack,bStack){if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;if(hasStringTagBug&&className=="[object Object]"&&isDataView$1(a)){if(!isDataView$1(b))return false;className=tagDataView}switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b;case"[object Symbol]":return SymbolProto.valueOf.call(a)===SymbolProto.valueOf.call(b);case"[object ArrayBuffer]":case tagDataView:return deepEq(toBufferView(a),toBufferView(b),aStack,bStack)}var areArrays=className==="[object Array]";if(!areArrays&&isTypedArray$1(a)){var byteLength=getByteLength(a);if(byteLength!==getByteLength(b))return false;if(a.buffer===b.buffer&&a.byteOffset===b.byteOffset)return true;areArrays=true}if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(isFunction$1(aCtor)&&aCtor instanceof aCtor&&isFunction$1(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var _keys=keys(a),key;length=_keys.length;if(keys(b).length!==length)return false;while(length--){key=_keys[length];if(!(has(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true}function isEqual(a,b){return eq(a,b)}function allKeys(obj){if(!isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys}function ie11fingerprint(methods){var length=getLength(methods);return function(obj){if(obj==null)return false;var keys=allKeys(obj);if(getLength(keys))return false;for(var i=0;i<length;i++){if(!isFunction$1(obj[methods[i]]))return false}return methods!==weakMapMethods||!isFunction$1(obj[forEachName])}}var forEachName="forEach",hasName="has",commonInit=["clear","delete"],mapTail=["get",hasName,"set"];var mapMethods=commonInit.concat(forEachName,mapTail),weakMapMethods=commonInit.concat(mapTail),setMethods=["add"].concat(commonInit,forEachName,hasName);var isMap=isIE11?ie11fingerprint(mapMethods):tagTester("Map");var isWeakMap=isIE11?ie11fingerprint(weakMapMethods):tagTester("WeakMap");var isSet=isIE11?ie11fingerprint(setMethods):tagTester("Set");var isWeakSet=tagTester("WeakSet");function values(obj){var _keys=keys(obj);var length=_keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[_keys[i]]}return values}function pairs(obj){var _keys=keys(obj);var length=_keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[_keys[i],obj[_keys[i]]]}return pairs}function invert(obj){var result={};var _keys=keys(obj);for(var i=0,length=_keys.length;i<length;i++){result[obj[_keys[i]]]=_keys[i]}return result}function functions(obj){var names=[];for(var key in obj){if(isFunction$1(obj[key]))names.push(key)}return names.sort()}function createAssigner(keysFunc,defaults){return function(obj){var length=arguments.length;if(defaults)obj=Object(obj);if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!defaults||obj[key]===void 0)obj[key]=source[key]}}return obj}}var extend=createAssigner(allKeys);var extendOwn=createAssigner(keys);var defaults=createAssigner(allKeys,true);function ctor(){return function(){}}function baseCreate(prototype){if(!isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);var Ctor=ctor();Ctor.prototype=prototype;var result=new Ctor;Ctor.prototype=null;return result}function create(prototype,props){var result=baseCreate(prototype);if(props)extendOwn(result,props);return result}function clone(obj){if(!isObject(obj))return obj;return isArray(obj)?obj.slice():extend({},obj)}function tap(obj,interceptor){interceptor(obj);return obj}function toPath(path){return isArray(path)?path:[path]}_.toPath=toPath;function toPath$1(path){return _.toPath(path)}function deepGet(obj,path){var length=path.length;for(var i=0;i<length;i++){if(obj==null)return void 0;obj=obj[path[i]]}return length?obj:void 0}function get(object,path,defaultValue){var value=deepGet(object,toPath$1(path));return isUndefined(value)?defaultValue:value}function has$1(obj,path){path=toPath$1(path);var length=path.length;for(var i=0;i<length;i++){var key=path[i];if(!has(obj,key))return false;obj=obj[key]}return!!length}function identity(value){return value}function matcher(attrs){attrs=extendOwn({},attrs);return function(obj){return isMatch(obj,attrs)}}function property(path){path=toPath$1(path);return function(obj){return deepGet(obj,path)}}function optimizeCb(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}}function baseIteratee(value,context,argCount){if(value==null)return identity;if(isFunction$1(value))return optimizeCb(value,context,argCount);if(isObject(value)&&!isArray(value))return matcher(value);return property(value)}function iteratee(value,context){return baseIteratee(value,context,Infinity)}_.iteratee=iteratee;function cb(value,context,argCount){if(_.iteratee!==iteratee)return _.iteratee(value,context);return baseIteratee(value,context,argCount)}function mapObject(obj,iteratee,context){iteratee=cb(iteratee,context);var _keys=keys(obj),length=_keys.length,results={};for(var index=0;index<length;index++){var currentKey=_keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results}function noop(){}function propertyOf(obj){if(obj==null)return noop;return function(path){return get(obj,path)}}function times(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum}function random(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))}var now=Date.now||function(){return(new Date).getTime()};function createEscaper(map){var escaper=function(match){return map[match]};var source="(?:"+keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string==null?"":""+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}}var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var _escape=createEscaper(escapeMap);var unescapeMap=invert(escapeMap);var _unescape=createEscaper(unescapeMap);var templateSettings=_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var escapeRegExp=/\\|'|\r|\n|\u2028|\u2029/g;function escapeChar(match){return"\\"+escapes[match]}var bareIdentifier=/^\s*(\w|\$)+\s*$/;function template(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escapeRegExp,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}else if(evaluate){source+="';\n"+evaluate+"\n__p+='"}return match});source+="';\n";var argument=settings.variable;if(argument){if(!bareIdentifier.test(argument))throw new Error(argument)}else{source="with(obj||{}){\n"+source+"}\n";argument="obj"}source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";var render;try{render=new Function(argument,"_",source)}catch(e){e.source=source;throw e}var template=function(data){return render.call(this,data,_)};template.source="function("+argument+"){\n"+source+"}";return template}function result(obj,path,fallback){path=toPath$1(path);var length=path.length;if(!length){return isFunction$1(fallback)?fallback.call(obj):fallback}for(var i=0;i<length;i++){var prop=obj==null?void 0:obj[path[i]];if(prop===void 0){prop=fallback;i=length}obj=isFunction$1(prop)?prop.call(obj):prop}return obj}var idCounter=0;function uniqueId(prefix){var id=++idCounter+"";return prefix?prefix+id:id}function chain(obj){var instance=_(obj);instance._chain=true;return instance}function executeBound(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(isObject(result))return result;return self}var partial=restArguments(function(func,boundArgs){var placeholder=partial.placeholder;var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++){args[i]=boundArgs[i]===placeholder?arguments[position++]:boundArgs[i]}while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound});partial.placeholder=_;var bind=restArguments(function(func,context,args){if(!isFunction$1(func))throw new TypeError("Bind must be called on a function");var bound=restArguments(function(callArgs){return executeBound(func,bound,context,this,args.concat(callArgs))});return bound});var isArrayLike=createSizePropertyCheck(getLength);function flatten(input,depth,strict,output){output=output||[];if(!depth&&depth!==0){depth=Infinity}else if(depth<=0){return output.concat(input)}var idx=output.length;for(var i=0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(isArray(value)||isArguments$1(value))){if(depth>1){flatten(value,depth-1,strict,output);idx=output.length}else{var j=0,len=value.length;while(j<len)output[idx++]=value[j++]}}else if(!strict){output[idx++]=value}}return output}var bindAll=restArguments(function(obj,keys){keys=flatten(keys,false,false);var index=keys.length;if(index<1)throw new Error("bindAll must be passed function names");while(index--){var key=keys[index];obj[key]=bind(obj[key],obj)}return obj});function memoize(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=""+(hasher?hasher.apply(this,arguments):key);if(!has(cache,address))cache[address]=func.apply(this,arguments);return cache[address]};memoize.cache={};return memoize}var delay=restArguments(function(func,wait,args){return setTimeout(function(){return func.apply(null,args)},wait)});var defer=partial(delay,_,1);function throttle(func,wait,options){var timeout,context,args,result;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};var throttled=function(){var _now=now();if(!previous&&options.leading===false)previous=_now;var remaining=wait-(_now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=_now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result};throttled.cancel=function(){clearTimeout(timeout);previous=0;timeout=context=args=null};return throttled}function debounce(func,wait,immediate){var timeout,previous,args,result,context;var later=function(){var passed=now()-previous;if(wait>passed){timeout=setTimeout(later,wait-passed)}else{timeout=null;if(!immediate)result=func.apply(context,args);if(!timeout)args=context=null}};var debounced=restArguments(function(_args){context=this;args=_args;previous=now();if(!timeout){timeout=setTimeout(later,wait);if(immediate)result=func.apply(context,args)}return result});debounced.cancel=function(){clearTimeout(timeout);timeout=args=context=null};return debounced}function wrap(func,wrapper){return partial(wrapper,func)}function negate(predicate){return function(){return!predicate.apply(this,arguments)}}function compose(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}}function after(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}}function before(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments)}if(times<=1)func=null;return memo}}var once=partial(before,2);function findKey(obj,predicate,context){predicate=cb(predicate,context);var _keys=keys(obj),key;for(var i=0,length=_keys.length;i<length;i++){key=_keys[i];if(predicate(obj[key],key,obj))return key}}function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=getLength(array);var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index],index,array))return index}return-1}}var findIndex=createPredicateIndexFinder(1);var findLastIndex=createPredicateIndexFinder(-1);function sortedIndex(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=getLength(array);while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid}return low}function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if(typeof idx=="number"){if(dir>0){i=idx>=0?idx:Math.max(idx+length,i)}else{length=idx>=0?Math.min(idx+1,length):idx+length+1}}else if(sortedIndex&&idx&&length){idx=sortedIndex(array,item);return array[idx]===item?idx:-1}if(item!==item){idx=predicateFind(slice.call(array,i,length),isNaN$1);return idx>=0?idx+i:-1}for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir){if(array[idx]===item)return idx}return-1}}var indexOf=createIndexFinder(1,findIndex,sortedIndex);var lastIndexOf=createIndexFinder(-1,findLastIndex);function find(obj,predicate,context){var keyFinder=isArrayLike(obj)?findIndex:findKey;var key=keyFinder(obj,predicate,context);if(key!==void 0&&key!==-1)return obj[key]}function findWhere(obj,attrs){return find(obj,matcher(attrs))}function each(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj)}}else{var _keys=keys(obj);for(i=0,length=_keys.length;i<length;i++){iteratee(obj[_keys[i]],_keys[i],obj)}}return obj}function map(obj,iteratee,context){iteratee=cb(iteratee,context);var _keys=!isArrayLike(obj)&&keys(obj),length=(_keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results}function createReduce(dir){var reducer=function(obj,iteratee,memo,initial){var _keys=!isArrayLike(obj)&&keys(obj),length=(_keys||obj).length,index=dir>0?0:length-1;if(!initial){memo=obj[_keys?_keys[index]:index];index+=dir}for(;index>=0&&index<length;index+=dir){var currentKey=_keys?_keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo};return function(obj,iteratee,memo,context){var initial=arguments.length>=3;return reducer(obj,optimizeCb(iteratee,context,4),memo,initial)}}var reduce=createReduce(1);var reduceRight=createReduce(-1);function filter(obj,predicate,context){var results=[];predicate=cb(predicate,context);each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value)});return results}function reject(obj,predicate,context){return filter(obj,negate(cb(predicate)),context)}function every(obj,predicate,context){predicate=cb(predicate,context);var _keys=!isArrayLike(obj)&&keys(obj),length=(_keys||obj).length;for(var index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false}return true}function some(obj,predicate,context){predicate=cb(predicate,context);var _keys=!isArrayLike(obj)&&keys(obj),length=(_keys||obj).length;for(var index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true}return false}function contains(obj,item,fromIndex,guard){if(!isArrayLike(obj))obj=values(obj);if(typeof fromIndex!="number"||guard)fromIndex=0;return indexOf(obj,item,fromIndex)>=0}var invoke=restArguments(function(obj,path,args){var contextPath,func;if(isFunction$1(path)){func=path}else{path=toPath$1(path);contextPath=path.slice(0,-1);path=path[path.length-1]}return map(obj,function(context){var method=func;if(!method){if(contextPath&&contextPath.length){context=deepGet(context,contextPath)}if(context==null)return void 0;method=context[path]}return method==null?method:method.apply(context,args)})});function pluck(obj,key){return map(obj,property(key))}function where(obj,attrs){return filter(obj,matcher(attrs))}function max(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null||typeof iteratee=="number"&&typeof obj[0]!="object"&&obj!=null){obj=isArrayLike(obj)?obj:values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value!=null&&value>result){result=value}}}else{iteratee=cb(iteratee,context);each(obj,function(v,index,list){computed=iteratee(v,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=v;lastComputed=computed}})}return result}function min(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null||typeof iteratee=="number"&&typeof obj[0]!="object"&&obj!=null){obj=isArrayLike(obj)?obj:values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value!=null&&value<result){result=value}}}else{iteratee=cb(iteratee,context);each(obj,function(v,index,list){computed=iteratee(v,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=v;lastComputed=computed}})}return result}function sample(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=values(obj);return obj[random(obj.length-1)]}var sample=isArrayLike(obj)?clone(obj):values(obj);var length=getLength(sample);n=Math.max(Math.min(n,length),0);var last=length-1;for(var index=0;index<n;index++){var rand=random(index,last);var temp=sample[index];sample[index]=sample[rand];sample[rand]=temp}return sample.slice(0,n)}function shuffle(obj){return sample(obj,Infinity)}function sortBy(obj,iteratee,context){var index=0;iteratee=cb(iteratee,context);return pluck(map(obj,function(value,key,list){return{value:value,index:index++,criteria:iteratee(value,key,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")}function group(behavior,partition){return function(obj,iteratee,context){var result=partition?[[],[]]:{};iteratee=cb(iteratee,context);each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)});return result}}var groupBy=group(function(result,value,key){if(has(result,key))result[key].push(value);else result[key]=[value]});var indexBy=group(function(result,value,key){result[key]=value});var countBy=group(function(result,value,key){if(has(result,key))result[key]++;else result[key]=1});var partition=group(function(result,value,pass){result[pass?0:1].push(value)},true);var reStrSymbol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function toArray(obj){if(!obj)return[];if(isArray(obj))return slice.call(obj);if(isString(obj)){return obj.match(reStrSymbol)}if(isArrayLike(obj))return map(obj,identity);return values(obj)}function size(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:keys(obj).length}function keyInObj(value,key,obj){return key in obj}var pick=restArguments(function(obj,keys){var result={},iteratee=keys[0];if(obj==null)return result;if(isFunction$1(iteratee)){if(keys.length>1)iteratee=optimizeCb(iteratee,keys[1]);keys=allKeys(obj)}else{iteratee=keyInObj;keys=flatten(keys,false,false);obj=Object(obj)}for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value}return result});var omit=restArguments(function(obj,keys){var iteratee=keys[0],context;if(isFunction$1(iteratee)){iteratee=negate(iteratee);if(keys.length>1)context=keys[1]}else{keys=map(flatten(keys,false,false),String);iteratee=function(value,key){return!contains(keys,key)}}return pick(obj,iteratee,context)});function initial(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)))}function first(array,n,guard){if(array==null||array.length<1)return n==null||guard?void 0:[];if(n==null||guard)return array[0];return initial(array,array.length-n)}function rest(array,n,guard){return slice.call(array,n==null||guard?1:n)}function last(array,n,guard){if(array==null||array.length<1)return n==null||guard?void 0:[];if(n==null||guard)return array[array.length-1];return rest(array,Math.max(0,array.length-n))}function compact(array){return filter(array,Boolean)}function flatten$1(array,depth){return flatten(array,depth,false)}var difference=restArguments(function(array,rest){rest=flatten(rest,true,true);return filter(array,function(value){return!contains(rest,value)})});var without=restArguments(function(array,otherArrays){return difference(array,otherArrays)});function uniq(array,isSorted,iteratee,context){if(!isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false}if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted&&!iteratee){if(!i||seen!==computed)result.push(value);seen=computed}else if(iteratee){if(!contains(seen,computed)){seen.push(computed);result.push(value)}}else if(!contains(result,value)){result.push(value)}}return result}var union=restArguments(function(arrays){return uniq(flatten(arrays,true,true))});function intersection(array){var result=[];var argsLength=arguments.length;for(var i=0,length=getLength(array);i<length;i++){var item=array[i];if(contains(result,item))continue;var j;for(j=1;j<argsLength;j++){if(!contains(arguments[j],item))break}if(j===argsLength)result.push(item)}return result}function unzip(array){var length=array&&max(array,getLength).length||0;var result=Array(length);for(var index=0;index<length;index++){result[index]=pluck(array,index)}return result}var zip=restArguments(unzip);function object(list,values){var result={};for(var i=0,length=getLength(list);i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result}function range(start,stop,step){if(stop==null){stop=start||0;start=0}if(!step){step=stop<start?-1:1}var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range}function chunk(array,count){if(count==null||count<1)return[];var result=[];var i=0,length=array.length;while(i<length){result.push(slice.call(array,i,i+=count))}return result}function chainResult(instance,obj){return instance._chain?_(obj).chain():obj}function mixin(obj){each(functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return chainResult(this,func.apply(_,args))}});return _}each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;if(obj!=null){method.apply(obj,arguments);if((name==="shift"||name==="splice")&&obj.length===0){delete obj[0]}}return chainResult(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;if(obj!=null)obj=method.apply(obj,arguments);return chainResult(this,obj)}});var allExports={__proto__:null,VERSION:VERSION,restArguments:restArguments,isObject:isObject,isNull:isNull,isUndefined:isUndefined,isBoolean:isBoolean,isElement:isElement,isString:isString,isNumber:isNumber,isDate:isDate,isRegExp:isRegExp,isError:isError,isSymbol:isSymbol,isArrayBuffer:isArrayBuffer,isDataView:isDataView$1,isArray:isArray,isFunction:isFunction$1,isArguments:isArguments$1,isFinite:isFinite$1,isNaN:isNaN$1,isTypedArray:isTypedArray$1,isEmpty:isEmpty,isMatch:isMatch,isEqual:isEqual,isMap:isMap,isWeakMap:isWeakMap,isSet:isSet,isWeakSet:isWeakSet,keys:keys,allKeys:allKeys,values:values,pairs:pairs,invert:invert,functions:functions,methods:functions,extend:extend,extendOwn:extendOwn,assign:extendOwn,defaults:defaults,create:create,clone:clone,tap:tap,get:get,has:has$1,mapObject:mapObject,identity:identity,constant:constant,noop:noop,toPath:toPath,property:property,propertyOf:propertyOf,matcher:matcher,matches:matcher,times:times,random:random,now:now,escape:_escape,unescape:_unescape,templateSettings:templateSettings,template:template,result:result,uniqueId:uniqueId,chain:chain,iteratee:iteratee,partial:partial,bind:bind,bindAll:bindAll,memoize:memoize,delay:delay,defer:defer,throttle:throttle,debounce:debounce,wrap:wrap,negate:negate,compose:compose,after:after,before:before,once:once,findKey:findKey,findIndex:findIndex,findLastIndex:findLastIndex,sortedIndex:sortedIndex,indexOf:indexOf,lastIndexOf:lastIndexOf,find:find,detect:find,findWhere:findWhere,each:each,forEach:each,map:map,collect:map,reduce:reduce,foldl:reduce,inject:reduce,reduceRight:reduceRight,foldr:reduceRight,filter:filter,select:filter,reject:reject,every:every,all:every,some:some,any:some,contains:contains,includes:contains,include:contains,invoke:invoke,pluck:pluck,where:where,max:max,min:min,shuffle:shuffle,sample:sample,sortBy:sortBy,groupBy:groupBy,indexBy:indexBy,countBy:countBy,partition:partition,toArray:toArray,size:size,pick:pick,omit:omit,first:first,head:first,take:first,initial:initial,last:last,rest:rest,tail:rest,drop:rest,compact:compact,flatten:flatten$1,without:without,uniq:uniq,unique:uniq,union:union,intersection:intersection,difference:difference,unzip:unzip,transpose:unzip,zip:zip,object:object,range:range,chunk:chunk,mixin:mixin,default:_};var _$1=mixin(allExports);_$1._=_$1;return _$1})}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],354:[function(require,module,exports){module.exports=function(CodeMirror){"use strict";function doFold(cm,pos,options){var finder=options&&(options.call?options:options.rangeFinder);if(!finder)finder=cm.getHelper(pos,"fold");if(!finder)return;if(typeof pos=="number")pos=CodeMirror.Pos(pos,0);var minSize=options&&options.minFoldSize||0;function getRange(allowFolded){var range=finder(cm,pos);if(!range||range.to.line-range.from.line<minSize)return null;var marks=cm.findMarksAt(range.from);for(var i=0;i<marks.length;++i){if(marks[i].__isFold){if(!allowFolded)return null;range.cleared=true;marks[i].clear()}}return range}var range=getRange(true);if(options&&options.scanUp)while(!range&&pos.line>cm.firstLine()){pos=CodeMirror.Pos(pos.line-1,0);range=getRange(false)}if(!range||range.cleared)return;var myWidget=makeWidget(options);CodeMirror.on(myWidget,"mousedown",function(){myRange.clear()});var myRange=cm.markText(range.from,range.to,{replacedWith:myWidget,clearOnEnter:true,__isFold:true});myRange.on("clear",function(from,to){CodeMirror.signal(cm,"unfold",cm,from,to)});CodeMirror.signal(cm,"fold",cm,range.from,range.to)}function makeWidget(options){var widget=options&&options.widget||"...";if(typeof widget=="string"){var text=document.createTextNode(widget);widget=document.createElement("span");widget.appendChild(text);widget.className="CodeMirror-foldmarker"}return widget}CodeMirror.newFoldFunction=function(rangeFinder,widget){return function(cm,pos){doFold(cm,pos,{rangeFinder:rangeFinder,widget:widget})}};CodeMirror.defineExtension("foldCode",function(pos,options){doFold(this,pos,options)});CodeMirror.registerHelper("fold","combine",function(){var funcs=Array.prototype.slice.call(arguments,0);return function(cm,start){for(var i=0;i<funcs.length;++i){var found=funcs[i](cm,start);if(found)return found}}});var myRangeFinder=function(cm,start){var line=start.line,lineText=cm.getLine(line);if(lineText.indexOf("///fold:")!=-1)return tripleCommentRangeFinder(cm,start);return};var tripleCommentRangeFinder=function(cm,start){var lastLine=cm.lastLine();var pos;for(var i=start.line+1;i<=lastLine;i++){var text=cm.getLine(i);pos=text.indexOf("///");if(pos==0){var endCh=cm.getLine(i).length;return{from:CodeMirror.Pos(start.line+1,0),to:CodeMirror.Pos(i,endCh)}}}return};return{tripleCommentRangeFinder:tripleCommentRangeFinder,myRangeFinder:myRangeFinder}}},{}],355:[function(require,module,exports){(function(global){(function(){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var $=require("jquery");var _=require("underscore");var React=require("react");var ReactDOM=require("react-dom");var CodeMirror=require("codemirror");var CodeMirrorComponent=require("react-codemirror");var Folding=require("./folding")(CodeMirror);require("codemirror/addon/edit/matchbrackets");require("codemirror/addon/edit/closebrackets");require("./wppl-mode.js");require("codemirror/addon/comment/comment");var wait=function(ms,f){return setTimeout(f,ms)};var renderReturnValue=function(x){if(x===undefined){return""}if(x&&x.score!=undefined&&x.sample!=undefined)if(typeof viz=="undefined"){return util.serialize(x)}else{if(typeof viz.auto=="function"){viz.auto(x);return}}if(typeof x=="function")return"<function "+x.name+">";if(typeof x=="string"){return x}return JSON.stringify(x)};var ResultError=React.createClass({displayName:"ResultError",getInitialState:function(){return{showStack:false}},handleClick:function(e){this.setState({showStack:!this.state.showStack})},render:function(){var stack=this.state.showStack?"\n"+this.props.stack:"";return React.createElement("pre",{key:this.props._key,className:"error",onClick:this.handleClick},React.createElement("span",{className:"error-message"},this.props.message),stack)}});var pureSCU=function(nextProps,nextState){return!(_.isEqual(nextProps,this.props)&&_.isEqual(nextState,nextState))};var ResultText=React.createClass({displayName:"ResultText",shouldComponentUpdate:pureSCU,render:function(){var subtype=this.props.subtype||"log";var icon={log:"",warn:"\u26a0",error:"x",info:"i"}[subtype];var spanClass="icon "+subtype;var count=this.props.count==1||this.props.count===undefined?"":"("+this.props.count+") ";var message=this.props.message;if(this.props.count==1&&this.subtype=="log"){return React.createElement("pre",{key:this.props._key,className:"text"},message)}else{return React.createElement("div",null,React.createElement("span",{className:spanClass},icon),React.createElement("span",{className:"count"},count),React.createElement("pre",{key:this.props._key,className:"text"},message))}}});var ResultDOM=React.createClass({displayName:"ResultDOM",componentDidMount:function(){this.div=ReactDOM.findDOMNode(this)},render:function(){return React.createElement("div",{className:"custom"})}});var RunButton=React.createClass({displayName:"RunButton",getLabel:function(){var labels={idle:"run",queued:"queued..."};return _.has(labels,this.props.status)?labels[this.props.status]:this.props.status},render:function(){return React.createElement("button",{className:"run",type:"button",onClick:this.props.clickHandler,disabled:!(this.props.status=="idle")},this.getLabel())}});var ResultMetaDrawer=React.createClass({displayName:"ResultMetaDrawer",render:function(){var items=_.values(_.mapObject(_.omit(this.props,"visible"),function(v,k){return React.createElement("div",{key:k},React.createElement("b",null,k),": ",v)}));return React.createElement("div",{className:"meta "+(this.props.visible?"":"hide")},items)}});var ResultList=React.createClass({displayName:"ResultList",getInitialState:function(){return{metaVisible:false,minHeight:0,hide:false}},hide:function(){this.setState({hide:true})},_autoscroller:function(){var node=ReactDOM.findDOMNode(this);var nodeHeight=$(node).height();this.lastScrollTop=node.scrollTop;if(node.scrollHeight>node.scrollTop+nodeHeight+4){node.scrollTop=node.scrollHeight}},componentWillMount:function(){this.autoscroller=_.throttle(this._autoscroller,50);this.ResultsMutationObserver=new MutationObserver(this.autoscroller)},componentWillUnmount:function(){this.ResultsMutationObserver.disconnect();$(ReactDOM.findDOMNode(this)).unbind("scroll")},componentDidMount:function(){var comp=this,mo=this.ResultsMutationObserver,node=ReactDOM.findDOMNode(this),scrollHandler=function(e){if(node.scrollTop<comp.lastScrollTop){mo.disconnect()}else if(node.scrollTop+node.offsetHeight+30>node.scrollHeight){e.stopImmediatePropagation();mo.observe(node,{childList:true,attributes:true,subtree:true})}};$(node).scroll(scrollHandler)},render:function(){var renderResult=function(d,k){if(d.type=="text"){return React.createElement(ResultText,_extends({key:k,_key:k},d))}else if(d.type=="error"){return React.createElement(ResultError,_extends({key:k,_key:k},d))}else if(d.type=="DOM"){return React.createElement(ResultDOM,_extends({key:k},d))}else{console.log("unrouted command: ",d);return null}};var list=this.props.list.map(function(r,i){return renderResult(r,i)});var style={minHeight:this.state.minHeight};var webpplVersion=this.props.webpplVersion;var seed=this.props.seed;var className="result "+(list.length==0?" hide":"");return React.createElement("div",{style:style,className:className},React.createElement("button",{onClick:this.props.clear,className:"clearButton "+this.props.executionState},"X"),list)}});var jobsQueue=[],compileCache={};var unAd=function(){var ad=global.ad;if(typeof ad=="undefined"){unAd=function(x){return x}}else{unAd=function(x){if(global.ad.isLifted(x)){return x.x}else if(_.isArray(x)){return _.map(x,unAd)}else if(x instanceof ad.tensor.__Tensor){return x}else if(_.isObject(x)&&!_.isFunction(x)){var proto=Object.getPrototypeOf(x);var y=_.mapObject(x,unAd);return _.extendOwn(Object.create(proto),y);return y}else{return x}}}};var CodeEditor=React.createClass({displayName:"CodeEditor",getInitialState:function(){return{results:[],newborn:true,execution:"idle",showMeta:false}},print:function(s,k,a,x){var isVanillaCall=arguments.length==1;if(isVanillaCall){x=arguments[0]}if(x.__print__){return k(s,x.__print__(x))}else{var _x=unAd(x);var type=typeof _x;this.addResult({type:"text",message:_.contains(["object","boolean","number"],type)?JSON.stringify(_x):_x});if(isVanillaCall){return}else{return k(s)}}},makeResultContainer:function(_options){var options=_.defaults(_options||{},{});this.addResult(_.extend({type:"DOM"}));var element=_.last($(ReactDOM.findDOMNode(this)).find(".custom"));if(options.css){$(element).css(options.css)}return element},cancelRun:function(){if(this.runner){this.runner.__cancel__=true}this.addResult({type:"text",message:"[Execution canceled]"});this.endJob()},runCode:function(){var resultList=this.refs.resultList;var $resultsDiv=$(ReactDOM.findDOMNode(resultList));resultList.setState(function(state,props){return _.extend({},state,{minHeight:$resultsDiv.height()})});this.setState({newborn:false,results:[]});resultList.ResultsMutationObserver.observe($resultsDiv[0],{childList:true,attributes:true,subtree:true});var comp=this;var code=comp.refs.editor.getCodeMirror().getValue();var language=comp.props.language;var runT0,runClockId;var endJob=function(store,returnValue){var renderedReturnValue=renderReturnValue(returnValue);comp.addResult({type:"text",message:renderedReturnValue});cleanup()};this.endJob=endJob;var nativeConsole=console;if(!global["nativeConsole"]){global["nativeConsole"]=nativeConsole}var cleanup=function(){jobsQueue.shift();clearInterval(runClockId);comp.setState({runTime:(_.now()-runT0)/1e3+"s",execution:"idle"});global["console"]=nativeConsole;global["print"]=null;global["onerror"]=null;wpEditor["makeResultContainer"]=null;if(jobsQueue.length>0){jobsQueue[0]()}};var handleError=function(e){if(typeof e=="string"){e={message:e,stack:[]}}comp.addResult({type:"error",message:e.message,stack:e.stack});cleanup()};var job=function(){var lastMessages={};var makeConsoleMethod=function(subtype){return function(){if(!comp.state.consoleMuted){var args=_.toArray(arguments);var message=args.join(" ");var lastMessage=lastMessages[subtype];if(lastMessage==message){comp.setState(function(state,props){var idx=_.findLastIndex(state.results,function(res){return res.subtype==subtype});state.results[idx].count+=1;return state})}else{comp.addResult({type:"text",subtype:subtype,message:message,count:1});lastMessages[subtype]=message}}nativeConsole[subtype](message)}};global["console"]={log:makeConsoleMethod("log"),info:makeConsoleMethod("info"),warn:makeConsoleMethod("warn"),error:makeConsoleMethod("error"),mute:function(){comp.setState({consoleMuted:true})},unmute:function(){comp.setState({consoleMuted:false})}};_.each(_.difference(_.methods(nativeConsole),_.methods(global["console"])),function(key){global["console"][key]=nativeConsole[key]});var sideEffectMethods=["print"];_.each(sideEffectMethods,function(name){global[name]=comp[name]});wpEditor["makeResultContainer"]=comp["makeResultContainer"];if(language=="javascript"){try{var res=eval(code);endJob({},res);cleanup()}catch(e){handleError(e)}finally{return}}if(typeof webppl=="undefined"){comp.setState({execution:"loading webppl"});return wait(250,job)}var handleRunError=function(error){if(error instanceof Error&&error.wpplError){var wpplError=error.wpplError,lineNumber=wpplError.lineNumber-1,columnNumber=wpplError.columnNumber,endColumn=wpplError.name?columnNumber+wpplError.name.length:Infinity;var cm=comp.refs.editor.getCodeMirror();cm.markText({line:lineNumber,ch:columnNumber},{line:lineNumber,ch:endColumn},{className:"CodeMirrorError",clearOnEnter:true})}handleError(error)};var handleCompileError=function(e){var message=e.message;var cm=comp.refs.editor.getCodeMirror();var re_line=/Line ([0-9]+): /;if(re_line.test(message)){var line=parseInt(re_line.exec(message)[1])-1;cm.markText({line:line,ch:0},{line:line,ch:Infinity},{className:"CodeMirrorError",clearOnEnter:true})}e.message="Syntax error: "+e.message.replace(re_line,"");handleError(e)};global.onerror=function(message,source,lineno,colno,e){console.log("global.onerror triggered");handleRunError(e||message)};comp.setState({execution:"compiling"});wait(20,function(){var compileT0=_.now();if(compileCache[code]){comp.setState({compileTime:"cached"})}else{try{compileCache[code]=webppl.compile(code,{debug:true});var compileT1=_.now();comp.setState({compileTime:(compileT1-compileT0)/1e3+"s"})}catch(e){handleCompileError(e);return}}var baseRunner=util.trampolineRunners.web();var compiled=compileCache[code];var prepared=webppl.prepare(compiled,endJob,{errorHandlers:[handleRunError],debug:true,baseRunner:baseRunner});comp.runner=baseRunner;comp.setState({execution:"running"});var seed=_.now();comp.setState({seed:seed});util.seedRNG(seed);wait(20,function(){runT0=_.now();runClockId=setInterval(function(){comp.setState({runTime:(_.now()-runT0)/1e3+"s"})},1e3);prepared.run()})})};jobsQueue.push(job);this.setState({execution:"queued"});if(jobsQueue.length==1){job()}},getCode:function(){return this.refs.editor?this.refs.editor.getCodeMirror().getValue():this.props.code},addResult:function(result){this.setState(function(state,props){return{results:state.results.concat(result)}})},clearResults:function(){this.setState({results:[]})},toggleMetaDrawer:function(){this.setState({showMeta:!this.state.showMeta})},render:function(){var comp=this;var options={mode:"javascript",lineNumbers:false,autoCloseBrackets:true,matchBrackets:true,viewportMargin:Infinity,extraKeys:{Tab:"indentAuto","Cmd-/":"toggleComment","Ctrl-/":"toggleComment","Cmd-.":function(cm){cm.foldCode(cm.getCursor(),Folding.myRangeFinder)},"Ctrl-.":function(cm){cm.foldCode(cm.getCursor(),Folding.myRangeFinder)},"Ctrl-Enter":function(cm){comp.runCode()},"Cmd-Enter":function(cm){comp.runCode()}}};var webpplVersion=global.webppl?global.webppl.version:"";var webpplPackages=global.webppl?global.webppl.packages.map(function(pkg){return pkg.name+" "+pkg.version}).join(", "):"n/a";var code=this.refs.editor?this.refs.editor.getCodeMirror().getValue():this.props.code;var drawerButtonLabel=this.state.showMeta?"\u25b2":"\u25bc";return React.createElement("div",{ref:"cont",className:"wpedit"},React.createElement(CodeMirrorComponent,{ref:"editor",value:code,options:options,onChange:comp.props.onChange,codeMirrorInstance:CodeMirror}),React.createElement(RunButton,{status:this.state.execution,clickHandler:this.runCode}),React.createElement("button",{className:_.contains(["running"],this.state.execution)?"cancel":"cancel hide",onClick:this.cancelRun},"cancel"),React.createElement("button",{className:"drawerButton",onClick:this.toggleMetaDrawer},drawerButtonLabel),React.createElement(ResultMetaDrawer,{visible:this.state.showMeta,webppl:webpplVersion,packages:webpplPackages,seed:this.state.seed,compile:this.state.compileTime,run:this.state.runTime}),React.createElement(ResultList,{ref:"resultList",newborn:this.state.newborn,clear:this.clearResults,executionState:this.state.execution,list:this.state.results}))}});var setupCode=function(preEl,options){options=_.defaults(options||{},{trim:true,language:"webppl"});var parentDiv=preEl.parentNode;var editorDiv=document.createElement("div");var code=$(preEl).text();if(options.trim){code=code.trim()}var r=React.createElement(CodeEditor,{code:code,language:options.language});var ret={};ReactDOM.render(r,editorDiv,function(){ret=this;var comp=this;requestAnimationFrame(function(){var cm=comp.refs["editor"].getCodeMirror();parentDiv.replaceChild(editorDiv,preEl);cm.refresh();var lastLine=cm.lastLine();for(var i=0;i<=lastLine;i++){var txt=cm.getLine(i),pos=txt.indexOf("///fold:");if(pos==0){cm.foldCode(CodeMirror.Pos(i,pos),Folding.tripleCommentRangeFinder)}}})});return ret};var topStore={};var numTopStoreKeys=0;var wpEditor={setup:setupCode,ReactComponent:CodeEditor,makeResultContainer:function(){},MCMCProgress:function(){var container=wpEditor["makeResultContainer"](),$container=$(container).addClass("progress"),$fill=$("<div>").addClass("fill"),$text=$("<div>").addClass("text");$container.append($fill,$text);var completed=0,total;var renderProgressBar=_.throttle(function(){var pct=100*completed/total;$text.text(completed+" / "+total+" samples");$fill.css("width",pct+"%")},100);return{setup:function(n){total=n},iteration:function(trace){completed+=1;renderProgressBar()}}},put:function(){var item,key;if(arguments.length==1){item=arguments[0]}else{key=arguments[0];item=arguments[1]}if(!key){numTopStoreKeys++;key="r"+numTopStoreKeys}topStore[key]=item;var div=wpEditor.makeResultContainer();$(div).html('Stored item with key <span style="border: 1px solid gray; background-color: #dddddd; border-radius: 5px; padding: 0em 0.5em">'+key+"</b>").css({"font-size":"12px",padding:"2px"})},get:function(k){if(k){if(_.has(topStore,k)){return topStore[k]}else{throw new Error("There is no stored item with key "+k)}}else{return topStore}}};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=wpEditor}}if(typeof window!=="undefined"){window.wpEditor=wpEditor;window.editor=wpEditor}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./folding":354,"./wppl-mode.js":356,codemirror:77,"codemirror/addon/comment/comment":74,"codemirror/addon/edit/closebrackets":75,"codemirror/addon/edit/matchbrackets":76,jquery:162,react:332,"react-codemirror":175,"react-dom":177,underscore:353}],356:[function(require,module,exports){(function(mod){if(typeof exports=="object"&&typeof module=="object")mod(require("codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function expressionAllowed(stream,state,backUp){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(state.lastType)||state.lastType=="quasi"&&/\{\s*$/.test(stream.string.slice(0,stream.pos-(backUp||0)))}CodeMirror.defineMode("javascript",function(config,parserConfig){var indentUnit=config.indentUnit;var statementIndent=parserConfig.statementIndent;var jsonldMode=parserConfig.jsonld;var jsonMode=parserConfig.json||jsonldMode;var isTS=parserConfig.typescript;var wordRE=parserConfig.wordCharacters||/[\w$\xa1-\uffff]/;var keywords=function(){function kw(type){return{type:type,style:"keyword"}}var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c");var operator=kw("operator"),atom={type:"atom",style:"atom"};var jsKeywords={if:kw("if"),while:A,with:A,else:B,do:B,try:B,finally:B,return:C,break:C,continue:C,new:kw("new"),delete:C,throw:C,debugger:C,var:kw("var"),const:kw("var"),let:kw("var"),function:kw("function"),catch:kw("catch"),for:kw("for"),switch:kw("switch"),case:kw("case"),default:kw("default"),in:operator,typeof:operator,instanceof:operator,true:atom,false:atom,null:atom,undefined:atom,NaN:atom,Infinity:atom,this:kw("this"),class:kw("class"),super:kw("atom"),yield:C,export:kw("export"),import:kw("import"),extends:C,await:C,async:kw("async"),factor:{type:"wppl",style:"wppl"},condition:{type:"wppl",style:"wppl"},observe:{type:"wppl",style:"wppl"}};if(isTS){var type={type:"variable",style:"variable-3"};var tsKeywords={interface:kw("class"),implements:C,namespace:C,module:kw("module"),enum:kw("module"),type:kw("type"),public:kw("modifier"),private:kw("modifier"),protected:kw("modifier"),abstract:kw("modifier"),as:operator,string:type,number:type,boolean:type,any:type};for(var attr in tsKeywords){jsKeywords[attr]=tsKeywords[attr]}}return jsKeywords}();var isOperatorChar=/[+\-*&%=<>!?|~^]/;var isJsonldKeyword=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function readRegexp(stream){var escaped=false,next,inSet=false;while((next=stream.next())!=null){if(!escaped){if(next=="/"&&!inSet)return;if(next=="[")inSet=true;else if(inSet&&next=="]")inSet=false}escaped=!escaped&&next=="\\"}}var type,content;function ret(tp,style,cont){type=tp;content=cont;return style}function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}else if(ch=="."&&stream.match(/^\d+(?:[eE][+\-]?\d+)?/)){return ret("number","number")}else if(ch=="."&&stream.match("..")){return ret("spread","meta")}else if(/[\[\]{}\(\),;\:\.]/.test(ch)){return ret(ch)}else if(ch=="="&&stream.eat(">")){return ret("=>","operator")}else if(ch=="0"&&stream.eat(/x/i)){stream.eatWhile(/[\da-f]/i);return ret("number","number")}else if(ch=="0"&&stream.eat(/o/i)){stream.eatWhile(/[0-7]/i);return ret("number","number")}else if(ch=="0"&&stream.eat(/b/i)){stream.eatWhile(/[01]/i);return ret("number","number")}else if(/\d/.test(ch)){stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return ret("number","number")}else if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}else if(stream.eat("/")){stream.skipToEnd();return ret("comment","comment")}else if(expressionAllowed(stream,state,1)){readRegexp(stream);stream.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return ret("regexp","string-2")}else{stream.eatWhile(isOperatorChar);return ret("operator","operator",stream.current())}}else if(ch=="`"){state.tokenize=tokenQuasi;return tokenQuasi(stream,state)}else if(ch=="#"){stream.skipToEnd();return ret("error","error")}else if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return ret("operator","operator",stream.current())}else if(wordRE.test(ch)){stream.eatWhile(wordRE);var word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return known&&state.lastType!="."?ret(known.type,known.style,word):ret("variable","variable",word)}}function tokenString(quote){return function(stream,state){var escaped=false,next;if(jsonldMode&&stream.peek()=="@"&&stream.match(isJsonldKeyword)){state.tokenize=tokenBase;return ret("jsonld-keyword","meta")}while((next=stream.next())!=null){if(next==quote&&!escaped)break;escaped=!escaped&&next=="\\"}if(!escaped)state.tokenize=tokenBase;return ret("string","string")}}function tokenComment(stream,state){var maybeEnd=false,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}maybeEnd=ch=="*"}return ret("comment","comment")}function tokenQuasi(stream,state){var escaped=false,next;while((next=stream.next())!=null){if(!escaped&&(next=="`"||next=="$"&&stream.eat("{"))){state.tokenize=tokenBase;break}escaped=!escaped&&next=="\\"}return ret("quasi","string-2",stream.current())}var brackets="([{}])";function findFatArrow(stream,state){if(state.fatArrowAt)state.fatArrowAt=null;var arrow=stream.string.indexOf("=>",stream.start);if(arrow<0)return;var depth=0,sawSomething=false;for(var pos=arrow-1;pos>=0;--pos){var ch=stream.string.charAt(pos);var bracket=brackets.indexOf(ch);if(bracket>=0&&bracket<3){if(!depth){++pos;break}if(--depth==0){if(ch=="(")sawSomething=true;break}}else if(bracket>=3&&bracket<6){++depth}else if(wordRE.test(ch)){sawSomething=true}else if(/["'\/]/.test(ch)){return}else if(sawSomething&&!depth){++pos;break}}if(sawSomething&&!depth)state.fatArrowAt=pos}var atomicTypes={atom:true,number:true,variable:true,string:true,regexp:true,this:true,"jsonld-keyword":true};function JSLexical(indented,column,type,align,prev,info){this.indented=indented;this.column=column;this.type=type;this.prev=prev;this.info=info;if(align!=null)this.align=align}function inScope(state,varname){for(var v=state.localVars;v;v=v.next)if(v.name==varname)return true;for(var cx=state.context;cx;cx=cx.prev){for(var v=cx.vars;v;v=v.next)if(v.name==varname)return true}}function parseJS(state,style,type,content,stream){var cc=state.cc;cx.state=state;cx.stream=stream;cx.marked=null,cx.cc=cc;cx.style=style;if(!state.lexical.hasOwnProperty("align"))state.lexical.align=true;while(true){var combinator=cc.length?cc.pop():jsonMode?expression:statement;if(combinator(type,content)){while(cc.length&&cc[cc.length-1].lex)cc.pop()();if(cx.marked)return cx.marked;if(type=="variable"&&inScope(state,content))return"variable-2";return style}}}var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;i>=0;i--)cx.cc.push(arguments[i])}function cont(){pass.apply(null,arguments);return true}function register(varname){function inList(list){for(var v=list;v;v=v.next)if(v.name==varname)return true;return false}var state=cx.state;cx.marked="def";if(state.context){if(inList(state.localVars))return;state.localVars={name:varname,next:state.localVars}}else{if(inList(state.globalVars))return;if(parserConfig.globalVars)state.globalVars={name:varname,next:state.globalVars}}}var defaultVars={name:"this",next:{name:"arguments"}};function pushcontext(){cx.state.context={prev:cx.state.context,vars:cx.state.localVars};cx.state.localVars=defaultVars}function popcontext(){cx.state.localVars=cx.state.context.vars;cx.state.context=cx.state.context.prev}function pushlex(type,info){var result=function(){var state=cx.state,indent=state.indented;if(state.lexical.type=="stat")indent=state.lexical.indented;else for(var outer=state.lexical;outer&&outer.type==")"&&outer.align;outer=outer.prev)indent=outer.indented;state.lexical=new JSLexical(indent,cx.stream.column(),type,null,state.lexical,info)};result.lex=true;return result}function poplex(){var state=cx.state;if(state.lexical.prev){if(state.lexical.type==")")state.indented=state.lexical.indented;state.lexical=state.lexical.prev}}poplex.lex=true;function expect(wanted){function exp(type){if(type==wanted)return cont();else if(wanted==";")return pass();else return cont(exp)}return exp}function statement(type,value){if(type=="var")return cont(pushlex("vardef",value.length),vardef,expect(";"),poplex);if(type=="keyword a")return cont(pushlex("form"),parenExpr,statement,poplex);if(type=="keyword wppl")return cont(pushlex("form"),parenExpr,statement,poplex);if(type=="keyword b")return cont(pushlex("form"),statement,poplex);if(type=="{")return cont(pushlex("}"),block,poplex);if(type==";")return cont();if(type=="if"){if(cx.state.lexical.info=="else"&&cx.state.cc[cx.state.cc.length-1]==poplex)cx.state.cc.pop()();return cont(pushlex("form"),parenExpr,statement,poplex,maybeelse)}if(type=="function")return cont(functiondef);if(type=="for")return cont(pushlex("form"),forspec,statement,poplex);if(type=="variable")return cont(pushlex("stat"),maybelabel);if(type=="switch")return cont(pushlex("form"),parenExpr,pushlex("}","switch"),expect("{"),block,poplex,poplex);if(type=="case")return cont(expression,expect(":"));if(type=="default")return cont(expect(":"));if(type=="catch")return cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext);if(type=="class")return cont(pushlex("form"),className,poplex);if(type=="export")return cont(pushlex("stat"),afterExport,poplex);if(type=="import")return cont(pushlex("stat"),afterImport,poplex);if(type=="module")return cont(pushlex("form"),pattern,pushlex("}"),expect("{"),block,poplex,poplex);if(type=="type")return cont(typeexpr,expect("operator"),typeexpr,expect(";"));if(type=="async")return cont(statement);return pass(pushlex("stat"),expression,expect(";"),poplex)}function expression(type){return expressionInner(type,false)}function expressionNoComma(type){return expressionInner(type,true)}function parenExpr(type){if(type!="(")return pass();return cont(pushlex(")"),expression,expect(")"),poplex)}function expressionInner(type,noComma){if(cx.state.fatArrowAt==cx.stream.start){var body=noComma?arrowBodyNoComma:arrowBody;if(type=="(")return cont(pushcontext,pushlex(")"),commasep(pattern,")"),poplex,expect("=>"),body,popcontext);else if(type=="variable")return pass(pushcontext,pattern,expect("=>"),body,popcontext)}var maybeop=noComma?maybeoperatorNoComma:maybeoperatorComma;if(atomicTypes.hasOwnProperty(type))return cont(maybeop);if(type=="function")return cont(functiondef,maybeop);if(type=="keyword c"||type=="async")return cont(noComma?maybeexpressionNoComma:maybeexpression);if(type=="(")return cont(pushlex(")"),maybeexpression,expect(")"),poplex,maybeop);if(type=="operator"||type=="spread")return cont(noComma?expressionNoComma:expression);if(type=="[")return cont(pushlex("]"),arrayLiteral,poplex,maybeop);if(type=="{")return contCommasep(objprop,"}",null,maybeop);if(type=="quasi")return pass(quasi,maybeop);if(type=="new")return cont(maybeTarget(noComma));return cont()}function maybeexpression(type){if(type.match(/[;\}\)\],]/))return pass();return pass(expression)}function maybeexpressionNoComma(type){if(type.match(/[;\}\)\],]/))return pass();return pass(expressionNoComma)}function maybeoperatorComma(type,value){if(type==",")return cont(expression);return maybeoperatorNoComma(type,value,false)}function maybeoperatorNoComma(type,value,noComma){var me=noComma==false?maybeoperatorComma:maybeoperatorNoComma;var expr=noComma==false?expression:expressionNoComma;if(type=="=>")return cont(pushcontext,noComma?arrowBodyNoComma:arrowBody,popcontext);if(type=="operator"){if(/\+\+|--/.test(value))return cont(me);if(value=="?")return cont(expression,expect(":"),expr);return cont(expr)}if(type=="quasi"){return pass(quasi,me)}if(type==";")return;if(type=="(")return contCommasep(expressionNoComma,")","call",me);if(type==".")return cont(property,me);if(type=="[")return cont(pushlex("]"),maybeexpression,expect("]"),poplex,me)}function quasi(type,value){if(type!="quasi")return pass();if(value.slice(value.length-2)!="${")return cont(quasi);return cont(expression,continueQuasi)}function continueQuasi(type){if(type=="}"){cx.marked="string-2";cx.state.tokenize=tokenQuasi;return cont(quasi)}}function arrowBody(type){findFatArrow(cx.stream,cx.state);return pass(type=="{"?statement:expression)}function arrowBodyNoComma(type){findFatArrow(cx.stream,cx.state);return pass(type=="{"?statement:expressionNoComma)}function maybeTarget(noComma){return function(type){if(type==".")return cont(noComma?targetNoComma:target);else return pass(noComma?expressionNoComma:expression)}}function target(_,value){if(value=="target"){cx.marked="keyword";return cont(maybeoperatorComma)}}function targetNoComma(_,value){if(value=="target"){cx.marked="keyword";return cont(maybeoperatorNoComma)}}function maybelabel(type){if(type==":")return cont(poplex,statement);return pass(maybeoperatorComma,expect(";"),poplex)}function property(type){if(type=="variable"){cx.marked="property";return cont()}}function objprop(type,value){if(type=="async"){cx.marked="property";return cont(objprop)}else if(type=="variable"||cx.style=="keyword"){cx.marked="property";if(value=="get"||value=="set")return cont(getterSetter);return cont(afterprop)}else if(type=="number"||type=="string"){cx.marked=jsonldMode?"property":cx.style+" property";return cont(afterprop)}else if(type=="jsonld-keyword"){return cont(afterprop)}else if(type=="modifier"){return cont(objprop)}else if(type=="["){return cont(expression,expect("]"),afterprop)}else if(type=="spread"){return cont(expression)}else if(type==":"){return pass(afterprop)}}function getterSetter(type){if(type!="variable")return pass(afterprop);cx.marked="property";return cont(functiondef)}function afterprop(type){if(type==":")return cont(expressionNoComma);if(type=="(")return pass(functiondef)}function commasep(what,end){function proceed(type,value){if(type==","){var lex=cx.state.lexical;if(lex.info=="call")lex.pos=(lex.pos||0)+1;return cont(function(type,value){if(type==end||value==end)return pass();return pass(what)},proceed)}if(type==end||value==end)return cont();return cont(expect(end))}return function(type,value){if(type==end||value==end)return cont();return pass(what,proceed)}}function contCommasep(what,end,info){for(var i=3;i<arguments.length;i++)cx.cc.push(arguments[i]);return cont(pushlex(end,info),commasep(what,end),poplex)}function block(type){if(type=="}")return cont();return pass(statement,block)}function maybetype(type,value){if(isTS){if(type==":")return cont(typeexpr);if(value=="?")return cont(maybetype)}}function maybedefault(_,value){if(value=="=")return cont(expressionNoComma)}function typeexpr(type){if(type=="variable"){cx.marked="variable-3";return cont(afterType)}if(type=="{")return cont(commasep(typeprop,"}"));if(type=="(")return cont(commasep(typearg,")"),maybeReturnType)}function maybeReturnType(type){if(type=="=>")return cont(typeexpr)}function typeprop(type){if(type=="variable"||cx.style=="keyword"){cx.marked="property";return cont(typeprop)}else if(type==":"){return cont(typeexpr)}}function typearg(type){if(type=="variable")return cont(typearg);else if(type==":")return cont(typeexpr)}function afterType(type,value){if(value=="<")return cont(commasep(typeexpr,">"),afterType);if(type=="[")return cont(expect("]"),afterType)}function vardef(){return pass(pattern,maybetype,maybeAssign,vardefCont)}function pattern(type,value){if(type=="modifier")return cont(pattern);if(type=="variable"){register(value);return cont()}if(type=="spread")return cont(pattern);if(type=="[")return contCommasep(pattern,"]");if(type=="{")return contCommasep(proppattern,"}")}function proppattern(type,value){if(type=="variable"&&!cx.stream.match(/^\s*:/,false)){register(value);return cont(maybeAssign)}if(type=="variable")cx.marked="property";if(type=="spread")return cont(pattern);if(type=="}")return pass();return cont(expect(":"),pattern,maybeAssign)}function maybeAssign(_type,value){if(value=="=")return cont(expressionNoComma)}function vardefCont(type){if(type==",")return cont(vardef)}function maybeelse(type,value){if(type=="keyword b"&&value=="else")return cont(pushlex("form","else"),statement,poplex)}function forspec(type){if(type=="(")return cont(pushlex(")"),forspec1,expect(")"),poplex)}function forspec1(type){if(type=="var")return cont(vardef,expect(";"),forspec2);if(type==";")return cont(forspec2);if(type=="variable")return cont(formaybeinof);return pass(expression,expect(";"),forspec2)}function formaybeinof(_type,value){if(value=="in"||value=="of"){cx.marked="keyword";return cont(expression)}return cont(maybeoperatorComma,forspec2)}function forspec2(type,value){if(type==";")return cont(forspec3);if(value=="in"||value=="of"){cx.marked="keyword";return cont(expression)}return pass(expression,expect(";"),forspec3)}function forspec3(type){if(type!=")")cont(expression)}function functiondef(type,value){if(value=="*"){cx.marked="keyword";return cont(functiondef)}if(type=="variable"){register(value);return cont(functiondef)}if(type=="(")return cont(pushcontext,pushlex(")"),commasep(funarg,")"),poplex,maybetype,statement,popcontext)}function funarg(type){if(type=="spread")return cont(funarg);return pass(pattern,maybetype,maybedefault)}function className(type,value){if(type=="variable"){register(value);return cont(classNameAfter)}}function classNameAfter(type,value){if(value=="extends")return cont(isTS?typeexpr:expression,classNameAfter);if(type=="{")return cont(pushlex("}"),classBody,poplex)}function classBody(type,value){if(type=="variable"||cx.style=="keyword"){if((value=="static"||value=="get"||value=="set"||isTS&&(value=="public"||value=="private"||value=="protected"))&&cx.stream.match(/^\s+[\w$\xa1-\uffff]/,false)){cx.marked="keyword";return cont(classBody)}cx.marked="property";return cont(isTS?classfield:functiondef,classBody)}if(value=="*"){cx.marked="keyword";return cont(classBody)}if(type==";")return cont(classBody);if(type=="}")return cont()}function classfield(type){if(type==":")return cont(typeexpr);return pass(functiondef)}function afterExport(_type,value){if(value=="*"){cx.marked="keyword";return cont(maybeFrom,expect(";"))}if(value=="default"){cx.marked="keyword";return cont(expression,expect(";"))}return pass(statement)}function afterImport(type){if(type=="string")return cont();return pass(importSpec,maybeFrom)}function importSpec(type,value){if(type=="{")return contCommasep(importSpec,"}");if(type=="variable")register(value);if(value=="*")cx.marked="keyword";return cont(maybeAs)}function maybeAs(_type,value){if(value=="as"){cx.marked="keyword";return cont(importSpec)}}function maybeFrom(_type,value){if(value=="from"){cx.marked="keyword";return cont(expression)}}function arrayLiteral(type){if(type=="]")return cont();return pass(commasep(expressionNoComma,"]"))}function isContinuedStatement(state,textAfter){return state.lastType=="operator"||state.lastType==","||isOperatorChar.test(textAfter.charAt(0))||/[,.]/.test(textAfter.charAt(0))}return{startState:function(basecolumn){var state={tokenize:tokenBase,lastType:"sof",cc:[],lexical:new JSLexical((basecolumn||0)-indentUnit,0,"block",false),localVars:parserConfig.localVars,context:parserConfig.localVars&&{vars:parserConfig.localVars},indented:basecolumn||0};if(parserConfig.globalVars&&typeof parserConfig.globalVars=="object")state.globalVars=parserConfig.globalVars;return state},token:function(stream,state){if(stream.sol()){if(!state.lexical.hasOwnProperty("align"))state.lexical.align=false;state.indented=stream.indentation();findFatArrow(stream,state)}if(state.tokenize!=tokenComment&&stream.eatSpace())return null;var style=state.tokenize(stream,state);if(type=="comment")return style;state.lastType=type=="operator"&&(content=="++"||content=="--")?"incdec":type;return parseJS(state,style,type,content,stream)},indent:function(state,textAfter){if(state.tokenize==tokenComment)return CodeMirror.Pass;if(state.tokenize!=tokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical,top;if(!/^\s*else\b/.test(textAfter))for(var i=state.cc.length-1;i>=0;--i){var c=state.cc[i];if(c==poplex)lexical=lexical.prev;else if(c!=maybeelse)break}while((lexical.type=="stat"||lexical.type=="form")&&(firstChar=="}"||(top=state.cc[state.cc.length-1])&&(top==maybeoperatorComma||top==maybeoperatorNoComma)&&!/^[,\.=+\-*:?[\(]/.test(textAfter)))lexical=lexical.prev;if(statementIndent&&lexical.type==")"&&lexical.prev.type=="stat")lexical=lexical.prev;var type=lexical.type,closing=firstChar==type;if(type=="vardef")return lexical.indented+(state.lastType=="operator"||state.lastType==","?lexical.info+1:0);else if(type=="form"&&firstChar=="{")return lexical.indented;else if(type=="form")return lexical.indented+indentUnit;else if(type=="stat")return lexical.indented+(isContinuedStatement(state,textAfter)?statementIndent||indentUnit:0);else if(lexical.info=="switch"&&!closing&&parserConfig.doubleIndentSwitch!=false)return lexical.indented+(/^(?:case|default)\b/.test(textAfter)?indentUnit:2*indentUnit);else if(lexical.align)return lexical.column+(closing?0:1);else return lexical.indented+(closing?0:indentUnit)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:jsonMode?null:"/*",blockCommentEnd:jsonMode?null:"*/",lineComment:jsonMode?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:jsonMode?"json":"javascript",jsonldMode:jsonldMode,jsonMode:jsonMode,expressionAllowed:expressionAllowed,skipExpression:function(state){var top=state.cc[state.cc.length-1];if(top==expression||top==expressionNoComma)state.cc.pop()}}});CodeMirror.registerHelper("wordChars","javascript",/[\w$]/);CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/x-javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});CodeMirror.defineMIME("application/x-json",{name:"javascript",json:true});CodeMirror.defineMIME("application/ld+json",{name:"javascript",jsonld:true});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:true});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:true})})},{codemirror:77}],357:[function(require,module,exports){(function(process,__filename){(function(){"use strict";function amdefine(module,requireFn){"use strict";var defineCache={},loaderCache={},alreadyCalled=false,path=require("path"),makeRequire,stringRequire;function trimDots(ary){var i,part;for(i=0;ary[i];i+=1){part=ary[i];if(part==="."){ary.splice(i,1);i-=1}else if(part===".."){if(i===1&&(ary[2]===".."||ary[0]==="..")){break}else if(i>0){ary.splice(i-1,2);i-=2}}}}function normalize(name,baseName){var baseParts;if(name&&name.charAt(0)==="."){if(baseName){baseParts=baseName.split("/");baseParts=baseParts.slice(0,baseParts.length-1);baseParts=baseParts.concat(name.split("/"));trimDots(baseParts);name=baseParts.join("/")}}return name}function makeNormalize(relName){return function(name){return normalize(name,relName)}}function makeLoad(id){function load(value){loaderCache[id]=value}load.fromText=function(id,text){throw new Error("amdefine does not implement load.fromText")};return load}makeRequire=function(systemRequire,exports,module,relId){function amdRequire(deps,callback){if(typeof deps==="string"){return stringRequire(systemRequire,exports,module,deps,relId)}else{deps=deps.map(function(depName){return stringRequire(systemRequire,exports,module,depName,relId)});if(callback){process.nextTick(function(){callback.apply(null,deps)})}}}amdRequire.toUrl=function(filePath){if(filePath.indexOf(".")===0){return normalize(filePath,path.dirname(module.filename))}else{return filePath}};return amdRequire};requireFn=requireFn||function req(){return module.require.apply(module,arguments)};function runFactory(id,deps,factory){var r,e,m,result;if(id){e=loaderCache[id]={};m={id:id,uri:__filename,exports:e};r=makeRequire(requireFn,e,m,id)}else{if(alreadyCalled){throw new Error("amdefine with no module ID cannot be called more than once per file.")}alreadyCalled=true;e=module.exports;m=module;r=makeRequire(requireFn,e,m,module.id)}if(deps){deps=deps.map(function(depName){return r(depName)})}if(typeof factory==="function"){result=factory.apply(m.exports,deps)}else{result=factory}if(result!==undefined){m.exports=result;if(id){loaderCache[id]=m.exports}}}stringRequire=function(systemRequire,exports,module,id,relId){var index=id.indexOf("!"),originalId=id,prefix,plugin;if(index===-1){id=normalize(id,relId);if(id==="require"){return makeRequire(systemRequire,exports,module,relId)}else if(id==="exports"){return exports}else if(id==="module"){return module}else if(loaderCache.hasOwnProperty(id)){return loaderCache[id]}else if(defineCache[id]){runFactory.apply(null,defineCache[id]);return loaderCache[id]}else{if(systemRequire){return systemRequire(originalId)}else{throw new Error("No module with ID: "+id)}}}else{prefix=id.substring(0,index);id=id.substring(index+1,id.length);plugin=stringRequire(systemRequire,exports,module,prefix,relId);if(plugin.normalize){id=plugin.normalize(id,makeNormalize(relId))}else{id=normalize(id,relId)}if(loaderCache[id]){return loaderCache[id]}else{plugin.load(id,makeRequire(systemRequire,exports,module,relId),makeLoad(id),{});return loaderCache[id]}}};function define(id,deps,factory){if(Array.isArray(id)){factory=deps;deps=id;id=undefined}else if(typeof id!=="string"){factory=id;id=deps=undefined}if(deps&&!Array.isArray(deps)){factory=deps;deps=undefined}if(!deps){deps=["require","exports","module"]}if(id){defineCache[id]=[id,deps,factory]}else{runFactory(id,deps,factory)}}define.require=function(id){if(loaderCache[id]){return loaderCache[id]}if(defineCache[id]){runFactory.apply(null,defineCache[id]);return loaderCache[id]}};define.amd={};return define}module.exports=amdefine}).call(this)}).call(this,require("_process"),"/node_modules/webppl-viz/node_modules/amdefine/amdefine.js")},{_process:25,path:24}],358:[function(require,module,exports){arguments[4][53][0].apply(exports,arguments)},{"../lib/shared":374,"../lib/types":375,"./es7":363,dup:53}],359:[function(require,module,exports){module.exports=function(fork){fork.use(require("./babel"));fork.use(require("./flow"));var types=fork.use(require("../lib/types"));var defaults=fork.use(require("../lib/shared")).defaults;var def=types.Type.def;var or=types.Type.or;def("Directive").bases("Node").build("value").field("value",def("DirectiveLiteral"));def("DirectiveLiteral").bases("Node","Expression").build("value").field("value",String,defaults["use strict"]);def("BlockStatement").bases("Statement").build("body").field("body",[def("Statement")]).field("directives",[def("Directive")],defaults.emptyArray);def("Program").bases("Node").build("body").field("body",[def("Statement")]).field("directives",[def("Directive")],defaults.emptyArray);def("StringLiteral").bases("Literal").build("value").field("value",String);def("NumericLiteral").bases("Literal").build("value").field("value",Number);def("NullLiteral").bases("Literal").build();def("BooleanLiteral").bases("Literal").build("value").field("value",Boolean);def("RegExpLiteral").bases("Literal").build("pattern","flags").field("pattern",String).field("flags",String);var ObjectExpressionProperty=or(def("Property"),def("ObjectMethod"),def("ObjectProperty"),def("SpreadProperty"));def("ObjectExpression").bases("Expression").build("properties").field("properties",[ObjectExpressionProperty]);def("ObjectMethod").bases("Node","Function").build("kind","key","params","body","computed").field("kind",or("method","get","set")).field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("params",[def("Pattern")]).field("body",def("BlockStatement")).field("computed",Boolean,defaults["false"]).field("generator",Boolean,defaults["false"]).field("async",Boolean,defaults["false"]).field("decorators",or([def("Decorator")],null),defaults["null"]);def("ObjectProperty").bases("Node").build("key","value").field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("value",or(def("Expression"),def("Pattern"))).field("computed",Boolean,defaults["false"]);var ClassBodyElement=or(def("MethodDefinition"),def("VariableDeclarator"),def("ClassPropertyDefinition"),def("ClassProperty"),def("ClassMethod"));def("ClassBody").bases("Declaration").build("body").field("body",[ClassBodyElement]);def("ClassMethod").bases("Declaration","Function").build("kind","key","params","body","computed","static").field("kind",or("get","set","method","constructor")).field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("params",[def("Pattern")]).field("body",def("BlockStatement")).field("computed",Boolean,defaults["false"]).field("static",Boolean,defaults["false"]).field("generator",Boolean,defaults["false"]).field("async",Boolean,defaults["false"]).field("decorators",or([def("Decorator")],null),defaults["null"]);var ObjectPatternProperty=or(def("Property"),def("PropertyPattern"),def("SpreadPropertyPattern"),def("SpreadProperty"),def("ObjectProperty"),def("RestProperty"));def("ObjectPattern").bases("Pattern").build("properties").field("properties",[ObjectPatternProperty]).field("decorators",or([def("Decorator")],null),defaults["null"]);def("SpreadProperty").bases("Node").build("argument").field("argument",def("Expression"));def("RestProperty").bases("Node").build("argument").field("argument",def("Expression"));def("ForAwaitStatement").bases("Statement").build("left","right","body").field("left",or(def("VariableDeclaration"),def("Expression"))).field("right",def("Expression")).field("body",def("Statement"));def("Import").bases("Expression").build()}},{"../lib/shared":374,"../lib/types":375,"./babel":358,"./flow":365}],360:[function(require,module,exports){arguments[4][56][0].apply(exports,arguments)},{"../lib/shared":374,"../lib/types":375,dup:56}],361:[function(require,module,exports){arguments[4][57][0].apply(exports,arguments)},{"../lib/types":375,"./core":360,dup:57}],362:[function(require,module,exports){module.exports=function(fork){fork.use(require("./core"));var types=fork.use(require("../lib/types"));var def=types.Type.def;var or=types.Type.or;var defaults=fork.use(require("../lib/shared")).defaults;def("Function").field("generator",Boolean,defaults["false"]).field("expression",Boolean,defaults["false"]).field("defaults",[or(def("Expression"),null)],defaults.emptyArray).field("rest",or(def("Identifier"),null),defaults["null"]);def("RestElement").bases("Pattern").build("argument").field("argument",def("Pattern"));def("SpreadElementPattern").bases("Pattern").build("argument").field("argument",def("Pattern"));def("FunctionDeclaration").build("id","params","body","generator","expression");def("FunctionExpression").build("id","params","body","generator","expression");def("ArrowFunctionExpression").bases("Function","Expression").build("params","body","expression").field("id",null,defaults["null"]).field("body",or(def("BlockStatement"),def("Expression"))).field("generator",false,defaults["false"]);def("YieldExpression").bases("Expression").build("argument","delegate").field("argument",or(def("Expression"),null)).field("delegate",Boolean,defaults["false"]);def("GeneratorExpression").bases("Expression").build("body","blocks","filter").field("body",def("Expression")).field("blocks",[def("ComprehensionBlock")]).field("filter",or(def("Expression"),null));def("ComprehensionExpression").bases("Expression").build("body","blocks","filter").field("body",def("Expression")).field("blocks",[def("ComprehensionBlock")]).field("filter",or(def("Expression"),null));def("ComprehensionBlock").bases("Node").build("left","right","each").field("left",def("Pattern")).field("right",def("Expression")).field("each",Boolean);def("Property").field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("value",or(def("Expression"),def("Pattern"))).field("method",Boolean,defaults["false"]).field("shorthand",Boolean,defaults["false"]).field("computed",Boolean,defaults["false"]);def("PropertyPattern").bases("Pattern").build("key","pattern").field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("pattern",def("Pattern")).field("computed",Boolean,defaults["false"]);def("ObjectPattern").bases("Pattern").build("properties").field("properties",[or(def("PropertyPattern"),def("Property"))]);def("ArrayPattern").bases("Pattern").build("elements").field("elements",[or(def("Pattern"),null)]);def("MethodDefinition").bases("Declaration").build("kind","key","value","static").field("kind",or("constructor","method","get","set")).field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("value",def("Function")).field("computed",Boolean,defaults["false"]).field("static",Boolean,defaults["false"]);def("SpreadElement").bases("Node").build("argument").field("argument",def("Expression"));def("ArrayExpression").field("elements",[or(def("Expression"),def("SpreadElement"),def("RestElement"),null)]);def("NewExpression").field("arguments",[or(def("Expression"),def("SpreadElement"))]);def("CallExpression").field("arguments",[or(def("Expression"),def("SpreadElement"))]);def("AssignmentPattern").bases("Pattern").build("left","right").field("left",def("Pattern")).field("right",def("Expression"));var ClassBodyElement=or(def("MethodDefinition"),def("VariableDeclarator"),def("ClassPropertyDefinition"),def("ClassProperty"));def("ClassProperty").bases("Declaration").build("key").field("key",or(def("Literal"),def("Identifier"),def("Expression"))).field("computed",Boolean,defaults["false"]);def("ClassPropertyDefinition").bases("Declaration").build("definition").field("definition",ClassBodyElement);def("ClassBody").bases("Declaration").build("body").field("body",[ClassBodyElement]);def("ClassDeclaration").bases("Declaration").build("id","body","superClass").field("id",or(def("Identifier"),null)).field("body",def("ClassBody")).field("superClass",or(def("Expression"),null),defaults["null"]);def("ClassExpression").bases("Expression").build("id","body","superClass").field("id",or(def("Identifier"),null),defaults["null"]).field("body",def("ClassBody")).field("superClass",or(def("Expression"),null),defaults["null"]).field("implements",[def("ClassImplements")],defaults.emptyArray);def("ClassImplements").bases("Node").build("id").field("id",def("Identifier")).field("superClass",or(def("Expression"),null),defaults["null"]);def("Specifier").bases("Node");def("ModuleSpecifier").bases("Specifier").field("local",or(def("Identifier"),null),defaults["null"]).field("id",or(def("Identifier"),null),defaults["null"]).field("name",or(def("Identifier"),null),defaults["null"]);def("TaggedTemplateExpression").bases("Expression").build("tag","quasi").field("tag",def("Expression")).field("quasi",def("TemplateLiteral"));def("TemplateLiteral").bases("Expression").build("quasis","expressions").field("quasis",[def("TemplateElement")]).field("expressions",[def("Expression")]);def("TemplateElement").bases("Node").build("value","tail").field("value",{cooked:String,raw:String}).field("tail",Boolean)}},{"../lib/shared":374,"../lib/types":375,"./core":360}],363:[function(require,module,exports){arguments[4][59][0].apply(exports,arguments)},{"../lib/shared":374,"../lib/types":375,"./es6":362,dup:59}],364:[function(require,module,exports){arguments[4][60][0].apply(exports,arguments)},{"../lib/shared":374,"../lib/types":375,"./es7":363,dup:60}],365:[function(require,module,exports){module.exports=function(fork){fork.use(require("./es7"));var types=fork.use(require("../lib/types"));var def=types.Type.def;var or=types.Type.or;var defaults=fork.use(require("../lib/shared")).defaults;def("Type").bases("Node");def("AnyTypeAnnotation").bases("Type").build();def("EmptyTypeAnnotation").bases("Type").build();def("MixedTypeAnnotation").bases("Type").build();def("VoidTypeAnnotation").bases("Type").build();def("NumberTypeAnnotation").bases("Type").build();def("NumberLiteralTypeAnnotation").bases("Type").build("value","raw").field("value",Number).field("raw",String);def("StringTypeAnnotation").bases("Type").build();def("StringLiteralTypeAnnotation").bases("Type").build("value","raw").field("value",String).field("raw",String);def("BooleanTypeAnnotation").bases("Type").build();def("BooleanLiteralTypeAnnotation").bases("Type").build("value","raw").field("value",Boolean).field("raw",String);def("TypeAnnotation").bases("Node").build("typeAnnotation").field("typeAnnotation",def("Type"));def("NullableTypeAnnotation").bases("Type").build("typeAnnotation").field("typeAnnotation",def("Type"));def("NullLiteralTypeAnnotation").bases("Type").build();def("NullTypeAnnotation").bases("Type").build();def("ThisTypeAnnotation").bases("Type").build();def("ExistsTypeAnnotation").bases("Type").build();def("ExistentialTypeParam").bases("Type").build();def("FunctionTypeAnnotation").bases("Type").build("params","returnType","rest","typeParameters").field("params",[def("FunctionTypeParam")]).field("returnType",def("Type")).field("rest",or(def("FunctionTypeParam"),null)).field("typeParameters",or(def("TypeParameterDeclaration"),null));def("FunctionTypeParam").bases("Node").build("name","typeAnnotation","optional").field("name",def("Identifier")).field("typeAnnotation",def("Type")).field("optional",Boolean);def("ArrayTypeAnnotation").bases("Type").build("elementType").field("elementType",def("Type"));def("ObjectTypeAnnotation").bases("Type").build("properties","indexers","callProperties").field("properties",[def("ObjectTypeProperty")]).field("indexers",[def("ObjectTypeIndexer")],defaults.emptyArray).field("callProperties",[def("ObjectTypeCallProperty")],defaults.emptyArray).field("exact",Boolean,defaults["false"]);def("ObjectTypeProperty").bases("Node").build("key","value","optional").field("key",or(def("Literal"),def("Identifier"))).field("value",def("Type")).field("optional",Boolean).field("variance",or("plus","minus",null),defaults["null"]);def("ObjectTypeIndexer").bases("Node").build("id","key","value").field("id",def("Identifier")).field("key",def("Type")).field("value",def("Type")).field("variance",or("plus","minus",null),defaults["null"]);def("ObjectTypeCallProperty").bases("Node").build("value").field("value",def("FunctionTypeAnnotation")).field("static",Boolean,defaults["false"]);def("QualifiedTypeIdentifier").bases("Node").build("qualification","id").field("qualification",or(def("Identifier"),def("QualifiedTypeIdentifier"))).field("id",def("Identifier"));def("GenericTypeAnnotation").bases("Type").build("id","typeParameters").field("id",or(def("Identifier"),def("QualifiedTypeIdentifier"))).field("typeParameters",or(def("TypeParameterInstantiation"),null));def("MemberTypeAnnotation").bases("Type").build("object","property").field("object",def("Identifier")).field("property",or(def("MemberTypeAnnotation"),def("GenericTypeAnnotation")));def("UnionTypeAnnotation").bases("Type").build("types").field("types",[def("Type")]);def("IntersectionTypeAnnotation").bases("Type").build("types").field("types",[def("Type")]);def("TypeofTypeAnnotation").bases("Type").build("argument").field("argument",def("Type"));def("Identifier").field("typeAnnotation",or(def("TypeAnnotation"),null),defaults["null"]);def("TypeParameterDeclaration").bases("Node").build("params").field("params",[def("TypeParameter")]);def("TypeParameterInstantiation").bases("Node").build("params").field("params",[def("Type")]);def("TypeParameter").bases("Type").build("name","variance","bound").field("name",String).field("variance",or("plus","minus",null),defaults["null"]).field("bound",or(def("TypeAnnotation"),null),defaults["null"]);def("Function").field("returnType",or(def("TypeAnnotation"),null),defaults["null"]).field("typeParameters",or(def("TypeParameterDeclaration"),null),defaults["null"]);def("ClassProperty").build("key","value","typeAnnotation","static").field("value",or(def("Expression"),null)).field("typeAnnotation",or(def("TypeAnnotation"),null)).field("static",Boolean,defaults["false"]).field("variance",or("plus","minus",null),defaults["null"]);def("ClassImplements").field("typeParameters",or(def("TypeParameterInstantiation"),null),defaults["null"]);def("InterfaceDeclaration").bases("Declaration").build("id","body","extends").field("id",def("Identifier")).field("typeParameters",or(def("TypeParameterDeclaration"),null),defaults["null"]).field("body",def("ObjectTypeAnnotation")).field("extends",[def("InterfaceExtends")]);def("DeclareInterface").bases("InterfaceDeclaration").build("id","body","extends");def("InterfaceExtends").bases("Node").build("id").field("id",def("Identifier")).field("typeParameters",or(def("TypeParameterInstantiation"),null));def("TypeAlias").bases("Declaration").build("id","typeParameters","right").field("id",def("Identifier")).field("typeParameters",or(def("TypeParameterDeclaration"),null)).field("right",def("Type"));def("DeclareTypeAlias").bases("TypeAlias").build("id","typeParameters","right");def("TypeCastExpression").bases("Expression").build("expression","typeAnnotation").field("expression",def("Expression")).field("typeAnnotation",def("TypeAnnotation"));def("TupleTypeAnnotation").bases("Type").build("types").field("types",[def("Type")]);def("DeclareVariable").bases("Statement").build("id").field("id",def("Identifier"));def("DeclareFunction").bases("Statement").build("id").field("id",def("Identifier"));def("DeclareClass").bases("InterfaceDeclaration").build("id");def("DeclareModule").bases("Statement").build("id","body").field("id",or(def("Identifier"),def("Literal"))).field("body",def("BlockStatement"));def("DeclareModuleExports").bases("Statement").build("typeAnnotation").field("typeAnnotation",def("Type"));def("DeclareExportDeclaration").bases("Declaration").build("default","declaration","specifiers","source").field("default",Boolean).field("declaration",or(def("DeclareVariable"),def("DeclareFunction"),def("DeclareClass"),def("Type"),null)).field("specifiers",[or(def("ExportSpecifier"),def("ExportBatchSpecifier"))],defaults.emptyArray).field("source",or(def("Literal"),null),defaults["null"]);def("DeclareExportAllDeclaration").bases("Declaration").build("source").field("source",or(def("Literal"),null),defaults["null"])}},{"../lib/shared":374,"../lib/types":375,"./es7":363}],366:[function(require,module,exports){module.exports=function(fork){fork.use(require("./es7"));var types=fork.use(require("../lib/types"));var def=types.Type.def;var or=types.Type.or;var defaults=fork.use(require("../lib/shared")).defaults;def("JSXAttribute").bases("Node").build("name","value").field("name",or(def("JSXIdentifier"),def("JSXNamespacedName"))).field("value",or(def("Literal"),def("JSXExpressionContainer"),null),defaults["null"]);def("JSXIdentifier").bases("Identifier").build("name").field("name",String);def("JSXNamespacedName").bases("Node").build("namespace","name").field("namespace",def("JSXIdentifier")).field("name",def("JSXIdentifier"));def("JSXMemberExpression").bases("MemberExpression").build("object","property").field("object",or(def("JSXIdentifier"),def("JSXMemberExpression"))).field("property",def("JSXIdentifier")).field("computed",Boolean,defaults.false);var JSXElementName=or(def("JSXIdentifier"),def("JSXNamespacedName"),def("JSXMemberExpression"));def("JSXSpreadAttribute").bases("Node").build("argument").field("argument",def("Expression"));var JSXAttributes=[or(def("JSXAttribute"),def("JSXSpreadAttribute"))];def("JSXExpressionContainer").bases("Expression").build("expression").field("expression",def("Expression"));def("JSXElement").bases("Expression").build("openingElement","closingElement","children").field("openingElement",def("JSXOpeningElement")).field("closingElement",or(def("JSXClosingElement"),null),defaults["null"]).field("children",[or(def("JSXElement"),def("JSXExpressionContainer"),def("JSXText"),def("Literal"))],defaults.emptyArray).field("name",JSXElementName,function(){return this.openingElement.name},true).field("selfClosing",Boolean,function(){return this.openingElement.selfClosing},true).field("attributes",JSXAttributes,function(){return this.openingElement.attributes},true);def("JSXOpeningElement").bases("Node").build("name","attributes","selfClosing").field("name",JSXElementName).field("attributes",JSXAttributes,defaults.emptyArray).field("selfClosing",Boolean,defaults["false"]);def("JSXClosingElement").bases("Node").build("name").field("name",JSXElementName);def("JSXText").bases("Literal").build("value").field("value",String);def("JSXEmptyExpression").bases("Expression").build()}},{"../lib/shared":374,"../lib/types":375,"./es7":363}],367:[function(require,module,exports){module.exports=function(fork){fork.use(require("./core"));var types=fork.use(require("../lib/types"));var def=types.Type.def;var or=types.Type.or;var shared=fork.use(require("../lib/shared"));var geq=shared.geq;var defaults=shared.defaults;def("Function").field("body",or(def("BlockStatement"),def("Expression")));def("ForInStatement").build("left","right","body","each").field("each",Boolean,defaults["false"]);def("ForOfStatement").bases("Statement").build("left","right","body").field("left",or(def("VariableDeclaration"),def("Expression"))).field("right",def("Expression")).field("body",def("Statement"));def("LetStatement").bases("Statement").build("head","body").field("head",[def("VariableDeclarator")]).field("body",def("Statement"));def("LetExpression").bases("Expression").build("head","body").field("head",[def("VariableDeclarator")]).field("body",def("Expression"));def("GraphExpression").bases("Expression").build("index","expression").field("index",geq(0)).field("expression",def("Literal"));def("GraphIndexExpression").bases("Expression").build("index").field("index",geq(0))}},{"../lib/shared":374,"../lib/types":375,"./core":360}],368:[function(require,module,exports){arguments[4][64][0].apply(exports,arguments)},{"./lib/equiv":369,"./lib/node-path":370,"./lib/path":372,"./lib/path-visitor":371,"./lib/types":375,dup:64}],369:[function(require,module,exports){arguments[4][65][0].apply(exports,arguments)},{"../lib/types":375,dup:65}],370:[function(require,module,exports){arguments[4][66][0].apply(exports,arguments)},{"./path":372,"./scope":373,"./types":375,dup:66}],371:[function(require,module,exports){arguments[4][67][0].apply(exports,arguments)},{"./node-path":370,"./types":375,dup:67}],372:[function(require,module,exports){arguments[4][68][0].apply(exports,arguments)},{"./types":375,dup:68}],373:[function(require,module,exports){arguments[4][69][0].apply(exports,arguments)},{"./node-path":370,"./types":375,dup:69}],374:[function(require,module,exports){arguments[4][70][0].apply(exports,arguments)},{"../lib/types":375,dup:70}],375:[function(require,module,exports){arguments[4][71][0].apply(exports,arguments)},{dup:71}],376:[function(require,module,exports){arguments[4][72][0].apply(exports,arguments)},{"./def/babel":358,"./def/babel6":359,"./def/core":360,"./def/e4x":361,"./def/es6":362,"./def/es7":363,"./def/esprima":364,"./def/flow":365,"./def/jsx":366,"./def/mozilla":367,"./fork":368,dup:72}],377:[function(require,module,exports){var charenc={utf8:{stringToBytes:function(str){return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)))},bytesToString:function(bytes){return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)))}},bin:{stringToBytes:function(str){for(var bytes=[],i=0;i<str.length;i++)bytes.push(str.charCodeAt(i)&255);return bytes},bytesToString:function(bytes){for(var str=[],i=0;i<bytes.length;i++)str.push(String.fromCharCode(bytes[i]));return str.join("")}}};module.exports=charenc},{}],378:[function(require,module,exports){(function(){var base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",crypt={rotl:function(n,b){return n<<b|n>>>32-b},rotr:function(n,b){return n<<32-b|n>>>b},endian:function(n){if(n.constructor==Number){return crypt.rotl(n,8)&16711935|crypt.rotl(n,24)&4278255360}for(var i=0;i<n.length;i++)n[i]=crypt.endian(n[i]);return n},randomBytes:function(n){for(var bytes=[];n>0;n--)bytes.push(Math.floor(Math.random()*256));return bytes},bytesToWords:function(bytes){for(var words=[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words},wordsToBytes:function(words){for(var bytes=[],b=0;b<words.length*32;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++){hex.push((bytes[i]>>>4).toString(16));hex.push((bytes[i]&15).toString(16))}return hex.join("")},hexToBytes:function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.substr(c,2),16));return bytes},bytesToBase64:function(bytes){for(var base64=[],i=0;i<bytes.length;i+=3){var triplet=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2];for(var j=0;j<4;j++)if(i*8+j*6<=bytes.length*8)base64.push(base64map.charAt(triplet>>>6*(3-j)&63));else base64.push("=")}return base64.join("")},base64ToBytes:function(base64){base64=base64.replace(/[^A-Z0-9+\/]/gi,"");for(var bytes=[],i=0,imod4=0;i<base64.length;imod4=++i%4){if(imod4==0)continue;bytes.push((base64map.indexOf(base64.charAt(i-1))&Math.pow(2,-2*imod4+8)-1)<<imod4*2|base64map.indexOf(base64.charAt(i))>>>6-imod4*2)}return bytes}};module.exports=crypt})()},{}],379:[function(require,module,exports){"use strict";var copy=require("es5-ext/object/copy"),map=require("es5-ext/object/map"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),bind=Function.prototype.bind,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty,define;define=function(name,desc,bindTo){var value=validValue(desc)&&callable(desc.value),dgs;dgs=copy(desc);delete dgs.writable;delete dgs.value;dgs.get=function(){if(hasOwnProperty.call(this,name))return value;desc.value=bind.call(value,bindTo==null?this:this[bindTo]);defineProperty(this,name,desc);return this[name]};return dgs};module.exports=function(props){var bindTo=arguments[1];return map(props,function(desc,name){return define(name,desc,bindTo)})}},{"es5-ext/object/copy":423,"es5-ext/object/map":431,"es5-ext/object/valid-callable":437,"es5-ext/object/valid-value":439}],380:[function(require,module,exports){"use strict";var assign=require("es5-ext/object/assign"),normalizeOpts=require("es5-ext/object/normalize-options"),isCallable=require("es5-ext/object/is-callable"),contains=require("es5-ext/string/#/contains"),d;d=module.exports=function(dscr,value){var c,e,w,options,desc;if(arguments.length<2||typeof dscr!=="string"){options=value;value=dscr;dscr=null}else{options=arguments[2]}if(dscr==null){c=w=true;e=false}else{c=contains.call(dscr,"c");e=contains.call(dscr,"e");w=contains.call(dscr,"w")}desc={value:value,configurable:c,enumerable:e,writable:w};return!options?desc:assign(normalizeOpts(options),desc)};d.gs=function(dscr,get,set){var c,e,options,desc;if(typeof dscr!=="string"){options=set;set=get;get=dscr;dscr=null}else{options=arguments[3]}if(get==null){get=undefined}else if(!isCallable(get)){options=get;get=set=undefined}else if(set==null){set=undefined}else if(!isCallable(set)){options=set;set=undefined}if(dscr==null){c=true;e=false}else{c=contains.call(dscr,"c");e=contains.call(dscr,"e")}desc={get:get,set:set,configurable:c,enumerable:e};return!options?desc:assign(normalizeOpts(options),desc)}},{"es5-ext/object/assign":420,"es5-ext/object/is-callable":426,"es5-ext/object/normalize-options":432,"es5-ext/string/#/contains":440}],381:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global.d3_dsv={})})(this,function(exports){"use strict";function dsv(delimiter){return new Dsv(delimiter)}function objectConverter(columns){return new Function("d","return {"+columns.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}")}function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}function inferColumns(rows){var columnSet=Object.create(null),columns=[];rows.forEach(function(row){for(var column in row){if(!(column in columnSet)){columns.push(columnSet[column]=column)}}});return columns}function Dsv(delimiter){var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);this.parse=function(text,f){var convert,columns,rows=this.parseRows(text,function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?customConverter(row,f):objectConverter(row)});rows.columns=columns;return rows};this.parseRows=function(text,f){var EOL={},EOF={},rows=[],N=text.length,I=0,n=0,t,eol;function token(){if(I>=N)return EOF;if(eol)return eol=false,EOL;var j=I,c;if(text.charCodeAt(j)===34){var i=j;while(i++<N){if(text.charCodeAt(i)===34){if(text.charCodeAt(i+1)!==34)break;++i}}I=i+2;c=text.charCodeAt(i+1);if(c===13){eol=true;if(text.charCodeAt(i+2)===10)++I}else if(c===10){eol=true}return text.slice(j+1,i).replace(/""/g,'"')}while(I<N){var k=1;c=text.charCodeAt(I++);if(c===10)eol=true;else if(c===13){eol=true;if(text.charCodeAt(I)===10)++I,++k}else if(c!==delimiterCode)continue;return text.slice(j,I-k)}return text.slice(j)}while((t=token())!==EOF){var a=[];while(t!==EOL&&t!==EOF){a.push(t);t=token()}if(f&&(a=f(a,n++))==null)continue;rows.push(a)}return rows};this.format=function(rows,columns){if(columns==null)columns=inferColumns(rows);return[columns.map(formatValue).join(delimiter)].concat(rows.map(function(row){return columns.map(function(column){return formatValue(row[column])}).join(delimiter)})).join("\n")};this.formatRows=function(rows){return rows.map(formatRow).join("\n")};function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return reFormat.test(text)?'"'+text.replace(/\"/g,'""')+'"':text}}dsv.prototype=Dsv.prototype;var csv=dsv(",");var tsv=dsv("\t");var version="0.1.14";exports.version=version;exports.dsv=dsv;exports.csv=csv;exports.tsv=tsv})},{}],382:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define("d3-format",["exports"],factory):factory(global.d3_format={})})(this,function(exports){"use strict";function formatDecimal(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent(x){return x=formatDecimal(Math.abs(x)),x?x[1]:NaN}function formatGroup(grouping,thousands){return function(value,width){var i=value.length,t=[],j=0,g=grouping[0],length=0;while(i>0&&g>0){if(length+g+1>width)g=Math.max(1,width-length);t.push(value.substring(i-=g,i+g));if((length+=g+1)>width)break;g=grouping[j=(j+1)%grouping.length]}return t.reverse().join(thousands)}}var prefixExponent;function formatPrefixAuto(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(exponent/3)))*3)+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,Math.max(0,p+i-1))[0]}function formatRounded(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}function formatDefault(x,p){x=x.toPrecision(p);out:for(var n=x.length,i=1,i0=-1,i1;i<n;++i){switch(x[i]){case".":i0=i1=i;break;case"0":if(i0===0)i0=i;i1=i;break;case"e":break out;default:if(i0>0)i0=0;break}}return i0>0?x.slice(0,i0)+x.slice(i1+1):x}var formatTypes={"":formatDefault,"%":function(x,p){return(x*100).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(x*100,p)},r:formatRounded,s:formatPrefixAuto,X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};var re=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function formatSpecifier(specifier){return new FormatSpecifier(specifier)}function FormatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match,fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zero=!!match[5],width=match[6]&&+match[6],comma=!!match[7],precision=match[8]&&+match[8].slice(1),type=match[9]||"";if(type==="n")comma=true,type="g";else if(!formatTypes[type])type="";if(zero||fill==="0"&&align==="=")zero=true,fill="0",align="=";this.fill=fill;this.align=align;this.sign=sign;this.symbol=symbol;this.zero=zero;this.width=width;this.comma=comma;this.precision=precision;this.type=type}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var prefixes=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function identity(x){return x}function locale(locale){var group=locale.grouping&&locale.thousands?formatGroup(locale.grouping,locale.thousands):identity,currency=locale.currency,decimal=locale.decimal;function format(specifier){specifier=formatSpecifier(specifier);var fill=specifier.fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,type=specifier.type;var prefix=symbol==="$"?currency[0]:symbol==="#"&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix=symbol==="$"?currency[1]:/[%p]/.test(type)?"%":"";var formatType=formatTypes[type],maybeSuffix=!type||/[defgprs%]/.test(type);precision=precision==null?type?6:12:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision));return function(value){var valuePrefix=prefix,valueSuffix=suffix;if(type==="c"){valueSuffix=formatType(value)+valueSuffix;value=""}else{value=+value;var valueNegative=(value<0||1/value<0)&&(value*=-1,true);value=formatType(value,precision);if(valueNegative){var i=-1,n=value.length,c;valueNegative=false;while(++i<n){if(c=value.charCodeAt(i),48<c&&c<58||type==="x"&&96<c&&c<103||type==="X"&&64<c&&c<71){valueNegative=true;break}}}valuePrefix=(valueNegative?sign==="("?sign:"-":sign==="-"||sign==="("?"":sign)+valuePrefix;valueSuffix=valueSuffix+(type==="s"?prefixes[8+prefixExponent/3]:"")+(valueNegative&&sign==="("?")":"");if(maybeSuffix){var i=-1,n=value.length,c;while(++i<n){if(c=value.charCodeAt(i),48>c||c>57){valueSuffix=(c===46?decimal+value.slice(i+1):value.slice(i))+valueSuffix;value=value.slice(0,i);break}}}}if(comma&&!zero)value=group(value,Infinity);var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";if(comma&&zero)value=group(padding+value,padding.length?width-valueSuffix.length:Infinity),padding="";switch(align){case"<":return valuePrefix+value+valueSuffix+padding;case"=":return valuePrefix+padding+value+valueSuffix;case"^":return padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length)}return padding+valuePrefix+value+valueSuffix}}function formatPrefix(specifier,value){var f=format((specifier=formatSpecifier(specifier),specifier.type="f",specifier)),e=Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))*3,k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}return{format:format,formatPrefix:formatPrefix}}var defaultLocale=locale({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var caES=locale({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]});var csCZ=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0K\u010d"]});var deCH=locale({decimal:",",thousands:"'",grouping:[3],currency:["","\xa0CHF"]});var deDE=locale({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]});var enCA=locale({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var enGB=locale({decimal:".",thousands:",",grouping:[3],currency:["\xa3",""]});var esES=locale({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]});var fiFI=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0\u20ac"]});var frCA=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","$"]});var frFR=locale({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]});var heIL=locale({decimal:".",thousands:",",grouping:[3],currency:["\u20aa",""]});var huHU=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0Ft"]});var itIT=locale({decimal:",",thousands:".",grouping:[3],currency:["\u20ac",""]});var jaJP=locale({decimal:".",thousands:",",grouping:[3],currency:["","\u5186"]});var koKR=locale({decimal:".",thousands:",",grouping:[3],currency:["\u20a9",""]});var mkMK=locale({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u0434\u0435\u043d."]});var nlNL=locale({decimal:",",thousands:".",grouping:[3],currency:["\u20ac\xa0",""]});var plPL=locale({decimal:",",thousands:".",grouping:[3],currency:["","z\u0142"]});var ptBR=locale({decimal:",",thousands:".",grouping:[3],currency:["R$",""]});var ruRU=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0\u0440\u0443\u0431."]});var svSE=locale({decimal:",",thousands:"\xa0",grouping:[3],currency:["","SEK"]});var zhCN=locale({decimal:".",thousands:",",grouping:[3],currency:["\xa5",""]});function precisionFixed(step){return Math.max(0,-exponent(Math.abs(step)))}function precisionPrefix(step,value){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))*3-exponent(Math.abs(step)))}function precisionRound(step,max){step=Math.abs(step),max=Math.abs(max)-step;return Math.max(0,exponent(max)-exponent(step))+1}var format=defaultLocale.format;var formatPrefix=defaultLocale.formatPrefix;var version="0.4.2";exports.version=version;exports.format=format;exports.formatPrefix=formatPrefix;exports.locale=locale;exports.localeCaEs=caES;exports.localeCsCz=csCZ;exports.localeDeCh=deCH;exports.localeDeDe=deDE;exports.localeEnCa=enCA;exports.localeEnGb=enGB;exports.localeEnUs=defaultLocale;exports.localeEsEs=esES;exports.localeFiFi=fiFI;exports.localeFrCa=frCA;exports.localeFrFr=frFR;exports.localeHeIl=heIL;exports.localeHuHu=huHU;exports.localeItIt=itIT;exports.localeJaJp=jaJP;exports.localeKoKr=koKR;exports.localeMkMk=mkMK;exports.localeNlNl=nlNL;exports.localePlPl=plPL;exports.localePtBr=ptBR;exports.localeRuRu=ruRU;exports.localeSvSe=svSE;exports.localeZhCn=zhCN;exports.formatSpecifier=formatSpecifier;exports.precisionFixed=precisionFixed;exports.precisionPrefix=precisionPrefix;exports.precisionRound=precisionRound})},{}],383:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports,require("d3-time")):typeof define==="function"&&define.amd?define("d3-time-format",["exports","d3-time"],factory):factory(global.d3_time_format={},global.d3_time)})(this,function(exports,d3Time){"use strict";function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);date.setFullYear(d.y);return date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));date.setUTCFullYear(d.y);return date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0}}function locale$1(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;var periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths);var formats={a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,c:null,d:formatDayOfMonth,e:formatDayOfMonth,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:formatPeriod,S:formatSeconds,U:formatWeekNumberSunday,w:formatWeekdayNumber,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent};var utcFormats={a:formatUTCShortWeekday,A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,S:formatUTCSeconds,U:formatUTCWeekNumberSunday,w:formatUTCWeekdayNumber,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent};var parses={a:parseShortWeekday,A:parseWeekday,b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,e:parseDayOfMonth,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,S:parseSeconds,U:parseWeekNumberSunday,w:parseWeekdayNumber,W:parseWeekNumberMonday,x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};formats.x=newFormat(locale_date,formats);formats.X=newFormat(locale_time,formats);formats.c=newFormat(locale_dateTime,formats);utcFormats.x=newFormat(locale_date,utcFormats);utcFormats.X=newFormat(locale_time,utcFormats);utcFormats.c=newFormat(locale_dateTime,utcFormats);function newFormat(specifier,formats){return function(date){var string=[],i=-1,j=0,n=specifier.length,c,pad,format;if(!(date instanceof Date))date=new Date(+date);while(++i<n){if(specifier.charCodeAt(i)===37){string.push(specifier.slice(j,i));if((pad=pads[c=specifier.charAt(++i)])!=null)c=specifier.charAt(++i);else pad=c==="e"?" ":"0";if(format=formats[c])c=format(date,pad);string.push(c);j=i+1}}string.push(specifier.slice(j,i));return string.join("")}}function newParse(specifier,newDate){return function(string){var d=newYear(1900),i=parseSpecifier(d,specifier,string+="",0);if(i!=string.length)return null;if("p"in d)d.H=d.H%12+d.p*12;if("W"in d||"U"in d){if(!("w"in d))d.w="W"in d?1:0;var day="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay();d.m=0;d.d="W"in d?(d.w+6)%7+d.W*7-(day+5)%7:d.w+d.U*7-(day+6)%7}if("Z"in d){d.H+=d.Z/100|0;d.M+=d.Z%100;return utcDate(d)}return newDate(d)}}function parseSpecifier(d,specifier,string,j){var i=0,n=specifier.length,m=string.length,c,parse;while(i<n){if(j>=m)return-1;c=specifier.charCodeAt(i++);if(c===37){c=specifier.charAt(i++);parse=parses[c in pads?specifier.charAt(i++):c];if(!parse||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++)){return-1}}return j}function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)}function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)}function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)}function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]}function formatWeekday(d){return locale_weekdays[d.getDay()]}function formatShortMonth(d){return locale_shortMonths[d.getMonth()]}function formatMonth(d){return locale_months[d.getMonth()]}function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]}function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]}function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]}function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]}function formatUTCMonth(d){return locale_months[d.getUTCMonth()]}function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]}return{format:function(specifier){var f=newFormat(specifier+="",formats);f.parse=newParse(specifier,localDate);f.toString=function(){return specifier};return f},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);f.parse=newParse(specifier,utcDate);f.toString=function(){return specifier};return f}}}var pads={"-":"",_:" ",0:"0"};var numberRe=/^\s*\d+/;var percentRe=/^%/;var requoteRe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){var map={},i=-1,n=names.length;while(++i<n)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+d3Time.day.count(d3Time.year(d),d),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekNumberSunday(d,p){return pad(d3Time.sunday.count(d3Time.year(d),d),p,2)}function formatWeekdayNumber(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(d3Time.monday.count(d3Time.year(d),d),p,2)}function formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+d3Time.utcDay.count(d3Time.utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekNumberSunday(d,p){return pad(d3Time.utcSunday.count(d3Time.utcYear(d),d),p,2)}function formatUTCWeekdayNumber(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(d3Time.utcMonday.count(d3Time.utcYear(d),d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}var locale=locale$1({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var caES=locale$1({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","mar\xe7","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","mar\xe7","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]});var deCH=locale$1({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]});var deDE=locale$1({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]});var enCA=locale$1({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var enGB=locale$1({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var esES=locale$1({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],shortDays:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]});var fiFI=locale$1({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kes\xe4kuu","hein\xe4kuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kes\xe4","Hein\xe4","Elo","Syys","Loka","Marras","Joulu"]});var frCA=locale$1({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"],shortMonths:["jan","f\xe9v","mar","avr","mai","jui","jul","ao\xfb","sep","oct","nov","d\xe9c"]});var frFR=locale$1({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"],shortMonths:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."]});var heIL=locale$1({dateTime:"%A, %e \u05d1%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],shortDays:["\u05d0\u05f3","\u05d1\u05f3","\u05d2\u05f3","\u05d3\u05f3","\u05d4\u05f3","\u05d5\u05f3","\u05e9\u05f3"],months:["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"],shortMonths:["\u05d9\u05e0\u05d5\u05f3","\u05e4\u05d1\u05e8\u05f3","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05f3","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05f3","\u05e1\u05e4\u05d8\u05f3","\u05d0\u05d5\u05e7\u05f3","\u05e0\u05d5\u05d1\u05f3","\u05d3\u05e6\u05de\u05f3"]});var huHU=locale$1({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vas\xe1rnap","h\xe9tf\u0151","kedd","szerda","cs\xfct\xf6rt\xf6k","p\xe9ntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["janu\xe1r","febru\xe1r","m\xe1rcius","\xe1prilis","m\xe1jus","j\xfanius","j\xfalius","augusztus","szeptember","okt\xf3ber","november","december"],shortMonths:["jan.","feb.","m\xe1r.","\xe1pr.","m\xe1j.","j\xfan.","j\xfal.","aug.","szept.","okt.","nov.","dec."]});var itIT=locale$1({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]});var jaJP=locale$1({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],shortDays:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],months:["\u7766\u6708","\u5982\u6708","\u5f25\u751f","\u536f\u6708","\u7690\u6708","\u6c34\u7121\u6708","\u6587\u6708","\u8449\u6708","\u9577\u6708","\u795e\u7121\u6708","\u971c\u6708","\u5e2b\u8d70"],shortMonths:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"]});var koKR=locale$1({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["\uc624\uc804","\uc624\ud6c4"],days:["\uc77c\uc694\uc77c","\uc6d4\uc694\uc77c","\ud654\uc694\uc77c","\uc218\uc694\uc77c","\ubaa9\uc694\uc77c","\uae08\uc694\uc77c","\ud1a0\uc694\uc77c"],shortDays:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],months:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"],shortMonths:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"]});var mkMK=locale$1({dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u043d\u0435\u0434\u0435\u043b\u0430","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0440\u0442\u043e\u043a","\u043f\u0435\u0442\u043e\u043a","\u0441\u0430\u0431\u043e\u0442\u0430"],shortDays:["\u043d\u0435\u0434","\u043f\u043e\u043d","\u0432\u0442\u043e","\u0441\u0440\u0435","\u0447\u0435\u0442","\u043f\u0435\u0442","\u0441\u0430\u0431"],months:["\u0458\u0430\u043d\u0443\u0430\u0440\u0438","\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0438\u043b","\u043c\u0430\u0458","\u0458\u0443\u043d\u0438","\u0458\u0443\u043b\u0438","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438","\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438","\u043d\u043e\u0435\u043c\u0432\u0440\u0438","\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438"],shortMonths:["\u0458\u0430\u043d","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0458","\u0458\u0443\u043d","\u0458\u0443\u043b","\u0430\u0432\u0433","\u0441\u0435\u043f","\u043e\u043a\u0442","\u043d\u043e\u0435","\u0434\u0435\u043a"]});var nlNL=locale$1({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]});var plPL=locale$1({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","\u015ar.","Czw.","Pt.","Sob."],months:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Pa\u017adz.","Listop.","Grudz."]});var ptBR=locale$1({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],months:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]});var ruRU=locale$1({dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],shortDays:["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],months:["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],shortMonths:["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0439","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"]});var svSE=locale$1({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"],shortDays:["S\xf6n","M\xe5n","Tis","Ons","Tor","Fre","L\xf6r"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]});var zhCN=locale$1({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["\u4e0a\u5348","\u4e0b\u5348"],days:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],shortDays:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],shortMonths:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]});var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(date){return date.toISOString()}formatIsoNative.parse=function(string){var date=new Date(string);return isNaN(date)?null:date};formatIsoNative.toString=function(){return isoSpecifier};var formatIso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?formatIsoNative:locale.utcFormat(isoSpecifier);var format=locale.format;var utcFormat=locale.utcFormat;var version="0.2.1";exports.version=version;exports.format=format;exports.utcFormat=utcFormat;exports.locale=locale$1;exports.localeCaEs=caES;exports.localeDeCh=deCH;exports.localeDeDe=deDE;exports.localeEnCa=enCA;exports.localeEnGb=enGB;exports.localeEnUs=locale;exports.localeEsEs=esES;exports.localeFiFi=fiFI;exports.localeFrCa=frCA;exports.localeFrFr=frFR;exports.localeHeIl=heIL;exports.localeHuHu=huHU;exports.localeItIt=itIT;exports.localeJaJp=jaJP;exports.localeKoKr=koKR;exports.localeMkMk=mkMK;exports.localeNlNl=nlNL;exports.localePlPl=plPL;exports.localePtBr=ptBR;exports.localeRuRu=ruRU;exports.localeSvSe=svSE;exports.localeZhCn=zhCN;exports.isoFormat=formatIso})},{"d3-time":384}],384:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define("d3-time",["exports"],factory):factory(global.d3_time={})})(this,function(exports){"use strict";var t0=new Date;var t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=new Date(+date)),date}interval.floor=interval;interval.round=function(date){var d0=new Date(+date),d1=new Date(date-1);floori(d0),floori(d1),offseti(d1,1);return date-d0<d1-date?d0:d1};interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),date};interval.offset=function(date,step){return offseti(date=new Date(+date),step==null?1:Math.floor(step)),date};interval.range=function(start,stop,step){var range=[];start=new Date(start-1);stop=new Date(+stop);step=step==null?1:Math.floor(step);if(!(start<stop)||!(step>0))return range;offseti(start,1),floori(start);if(start<stop)range.push(new Date(+start));while(offseti(start,step),floori(start),start<stop)range.push(new Date(+start));return range};interval.filter=function(test){return newInterval(function(date){while(floori(date),!test(date))date.setTime(date-1)},function(date,step){while(--step>=0)while(offseti(date,1),!test(date));})};if(count){interval.count=function(start,end){t0.setTime(+start),t1.setTime(+end);floori(t0),floori(t1);return Math.floor(count(t0,t1))};interval.every=function(step){step=Math.floor(step);return!isFinite(step)||!(step>0)?null:!(step>1)?interval:interval.filter(field?function(d){return field(d)%step===0}:function(d){return interval.count(0,d)%step===0})}}return interval}var millisecond=newInterval(function(){},function(date,step){date.setTime(+date+step)},function(start,end){return end-start});millisecond.every=function(k){k=Math.floor(k);if(!isFinite(k)||!(k>0))return null;if(!(k>1))return millisecond;return newInterval(function(date){date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k)},function(start,end){return(end-start)/k})};var second=newInterval(function(date){date.setMilliseconds(0)},function(date,step){date.setTime(+date+step*1e3)},function(start,end){return(end-start)/1e3},function(date){return date.getSeconds()});var minute=newInterval(function(date){date.setSeconds(0,0)},function(date,step){date.setTime(+date+step*6e4)},function(start,end){return(end-start)/6e4},function(date){return date.getMinutes()});var hour=newInterval(function(date){date.setMinutes(0,0,0)},function(date,step){date.setTime(+date+step*36e5)},function(start,end){return(end-start)/36e5},function(date){return date.getHours()});var day=newInterval(function(date){date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+step)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*6e4)/864e5},function(date){return date.getDate()-1});function weekday(i){return newInterval(function(date){date.setHours(0,0,0,0);date.setDate(date.getDate()-(date.getDay()+7-i)%7)},function(date,step){date.setDate(date.getDate()+step*7)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*6e4)/6048e5})}var sunday=weekday(0);var monday=weekday(1);var tuesday=weekday(2);var wednesday=weekday(3);var thursday=weekday(4);var friday=weekday(5);var saturday=weekday(6);var month=newInterval(function(date){date.setHours(0,0,0,0);date.setDate(1)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,end){return end.getMonth()-start.getMonth()+(end.getFullYear()-start.getFullYear())*12},function(date){return date.getMonth()});var year=newInterval(function(date){date.setHours(0,0,0,0);date.setMonth(0,1)},function(date,step){date.setFullYear(date.getFullYear()+step)},function(start,end){return end.getFullYear()-start.getFullYear()},function(date){return date.getFullYear()});var utcSecond=newInterval(function(date){date.setUTCMilliseconds(0)},function(date,step){date.setTime(+date+step*1e3)},function(start,end){return(end-start)/1e3},function(date){return date.getUTCSeconds()});var utcMinute=newInterval(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+step*6e4)},function(start,end){return(end-start)/6e4},function(date){return date.getUTCMinutes()});var utcHour=newInterval(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+step*36e5)},function(start,end){return(end-start)/36e5},function(date){return date.getUTCHours()});var utcDay=newInterval(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/864e5},function(date){return date.getUTCDate()-1});function utcWeekday(i){return newInterval(function(date){date.setUTCHours(0,0,0,0);date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7)},function(date,step){date.setUTCDate(date.getUTCDate()+step*7)},function(start,end){return(end-start)/6048e5})}var utcSunday=utcWeekday(0);var utcMonday=utcWeekday(1);var utcTuesday=utcWeekday(2);var utcWednesday=utcWeekday(3);var utcThursday=utcWeekday(4);var utcFriday=utcWeekday(5);var utcSaturday=utcWeekday(6);var utcMonth=newInterval(function(date){date.setUTCHours(0,0,0,0);date.setUTCDate(1)},function(date,step){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-start.getUTCMonth()+(end.getUTCFullYear()-start.getUTCFullYear())*12},function(date){return date.getUTCMonth()});var utcYear=newInterval(function(date){date.setUTCHours(0,0,0,0);date.setUTCMonth(0,1)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()},function(date){return date.getUTCFullYear()});var milliseconds=millisecond.range;var seconds=second.range;var minutes=minute.range;var hours=hour.range;var days=day.range;var sundays=sunday.range;var mondays=monday.range;var tuesdays=tuesday.range;var wednesdays=wednesday.range;var thursdays=thursday.range;var fridays=friday.range;var saturdays=saturday.range;var weeks=sunday.range;var months=month.range;var years=year.range;var utcMillisecond=millisecond;var utcMilliseconds=milliseconds;var utcSeconds=utcSecond.range;var utcMinutes=utcMinute.range;var utcHours=utcHour.range;var utcDays=utcDay.range;var utcSundays=utcSunday.range;var utcMondays=utcMonday.range;var utcTuesdays=utcTuesday.range;var utcWednesdays=utcWednesday.range;var utcThursdays=utcThursday.range;var utcFridays=utcFriday.range;var utcSaturdays=utcSaturday.range;var utcWeeks=utcSunday.range;var utcMonths=utcMonth.range;var utcYears=utcYear.range;var version="0.1.1";exports.version=version;exports.milliseconds=milliseconds;exports.seconds=seconds;exports.minutes=minutes;exports.hours=hours;exports.days=days;exports.sundays=sundays;exports.mondays=mondays;exports.tuesdays=tuesdays;exports.wednesdays=wednesdays;exports.thursdays=thursdays;exports.fridays=fridays;exports.saturdays=saturdays;exports.weeks=weeks;exports.months=months;exports.years=years;exports.utcMillisecond=utcMillisecond;exports.utcMilliseconds=utcMilliseconds;exports.utcSeconds=utcSeconds;exports.utcMinutes=utcMinutes;exports.utcHours=utcHours;exports.utcDays=utcDays;exports.utcSundays=utcSundays;exports.utcMondays=utcMondays;exports.utcTuesdays=utcTuesdays;exports.utcWednesdays=utcWednesdays;exports.utcThursdays=utcThursdays;exports.utcFridays=utcFridays;exports.utcSaturdays=utcSaturdays;exports.utcWeeks=utcWeeks;exports.utcMonths=utcMonths;exports.utcYears=utcYears;exports.millisecond=millisecond;exports.second=second;exports.minute=minute;exports.hour=hour;exports.day=day;exports.sunday=sunday;exports.monday=monday;exports.tuesday=tuesday;exports.wednesday=wednesday;exports.thursday=thursday;exports.friday=friday;exports.saturday=saturday;exports.week=sunday;exports.month=month;exports.year=year;exports.utcSecond=utcSecond;exports.utcMinute=utcMinute;exports.utcHour=utcHour;exports.utcDay=utcDay;exports.utcSunday=utcSunday;exports.utcMonday=utcMonday;exports.utcTuesday=utcTuesday;exports.utcWednesday=utcWednesday;exports.utcThursday=utcThursday;exports.utcFriday=utcFriday;exports.utcSaturday=utcSaturday;exports.utcWeek=utcSunday;exports.utcMonth=utcMonth;exports.utcYear=utcYear;exports.interval=newInterval})},{}],385:[function(require,module,exports){!function(){var d3={version:"3.5.17"};var d3_arraySlice=[].slice,d3_array=function(list){return d3_arraySlice.call(list)};var d3_document=this.document;function d3_documentElement(node){return node&&(node.ownerDocument||node.document||node).documentElement}function d3_window(node){return node&&(node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView)}if(d3_document){try{d3_array(d3_document.documentElement.childNodes)[0].nodeType}catch(e){d3_array=function(list){var i=list.length,array=new Array(i);while(i--)array[i]=list[i];return array}}}if(!Date.now)Date.now=function(){return+new Date};if(d3_document){try{d3_document.createElement("DIV").style.setProperty("opacity",0,"")}catch(error){var d3_element_prototype=this.Element.prototype,d3_element_setAttribute=d3_element_prototype.setAttribute,d3_element_setAttributeNS=d3_element_prototype.setAttributeNS,d3_style_prototype=this.CSSStyleDeclaration.prototype,d3_style_setProperty=d3_style_prototype.setProperty;d3_element_prototype.setAttribute=function(name,value){d3_element_setAttribute.call(this,name,value+"")};d3_element_prototype.setAttributeNS=function(space,local,value){d3_element_setAttributeNS.call(this,space,local,value+"")};d3_style_prototype.setProperty=function(name,value,priority){d3_style_setProperty.call(this,name,value+"",priority)}}}d3.ascending=d3_ascending;function d3_ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};d3.min=function(array,f){var i=-1,n=array.length,a,b;if(arguments.length===1){while(++i<n)if((b=array[i])!=null&&b>=b){a=b;break}while(++i<n)if((b=array[i])!=null&&a>b)a=b}else{while(++i<n)if((b=f.call(array,array[i],i))!=null&&b>=b){a=b;break}while(++i<n)if((b=f.call(array,array[i],i))!=null&&a>b)a=b}return a};d3.max=function(array,f){var i=-1,n=array.length,a,b;if(arguments.length===1){while(++i<n)if((b=array[i])!=null&&b>=b){a=b;break}while(++i<n)if((b=array[i])!=null&&b>a)a=b}else{while(++i<n)if((b=f.call(array,array[i],i))!=null&&b>=b){a=b;break}while(++i<n)if((b=f.call(array,array[i],i))!=null&&b>a)a=b}return a};d3.extent=function(array,f){var i=-1,n=array.length,a,b,c;if(arguments.length===1){while(++i<n)if((b=array[i])!=null&&b>=b){a=c=b;break}while(++i<n)if((b=array[i])!=null){if(a>b)a=b;if(c<b)c=b}}else{while(++i<n)if((b=f.call(array,array[i],i))!=null&&b>=b){a=c=b;break}while(++i<n)if((b=f.call(array,array[i],i))!=null){if(a>b)a=b;if(c<b)c=b}}return[a,c]};function d3_number(x){return x===null?NaN:+x}function d3_numeric(x){return!isNaN(x)}d3.sum=function(array,f){var s=0,n=array.length,a,i=-1;if(arguments.length===1){while(++i<n)if(d3_numeric(a=+array[i]))s+=a}else{while(++i<n)if(d3_numeric(a=+f.call(array,array[i],i)))s+=a}return s};d3.mean=function(array,f){var s=0,n=array.length,a,i=-1,j=n;if(arguments.length===1){while(++i<n)if(d3_numeric(a=d3_number(array[i])))s+=a;else--j}else{while(++i<n)if(d3_numeric(a=d3_number(f.call(array,array[i],i))))s+=a;else--j}if(j)return s/j};d3.quantile=function(values,p){var H=(values.length-1)*p+1,h=Math.floor(H),v=+values[h-1],e=H-h;return e?v+e*(values[h]-v):v};d3.median=function(array,f){var numbers=[],n=array.length,a,i=-1;if(arguments.length===1){while(++i<n)if(d3_numeric(a=d3_number(array[i])))numbers.push(a)}else{while(++i<n)if(d3_numeric(a=d3_number(f.call(array,array[i],i))))numbers.push(a)}if(numbers.length)return d3.quantile(numbers.sort(d3_ascending),.5)};d3.variance=function(array,f){var n=array.length,m=0,a,d,s=0,i=-1,j=0;if(arguments.length===1){while(++i<n){if(d3_numeric(a=d3_number(array[i]))){d=a-m;m+=d/++j;s+=d*(a-m)}}}else{while(++i<n){if(d3_numeric(a=d3_number(f.call(array,array[i],i)))){d=a-m;m+=d/++j;s+=d*(a-m)}}}if(j>1)return s/(j-1)};d3.deviation=function(){var v=d3.variance.apply(this,arguments);return v?Math.sqrt(v):v};function d3_bisector(compare){return{left:function(a,x,lo,hi){if(arguments.length<3)lo=0;if(arguments.length<4)hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(compare(a[mid],x)<0)lo=mid+1;else hi=mid}return lo},right:function(a,x,lo,hi){if(arguments.length<3)lo=0;if(arguments.length<4)hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(compare(a[mid],x)>0)hi=mid;else lo=mid+1}return lo}}}var d3_bisect=d3_bisector(d3_ascending);d3.bisectLeft=d3_bisect.left;d3.bisect=d3.bisectRight=d3_bisect.right;d3.bisector=function(f){return d3_bisector(f.length===1?function(d,x){return d3_ascending(f(d),x)}:f)};d3.shuffle=function(array,i0,i1){if((m=arguments.length)<3){i1=array.length;if(m<2)i0=0}var m=i1-i0,t,i;while(m){i=Math.random()*m--|0;t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t}return array};d3.permute=function(array,indexes){var i=indexes.length,permutes=new Array(i);while(i--)permutes[i]=array[indexes[i]];return permutes};d3.pairs=function(array){var i=0,n=array.length-1,p0,p1=array[0],pairs=new Array(n<0?0:n);while(i<n)pairs[i]=[p0=p1,p1=array[++i]];return pairs};d3.transpose=function(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=d3.min(matrix,d3_transposeLength),transpose=new Array(m);++i<m;){for(var j=-1,n,row=transpose[i]=new Array(n);++j<n;){row[j]=matrix[j][i]}}return transpose};function d3_transposeLength(d){return d.length}d3.zip=function(){return d3.transpose(arguments)};d3.keys=function(map){var keys=[];for(var key in map)keys.push(key);return keys};d3.values=function(map){var values=[];for(var key in map)values.push(map[key]);return values};d3.entries=function(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries};d3.merge=function(arrays){var n=arrays.length,m,i=-1,j=0,merged,array;while(++i<n)j+=arrays[i].length;merged=new Array(j);while(--n>=0){array=arrays[n];m=array.length;while(--m>=0){merged[--j]=array[m]}}return merged};var abs=Math.abs;d3.range=function(start,stop,step){if(arguments.length<3){step=1;if(arguments.length<2){stop=start;start=0}}if((stop-start)/step===Infinity)throw new Error("infinite range");var range=[],k=d3_range_integerScale(abs(step)),i=-1,j;start*=k,stop*=k,step*=k;if(step<0)while((j=start+step*++i)>stop)range.push(j/k);else while((j=start+step*++i)<stop)range.push(j/k);return range};function d3_range_integerScale(x){var k=1;while(x*k%1)k*=10;return k}function d3_class(ctor,properties){for(var key in properties){Object.defineProperty(ctor.prototype,key,{value:properties[key],enumerable:false})}}d3.map=function(object,f){var map=new d3_Map;if(object instanceof d3_Map){object.forEach(function(key,value){map.set(key,value)})}else if(Array.isArray(object)){var i=-1,n=object.length,o;if(arguments.length===1)while(++i<n)map.set(i,object[i]);else while(++i<n)map.set(f.call(object,o=object[i],i),o)}else{for(var key in object)map.set(key,object[key])}return map};function d3_Map(){this._=Object.create(null)}var d3_map_proto="__proto__",d3_map_zero="\0";d3_class(d3_Map,{has:d3_map_has,get:function(key){return this._[d3_map_escape(key)]},set:function(key,value){return this._[d3_map_escape(key)]=value},remove:d3_map_remove,keys:d3_map_keys,values:function(){var values=[];for(var key in this._)values.push(this._[key]);return values},entries:function(){var entries=[];for(var key in this._)entries.push({key:d3_map_unescape(key),value:this._[key]});return entries},size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key),this._[key])}});function d3_map_escape(key){return(key+="")===d3_map_proto||key[0]===d3_map_zero?d3_map_zero+key:key}function d3_map_unescape(key){return(key+="")[0]===d3_map_zero?key.slice(1):key}function d3_map_has(key){return d3_map_escape(key)in this._}function d3_map_remove(key){return(key=d3_map_escape(key))in this._&&delete this._[key]}function d3_map_keys(){var keys=[];for(var key in this._)keys.push(d3_map_unescape(key));return keys}function d3_map_size(){var size=0;for(var key in this._)++size;return size}function d3_map_empty(){for(var key in this._)return false;return true}d3.nest=function(){var nest={},keys=[],sortKeys=[],sortValues,rollup;function map(mapType,array,depth){if(depth>=keys.length)return rollup?rollup.call(nest,array):sortValues?array.sort(sortValues):array;var i=-1,n=array.length,key=keys[depth++],keyValue,object,setter,valuesByKey=new d3_Map,values;while(++i<n){if(values=valuesByKey.get(keyValue=key(object=array[i]))){values.push(object)}else{valuesByKey.set(keyValue,[object])}}if(mapType){object=mapType();setter=function(keyValue,values){object.set(keyValue,map(mapType,values,depth))}}else{object={};setter=function(keyValue,values){object[keyValue]=map(mapType,values,depth)}}valuesByKey.forEach(setter);return object}function entries(map,depth){if(depth>=keys.length)return map;var array=[],sortKey=sortKeys[depth++];map.forEach(function(key,keyMap){array.push({key:key,values:entries(keyMap,depth)})});return sortKey?array.sort(function(a,b){return sortKey(a.key,b.key)}):array}nest.map=function(array,mapType){return map(mapType,array,0)};nest.entries=function(array){return entries(map(d3.map,array,0),0)};nest.key=function(d){keys.push(d);return nest};nest.sortKeys=function(order){sortKeys[keys.length-1]=order;return nest};nest.sortValues=function(order){sortValues=order;return nest};nest.rollup=function(f){rollup=f;return nest};return nest};d3.set=function(array){var set=new d3_Set;if(array)for(var i=0,n=array.length;i<n;++i)set.add(array[i]);return set};function d3_Set(){this._=Object.create(null)}d3_class(d3_Set,{has:d3_map_has,add:function(key){this._[d3_map_escape(key+="")]=true;return key},remove:d3_map_remove,values:d3_map_keys,size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key))}});d3.behavior={};function d3_identity(d){return d}d3.rebind=function(target,source){var i=1,n=arguments.length,method;while(++i<n)target[method=arguments[i]]=d3_rebind(target,source,source[method]);return target};function d3_rebind(target,source,method){return function(){var value=method.apply(source,arguments);return value===source?target:value}}function d3_vendorSymbol(object,name){if(name in object)return name;name=name.charAt(0).toUpperCase()+name.slice(1);for(var i=0,n=d3_vendorPrefixes.length;i<n;++i){var prefixName=d3_vendorPrefixes[i]+name;if(prefixName in object)return prefixName}}var d3_vendorPrefixes=["webkit","ms","moz","Moz","o","O"];function d3_noop(){}d3.dispatch=function(){var dispatch=new d3_dispatch,i=-1,n=arguments.length;while(++i<n)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch};function d3_dispatch(){}d3_dispatch.prototype.on=function(type,listener){var i=type.indexOf("."),name="";if(i>=0){name=type.slice(i+1);type=type.slice(0,i)}if(type)return arguments.length<2?this[type].on(name):this[type].on(name,listener);if(arguments.length===2){if(listener==null)for(type in this){if(this.hasOwnProperty(type))this[type].on(name,null)}return this}};function d3_dispatch_event(dispatch){var listeners=[],listenerByName=new d3_Map;function event(){var z=listeners,i=-1,n=z.length,l;while(++i<n)if(l=z[i].on)l.apply(this,arguments);return dispatch}event.on=function(name,listener){var l=listenerByName.get(name),i;if(arguments.length<2)return l&&l.on;if(l){l.on=null;listeners=listeners.slice(0,i=listeners.indexOf(l)).concat(listeners.slice(i+1));listenerByName.remove(name)}if(listener)listeners.push(listenerByName.set(name,{on:listener}));return dispatch};return event}d3.event=null;function d3_eventPreventDefault(){d3.event.preventDefault()}function d3_eventSource(){var e=d3.event,s;while(s=e.sourceEvent)e=s;return e}function d3_eventDispatch(target){var dispatch=new d3_dispatch,i=0,n=arguments.length;while(++i<n)dispatch[arguments[i]]=d3_dispatch_event(dispatch);dispatch.of=function(thiz,argumentz){return function(e1){try{var e0=e1.sourceEvent=d3.event;e1.target=target;d3.event=e1;dispatch[e1.type].apply(thiz,argumentz)}finally{d3.event=e0}}};return dispatch}d3.requote=function(s){return s.replace(d3_requote_re,"\\$&")};var d3_requote_re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var d3_subclass={}.__proto__?function(object,prototype){object.__proto__=prototype}:function(object,prototype){for(var property in prototype)object[property]=prototype[property]};function d3_selection(groups){d3_subclass(groups,d3_selectionPrototype);return groups}var d3_select=function(s,n){return n.querySelector(s)},d3_selectAll=function(s,n){return n.querySelectorAll(s)},d3_selectMatches=function(n,s){var d3_selectMatcher=n.matches||n[d3_vendorSymbol(n,"matchesSelector")];d3_selectMatches=function(n,s){return d3_selectMatcher.call(n,s)};return d3_selectMatches(n,s)};if(typeof Sizzle==="function"){d3_select=function(s,n){return Sizzle(s,n)[0]||null};d3_selectAll=Sizzle;d3_selectMatches=Sizzle.matchesSelector}d3.selection=function(){return d3.select(d3_document.documentElement)};var d3_selectionPrototype=d3.selection.prototype=[];d3_selectionPrototype.select=function(selector){var subgroups=[],subgroup,subnode,group,node;selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);subgroup.parentNode=(group=this[j]).parentNode;for(var i=-1,n=group.length;++i<n;){if(node=group[i]){subgroup.push(subnode=selector.call(node,node.__data__,i,j));if(subnode&&"__data__"in node)subnode.__data__=node.__data__}else{subgroup.push(null)}}}return d3_selection(subgroups)};function d3_selection_selector(selector){return typeof selector==="function"?selector:function(){return d3_select(selector,this)}}d3_selectionPrototype.selectAll=function(selector){var subgroups=[],subgroup,node;selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;){for(var group=this[j],i=-1,n=group.length;++i<n;){if(node=group[i]){subgroups.push(subgroup=d3_array(selector.call(node,node.__data__,i,j)));subgroup.parentNode=node}}}return d3_selection(subgroups)};function d3_selection_selectorAll(selector){return typeof selector==="function"?selector:function(){return d3_selectAll(selector,this)}}var d3_nsXhtml="http://www.w3.org/1999/xhtml";var d3_nsPrefix={svg:"http://www.w3.org/2000/svg",xhtml:d3_nsXhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:d3_nsPrefix,qualify:function(name){var i=name.indexOf(":"),prefix=name;if(i>=0&&(prefix=name.slice(0,i))!=="xmlns")name=name.slice(i+1);return d3_nsPrefix.hasOwnProperty(prefix)?{space:d3_nsPrefix[prefix],local:name}:name}};d3_selectionPrototype.attr=function(name,value){if(arguments.length<2){if(typeof name==="string"){var node=this.node();name=d3.ns.qualify(name);return name.local?node.getAttributeNS(name.space,name.local):node.getAttribute(name)}for(value in name)this.each(d3_selection_attr(value,name[value]));return this}return this.each(d3_selection_attr(name,value))};function d3_selection_attr(name,value){name=d3.ns.qualify(name);function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrConstant(){this.setAttribute(name,value)}function attrConstantNS(){this.setAttributeNS(name.space,name.local,value)}function attrFunction(){var x=value.apply(this,arguments);if(x==null)this.removeAttribute(name);else this.setAttribute(name,x)}function attrFunctionNS(){var x=value.apply(this,arguments);if(x==null)this.removeAttributeNS(name.space,name.local);else this.setAttributeNS(name.space,name.local,x)}return value==null?name.local?attrNullNS:attrNull:typeof value==="function"?name.local?attrFunctionNS:attrFunction:name.local?attrConstantNS:attrConstant}function d3_collapse(s){return s.trim().replace(/\s+/g," ")}d3_selectionPrototype.classed=function(name,value){if(arguments.length<2){if(typeof name==="string"){var node=this.node(),n=(name=d3_selection_classes(name)).length,i=-1;if(value=node.classList){while(++i<n)if(!value.contains(name[i]))return false}else{value=node.getAttribute("class");while(++i<n)if(!d3_selection_classedRe(name[i]).test(value))return false}return true}for(value in name)this.each(d3_selection_classed(value,name[value]));return this}return this.each(d3_selection_classed(name,value))};function d3_selection_classedRe(name){return new RegExp("(?:^|\\s+)"+d3.requote(name)+"(?:\\s+|$)","g")}function d3_selection_classes(name){return(name+"").trim().split(/^|\s+/)}function d3_selection_classed(name,value){name=d3_selection_classes(name).map(d3_selection_classedName);var n=name.length;function classedConstant(){var i=-1;while(++i<n)name[i](this,value)}function classedFunction(){var i=-1,x=value.apply(this,arguments);while(++i<n)name[i](this,x)}return typeof value==="function"?classedFunction:classedConstant}function d3_selection_classedName(name){var re=d3_selection_classedRe(name);return function(node,value){if(c=node.classList)return value?c.add(name):c.remove(name);var c=node.getAttribute("class")||"";if(value){re.lastIndex=0;if(!re.test(c))node.setAttribute("class",d3_collapse(c+" "+name))}else{node.setAttribute("class",d3_collapse(c.replace(re," ")))}}}d3_selectionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if(typeof name!=="string"){if(n<2)value="";for(priority in name)this.each(d3_selection_style(priority,name[priority],value));return this}if(n<2){var node=this.node();return d3_window(node).getComputedStyle(node,null).getPropertyValue(name)}priority=""}return this.each(d3_selection_style(name,value,priority))};function d3_selection_style(name,value,priority){function styleNull(){this.style.removeProperty(name)}function styleConstant(){this.style.setProperty(name,value,priority)}function styleFunction(){var x=value.apply(this,arguments);if(x==null)this.style.removeProperty(name);else this.style.setProperty(name,x,priority)}return value==null?styleNull:typeof value==="function"?styleFunction:styleConstant}d3_selectionPrototype.property=function(name,value){if(arguments.length<2){if(typeof name==="string")return this.node()[name];for(value in name)this.each(d3_selection_property(value,name[value]));return this}return this.each(d3_selection_property(name,value))};function d3_selection_property(name,value){function propertyNull(){delete this[name]}function propertyConstant(){this[name]=value}function propertyFunction(){var x=value.apply(this,arguments);if(x==null)delete this[name];else this[name]=x}return value==null?propertyNull:typeof value==="function"?propertyFunction:propertyConstant}d3_selectionPrototype.text=function(value){return arguments.length?this.each(typeof value==="function"?function(){var v=value.apply(this,arguments);this.textContent=v==null?"":v}:value==null?function(){this.textContent=""}:function(){this.textContent=value}):this.node().textContent};d3_selectionPrototype.html=function(value){return arguments.length?this.each(typeof value==="function"?function(){var v=value.apply(this,arguments);this.innerHTML=v==null?"":v}:value==null?function(){this.innerHTML=""}:function(){this.innerHTML=value}):this.node().innerHTML};d3_selectionPrototype.append=function(name){name=d3_selection_creator(name);return this.select(function(){return this.appendChild(name.apply(this,arguments))})};function d3_selection_creator(name){function create(){var document=this.ownerDocument,namespace=this.namespaceURI;return namespace===d3_nsXhtml&&document.documentElement.namespaceURI===d3_nsXhtml?document.createElement(name):document.createElementNS(namespace,name)}function createNS(){return this.ownerDocument.createElementNS(name.space,name.local)}return typeof name==="function"?name:(name=d3.ns.qualify(name)).local?createNS:create}d3_selectionPrototype.insert=function(name,before){name=d3_selection_creator(name);before=d3_selection_selector(before);return this.select(function(){return this.insertBefore(name.apply(this,arguments),before.apply(this,arguments)||null)})};d3_selectionPrototype.remove=function(){return this.each(d3_selectionRemove)};function d3_selectionRemove(){var parent=this.parentNode;if(parent)parent.removeChild(this)}d3_selectionPrototype.data=function(value,key){var i=-1,n=this.length,group,node;if(!arguments.length){value=new Array(n=(group=this[0]).length);while(++i<n){if(node=group[i]){value[i]=node.__data__}}return value}function bind(group,groupData){var i,n=group.length,m=groupData.length,n0=Math.min(n,m),updateNodes=new Array(m),enterNodes=new Array(m),exitNodes=new Array(n),node,nodeData;if(key){var nodeByKeyValue=new d3_Map,keyValues=new Array(n),keyValue;for(i=-1;++i<n;){if(node=group[i]){if(nodeByKeyValue.has(keyValue=key.call(node,node.__data__,i))){exitNodes[i]=node}else{nodeByKeyValue.set(keyValue,node)}keyValues[i]=keyValue}}for(i=-1;++i<m;){if(!(node=nodeByKeyValue.get(keyValue=key.call(groupData,nodeData=groupData[i],i)))){enterNodes[i]=d3_selection_dataNode(nodeData)}else if(node!==true){updateNodes[i]=node;node.__data__=nodeData}nodeByKeyValue.set(keyValue,true)}for(i=-1;++i<n;){if(i in keyValues&&nodeByKeyValue.get(keyValues[i])!==true){exitNodes[i]=group[i]}}}else{for(i=-1;++i<n0;){node=group[i];nodeData=groupData[i];if(node){node.__data__=nodeData;updateNodes[i]=node}else{enterNodes[i]=d3_selection_dataNode(nodeData)}}for(;i<m;++i){enterNodes[i]=d3_selection_dataNode(groupData[i])}for(;i<n;++i){exitNodes[i]=group[i]}}enterNodes.update=updateNodes;enterNodes.parentNode=updateNodes.parentNode=exitNodes.parentNode=group.parentNode;enter.push(enterNodes);update.push(updateNodes);exit.push(exitNodes)}var enter=d3_selection_enter([]),update=d3_selection([]),exit=d3_selection([]);if(typeof value==="function"){while(++i<n){bind(group=this[i],value.call(group,group.parentNode.__data__,i))}}else{while(++i<n){bind(group=this[i],value)}}update.enter=function(){return enter};update.exit=function(){return exit};return update};function d3_selection_dataNode(data){return{__data__:data}}d3_selectionPrototype.datum=function(value){return arguments.length?this.property("__data__",value):this.property("__data__")};d3_selectionPrototype.filter=function(filter){var subgroups=[],subgroup,group,node;if(typeof filter!=="function")filter=d3_selection_filter(filter);for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);subgroup.parentNode=(group=this[j]).parentNode;for(var i=0,n=group.length;i<n;i++){if((node=group[i])&&filter.call(node,node.__data__,i,j)){subgroup.push(node)}}}return d3_selection(subgroups)};function d3_selection_filter(selector){return function(){return d3_selectMatches(this,selector)}}d3_selectionPrototype.order=function(){for(var j=-1,m=this.length;++j<m;){for(var group=this[j],i=group.length-1,next=group[i],node;--i>=0;){if(node=group[i]){if(next&&next!==node.nextSibling)next.parentNode.insertBefore(node,next);next=node}}}return this};d3_selectionPrototype.sort=function(comparator){comparator=d3_selection_sortComparator.apply(this,arguments);for(var j=-1,m=this.length;++j<m;)this[j].sort(comparator);return this.order()};function d3_selection_sortComparator(comparator){if(!arguments.length)comparator=d3_ascending;return function(a,b){return a&&b?comparator(a.__data__,b.__data__):!a-!b}}d3_selectionPrototype.each=function(callback){return d3_selection_each(this,function(node,i,j){callback.call(node,node.__data__,i,j)})};function d3_selection_each(groups,callback){for(var j=0,m=groups.length;j<m;j++){for(var group=groups[j],i=0,n=group.length,node;i<n;i++){if(node=group[i])callback(node,i,j)}}return groups}d3_selectionPrototype.call=function(callback){var args=d3_array(arguments);callback.apply(args[0]=this,args);return this};d3_selectionPrototype.empty=function(){return!this.node()};d3_selectionPrototype.node=function(){for(var j=0,m=this.length;j<m;j++){for(var group=this[j],i=0,n=group.length;i<n;i++){var node=group[i];if(node)return node}}return null};d3_selectionPrototype.size=function(){var n=0;d3_selection_each(this,function(){++n});return n};function d3_selection_enter(selection){d3_subclass(selection,d3_selection_enterPrototype);return selection}var d3_selection_enterPrototype=[];d3.selection.enter=d3_selection_enter;d3.selection.enter.prototype=d3_selection_enterPrototype;d3_selection_enterPrototype.append=d3_selectionPrototype.append;d3_selection_enterPrototype.empty=d3_selectionPrototype.empty;d3_selection_enterPrototype.node=d3_selectionPrototype.node;d3_selection_enterPrototype.call=d3_selectionPrototype.call;d3_selection_enterPrototype.size=d3_selectionPrototype.size;d3_selection_enterPrototype.select=function(selector){var subgroups=[],subgroup,subnode,upgroup,group,node;for(var j=-1,m=this.length;++j<m;){upgroup=(group=this[j]).update;subgroups.push(subgroup=[]);subgroup.parentNode=group.parentNode;for(var i=-1,n=group.length;++i<n;){if(node=group[i]){subgroup.push(upgroup[i]=subnode=selector.call(group.parentNode,node.__data__,i,j));subnode.__data__=node.__data__}else{subgroup.push(null)}}}return d3_selection(subgroups)};d3_selection_enterPrototype.insert=function(name,before){if(arguments.length<2)before=d3_selection_enterInsertBefore(this);return d3_selectionPrototype.insert.call(this,name,before)};function d3_selection_enterInsertBefore(enter){var i0,j0;return function(d,i,j){var group=enter[j].update,n=group.length,node;if(j!=j0)j0=j,i0=0;if(i>=i0)i0=i+1;while(!(node=group[i0])&&++i0<n);return node}}d3.select=function(node){var group;if(typeof node==="string"){group=[d3_select(node,d3_document)];group.parentNode=d3_document.documentElement}else{group=[node];group.parentNode=d3_documentElement(node)}return d3_selection([group])};d3.selectAll=function(nodes){var group;if(typeof nodes==="string"){group=d3_array(d3_selectAll(nodes,d3_document));group.parentNode=d3_document.documentElement}else{group=d3_array(nodes);group.parentNode=null}return d3_selection([group])};d3_selectionPrototype.on=function(type,listener,capture){var n=arguments.length;if(n<3){if(typeof type!=="string"){if(n<2)listener=false;for(capture in type)this.each(d3_selection_on(capture,type[capture],listener));return this}if(n<2)return(n=this.node()["__on"+type])&&n._;capture=false}return this.each(d3_selection_on(type,listener,capture))};function d3_selection_on(type,listener,capture){var name="__on"+type,i=type.indexOf("."),wrap=d3_selection_onListener;if(i>0)type=type.slice(0,i);var filter=d3_selection_onFilters.get(type);if(filter)type=filter,wrap=d3_selection_onFilter;function onRemove(){var l=this[name];if(l){this.removeEventListener(type,l,l.$);delete this[name]}}function onAdd(){var l=wrap(listener,d3_array(arguments));onRemove.call(this);this.addEventListener(type,this[name]=l,l.$=capture);l._=listener}function removeAll(){var re=new RegExp("^__on([^.]+)"+d3.requote(type)+"$"),match;for(var name in this){if(match=name.match(re)){var l=this[name];this.removeEventListener(match[1],l,l.$);delete this[name]}}}return i?listener?onAdd:onRemove:listener?d3_noop:removeAll}var d3_selection_onFilters=d3.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(d3_document){d3_selection_onFilters.forEach(function(k){if("on"+k in d3_document)d3_selection_onFilters.remove(k)})}function d3_selection_onListener(listener,argumentz){return function(e){var o=d3.event;d3.event=e;argumentz[0]=this.__data__;try{listener.apply(this,argumentz)}finally{d3.event=o}}}function d3_selection_onFilter(listener,argumentz){var l=d3_selection_onListener(listener,argumentz);return function(e){var target=this,related=e.relatedTarget;if(!related||related!==target&&!(related.compareDocumentPosition(target)&8)){l.call(target,e)}}}var d3_event_dragSelect,d3_event_dragId=0;function d3_event_dragSuppress(node){var name=".dragsuppress-"+ ++d3_event_dragId,click="click"+name,w=d3.select(d3_window(node)).on("touchmove"+name,d3_eventPreventDefault).on("dragstart"+name,d3_eventPreventDefault).on("selectstart"+name,d3_eventPreventDefault);if(d3_event_dragSelect==null){d3_event_dragSelect="onselectstart"in node?false:d3_vendorSymbol(node.style,"userSelect")}if(d3_event_dragSelect){var style=d3_documentElement(node).style,select=style[d3_event_dragSelect];style[d3_event_dragSelect]="none"}return function(suppressClick){w.on(name,null);if(d3_event_dragSelect)style[d3_event_dragSelect]=select;if(suppressClick){var off=function(){w.on(click,null)};w.on(click,function(){d3_eventPreventDefault();off()},true);setTimeout(off,0)}}}d3.mouse=function(container){return d3_mousePoint(container,d3_eventSource())};var d3_mouse_bug44083=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function d3_mousePoint(container,e){if(e.changedTouches)e=e.changedTouches[0];var svg=container.ownerSVGElement||container;if(svg.createSVGPoint){var point=svg.createSVGPoint();if(d3_mouse_bug44083<0){var window=d3_window(container);if(window.scrollX||window.scrollY){svg=d3.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ctm=svg[0][0].getScreenCTM();d3_mouse_bug44083=!(ctm.f||ctm.e);svg.remove()}}if(d3_mouse_bug44083)point.x=e.pageX,point.y=e.pageY;else point.x=e.clientX,point.y=e.clientY;point=point.matrixTransform(container.getScreenCTM().inverse());return[point.x,point.y]}var rect=container.getBoundingClientRect();return[e.clientX-rect.left-container.clientLeft,e.clientY-rect.top-container.clientTop]}d3.touch=function(container,touches,identifier){if(arguments.length<3)identifier=touches,touches=d3_eventSource().changedTouches;if(touches)for(var i=0,n=touches.length,touch;i<n;++i){if((touch=touches[i]).identifier===identifier){return d3_mousePoint(container,touch)}}};d3.behavior.drag=function(){var event=d3_eventDispatch(drag,"drag","dragstart","dragend"),origin=null,mousedown=dragstart(d3_noop,d3.mouse,d3_window,"mousemove","mouseup"),touchstart=dragstart(d3_behavior_dragTouchId,d3.touch,d3_identity,"touchmove","touchend");function drag(){this.on("mousedown.drag",mousedown).on("touchstart.drag",touchstart)}function dragstart(id,position,subject,move,end){return function(){var that=this,target=d3.event.target.correspondingElement||d3.event.target,parent=that.parentNode,dispatch=event.of(that,arguments),dragged=0,dragId=id(),dragName=".drag"+(dragId==null?"":"-"+dragId),dragOffset,dragSubject=d3.select(subject(target)).on(move+dragName,moved).on(end+dragName,ended),dragRestore=d3_event_dragSuppress(target),position0=position(parent,dragId);if(origin){dragOffset=origin.apply(that,arguments);dragOffset=[dragOffset.x-position0[0],dragOffset.y-position0[1]]}else{dragOffset=[0,0]}dispatch({type:"dragstart"});function moved(){var position1=position(parent,dragId),dx,dy;if(!position1)return;dx=position1[0]-position0[0];dy=position1[1]-position0[1];dragged|=dx|dy;position0=position1;dispatch({type:"drag",x:position1[0]+dragOffset[0],y:position1[1]+dragOffset[1],dx:dx,dy:dy})}function ended(){if(!position(parent,dragId))return;dragSubject.on(move+dragName,null).on(end+dragName,null);dragRestore(dragged);dispatch({type:"dragend"})}}}drag.origin=function(x){if(!arguments.length)return origin;origin=x;return drag};return d3.rebind(drag,event,"on")};function d3_behavior_dragTouchId(){return d3.event.changedTouches[0].identifier}d3.touches=function(container,touches){if(arguments.length<2)touches=d3_eventSource().touches;return touches?d3_array(touches).map(function(touch){var point=d3_mousePoint(container,touch);point.identifier=touch.identifier;return point}):[]};var \u03b5=1e-6,\u03b52=\u03b5*\u03b5,\u03c0=Math.PI,\u03c4=2*\u03c0,\u03c4\u03b5=\u03c4-\u03b5,half\u03c0=\u03c0/2,d3_radians=\u03c0/180,d3_degrees=180/\u03c0;function d3_sgn(x){return x>0?1:x<0?-1:0}function d3_cross2d(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function d3_acos(x){return x>1?0:x<-1?\u03c0:Math.acos(x)}function d3_asin(x){return x>1?half\u03c0:x<-1?-half\u03c0:Math.asin(x)}function d3_sinh(x){return((x=Math.exp(x))-1/x)/2}function d3_cosh(x){return((x=Math.exp(x))+1/x)/2}function d3_tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}function d3_haversin(x){return(x=Math.sin(x/2))*x}var \u03c1=Math.SQRT2,\u03c12=2,\u03c14=4;d3.interpolateZoom=function(p0,p1){var ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy,i,S;if(d2<\u03b52){S=Math.log(w1/w0)/\u03c1;i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(\u03c1*t*S)]}}else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+\u03c14*d2)/(2*w0*\u03c12*d1),b1=(w1*w1-w0*w0-\u03c14*d2)/(2*w1*\u03c12*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/\u03c1;i=function(t){var s=t*S,coshr0=d3_cosh(r0),u=w0/(\u03c12*d1)*(coshr0*d3_tanh(\u03c1*s+r0)-d3_sinh(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/d3_cosh(\u03c1*s+r0)]}}i.duration=S*1e3;return i};d3.behavior.zoom=function(){var view={x:0,y:0,k:1},translate0,center0,center,size=[960,500],scaleExtent=d3_behavior_zoomInfinity,duration=250,zooming=0,mousedown="mousedown.zoom",mousemove="mousemove.zoom",mouseup="mouseup.zoom",mousewheelTimer,touchstart="touchstart.zoom",touchtime,event=d3_eventDispatch(zoom,"zoomstart","zoom","zoomend"),x0,x1,y0,y1;if(!d3_behavior_zoomWheel){d3_behavior_zoomWheel="onwheel"in d3_document?(d3_behavior_zoomDelta=function(){return-d3.event.deltaY*(d3.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d3_document?(d3_behavior_zoomDelta=function(){return d3.event.wheelDelta},"mousewheel"):(d3_behavior_zoomDelta=function(){return-d3.event.detail},"MozMousePixelScroll")}function zoom(g){g.on(mousedown,mousedowned).on(d3_behavior_zoomWheel+".zoom",mousewheeled).on("dblclick.zoom",dblclicked).on(touchstart,touchstarted)}zoom.event=function(g){g.each(function(){var dispatch=event.of(this,arguments),view1=view;if(d3_transitionInheritId){d3.select(this).transition().each("start.zoom",function(){view=this.__chart__||{x:0,y:0,k:1};zoomstarted(dispatch)}).tween("zoom:zoom",function(){var dx=size[0],dy=size[1],cx=center0?center0[0]:dx/2,cy=center0?center0[1]:dy/2,i=d3.interpolateZoom([(cx-view.x)/view.k,(cy-view.y)/view.k,dx/view.k],[(cx-view1.x)/view1.k,(cy-view1.y)/view1.k,dx/view1.k]);return function(t){var l=i(t),k=dx/l[2];this.__chart__=view={x:cx-l[0]*k,y:cy-l[1]*k,k:k};zoomed(dispatch)}}).each("interrupt.zoom",function(){zoomended(dispatch)}).each("end.zoom",function(){zoomended(dispatch)})}else{this.__chart__=view;zoomstarted(dispatch);zoomed(dispatch);zoomended(dispatch)}})};zoom.translate=function(_){if(!arguments.length)return[view.x,view.y];view={x:+_[0],y:+_[1],k:view.k};rescale();return zoom};zoom.scale=function(_){if(!arguments.length)return view.k;view={x:view.x,y:view.y,k:null};scaleTo(+_);rescale();return zoom};zoom.scaleExtent=function(_){if(!arguments.length)return scaleExtent;scaleExtent=_==null?d3_behavior_zoomInfinity:[+_[0],+_[1]];return zoom};zoom.center=function(_){if(!arguments.length)return center;center=_&&[+_[0],+_[1]];return zoom};zoom.size=function(_){if(!arguments.length)return size;size=_&&[+_[0],+_[1]];return zoom};zoom.duration=function(_){if(!arguments.length)return duration;duration=+_;return zoom};zoom.x=function(z){if(!arguments.length)return x1;x1=z;x0=z.copy();view={x:0,y:0,k:1};return zoom};zoom.y=function(z){if(!arguments.length)return y1;y1=z;y0=z.copy();view={x:0,y:0,k:1};return zoom};function location(p){return[(p[0]-view.x)/view.k,(p[1]-view.y)/view.k]}function point(l){return[l[0]*view.k+view.x,l[1]*view.k+view.y]}function scaleTo(s){view.k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],s))}function translateTo(p,l){l=point(l);view.x+=p[0]-l[0];view.y+=p[1]-l[1]}function zoomTo(that,p,l,k){that.__chart__={x:view.x,y:view.y,k:view.k};scaleTo(Math.pow(2,k));translateTo(center0=p,l);that=d3.select(that);if(duration>0)that=that.transition().duration(duration);that.call(zoom.event)}function rescale(){if(x1)x1.domain(x0.range().map(function(x){return(x-view.x)/view.k}).map(x0.invert));if(y1)y1.domain(y0.range().map(function(y){return(y-view.y)/view.k}).map(y0.invert))}function zoomstarted(dispatch){if(!zooming++)dispatch({type:"zoomstart"})}function zoomed(dispatch){rescale();dispatch({type:"zoom",scale:view.k,translate:[view.x,view.y]})}function zoomended(dispatch){if(!--zooming)dispatch({type:"zoomend"}),center0=null}function mousedowned(){var that=this,dispatch=event.of(that,arguments),dragged=0,subject=d3.select(d3_window(that)).on(mousemove,moved).on(mouseup,ended),location0=location(d3.mouse(that)),dragRestore=d3_event_dragSuppress(that);d3_selection_interrupt.call(that);zoomstarted(dispatch);function moved(){dragged=1;translateTo(d3.mouse(that),location0);zoomed(dispatch)}function ended(){subject.on(mousemove,null).on(mouseup,null);dragRestore(dragged);zoomended(dispatch)}}function touchstarted(){var that=this,dispatch=event.of(that,arguments),locations0={},distance0=0,scale0,zoomName=".zoom-"+d3.event.changedTouches[0].identifier,touchmove="touchmove"+zoomName,touchend="touchend"+zoomName,targets=[],subject=d3.select(that),dragRestore=d3_event_dragSuppress(that);started();zoomstarted(dispatch);subject.on(mousedown,null).on(touchstart,started);function relocate(){var touches=d3.touches(that);scale0=view.k;touches.forEach(function(t){if(t.identifier in locations0)locations0[t.identifier]=location(t)});return touches}function started(){var target=d3.event.target;d3.select(target).on(touchmove,moved).on(touchend,ended);targets.push(target);var changed=d3.event.changedTouches;for(var i=0,n=changed.length;i<n;++i){locations0[changed[i].identifier]=null}var touches=relocate(),now=Date.now();if(touches.length===1){if(now-touchtime<500){var p=touches[0];zoomTo(that,p,locations0[p.identifier],Math.floor(Math.log(view.k)/Math.LN2)+1);d3_eventPreventDefault()}touchtime=now}else if(touches.length>1){var p=touches[0],q=touches[1],dx=p[0]-q[0],dy=p[1]-q[1];distance0=dx*dx+dy*dy}}function moved(){var touches=d3.touches(that),p0,l0,p1,l1;d3_selection_interrupt.call(that);for(var i=0,n=touches.length;i<n;++i,l1=null){p1=touches[i];if(l1=locations0[p1.identifier]){if(l0)break;p0=p1,l0=l1}}if(l1){var distance1=(distance1=p1[0]-p0[0])*distance1+(distance1=p1[1]-p0[1])*distance1,scale1=distance0&&Math.sqrt(distance1/distance0);p0=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2];l0=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2];scaleTo(scale1*scale0)}touchtime=null;translateTo(p0,l0);zoomed(dispatch)}function ended(){if(d3.event.touches.length){var changed=d3.event.changedTouches;for(var i=0,n=changed.length;i<n;++i){delete locations0[changed[i].identifier]}for(var identifier in locations0){return void relocate()}}d3.selectAll(targets).on(zoomName,null);subject.on(mousedown,mousedowned).on(touchstart,touchstarted);dragRestore();zoomended(dispatch)}}function mousewheeled(){var dispatch=event.of(this,arguments);if(mousewheelTimer)clearTimeout(mousewheelTimer);else d3_selection_interrupt.call(this),translate0=location(center0=center||d3.mouse(this)),zoomstarted(dispatch);mousewheelTimer=setTimeout(function(){mousewheelTimer=null;zoomended(dispatch)},50);d3_eventPreventDefault();scaleTo(Math.pow(2,d3_behavior_zoomDelta()*.002)*view.k);translateTo(center0,translate0);zoomed(dispatch)}function dblclicked(){var p=d3.mouse(this),k=Math.log(view.k)/Math.LN2;zoomTo(this,p,location(p),d3.event.shiftKey?Math.ceil(k)-1:Math.floor(k)+1)}return d3.rebind(zoom,event,"on")};var d3_behavior_zoomInfinity=[0,Infinity],d3_behavior_zoomDelta,d3_behavior_zoomWheel;d3.color=d3_color;function d3_color(){}d3_color.prototype.toString=function(){return this.rgb()+""};d3.hsl=d3_hsl;function d3_hsl(h,s,l){return this instanceof d3_hsl?void(this.h=+h,this.s=+s,this.l=+l):arguments.length<2?h instanceof d3_hsl?new d3_hsl(h.h,h.s,h.l):d3_rgb_parse(""+h,d3_rgb_hsl,d3_hsl):new d3_hsl(h,s,l)}var d3_hslPrototype=d3_hsl.prototype=new d3_color;d3_hslPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);return new d3_hsl(this.h,this.s,this.l/k)};d3_hslPrototype.darker=function(k){k=Math.pow(.7,arguments.length?k:1);return new d3_hsl(this.h,this.s,k*this.l)};d3_hslPrototype.rgb=function(){return d3_hsl_rgb(this.h,this.s,this.l)};function d3_hsl_rgb(h,s,l){var m1,m2;h=isNaN(h)?0:(h%=360)<0?h+360:h;s=isNaN(s)?0:s<0?0:s>1?1:s;l=l<0?0:l>1?1:l;m2=l<=.5?l*(1+s):l+s-l*s;m1=2*l-m2;function v(h){if(h>360)h-=360;else if(h<0)h+=360;if(h<60)return m1+(m2-m1)*h/60;if(h<180)return m2;if(h<240)return m1+(m2-m1)*(240-h)/60;return m1}function vv(h){return Math.round(v(h)*255)}return new d3_rgb(vv(h+120),vv(h),vv(h-120))}d3.hcl=d3_hcl;function d3_hcl(h,c,l){return this instanceof d3_hcl?void(this.h=+h,this.c=+c,this.l=+l):arguments.length<2?h instanceof d3_hcl?new d3_hcl(h.h,h.c,h.l):h instanceof d3_lab?d3_lab_hcl(h.l,h.a,h.b):d3_lab_hcl((h=d3_rgb_lab((h=d3.rgb(h)).r,h.g,h.b)).l,h.a,h.b):new d3_hcl(h,c,l)}var d3_hclPrototype=d3_hcl.prototype=new d3_color;d3_hclPrototype.brighter=function(k){return new d3_hcl(this.h,this.c,Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)))};d3_hclPrototype.darker=function(k){return new d3_hcl(this.h,this.c,Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)))};d3_hclPrototype.rgb=function(){return d3_hcl_lab(this.h,this.c,this.l).rgb()};function d3_hcl_lab(h,c,l){if(isNaN(h))h=0;if(isNaN(c))c=0;return new d3_lab(l,Math.cos(h*=d3_radians)*c,Math.sin(h)*c)}d3.lab=d3_lab;function d3_lab(l,a,b){return this instanceof d3_lab?void(this.l=+l,this.a=+a,this.b=+b):arguments.length<2?l instanceof d3_lab?new d3_lab(l.l,l.a,l.b):l instanceof d3_hcl?d3_hcl_lab(l.h,l.c,l.l):d3_rgb_lab((l=d3_rgb(l)).r,l.g,l.b):new d3_lab(l,a,b)}var d3_lab_K=18;var d3_lab_X=.95047,d3_lab_Y=1,d3_lab_Z=1.08883;var d3_labPrototype=d3_lab.prototype=new d3_color;d3_labPrototype.brighter=function(k){return new d3_lab(Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)),this.a,this.b)};d3_labPrototype.darker=function(k){return new d3_lab(Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)),this.a,this.b)};d3_labPrototype.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)};function d3_lab_rgb(l,a,b){var y=(l+16)/116,x=y+a/500,z=y-b/200;x=d3_lab_xyz(x)*d3_lab_X;y=d3_lab_xyz(y)*d3_lab_Y;z=d3_lab_xyz(z)*d3_lab_Z;return new d3_rgb(d3_xyz_rgb(3.2404542*x-1.5371385*y-.4985314*z),d3_xyz_rgb(-.969266*x+1.8760108*y+.041556*z),d3_xyz_rgb(.0556434*x-.2040259*y+1.0572252*z))}function d3_lab_hcl(l,a,b){return l>0?new d3_hcl(Math.atan2(b,a)*d3_degrees,Math.sqrt(a*a+b*b),l):new d3_hcl(NaN,NaN,l)}function d3_lab_xyz(x){return x>.206893034?x*x*x:(x-4/29)/7.787037}function d3_xyz_lab(x){return x>.008856?Math.pow(x,1/3):7.787037*x+4/29}function d3_xyz_rgb(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))}d3.rgb=d3_rgb;function d3_rgb(r,g,b){return this instanceof d3_rgb?void(this.r=~~r,this.g=~~g,this.b=~~b):arguments.length<2?r instanceof d3_rgb?new d3_rgb(r.r,r.g,r.b):d3_rgb_parse(""+r,d3_rgb,d3_hsl_rgb):new d3_rgb(r,g,b)}function d3_rgbNumber(value){return new d3_rgb(value>>16,value>>8&255,value&255)}function d3_rgbString(value){return d3_rgbNumber(value)+""}var d3_rgbPrototype=d3_rgb.prototype=new d3_color;d3_rgbPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);var r=this.r,g=this.g,b=this.b,i=30;if(!r&&!g&&!b)return new d3_rgb(i,i,i);if(r&&r<i)r=i;if(g&&g<i)g=i;if(b&&b<i)b=i;return new d3_rgb(Math.min(255,r/k),Math.min(255,g/k),Math.min(255,b/k))};d3_rgbPrototype.darker=function(k){k=Math.pow(.7,arguments.length?k:1);return new d3_rgb(k*this.r,k*this.g,k*this.b)};d3_rgbPrototype.hsl=function(){return d3_rgb_hsl(this.r,this.g,this.b)};d3_rgbPrototype.toString=function(){return"#"+d3_rgb_hex(this.r)+d3_rgb_hex(this.g)+d3_rgb_hex(this.b)};function d3_rgb_hex(v){return v<16?"0"+Math.max(0,v).toString(16):Math.min(255,v).toString(16)}function d3_rgb_parse(format,rgb,hsl){var r=0,g=0,b=0,m1,m2,color;m1=/([a-z]+)\((.*)\)/.exec(format=format.toLowerCase());if(m1){m2=m1[2].split(",");switch(m1[1]){case"hsl":{return hsl(parseFloat(m2[0]),parseFloat(m2[1])/100,parseFloat(m2[2])/100)}case"rgb":{return rgb(d3_rgb_parseNumber(m2[0]),d3_rgb_parseNumber(m2[1]),d3_rgb_parseNumber(m2[2]))}}}if(color=d3_rgb_names.get(format)){return rgb(color.r,color.g,color.b)}if(format!=null&&format.charAt(0)==="#"&&!isNaN(color=parseInt(format.slice(1),16))){if(format.length===4){r=(color&3840)>>4;r=r>>4|r;g=color&240;g=g>>4|g;b=color&15;b=b<<4|b}else if(format.length===7){r=(color&16711680)>>16;g=(color&65280)>>8;b=color&255}}return rgb(r,g,b)}function d3_rgb_hsl(r,g,b){var min=Math.min(r/=255,g/=255,b/=255),max=Math.max(r,g,b),d=max-min,h,s,l=(max+min)/2;if(d){s=l<.5?d/(max+min):d/(2-max-min);if(r==max)h=(g-b)/d+(g<b?6:0);else if(g==max)h=(b-r)/d+2;else h=(r-g)/d+4;h*=60}else{h=NaN;s=l>0&&l<1?0:h}return new d3_hsl(h,s,l)}function d3_rgb_lab(r,g,b){r=d3_rgb_xyz(r);g=d3_rgb_xyz(g);b=d3_rgb_xyz(b);var x=d3_xyz_lab((.4124564*r+.3575761*g+.1804375*b)/d3_lab_X),y=d3_xyz_lab((.2126729*r+.7151522*g+.072175*b)/d3_lab_Y),z=d3_xyz_lab((.0193339*r+.119192*g+.9503041*b)/d3_lab_Z);return d3_lab(116*y-16,500*(x-y),200*(y-z))}function d3_rgb_xyz(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function d3_rgb_parseNumber(c){var f=parseFloat(c);return c.charAt(c.length-1)==="%"?Math.round(f*2.55):f}var d3_rgb_names=d3.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});d3_rgb_names.forEach(function(key,value){d3_rgb_names.set(key,d3_rgbNumber(value))});function d3_functor(v){return typeof v==="function"?v:function(){return v}}d3.functor=d3_functor;d3.xhr=d3_xhrType(d3_identity);function d3_xhrType(response){return function(url,mimeType,callback){if(arguments.length===2&&typeof mimeType==="function")callback=mimeType,mimeType=null;return d3_xhr(url,mimeType,response,callback)}}function d3_xhr(url,mimeType,response,callback){var xhr={},dispatch=d3.dispatch("beforesend","progress","load","error"),headers={},request=new XMLHttpRequest,responseType=null;if(this.XDomainRequest&&!("withCredentials"in request)&&/^(http(s)?:)?\/\//.test(url))request=new XDomainRequest;"onload"in request?request.onload=request.onerror=respond:request.onreadystatechange=function(){request.readyState>3&&respond()};function respond(){var status=request.status,result;if(!status&&d3_xhrHasResponse(request)||status>=200&&status<300||status===304){try{result=response.call(xhr,request)}catch(e){dispatch.error.call(xhr,e);return}dispatch.load.call(xhr,result)}else{dispatch.error.call(xhr,request)}}request.onprogress=function(event){var o=d3.event;d3.event=event;try{dispatch.progress.call(xhr,request)}finally{d3.event=o}};xhr.header=function(name,value){name=(name+"").toLowerCase();if(arguments.length<2)return headers[name];if(value==null)delete headers[name];else headers[name]=value+"";return xhr};xhr.mimeType=function(value){if(!arguments.length)return mimeType;mimeType=value==null?null:value+"";return xhr};xhr.responseType=function(value){if(!arguments.length)return responseType;responseType=value;return xhr};xhr.response=function(value){response=value;return xhr};["get","post"].forEach(function(method){xhr[method]=function(){return xhr.send.apply(xhr,[method].concat(d3_array(arguments)))}});xhr.send=function(method,data,callback){if(arguments.length===2&&typeof data==="function")callback=data,data=null;request.open(method,url,true);if(mimeType!=null&&!("accept"in headers))headers["accept"]=mimeType+",*/*";if(request.setRequestHeader)for(var name in headers)request.setRequestHeader(name,headers[name]);if(mimeType!=null&&request.overrideMimeType)request.overrideMimeType(mimeType);if(responseType!=null)request.responseType=responseType;if(callback!=null)xhr.on("error",callback).on("load",function(request){callback(null,request)});dispatch.beforesend.call(xhr,request);request.send(data==null?null:data);return xhr};xhr.abort=function(){request.abort();return xhr};d3.rebind(xhr,dispatch,"on");return callback==null?xhr:xhr.get(d3_xhr_fixCallback(callback))}function d3_xhr_fixCallback(callback){return callback.length===1?function(error,request){callback(error==null?request:null)}:callback}function d3_xhrHasResponse(request){var type=request.responseType;return type&&type!=="text"?request.response:request.responseText}d3.dsv=function(delimiter,mimeType){var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);function dsv(url,row,callback){if(arguments.length<3)callback=row,row=null;var xhr=d3_xhr(url,mimeType,row==null?response:typedResponse(row),callback);xhr.row=function(_){return arguments.length?xhr.response((row=_)==null?response:typedResponse(_)):row};return xhr}function response(request){return dsv.parse(request.responseText)}function typedResponse(f){return function(request){return dsv.parse(request.responseText,f)}}dsv.parse=function(text,f){var o;return dsv.parseRows(text,function(row,i){if(o)return o(row,i-1);var a=new Function("d","return {"+row.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}");o=f?function(row,i){return f(a(row),i)}:a})};dsv.parseRows=function(text,f){var EOL={},EOF={},rows=[],N=text.length,I=0,n=0,t,eol;function token(){if(I>=N)return EOF;if(eol)return eol=false,EOL;var j=I;if(text.charCodeAt(j)===34){var i=j;while(i++<N){if(text.charCodeAt(i)===34){if(text.charCodeAt(i+1)!==34)break;++i}}I=i+2;var c=text.charCodeAt(i+1);if(c===13){eol=true;if(text.charCodeAt(i+2)===10)++I}else if(c===10){eol=true}return text.slice(j+1,i).replace(/""/g,'"')}while(I<N){var c=text.charCodeAt(I++),k=1;if(c===10)eol=true;else if(c===13){eol=true;if(text.charCodeAt(I)===10)++I,++k}else if(c!==delimiterCode)continue;return text.slice(j,I-k)}return text.slice(j)}while((t=token())!==EOF){var a=[];while(t!==EOL&&t!==EOF){a.push(t);t=token()}if(f&&(a=f(a,n++))==null)continue;rows.push(a)}return rows};dsv.format=function(rows){if(Array.isArray(rows[0]))return dsv.formatRows(rows);var fieldSet=new d3_Set,fields=[];rows.forEach(function(row){for(var field in row){if(!fieldSet.has(field)){fields.push(fieldSet.add(field))}}});return[fields.map(formatValue).join(delimiter)].concat(rows.map(function(row){return fields.map(function(field){return formatValue(row[field])}).join(delimiter)})).join("\n")};dsv.formatRows=function(rows){return rows.map(formatRow).join("\n")};function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return reFormat.test(text)?'"'+text.replace(/\"/g,'""')+'"':text}return dsv};d3.csv=d3.dsv(",","text/csv");d3.tsv=d3.dsv("\t","text/tab-separated-values");var d3_timer_queueHead,d3_timer_queueTail,d3_timer_interval,d3_timer_timeout,d3_timer_frame=this[d3_vendorSymbol(this,"requestAnimationFrame")]||function(callback){setTimeout(callback,17)};d3.timer=function(){d3_timer.apply(this,arguments)};function d3_timer(callback,delay,then){var n=arguments.length;if(n<2)delay=0;if(n<3)then=Date.now();var time=then+delay,timer={c:callback,t:time,n:null};if(d3_timer_queueTail)d3_timer_queueTail.n=timer;else d3_timer_queueHead=timer;d3_timer_queueTail=timer;if(!d3_timer_interval){d3_timer_timeout=clearTimeout(d3_timer_timeout);d3_timer_interval=1;d3_timer_frame(d3_timer_step)}return timer}function d3_timer_step(){var now=d3_timer_mark(),delay=d3_timer_sweep()-now;if(delay>24){if(isFinite(delay)){clearTimeout(d3_timer_timeout);d3_timer_timeout=setTimeout(d3_timer_step,delay)}d3_timer_interval=0}else{d3_timer_interval=1;d3_timer_frame(d3_timer_step)}}d3.timer.flush=function(){d3_timer_mark();d3_timer_sweep()};function d3_timer_mark(){var now=Date.now(),timer=d3_timer_queueHead;while(timer){if(now>=timer.t&&timer.c(now-timer.t))timer.c=null;timer=timer.n}return now}function d3_timer_sweep(){var t0,t1=d3_timer_queueHead,time=Infinity;while(t1){if(t1.c){if(t1.t<time)time=t1.t;t1=(t0=t1).n}else{t1=t0?t0.n=t1.n:d3_timer_queueHead=t1.n}}d3_timer_queueTail=t0;return time}function d3_format_precision(x,p){return p-(x?Math.ceil(Math.log(x)/Math.LN10):1)}d3.round=function(x,n){return n?Math.round(x*(n=Math.pow(10,n)))/n:Math.round(x)};var d3_formatPrefixes=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(d3_formatPrefix);d3.formatPrefix=function(value,precision){var i=0;if(value=+value){if(value<0)value*=-1;if(precision)value=d3.round(value,d3_format_precision(value,precision));i=1+Math.floor(1e-12+Math.log(value)/Math.LN10);i=Math.max(-24,Math.min(24,Math.floor((i-1)/3)*3))}return d3_formatPrefixes[8+i/3]};function d3_formatPrefix(d,i){var k=Math.pow(10,abs(8-i)*3);return{scale:i>8?function(d){return d/k}:function(d){return d*k},symbol:d}}function d3_locale_numberFormat(locale){var locale_decimal=locale.decimal,locale_thousands=locale.thousands,locale_grouping=locale.grouping,locale_currency=locale.currency,formatGroup=locale_grouping&&locale_thousands?function(value,width){var i=value.length,t=[],j=0,g=locale_grouping[0],length=0;while(i>0&&g>0){if(length+g+1>width)g=Math.max(1,width-length);t.push(value.substring(i-=g,i+g));if((length+=g+1)>width)break;g=locale_grouping[j=(j+1)%locale_grouping.length]}return t.reverse().join(locale_thousands)}:d3_identity;return function(specifier){var match=d3_format_re.exec(specifier),fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zfill=match[5],width=+match[6],comma=match[7],precision=match[8],type=match[9],scale=1,prefix="",suffix="",integer=false,exponent=true;if(precision)precision=+precision.substring(1);if(zfill||fill==="0"&&align==="="){zfill=fill="0";align="="}switch(type){case"n":comma=true;type="g";break;case"%":scale=100;suffix="%";type="f";break;case"p":scale=100;suffix="%";type="r";break;case"b":case"o":case"x":case"X":if(symbol==="#")prefix="0"+type.toLowerCase();case"c":exponent=false;case"d":integer=true;precision=0;break;case"s":scale=-1;type="r";break}if(symbol==="$")prefix=locale_currency[0],suffix=locale_currency[1];if(type=="r"&&!precision)type="g";if(precision!=null){if(type=="g")precision=Math.max(1,Math.min(21,precision));else if(type=="e"||type=="f")precision=Math.max(0,Math.min(20,precision))}type=d3_format_types.get(type)||d3_format_typeDefault;var zcomma=zfill&&comma;return function(value){var fullSuffix=suffix;if(integer&&value%1)return"";var negative=value<0||value===0&&1/value<0?(value=-value,"-"):sign==="-"?"":sign;if(scale<0){var unit=d3.formatPrefix(value,precision);value=unit.scale(value);fullSuffix=unit.symbol+suffix}else{value*=scale}value=type(value,precision);var i=value.lastIndexOf("."),before,after;if(i<0){var j=exponent?value.lastIndexOf("e"):-1;if(j<0)before=value,after="";else before=value.substring(0,j),after=value.substring(j)}else{before=value.substring(0,i);after=locale_decimal+value.substring(i+1)}if(!zfill&&comma)before=formatGroup(before,Infinity);var length=prefix.length+before.length+after.length+(zcomma?0:negative.length),padding=length<width?new Array(length=width-length+1).join(fill):"";if(zcomma)before=formatGroup(padding+before,padding.length?width-after.length:Infinity);negative+=prefix;value=before+after;return(align==="<"?negative+value+padding:align===">"?padding+negative+value:align==="^"?padding.substring(0,length>>=1)+negative+value+padding.substring(length):negative+(zcomma?value:padding+value))+fullSuffix}}}var d3_format_re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var d3_format_types=d3.map({b:function(x){return x.toString(2)},c:function(x){return String.fromCharCode(x)},o:function(x){return x.toString(8)},x:function(x){return x.toString(16)},X:function(x){return x.toString(16).toUpperCase()},g:function(x,p){return x.toPrecision(p)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},r:function(x,p){return(x=d3.round(x,d3_format_precision(x,p))).toFixed(Math.max(0,Math.min(20,d3_format_precision(x*(1+1e-15),p))))}});function d3_format_typeDefault(x){return x+""}var d3_time=d3.time={},d3_date=Date;function d3_date_utc(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}d3_date_utc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){d3_time_prototype.setUTCDate.apply(this._,arguments)},setDay:function(){d3_time_prototype.setUTCDay.apply(this._,arguments)},setFullYear:function(){d3_time_prototype.setUTCFullYear.apply(this._,arguments)},setHours:function(){d3_time_prototype.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){d3_time_prototype.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){d3_time_prototype.setUTCMinutes.apply(this._,arguments)},setMonth:function(){d3_time_prototype.setUTCMonth.apply(this._,arguments)},setSeconds:function(){d3_time_prototype.setUTCSeconds.apply(this._,arguments)},setTime:function(){d3_time_prototype.setTime.apply(this._,arguments)}};var d3_time_prototype=Date.prototype;function d3_time_interval(local,step,number){function round(date){var d0=local(date),d1=offset(d0,1);return date-d0<d1-date?d0:d1}function ceil(date){step(date=local(new d3_date(date-1)),1);return date}function offset(date,k){step(date=new d3_date(+date),k);return date}function range(t0,t1,dt){var time=ceil(t0),times=[];if(dt>1){while(time<t1){if(!(number(time)%dt))times.push(new Date(+time));step(time,1)}}else{while(time<t1)times.push(new Date(+time)),step(time,1)}return times}function range_utc(t0,t1,dt){try{d3_date=d3_date_utc;var utc=new d3_date_utc;utc._=t0;return range(utc,t1,dt)}finally{d3_date=Date}}local.floor=local;local.round=round;local.ceil=ceil;local.offset=offset;local.range=range;var utc=local.utc=d3_time_interval_utc(local);utc.floor=utc;utc.round=d3_time_interval_utc(round);utc.ceil=d3_time_interval_utc(ceil);utc.offset=d3_time_interval_utc(offset);utc.range=range_utc;return local}function d3_time_interval_utc(method){return function(date,k){try{d3_date=d3_date_utc;var utc=new d3_date_utc;utc._=date;return method(utc,k)._}finally{d3_date=Date}}}d3_time.year=d3_time_interval(function(date){date=d3_time.day(date);date.setMonth(0,1);return date},function(date,offset){date.setFullYear(date.getFullYear()+offset)},function(date){return date.getFullYear()});d3_time.years=d3_time.year.range;d3_time.years.utc=d3_time.year.utc.range;d3_time.day=d3_time_interval(function(date){var day=new d3_date(2e3,0);day.setFullYear(date.getFullYear(),date.getMonth(),date.getDate());return day},function(date,offset){date.setDate(date.getDate()+offset)},function(date){return date.getDate()-1});d3_time.days=d3_time.day.range;d3_time.days.utc=d3_time.day.utc.range;d3_time.dayOfYear=function(date){var year=d3_time.year(date);return Math.floor((date-year-(date.getTimezoneOffset()-year.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(day,i){i=7-i;var interval=d3_time[day]=d3_time_interval(function(date){(date=d3_time.day(date)).setDate(date.getDate()-(date.getDay()+i)%7);return date},function(date,offset){date.setDate(date.getDate()+Math.floor(offset)*7)},function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)-(day!==i)});d3_time[day+"s"]=interval.range;d3_time[day+"s"].utc=interval.utc.range;d3_time[day+"OfYear"]=function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)}});d3_time.week=d3_time.sunday;d3_time.weeks=d3_time.sunday.range;d3_time.weeks.utc=d3_time.sunday.utc.range;d3_time.weekOfYear=d3_time.sundayOfYear;function d3_locale_timeFormat(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_days=locale.days,locale_shortDays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;function d3_time_format(template){var n=template.length;function format(date){var string=[],i=-1,j=0,c,p,f;while(++i<n){if(template.charCodeAt(i)===37){string.push(template.slice(j,i));if((p=d3_time_formatPads[c=template.charAt(++i)])!=null)c=template.charAt(++i);if(f=d3_time_formats[c])c=f(date,p==null?c==="e"?" ":"0":p);string.push(c);j=i+1}}string.push(template.slice(j,i));return string.join("")}format.parse=function(string){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=d3_time_parse(d,template,string,0);if(i!=string.length)return null;if("p"in d)d.H=d.H%12+d.p*12;var localZ=d.Z!=null&&d3_date!==d3_date_utc,date=new(localZ?d3_date_utc:d3_date);if("j"in d)date.setFullYear(d.y,0,d.j);else if("W"in d||"U"in d){if(!("w"in d))d.w="W"in d?1:0;date.setFullYear(d.y,0,1);date.setFullYear(d.y,0,"W"in d?(d.w+6)%7+d.W*7-(date.getDay()+5)%7:d.w+d.U*7-(date.getDay()+6)%7)}else date.setFullYear(d.y,d.m,d.d);date.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L);return localZ?date._:date};format.toString=function(){return template};return format}function d3_time_parse(date,template,string,j){var c,p,t,i=0,n=template.length,m=string.length;while(i<n){if(j>=m)return-1;c=template.charCodeAt(i++);if(c===37){t=template.charAt(i++);p=d3_time_parsers[t in d3_time_formatPads?template.charAt(i++):t];if(!p||(j=p(date,string,j))<0)return-1}else if(c!=string.charCodeAt(j++)){return-1}}return j}d3_time_format.utc=function(template){var local=d3_time_format(template);function format(date){try{d3_date=d3_date_utc;var utc=new d3_date;utc._=date;return local(utc)}finally{d3_date=Date}}format.parse=function(string){try{d3_date=d3_date_utc;var date=local.parse(string);return date&&date._}finally{d3_date=Date}};format.toString=local.toString;return format};d3_time_format.multi=d3_time_format.utc.multi=d3_time_formatMulti;var d3_time_periodLookup=d3.map(),d3_time_dayRe=d3_time_formatRe(locale_days),d3_time_dayLookup=d3_time_formatLookup(locale_days),d3_time_dayAbbrevRe=d3_time_formatRe(locale_shortDays),d3_time_dayAbbrevLookup=d3_time_formatLookup(locale_shortDays),d3_time_monthRe=d3_time_formatRe(locale_months),d3_time_monthLookup=d3_time_formatLookup(locale_months),d3_time_monthAbbrevRe=d3_time_formatRe(locale_shortMonths),d3_time_monthAbbrevLookup=d3_time_formatLookup(locale_shortMonths);locale_periods.forEach(function(p,i){d3_time_periodLookup.set(p.toLowerCase(),i)});var d3_time_formats={a:function(d){return locale_shortDays[d.getDay()]},A:function(d){return locale_days[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:d3_time_format(locale_dateTime),d:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},e:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},H:function(d,p){return d3_time_formatPad(d.getHours(),p,2)},I:function(d,p){return d3_time_formatPad(d.getHours()%12||12,p,2)},j:function(d,p){return d3_time_formatPad(1+d3_time.dayOfYear(d),p,3)},L:function(d,p){return d3_time_formatPad(d.getMilliseconds(),p,3)},m:function(d,p){return d3_time_formatPad(d.getMonth()+1,p,2)},M:function(d,p){return d3_time_formatPad(d.getMinutes(),p,2)},p:function(d){return locale_periods[+(d.getHours()>=12)]},S:function(d,p){return d3_time_formatPad(d.getSeconds(),p,2)},U:function(d,p){return d3_time_formatPad(d3_time.sundayOfYear(d),p,2)},w:function(d){return d.getDay()},W:function(d,p){return d3_time_formatPad(d3_time.mondayOfYear(d),p,2)},x:d3_time_format(locale_date),X:d3_time_format(locale_time),y:function(d,p){return d3_time_formatPad(d.getFullYear()%100,p,2)},Y:function(d,p){return d3_time_formatPad(d.getFullYear()%1e4,p,4)},Z:d3_time_zone,"%":function(){return"%"}};var d3_time_parsers={a:d3_time_parseWeekdayAbbrev,A:d3_time_parseWeekday,b:d3_time_parseMonthAbbrev,B:d3_time_parseMonth,c:d3_time_parseLocaleFull,d:d3_time_parseDay,e:d3_time_parseDay,H:d3_time_parseHour24,I:d3_time_parseHour24,j:d3_time_parseDayOfYear,L:d3_time_parseMilliseconds,m:d3_time_parseMonthNumber,M:d3_time_parseMinutes,p:d3_time_parseAmPm,S:d3_time_parseSeconds,U:d3_time_parseWeekNumberSunday,w:d3_time_parseWeekdayNumber,W:d3_time_parseWeekNumberMonday,x:d3_time_parseLocaleDate,X:d3_time_parseLocaleTime,y:d3_time_parseYear,Y:d3_time_parseFullYear,Z:d3_time_parseZone,"%":d3_time_parseLiteralPercent};function d3_time_parseWeekdayAbbrev(date,string,i){d3_time_dayAbbrevRe.lastIndex=0;var n=d3_time_dayAbbrevRe.exec(string.slice(i));return n?(date.w=d3_time_dayAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseWeekday(date,string,i){d3_time_dayRe.lastIndex=0;var n=d3_time_dayRe.exec(string.slice(i));return n?(date.w=d3_time_dayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonthAbbrev(date,string,i){d3_time_monthAbbrevRe.lastIndex=0;var n=d3_time_monthAbbrevRe.exec(string.slice(i));return n?(date.m=d3_time_monthAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonth(date,string,i){d3_time_monthRe.lastIndex=0;var n=d3_time_monthRe.exec(string.slice(i));return n?(date.m=d3_time_monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseLocaleFull(date,string,i){return d3_time_parse(date,d3_time_formats.c.toString(),string,i)}function d3_time_parseLocaleDate(date,string,i){return d3_time_parse(date,d3_time_formats.x.toString(),string,i)}function d3_time_parseLocaleTime(date,string,i){return d3_time_parse(date,d3_time_formats.X.toString(),string,i)}function d3_time_parseAmPm(date,string,i){var n=d3_time_periodLookup.get(string.slice(i,i+=2).toLowerCase());return n==null?-1:(date.p=n,i)}return d3_time_format}var d3_time_formatPads={"-":"",_:" ",0:"0"},d3_time_numberRe=/^\s*\d+/,d3_time_percentRe=/^%/;function d3_time_formatPad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function d3_time_formatRe(names){return new RegExp("^(?:"+names.map(d3.requote).join("|")+")","i")}function d3_time_formatLookup(names){var map=new d3_Map,i=-1,n=names.length;while(++i<n)map.set(names[i].toLowerCase(),i);return map}function d3_time_parseWeekdayNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+1));return n?(date.w=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberSunday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.U=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberMonday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.W=+n[0],i+n[0].length):-1}function d3_time_parseFullYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+4));return n?(date.y=+n[0],i+n[0].length):-1}function d3_time_parseYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.y=d3_time_expandYear(+n[0]),i+n[0].length):-1}function d3_time_parseZone(date,string,i){return/^[+-]\d{4}$/.test(string=string.slice(i,i+5))?(date.Z=-string,i+5):-1}function d3_time_expandYear(d){return d+(d>68?1900:2e3)}function d3_time_parseMonthNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.m=n[0]-1,i+n[0].length):-1}function d3_time_parseDay(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.d=+n[0],i+n[0].length):-1}function d3_time_parseDayOfYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.j=+n[0],i+n[0].length):-1}function d3_time_parseHour24(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.H=+n[0],i+n[0].length):-1}function d3_time_parseMinutes(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.M=+n[0],i+n[0].length):-1}function d3_time_parseSeconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.S=+n[0],i+n[0].length):-1}function d3_time_parseMilliseconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.L=+n[0],i+n[0].length):-1}function d3_time_zone(d){var z=d.getTimezoneOffset(),zs=z>0?"-":"+",zh=abs(z)/60|0,zm=abs(z)%60;return zs+d3_time_formatPad(zh,"0",2)+d3_time_formatPad(zm,"0",2)}function d3_time_parseLiteralPercent(date,string,i){d3_time_percentRe.lastIndex=0;var n=d3_time_percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function d3_time_formatMulti(formats){var n=formats.length,i=-1;while(++i<n)formats[i][0]=this(formats[i][0]);return function(date){var i=0,f=formats[i];while(!f[1](date))f=formats[++i];return f[0](date)}}d3.locale=function(locale){return{numberFormat:d3_locale_numberFormat(locale),timeFormat:d3_locale_timeFormat(locale)}};var d3_locale_enUS=d3.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});d3.format=d3_locale_enUS.numberFormat;d3.geo={};function d3_adder(){}d3_adder.prototype={s:0,t:0,add:function(y){d3_adderSum(y,this.t,d3_adderTemp);d3_adderSum(d3_adderTemp.s,this.s,this);if(this.s)this.t+=d3_adderTemp.t;else this.s=d3_adderTemp.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var d3_adderTemp=new d3_adder;function d3_adderSum(a,b,o){var x=o.s=a+b,bv=x-a,av=x-bv;o.t=a-av+(b-bv)}d3.geo.stream=function(object,listener){if(object&&d3_geo_streamObjectType.hasOwnProperty(object.type)){d3_geo_streamObjectType[object.type](object,listener)}else{d3_geo_streamGeometry(object,listener)}};function d3_geo_streamGeometry(geometry,listener){if(geometry&&d3_geo_streamGeometryType.hasOwnProperty(geometry.type)){d3_geo_streamGeometryType[geometry.type](geometry,listener)}}var d3_geo_streamObjectType={Feature:function(feature,listener){d3_geo_streamGeometry(feature.geometry,listener)},FeatureCollection:function(object,listener){var features=object.features,i=-1,n=features.length;while(++i<n)d3_geo_streamGeometry(features[i].geometry,listener)}};var d3_geo_streamGeometryType={Sphere:function(object,listener){listener.sphere()},Point:function(object,listener){object=object.coordinates;listener.point(object[0],object[1],object[2])},MultiPoint:function(object,listener){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)object=coordinates[i],listener.point(object[0],object[1],object[2])},LineString:function(object,listener){d3_geo_streamLine(object.coordinates,listener,0)},MultiLineString:function(object,listener){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)d3_geo_streamLine(coordinates[i],listener,0)},Polygon:function(object,listener){d3_geo_streamPolygon(object.coordinates,listener)},MultiPolygon:function(object,listener){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)d3_geo_streamPolygon(coordinates[i],listener)},GeometryCollection:function(object,listener){var geometries=object.geometries,i=-1,n=geometries.length;while(++i<n)d3_geo_streamGeometry(geometries[i],listener)}};function d3_geo_streamLine(coordinates,listener,closed){var i=-1,n=coordinates.length-closed,coordinate;listener.lineStart();while(++i<n)coordinate=coordinates[i],listener.point(coordinate[0],coordinate[1],coordinate[2]);listener.lineEnd()}function d3_geo_streamPolygon(coordinates,listener){var i=-1,n=coordinates.length;listener.polygonStart();while(++i<n)d3_geo_streamLine(coordinates[i],listener,1);listener.polygonEnd()}d3.geo.area=function(object){d3_geo_areaSum=0;d3.geo.stream(object,d3_geo_area);return d3_geo_areaSum};var d3_geo_areaSum,d3_geo_areaRingSum=new d3_adder;var d3_geo_area={sphere:function(){d3_geo_areaSum+=4*\u03c0},point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_areaRingSum.reset();d3_geo_area.lineStart=d3_geo_areaRingStart},polygonEnd:function(){var area=2*d3_geo_areaRingSum;d3_geo_areaSum+=area<0?4*\u03c0+area:area;d3_geo_area.lineStart=d3_geo_area.lineEnd=d3_geo_area.point=d3_noop}};function d3_geo_areaRingStart(){var \u03bb00,\u03c600,\u03bb0,cos\u03c60,sin\u03c60;d3_geo_area.point=function(\u03bb,\u03c6){d3_geo_area.point=nextPoint;\u03bb0=(\u03bb00=\u03bb)*d3_radians,cos\u03c60=Math.cos(\u03c6=(\u03c600=\u03c6)*d3_radians/2+\u03c0/4),sin\u03c60=Math.sin(\u03c6)};function nextPoint(\u03bb,\u03c6){\u03bb*=d3_radians;\u03c6=\u03c6*d3_radians/2+\u03c0/4;var d\u03bb=\u03bb-\u03bb0,sd\u03bb=d\u03bb>=0?1:-1,ad\u03bb=sd\u03bb*d\u03bb,cos\u03c6=Math.cos(\u03c6),sin\u03c6=Math.sin(\u03c6),k=sin\u03c60*sin\u03c6,u=cos\u03c60*cos\u03c6+k*Math.cos(ad\u03bb),v=k*sd\u03bb*Math.sin(ad\u03bb);d3_geo_areaRingSum.add(Math.atan2(v,u));\u03bb0=\u03bb,cos\u03c60=cos\u03c6,sin\u03c60=sin\u03c6}d3_geo_area.lineEnd=function(){nextPoint(\u03bb00,\u03c600)}}function d3_geo_cartesian(spherical){var \u03bb=spherical[0],\u03c6=spherical[1],cos\u03c6=Math.cos(\u03c6);return[cos\u03c6*Math.cos(\u03bb),cos\u03c6*Math.sin(\u03bb),Math.sin(\u03c6)]}function d3_geo_cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function d3_geo_cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function d3_geo_cartesianAdd(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function d3_geo_cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function d3_geo_cartesianNormalize(d){var l=Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l;d[1]/=l;d[2]/=l}function d3_geo_spherical(cartesian){return[Math.atan2(cartesian[1],cartesian[0]),d3_asin(cartesian[2])]}function d3_geo_sphericalEqual(a,b){return abs(a[0]-b[0])<\u03b5&&abs(a[1]-b[1])<\u03b5}d3.geo.bounds=function(){var \u03bb0,\u03c60,\u03bb1,\u03c61,\u03bb_,\u03bb__,\u03c6__,p0,d\u03bbSum,ranges,range;var bound={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){bound.point=ringPoint;bound.lineStart=ringStart;bound.lineEnd=ringEnd;d\u03bbSum=0;d3_geo_area.polygonStart()},polygonEnd:function(){d3_geo_area.polygonEnd();bound.point=point;bound.lineStart=lineStart;bound.lineEnd=lineEnd;if(d3_geo_areaRingSum<0)\u03bb0=-(\u03bb1=180),\u03c60=-(\u03c61=90);else if(d\u03bbSum>\u03b5)\u03c61=90;else if(d\u03bbSum<-\u03b5)\u03c60=-90;range[0]=\u03bb0,range[1]=\u03bb1}};function point(\u03bb,\u03c6){ranges.push(range=[\u03bb0=\u03bb,\u03bb1=\u03bb]);if(\u03c6<\u03c60)\u03c60=\u03c6;if(\u03c6>\u03c61)\u03c61=\u03c6}function linePoint(\u03bb,\u03c6){var p=d3_geo_cartesian([\u03bb*d3_radians,\u03c6*d3_radians]);if(p0){var normal=d3_geo_cartesianCross(p0,p),equatorial=[normal[1],-normal[0],0],inflection=d3_geo_cartesianCross(equatorial,normal);d3_geo_cartesianNormalize(inflection);inflection=d3_geo_spherical(inflection);var d\u03bb=\u03bb-\u03bb_,s=d\u03bb>0?1:-1,\u03bbi=inflection[0]*d3_degrees*s,antimeridian=abs(d\u03bb)>180;if(antimeridian^(s*\u03bb_<\u03bbi&&\u03bbi<s*\u03bb)){var \u03c6i=inflection[1]*d3_degrees;if(\u03c6i>\u03c61)\u03c61=\u03c6i}else if(\u03bbi=(\u03bbi+360)%360-180,antimeridian^(s*\u03bb_<\u03bbi&&\u03bbi<s*\u03bb)){var \u03c6i=-inflection[1]*d3_degrees;if(\u03c6i<\u03c60)\u03c60=\u03c6i}else{if(\u03c6<\u03c60)\u03c60=\u03c6;if(\u03c6>\u03c61)\u03c61=\u03c6}if(antimeridian){if(\u03bb<\u03bb_){if(angle(\u03bb0,\u03bb)>angle(\u03bb0,\u03bb1))\u03bb1=\u03bb}else{if(angle(\u03bb,\u03bb1)>angle(\u03bb0,\u03bb1))\u03bb0=\u03bb}}else{if(\u03bb1>=\u03bb0){if(\u03bb<\u03bb0)\u03bb0=\u03bb;if(\u03bb>\u03bb1)\u03bb1=\u03bb}else{if(\u03bb>\u03bb_){if(angle(\u03bb0,\u03bb)>angle(\u03bb0,\u03bb1))\u03bb1=\u03bb}else{if(angle(\u03bb,\u03bb1)>angle(\u03bb0,\u03bb1))\u03bb0=\u03bb}}}}else{point(\u03bb,\u03c6)}p0=p,\u03bb_=\u03bb}function lineStart(){bound.point=linePoint}function lineEnd(){range[0]=\u03bb0,range[1]=\u03bb1;bound.point=point;p0=null}function ringPoint(\u03bb,\u03c6){if(p0){var d\u03bb=\u03bb-\u03bb_;d\u03bbSum+=abs(d\u03bb)>180?d\u03bb+(d\u03bb>0?360:-360):d\u03bb}else \u03bb__=\u03bb,\u03c6__=\u03c6;d3_geo_area.point(\u03bb,\u03c6);linePoint(\u03bb,\u03c6)}function ringStart(){d3_geo_area.lineStart()}function ringEnd(){ringPoint(\u03bb__,\u03c6__);d3_geo_area.lineEnd();if(abs(d\u03bbSum)>\u03b5)\u03bb0=-(\u03bb1=180);range[0]=\u03bb0,range[1]=\u03bb1;p0=null}function angle(\u03bb0,\u03bb1){return(\u03bb1-=\u03bb0)<0?\u03bb1+360:\u03bb1}function compareRanges(a,b){return a[0]-b[0]}function withinRange(x,range){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}return function(feature){\u03c61=\u03bb1=-(\u03bb0=\u03c60=Infinity);ranges=[];d3.geo.stream(feature,bound);var n=ranges.length;if(n){ranges.sort(compareRanges);for(var i=1,a=ranges[0],b,merged=[a];i<n;++i){b=ranges[i];if(withinRange(b[0],a)||withinRange(b[1],a)){if(angle(a[0],b[1])>angle(a[0],a[1]))a[1]=b[1];if(angle(b[0],a[1])>angle(a[0],a[1]))a[0]=b[0]}else{merged.push(a=b)}}var best=-Infinity,d\u03bb;for(var n=merged.length-1,i=0,a=merged[n],b;i<=n;a=b,++i){b=merged[i];if((d\u03bb=angle(a[1],b[0]))>best)best=d\u03bb,\u03bb0=b[0],\u03bb1=a[1]}}ranges=range=null;return \u03bb0===Infinity||\u03c60===Infinity?[[NaN,NaN],[NaN,NaN]]:[[\u03bb0,\u03c60],[\u03bb1,\u03c61]]}}();d3.geo.centroid=function(object){d3_geo_centroidW0=d3_geo_centroidW1=d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0;d3.geo.stream(object,d3_geo_centroid);var x=d3_geo_centroidX2,y=d3_geo_centroidY2,z=d3_geo_centroidZ2,m=x*x+y*y+z*z;if(m<\u03b52){x=d3_geo_centroidX1,y=d3_geo_centroidY1,z=d3_geo_centroidZ1;if(d3_geo_centroidW1<\u03b5)x=d3_geo_centroidX0,y=d3_geo_centroidY0,z=d3_geo_centroidZ0;m=x*x+y*y+z*z;if(m<\u03b52)return[NaN,NaN]}return[Math.atan2(y,x)*d3_degrees,d3_asin(z/Math.sqrt(m))*d3_degrees]};var d3_geo_centroidW0,d3_geo_centroidW1,d3_geo_centroidX0,d3_geo_centroidY0,d3_geo_centroidZ0,d3_geo_centroidX1,d3_geo_centroidY1,d3_geo_centroidZ1,d3_geo_centroidX2,d3_geo_centroidY2,d3_geo_centroidZ2;var d3_geo_centroid={sphere:d3_noop,point:d3_geo_centroidPoint,lineStart:d3_geo_centroidLineStart,lineEnd:d3_geo_centroidLineEnd,polygonStart:function(){d3_geo_centroid.lineStart=d3_geo_centroidRingStart},polygonEnd:function(){d3_geo_centroid.lineStart=d3_geo_centroidLineStart}};function d3_geo_centroidPoint(\u03bb,\u03c6){\u03bb*=d3_radians;var cos\u03c6=Math.cos(\u03c6*=d3_radians);d3_geo_centroidPointXYZ(cos\u03c6*Math.cos(\u03bb),cos\u03c6*Math.sin(\u03bb),Math.sin(\u03c6))}function d3_geo_centroidPointXYZ(x,y,z){++d3_geo_centroidW0;d3_geo_centroidX0+=(x-d3_geo_centroidX0)/d3_geo_centroidW0;d3_geo_centroidY0+=(y-d3_geo_centroidY0)/d3_geo_centroidW0;d3_geo_centroidZ0+=(z-d3_geo_centroidZ0)/d3_geo_centroidW0}function d3_geo_centroidLineStart(){var x0,y0,z0;d3_geo_centroid.point=function(\u03bb,\u03c6){\u03bb*=d3_radians;var cos\u03c6=Math.cos(\u03c6*=d3_radians);x0=cos\u03c6*Math.cos(\u03bb);y0=cos\u03c6*Math.sin(\u03bb);z0=Math.sin(\u03c6);d3_geo_centroid.point=nextPoint;d3_geo_centroidPointXYZ(x0,y0,z0)};function nextPoint(\u03bb,\u03c6){\u03bb*=d3_radians;var cos\u03c6=Math.cos(\u03c6*=d3_radians),x=cos\u03c6*Math.cos(\u03bb),y=cos\u03c6*Math.sin(\u03bb),z=Math.sin(\u03c6),w=Math.atan2(Math.sqrt((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);d3_geo_centroidW1+=w;d3_geo_centroidX1+=w*(x0+(x0=x));d3_geo_centroidY1+=w*(y0+(y0=y));d3_geo_centroidZ1+=w*(z0+(z0=z));d3_geo_centroidPointXYZ(x0,y0,z0)}}function d3_geo_centroidLineEnd(){d3_geo_centroid.point=d3_geo_centroidPoint}function d3_geo_centroidRingStart(){var \u03bb00,\u03c600,x0,y0,z0;d3_geo_centroid.point=function(\u03bb,\u03c6){\u03bb00=\u03bb,\u03c600=\u03c6;d3_geo_centroid.point=nextPoint;\u03bb*=d3_radians;var cos\u03c6=Math.cos(\u03c6*=d3_radians);x0=cos\u03c6*Math.cos(\u03bb);y0=cos\u03c6*Math.sin(\u03bb);z0=Math.sin(\u03c6);d3_geo_centroidPointXYZ(x0,y0,z0)};d3_geo_centroid.lineEnd=function(){nextPoint(\u03bb00,\u03c600);d3_geo_centroid.lineEnd=d3_geo_centroidLineEnd;d3_geo_centroid.point=d3_geo_centroidPoint};function nextPoint(\u03bb,\u03c6){\u03bb*=d3_radians;var cos\u03c6=Math.cos(\u03c6*=d3_radians),x=cos\u03c6*Math.cos(\u03bb),y=cos\u03c6*Math.sin(\u03bb),z=Math.sin(\u03c6),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=Math.sqrt(cx*cx+cy*cy+cz*cz),u=x0*x+y0*y+z0*z,v=m&&-d3_acos(u)/m,w=Math.atan2(m,u);d3_geo_centroidX2+=v*cx;d3_geo_centroidY2+=v*cy;d3_geo_centroidZ2+=v*cz;d3_geo_centroidW1+=w;d3_geo_centroidX1+=w*(x0+(x0=x));d3_geo_centroidY1+=w*(y0+(y0=y));d3_geo_centroidZ1+=w*(z0+(z0=z));d3_geo_centroidPointXYZ(x0,y0,z0)}}function d3_geo_compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}if(a.invert&&b.invert)compose.invert=function(x,y){return x=b.invert(x,y),x&&a.invert(x[0],x[1])};return compose}function d3_true(){return true}function d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener){var subject=[],clip=[];segments.forEach(function(segment){if((n=segment.length-1)<=0)return;var n,p0=segment[0],p1=segment[n];if(d3_geo_sphericalEqual(p0,p1)){listener.lineStart();for(var i=0;i<n;++i)listener.point((p0=segment[i])[0],p0[1]);listener.lineEnd();return}var a=new d3_geo_clipPolygonIntersection(p0,segment,null,true),b=new d3_geo_clipPolygonIntersection(p0,null,a,false);a.o=b;subject.push(a);clip.push(b);a=new d3_geo_clipPolygonIntersection(p1,segment,null,false);b=new d3_geo_clipPolygonIntersection(p1,null,a,true);a.o=b;subject.push(a);clip.push(b)});clip.sort(compare);d3_geo_clipPolygonLinkCircular(subject);d3_geo_clipPolygonLinkCircular(clip);if(!subject.length)return;for(var i=0,entry=clipStartInside,n=clip.length;i<n;++i){clip[i].e=entry=!entry}var start=subject[0],points,point;while(1){var current=start,isSubject=true;while(current.v)if((current=current.n)===start)return;points=current.z;listener.lineStart();do{current.v=current.o.v=true;if(current.e){if(isSubject){for(var i=0,n=points.length;i<n;++i)listener.point((point=points[i])[0],point[1])}else{interpolate(current.x,current.n.x,1,listener)}current=current.n}else{if(isSubject){points=current.p.z;for(var i=points.length-1;i>=0;--i)listener.point((point=points[i])[0],point[1])}else{interpolate(current.x,current.p.x,-1,listener)}current=current.p}current=current.o;points=current.z;isSubject=!isSubject}while(!current.v);listener.lineEnd()}}function d3_geo_clipPolygonLinkCircular(array){if(!(n=array.length))return;var n,i=0,a=array[0],b;while(++i<n){a.n=b=array[i];b.p=a;a=b}a.n=b=array[0];b.p=a}function d3_geo_clipPolygonIntersection(point,points,other,entry){this.x=point;this.z=points;this.o=other;this.e=entry;this.v=false;this.n=this.p=null}function d3_geo_clip(pointVisible,clipLine,interpolate,clipStart){return function(rotate,listener){var line=clipLine(listener),rotatedClipStart=rotate.invert(clipStart[0],clipStart[1]);var clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing;clip.lineStart=ringStart;clip.lineEnd=ringEnd;segments=[];polygon=[]},polygonEnd:function(){clip.point=point;clip.lineStart=lineStart;clip.lineEnd=lineEnd;segments=d3.merge(segments);var clipStartInside=d3_geo_pointInPolygon(rotatedClipStart,polygon);if(segments.length){if(!polygonStarted)listener.polygonStart(),polygonStarted=true;d3_geo_clipPolygon(segments,d3_geo_clipSort,clipStartInside,interpolate,listener)}else if(clipStartInside){if(!polygonStarted)listener.polygonStart(),polygonStarted=true;listener.lineStart();interpolate(null,null,1,listener);listener.lineEnd()}if(polygonStarted)listener.polygonEnd(),polygonStarted=false;segments=polygon=null},sphere:function(){listener.polygonStart();listener.lineStart();interpolate(null,null,1,listener);listener.lineEnd();listener.polygonEnd()}};function point(\u03bb,\u03c6){var point=rotate(\u03bb,\u03c6);if(pointVisible(\u03bb=point[0],\u03c6=point[1]))listener.point(\u03bb,\u03c6)}function pointLine(\u03bb,\u03c6){var point=rotate(\u03bb,\u03c6);line.point(point[0],point[1])}function lineStart(){clip.point=pointLine;line.lineStart()}function lineEnd(){clip.point=point;line.lineEnd()}var segments;var buffer=d3_geo_clipBufferListener(),ringListener=clipLine(buffer),polygonStarted=false,polygon,ring;function pointRing(\u03bb,\u03c6){ring.push([\u03bb,\u03c6]);var point=rotate(\u03bb,\u03c6);ringListener.point(point[0],point[1])}function ringStart(){ringListener.lineStart();ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]);ringListener.lineEnd();var clean=ringListener.clean(),ringSegments=buffer.buffer(),segment,n=ringSegments.length;ring.pop();polygon.push(ring);ring=null;if(!n)return;if(clean&1){segment=ringSegments[0];var n=segment.length-1,i=-1,point;if(n>0){if(!polygonStarted)listener.polygonStart(),polygonStarted=true;listener.lineStart();while(++i<n)listener.point((point=segment[i])[0],point[1]);listener.lineEnd()}return}if(n>1&&clean&2)ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));segments.push(ringSegments.filter(d3_geo_clipSegmentLength1))}return clip}}function d3_geo_clipSegmentLength1(segment){return segment.length>1}function d3_geo_clipBufferListener(){var lines=[],line;return{lineStart:function(){lines.push(line=[])},point:function(\u03bb,\u03c6){line.push([\u03bb,\u03c6])},lineEnd:d3_noop,buffer:function(){var buffer=lines;lines=[];line=null;return buffer},rejoin:function(){if(lines.length>1)lines.push(lines.pop().concat(lines.shift()))}}}function d3_geo_clipSort(a,b){return((a=a.x)[0]<0?a[1]-half\u03c0-\u03b5:half\u03c0-a[1])-((b=b.x)[0]<0?b[1]-half\u03c0-\u03b5:half\u03c0-b[1])}var d3_geo_clipAntimeridian=d3_geo_clip(d3_true,d3_geo_clipAntimeridianLine,d3_geo_clipAntimeridianInterpolate,[-\u03c0,-\u03c0/2]);function d3_geo_clipAntimeridianLine(listener){var \u03bb0=NaN,\u03c60=NaN,s\u03bb0=NaN,clean;return{lineStart:function(){listener.lineStart();clean=1},point:function(\u03bb1,\u03c61){var s\u03bb1=\u03bb1>0?\u03c0:-\u03c0,d\u03bb=abs(\u03bb1-\u03bb0);if(abs(d\u03bb-\u03c0)<\u03b5){listener.point(\u03bb0,\u03c60=(\u03c60+\u03c61)/2>0?half\u03c0:-half\u03c0);listener.point(s\u03bb0,\u03c60);listener.lineEnd();listener.lineStart();listener.point(s\u03bb1,\u03c60);listener.point(\u03bb1,\u03c60);clean=0}else if(s\u03bb0!==s\u03bb1&&d\u03bb>=\u03c0){if(abs(\u03bb0-s\u03bb0)<\u03b5)\u03bb0-=s\u03bb0*\u03b5;if(abs(\u03bb1-s\u03bb1)<\u03b5)\u03bb1-=s\u03bb1*\u03b5;\u03c60=d3_geo_clipAntimeridianIntersect(\u03bb0,\u03c60,\u03bb1,\u03c61);listener.point(s\u03bb0,\u03c60);listener.lineEnd();listener.lineStart();listener.point(s\u03bb1,\u03c60);clean=0}listener.point(\u03bb0=\u03bb1,\u03c60=\u03c61);s\u03bb0=s\u03bb1},lineEnd:function(){listener.lineEnd();\u03bb0=\u03c60=NaN},clean:function(){return 2-clean}}}function d3_geo_clipAntimeridianIntersect(\u03bb0,\u03c60,\u03bb1,\u03c61){var cos\u03c60,cos\u03c61,sin\u03bb0_\u03bb1=Math.sin(\u03bb0-\u03bb1);return abs(sin\u03bb0_\u03bb1)>\u03b5?Math.atan((Math.sin(\u03c60)*(cos\u03c61=Math.cos(\u03c61))*Math.sin(\u03bb1)-Math.sin(\u03c61)*(cos\u03c60=Math.cos(\u03c60))*Math.sin(\u03bb0))/(cos\u03c60*cos\u03c61*sin\u03bb0_\u03bb1)):(\u03c60+\u03c61)/2}function d3_geo_clipAntimeridianInterpolate(from,to,direction,listener){var \u03c6;if(from==null){\u03c6=direction*half\u03c0;listener.point(-\u03c0,\u03c6);listener.point(0,\u03c6);listener.point(\u03c0,\u03c6);listener.point(\u03c0,0);listener.point(\u03c0,-\u03c6);listener.point(0,-\u03c6);listener.point(-\u03c0,-\u03c6);listener.point(-\u03c0,0);listener.point(-\u03c0,\u03c6)}else if(abs(from[0]-to[0])>\u03b5){var s=from[0]<to[0]?\u03c0:-\u03c0;\u03c6=direction*s/2;listener.point(-s,\u03c6);listener.point(0,\u03c6);listener.point(s,\u03c6)}else{listener.point(to[0],to[1])}}function d3_geo_pointInPolygon(point,polygon){var meridian=point[0],parallel=point[1],meridianNormal=[Math.sin(meridian),-Math.cos(meridian),0],polarAngle=0,winding=0;d3_geo_areaRingSum.reset();for(var i=0,n=polygon.length;i<n;++i){var ring=polygon[i],m=ring.length;if(!m)continue;var point0=ring[0],\u03bb0=point0[0],\u03c60=point0[1]/2+\u03c0/4,sin\u03c60=Math.sin(\u03c60),cos\u03c60=Math.cos(\u03c60),j=1;while(true){if(j===m)j=0;point=ring[j];var \u03bb=point[0],\u03c6=point[1]/2+\u03c0/4,sin\u03c6=Math.sin(\u03c6),cos\u03c6=Math.cos(\u03c6),d\u03bb=\u03bb-\u03bb0,sd\u03bb=d\u03bb>=0?1:-1,ad\u03bb=sd\u03bb*d\u03bb,antimeridian=ad\u03bb>\u03c0,k=sin\u03c60*sin\u03c6;d3_geo_areaRingSum.add(Math.atan2(k*sd\u03bb*Math.sin(ad\u03bb),cos\u03c60*cos\u03c6+k*Math.cos(ad\u03bb)));polarAngle+=antimeridian?d\u03bb+sd\u03bb*\u03c4:d\u03bb;if(antimeridian^\u03bb0>=meridian^\u03bb>=meridian){var arc=d3_geo_cartesianCross(d3_geo_cartesian(point0),d3_geo_cartesian(point));d3_geo_cartesianNormalize(arc);var intersection=d3_geo_cartesianCross(meridianNormal,arc);d3_geo_cartesianNormalize(intersection);var \u03c6arc=(antimeridian^d\u03bb>=0?-1:1)*d3_asin(intersection[2]);if(parallel>\u03c6arc||parallel===\u03c6arc&&(arc[0]||arc[1])){winding+=antimeridian^d\u03bb>=0?1:-1}}if(!j++)break;\u03bb0=\u03bb,sin\u03c60=sin\u03c6,cos\u03c60=cos\u03c6,point0=point}}return(polarAngle<-\u03b5||polarAngle<\u03b5&&d3_geo_areaRingSum<-\u03b5)^winding&1}function d3_geo_clipCircle(radius){var cr=Math.cos(radius),smallRadius=cr>0,notHemisphere=abs(cr)>\u03b5,interpolate=d3_geo_circleInterpolate(radius,6*d3_radians);return d3_geo_clip(visible,clipLine,interpolate,smallRadius?[0,-radius]:[-\u03c0,radius-\u03c0]);function visible(\u03bb,\u03c6){return Math.cos(\u03bb)*Math.cos(\u03c6)>cr}function clipLine(listener){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=false;clean=1},point:function(\u03bb,\u03c6){var point1=[\u03bb,\u03c6],point2,v=visible(\u03bb,\u03c6),c=smallRadius?v?0:code(\u03bb,\u03c6):v?code(\u03bb+(\u03bb<0?\u03c0:-\u03c0),\u03c6):0;if(!point0&&(v00=v0=v))listener.lineStart();if(v!==v0){point2=intersect(point0,point1);if(d3_geo_sphericalEqual(point0,point2)||d3_geo_sphericalEqual(point1,point2)){point1[0]+=\u03b5;point1[1]+=\u03b5;v=visible(point1[0],point1[1])}}if(v!==v0){clean=0;if(v){listener.lineStart();point2=intersect(point1,point0);listener.point(point2[0],point2[1])}else{point2=intersect(point0,point1);listener.point(point2[0],point2[1]);listener.lineEnd()}point0=point2}else if(notHemisphere&&point0&&smallRadius^v){var t;if(!(c&c0)&&(t=intersect(point1,point0,true))){clean=0;if(smallRadius){listener.lineStart();listener.point(t[0][0],t[0][1]);listener.point(t[1][0],t[1][1]);listener.lineEnd()}else{listener.point(t[1][0],t[1][1]);listener.lineEnd();listener.lineStart();listener.point(t[0][0],t[0][1])}}}if(v&&(!point0||!d3_geo_sphericalEqual(point0,point1))){listener.point(point1[0],point1[1])}point0=point1,v0=v,c0=c},lineEnd:function(){if(v0)listener.lineEnd();point0=null},clean:function(){return clean|(v00&&v0)<<1}}}function intersect(a,b,two){var pa=d3_geo_cartesian(a),pb=d3_geo_cartesian(b);var n1=[1,0,0],n2=d3_geo_cartesianCross(pa,pb),n2n2=d3_geo_cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=d3_geo_cartesianCross(n1,n2),A=d3_geo_cartesianScale(n1,c1),B=d3_geo_cartesianScale(n2,c2);d3_geo_cartesianAdd(A,B);var u=n1xn2,w=d3_geo_cartesianDot(A,u),uu=d3_geo_cartesianDot(u,u),t2=w*w-uu*(d3_geo_cartesianDot(A,A)-1);if(t2<0)return;var t=Math.sqrt(t2),q=d3_geo_cartesianScale(u,(-w-t)/uu);d3_geo_cartesianAdd(q,A);q=d3_geo_spherical(q);if(!two)return q;var \u03bb0=a[0],\u03bb1=b[0],\u03c60=a[1],\u03c61=b[1],z;if(\u03bb1<\u03bb0)z=\u03bb0,\u03bb0=\u03bb1,\u03bb1=z;var \u03b4\u03bb=\u03bb1-\u03bb0,polar=abs(\u03b4\u03bb-\u03c0)<\u03b5,meridian=polar||\u03b4\u03bb<\u03b5;if(!polar&&\u03c61<\u03c60)z=\u03c60,\u03c60=\u03c61,\u03c61=z;if(meridian?polar?\u03c60+\u03c61>0^q[1]<(abs(q[0]-\u03bb0)<\u03b5?\u03c60:\u03c61):\u03c60<=q[1]&&q[1]<=\u03c61:\u03b4\u03bb>\u03c0^(\u03bb0<=q[0]&&q[0]<=\u03bb1)){var q1=d3_geo_cartesianScale(u,(-w+t)/uu);d3_geo_cartesianAdd(q1,A);return[q,d3_geo_spherical(q1)]}}function code(\u03bb,\u03c6){var r=smallRadius?radius:\u03c0-radius,code=0;if(\u03bb<-r)code|=1;else if(\u03bb>r)code|=2;if(\u03c6<-r)code|=4;else if(\u03c6>r)code|=8;return code}}function d3_geom_clipLine(x0,y0,x1,y1){return function(line){var a=line.a,b=line.b,ax=a.x,ay=a.y,bx=b.x,by=b.y,t0=0,t1=1,dx=bx-ax,dy=by-ay,r;r=x0-ax;if(!dx&&r>0)return;r/=dx;if(dx<0){if(r<t0)return;if(r<t1)t1=r}else if(dx>0){if(r>t1)return;if(r>t0)t0=r}r=x1-ax;if(!dx&&r<0)return;r/=dx;if(dx<0){if(r>t1)return;if(r>t0)t0=r}else if(dx>0){if(r<t0)return;if(r<t1)t1=r}r=y0-ay;if(!dy&&r>0)return;r/=dy;if(dy<0){if(r<t0)return;if(r<t1)t1=r}else if(dy>0){if(r>t1)return;if(r>t0)t0=r}r=y1-ay;if(!dy&&r<0)return;r/=dy;if(dy<0){if(r>t1)return;if(r>t0)t0=r}else if(dy>0){if(r<t0)return;if(r<t1)t1=r}if(t0>0)line.a={x:ax+t0*dx,y:ay+t0*dy};if(t1<1)line.b={x:ax+t1*dx,y:ay+t1*dy};return line}}var d3_geo_clipExtentMAX=1e9;d3.geo.clipExtent=function(){var x0,y0,x1,y1,stream,clip,clipExtent={stream:function(output){if(stream)stream.valid=false;stream=clip(output);stream.valid=true;return stream},extent:function(_){if(!arguments.length)return[[x0,y0],[x1,y1]];clip=d3_geo_clipExtent(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]);if(stream)stream.valid=false,stream=null;return clipExtent}};return clipExtent.extent([[0,0],[960,500]])};function d3_geo_clipExtent(x0,y0,x1,y1){return function(listener){var listener_=listener,bufferListener=d3_geo_clipBufferListener(),clipLine=d3_geom_clipLine(x0,y0,x1,y1),segments,polygon,ring;var clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){listener=bufferListener;segments=[];polygon=[];clean=true},polygonEnd:function(){listener=listener_;segments=d3.merge(segments);var clipStartInside=insidePolygon([x0,y1]),inside=clean&&clipStartInside,visible=segments.length;if(inside||visible){listener.polygonStart();if(inside){listener.lineStart();interpolate(null,null,1,listener);listener.lineEnd()}if(visible){d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener)}listener.polygonEnd()}segments=polygon=ring=null}};function insidePolygon(p){var wn=0,n=polygon.length,y=p[1];for(var i=0;i<n;++i){for(var j=1,v=polygon[i],m=v.length,a=v[0],b;j<m;++j){b=v[j];if(a[1]<=y){if(b[1]>y&&d3_cross2d(a,b,p)>0)++wn}else{if(b[1]<=y&&d3_cross2d(a,b,p)<0)--wn}a=b}}return wn!==0}function interpolate(from,to,direction,listener){var a=0,a1=0;if(from==null||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoints(from,to)<0^direction>0){do{listener.point(a===0||a===3?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1)}else{listener.point(to[0],to[1])}}function pointVisible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function point(x,y){if(pointVisible(x,y))listener.point(x,y)}var x__,y__,v__,x_,y_,v_,first,clean;function lineStart(){clip.point=linePoint;if(polygon)polygon.push(ring=[]);first=true;v_=false;x_=y_=NaN}function lineEnd(){if(segments){linePoint(x__,y__);if(v__&&v_)bufferListener.rejoin();segments.push(bufferListener.buffer())}clip.point=point;if(v_)listener.lineEnd()}function linePoint(x,y){x=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,x));y=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,y));var v=pointVisible(x,y);if(polygon)ring.push([x,y]);if(first){x__=x,y__=y,v__=v;first=false;if(v){listener.lineStart();listener.point(x,y)}}else{if(v&&v_)listener.point(x,y);else{var l={a:{x:x_,y:y_},b:{x:x,y:y}};if(clipLine(l)){if(!v_){listener.lineStart();listener.point(l.a.x,l.a.y)}listener.point(l.b.x,l.b.y);if(!v)listener.lineEnd();clean=false}else if(v){listener.lineStart();listener.point(x,y);clean=false}}}x_=x,y_=y,v_=v}return clip};function corner(p,direction){return abs(p[0]-x0)<\u03b5?direction>0?0:3:abs(p[0]-x1)<\u03b5?direction>0?2:1:abs(p[1]-y0)<\u03b5?direction>0?1:0:direction>0?3:2}function compare(a,b){return comparePoints(a.x,b.x)}function comparePoints(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:ca===0?b[1]-a[1]:ca===1?a[0]-b[0]:ca===2?a[1]-b[1]:b[0]-a[0]}}function d3_geo_conic(projectAt){var \u03c60=0,\u03c61=\u03c0/3,m=d3_geo_projectionMutator(projectAt),p=m(\u03c60,\u03c61);p.parallels=function(_){if(!arguments.length)return[\u03c60/\u03c0*180,\u03c61/\u03c0*180];return m(\u03c60=_[0]*\u03c0/180,\u03c61=_[1]*\u03c0/180)};return p}function d3_geo_conicEqualArea(\u03c60,\u03c61){var sin\u03c60=Math.sin(\u03c60),n=(sin\u03c60+Math.sin(\u03c61))/2,C=1+sin\u03c60*(2*n-sin\u03c60),\u03c10=Math.sqrt(C)/n;function forward(\u03bb,\u03c6){var \u03c1=Math.sqrt(C-2*n*Math.sin(\u03c6))/n;return[\u03c1*Math.sin(\u03bb*=n),\u03c10-\u03c1*Math.cos(\u03bb)]}forward.invert=function(x,y){var \u03c10_y=\u03c10-y;return[Math.atan2(x,\u03c10_y)/n,d3_asin((C-(x*x+\u03c10_y*\u03c10_y)*n*n)/(2*n))]};return forward}(d3.geo.conicEqualArea=function(){return d3_geo_conic(d3_geo_conicEqualArea)}).raw=d3_geo_conicEqualArea;d3.geo.albers=function(){return d3.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};d3.geo.albersUsa=function(){var lower48=d3.geo.albers();var alaska=d3.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var hawaii=d3.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var point,pointStream={point:function(x,y){point=[x,y]}},lower48Point,alaskaPoint,hawaiiPoint;function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];point=null;(lower48Point(x,y),point)||(alaskaPoint(x,y),point)||hawaiiPoint(x,y);return point}albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)};albersUsa.stream=function(stream){var lower48Stream=lower48.stream(stream),alaskaStream=alaska.stream(stream),hawaiiStream=hawaii.stream(stream);return{point:function(x,y){lower48Stream.point(x,y);alaskaStream.point(x,y);hawaiiStream.point(x,y)},sphere:function(){lower48Stream.sphere();alaskaStream.sphere();hawaiiStream.sphere()},lineStart:function(){lower48Stream.lineStart();alaskaStream.lineStart();hawaiiStream.lineStart()},lineEnd:function(){lower48Stream.lineEnd();alaskaStream.lineEnd();hawaiiStream.lineEnd()},polygonStart:function(){lower48Stream.polygonStart();alaskaStream.polygonStart();hawaiiStream.polygonStart()},polygonEnd:function(){lower48Stream.polygonEnd();alaskaStream.polygonEnd();hawaiiStream.polygonEnd()}}};albersUsa.precision=function(_){if(!arguments.length)return lower48.precision();lower48.precision(_);alaska.precision(_);hawaii.precision(_);return albersUsa};albersUsa.scale=function(_){if(!arguments.length)return lower48.scale();lower48.scale(_);alaska.scale(_*.35);hawaii.scale(_);return albersUsa.translate(lower48.translate())};albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream).point;alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+\u03b5,y+.12*k+\u03b5],[x-.214*k-\u03b5,y+.234*k-\u03b5]]).stream(pointStream).point;hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+\u03b5,y+.166*k+\u03b5],[x-.115*k-\u03b5,y+.234*k-\u03b5]]).stream(pointStream).point;return albersUsa};return albersUsa.scale(1070)};var d3_geo_pathAreaSum,d3_geo_pathAreaPolygon,d3_geo_pathArea={point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_pathAreaPolygon=0;d3_geo_pathArea.lineStart=d3_geo_pathAreaRingStart},polygonEnd:function(){d3_geo_pathArea.lineStart=d3_geo_pathArea.lineEnd=d3_geo_pathArea.point=d3_noop;d3_geo_pathAreaSum+=abs(d3_geo_pathAreaPolygon/2)}};function d3_geo_pathAreaRingStart(){var x00,y00,x0,y0;d3_geo_pathArea.point=function(x,y){d3_geo_pathArea.point=nextPoint;x00=x0=x,y00=y0=y};function nextPoint(x,y){d3_geo_pathAreaPolygon+=y0*x-x0*y;x0=x,y0=y}d3_geo_pathArea.lineEnd=function(){nextPoint(x00,y00)}}var d3_geo_pathBoundsX0,d3_geo_pathBoundsY0,d3_geo_pathBoundsX1,d3_geo_pathBoundsY1;var d3_geo_pathBounds={point:d3_geo_pathBoundsPoint,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop};function d3_geo_pathBoundsPoint(x,y){if(x<d3_geo_pathBoundsX0)d3_geo_pathBoundsX0=x;if(x>d3_geo_pathBoundsX1)d3_geo_pathBoundsX1=x;if(y<d3_geo_pathBoundsY0)d3_geo_pathBoundsY0=y;if(y>d3_geo_pathBoundsY1)d3_geo_pathBoundsY1=y}function d3_geo_pathBuffer(){var pointCircle=d3_geo_pathBufferCircle(4.5),buffer=[];var stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd;stream.point=point},pointRadius:function(_){pointCircle=d3_geo_pathBufferCircle(_);return stream},result:function(){if(buffer.length){var result=buffer.join("");buffer=[];return result}}};function point(x,y){buffer.push("M",x,",",y,pointCircle)}function pointLineStart(x,y){buffer.push("M",x,",",y);stream.point=pointLine}function pointLine(x,y){buffer.push("L",x,",",y)}function lineEnd(){stream.point=point}function lineEndPolygon(){buffer.push("Z")}return stream}function d3_geo_pathBufferCircle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}var d3_geo_pathCentroid={point:d3_geo_pathCentroidPoint,lineStart:d3_geo_pathCentroidLineStart,lineEnd:d3_geo_pathCentroidLineEnd,polygonStart:function(){d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidRingStart},polygonEnd:function(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint;d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidLineStart;d3_geo_pathCentroid.lineEnd=d3_geo_pathCentroidLineEnd}};function d3_geo_pathCentroidPoint(x,y){d3_geo_centroidX0+=x;d3_geo_centroidY0+=y;++d3_geo_centroidZ0}function d3_geo_pathCentroidLineStart(){var x0,y0;d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint;d3_geo_pathCentroidPoint(x0=x,y0=y)};function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2;d3_geo_centroidY1+=z*(y0+y)/2;d3_geo_centroidZ1+=z;d3_geo_pathCentroidPoint(x0=x,y0=y)}}function d3_geo_pathCentroidLineEnd(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint}function d3_geo_pathCentroidRingStart(){var x00,y00,x0,y0;d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint;d3_geo_pathCentroidPoint(x00=x0=x,y00=y0=y)};function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2;d3_geo_centroidY1+=z*(y0+y)/2;d3_geo_centroidZ1+=z;z=y0*x-x0*y;d3_geo_centroidX2+=z*(x0+x);d3_geo_centroidY2+=z*(y0+y);d3_geo_centroidZ2+=z*3;d3_geo_pathCentroidPoint(x0=x,y0=y)}d3_geo_pathCentroid.lineEnd=function(){nextPoint(x00,y00)}}function d3_geo_pathContext(context){var pointRadius=4.5;var stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd;stream.point=point},pointRadius:function(_){pointRadius=_;return stream},result:d3_noop};function point(x,y){context.moveTo(x+pointRadius,y);context.arc(x,y,pointRadius,0,\u03c4)}function pointLineStart(x,y){context.moveTo(x,y);stream.point=pointLine}function pointLine(x,y){context.lineTo(x,y)}function lineEnd(){stream.point=point}function lineEndPolygon(){context.closePath()}return stream}function d3_geo_resample(project){var \u03b42=.5,cosMinDistance=Math.cos(30*d3_radians),maxDepth=16;function resample(stream){return(maxDepth?resampleRecursive:resampleNone)(stream)}function resampleNone(stream){return d3_geo_transformPoint(stream,function(x,y){x=project(x,y);stream.point(x[0],x[1])})}function resampleRecursive(stream){var \u03bb00,\u03c600,x00,y00,a00,b00,c00,\u03bb0,x0,y0,a0,b0,c0;var resample={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart();resample.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd();resample.lineStart=lineStart}};function point(x,y){x=project(x,y);stream.point(x[0],x[1])}function lineStart(){x0=NaN;resample.point=linePoint;stream.lineStart()}function linePoint(\u03bb,\u03c6){var c=d3_geo_cartesian([\u03bb,\u03c6]),p=project(\u03bb,\u03c6);resampleLineTo(x0,y0,\u03bb0,a0,b0,c0,x0=p[0],y0=p[1],\u03bb0=\u03bb,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream);stream.point(x0,y0)}function lineEnd(){resample.point=point;stream.lineEnd()}function ringStart(){lineStart();resample.point=ringPoint;resample.lineEnd=ringEnd}function ringPoint(\u03bb,\u03c6){linePoint(\u03bb00=\u03bb,\u03c600=\u03c6),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0;resample.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,\u03bb0,a0,b0,c0,x00,y00,\u03bb00,a00,b00,c00,maxDepth,stream);resample.lineEnd=lineEnd;lineEnd()}return resample}function resampleLineTo(x0,y0,\u03bb0,a0,b0,c0,x1,y1,\u03bb1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*\u03b42&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=Math.sqrt(a*a+b*b+c*c),\u03c62=Math.asin(c/=m),\u03bb2=abs(abs(c)-1)<\u03b5||abs(\u03bb0-\u03bb1)<\u03b5?(\u03bb0+\u03bb1)/2:Math.atan2(b,a),p=project(\u03bb2,\u03c62),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;if(dz*dz/d2>\u03b42||abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance){resampleLineTo(x0,y0,\u03bb0,a0,b0,c0,x2,y2,\u03bb2,a/=m,b/=m,c,depth,stream);stream.point(x2,y2);resampleLineTo(x2,y2,\u03bb2,a,b,c,x1,y1,\u03bb1,a1,b1,c1,depth,stream)}}}resample.precision=function(_){if(!arguments.length)return Math.sqrt(\u03b42);maxDepth=(\u03b42=_*_)>0&&16;return resample};return resample}d3.geo.path=function(){var pointRadius=4.5,projection,context,projectStream,contextStream,cacheStream;function path(object){if(object){if(typeof pointRadius==="function")contextStream.pointRadius(+pointRadius.apply(this,arguments));if(!cacheStream||!cacheStream.valid)cacheStream=projectStream(contextStream);d3.geo.stream(object,cacheStream)}return contextStream.result()}path.area=function(object){d3_geo_pathAreaSum=0;d3.geo.stream(object,projectStream(d3_geo_pathArea));return d3_geo_pathAreaSum};path.centroid=function(object){d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0;d3.geo.stream(object,projectStream(d3_geo_pathCentroid));return d3_geo_centroidZ2?[d3_geo_centroidX2/d3_geo_centroidZ2,d3_geo_centroidY2/d3_geo_centroidZ2]:d3_geo_centroidZ1?[d3_geo_centroidX1/d3_geo_centroidZ1,d3_geo_centroidY1/d3_geo_centroidZ1]:d3_geo_centroidZ0?[d3_geo_centroidX0/d3_geo_centroidZ0,d3_geo_centroidY0/d3_geo_centroidZ0]:[NaN,NaN]};path.bounds=function(object){d3_geo_pathBoundsX1=d3_geo_pathBoundsY1=-(d3_geo_pathBoundsX0=d3_geo_pathBoundsY0=Infinity);d3.geo.stream(object,projectStream(d3_geo_pathBounds));return[[d3_geo_pathBoundsX0,d3_geo_pathBoundsY0],[d3_geo_pathBoundsX1,d3_geo_pathBoundsY1]]};path.projection=function(_){if(!arguments.length)return projection;projectStream=(projection=_)?_.stream||d3_geo_pathProjectStream(_):d3_identity;return reset()};path.context=function(_){if(!arguments.length)return context;contextStream=(context=_)==null?new d3_geo_pathBuffer:new d3_geo_pathContext(_);if(typeof pointRadius!=="function")contextStream.pointRadius(pointRadius);return reset()};path.pointRadius=function(_){if(!arguments.length)return pointRadius;pointRadius=typeof _==="function"?_:(contextStream.pointRadius(+_),+_);return path};function reset(){cacheStream=null;return path}return path.projection(d3.geo.albersUsa()).context(null)};function d3_geo_pathProjectStream(project){var resample=d3_geo_resample(function(x,y){return project([x*d3_degrees,y*d3_degrees])});return function(stream){return d3_geo_projectionRadians(resample(stream))}}d3.geo.transform=function(methods){return{stream:function(stream){var transform=new d3_geo_transform(stream);for(var k in methods)transform[k]=methods[k];return transform}}};function d3_geo_transform(stream){this.stream=stream}d3_geo_transform.prototype={point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function d3_geo_transformPoint(stream,point){return{point:point,sphere:function(){stream.sphere()},lineStart:function(){stream.lineStart()},lineEnd:function(){stream.lineEnd()},polygonStart:function(){stream.polygonStart()},polygonEnd:function(){stream.polygonEnd()}}}d3.geo.projection=d3_geo_projection;d3.geo.projectionMutator=d3_geo_projectionMutator;function d3_geo_projection(project){return d3_geo_projectionMutator(function(){return project})()}function d3_geo_projectionMutator(projectAt){var project,rotate,projectRotate,projectResample=d3_geo_resample(function(x,y){x=project(x,y);return[x[0]*k+\u03b4x,\u03b4y-x[1]*k]}),k=150,x=480,y=250,\u03bb=0,\u03c6=0,\u03b4\u03bb=0,\u03b4\u03c6=0,\u03b4\u03b3=0,\u03b4x,\u03b4y,preclip=d3_geo_clipAntimeridian,postclip=d3_identity,clipAngle=null,clipExtent=null,stream;function projection(point){point=projectRotate(point[0]*d3_radians,point[1]*d3_radians);return[point[0]*k+\u03b4x,\u03b4y-point[1]*k]}function invert(point){point=projectRotate.invert((point[0]-\u03b4x)/k,(\u03b4y-point[1])/k);return point&&[point[0]*d3_degrees,point[1]*d3_degrees]}projection.stream=function(output){if(stream)stream.valid=false;stream=d3_geo_projectionRadians(preclip(rotate,projectResample(postclip(output))));stream.valid=true;return stream};projection.clipAngle=function(_){if(!arguments.length)return clipAngle;preclip=_==null?(clipAngle=_,d3_geo_clipAntimeridian):d3_geo_clipCircle((clipAngle=+_)*d3_radians);return invalidate()};projection.clipExtent=function(_){if(!arguments.length)return clipExtent;clipExtent=_;postclip=_?d3_geo_clipExtent(_[0][0],_[0][1],_[1][0],_[1][1]):d3_identity;return invalidate()};projection.scale=function(_){if(!arguments.length)return k;k=+_;return reset()};projection.translate=function(_){if(!arguments.length)return[x,y];x=+_[0];y=+_[1];return reset()};projection.center=function(_){if(!arguments.length)return[\u03bb*d3_degrees,\u03c6*d3_degrees];\u03bb=_[0]%360*d3_radians;\u03c6=_[1]%360*d3_radians;return reset()};projection.rotate=function(_){if(!arguments.length)return[\u03b4\u03bb*d3_degrees,\u03b4\u03c6*d3_degrees,\u03b4\u03b3*d3_degrees];\u03b4\u03bb=_[0]%360*d3_radians;\u03b4\u03c6=_[1]%360*d3_radians;\u03b4\u03b3=_.length>2?_[2]%360*d3_radians:0;return reset()};d3.rebind(projection,projectResample,"precision");function reset(){projectRotate=d3_geo_compose(rotate=d3_geo_rotation(\u03b4\u03bb,\u03b4\u03c6,\u03b4\u03b3),project);var center=project(\u03bb,\u03c6);\u03b4x=x-center[0]*k;\u03b4y=y+center[1]*k;return invalidate()}function invalidate(){if(stream)stream.valid=false,stream=null;return projection}return function(){project=projectAt.apply(this,arguments);projection.invert=project.invert&&invert;return reset()}}function d3_geo_projectionRadians(stream){return d3_geo_transformPoint(stream,function(x,y){stream.point(x*d3_radians,y*d3_radians)})}function d3_geo_equirectangular(\u03bb,\u03c6){return[\u03bb,\u03c6]}(d3.geo.equirectangular=function(){return d3_geo_projection(d3_geo_equirectangular)}).raw=d3_geo_equirectangular.invert=d3_geo_equirectangular;d3.geo.rotation=function(rotate){rotate=d3_geo_rotation(rotate[0]%360*d3_radians,rotate[1]*d3_radians,rotate.length>2?rotate[2]*d3_radians:0);function forward(coordinates){coordinates=rotate(coordinates[0]*d3_radians,coordinates[1]*d3_radians);return coordinates[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates}forward.invert=function(coordinates){coordinates=rotate.invert(coordinates[0]*d3_radians,coordinates[1]*d3_radians);return coordinates[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates};return forward};function d3_geo_identityRotation(\u03bb,\u03c6){return[\u03bb>\u03c0?\u03bb-\u03c4:\u03bb<-\u03c0?\u03bb+\u03c4:\u03bb,\u03c6]}d3_geo_identityRotation.invert=d3_geo_equirectangular;function d3_geo_rotation(\u03b4\u03bb,\u03b4\u03c6,\u03b4\u03b3){return \u03b4\u03bb?\u03b4\u03c6||\u03b4\u03b3?d3_geo_compose(d3_geo_rotation\u03bb(\u03b4\u03bb),d3_geo_rotation\u03c6\u03b3(\u03b4\u03c6,\u03b4\u03b3)):d3_geo_rotation\u03bb(\u03b4\u03bb):\u03b4\u03c6||\u03b4\u03b3?d3_geo_rotation\u03c6\u03b3(\u03b4\u03c6,\u03b4\u03b3):d3_geo_identityRotation}function d3_geo_forwardRotation\u03bb(\u03b4\u03bb){return function(\u03bb,\u03c6){return \u03bb+=\u03b4\u03bb,[\u03bb>\u03c0?\u03bb-\u03c4:\u03bb<-\u03c0?\u03bb+\u03c4:\u03bb,\u03c6]}}function d3_geo_rotation\u03bb(\u03b4\u03bb){var rotation=d3_geo_forwardRotation\u03bb(\u03b4\u03bb);rotation.invert=d3_geo_forwardRotation\u03bb(-\u03b4\u03bb);return rotation}function d3_geo_rotation\u03c6\u03b3(\u03b4\u03c6,\u03b4\u03b3){var cos\u03b4\u03c6=Math.cos(\u03b4\u03c6),sin\u03b4\u03c6=Math.sin(\u03b4\u03c6),cos\u03b4\u03b3=Math.cos(\u03b4\u03b3),sin\u03b4\u03b3=Math.sin(\u03b4\u03b3);function rotation(\u03bb,\u03c6){var cos\u03c6=Math.cos(\u03c6),x=Math.cos(\u03bb)*cos\u03c6,y=Math.sin(\u03bb)*cos\u03c6,z=Math.sin(\u03c6),k=z*cos\u03b4\u03c6+x*sin\u03b4\u03c6;return[Math.atan2(y*cos\u03b4\u03b3-k*sin\u03b4\u03b3,x*cos\u03b4\u03c6-z*sin\u03b4\u03c6),d3_asin(k*cos\u03b4\u03b3+y*sin\u03b4\u03b3)]}rotation.invert=function(\u03bb,\u03c6){var cos\u03c6=Math.cos(\u03c6),x=Math.cos(\u03bb)*cos\u03c6,y=Math.sin(\u03bb)*cos\u03c6,z=Math.sin(\u03c6),k=z*cos\u03b4\u03b3-y*sin\u03b4\u03b3;return[Math.atan2(y*cos\u03b4\u03b3+z*sin\u03b4\u03b3,x*cos\u03b4\u03c6+k*sin\u03b4\u03c6),d3_asin(k*cos\u03b4\u03c6-x*sin\u03b4\u03c6)]};return rotation}d3.geo.circle=function(){var origin=[0,0],angle,precision=6,interpolate;function circle(){var center=typeof origin==="function"?origin.apply(this,arguments):origin,rotate=d3_geo_rotation(-center[0]*d3_radians,-center[1]*d3_radians,0).invert,ring=[];interpolate(null,null,1,{point:function(x,y){ring.push(x=rotate(x,y));x[0]*=d3_degrees,x[1]*=d3_degrees}});return{type:"Polygon",coordinates:[ring]}}circle.origin=function(x){if(!arguments.length)return origin;origin=x;return circle};circle.angle=function(x){if(!arguments.length)return angle;interpolate=d3_geo_circleInterpolate((angle=+x)*d3_radians,precision*d3_radians);return circle};circle.precision=function(_){if(!arguments.length)return precision;interpolate=d3_geo_circleInterpolate(angle*d3_radians,(precision=+_)*d3_radians);return circle};return circle.angle(90)};function d3_geo_circleInterpolate(radius,precision){var cr=Math.cos(radius),sr=Math.sin(radius);return function(from,to,direction,listener){var step=direction*precision;if(from!=null){from=d3_geo_circleAngle(cr,from);to=d3_geo_circleAngle(cr,to);if(direction>0?from<to:from>to)from+=direction*\u03c4}else{from=radius+direction*\u03c4;to=radius-.5*step}for(var point,t=from;direction>0?t>to:t<to;t-=step){listener.point((point=d3_geo_spherical([cr,-sr*Math.cos(t),-sr*Math.sin(t)]))[0],point[1])}}}function d3_geo_circleAngle(cr,point){var a=d3_geo_cartesian(point);a[0]-=cr;d3_geo_cartesianNormalize(a);var angle=d3_acos(-a[1]);return((-a[2]<0?-angle:angle)+2*Math.PI-\u03b5)%(2*Math.PI)}d3.geo.distance=function(a,b){var \u0394\u03bb=(b[0]-a[0])*d3_radians,\u03c60=a[1]*d3_radians,\u03c61=b[1]*d3_radians,sin\u0394\u03bb=Math.sin(\u0394\u03bb),cos\u0394\u03bb=Math.cos(\u0394\u03bb),sin\u03c60=Math.sin(\u03c60),cos\u03c60=Math.cos(\u03c60),sin\u03c61=Math.sin(\u03c61),cos\u03c61=Math.cos(\u03c61),t;return Math.atan2(Math.sqrt((t=cos\u03c61*sin\u0394\u03bb)*t+(t=cos\u03c60*sin\u03c61-sin\u03c60*cos\u03c61*cos\u0394\u03bb)*t),sin\u03c60*sin\u03c61+cos\u03c60*cos\u03c61*cos\u0394\u03bb)};d3.geo.graticule=function(){var x1,x0,X1,X0,y1,y0,Y1,Y0,dx=10,dy=dx,DX=90,DY=360,x,y,X,Y,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return d3.range(Math.ceil(X0/DX)*DX,X1,DX).map(X).concat(d3.range(Math.ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3.range(Math.ceil(x0/dx)*dx,x1,dx).filter(function(x){return abs(x%DX)>\u03b5}).map(x)).concat(d3.range(Math.ceil(y0/dy)*dy,y1,dy).filter(function(y){return abs(y%DY)>\u03b5}).map(y))}graticule.lines=function(){return lines().map(function(coordinates){return{type:"LineString",coordinates:coordinates}})};graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}};graticule.extent=function(_){if(!arguments.length)return graticule.minorExtent();return graticule.majorExtent(_).minorExtent(_)};graticule.majorExtent=function(_){if(!arguments.length)return[[X0,Y0],[X1,Y1]];X0=+_[0][0],X1=+_[1][0];Y0=+_[0][1],Y1=+_[1][1];if(X0>X1)_=X0,X0=X1,X1=_;if(Y0>Y1)_=Y0,Y0=Y1,Y1=_;return graticule.precision(precision)};graticule.minorExtent=function(_){if(!arguments.length)return[[x0,y0],[x1,y1]];x0=+_[0][0],x1=+_[1][0];y0=+_[0][1],y1=+_[1][1];if(x0>x1)_=x0,x0=x1,x1=_;if(y0>y1)_=y0,y0=y1,y1=_;return graticule.precision(precision)};graticule.step=function(_){if(!arguments.length)return graticule.minorStep();return graticule.majorStep(_).minorStep(_)};graticule.majorStep=function(_){if(!arguments.length)return[DX,DY];DX=+_[0],DY=+_[1];return graticule};graticule.minorStep=function(_){if(!arguments.length)return[dx,dy];dx=+_[0],dy=+_[1];return graticule};graticule.precision=function(_){if(!arguments.length)return precision;precision=+_;x=d3_geo_graticuleX(y0,y1,90);y=d3_geo_graticuleY(x0,x1,precision);X=d3_geo_graticuleX(Y0,Y1,90);Y=d3_geo_graticuleY(X0,X1,precision);return graticule};return graticule.majorExtent([[-180,-90+\u03b5],[180,90-\u03b5]]).minorExtent([[-180,-80-\u03b5],[180,80+\u03b5]])};function d3_geo_graticuleX(y0,y1,dy){var y=d3.range(y0,y1-\u03b5,dy).concat(y1);return function(x){return y.map(function(y){return[x,y]})}}function d3_geo_graticuleY(x0,x1,dx){var x=d3.range(x0,x1-\u03b5,dx).concat(x1);return function(y){return x.map(function(x){return[x,y]})}}function d3_source(d){return d.source}function d3_target(d){return d.target}d3.geo.greatArc=function(){var source=d3_source,source_,target=d3_target,target_;function greatArc(){return{type:"LineString",coordinates:[source_||source.apply(this,arguments),target_||target.apply(this,arguments)]}}greatArc.distance=function(){return d3.geo.distance(source_||source.apply(this,arguments),target_||target.apply(this,arguments))};greatArc.source=function(_){if(!arguments.length)return source;source=_,source_=typeof _==="function"?null:_;return greatArc};greatArc.target=function(_){if(!arguments.length)return target;target=_,target_=typeof _==="function"?null:_;return greatArc};greatArc.precision=function(){return arguments.length?greatArc:0};return greatArc};d3.geo.interpolate=function(source,target){return d3_geo_interpolate(source[0]*d3_radians,source[1]*d3_radians,target[0]*d3_radians,target[1]*d3_radians)};function d3_geo_interpolate(x0,y0,x1,y1){var cy0=Math.cos(y0),sy0=Math.sin(y0),cy1=Math.cos(y1),sy1=Math.sin(y1),kx0=cy0*Math.cos(x0),ky0=cy0*Math.sin(x0),kx1=cy1*Math.cos(x1),ky1=cy1*Math.sin(x1),d=2*Math.asin(Math.sqrt(d3_haversin(y1-y0)+cy0*cy1*d3_haversin(x1-x0))),k=1/Math.sin(d);var interpolate=d?function(t){var B=Math.sin(t*=d)*k,A=Math.sin(d-t)*k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[Math.atan2(y,x)*d3_degrees,Math.atan2(z,Math.sqrt(x*x+y*y))*d3_degrees]}:function(){return[x0*d3_degrees,y0*d3_degrees]};interpolate.distance=d;return interpolate}d3.geo.length=function(object){d3_geo_lengthSum=0;d3.geo.stream(object,d3_geo_length);return d3_geo_lengthSum};var d3_geo_lengthSum;var d3_geo_length={sphere:d3_noop,point:d3_noop,lineStart:d3_geo_lengthLineStart,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop};function d3_geo_lengthLineStart(){var \u03bb0,sin\u03c60,cos\u03c60;d3_geo_length.point=function(\u03bb,\u03c6){\u03bb0=\u03bb*d3_radians,sin\u03c60=Math.sin(\u03c6*=d3_radians),cos\u03c60=Math.cos(\u03c6);d3_geo_length.point=nextPoint};d3_geo_length.lineEnd=function(){d3_geo_length.point=d3_geo_length.lineEnd=d3_noop};function nextPoint(\u03bb,\u03c6){var sin\u03c6=Math.sin(\u03c6*=d3_radians),cos\u03c6=Math.cos(\u03c6),t=abs((\u03bb*=d3_radians)-\u03bb0),cos\u0394\u03bb=Math.cos(t);d3_geo_lengthSum+=Math.atan2(Math.sqrt((t=cos\u03c6*Math.sin(t))*t+(t=cos\u03c60*sin\u03c6-sin\u03c60*cos\u03c6*cos\u0394\u03bb)*t),sin\u03c60*sin\u03c6+cos\u03c60*cos\u03c6*cos\u0394\u03bb);\u03bb0=\u03bb,sin\u03c60=sin\u03c6,cos\u03c60=cos\u03c6}}function d3_geo_azimuthal(scale,angle){function azimuthal(\u03bb,\u03c6){var cos\u03bb=Math.cos(\u03bb),cos\u03c6=Math.cos(\u03c6),k=scale(cos\u03bb*cos\u03c6);return[k*cos\u03c6*Math.sin(\u03bb),k*Math.sin(\u03c6)]}azimuthal.invert=function(x,y){var \u03c1=Math.sqrt(x*x+y*y),c=angle(\u03c1),sinc=Math.sin(c),cosc=Math.cos(c);return[Math.atan2(x*sinc,\u03c1*cosc),Math.asin(\u03c1&&y*sinc/\u03c1)]};return azimuthal}var d3_geo_azimuthalEqualArea=d3_geo_azimuthal(function(cos\u03bbcos\u03c6){return Math.sqrt(2/(1+cos\u03bbcos\u03c6))},function(\u03c1){return 2*Math.asin(\u03c1/2)});(d3.geo.azimuthalEqualArea=function(){return d3_geo_projection(d3_geo_azimuthalEqualArea)}).raw=d3_geo_azimuthalEqualArea;var d3_geo_azimuthalEquidistant=d3_geo_azimuthal(function(cos\u03bbcos\u03c6){var c=Math.acos(cos\u03bbcos\u03c6);return c&&c/Math.sin(c)},d3_identity);(d3.geo.azimuthalEquidistant=function(){return d3_geo_projection(d3_geo_azimuthalEquidistant)}).raw=d3_geo_azimuthalEquidistant;function d3_geo_conicConformal(\u03c60,\u03c61){var cos\u03c60=Math.cos(\u03c60),t=function(\u03c6){return Math.tan(\u03c0/4+\u03c6/2)},n=\u03c60===\u03c61?Math.sin(\u03c60):Math.log(cos\u03c60/Math.cos(\u03c61))/Math.log(t(\u03c61)/t(\u03c60)),F=cos\u03c60*Math.pow(t(\u03c60),n)/n;if(!n)return d3_geo_mercator;function forward(\u03bb,\u03c6){if(F>0){if(\u03c6<-half\u03c0+\u03b5)\u03c6=-half\u03c0+\u03b5}else{if(\u03c6>half\u03c0-\u03b5)\u03c6=half\u03c0-\u03b5}var \u03c1=F/Math.pow(t(\u03c6),n);return[\u03c1*Math.sin(n*\u03bb),F-\u03c1*Math.cos(n*\u03bb)]}forward.invert=function(x,y){var \u03c10_y=F-y,\u03c1=d3_sgn(n)*Math.sqrt(x*x+\u03c10_y*\u03c10_y);return[Math.atan2(x,\u03c10_y)/n,2*Math.atan(Math.pow(F/\u03c1,1/n))-half\u03c0]};return forward}(d3.geo.conicConformal=function(){return d3_geo_conic(d3_geo_conicConformal)}).raw=d3_geo_conicConformal;function d3_geo_conicEquidistant(\u03c60,\u03c61){var cos\u03c60=Math.cos(\u03c60),n=\u03c60===\u03c61?Math.sin(\u03c60):(cos\u03c60-Math.cos(\u03c61))/(\u03c61-\u03c60),G=cos\u03c60/n+\u03c60;if(abs(n)<\u03b5)return d3_geo_equirectangular;function forward(\u03bb,\u03c6){var \u03c1=G-\u03c6;return[\u03c1*Math.sin(n*\u03bb),G-\u03c1*Math.cos(n*\u03bb)]}forward.invert=function(x,y){var \u03c10_y=G-y;return[Math.atan2(x,\u03c10_y)/n,G-d3_sgn(n)*Math.sqrt(x*x+\u03c10_y*\u03c10_y)]};return forward}(d3.geo.conicEquidistant=function(){return d3_geo_conic(d3_geo_conicEquidistant)}).raw=d3_geo_conicEquidistant;var d3_geo_gnomonic=d3_geo_azimuthal(function(cos\u03bbcos\u03c6){return 1/cos\u03bbcos\u03c6},Math.atan);(d3.geo.gnomonic=function(){return d3_geo_projection(d3_geo_gnomonic)}).raw=d3_geo_gnomonic;function d3_geo_mercator(\u03bb,\u03c6){return[\u03bb,Math.log(Math.tan(\u03c0/4+\u03c6/2))]}d3_geo_mercator.invert=function(x,y){return[x,2*Math.atan(Math.exp(y))-half\u03c0]};function d3_geo_mercatorProjection(project){var m=d3_geo_projection(project),scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,clipAuto;m.scale=function(){var v=scale.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v};m.translate=function(){var v=translate.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v};m.clipExtent=function(_){var v=clipExtent.apply(m,arguments);if(v===m){if(clipAuto=_==null){var k=\u03c0*scale(),t=translate();clipExtent([[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]])}}else if(clipAuto){v=null}return v};return m.clipExtent(null)}(d3.geo.mercator=function(){return d3_geo_mercatorProjection(d3_geo_mercator)}).raw=d3_geo_mercator;var d3_geo_orthographic=d3_geo_azimuthal(function(){return 1},Math.asin);(d3.geo.orthographic=function(){return d3_geo_projection(d3_geo_orthographic)}).raw=d3_geo_orthographic;var d3_geo_stereographic=d3_geo_azimuthal(function(cos\u03bbcos\u03c6){return 1/(1+cos\u03bbcos\u03c6)},function(\u03c1){return 2*Math.atan(\u03c1)});(d3.geo.stereographic=function(){return d3_geo_projection(d3_geo_stereographic)}).raw=d3_geo_stereographic;function d3_geo_transverseMercator(\u03bb,\u03c6){return[Math.log(Math.tan(\u03c0/4+\u03c6/2)),-\u03bb]}d3_geo_transverseMercator.invert=function(x,y){return[-y,2*Math.atan(Math.exp(x))-half\u03c0]};(d3.geo.transverseMercator=function(){var projection=d3_geo_mercatorProjection(d3_geo_transverseMercator),center=projection.center,rotate=projection.rotate;projection.center=function(_){return _?center([-_[1],_[0]]):(_=center(),[_[1],-_[0]])};projection.rotate=function(_){return _?rotate([_[0],_[1],_.length>2?_[2]+90:90]):(_=rotate(),[_[0],_[1],_[2]-90])};return rotate([0,0,90])}).raw=d3_geo_transverseMercator;d3.geom={};function d3_geom_pointX(d){return d[0]}function d3_geom_pointY(d){return d[1]}d3.geom.hull=function(vertices){var x=d3_geom_pointX,y=d3_geom_pointY;if(arguments.length)return hull(vertices);function hull(data){if(data.length<3)return[];var fx=d3_functor(x),fy=d3_functor(y),i,n=data.length,points=[],flippedPoints=[];for(i=0;i<n;i++){points.push([+fx.call(this,data[i],i),+fy.call(this,data[i],i),i])}points.sort(d3_geom_hullOrder);for(i=0;i<n;i++)flippedPoints.push([points[i][0],-points[i][1]]);var upper=d3_geom_hullUpper(points),lower=d3_geom_hullUpper(flippedPoints);var skipLeft=lower[0]===upper[0],skipRight=lower[lower.length-1]===upper[upper.length-1],polygon=[];for(i=upper.length-1;i>=0;--i)polygon.push(data[points[upper[i]][2]]);for(i=+skipLeft;i<lower.length-skipRight;++i)polygon.push(data[points[lower[i]][2]]);return polygon}hull.x=function(_){return arguments.length?(x=_,hull):x};hull.y=function(_){return arguments.length?(y=_,hull):y};return hull};function d3_geom_hullUpper(points){var n=points.length,hull=[0,1],hs=2;for(var i=2;i<n;i++){while(hs>1&&d3_cross2d(points[hull[hs-2]],points[hull[hs-1]],points[i])<=0)--hs;hull[hs++]=i}return hull.slice(0,hs)}function d3_geom_hullOrder(a,b){return a[0]-b[0]||a[1]-b[1]}d3.geom.polygon=function(coordinates){d3_subclass(coordinates,d3_geom_polygonPrototype);return coordinates};var d3_geom_polygonPrototype=d3.geom.polygon.prototype=[];d3_geom_polygonPrototype.area=function(){var i=-1,n=this.length,a,b=this[n-1],area=0;while(++i<n){a=b;b=this[i];area+=a[1]*b[0]-a[0]*b[1]}return area*.5};d3_geom_polygonPrototype.centroid=function(k){var i=-1,n=this.length,x=0,y=0,a,b=this[n-1],c;if(!arguments.length)k=-1/(6*this.area());while(++i<n){a=b;b=this[i];c=a[0]*b[1]-b[0]*a[1];x+=(a[0]+b[0])*c;y+=(a[1]+b[1])*c}return[x*k,y*k]};d3_geom_polygonPrototype.clip=function(subject){var input,closed=d3_geom_polygonClosed(subject),i=-1,n=this.length-d3_geom_polygonClosed(this),j,m,a=this[n-1],b,c,d;while(++i<n){input=subject.slice();subject.length=0;b=this[i];c=input[(m=input.length-closed)-1];j=-1;while(++j<m){d=input[j];if(d3_geom_polygonInside(d,a,b)){if(!d3_geom_polygonInside(c,a,b)){subject.push(d3_geom_polygonIntersect(c,d,a,b))}subject.push(d)}else if(d3_geom_polygonInside(c,a,b)){subject.push(d3_geom_polygonIntersect(c,d,a,b))}c=d}if(closed)subject.push(subject[0]);a=b}return subject};function d3_geom_polygonInside(p,a,b){return(b[0]-a[0])*(p[1]-a[1])<(b[1]-a[1])*(p[0]-a[0])}function d3_geom_polygonIntersect(c,d,a,b){var x1=c[0],x3=a[0],x21=d[0]-x1,x43=b[0]-x3,y1=c[1],y3=a[1],y21=d[1]-y1,y43=b[1]-y3,ua=(x43*(y1-y3)-y43*(x1-x3))/(y43*x21-x43*y21);return[x1+ua*x21,y1+ua*y21]}function d3_geom_polygonClosed(coordinates){var a=coordinates[0],b=coordinates[coordinates.length-1];return!(a[0]-b[0]||a[1]-b[1])}var d3_geom_voronoiEdges,d3_geom_voronoiCells,d3_geom_voronoiBeaches,d3_geom_voronoiBeachPool=[],d3_geom_voronoiFirstCircle,d3_geom_voronoiCircles,d3_geom_voronoiCirclePool=[];function d3_geom_voronoiBeach(){d3_geom_voronoiRedBlackNode(this);this.edge=this.site=this.circle=null}function d3_geom_voronoiCreateBeach(site){var beach=d3_geom_voronoiBeachPool.pop()||new d3_geom_voronoiBeach;beach.site=site;return beach}function d3_geom_voronoiDetachBeach(beach){d3_geom_voronoiDetachCircle(beach);d3_geom_voronoiBeaches.remove(beach);d3_geom_voronoiBeachPool.push(beach);d3_geom_voronoiRedBlackNode(beach)}function d3_geom_voronoiRemoveBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex={x:x,y:y},previous=beach.P,next=beach.N,disappearing=[beach];d3_geom_voronoiDetachBeach(beach);var lArc=previous;while(lArc.circle&&abs(x-lArc.circle.x)<\u03b5&&abs(y-lArc.circle.cy)<\u03b5){previous=lArc.P;disappearing.unshift(lArc);d3_geom_voronoiDetachBeach(lArc);lArc=previous}disappearing.unshift(lArc);d3_geom_voronoiDetachCircle(lArc);var rArc=next;while(rArc.circle&&abs(x-rArc.circle.x)<\u03b5&&abs(y-rArc.circle.cy)<\u03b5){next=rArc.N;disappearing.push(rArc);d3_geom_voronoiDetachBeach(rArc);rArc=next}disappearing.push(rArc);d3_geom_voronoiDetachCircle(rArc);var nArcs=disappearing.length,iArc;for(iArc=1;iArc<nArcs;++iArc){rArc=disappearing[iArc];lArc=disappearing[iArc-1];d3_geom_voronoiSetEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex)}lArc=disappearing[0];rArc=disappearing[nArcs-1];rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,rArc.site,null,vertex);d3_geom_voronoiAttachCircle(lArc);d3_geom_voronoiAttachCircle(rArc)}function d3_geom_voronoiAddBeach(site){var x=site.x,directrix=site.y,lArc,rArc,dxl,dxr,node=d3_geom_voronoiBeaches._;while(node){dxl=d3_geom_voronoiLeftBreakPoint(node,directrix)-x;if(dxl>\u03b5)node=node.L;else{dxr=x-d3_geom_voronoiRightBreakPoint(node,directrix);if(dxr>\u03b5){if(!node.R){lArc=node;break}node=node.R}else{if(dxl>-\u03b5){lArc=node.P;rArc=node}else if(dxr>-\u03b5){lArc=node;rArc=node.N}else{lArc=rArc=node}break}}}var newArc=d3_geom_voronoiCreateBeach(site);d3_geom_voronoiBeaches.insert(lArc,newArc);if(!lArc&&!rArc)return;if(lArc===rArc){d3_geom_voronoiDetachCircle(lArc);rArc=d3_geom_voronoiCreateBeach(lArc.site);d3_geom_voronoiBeaches.insert(newArc,rArc);newArc.edge=rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site);d3_geom_voronoiAttachCircle(lArc);d3_geom_voronoiAttachCircle(rArc);return}if(!rArc){newArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site);return}d3_geom_voronoiDetachCircle(lArc);d3_geom_voronoiDetachCircle(rArc);var lSite=lArc.site,ax=lSite.x,ay=lSite.y,bx=site.x-ax,by=site.y-ay,rSite=rArc.site,cx=rSite.x-ax,cy=rSite.y-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex={x:(cy*hb-by*hc)/d+ax,y:(bx*hc-cx*hb)/d+ay};d3_geom_voronoiSetEdgeEnd(rArc.edge,lSite,rSite,vertex);newArc.edge=d3_geom_voronoiCreateEdge(lSite,site,null,vertex);rArc.edge=d3_geom_voronoiCreateEdge(site,rSite,null,vertex);d3_geom_voronoiAttachCircle(lArc);d3_geom_voronoiAttachCircle(rArc)}function d3_geom_voronoiLeftBreakPoint(arc,directrix){var site=arc.site,rfocx=site.x,rfocy=site.y,pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-Infinity;site=lArc.site;var lfocx=site.x,lfocy=site.y,plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;if(aby2)return(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx;return(rfocx+lfocx)/2}function d3_geom_voronoiRightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return d3_geom_voronoiLeftBreakPoint(rArc,directrix);var site=arc.site;return site.y===directrix?site.x:Infinity}function d3_geom_voronoiCell(site){this.site=site;this.edges=[]}d3_geom_voronoiCell.prototype.prepare=function(){var halfEdges=this.edges,iHalfEdge=halfEdges.length,edge;while(iHalfEdge--){edge=halfEdges[iHalfEdge].edge;if(!edge.b||!edge.a)halfEdges.splice(iHalfEdge,1)}halfEdges.sort(d3_geom_voronoiHalfEdgeOrder);return halfEdges.length};function d3_geom_voronoiCloseCells(extent){var x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],x2,y2,x3,y3,cells=d3_geom_voronoiCells,iCell=cells.length,cell,iHalfEdge,halfEdges,nHalfEdges,start,end;while(iCell--){cell=cells[iCell];if(!cell||!cell.prepare())continue;halfEdges=cell.edges;nHalfEdges=halfEdges.length;iHalfEdge=0;while(iHalfEdge<nHalfEdges){end=halfEdges[iHalfEdge].end(),x3=end.x,y3=end.y;start=halfEdges[++iHalfEdge%nHalfEdges].start(),x2=start.x,y2=start.y;if(abs(x3-x2)>\u03b5||abs(y3-y2)>\u03b5){halfEdges.splice(iHalfEdge,0,new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(cell.site,end,abs(x3-x0)<\u03b5&&y1-y3>\u03b5?{x:x0,y:abs(x2-x0)<\u03b5?y2:y1}:abs(y3-y1)<\u03b5&&x1-x3>\u03b5?{x:abs(y2-y1)<\u03b5?x2:x1,y:y1}:abs(x3-x1)<\u03b5&&y3-y0>\u03b5?{x:x1,y:abs(x2-x1)<\u03b5?y2:y0}:abs(y3-y0)<\u03b5&&x3-x0>\u03b5?{x:abs(y2-y0)<\u03b5?x2:x0,y:y0}:null),cell.site,null));++nHalfEdges}}}}function d3_geom_voronoiHalfEdgeOrder(a,b){return b.angle-a.angle}function d3_geom_voronoiCircle(){d3_geom_voronoiRedBlackNode(this);this.x=this.y=this.arc=this.site=this.cy=null}function d3_geom_voronoiAttachCircle(arc){var lArc=arc.P,rArc=arc.N;if(!lArc||!rArc)return;var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite===rSite)return;var bx=cSite.x,by=cSite.y,ax=lSite.x-bx,ay=lSite.y-by,cx=rSite.x-bx,cy=rSite.y-by;var d=2*(ax*cy-ay*cx);if(d>=-\u03b52)return;var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,cy=y+by;var circle=d3_geom_voronoiCirclePool.pop()||new d3_geom_voronoiCircle;circle.arc=arc;circle.site=cSite;circle.x=x+bx;circle.y=cy+Math.sqrt(x*x+y*y);circle.cy=cy;arc.circle=circle;var before=null,node=d3_geom_voronoiCircles._;while(node){if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){if(node.L)node=node.L;else{before=node.P;break}}else{if(node.R)node=node.R;else{before=node;break}}}d3_geom_voronoiCircles.insert(before,circle);if(!before)d3_geom_voronoiFirstCircle=circle}function d3_geom_voronoiDetachCircle(arc){var circle=arc.circle;if(circle){if(!circle.P)d3_geom_voronoiFirstCircle=circle.N;d3_geom_voronoiCircles.remove(circle);d3_geom_voronoiCirclePool.push(circle);d3_geom_voronoiRedBlackNode(circle);arc.circle=null}}function d3_geom_voronoiClipEdges(extent){var edges=d3_geom_voronoiEdges,clip=d3_geom_clipLine(extent[0][0],extent[0][1],extent[1][0],extent[1][1]),i=edges.length,e;while(i--){e=edges[i];if(!d3_geom_voronoiConnectEdge(e,extent)||!clip(e)||abs(e.a.x-e.b.x)<\u03b5&&abs(e.a.y-e.b.y)<\u03b5){e.a=e.b=null;edges.splice(i,1)}}}function d3_geom_voronoiConnectEdge(edge,extent){var vb=edge.b;if(vb)return true;var va=edge.a,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],lSite=edge.l,rSite=edge.r,lx=lSite.x,ly=lSite.y,rx=rSite.x,ry=rSite.y,fx=(lx+rx)/2,fy=(ly+ry)/2,fm,fb;if(ry===ly){if(fx<x0||fx>=x1)return;if(lx>rx){if(!va)va={x:fx,y:y0};else if(va.y>=y1)return;vb={x:fx,y:y1}}else{if(!va)va={x:fx,y:y1};else if(va.y<y0)return;vb={x:fx,y:y0}}}else{fm=(lx-rx)/(ry-ly);fb=fy-fm*fx;if(fm<-1||fm>1){if(lx>rx){if(!va)va={x:(y0-fb)/fm,y:y0};else if(va.y>=y1)return;vb={x:(y1-fb)/fm,y:y1}}else{if(!va)va={x:(y1-fb)/fm,y:y1};else if(va.y<y0)return;vb={x:(y0-fb)/fm,y:y0}}}else{if(ly<ry){if(!va)va={x:x0,y:fm*x0+fb};else if(va.x>=x1)return;vb={x:x1,y:fm*x1+fb}}else{if(!va)va={x:x1,y:fm*x1+fb};else if(va.x<x0)return;vb={x:x0,y:fm*x0+fb}}}}edge.a=va;edge.b=vb;return true}function d3_geom_voronoiEdge(lSite,rSite){this.l=lSite;this.r=rSite;this.a=this.b=null}function d3_geom_voronoiCreateEdge(lSite,rSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,rSite);d3_geom_voronoiEdges.push(edge);if(va)d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,va);if(vb)d3_geom_voronoiSetEdgeEnd(edge,rSite,lSite,vb);d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,lSite,rSite));d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,rSite,lSite));return edge}function d3_geom_voronoiCreateBorderEdge(lSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,null);edge.a=va;edge.b=vb;d3_geom_voronoiEdges.push(edge);return edge}function d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,vertex){if(!edge.a&&!edge.b){edge.a=vertex;edge.l=lSite;edge.r=rSite}else if(edge.l===rSite){edge.b=vertex}else{edge.a=vertex}}function d3_geom_voronoiHalfEdge(edge,lSite,rSite){var va=edge.a,vb=edge.b;this.edge=edge;this.site=lSite;this.angle=rSite?Math.atan2(rSite.y-lSite.y,rSite.x-lSite.x):edge.l===lSite?Math.atan2(vb.x-va.x,va.y-vb.y):Math.atan2(va.x-vb.x,vb.y-va.y)}d3_geom_voronoiHalfEdge.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function d3_geom_voronoiRedBlackTree(){this._=null}function d3_geom_voronoiRedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}d3_geom_voronoiRedBlackTree.prototype={insert:function(after,node){var parent,grandpa,uncle;if(after){node.P=after;node.N=after.N;if(after.N)after.N.P=node;after.N=node;if(after.R){after=after.R;while(after.L)after=after.L;after.L=node}else{after.R=node}parent=after}else if(this._){after=d3_geom_voronoiRedBlackFirst(this._);node.P=null;node.N=after;after.P=after.L=node;parent=after}else{node.P=node.N=null;this._=node;parent=null}node.L=node.R=null;node.U=parent;node.C=true;after=node;while(parent&&parent.C){grandpa=parent.U;if(parent===grandpa.L){uncle=grandpa.R;if(uncle&&uncle.C){parent.C=uncle.C=false;grandpa.C=true;after=grandpa}else{if(after===parent.R){d3_geom_voronoiRedBlackRotateLeft(this,parent);after=parent;parent=after.U}parent.C=false;grandpa.C=true;d3_geom_voronoiRedBlackRotateRight(this,grandpa)}}else{uncle=grandpa.L;if(uncle&&uncle.C){parent.C=uncle.C=false;grandpa.C=true;after=grandpa}else{if(after===parent.L){d3_geom_voronoiRedBlackRotateRight(this,parent);after=parent;parent=after.U}parent.C=false;grandpa.C=true;d3_geom_voronoiRedBlackRotateLeft(this,grandpa)}}parent=after.U}this._.C=false},remove:function(node){if(node.N)node.N.P=node.P;if(node.P)node.P.N=node.N;node.N=node.P=null;var parent=node.U,sibling,left=node.L,right=node.R,next,red;if(!left)next=right;else if(!right)next=left;else next=d3_geom_voronoiRedBlackFirst(right);if(parent){if(parent.L===node)parent.L=next;else parent.R=next}else{this._=next}if(left&&right){red=next.C;next.C=node.C;next.L=left;left.U=next;if(next!==right){parent=next.U;next.U=node.U;node=next.R;parent.L=node;next.R=right;right.U=next}else{next.U=parent;parent=next;node=next.R}}else{red=node.C;node=next}if(node)node.U=parent;if(red)return;if(node&&node.C){node.C=false;return}do{if(node===this._)break;if(node===parent.L){sibling=parent.R;if(sibling.C){sibling.C=false;parent.C=true;d3_geom_voronoiRedBlackRotateLeft(this,parent);sibling=parent.R}if(sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){if(!sibling.R||!sibling.R.C){sibling.L.C=false;sibling.C=true;d3_geom_voronoiRedBlackRotateRight(this,sibling);sibling=parent.R}sibling.C=parent.C;parent.C=sibling.R.C=false;d3_geom_voronoiRedBlackRotateLeft(this,parent);node=this._;break}}else{sibling=parent.L;if(sibling.C){sibling.C=false;parent.C=true;d3_geom_voronoiRedBlackRotateRight(this,parent);sibling=parent.L}if(sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){if(!sibling.L||!sibling.L.C){sibling.R.C=false;sibling.C=true;d3_geom_voronoiRedBlackRotateLeft(this,sibling);sibling=parent.L}sibling.C=parent.C;parent.C=sibling.L.C=false;d3_geom_voronoiRedBlackRotateRight(this,parent);node=this._;break}}sibling.C=true;node=parent;parent=parent.U}while(!node.C);if(node)node.C=false}};function d3_geom_voronoiRedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;if(parent){if(parent.L===p)parent.L=q;else parent.R=q}else{tree._=q}q.U=parent;p.U=q;p.R=q.L;if(p.R)p.R.U=p;q.L=p}function d3_geom_voronoiRedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;if(parent){if(parent.L===p)parent.L=q;else parent.R=q}else{tree._=q}q.U=parent;p.U=q;p.L=q.R;if(p.L)p.L.U=p;q.R=p}function d3_geom_voronoiRedBlackFirst(node){while(node.L)node=node.L;return node}function d3_geom_voronoi(sites,bbox){var site=sites.sort(d3_geom_voronoiVertexOrder).pop(),x0,y0,circle;d3_geom_voronoiEdges=[];d3_geom_voronoiCells=new Array(sites.length);d3_geom_voronoiBeaches=new d3_geom_voronoiRedBlackTree;d3_geom_voronoiCircles=new d3_geom_voronoiRedBlackTree;while(true){circle=d3_geom_voronoiFirstCircle;if(site&&(!circle||site.y<circle.y||site.y===circle.y&&site.x<circle.x)){if(site.x!==x0||site.y!==y0){d3_geom_voronoiCells[site.i]=new d3_geom_voronoiCell(site);d3_geom_voronoiAddBeach(site);x0=site.x,y0=site.y}site=sites.pop()}else if(circle){d3_geom_voronoiRemoveBeach(circle.arc)}else{break}}if(bbox)d3_geom_voronoiClipEdges(bbox),d3_geom_voronoiCloseCells(bbox);var diagram={cells:d3_geom_voronoiCells,edges:d3_geom_voronoiEdges};d3_geom_voronoiBeaches=d3_geom_voronoiCircles=d3_geom_voronoiEdges=d3_geom_voronoiCells=null;return diagram}function d3_geom_voronoiVertexOrder(a,b){return b.y-a.y||b.x-a.x}d3.geom.voronoi=function(points){var x=d3_geom_pointX,y=d3_geom_pointY,fx=x,fy=y,clipExtent=d3_geom_voronoiClipExtent;if(points)return voronoi(points);function voronoi(data){var polygons=new Array(data.length),x0=clipExtent[0][0],y0=clipExtent[0][1],x1=clipExtent[1][0],y1=clipExtent[1][1];d3_geom_voronoi(sites(data),clipExtent).cells.forEach(function(cell,i){var edges=cell.edges,site=cell.site,polygon=polygons[i]=edges.length?edges.map(function(e){var s=e.start();return[s.x,s.y]}):site.x>=x0&&site.x<=x1&&site.y>=y0&&site.y<=y1?[[x0,y1],[x1,y1],[x1,y0],[x0,y0]]:[];polygon.point=data[i]});return polygons}function sites(data){return data.map(function(d,i){return{x:Math.round(fx(d,i)/\u03b5)*\u03b5,y:Math.round(fy(d,i)/\u03b5)*\u03b5,i:i}})}voronoi.links=function(data){return d3_geom_voronoi(sites(data)).edges.filter(function(edge){return edge.l&&edge.r}).map(function(edge){return{source:data[edge.l.i],target:data[edge.r.i]}})};voronoi.triangles=function(data){var triangles=[];d3_geom_voronoi(sites(data)).cells.forEach(function(cell,i){var site=cell.site,edges=cell.edges.sort(d3_geom_voronoiHalfEdgeOrder),j=-1,m=edges.length,e0,s0,e1=edges[m-1].edge,s1=e1.l===site?e1.r:e1.l;while(++j<m){e0=e1;s0=s1;e1=edges[j].edge;s1=e1.l===site?e1.r:e1.l;if(i<s0.i&&i<s1.i&&d3_geom_voronoiTriangleArea(site,s0,s1)<0){triangles.push([data[i],data[s0.i],data[s1.i]])}}});return triangles};voronoi.x=function(_){return arguments.length?(fx=d3_functor(x=_),voronoi):x};voronoi.y=function(_){return arguments.length?(fy=d3_functor(y=_),voronoi):y};voronoi.clipExtent=function(_){if(!arguments.length)return clipExtent===d3_geom_voronoiClipExtent?null:clipExtent;clipExtent=_==null?d3_geom_voronoiClipExtent:_;return voronoi};voronoi.size=function(_){if(!arguments.length)return clipExtent===d3_geom_voronoiClipExtent?null:clipExtent&&clipExtent[1];return voronoi.clipExtent(_&&[[0,0],_])};return voronoi};var d3_geom_voronoiClipExtent=[[-1e6,-1e6],[1e6,1e6]];function d3_geom_voronoiTriangleArea(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}d3.geom.delaunay=function(vertices){return d3.geom.voronoi().triangles(vertices)};d3.geom.quadtree=function(points,x1,y1,x2,y2){var x=d3_geom_pointX,y=d3_geom_pointY,compat;if(compat=arguments.length){x=d3_geom_quadtreeCompatX;y=d3_geom_quadtreeCompatY;if(compat===3){y2=y1;x2=x1;y1=x1=0}return quadtree(points)}function quadtree(data){var d,fx=d3_functor(x),fy=d3_functor(y),xs,ys,i,n,x1_,y1_,x2_,y2_;if(x1!=null){x1_=x1,y1_=y1,x2_=x2,y2_=y2}else{x2_=y2_=-(x1_=y1_=Infinity);xs=[],ys=[];n=data.length;if(compat)for(i=0;i<n;++i){d=data[i];if(d.x<x1_)x1_=d.x;if(d.y<y1_)y1_=d.y;if(d.x>x2_)x2_=d.x;if(d.y>y2_)y2_=d.y;xs.push(d.x);ys.push(d.y)}else for(i=0;i<n;++i){var x_=+fx(d=data[i],i),y_=+fy(d,i);if(x_<x1_)x1_=x_;if(y_<y1_)y1_=y_;if(x_>x2_)x2_=x_;if(y_>y2_)y2_=y_;xs.push(x_);ys.push(y_)}}var dx=x2_-x1_,dy=y2_-y1_;if(dx>dy)y2_=y1_+dx;else x2_=x1_+dy;function insert(n,d,x,y,x1,y1,x2,y2){if(isNaN(x)||isNaN(y))return;if(n.leaf){var nx=n.x,ny=n.y;if(nx!=null){if(abs(nx-x)+abs(ny-y)<.01){insertChild(n,d,x,y,x1,y1,x2,y2)}else{var nPoint=n.point;n.x=n.y=n.point=null;insertChild(n,nPoint,nx,ny,x1,y1,x2,y2);insertChild(n,d,x,y,x1,y1,x2,y2)}}else{n.x=x,n.y=y,n.point=d}}else{insertChild(n,d,x,y,x1,y1,x2,y2)}}function insertChild(n,d,x,y,x1,y1,x2,y2){var xm=(x1+x2)*.5,ym=(y1+y2)*.5,right=x>=xm,below=y>=ym,i=below<<1|right;n.leaf=false;n=n.nodes[i]||(n.nodes[i]=d3_geom_quadtreeNode());if(right)x1=xm;else x2=xm;if(below)y1=ym;else y2=ym;insert(n,d,x,y,x1,y1,x2,y2)}var root=d3_geom_quadtreeNode();root.add=function(d){insert(root,d,+fx(d,++i),+fy(d,i),x1_,y1_,x2_,y2_)};root.visit=function(f){d3_geom_quadtreeVisit(f,root,x1_,y1_,x2_,y2_)};root.find=function(point){return d3_geom_quadtreeFind(root,point[0],point[1],x1_,y1_,x2_,y2_)};i=-1;if(x1==null){while(++i<n){insert(root,data[i],xs[i],ys[i],x1_,y1_,x2_,y2_)}--i}else data.forEach(root.add);xs=ys=data=d=null;return root}quadtree.x=function(_){return arguments.length?(x=_,quadtree):x};quadtree.y=function(_){return arguments.length?(y=_,quadtree):y};quadtree.extent=function(_){if(!arguments.length)return x1==null?null:[[x1,y1],[x2,y2]];if(_==null)x1=y1=x2=y2=null;else x1=+_[0][0],y1=+_[0][1],x2=+_[1][0],y2=+_[1][1];return quadtree};quadtree.size=function(_){if(!arguments.length)return x1==null?null:[x2-x1,y2-y1];if(_==null)x1=y1=x2=y2=null;else x1=y1=0,x2=+_[0],y2=+_[1];return quadtree};return quadtree};function d3_geom_quadtreeCompatX(d){return d.x}function d3_geom_quadtreeCompatY(d){return d.y}function d3_geom_quadtreeNode(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function d3_geom_quadtreeVisit(f,node,x1,y1,x2,y2){if(!f(node,x1,y1,x2,y2)){var sx=(x1+x2)*.5,sy=(y1+y2)*.5,children=node.nodes;if(children[0])d3_geom_quadtreeVisit(f,children[0],x1,y1,sx,sy);if(children[1])d3_geom_quadtreeVisit(f,children[1],sx,y1,x2,sy);if(children[2])d3_geom_quadtreeVisit(f,children[2],x1,sy,sx,y2);if(children[3])d3_geom_quadtreeVisit(f,children[3],sx,sy,x2,y2)}}function d3_geom_quadtreeFind(root,x,y,x0,y0,x3,y3){var minDistance2=Infinity,closestPoint;(function find(node,x1,y1,x2,y2){if(x1>x3||y1>y3||x2<x0||y2<y0)return;if(point=node.point){var point,dx=x-node.x,dy=y-node.y,distance2=dx*dx+dy*dy;if(distance2<minDistance2){var distance=Math.sqrt(minDistance2=distance2);x0=x-distance,y0=y-distance;x3=x+distance,y3=y+distance;closestPoint=point}}var children=node.nodes,xm=(x1+x2)*.5,ym=(y1+y2)*.5,right=x>=xm,below=y>=ym;for(var i=below<<1|right,j=i+4;i<j;++i){if(node=children[i&3])switch(i&3){case 0:find(node,x1,y1,xm,ym);break;case 1:find(node,xm,y1,x2,ym);break;case 2:find(node,x1,ym,xm,y2);break;case 3:find(node,xm,ym,x2,y2);break}}})(root,x0,y0,x3,y3);return closestPoint}d3.interpolateRgb=d3_interpolateRgb;function d3_interpolateRgb(a,b){a=d3.rgb(a);b=d3.rgb(b);var ar=a.r,ag=a.g,ab=a.b,br=b.r-ar,bg=b.g-ag,bb=b.b-ab;return function(t){return"#"+d3_rgb_hex(Math.round(ar+br*t))+d3_rgb_hex(Math.round(ag+bg*t))+d3_rgb_hex(Math.round(ab+bb*t))}}d3.interpolateObject=d3_interpolateObject;function d3_interpolateObject(a,b){var i={},c={},k;for(k in a){if(k in b){i[k]=d3_interpolate(a[k],b[k])}else{c[k]=a[k]}}for(k in b){if(!(k in a)){c[k]=b[k]}}return function(t){for(k in i)c[k]=i[k](t);return c}}d3.interpolateNumber=d3_interpolateNumber;function d3_interpolateNumber(a,b){a=+a,b=+b;return function(t){return a*(1-t)+b*t}}d3.interpolateString=d3_interpolateString;function d3_interpolateString(a,b){var bi=d3_interpolate_numberA.lastIndex=d3_interpolate_numberB.lastIndex=0,am,bm,bs,i=-1,s=[],q=[];a=a+"",b=b+"";while((am=d3_interpolate_numberA.exec(a))&&(bm=d3_interpolate_numberB.exec(b))){if((bs=bm.index)>bi){bs=b.slice(bi,bs);if(s[i])s[i]+=bs;else s[++i]=bs}if((am=am[0])===(bm=bm[0])){if(s[i])s[i]+=bm;else s[++i]=bm}else{s[++i]=null;q.push({i:i,x:d3_interpolateNumber(am,bm)})}bi=d3_interpolate_numberB.lastIndex}if(bi<b.length){bs=b.slice(bi);if(s[i])s[i]+=bs;else s[++i]=bs}return s.length<2?q[0]?(b=q[0].x,function(t){return b(t)+""}):function(){return b}:(b=q.length,function(t){for(var i=0,o;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}var d3_interpolate_numberA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d3_interpolate_numberB=new RegExp(d3_interpolate_numberA.source,"g");d3.interpolate=d3_interpolate;function d3_interpolate(a,b){var i=d3.interpolators.length,f;while(--i>=0&&!(f=d3.interpolators[i](a,b)));return f}d3.interpolators=[function(a,b){var t=typeof b;return(t==="string"?d3_rgb_names.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?d3_interpolateRgb:d3_interpolateString:b instanceof d3_color?d3_interpolateRgb:Array.isArray(b)?d3_interpolateArray:t==="object"&&isNaN(b)?d3_interpolateObject:d3_interpolateNumber)(a,b)}];d3.interpolateArray=d3_interpolateArray;function d3_interpolateArray(a,b){var x=[],c=[],na=a.length,nb=b.length,n0=Math.min(a.length,b.length),i;for(i=0;i<n0;++i)x.push(d3_interpolate(a[i],b[i]));for(;i<na;++i)c[i]=a[i];for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<n0;++i)c[i]=x[i](t);return c}}var d3_ease_default=function(){return d3_identity};var d3_ease=d3.map({linear:d3_ease_default,poly:d3_ease_poly,quad:function(){return d3_ease_quad},cubic:function(){return d3_ease_cubic},sin:function(){return d3_ease_sin},exp:function(){return d3_ease_exp},circle:function(){return d3_ease_circle},elastic:d3_ease_elastic,back:d3_ease_back,bounce:function(){return d3_ease_bounce}});var d3_ease_mode=d3.map({in:d3_identity,out:d3_ease_reverse,"in-out":d3_ease_reflect,"out-in":function(f){return d3_ease_reflect(d3_ease_reverse(f))}});d3.ease=function(name){var i=name.indexOf("-"),t=i>=0?name.slice(0,i):name,m=i>=0?name.slice(i+1):"in";t=d3_ease.get(t)||d3_ease_default;m=d3_ease_mode.get(m)||d3_identity;return d3_ease_clamp(m(t.apply(null,d3_arraySlice.call(arguments,1))))};function d3_ease_clamp(f){return function(t){return t<=0?0:t>=1?1:f(t)}}function d3_ease_reverse(f){return function(t){return 1-f(1-t)}}function d3_ease_reflect(f){return function(t){return.5*(t<.5?f(2*t):2-f(2-2*t))}}function d3_ease_quad(t){return t*t}function d3_ease_cubic(t){return t*t*t}function d3_ease_cubicInOut(t){if(t<=0)return 0;if(t>=1)return 1;var t2=t*t,t3=t2*t;return 4*(t<.5?t3:3*(t-t2)+t3-.75)}function d3_ease_poly(e){return function(t){return Math.pow(t,e)}}function d3_ease_sin(t){return 1-Math.cos(t*half\u03c0)}function d3_ease_exp(t){return Math.pow(2,10*(t-1))}function d3_ease_circle(t){return 1-Math.sqrt(1-t*t)}function d3_ease_elastic(a,p){var s;if(arguments.length<2)p=.45;if(arguments.length)s=p/\u03c4*Math.asin(1/a);else a=1,s=p/4;return function(t){return 1+a*Math.pow(2,-10*t)*Math.sin((t-s)*\u03c4/p)}}function d3_ease_back(s){if(!s)s=1.70158;return function(t){return t*t*((s+1)*t-s)}}function d3_ease_bounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}d3.interpolateHcl=d3_interpolateHcl;function d3_interpolateHcl(a,b){a=d3.hcl(a);b=d3.hcl(b);var ah=a.h,ac=a.c,al=a.l,bh=b.h-ah,bc=b.c-ac,bl=b.l-al;if(isNaN(bc))bc=0,ac=isNaN(ac)?b.c:ac;if(isNaN(bh))bh=0,ah=isNaN(ah)?b.h:ah;else if(bh>180)bh-=360;else if(bh<-180)bh+=360;return function(t){return d3_hcl_lab(ah+bh*t,ac+bc*t,al+bl*t)+""}}d3.interpolateHsl=d3_interpolateHsl;function d3_interpolateHsl(a,b){a=d3.hsl(a);b=d3.hsl(b);var ah=a.h,as=a.s,al=a.l,bh=b.h-ah,bs=b.s-as,bl=b.l-al;if(isNaN(bs))bs=0,as=isNaN(as)?b.s:as;if(isNaN(bh))bh=0,ah=isNaN(ah)?b.h:ah;else if(bh>180)bh-=360;else if(bh<-180)bh+=360;return function(t){return d3_hsl_rgb(ah+bh*t,as+bs*t,al+bl*t)+""}}d3.interpolateLab=d3_interpolateLab;function d3_interpolateLab(a,b){a=d3.lab(a);b=d3.lab(b);var al=a.l,aa=a.a,ab=a.b,bl=b.l-al,ba=b.a-aa,bb=b.b-ab;return function(t){return d3_lab_rgb(al+bl*t,aa+ba*t,ab+bb*t)+""}}d3.interpolateRound=d3_interpolateRound;function d3_interpolateRound(a,b){b-=a;return function(t){return Math.round(a+b*t)}}d3.transform=function(string){var g=d3_document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(string){if(string!=null){g.setAttribute("transform",string);var t=g.transform.baseVal.consolidate()}return new d3_transform(t?t.matrix:d3_transformIdentity)})(string)};function d3_transform(m){var r0=[m.a,m.b],r1=[m.c,m.d],kx=d3_transformNormalize(r0),kz=d3_transformDot(r0,r1),ky=d3_transformNormalize(d3_transformCombine(r1,r0,-kz))||0;if(r0[0]*r1[1]<r1[0]*r0[1]){r0[0]*=-1;r0[1]*=-1;kx*=-1;kz*=-1}this.rotate=(kx?Math.atan2(r0[1],r0[0]):Math.atan2(-r1[0],r1[1]))*d3_degrees;this.translate=[m.e,m.f];this.scale=[kx,ky];this.skew=ky?Math.atan2(kz,ky)*d3_degrees:0}d3_transform.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function d3_transformDot(a,b){return a[0]*b[0]+a[1]*b[1]}function d3_transformNormalize(a){var k=Math.sqrt(d3_transformDot(a,a));if(k){a[0]/=k;a[1]/=k}return k}function d3_transformCombine(a,b,k){a[0]+=k*b[0];a[1]+=k*b[1];return a}var d3_transformIdentity={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolateTransform=d3_interpolateTransform;function d3_interpolateTransformPop(s){return s.length?s.pop()+",":""}function d3_interpolateTranslate(ta,tb,s,q){if(ta[0]!==tb[0]||ta[1]!==tb[1]){var i=s.push("translate(",null,",",null,")");q.push({i:i-4,x:d3_interpolateNumber(ta[0],tb[0])},{i:i-2,x:d3_interpolateNumber(ta[1],tb[1])})}else if(tb[0]||tb[1]){s.push("translate("+tb+")")}}function d3_interpolateRotate(ra,rb,s,q){if(ra!==rb){if(ra-rb>180)rb+=360;else if(rb-ra>180)ra+=360;q.push({i:s.push(d3_interpolateTransformPop(s)+"rotate(",null,")")-2,x:d3_interpolateNumber(ra,rb)})}else if(rb){s.push(d3_interpolateTransformPop(s)+"rotate("+rb+")")}}function d3_interpolateSkew(wa,wb,s,q){if(wa!==wb){q.push({i:s.push(d3_interpolateTransformPop(s)+"skewX(",null,")")-2,x:d3_interpolateNumber(wa,wb)})}else if(wb){s.push(d3_interpolateTransformPop(s)+"skewX("+wb+")")}}function d3_interpolateScale(ka,kb,s,q){if(ka[0]!==kb[0]||ka[1]!==kb[1]){var i=s.push(d3_interpolateTransformPop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:d3_interpolateNumber(ka[0],kb[0])},{i:i-2,x:d3_interpolateNumber(ka[1],kb[1])})}else if(kb[0]!==1||kb[1]!==1){s.push(d3_interpolateTransformPop(s)+"scale("+kb+")")}}function d3_interpolateTransform(a,b){var s=[],q=[];a=d3.transform(a),b=d3.transform(b);d3_interpolateTranslate(a.translate,b.translate,s,q);d3_interpolateRotate(a.rotate,b.rotate,s,q);d3_interpolateSkew(a.skew,b.skew,s,q);d3_interpolateScale(a.scale,b.scale,s,q);a=b=null;return function(t){var i=-1,n=q.length,o;while(++i<n)s[(o=q[i]).i]=o.x(t);return s.join("")}}function d3_uninterpolateNumber(a,b){b=(b-=a=+a)||1/b;return function(x){return(x-a)/b}}function d3_uninterpolateClamp(a,b){b=(b-=a=+a)||1/b;return function(x){return Math.max(0,Math.min(1,(x-a)/b))}}d3.layout={};d3.layout.bundle=function(){return function(links){var paths=[],i=-1,n=links.length;while(++i<n)paths.push(d3_layout_bundlePath(links[i]));return paths}};function d3_layout_bundlePath(link){var start=link.source,end=link.target,lca=d3_layout_bundleLeastCommonAncestor(start,end),points=[start];while(start!==lca){start=start.parent;points.push(start)}var k=points.length;while(end!==lca){points.splice(k,0,end);end=end.parent}return points}function d3_layout_bundleAncestors(node){var ancestors=[],parent=node.parent;while(parent!=null){ancestors.push(node);node=parent;parent=parent.parent}ancestors.push(node);return ancestors}function d3_layout_bundleLeastCommonAncestor(a,b){if(a===b)return a;var aNodes=d3_layout_bundleAncestors(a),bNodes=d3_layout_bundleAncestors(b),aNode=aNodes.pop(),bNode=bNodes.pop(),sharedNode=null;while(aNode===bNode){sharedNode=aNode;aNode=aNodes.pop();bNode=bNodes.pop()}return sharedNode}d3.layout.chord=function(){var chord={},chords,groups,matrix,n,padding=0,sortGroups,sortSubgroups,sortChords;function relayout(){var subgroups={},groupSums=[],groupIndex=d3.range(n),subgroupIndex=[],k,x,x0,i,j;chords=[];groups=[];k=0,i=-1;while(++i<n){x=0,j=-1;while(++j<n){x+=matrix[i][j]}groupSums.push(x);subgroupIndex.push(d3.range(n));k+=x}if(sortGroups){groupIndex.sort(function(a,b){return sortGroups(groupSums[a],groupSums[b])})}if(sortSubgroups){subgroupIndex.forEach(function(d,i){d.sort(function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b])})})}k=(\u03c4-padding*n)/k;x=0,i=-1;while(++i<n){x0=x,j=-1;while(++j<n){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=x+=v*k;subgroups[di+"-"+dj]={index:di,subindex:dj,startAngle:a0,endAngle:a1,value:v}}groups[di]={index:di,startAngle:x0,endAngle:x,value:groupSums[di]};x+=padding}i=-1;while(++i<n){j=i-1;while(++j<n){var source=subgroups[i+"-"+j],target=subgroups[j+"-"+i];if(source.value||target.value){chords.push(source.value<target.value?{source:target,target:source}:{source:source,target:target})}}}if(sortChords)resort()}function resort(){chords.sort(function(a,b){return sortChords((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}chord.matrix=function(x){if(!arguments.length)return matrix;n=(matrix=x)&&matrix.length;chords=groups=null;return chord};chord.padding=function(x){if(!arguments.length)return padding;padding=x;chords=groups=null;return chord};chord.sortGroups=function(x){if(!arguments.length)return sortGroups;sortGroups=x;chords=groups=null;return chord};chord.sortSubgroups=function(x){if(!arguments.length)return sortSubgroups;sortSubgroups=x;chords=null;return chord};chord.sortChords=function(x){if(!arguments.length)return sortChords;sortChords=x;if(chords)resort();return chord};chord.chords=function(){if(!chords)relayout();return chords};chord.groups=function(){if(!groups)relayout();return groups};return chord};d3.layout.force=function(){var force={},event=d3.dispatch("start","tick","end"),timer,size=[1,1],drag,alpha,friction=.9,linkDistance=d3_layout_forceLinkDistance,linkStrength=d3_layout_forceLinkStrength,charge=-30,chargeDistance2=d3_layout_forceChargeDistance2,gravity=.1,theta2=.64,nodes=[],links=[],distances,strengths,charges;function repulse(node){return function(quad,x1,_,x2){if(quad.point!==node){var dx=quad.cx-node.x,dy=quad.cy-node.y,dw=x2-x1,dn=dx*dx+dy*dy;if(dw*dw/theta2<dn){if(dn<chargeDistance2){var k=quad.charge/dn;node.px-=dx*k;node.py-=dy*k}return true}if(quad.point&&dn&&dn<chargeDistance2){var k=quad.pointCharge/dn;node.px-=dx*k;node.py-=dy*k}}return!quad.charge}}force.tick=function(){if((alpha*=.99)<.005){timer=null;event.end({type:"end",alpha:alpha=0});return true}var n=nodes.length,m=links.length,q,i,o,s,t,l,k,x,y;for(i=0;i<m;++i){o=links[i];s=o.source;t=o.target;x=t.x-s.x;y=t.y-s.y;if(l=x*x+y*y){l=alpha*strengths[i]*((l=Math.sqrt(l))-distances[i])/l;x*=l;y*=l;t.x-=x*(k=s.weight+t.weight?s.weight/(s.weight+t.weight):.5);t.y-=y*k;s.x+=x*(k=1-k);s.y+=y*k}}if(k=alpha*gravity){x=size[0]/2;y=size[1]/2;i=-1;if(k)while(++i<n){o=nodes[i];o.x+=(x-o.x)*k;o.y+=(y-o.y)*k}}if(charge){d3_layout_forceAccumulate(q=d3.geom.quadtree(nodes),alpha,charges);i=-1;while(++i<n){if(!(o=nodes[i]).fixed){q.visit(repulse(o))}}}i=-1;while(++i<n){o=nodes[i];if(o.fixed){o.x=o.px;o.y=o.py}else{o.x-=(o.px-(o.px=o.x))*friction;o.y-=(o.py-(o.py=o.y))*friction}}event.tick({type:"tick",alpha:alpha})};force.nodes=function(x){if(!arguments.length)return nodes;nodes=x;return force};force.links=function(x){if(!arguments.length)return links;links=x;return force};force.size=function(x){if(!arguments.length)return size;size=x;return force};force.linkDistance=function(x){if(!arguments.length)return linkDistance;linkDistance=typeof x==="function"?x:+x;return force};force.distance=force.linkDistance;force.linkStrength=function(x){if(!arguments.length)return linkStrength;linkStrength=typeof x==="function"?x:+x;return force};force.friction=function(x){if(!arguments.length)return friction;friction=+x;return force};force.charge=function(x){if(!arguments.length)return charge;charge=typeof x==="function"?x:+x;return force};force.chargeDistance=function(x){if(!arguments.length)return Math.sqrt(chargeDistance2);chargeDistance2=x*x;return force};force.gravity=function(x){if(!arguments.length)return gravity;gravity=+x;return force};force.theta=function(x){if(!arguments.length)return Math.sqrt(theta2);theta2=x*x;return force};force.alpha=function(x){if(!arguments.length)return alpha;x=+x;if(alpha){if(x>0){alpha=x}else{timer.c=null,timer.t=NaN,timer=null;event.end({type:"end",alpha:alpha=0})}}else if(x>0){event.start({type:"start",alpha:alpha=x});timer=d3_timer(force.tick)}return force};force.start=function(){var i,n=nodes.length,m=links.length,w=size[0],h=size[1],neighbors,o;for(i=0;i<n;++i){(o=nodes[i]).index=i;o.weight=0}for(i=0;i<m;++i){o=links[i];if(typeof o.source=="number")o.source=nodes[o.source];if(typeof o.target=="number")o.target=nodes[o.target];++o.source.weight;++o.target.weight}for(i=0;i<n;++i){o=nodes[i];if(isNaN(o.x))o.x=position("x",w);if(isNaN(o.y))o.y=position("y",h);if(isNaN(o.px))o.px=o.x;if(isNaN(o.py))o.py=o.y}distances=[];if(typeof linkDistance==="function")for(i=0;i<m;++i)distances[i]=+linkDistance.call(this,links[i],i);else for(i=0;i<m;++i)distances[i]=linkDistance;strengths=[];if(typeof linkStrength==="function")for(i=0;i<m;++i)strengths[i]=+linkStrength.call(this,links[i],i);else for(i=0;i<m;++i)strengths[i]=linkStrength;charges=[];if(typeof charge==="function")for(i=0;i<n;++i)charges[i]=+charge.call(this,nodes[i],i);else for(i=0;i<n;++i)charges[i]=charge;function position(dimension,size){if(!neighbors){neighbors=new Array(n);for(j=0;j<n;++j){neighbors[j]=[]}for(j=0;j<m;++j){var o=links[j];neighbors[o.source.index].push(o.target);neighbors[o.target.index].push(o.source)}}var candidates=neighbors[i],j=-1,l=candidates.length,x;while(++j<l)if(!isNaN(x=candidates[j][dimension]))return x;return Math.random()*size}return force.resume()};force.resume=function(){return force.alpha(.1)};force.stop=function(){return force.alpha(0)};force.drag=function(){if(!drag)drag=d3.behavior.drag().origin(d3_identity).on("dragstart.force",d3_layout_forceDragstart).on("drag.force",dragmove).on("dragend.force",d3_layout_forceDragend);if(!arguments.length)return drag;this.on("mouseover.force",d3_layout_forceMouseover).on("mouseout.force",d3_layout_forceMouseout).call(drag)};function dragmove(d){d.px=d3.event.x,d.py=d3.event.y;force.resume()}return d3.rebind(force,event,"on")};function d3_layout_forceDragstart(d){d.fixed|=2}function d3_layout_forceDragend(d){d.fixed&=~6}function d3_layout_forceMouseover(d){d.fixed|=4;d.px=d.x,d.py=d.y}function d3_layout_forceMouseout(d){d.fixed&=~4}function d3_layout_forceAccumulate(quad,alpha,charges){var cx=0,cy=0;quad.charge=0;if(!quad.leaf){var nodes=quad.nodes,n=nodes.length,i=-1,c;while(++i<n){c=nodes[i];if(c==null)continue;d3_layout_forceAccumulate(c,alpha,charges);quad.charge+=c.charge;cx+=c.charge*c.cx;cy+=c.charge*c.cy}}if(quad.point){if(!quad.leaf){quad.point.x+=Math.random()-.5;quad.point.y+=Math.random()-.5}var k=alpha*charges[quad.point.index];quad.charge+=quad.pointCharge=k;cx+=k*quad.point.x;cy+=k*quad.point.y}quad.cx=cx/quad.charge;quad.cy=cy/quad.charge}var d3_layout_forceLinkDistance=20,d3_layout_forceLinkStrength=1,d3_layout_forceChargeDistance2=Infinity;d3.layout.hierarchy=function(){var sort=d3_layout_hierarchySort,children=d3_layout_hierarchyChildren,value=d3_layout_hierarchyValue;function hierarchy(root){var stack=[root],nodes=[],node;root.depth=0;while((node=stack.pop())!=null){nodes.push(node);if((childs=children.call(hierarchy,node,node.depth))&&(n=childs.length)){var n,childs,child;while(--n>=0){stack.push(child=childs[n]);child.parent=node;child.depth=node.depth+1}if(value)node.value=0;node.children=childs}else{if(value)node.value=+value.call(hierarchy,node,node.depth)||0;delete node.children}}d3_layout_hierarchyVisitAfter(root,function(node){var childs,parent;if(sort&&(childs=node.children))childs.sort(sort);if(value&&(parent=node.parent))parent.value+=node.value});return nodes}hierarchy.sort=function(x){if(!arguments.length)return sort;sort=x;return hierarchy};hierarchy.children=function(x){if(!arguments.length)return children;children=x;return hierarchy};hierarchy.value=function(x){if(!arguments.length)return value;value=x;return hierarchy};hierarchy.revalue=function(root){if(value){d3_layout_hierarchyVisitBefore(root,function(node){if(node.children)node.value=0});d3_layout_hierarchyVisitAfter(root,function(node){var parent;if(!node.children)node.value=+value.call(hierarchy,node,node.depth)||0;if(parent=node.parent)parent.value+=node.value})}return root};return hierarchy};function d3_layout_hierarchyRebind(object,hierarchy){d3.rebind(object,hierarchy,"sort","children","value");object.nodes=object;object.links=d3_layout_hierarchyLinks;return object}function d3_layout_hierarchyVisitBefore(node,callback){var nodes=[node];while((node=nodes.pop())!=null){callback(node);if((children=node.children)&&(n=children.length)){var n,children;while(--n>=0)nodes.push(children[n])}}}function d3_layout_hierarchyVisitAfter(node,callback){var nodes=[node],nodes2=[];while((node=nodes.pop())!=null){nodes2.push(node);if((children=node.children)&&(n=children.length)){var i=-1,n,children;while(++i<n)nodes.push(children[i])}}while((node=nodes2.pop())!=null){callback(node)}}function d3_layout_hierarchyChildren(d){return d.children}function d3_layout_hierarchyValue(d){return d.value}function d3_layout_hierarchySort(a,b){return b.value-a.value}function d3_layout_hierarchyLinks(nodes){return d3.merge(nodes.map(function(parent){return(parent.children||[]).map(function(child){return{source:parent,target:child}})}))}d3.layout.partition=function(){var hierarchy=d3.layout.hierarchy(),size=[1,1];function position(node,x,dx,dy){var children=node.children;node.x=x;node.y=node.depth*dy;node.dx=dx;node.dy=dy;if(children&&(n=children.length)){var i=-1,n,c,d;dx=node.value?dx/node.value:0;while(++i<n){position(c=children[i],x,d=c.value*dx,dy);x+=d}}}function depth(node){var children=node.children,d=0;if(children&&(n=children.length)){var i=-1,n;while(++i<n)d=Math.max(d,depth(children[i]))}return 1+d}function partition(d,i){var nodes=hierarchy.call(this,d,i);position(nodes[0],0,size[0],size[1]/depth(nodes[0]));return nodes}partition.size=function(x){if(!arguments.length)return size;size=x;return partition};return d3_layout_hierarchyRebind(partition,hierarchy)};d3.layout.pie=function(){var value=Number,sort=d3_layout_pieSortByValue,startAngle=0,endAngle=\u03c4,padAngle=0;function pie(data){var n=data.length,values=data.map(function(d,i){return+value.call(pie,d,i)}),a=+(typeof startAngle==="function"?startAngle.apply(this,arguments):startAngle),da=(typeof endAngle==="function"?endAngle.apply(this,arguments):endAngle)-a,p=Math.min(Math.abs(da)/n,+(typeof padAngle==="function"?padAngle.apply(this,arguments):padAngle)),pa=p*(da<0?-1:1),sum=d3.sum(values),k=sum?(da-n*pa)/sum:0,index=d3.range(n),arcs=[],v;if(sort!=null)index.sort(sort===d3_layout_pieSortByValue?function(i,j){return values[j]-values[i]}:function(i,j){return sort(data[i],data[j])});index.forEach(function(i){arcs[i]={data:data[i],value:v=values[i],startAngle:a,endAngle:a+=v*k+pa,padAngle:p}});return arcs}pie.value=function(_){if(!arguments.length)return value;value=_;return pie};pie.sort=function(_){if(!arguments.length)return sort;sort=_;return pie};pie.startAngle=function(_){if(!arguments.length)return startAngle;startAngle=_;return pie};pie.endAngle=function(_){if(!arguments.length)return endAngle;endAngle=_;return pie};pie.padAngle=function(_){if(!arguments.length)return padAngle;padAngle=_;return pie};return pie};var d3_layout_pieSortByValue={};d3.layout.stack=function(){var values=d3_identity,order=d3_layout_stackOrderDefault,offset=d3_layout_stackOffsetZero,out=d3_layout_stackOut,x=d3_layout_stackX,y=d3_layout_stackY;function stack(data,index){if(!(n=data.length))return data;var series=data.map(function(d,i){return values.call(stack,d,i)});var points=series.map(function(d){return d.map(function(v,i){return[x.call(stack,v,i),y.call(stack,v,i)]})});var orders=order.call(stack,points,index);series=d3.permute(series,orders);points=d3.permute(points,orders);var offsets=offset.call(stack,points,index);var m=series[0].length,n,i,j,o;for(j=0;j<m;++j){out.call(stack,series[0][j],o=offsets[j],points[0][j][1]);for(i=1;i<n;++i){out.call(stack,series[i][j],o+=points[i-1][j][1],points[i][j][1])}}return data}stack.values=function(x){if(!arguments.length)return values;values=x;return stack};stack.order=function(x){if(!arguments.length)return order;order=typeof x==="function"?x:d3_layout_stackOrders.get(x)||d3_layout_stackOrderDefault;return stack};stack.offset=function(x){if(!arguments.length)return offset;offset=typeof x==="function"?x:d3_layout_stackOffsets.get(x)||d3_layout_stackOffsetZero;return stack};stack.x=function(z){if(!arguments.length)return x;x=z;return stack};stack.y=function(z){if(!arguments.length)return y;y=z;return stack};stack.out=function(z){if(!arguments.length)return out;out=z;return stack};return stack};function d3_layout_stackX(d){return d.x}function d3_layout_stackY(d){return d.y}function d3_layout_stackOut(d,y0,y){d.y0=y0;d.y=y}var d3_layout_stackOrders=d3.map({"inside-out":function(data){var n=data.length,i,j,max=data.map(d3_layout_stackMaxIndex),sums=data.map(d3_layout_stackReduceSum),index=d3.range(n).sort(function(a,b){return max[a]-max[b]}),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i){j=index[i];if(top<bottom){top+=sums[j];tops.push(j)}else{bottom+=sums[j];bottoms.push(j)}}return bottoms.reverse().concat(tops)},reverse:function(data){return d3.range(data.length).reverse()},default:d3_layout_stackOrderDefault});var d3_layout_stackOffsets=d3.map({silhouette:function(data){var n=data.length,m=data[0].length,sums=[],max=0,i,j,o,y0=[];for(j=0;j<m;++j){for(i=0,o=0;i<n;i++)o+=data[i][j][1];if(o>max)max=o;sums.push(o)}for(j=0;j<m;++j){y0[j]=(max-sums[j])/2}return y0},wiggle:function(data){var n=data.length,x=data[0],m=x.length,i,j,k,s1,s2,s3,dx,o,o0,y0=[];y0[0]=o=o0=0;for(j=1;j<m;++j){for(i=0,s1=0;i<n;++i)s1+=data[i][j][1];for(i=0,s2=0,dx=x[j][0]-x[j-1][0];i<n;++i){for(k=0,s3=(data[i][j][1]-data[i][j-1][1])/(2*dx);k<i;++k){s3+=(data[k][j][1]-data[k][j-1][1])/dx}s2+=s3*data[i][j][1]}y0[j]=o-=s1?s2/s1*dx:0;if(o<o0)o0=o}for(j=0;j<m;++j)y0[j]-=o0;return y0},expand:function(data){var n=data.length,m=data[0].length,k=1/n,i,j,o,y0=[];for(j=0;j<m;++j){for(i=0,o=0;i<n;i++)o+=data[i][j][1];if(o)for(i=0;i<n;i++)data[i][j][1]/=o;else for(i=0;i<n;i++)data[i][j][1]=k}for(j=0;j<m;++j)y0[j]=0;return y0},zero:d3_layout_stackOffsetZero});function d3_layout_stackOrderDefault(data){return d3.range(data.length)}function d3_layout_stackOffsetZero(data){var j=-1,m=data[0].length,y0=[];while(++j<m)y0[j]=0;return y0}function d3_layout_stackMaxIndex(array){var i=1,j=0,v=array[0][1],k,n=array.length;for(;i<n;++i){if((k=array[i][1])>v){j=i;v=k}}return j}function d3_layout_stackReduceSum(d){return d.reduce(d3_layout_stackSum,0)}function d3_layout_stackSum(p,d){return p+d[1]}d3.layout.histogram=function(){var frequency=true,valuer=Number,ranger=d3_layout_histogramRange,binner=d3_layout_histogramBinSturges;function histogram(data,i){var bins=[],values=data.map(valuer,this),range=ranger.call(this,values,i),thresholds=binner.call(this,range,values,i),bin,i=-1,n=values.length,m=thresholds.length-1,k=frequency?1:1/n,x;while(++i<m){bin=bins[i]=[];bin.dx=thresholds[i+1]-(bin.x=thresholds[i]);bin.y=0}if(m>0){i=-1;while(++i<n){x=values[i];if(x>=range[0]&&x<=range[1]){bin=bins[d3.bisect(thresholds,x,1,m)-1];bin.y+=k;bin.push(data[i])}}}return bins}histogram.value=function(x){if(!arguments.length)return valuer;valuer=x;return histogram};histogram.range=function(x){if(!arguments.length)return ranger;ranger=d3_functor(x);return histogram};histogram.bins=function(x){if(!arguments.length)return binner;binner=typeof x==="number"?function(range){return d3_layout_histogramBinFixed(range,x)}:d3_functor(x);return histogram};histogram.frequency=function(x){if(!arguments.length)return frequency;frequency=!!x;return histogram};return histogram};function d3_layout_histogramBinSturges(range,values){return d3_layout_histogramBinFixed(range,Math.ceil(Math.log(values.length)/Math.LN2+1))}function d3_layout_histogramBinFixed(range,n){var x=-1,b=+range[0],m=(range[1]-b)/n,f=[];while(++x<=n)f[x]=m*x+b;return f}function d3_layout_histogramRange(values){return[d3.min(values),d3.max(values)]}d3.layout.pack=function(){var hierarchy=d3.layout.hierarchy().sort(d3_layout_packSort),padding=0,size=[1,1],radius;function pack(d,i){var nodes=hierarchy.call(this,d,i),root=nodes[0],w=size[0],h=size[1],r=radius==null?Math.sqrt:typeof radius==="function"?radius:function(){return radius};root.x=root.y=0;d3_layout_hierarchyVisitAfter(root,function(d){d.r=+r(d.value)});d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings);if(padding){var dr=padding*(radius?1:Math.max(2*root.r/w,2*root.r/h))/2;d3_layout_hierarchyVisitAfter(root,function(d){d.r+=dr});d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings);d3_layout_hierarchyVisitAfter(root,function(d){d.r-=dr})}d3_layout_packTransform(root,w/2,h/2,radius?1:1/Math.max(2*root.r/w,2*root.r/h));return nodes}pack.size=function(_){if(!arguments.length)return size;size=_;return pack};pack.radius=function(_){if(!arguments.length)return radius;radius=_==null||typeof _==="function"?_:+_;return pack};pack.padding=function(_){if(!arguments.length)return padding;padding=+_;return pack};return d3_layout_hierarchyRebind(pack,hierarchy)};function d3_layout_packSort(a,b){return a.value-b.value}function d3_layout_packInsert(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function d3_layout_packSplice(a,b){a._pack_next=b;b._pack_prev=a}function d3_layout_packIntersects(a,b){var dx=b.x-a.x,dy=b.y-a.y,dr=a.r+b.r;return.999*dr*dr>dx*dx+dy*dy}function d3_layout_packSiblings(node){if(!(nodes=node.children)||!(n=nodes.length))return;var nodes,xMin=Infinity,xMax=-Infinity,yMin=Infinity,yMax=-Infinity,a,b,c,i,j,k,n;function bound(node){xMin=Math.min(node.x-node.r,xMin);xMax=Math.max(node.x+node.r,xMax);yMin=Math.min(node.y-node.r,yMin);yMax=Math.max(node.y+node.r,yMax)}nodes.forEach(d3_layout_packLink);a=nodes[0];a.x=-a.r;a.y=0;bound(a);if(n>1){b=nodes[1];b.x=b.r;b.y=0;bound(b);if(n>2){c=nodes[2];d3_layout_packPlace(a,b,c);bound(c);d3_layout_packInsert(a,c);a._pack_prev=c;d3_layout_packInsert(c,b);b=a._pack_next;for(i=3;i<n;i++){d3_layout_packPlace(a,b,c=nodes[i]);var isect=0,s1=1,s2=1;for(j=b._pack_next;j!==b;j=j._pack_next,s1++){if(d3_layout_packIntersects(j,c)){isect=1;break}}if(isect==1){for(k=a._pack_prev;k!==j._pack_prev;k=k._pack_prev,s2++){if(d3_layout_packIntersects(k,c)){break}}}if(isect){if(s1<s2||s1==s2&&b.r<a.r)d3_layout_packSplice(a,b=j);else d3_layout_packSplice(a=k,b);i--}else{d3_layout_packInsert(a,c);b=c;bound(c)}}}}var cx=(xMin+xMax)/2,cy=(yMin+yMax)/2,cr=0;for(i=0;i<n;i++){c=nodes[i];c.x-=cx;c.y-=cy;cr=Math.max(cr,c.r+Math.sqrt(c.x*c.x+c.y*c.y))}node.r=cr;nodes.forEach(d3_layout_packUnlink)}function d3_layout_packLink(node){node._pack_next=node._pack_prev=node}function d3_layout_packUnlink(node){delete node._pack_next;delete node._pack_prev}function d3_layout_packTransform(node,x,y,k){var children=node.children;node.x=x+=k*node.x;node.y=y+=k*node.y;node.r*=k;if(children){var i=-1,n=children.length;while(++i<n)d3_layout_packTransform(children[i],x,y,k)}}function d3_layout_packPlace(a,b,c){var db=a.r+c.r,dx=b.x-a.x,dy=b.y-a.y;if(db&&(dx||dy)){var da=b.r+c.r,dc=dx*dx+dy*dy;da*=da;db*=db;var x=.5+(db-da)/(2*dc),y=Math.sqrt(Math.max(0,2*da*(db+dc)-(db-=dc)*db-da*da))/(2*dc);c.x=a.x+x*dx+y*dy;c.y=a.y+x*dy-y*dx}else{c.x=a.x+db;c.y=a.y}}d3.layout.tree=function(){var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=null;function tree(d,i){var nodes=hierarchy.call(this,d,i),root0=nodes[0],root1=wrapTree(root0);d3_layout_hierarchyVisitAfter(root1,firstWalk),root1.parent.m=-root1.z;d3_layout_hierarchyVisitBefore(root1,secondWalk);if(nodeSize)d3_layout_hierarchyVisitBefore(root0,sizeNode);else{var left=root0,right=root0,bottom=root0;d3_layout_hierarchyVisitBefore(root0,function(node){if(node.x<left.x)left=node;if(node.x>right.x)right=node;if(node.depth>bottom.depth)bottom=node});var tx=separation(left,right)/2-left.x,kx=size[0]/(right.x+separation(right,left)/2+tx),ky=size[1]/(bottom.depth||1);d3_layout_hierarchyVisitBefore(root0,function(node){node.x=(node.x+tx)*kx;node.y=node.depth*ky})}return nodes}function wrapTree(root0){var root1={A:null,children:[root0]},queue=[root1],node1;while((node1=queue.pop())!=null){for(var children=node1.children,child,i=0,n=children.length;i<n;++i){queue.push((children[i]=child={_:children[i],parent:node1,children:(child=children[i].children)&&child.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=child)}}return root1.children[0]}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children.length){d3_layout_treeShift(v);var midpoint=(children[0].z+children[children.length-1].z)/2;if(w){v.z=w.z+separation(v._,w._);v.m=v.z-midpoint}else{v.z=midpoint}}else if(w){v.z=w.z+separation(v._,w._)}v.parent.A=apportion(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m;v.m+=v.parent.m}function apportion(v,w,ancestor){if(w){var vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m,shift;while(vim=d3_layout_treeRight(vim),vip=d3_layout_treeLeft(vip),vim&&vip){vom=d3_layout_treeLeft(vom);vop=d3_layout_treeRight(vop);vop.a=v;shift=vim.z+sim-vip.z-sip+separation(vim._,vip._);if(shift>0){d3_layout_treeMove(d3_layout_treeAncestor(vim,v,ancestor),v,shift);sip+=shift;sop+=shift}sim+=vim.m;sip+=vip.m;som+=vom.m;sop+=vop.m}if(vim&&!d3_layout_treeRight(vop)){vop.t=vim;vop.m+=sim-sop}if(vip&&!d3_layout_treeLeft(vom)){vom.t=vip;vom.m+=sip-som;ancestor=v}}return ancestor}function sizeNode(node){node.x*=size[0];node.y=node.depth*size[1]}tree.separation=function(x){if(!arguments.length)return separation;separation=x;return tree};tree.size=function(x){if(!arguments.length)return nodeSize?null:size;nodeSize=(size=x)==null?sizeNode:null;return tree};tree.nodeSize=function(x){if(!arguments.length)return nodeSize?size:null;nodeSize=(size=x)==null?null:sizeNode;return tree};return d3_layout_hierarchyRebind(tree,hierarchy)};function d3_layout_treeSeparation(a,b){return a.parent==b.parent?1:2}function d3_layout_treeLeft(v){var children=v.children;return children.length?children[0]:v.t}function d3_layout_treeRight(v){var children=v.children,n;return(n=children.length)?children[n-1]:v.t}function d3_layout_treeMove(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change;wp.s+=shift;wm.c+=change;wp.z+=shift;wp.m+=shift}function d3_layout_treeShift(v){var shift=0,change=0,children=v.children,i=children.length,w;while(--i>=0){w=children[i];w.z+=shift;w.m+=shift;shift+=w.s+(change+=w.c)}}function d3_layout_treeAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}d3.layout.cluster=function(){var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=false;function cluster(d,i){var nodes=hierarchy.call(this,d,i),root=nodes[0],previousNode,x=0;d3_layout_hierarchyVisitAfter(root,function(node){var children=node.children;if(children&&children.length){node.x=d3_layout_clusterX(children);node.y=d3_layout_clusterY(children)}else{node.x=previousNode?x+=separation(node,previousNode):0;node.y=0;previousNode=node}});var left=d3_layout_clusterLeft(root),right=d3_layout_clusterRight(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;d3_layout_hierarchyVisitAfter(root,nodeSize?function(node){node.x=(node.x-root.x)*size[0];node.y=(root.y-node.y)*size[1]}:function(node){node.x=(node.x-x0)/(x1-x0)*size[0];node.y=(1-(root.y?node.y/root.y:1))*size[1]});return nodes}cluster.separation=function(x){if(!arguments.length)return separation;separation=x;return cluster};cluster.size=function(x){if(!arguments.length)return nodeSize?null:size;nodeSize=(size=x)==null;return cluster};cluster.nodeSize=function(x){if(!arguments.length)return nodeSize?size:null;nodeSize=(size=x)!=null;return cluster};return d3_layout_hierarchyRebind(cluster,hierarchy)};function d3_layout_clusterY(children){return 1+d3.max(children,function(child){return child.y})}function d3_layout_clusterX(children){return children.reduce(function(x,child){return x+child.x},0)/children.length}function d3_layout_clusterLeft(node){var children=node.children;return children&&children.length?d3_layout_clusterLeft(children[0]):node}function d3_layout_clusterRight(node){var children=node.children,n;return children&&(n=children.length)?d3_layout_clusterRight(children[n-1]):node}d3.layout.treemap=function(){var hierarchy=d3.layout.hierarchy(),round=Math.round,size=[1,1],padding=null,pad=d3_layout_treemapPadNull,sticky=false,stickies,mode="squarify",ratio=.5*(1+Math.sqrt(5));function scale(children,k){var i=-1,n=children.length,child,area;while(++i<n){area=(child=children[i]).value*(k<0?0:k);child.area=isNaN(area)||area<=0?0:area}}function squarify(node){var children=node.children;if(children&&children.length){var rect=pad(node),row=[],remaining=children.slice(),child,best=Infinity,score,u=mode==="slice"?rect.dx:mode==="dice"?rect.dy:mode==="slice-dice"?node.depth&1?rect.dy:rect.dx:Math.min(rect.dx,rect.dy),n;scale(remaining,rect.dx*rect.dy/node.value);row.area=0;while((n=remaining.length)>0){row.push(child=remaining[n-1]);row.area+=child.area;if(mode!=="squarify"||(score=worst(row,u))<=best){remaining.pop();best=score}else{row.area-=row.pop().area;position(row,u,rect,false);u=Math.min(rect.dx,rect.dy);row.length=row.area=0;best=Infinity}}if(row.length){position(row,u,rect,true);row.length=row.area=0}children.forEach(squarify)}}function stickify(node){var children=node.children;if(children&&children.length){var rect=pad(node),remaining=children.slice(),child,row=[];scale(remaining,rect.dx*rect.dy/node.value);row.area=0;while(child=remaining.pop()){row.push(child);row.area+=child.area;if(child.z!=null){position(row,child.z?rect.dx:rect.dy,rect,!remaining.length);row.length=row.area=0}}children.forEach(stickify)}}function worst(row,u){var s=row.area,r,rmax=0,rmin=Infinity,i=-1,n=row.length;while(++i<n){if(!(r=row[i].area))continue;if(r<rmin)rmin=r;if(r>rmax)rmax=r}s*=s;u*=u;return s?Math.max(u*rmax*ratio/s,s/(u*rmin*ratio)):Infinity}function position(row,u,rect,flush){var i=-1,n=row.length,x=rect.x,y=rect.y,v=u?round(row.area/u):0,o;if(u==rect.dx){if(flush||v>rect.dy)v=rect.dy;while(++i<n){o=row[i];o.x=x;o.y=y;o.dy=v;x+=o.dx=Math.min(rect.x+rect.dx-x,v?round(o.area/v):0)}o.z=true;o.dx+=rect.x+rect.dx-x;rect.y+=v;rect.dy-=v}else{if(flush||v>rect.dx)v=rect.dx;while(++i<n){o=row[i];o.x=x;o.y=y;o.dx=v;y+=o.dy=Math.min(rect.y+rect.dy-y,v?round(o.area/v):0)}o.z=false;o.dy+=rect.y+rect.dy-y;rect.x+=v;rect.dx-=v}}function treemap(d){var nodes=stickies||hierarchy(d),root=nodes[0];root.x=root.y=0;if(root.value)root.dx=size[0],root.dy=size[1];else root.dx=root.dy=0;if(stickies)hierarchy.revalue(root);scale([root],root.dx*root.dy/root.value);(stickies?stickify:squarify)(root);if(sticky)stickies=nodes;return nodes}treemap.size=function(x){if(!arguments.length)return size;size=x;return treemap};treemap.padding=function(x){if(!arguments.length)return padding;function padFunction(node){var p=x.call(treemap,node,node.depth);return p==null?d3_layout_treemapPadNull(node):d3_layout_treemapPad(node,typeof p==="number"?[p,p,p,p]:p)}function padConstant(node){return d3_layout_treemapPad(node,x)}var type;pad=(padding=x)==null?d3_layout_treemapPadNull:(type=typeof x)==="function"?padFunction:type==="number"?(x=[x,x,x,x],padConstant):padConstant;return treemap};treemap.round=function(x){if(!arguments.length)return round!=Number;round=x?Math.round:Number;return treemap};treemap.sticky=function(x){if(!arguments.length)return sticky;sticky=x;stickies=null;return treemap};treemap.ratio=function(x){if(!arguments.length)return ratio;ratio=x;return treemap};treemap.mode=function(x){if(!arguments.length)return mode;mode=x+"";return treemap};return d3_layout_hierarchyRebind(treemap,hierarchy)};function d3_layout_treemapPadNull(node){return{x:node.x,y:node.y,dx:node.dx,dy:node.dy}}function d3_layout_treemapPad(node,padding){var x=node.x+padding[3],y=node.y+padding[0],dx=node.dx-padding[1]-padding[3],dy=node.dy-padding[0]-padding[2];if(dx<0){x+=dx/2;dx=0}if(dy<0){y+=dy/2;dy=0}return{x:x,y:y,dx:dx,dy:dy}}d3.random={normal:function(\u00b5,\u03c3){var n=arguments.length;if(n<2)\u03c3=1;if(n<1)\u00b5=0;return function(){var x,y,r;do{x=Math.random()*2-1;y=Math.random()*2-1;r=x*x+y*y}while(!r||r>1);return \u00b5+\u03c3*x*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var random=d3.random.normal.apply(d3,arguments);return function(){return Math.exp(random())}},bates:function(m){var random=d3.random.irwinHall(m);return function(){return random()/m}},irwinHall:function(m){return function(){for(var s=0,j=0;j<m;j++)s+=Math.random();return s}}};d3.scale={};function d3_scaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start]}function d3_scaleRange(scale){return scale.rangeExtent?scale.rangeExtent():d3_scaleExtent(scale.range())}function d3_scale_bilinear(domain,range,uninterpolate,interpolate){var u=uninterpolate(domain[0],domain[1]),i=interpolate(range[0],range[1]);return function(x){return i(u(x))}}function d3_scale_nice(domain,nice){var i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1],dx;if(x1<x0){dx=i0,i0=i1,i1=dx;dx=x0,x0=x1,x1=dx}domain[i0]=nice.floor(x0);domain[i1]=nice.ceil(x1);return domain}function d3_scale_niceStep(step){return step?{floor:function(x){return Math.floor(x/step)*step},ceil:function(x){return Math.ceil(x/step)*step}}:d3_scale_niceIdentity}var d3_scale_niceIdentity={floor:d3_identity,ceil:d3_identity};function d3_scale_polylinear(domain,range,uninterpolate,interpolate){var u=[],i=[],j=0,k=Math.min(domain.length,range.length)-1;if(domain[k]<domain[0]){domain=domain.slice().reverse();range=range.slice().reverse()}while(++j<=k){u.push(uninterpolate(domain[j-1],domain[j]));i.push(interpolate(range[j-1],range[j]))}return function(x){var j=d3.bisect(domain,x,1,k)-1;return i[j](u[j](x))}}d3.scale.linear=function(){return d3_scale_linear([0,1],[0,1],d3_interpolate,false)};function d3_scale_linear(domain,range,interpolate,clamp){var output,input;function rescale(){var linear=Math.min(domain.length,range.length)>2?d3_scale_polylinear:d3_scale_bilinear,uninterpolate=clamp?d3_uninterpolateClamp:d3_uninterpolateNumber;output=linear(domain,range,uninterpolate,interpolate);input=linear(range,domain,uninterpolate,d3_interpolate);return scale}function scale(x){return output(x)}scale.invert=function(y){return input(y)};scale.domain=function(x){if(!arguments.length)return domain;domain=x.map(Number);return rescale()};scale.range=function(x){if(!arguments.length)return range;range=x;return rescale()};scale.rangeRound=function(x){return scale.range(x).interpolate(d3_interpolateRound)};scale.clamp=function(x){if(!arguments.length)return clamp;clamp=x;return rescale()};scale.interpolate=function(x){if(!arguments.length)return interpolate;interpolate=x;return rescale()};scale.ticks=function(m){return d3_scale_linearTicks(domain,m)};scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)};scale.nice=function(m){d3_scale_linearNice(domain,m);return rescale()};scale.copy=function(){return d3_scale_linear(domain,range,interpolate,clamp)};return rescale()}function d3_scale_linearRebind(scale,linear){return d3.rebind(scale,linear,"range","rangeRound","interpolate","clamp")}function d3_scale_linearNice(domain,m){d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2]));d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2]));return domain}function d3_scale_linearTickRange(domain,m){if(m==null)m=10;var extent=d3_scaleExtent(domain),span=extent[1]-extent[0],step=Math.pow(10,Math.floor(Math.log(span/m)/Math.LN10)),err=m/span*step;if(err<=.15)step*=10;else if(err<=.35)step*=5;else if(err<=.75)step*=2;extent[0]=Math.ceil(extent[0]/step)*step;extent[1]=Math.floor(extent[1]/step)*step+step*.5;extent[2]=step;return extent}function d3_scale_linearTicks(domain,m){return d3.range.apply(d3,d3_scale_linearTickRange(domain,m))}function d3_scale_linearTickFormat(domain,m,format){var range=d3_scale_linearTickRange(domain,m);if(format){var match=d3_format_re.exec(format);match.shift();if(match[8]==="s"){var prefix=d3.formatPrefix(Math.max(abs(range[0]),abs(range[1])));if(!match[7])match[7]="."+d3_scale_linearPrecision(prefix.scale(range[2]));match[8]="f";format=d3.format(match.join(""));return function(d){return format(prefix.scale(d))+prefix.symbol}}if(!match[7])match[7]="."+d3_scale_linearFormatPrecision(match[8],range);format=match.join("")}else{format=",."+d3_scale_linearPrecision(range[2])+"f"}return d3.format(format)}var d3_scale_linearFormatSignificant={s:1,g:1,p:1,r:1,e:1};function d3_scale_linearPrecision(value){return-Math.floor(Math.log(value)/Math.LN10+.01)}function d3_scale_linearFormatPrecision(type,range){var p=d3_scale_linearPrecision(range[2]);return type in d3_scale_linearFormatSignificant?Math.abs(p-d3_scale_linearPrecision(Math.max(abs(range[0]),abs(range[1]))))+ +(type!=="e"):p-(type==="%")*2}d3.scale.log=function(){return d3_scale_log(d3.scale.linear().domain([0,1]),10,true,[1,10])};function d3_scale_log(linear,base,positive,domain){function log(x){return(positive?Math.log(x<0?0:x):-Math.log(x>0?0:-x))/Math.log(base)}function pow(x){return positive?Math.pow(base,x):-Math.pow(base,-x)}function scale(x){return linear(log(x))}scale.invert=function(x){return pow(linear.invert(x))};scale.domain=function(x){if(!arguments.length)return domain;positive=x[0]>=0;linear.domain((domain=x.map(Number)).map(log));return scale};scale.base=function(_){if(!arguments.length)return base;base=+_;linear.domain(domain.map(log));return scale};scale.nice=function(){var niced=d3_scale_nice(domain.map(log),positive?Math:d3_scale_logNiceNegative);linear.domain(niced);domain=niced.map(pow);return scale};scale.ticks=function(){var extent=d3_scaleExtent(domain),ticks=[],u=extent[0],v=extent[1],i=Math.floor(log(u)),j=Math.ceil(log(v)),n=base%1?2:base;if(isFinite(j-i)){if(positive){for(;i<j;i++)for(var k=1;k<n;k++)ticks.push(pow(i)*k);ticks.push(pow(i))}else{ticks.push(pow(i));for(;i++<j;)for(var k=n-1;k>0;k--)ticks.push(pow(i)*k)}for(i=0;ticks[i]<u;i++){}for(j=ticks.length;ticks[j-1]>v;j--){}ticks=ticks.slice(i,j)}return ticks};scale.tickFormat=function(n,format){if(!arguments.length)return d3_scale_logFormat;if(arguments.length<2)format=d3_scale_logFormat;else if(typeof format!=="function")format=d3.format(format);var k=Math.max(1,base*n/scale.ticks().length);return function(d){var i=d/pow(Math.round(log(d)));if(i*base<base-.5)i*=base;return i<=k?format(d):""}};scale.copy=function(){return d3_scale_log(linear.copy(),base,positive,domain)};return d3_scale_linearRebind(scale,linear)}var d3_scale_logFormat=d3.format(".0e"),d3_scale_logNiceNegative={floor:function(x){return-Math.ceil(-x)},ceil:function(x){return-Math.floor(-x)}};d3.scale.pow=function(){return d3_scale_pow(d3.scale.linear(),1,[0,1])};function d3_scale_pow(linear,exponent,domain){var powp=d3_scale_powPow(exponent),powb=d3_scale_powPow(1/exponent);function scale(x){return linear(powp(x))}scale.invert=function(x){return powb(linear.invert(x))};scale.domain=function(x){if(!arguments.length)return domain;linear.domain((domain=x.map(Number)).map(powp));return scale};scale.ticks=function(m){return d3_scale_linearTicks(domain,m)};scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)};scale.nice=function(m){return scale.domain(d3_scale_linearNice(domain,m))};scale.exponent=function(x){if(!arguments.length)return exponent;powp=d3_scale_powPow(exponent=x);powb=d3_scale_powPow(1/exponent);linear.domain(domain.map(powp));return scale};scale.copy=function(){return d3_scale_pow(linear.copy(),exponent,domain)};return d3_scale_linearRebind(scale,linear)}function d3_scale_powPow(e){return function(x){return x<0?-Math.pow(-x,e):Math.pow(x,e)}}d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)};d3.scale.ordinal=function(){return d3_scale_ordinal([],{t:"range",a:[[]]})};function d3_scale_ordinal(domain,ranger){var index,range,rangeBand;function scale(x){return range[((index.get(x)||(ranger.t==="range"?index.set(x,domain.push(x)):NaN))-1)%range.length]}function steps(start,step){return d3.range(domain.length).map(function(i){return start+step*i})}scale.domain=function(x){if(!arguments.length)return domain;domain=[];index=new d3_Map;var i=-1,n=x.length,xi;while(++i<n)if(!index.has(xi=x[i]))index.set(xi,domain.push(xi));return scale[ranger.t].apply(scale,ranger.a)};scale.range=function(x){if(!arguments.length)return range;range=x;rangeBand=0;ranger={t:"range",a:arguments};return scale};scale.rangePoints=function(x,padding){if(arguments.length<2)padding=0;var start=x[0],stop=x[1],step=domain.length<2?(start=(start+stop)/2,0):(stop-start)/(domain.length-1+padding);range=steps(start+step*padding/2,step);rangeBand=0;ranger={t:"rangePoints",a:arguments};return scale};scale.rangeRoundPoints=function(x,padding){if(arguments.length<2)padding=0;var start=x[0],stop=x[1],step=domain.length<2?(start=stop=Math.round((start+stop)/2),0):(stop-start)/(domain.length-1+padding)|0;range=steps(start+Math.round(step*padding/2+(stop-start-(domain.length-1+padding)*step)/2),step);rangeBand=0;ranger={t:"rangeRoundPoints",a:arguments};return scale};scale.rangeBands=function(x,padding,outerPadding){if(arguments.length<2)padding=0;if(arguments.length<3)outerPadding=padding;var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=(stop-start)/(domain.length-padding+2*outerPadding);range=steps(start+step*outerPadding,step);if(reverse)range.reverse();rangeBand=step*(1-padding);ranger={t:"rangeBands",a:arguments};return scale};scale.rangeRoundBands=function(x,padding,outerPadding){if(arguments.length<2)padding=0;if(arguments.length<3)outerPadding=padding;var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=Math.floor((stop-start)/(domain.length-padding+2*outerPadding));range=steps(start+Math.round((stop-start-(domain.length-padding)*step)/2),step);if(reverse)range.reverse();rangeBand=Math.round(step*(1-padding));ranger={t:"rangeRoundBands",a:arguments};return scale};scale.rangeBand=function(){return rangeBand};scale.rangeExtent=function(){return d3_scaleExtent(ranger.a[0])};scale.copy=function(){return d3_scale_ordinal(domain,ranger)};return scale.domain(domain)}d3.scale.category10=function(){return d3.scale.ordinal().range(d3_category10)};d3.scale.category20=function(){return d3.scale.ordinal().range(d3_category20)};d3.scale.category20b=function(){return d3.scale.ordinal().range(d3_category20b)};d3.scale.category20c=function(){return d3.scale.ordinal().range(d3_category20c)};var d3_category10=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(d3_rgbString);var d3_category20=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(d3_rgbString);var d3_category20b=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(d3_rgbString);var d3_category20c=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(d3_rgbString);d3.scale.quantile=function(){return d3_scale_quantile([],[])};function d3_scale_quantile(domain,range){var thresholds;function rescale(){var k=0,q=range.length;thresholds=[];while(++k<q)thresholds[k-1]=d3.quantile(domain,k/q);return scale}function scale(x){if(!isNaN(x=+x))return range[d3.bisect(thresholds,x)]}scale.domain=function(x){if(!arguments.length)return domain;domain=x.map(d3_number).filter(d3_numeric).sort(d3_ascending);return rescale()};scale.range=function(x){if(!arguments.length)return range;range=x;return rescale()};scale.quantiles=function(){return thresholds};scale.invertExtent=function(y){y=range.indexOf(y);return y<0?[NaN,NaN]:[y>0?thresholds[y-1]:domain[0],y<thresholds.length?thresholds[y]:domain[domain.length-1]]};scale.copy=function(){return d3_scale_quantile(domain,range)};return rescale()}d3.scale.quantize=function(){return d3_scale_quantize(0,1,[0,1])};function d3_scale_quantize(x0,x1,range){var kx,i;function scale(x){return range[Math.max(0,Math.min(i,Math.floor(kx*(x-x0))))]}function rescale(){kx=range.length/(x1-x0);i=range.length-1;return scale}scale.domain=function(x){if(!arguments.length)return[x0,x1];x0=+x[0];x1=+x[x.length-1];return rescale()};scale.range=function(x){if(!arguments.length)return range;range=x;return rescale()};scale.invertExtent=function(y){y=range.indexOf(y);y=y<0?NaN:y/kx+x0;return[y,y+1/kx]};scale.copy=function(){return d3_scale_quantize(x0,x1,range)};return rescale()}d3.scale.threshold=function(){return d3_scale_threshold([.5],[0,1])};function d3_scale_threshold(domain,range){function scale(x){if(x<=x)return range[d3.bisect(domain,x)]}scale.domain=function(_){if(!arguments.length)return domain;domain=_;return scale};scale.range=function(_){if(!arguments.length)return range;range=_;return scale};scale.invertExtent=function(y){y=range.indexOf(y);return[domain[y-1],domain[y]]};scale.copy=function(){return d3_scale_threshold(domain,range)};return scale}d3.scale.identity=function(){return d3_scale_identity([0,1])};function d3_scale_identity(domain){function identity(x){return+x}identity.invert=identity;identity.domain=identity.range=function(x){if(!arguments.length)return domain;domain=x.map(identity);return identity};identity.ticks=function(m){return d3_scale_linearTicks(domain,m)};identity.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)};identity.copy=function(){return d3_scale_identity(domain)};return identity}d3.svg={};function d3_zero(){return 0}d3.svg.arc=function(){var innerRadius=d3_svg_arcInnerRadius,outerRadius=d3_svg_arcOuterRadius,cornerRadius=d3_zero,padRadius=d3_svg_arcAuto,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle,padAngle=d3_svg_arcPadAngle;function arc(){var r0=Math.max(0,+innerRadius.apply(this,arguments)),r1=Math.max(0,+outerRadius.apply(this,arguments)),a0=startAngle.apply(this,arguments)-half\u03c0,a1=endAngle.apply(this,arguments)-half\u03c0,da=Math.abs(a1-a0),cw=a0>a1?0:1;if(r1<r0)rc=r1,r1=r0,r0=rc;if(da>=\u03c4\u03b5)return circleSegment(r1,cw)+(r0?circleSegment(r0,1-cw):"")+"Z";var rc,cr,rp,ap,p0=0,p1=0,x0,y0,x1,y1,x2,y2,x3,y3,path=[];if(ap=(+padAngle.apply(this,arguments)||0)/2){rp=padRadius===d3_svg_arcAuto?Math.sqrt(r0*r0+r1*r1):+padRadius.apply(this,arguments);if(!cw)p1*=-1;if(r1)p1=d3_asin(rp/r1*Math.sin(ap));if(r0)p0=d3_asin(rp/r0*Math.sin(ap))}if(r1){x0=r1*Math.cos(a0+p1);y0=r1*Math.sin(a0+p1);x1=r1*Math.cos(a1-p1);y1=r1*Math.sin(a1-p1);var l1=Math.abs(a1-a0-2*p1)<=\u03c0?0:1;if(p1&&d3_svg_arcSweep(x0,y0,x1,y1)===cw^l1){var h1=(a0+a1)/2;x0=r1*Math.cos(h1);y0=r1*Math.sin(h1);x1=y1=null}}else{x0=y0=0}if(r0){x2=r0*Math.cos(a1-p0);y2=r0*Math.sin(a1-p0);x3=r0*Math.cos(a0+p0);y3=r0*Math.sin(a0+p0);var l0=Math.abs(a0-a1+2*p0)<=\u03c0?0:1;if(p0&&d3_svg_arcSweep(x2,y2,x3,y3)===1-cw^l0){var h0=(a0+a1)/2;x2=r0*Math.cos(h0);y2=r0*Math.sin(h0);x3=y3=null}}else{x2=y2=0}if(da>\u03b5&&(rc=Math.min(Math.abs(r1-r0)/2,+cornerRadius.apply(this,arguments)))>.001){cr=r0<r1^cw?0:1;var rc1=rc,rc0=rc;if(da<\u03c0){var oc=x3==null?[x2,y2]:x1==null?[x0,y0]:d3_geom_polygonIntersect([x0,y0],[x3,y3],[x1,y1],[x2,y2]),ax=x0-oc[0],ay=y0-oc[1],bx=x1-oc[0],by=y1-oc[1],kc=1/Math.sin(Math.acos((ax*bx+ay*by)/(Math.sqrt(ax*ax+ay*ay)*Math.sqrt(bx*bx+by*by)))/2),lc=Math.sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=Math.min(rc,(r0-lc)/(kc-1));rc1=Math.min(rc,(r1-lc)/(kc+1))}if(x1!=null){var t30=d3_svg_arcCornerTangents(x3==null?[x2,y2]:[x3,y3],[x0,y0],r1,rc1,cw),t12=d3_svg_arcCornerTangents([x1,y1],[x2,y2],r1,rc1,cw);if(rc===rc1){path.push("M",t30[0],"A",rc1,",",rc1," 0 0,",cr," ",t30[1],"A",r1,",",r1," 0 ",1-cw^d3_svg_arcSweep(t30[1][0],t30[1][1],t12[1][0],t12[1][1]),",",cw," ",t12[1],"A",rc1,",",rc1," 0 0,",cr," ",t12[0])}else{path.push("M",t30[0],"A",rc1,",",rc1," 0 1,",cr," ",t12[0])}}else{path.push("M",x0,",",y0)}if(x3!=null){var t03=d3_svg_arcCornerTangents([x0,y0],[x3,y3],r0,-rc0,cw),t21=d3_svg_arcCornerTangents([x2,y2],x1==null?[x0,y0]:[x1,y1],r0,-rc0,cw);if(rc===rc0){path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t21[1],"A",r0,",",r0," 0 ",cw^d3_svg_arcSweep(t21[1][0],t21[1][1],t03[1][0],t03[1][1]),",",1-cw," ",t03[1],"A",rc0,",",rc0," 0 0,",cr," ",t03[0])}else{path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t03[0])}}else{path.push("L",x2,",",y2)}}else{path.push("M",x0,",",y0);if(x1!=null)path.push("A",r1,",",r1," 0 ",l1,",",cw," ",x1,",",y1);path.push("L",x2,",",y2);if(x3!=null)path.push("A",r0,",",r0," 0 ",l0,",",1-cw," ",x3,",",y3)}path.push("Z");return path.join("")}function circleSegment(r1,cw){return"M0,"+r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+-r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+r1}arc.innerRadius=function(v){if(!arguments.length)return innerRadius;innerRadius=d3_functor(v);return arc};arc.outerRadius=function(v){if(!arguments.length)return outerRadius;outerRadius=d3_functor(v);return arc};arc.cornerRadius=function(v){if(!arguments.length)return cornerRadius;cornerRadius=d3_functor(v);return arc};arc.padRadius=function(v){if(!arguments.length)return padRadius;padRadius=v==d3_svg_arcAuto?d3_svg_arcAuto:d3_functor(v);return arc};arc.startAngle=function(v){if(!arguments.length)return startAngle;startAngle=d3_functor(v);return arc};arc.endAngle=function(v){if(!arguments.length)return endAngle;endAngle=d3_functor(v);return arc};arc.padAngle=function(v){if(!arguments.length)return padAngle;padAngle=d3_functor(v);return arc};arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-half\u03c0;return[Math.cos(a)*r,Math.sin(a)*r]};return arc};var d3_svg_arcAuto="auto";function d3_svg_arcInnerRadius(d){return d.innerRadius}function d3_svg_arcOuterRadius(d){return d.outerRadius}function d3_svg_arcStartAngle(d){return d.startAngle}function d3_svg_arcEndAngle(d){return d.endAngle}function d3_svg_arcPadAngle(d){return d&&d.padAngle}function d3_svg_arcSweep(x0,y0,x1,y1){return(x0-x1)*y0-(y0-y1)*x0>0?0:1}function d3_svg_arcCornerTangents(p0,p1,r1,rc,cw){var x01=p0[0]-p1[0],y01=p0[1]-p1[1],lo=(cw?rc:-rc)/Math.sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x1=p0[0]+ox,y1=p0[1]+oy,x2=p1[0]+ox,y2=p1[1]+oy,x3=(x1+x2)/2,y3=(y1+y2)/2,dx=x2-x1,dy=y2-y1,d2=dx*dx+dy*dy,r=r1-rc,D=x1*y2-x2*y1,d=(dy<0?-1:1)*Math.sqrt(Math.max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x3,dy0=cy0-y3,dx1=cx1-x3,dy1=cy1-y3;if(dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1)cx0=cx1,cy0=cy1;return[[cx0-ox,cy0-oy],[cx0*r1/r,cy0*r1/r]]}function d3_svg_line(projection){var x=d3_geom_pointX,y=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,tension=.7;function line(data){var segments=[],points=[],i=-1,n=data.length,d,fx=d3_functor(x),fy=d3_functor(y);function segment(){segments.push("M",interpolate(projection(points),tension))}while(++i<n){if(defined.call(this,d=data[i],i)){points.push([+fx.call(this,d,i),+fy.call(this,d,i)])}else if(points.length){segment();points=[]}}if(points.length)segment();return segments.length?segments.join(""):null}line.x=function(_){if(!arguments.length)return x;x=_;return line};line.y=function(_){if(!arguments.length)return y;y=_;return line};line.defined=function(_){if(!arguments.length)return defined;defined=_;return line};line.interpolate=function(_){if(!arguments.length)return interpolateKey;if(typeof _==="function")interpolateKey=interpolate=_;else interpolateKey=(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key;return line};line.tension=function(_){if(!arguments.length)return tension;tension=_;return line};return line}d3.svg.line=function(){return d3_svg_line(d3_identity)};var d3_svg_lineInterpolators=d3.map({linear:d3_svg_lineLinear,"linear-closed":d3_svg_lineLinearClosed,step:d3_svg_lineStep,"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":d3_svg_lineBasisOpen,"basis-closed":d3_svg_lineBasisClosed,bundle:d3_svg_lineBundle,cardinal:d3_svg_lineCardinal,"cardinal-open":d3_svg_lineCardinalOpen,"cardinal-closed":d3_svg_lineCardinalClosed,monotone:d3_svg_lineMonotone});d3_svg_lineInterpolators.forEach(function(key,value){value.key=key;value.closed=/-closed$/.test(key)});function d3_svg_lineLinear(points){return points.length>1?points.join("L"):points+"Z"}function d3_svg_lineLinearClosed(points){return points.join("L")+"Z"}function d3_svg_lineStep(points){var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];while(++i<n)path.push("H",(p[0]+(p=points[i])[0])/2,"V",p[1]);if(n>1)path.push("H",p[0]);return path.join("")}function d3_svg_lineStepBefore(points){var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];while(++i<n)path.push("V",(p=points[i])[1],"H",p[0]);return path.join("")}function d3_svg_lineStepAfter(points){var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];while(++i<n)path.push("H",(p=points[i])[0],"V",p[1]);return path.join("")}function d3_svg_lineCardinalOpen(points,tension){return points.length<4?d3_svg_lineLinear(points):points[1]+d3_svg_lineHermite(points.slice(1,-1),d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineCardinalClosed(points,tension){return points.length<3?d3_svg_lineLinearClosed(points):points[0]+d3_svg_lineHermite((points.push(points[0]),points),d3_svg_lineCardinalTangents([points[points.length-2]].concat(points,[points[1]]),tension))}function d3_svg_lineCardinal(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineHermite(points,tangents){if(tangents.length<1||points.length!=tangents.length&&points.length!=tangents.length+2){return d3_svg_lineLinear(points)}var quad=points.length!=tangents.length,path="",p0=points[0],p=points[1],t0=tangents[0],t=t0,pi=1;if(quad){path+="Q"+(p[0]-t0[0]*2/3)+","+(p[1]-t0[1]*2/3)+","+p[0]+","+p[1];p0=points[1];pi=2}if(tangents.length>1){t=tangents[1];p=points[pi];pi++;path+="C"+(p0[0]+t0[0])+","+(p0[1]+t0[1])+","+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1];for(var i=2;i<tangents.length;i++,pi++){p=points[pi];t=tangents[i];path+="S"+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1]}}if(quad){var lp=points[pi];path+="Q"+(p[0]+t[0]*2/3)+","+(p[1]+t[1]*2/3)+","+lp[0]+","+lp[1]}return path}function d3_svg_lineCardinalTangents(points,tension){var tangents=[],a=(1-tension)/2,p0,p1=points[0],p2=points[1],i=1,n=points.length;while(++i<n){p0=p1;p1=p2;p2=points[i];tangents.push([a*(p2[0]-p0[0]),a*(p2[1]-p0[1])])}return tangents}function d3_svg_lineBasis(points){if(points.length<3)return d3_svg_lineLinear(points);var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];points.push(points[n-1]);while(++i<=n){pi=points[i];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py)}points.pop();path.push("L",pi);return path.join("")}function d3_svg_lineBasisOpen(points){if(points.length<4)return d3_svg_lineLinear(points);var path=[],i=-1,n=points.length,pi,px=[0],py=[0];while(++i<3){pi=points[i];px.push(pi[0]);py.push(pi[1])}path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3,px)+","+d3_svg_lineDot4(d3_svg_lineBasisBezier3,py));--i;while(++i<n){pi=points[i];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py)}return path.join("")}function d3_svg_lineBasisClosed(points){var path,i=-1,n=points.length,m=n+4,pi,px=[],py=[];while(++i<4){pi=points[i%n];px.push(pi[0]);py.push(pi[1])}path=[d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];--i;while(++i<m){pi=points[i%n];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py)}return path.join("")}function d3_svg_lineBundle(points,tension){var n=points.length-1;if(n){var x0=points[0][0],y0=points[0][1],dx=points[n][0]-x0,dy=points[n][1]-y0,i=-1,p,t;while(++i<=n){p=points[i];t=i/n;p[0]=tension*p[0]+(1-tension)*(x0+t*dx);p[1]=tension*p[1]+(1-tension)*(y0+t*dy)}}return d3_svg_lineBasis(points)}function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];function d3_svg_lineBasisBezier(path,x,y){path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y))}function d3_svg_lineSlope(p0,p1){return(p1[1]-p0[1])/(p1[0]-p0[0])}function d3_svg_lineFiniteDifferences(points){var i=0,j=points.length-1,m=[],p0=points[0],p1=points[1],d=m[0]=d3_svg_lineSlope(p0,p1);while(++i<j){m[i]=(d+(d=d3_svg_lineSlope(p0=p1,p1=points[i+1])))/2}m[i]=d;return m}function d3_svg_lineMonotoneTangents(points){var tangents=[],d,a,b,s,m=d3_svg_lineFiniteDifferences(points),i=-1,j=points.length-1;while(++i<j){d=d3_svg_lineSlope(points[i],points[i+1]);if(abs(d)<\u03b5){m[i]=m[i+1]=0}else{a=m[i]/d;b=m[i+1]/d;s=a*a+b*b;if(s>9){s=d*3/Math.sqrt(s);m[i]=s*a;m[i+1]=s*b}}}i=-1;while(++i<=j){s=(points[Math.min(j,i+1)][0]-points[Math.max(0,i-1)][0])/(6*(1+m[i]*m[i]));tangents.push([s||0,m[i]*s||0])}return tangents}function d3_svg_lineMonotone(points){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineMonotoneTangents(points))}d3.svg.line.radial=function(){var line=d3_svg_line(d3_svg_lineRadial);line.radius=line.x,delete line.x;line.angle=line.y,delete line.y;return line};function d3_svg_lineRadial(points){var point,i=-1,n=points.length,r,a;while(++i<n){point=points[i];r=point[0];a=point[1]-half\u03c0;point[0]=r*Math.cos(a);point[1]=r*Math.sin(a)}return points}function d3_svg_area(projection){var x0=d3_geom_pointX,x1=d3_geom_pointX,y0=0,y1=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,interpolateReverse=interpolate,L="L",tension=.7;function area(data){var segments=[],points0=[],points1=[],i=-1,n=data.length,d,fx0=d3_functor(x0),fy0=d3_functor(y0),fx1=x0===x1?function(){return x}:d3_functor(x1),fy1=y0===y1?function(){return y}:d3_functor(y1),x,y;function segment(){segments.push("M",interpolate(projection(points1),tension),L,interpolateReverse(projection(points0.reverse()),tension),"Z")}while(++i<n){if(defined.call(this,d=data[i],i)){points0.push([x=+fx0.call(this,d,i),y=+fy0.call(this,d,i)]);points1.push([+fx1.call(this,d,i),+fy1.call(this,d,i)])}else if(points0.length){segment();points0=[];points1=[]}}if(points0.length)segment();return segments.length?segments.join(""):null}area.x=function(_){if(!arguments.length)return x1;x0=x1=_;return area};area.x0=function(_){if(!arguments.length)return x0;x0=_;return area};area.x1=function(_){if(!arguments.length)return x1;x1=_;return area};area.y=function(_){if(!arguments.length)return y1;y0=y1=_;return area};area.y0=function(_){if(!arguments.length)return y0;y0=_;return area};area.y1=function(_){if(!arguments.length)return y1;y1=_;return area};area.defined=function(_){if(!arguments.length)return defined;defined=_;return area};area.interpolate=function(_){if(!arguments.length)return interpolateKey;if(typeof _==="function")interpolateKey=interpolate=_;else interpolateKey=(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key;interpolateReverse=interpolate.reverse||interpolate;L=interpolate.closed?"M":"L";return area};area.tension=function(_){if(!arguments.length)return tension;tension=_;return area};return area}d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter;d3_svg_lineStepAfter.reverse=d3_svg_lineStepBefore;d3.svg.area=function(){return d3_svg_area(d3_identity)};d3.svg.area.radial=function(){var area=d3_svg_area(d3_svg_lineRadial);area.radius=area.x,delete area.x;area.innerRadius=area.x0,delete area.x0;area.outerRadius=area.x1,delete area.x1;area.angle=area.y,delete area.y;area.startAngle=area.y0,delete area.y0;area.endAngle=area.y1,delete area.y1;return area};d3.svg.chord=function(){var source=d3_source,target=d3_target,radius=d3_svg_chordRadius,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle;function chord(d,i){var s=subgroup(this,source,d,i),t=subgroup(this,target,d,i);return"M"+s.p0+arc(s.r,s.p1,s.a1-s.a0)+(equals(s,t)?curve(s.r,s.p1,s.r,s.p0):curve(s.r,s.p1,t.r,t.p0)+arc(t.r,t.p1,t.a1-t.a0)+curve(t.r,t.p1,s.r,s.p0))+"Z"}function subgroup(self,f,d,i){var subgroup=f.call(self,d,i),r=radius.call(self,subgroup,i),a0=startAngle.call(self,subgroup,i)-half\u03c0,a1=endAngle.call(self,subgroup,i)-half\u03c0;return{r:r,a0:a0,a1:a1,p0:[r*Math.cos(a0),r*Math.sin(a0)],p1:[r*Math.cos(a1),r*Math.sin(a1)]}}function equals(a,b){return a.a0==b.a0&&a.a1==b.a1}function arc(r,p,a){return"A"+r+","+r+" 0 "+ +(a>\u03c0)+",1 "+p}function curve(r0,p0,r1,p1){return"Q 0,0 "+p1}chord.radius=function(v){if(!arguments.length)return radius;radius=d3_functor(v);return chord};chord.source=function(v){if(!arguments.length)return source;source=d3_functor(v);return chord};chord.target=function(v){if(!arguments.length)return target;target=d3_functor(v);return chord};chord.startAngle=function(v){if(!arguments.length)return startAngle;startAngle=d3_functor(v);return chord};chord.endAngle=function(v){if(!arguments.length)return endAngle;endAngle=d3_functor(v);return chord};return chord};function d3_svg_chordRadius(d){return d.radius}d3.svg.diagonal=function(){var source=d3_source,target=d3_target,projection=d3_svg_diagonalProjection;function diagonal(d,i){var p0=source.call(this,d,i),p3=target.call(this,d,i),m=(p0.y+p3.y)/2,p=[p0,{x:p0.x,y:m},{x:p3.x,y:m},p3];p=p.map(projection);return"M"+p[0]+"C"+p[1]+" "+p[2]+" "+p[3]}diagonal.source=function(x){if(!arguments.length)return source;source=d3_functor(x);return diagonal};diagonal.target=function(x){if(!arguments.length)return target;target=d3_functor(x);return diagonal};diagonal.projection=function(x){if(!arguments.length)return projection;projection=x;return diagonal};return diagonal};function d3_svg_diagonalProjection(d){return[d.x,d.y]}d3.svg.diagonal.radial=function(){var diagonal=d3.svg.diagonal(),projection=d3_svg_diagonalProjection,projection_=diagonal.projection;diagonal.projection=function(x){return arguments.length?projection_(d3_svg_diagonalRadialProjection(projection=x)):projection};return diagonal};function d3_svg_diagonalRadialProjection(projection){return function(){var d=projection.apply(this,arguments),r=d[0],a=d[1]-half\u03c0;return[r*Math.cos(a),r*Math.sin(a)]}}d3.svg.symbol=function(){var type=d3_svg_symbolType,size=d3_svg_symbolSize;function symbol(d,i){return(d3_svg_symbols.get(type.call(this,d,i))||d3_svg_symbolCircle)(size.call(this,d,i))}symbol.type=function(x){if(!arguments.length)return type;type=d3_functor(x);return symbol};symbol.size=function(x){if(!arguments.length)return size;size=d3_functor(x);return symbol};return symbol};function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(size){var r=Math.sqrt(size/\u03c0);return"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z"}var d3_svg_symbols=d3.map({circle:d3_svg_symbolCircle,cross:function(size){var r=Math.sqrt(size/5)/2;return"M"+-3*r+","+-r+"H"+-r+"V"+-3*r+"H"+r+"V"+-r+"H"+3*r+"V"+r+"H"+r+"V"+3*r+"H"+-r+"V"+r+"H"+-3*r+"Z"},diamond:function(size){var ry=Math.sqrt(size/(2*d3_svg_symbolTan30)),rx=ry*d3_svg_symbolTan30;return"M0,"+-ry+"L"+rx+",0"+" 0,"+ry+" "+-rx+",0"+"Z"},square:function(size){var r=Math.sqrt(size)/2;return"M"+-r+","+-r+"L"+r+","+-r+" "+r+","+r+" "+-r+","+r+"Z"},"triangle-down":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+ry+"L"+rx+","+-ry+" "+-rx+","+-ry+"Z"},"triangle-up":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+-ry+"L"+rx+","+ry+" "+-rx+","+ry+"Z"}});d3.svg.symbolTypes=d3_svg_symbols.keys();var d3_svg_symbolSqrt3=Math.sqrt(3),d3_svg_symbolTan30=Math.tan(30*d3_radians);d3_selectionPrototype.transition=function(name){var id=d3_transitionInheritId||++d3_transitionId,ns=d3_transitionNamespace(name),subgroups=[],subgroup,node,transition=d3_transitionInherit||{time:Date.now(),ease:d3_ease_cubicInOut,delay:0,duration:250};for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;){if(node=group[i])d3_transitionNode(node,i,ns,id,transition);subgroup.push(node)}}return d3_transition(subgroups,ns,id)};d3_selectionPrototype.interrupt=function(name){return this.each(name==null?d3_selection_interrupt:d3_selection_interruptNS(d3_transitionNamespace(name)))};var d3_selection_interrupt=d3_selection_interruptNS(d3_transitionNamespace());function d3_selection_interruptNS(ns){return function(){var lock,activeId,active;if((lock=this[ns])&&(active=lock[activeId=lock.active])){active.timer.c=null;active.timer.t=NaN;if(--lock.count)delete lock[activeId];else delete this[ns];lock.active+=.5;active.event&&active.event.interrupt.call(this,this.__data__,active.index)}}}function d3_transition(groups,ns,id){d3_subclass(groups,d3_transitionPrototype);groups.namespace=ns;groups.id=id;return groups}var d3_transitionPrototype=[],d3_transitionId=0,d3_transitionInheritId,d3_transitionInherit;d3_transitionPrototype.call=d3_selectionPrototype.call;d3_transitionPrototype.empty=d3_selectionPrototype.empty;d3_transitionPrototype.node=d3_selectionPrototype.node;d3_transitionPrototype.size=d3_selectionPrototype.size;d3.transition=function(selection,name){return selection&&selection.transition?d3_transitionInheritId?selection.transition(name):selection:d3.selection().transition(selection)};d3.transition.prototype=d3_transitionPrototype;d3_transitionPrototype.select=function(selector){var id=this.id,ns=this.namespace,subgroups=[],subgroup,subnode,node;selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;){if((node=group[i])&&(subnode=selector.call(node,node.__data__,i,j))){if("__data__"in node)subnode.__data__=node.__data__;d3_transitionNode(subnode,i,ns,id,node[ns][id]);subgroup.push(subnode)}else{subgroup.push(null)}}}return d3_transition(subgroups,ns,id)};d3_transitionPrototype.selectAll=function(selector){var id=this.id,ns=this.namespace,subgroups=[],subgroup,subnodes,node,subnode,transition;selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;){for(var group=this[j],i=-1,n=group.length;++i<n;){if(node=group[i]){transition=node[ns][id];subnodes=selector.call(node,node.__data__,i,j);subgroups.push(subgroup=[]);for(var k=-1,o=subnodes.length;++k<o;){if(subnode=subnodes[k])d3_transitionNode(subnode,k,ns,id,transition);subgroup.push(subnode)}}}}return d3_transition(subgroups,ns,id)};d3_transitionPrototype.filter=function(filter){var subgroups=[],subgroup,group,node;if(typeof filter!=="function")filter=d3_selection_filter(filter);for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;i<n;i++){if((node=group[i])&&filter.call(node,node.__data__,i,j)){subgroup.push(node)}}}return d3_transition(subgroups,this.namespace,this.id)};d3_transitionPrototype.tween=function(name,tween){var id=this.id,ns=this.namespace;if(arguments.length<2)return this.node()[ns][id].tween.get(name);return d3_selection_each(this,tween==null?function(node){node[ns][id].tween.remove(name)}:function(node){node[ns][id].tween.set(name,tween)})};function d3_transition_tween(groups,name,value,tween){var id=groups.id,ns=groups.namespace;return d3_selection_each(groups,typeof value==="function"?function(node,i,j){node[ns][id].tween.set(name,tween(value.call(node,node.__data__,i,j)))}:(value=tween(value),function(node){node[ns][id].tween.set(name,value)}))}d3_transitionPrototype.attr=function(nameNS,value){if(arguments.length<2){for(value in nameNS)this.attr(value,nameNS[value]);return this}var interpolate=nameNS=="transform"?d3_interpolateTransform:d3_interpolate,name=d3.ns.qualify(nameNS);function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrTween(b){return b==null?attrNull:(b+="",function(){var a=this.getAttribute(name),i;return a!==b&&(i=interpolate(a,b),function(t){this.setAttribute(name,i(t))})})}function attrTweenNS(b){return b==null?attrNullNS:(b+="",function(){var a=this.getAttributeNS(name.space,name.local),i;return a!==b&&(i=interpolate(a,b),function(t){this.setAttributeNS(name.space,name.local,i(t))})})}return d3_transition_tween(this,"attr."+nameNS,value,name.local?attrTweenNS:attrTween)};d3_transitionPrototype.attrTween=function(nameNS,tween){var name=d3.ns.qualify(nameNS);function attrTween(d,i){var f=tween.call(this,d,i,this.getAttribute(name));return f&&function(t){this.setAttribute(name,f(t))}}function attrTweenNS(d,i){var f=tween.call(this,d,i,this.getAttributeNS(name.space,name.local));return f&&function(t){this.setAttributeNS(name.space,name.local,f(t))}}return this.tween("attr."+nameNS,name.local?attrTweenNS:attrTween)};d3_transitionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if(typeof name!=="string"){if(n<2)value="";for(priority in name)this.style(priority,name[priority],value);return this}priority=""}function styleNull(){this.style.removeProperty(name)}function styleString(b){return b==null?styleNull:(b+="",function(){var a=d3_window(this).getComputedStyle(this,null).getPropertyValue(name),i;return a!==b&&(i=d3_interpolate(a,b),function(t){this.style.setProperty(name,i(t),priority)})})}return d3_transition_tween(this,"style."+name,value,styleString)};d3_transitionPrototype.styleTween=function(name,tween,priority){if(arguments.length<3)priority="";function styleTween(d,i){var f=tween.call(this,d,i,d3_window(this).getComputedStyle(this,null).getPropertyValue(name));return f&&function(t){this.style.setProperty(name,f(t),priority)}}return this.tween("style."+name,styleTween)};d3_transitionPrototype.text=function(value){return d3_transition_tween(this,"text",value,d3_transition_text)};function d3_transition_text(b){if(b==null)b="";return function(){this.textContent=b}}d3_transitionPrototype.remove=function(){var ns=this.namespace;return this.each("end.transition",function(){var p;if(this[ns].count<2&&(p=this.parentNode))p.removeChild(this)})};d3_transitionPrototype.ease=function(value){var id=this.id,ns=this.namespace;if(arguments.length<1)return this.node()[ns][id].ease;if(typeof value!=="function")value=d3.ease.apply(d3,arguments);return d3_selection_each(this,function(node){node[ns][id].ease=value})};d3_transitionPrototype.delay=function(value){var id=this.id,ns=this.namespace;if(arguments.length<1)return this.node()[ns][id].delay;return d3_selection_each(this,typeof value==="function"?function(node,i,j){node[ns][id].delay=+value.call(node,node.__data__,i,j)}:(value=+value,function(node){node[ns][id].delay=value}))};d3_transitionPrototype.duration=function(value){var id=this.id,ns=this.namespace;if(arguments.length<1)return this.node()[ns][id].duration;return d3_selection_each(this,typeof value==="function"?function(node,i,j){node[ns][id].duration=Math.max(1,value.call(node,node.__data__,i,j))}:(value=Math.max(1,value),function(node){node[ns][id].duration=value}))};d3_transitionPrototype.each=function(type,listener){var id=this.id,ns=this.namespace;if(arguments.length<2){var inherit=d3_transitionInherit,inheritId=d3_transitionInheritId;try{d3_transitionInheritId=id;d3_selection_each(this,function(node,i,j){d3_transitionInherit=node[ns][id];type.call(node,node.__data__,i,j)})}finally{d3_transitionInherit=inherit;d3_transitionInheritId=inheritId}}else{d3_selection_each(this,function(node){var transition=node[ns][id];(transition.event||(transition.event=d3.dispatch("start","end","interrupt"))).on(type,listener)})}return this};d3_transitionPrototype.transition=function(){var id0=this.id,id1=++d3_transitionId,ns=this.namespace,subgroups=[],subgroup,group,node,transition;for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;i<n;i++){if(node=group[i]){transition=node[ns][id0];d3_transitionNode(node,i,ns,id1,{time:transition.time,ease:transition.ease,delay:transition.delay+transition.duration,duration:transition.duration})}subgroup.push(node)}}return d3_transition(subgroups,ns,id1)};function d3_transitionNamespace(name){return name==null?"__transition__":"__transition_"+name+"__"}function d3_transitionNode(node,i,ns,id,inherit){var lock=node[ns]||(node[ns]={active:0,count:0}),transition=lock[id],time,timer,duration,ease,tweens;function schedule(elapsed){var delay=transition.delay;timer.t=delay+time;if(delay<=elapsed)return start(elapsed-delay);timer.c=start}function start(elapsed){var activeId=lock.active,active=lock[activeId];if(active){active.timer.c=null;active.timer.t=NaN;--lock.count;delete lock[activeId];active.event&&active.event.interrupt.call(node,node.__data__,active.index)}for(var cancelId in lock){if(+cancelId<id){var cancel=lock[cancelId];cancel.timer.c=null;cancel.timer.t=NaN;--lock.count;delete lock[cancelId]}}timer.c=tick;d3_timer(function(){if(timer.c&&tick(elapsed||1)){timer.c=null;timer.t=NaN}return 1},0,time);lock.active=id;transition.event&&transition.event.start.call(node,node.__data__,i);tweens=[];transition.tween.forEach(function(key,value){if(value=value.call(node,node.__data__,i)){tweens.push(value)}});ease=transition.ease;duration=transition.duration}function tick(elapsed){var t=elapsed/duration,e=ease(t),n=tweens.length;while(n>0){tweens[--n].call(node,e)}if(t>=1){transition.event&&transition.event.end.call(node,node.__data__,i);if(--lock.count)delete lock[id];else delete node[ns];return 1}}if(!transition){time=inherit.time;timer=d3_timer(schedule,0,time);transition=lock[id]={tween:new d3_Map,time:time,timer:timer,delay:inherit.delay,duration:inherit.duration,ease:inherit.ease,index:i};inherit=null;++lock.count}}d3.svg.axis=function(){var scale=d3.scale.linear(),orient=d3_svg_axisDefaultOrient,innerTickSize=6,outerTickSize=6,tickPadding=3,tickArguments_=[10],tickValues=null,tickFormat_;function axis(g){g.each(function(){var g=d3.select(this);var scale0=this.__chart__||scale,scale1=this.__chart__=scale.copy();var ticks=tickValues==null?scale1.ticks?scale1.ticks.apply(scale1,tickArguments_):scale1.domain():tickValues,tickFormat=tickFormat_==null?scale1.tickFormat?scale1.tickFormat.apply(scale1,tickArguments_):d3_identity:tickFormat_,tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity",\u03b5),tickExit=d3.transition(tick.exit()).style("opacity",\u03b5).remove(),tickUpdate=d3.transition(tick.order()).style("opacity",1),tickSpacing=Math.max(innerTickSize,0)+tickPadding,tickTransform;var range=d3_scaleRange(scale1),path=g.selectAll(".domain").data([0]),pathUpdate=(path.enter().append("path").attr("class","domain"),d3.transition(path));tickEnter.append("line");tickEnter.append("text");var lineEnter=tickEnter.select("line"),lineUpdate=tickUpdate.select("line"),text=tick.select("text").text(tickFormat),textEnter=tickEnter.select("text"),textUpdate=tickUpdate.select("text"),sign=orient==="top"||orient==="left"?-1:1,x1,x2,y1,y2;if(orient==="bottom"||orient==="top"){tickTransform=d3_svg_axisX,x1="x",y1="y",x2="x2",y2="y2";text.attr("dy",sign<0?"0em":".71em").style("text-anchor","middle");pathUpdate.attr("d","M"+range[0]+","+sign*outerTickSize+"V0H"+range[1]+"V"+sign*outerTickSize)}else{tickTransform=d3_svg_axisY,x1="y",y1="x",x2="y2",y2="x2";text.attr("dy",".32em").style("text-anchor",sign<0?"end":"start");pathUpdate.attr("d","M"+sign*outerTickSize+","+range[0]+"H0V"+range[1]+"H"+sign*outerTickSize)}lineEnter.attr(y2,sign*innerTickSize);textEnter.attr(y1,sign*tickSpacing);lineUpdate.attr(x2,0).attr(y2,sign*innerTickSize);textUpdate.attr(x1,0).attr(y1,sign*tickSpacing);if(scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else if(scale0.rangeBand){scale0=scale1}else{tickExit.call(tickTransform,scale1,scale0)}tickEnter.call(tickTransform,scale0,scale1);tickUpdate.call(tickTransform,scale1,scale1)})}axis.scale=function(x){if(!arguments.length)return scale;scale=x;return axis};axis.orient=function(x){if(!arguments.length)return orient;orient=x in d3_svg_axisOrients?x+"":d3_svg_axisDefaultOrient;return axis};axis.ticks=function(){if(!arguments.length)return tickArguments_;tickArguments_=d3_array(arguments);return axis};axis.tickValues=function(x){if(!arguments.length)return tickValues;tickValues=x;return axis};axis.tickFormat=function(x){if(!arguments.length)return tickFormat_;tickFormat_=x;return axis};axis.tickSize=function(x){var n=arguments.length;if(!n)return innerTickSize;innerTickSize=+x;outerTickSize=+arguments[n-1];return axis};axis.innerTickSize=function(x){if(!arguments.length)return innerTickSize;innerTickSize=+x;return axis};axis.outerTickSize=function(x){if(!arguments.length)return outerTickSize;outerTickSize=+x;return axis};axis.tickPadding=function(x){if(!arguments.length)return tickPadding;tickPadding=+x;return axis};axis.tickSubdivide=function(){return arguments.length&&axis};return axis};var d3_svg_axisDefaultOrient="bottom",d3_svg_axisOrients={top:1,right:1,bottom:1,left:1};function d3_svg_axisX(selection,x0,x1){selection.attr("transform",function(d){var v0=x0(d);return"translate("+(isFinite(v0)?v0:x1(d))+",0)"})}function d3_svg_axisY(selection,y0,y1){selection.attr("transform",function(d){var v0=y0(d);return"translate(0,"+(isFinite(v0)?v0:y1(d))+")"})}d3.svg.brush=function(){var event=d3_eventDispatch(brush,"brushstart","brush","brushend"),x=null,y=null,xExtent=[0,0],yExtent=[0,0],xExtentDomain,yExtentDomain,xClamp=true,yClamp=true,resizes=d3_svg_brushResizes[0];function brush(g){g.each(function(){var g=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",brushstart).on("touchstart.brush",brushstart);var background=g.selectAll(".background").data([0]);background.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var resize=g.selectAll(".resize").data(resizes,d3_identity);resize.exit().remove();resize.enter().append("g").attr("class",function(d){return"resize "+d}).style("cursor",function(d){return d3_svg_brushCursor[d]}).append("rect").attr("x",function(d){return/[ew]$/.test(d)?-3:null}).attr("y",function(d){return/^[ns]/.test(d)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");resize.style("display",brush.empty()?"none":null);var gUpdate=d3.transition(g),backgroundUpdate=d3.transition(background),range;if(x){range=d3_scaleRange(x);backgroundUpdate.attr("x",range[0]).attr("width",range[1]-range[0]);redrawX(gUpdate)}if(y){range=d3_scaleRange(y);backgroundUpdate.attr("y",range[0]).attr("height",range[1]-range[0]);redrawY(gUpdate)}redraw(gUpdate)})}brush.event=function(g){g.each(function(){var event_=event.of(this,arguments),extent1={x:xExtent,y:yExtent,i:xExtentDomain,j:yExtentDomain},extent0=this.__chart__||extent1;this.__chart__=extent1;if(d3_transitionInheritId){d3.select(this).transition().each("start.brush",function(){xExtentDomain=extent0.i;yExtentDomain=extent0.j;xExtent=extent0.x;yExtent=extent0.y;event_({type:"brushstart"})}).tween("brush:brush",function(){var xi=d3_interpolateArray(xExtent,extent1.x),yi=d3_interpolateArray(yExtent,extent1.y);xExtentDomain=yExtentDomain=null;return function(t){xExtent=extent1.x=xi(t);yExtent=extent1.y=yi(t);event_({type:"brush",mode:"resize"})}}).each("end.brush",function(){xExtentDomain=extent1.i;yExtentDomain=extent1.j;event_({type:"brush",mode:"resize"});event_({type:"brushend"})})}else{event_({type:"brushstart"});event_({type:"brush",mode:"resize"});event_({type:"brushend"})}})};function redraw(g){g.selectAll(".resize").attr("transform",function(d){return"translate("+xExtent[+/e$/.test(d)]+","+yExtent[+/^s/.test(d)]+")"})}function redrawX(g){g.select(".extent").attr("x",xExtent[0]);g.selectAll(".extent,.n>rect,.s>rect").attr("width",xExtent[1]-xExtent[0])}function redrawY(g){g.select(".extent").attr("y",yExtent[0]);g.selectAll(".extent,.e>rect,.w>rect").attr("height",yExtent[1]-yExtent[0])}function brushstart(){var target=this,eventTarget=d3.select(d3.event.target),event_=event.of(target,arguments),g=d3.select(target),resizing=eventTarget.datum(),resizingX=!/^(n|s)$/.test(resizing)&&x,resizingY=!/^(e|w)$/.test(resizing)&&y,dragging=eventTarget.classed("extent"),dragRestore=d3_event_dragSuppress(target),center,origin=d3.mouse(target),offset;var w=d3.select(d3_window(target)).on("keydown.brush",keydown).on("keyup.brush",keyup);if(d3.event.changedTouches){w.on("touchmove.brush",brushmove).on("touchend.brush",brushend)}else{w.on("mousemove.brush",brushmove).on("mouseup.brush",brushend)}g.interrupt().selectAll("*").interrupt();if(dragging){origin[0]=xExtent[0]-origin[0];origin[1]=yExtent[0]-origin[1]}else if(resizing){var ex=+/w$/.test(resizing),ey=+/^n/.test(resizing);offset=[xExtent[1-ex]-origin[0],yExtent[1-ey]-origin[1]];origin[0]=xExtent[ex];origin[1]=yExtent[ey]}else if(d3.event.altKey)center=origin.slice();g.style("pointer-events","none").selectAll(".resize").style("display",null);d3.select("body").style("cursor",eventTarget.style("cursor"));event_({type:"brushstart"});brushmove();function keydown(){if(d3.event.keyCode==32){if(!dragging){center=null;origin[0]-=xExtent[1];origin[1]-=yExtent[1];dragging=2}d3_eventPreventDefault()}}function keyup(){if(d3.event.keyCode==32&&dragging==2){origin[0]+=xExtent[1];origin[1]+=yExtent[1];dragging=0;d3_eventPreventDefault()}}function brushmove(){var point=d3.mouse(target),moved=false;if(offset){point[0]+=offset[0];point[1]+=offset[1]}if(!dragging){if(d3.event.altKey){if(!center)center=[(xExtent[0]+xExtent[1])/2,(yExtent[0]+yExtent[1])/2];origin[0]=xExtent[+(point[0]<center[0])];origin[1]=yExtent[+(point[1]<center[1])]}else center=null}if(resizingX&&move1(point,x,0)){redrawX(g);moved=true}if(resizingY&&move1(point,y,1)){redrawY(g);moved=true}if(moved){redraw(g);event_({type:"brush",mode:dragging?"move":"resize"})}}function move1(point,scale,i){var range=d3_scaleRange(scale),r0=range[0],r1=range[1],position=origin[i],extent=i?yExtent:xExtent,size=extent[1]-extent[0],min,max;if(dragging){r0-=position;r1-=size+position}min=(i?yClamp:xClamp)?Math.max(r0,Math.min(r1,point[i])):point[i];if(dragging){max=(min+=position)+size}else{if(center)position=Math.max(r0,Math.min(r1,2*center[i]-min));if(position<min){max=min;min=position}else{max=position}}if(extent[0]!=min||extent[1]!=max){if(i)yExtentDomain=null;else xExtentDomain=null;extent[0]=min;extent[1]=max;return true}}function brushend(){brushmove();g.style("pointer-events","all").selectAll(".resize").style("display",brush.empty()?"none":null);d3.select("body").style("cursor",null);w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);dragRestore();event_({type:"brushend"})}}brush.x=function(z){if(!arguments.length)return x;x=z;resizes=d3_svg_brushResizes[!x<<1|!y];return brush};brush.y=function(z){if(!arguments.length)return y;y=z;resizes=d3_svg_brushResizes[!x<<1|!y];return brush};brush.clamp=function(z){if(!arguments.length)return x&&y?[xClamp,yClamp]:x?xClamp:y?yClamp:null;if(x&&y)xClamp=!!z[0],yClamp=!!z[1];else if(x)xClamp=!!z;else if(y)yClamp=!!z;return brush};brush.extent=function(z){var x0,x1,y0,y1,t;if(!arguments.length){if(x){if(xExtentDomain){x0=xExtentDomain[0],x1=xExtentDomain[1]}else{x0=xExtent[0],x1=xExtent[1];if(x.invert)x0=x.invert(x0),x1=x.invert(x1);if(x1<x0)t=x0,x0=x1,x1=t}}if(y){if(yExtentDomain){y0=yExtentDomain[0],y1=yExtentDomain[1]}else{y0=yExtent[0],y1=yExtent[1];if(y.invert)y0=y.invert(y0),y1=y.invert(y1);if(y1<y0)t=y0,y0=y1,y1=t}}return x&&y?[[x0,y0],[x1,y1]]:x?[x0,x1]:y&&[y0,y1]}if(x){x0=z[0],x1=z[1];if(y)x0=x0[0],x1=x1[0];xExtentDomain=[x0,x1];if(x.invert)x0=x(x0),x1=x(x1);if(x1<x0)t=x0,x0=x1,x1=t;if(x0!=xExtent[0]||x1!=xExtent[1])xExtent=[x0,x1]}if(y){y0=z[0],y1=z[1];if(x)y0=y0[1],y1=y1[1];yExtentDomain=[y0,y1];if(y.invert)y0=y(y0),y1=y(y1);if(y1<y0)t=y0,y0=y1,y1=t;if(y0!=yExtent[0]||y1!=yExtent[1])yExtent=[y0,y1]}return brush};brush.clear=function(){if(!brush.empty()){xExtent=[0,0],yExtent=[0,0];xExtentDomain=yExtentDomain=null}return brush};brush.empty=function(){return!!x&&xExtent[0]==xExtent[1]||!!y&&yExtent[0]==yExtent[1]};return d3.rebind(brush,event,"on")};var d3_svg_brushCursor={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var d3_svg_brushResizes=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var d3_time_format=d3_time.format=d3_locale_enUS.timeFormat;var d3_time_formatUtc=d3_time_format.utc;var d3_time_formatIso=d3_time_formatUtc("%Y-%m-%dT%H:%M:%S.%LZ");d3_time_format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?d3_time_formatIsoNative:d3_time_formatIso;function d3_time_formatIsoNative(date){return date.toISOString()}d3_time_formatIsoNative.parse=function(string){var date=new Date(string);return isNaN(date)?null:date};d3_time_formatIsoNative.toString=d3_time_formatIso.toString;d3_time.second=d3_time_interval(function(date){return new d3_date(Math.floor(date/1e3)*1e3)},function(date,offset){date.setTime(date.getTime()+Math.floor(offset)*1e3)},function(date){return date.getSeconds()});d3_time.seconds=d3_time.second.range;d3_time.seconds.utc=d3_time.second.utc.range;d3_time.minute=d3_time_interval(function(date){return new d3_date(Math.floor(date/6e4)*6e4)},function(date,offset){date.setTime(date.getTime()+Math.floor(offset)*6e4)},function(date){return date.getMinutes()});d3_time.minutes=d3_time.minute.range;d3_time.minutes.utc=d3_time.minute.utc.range;d3_time.hour=d3_time_interval(function(date){var timezone=date.getTimezoneOffset()/60;return new d3_date((Math.floor(date/36e5-timezone)+timezone)*36e5)},function(date,offset){date.setTime(date.getTime()+Math.floor(offset)*36e5)},function(date){return date.getHours()});d3_time.hours=d3_time.hour.range;d3_time.hours.utc=d3_time.hour.utc.range;d3_time.month=d3_time_interval(function(date){date=d3_time.day(date);date.setDate(1);return date},function(date,offset){date.setMonth(date.getMonth()+offset)},function(date){return date.getMonth()});d3_time.months=d3_time.month.range;d3_time.months.utc=d3_time.month.utc.range;function d3_time_scale(linear,methods,format){function scale(x){return linear(x)}scale.invert=function(x){return d3_time_scaleDate(linear.invert(x))};scale.domain=function(x){if(!arguments.length)return linear.domain().map(d3_time_scaleDate);linear.domain(x);return scale};function tickMethod(extent,count){var span=extent[1]-extent[0],target=span/count,i=d3.bisect(d3_time_scaleSteps,target);return i==d3_time_scaleSteps.length?[methods.year,d3_scale_linearTickRange(extent.map(function(d){return d/31536e6}),count)[2]]:!i?[d3_time_scaleMilliseconds,d3_scale_linearTickRange(extent,count)[2]]:methods[target/d3_time_scaleSteps[i-1]<d3_time_scaleSteps[i]/target?i-1:i]}scale.nice=function(interval,skip){var domain=scale.domain(),extent=d3_scaleExtent(domain),method=interval==null?tickMethod(extent,10):typeof interval==="number"&&tickMethod(extent,interval);if(method)interval=method[0],skip=method[1];function skipped(date){return!isNaN(date)&&!interval.range(date,d3_time_scaleDate(+date+1),skip).length}return scale.domain(d3_scale_nice(domain,skip>1?{floor:function(date){while(skipped(date=interval.floor(date)))date=d3_time_scaleDate(date-1);return date},ceil:function(date){while(skipped(date=interval.ceil(date)))date=d3_time_scaleDate(+date+1);return date}}:interval))};scale.ticks=function(interval,skip){var extent=d3_scaleExtent(scale.domain()),method=interval==null?tickMethod(extent,10):typeof interval==="number"?tickMethod(extent,interval):!interval.range&&[{range:interval},skip];if(method)interval=method[0],skip=method[1];return interval.range(extent[0],d3_time_scaleDate(+extent[1]+1),skip<1?1:skip)};scale.tickFormat=function(){return format};scale.copy=function(){return d3_time_scale(linear.copy(),methods,format)};return d3_scale_linearRebind(scale,linear)}function d3_time_scaleDate(t){return new Date(t)}var d3_time_scaleSteps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var d3_time_scaleLocalMethods=[[d3_time.second,1],[d3_time.second,5],[d3_time.second,15],[d3_time.second,30],[d3_time.minute,1],[d3_time.minute,5],[d3_time.minute,15],[d3_time.minute,30],[d3_time.hour,1],[d3_time.hour,3],[d3_time.hour,6],[d3_time.hour,12],[d3_time.day,1],[d3_time.day,2],[d3_time.week,1],[d3_time.month,1],[d3_time.month,3],[d3_time.year,1]];var d3_time_scaleLocalFormat=d3_time_format.multi([[".%L",function(d){return d.getMilliseconds()}],[":%S",function(d){return d.getSeconds()}],["%I:%M",function(d){return d.getMinutes()}],["%I %p",function(d){return d.getHours()}],["%a %d",function(d){return d.getDay()&&d.getDate()!=1}],["%b %d",function(d){return d.getDate()!=1}],["%B",function(d){return d.getMonth()}],["%Y",d3_true]]);var d3_time_scaleMilliseconds={range:function(start,stop,step){return d3.range(Math.ceil(start/step)*step,+stop,step).map(d3_time_scaleDate)},floor:d3_identity,ceil:d3_identity};d3_time_scaleLocalMethods.year=d3_time.year;d3_time.scale=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleLocalMethods,d3_time_scaleLocalFormat)};var d3_time_scaleUtcMethods=d3_time_scaleLocalMethods.map(function(m){return[m[0].utc,m[1]]});var d3_time_scaleUtcFormat=d3_time_formatUtc.multi([[".%L",function(d){return d.getUTCMilliseconds()}],[":%S",function(d){return d.getUTCSeconds()}],["%I:%M",function(d){return d.getUTCMinutes()}],["%I %p",function(d){return d.getUTCHours()}],["%a %d",function(d){return d.getUTCDay()&&d.getUTCDate()!=1}],["%b %d",function(d){return d.getUTCDate()!=1}],["%B",function(d){return d.getUTCMonth()}],["%Y",d3_true]]);d3_time_scaleUtcMethods.year=d3_time.year.utc;d3_time.scale.utc=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleUtcMethods,d3_time_scaleUtcFormat)};d3.text=d3_xhrType(function(request){return request.responseText});d3.json=function(url,callback){return d3_xhr(url,"application/json",d3_json,callback)};function d3_json(request){return JSON.parse(request.responseText)}d3.html=function(url,callback){return d3_xhr(url,"text/html",d3_html,callback)};function d3_html(request){var range=d3_document.createRange();range.selectNode(d3_document.body);return range.createContextualFragment(request.responseText)}d3.xml=d3_xhrType(function(request){return request.responseXML});if(typeof define==="function"&&define.amd)this.d3=d3,define(d3);else if(typeof module==="object"&&module.exports)module.exports=d3;else this.d3=d3}()},{}],386:[function(require,module,exports){module.exports={_from:"datalib@>=1.7.1 <2.0.0",_id:"datalib@1.7.3",_inBundle:false,_integrity:"sha1-RyJxW7kfWiQRz0K/mEkyzEA+ukg=",_location:"/webppl-viz/datalib",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"datalib@1.7.3",name:"datalib",escapedName:"datalib",rawSpec:"1.7.3",saveSpec:null,fetchSpec:"1.7.3"},_requiredBy:["/webppl-viz/vega","/webppl-viz/vega-dataflow","/webppl-viz/vega-lite","/webppl-viz/vega-scenegraph"],_resolved:"https://registry.npmjs.org/datalib/-/datalib-1.7.3.tgz",_shasum:"4722715bb91f5a2411cf42bf984932cc403eba48",_spec:"datalib@1.7.3",_where:"/Users/lestera/Documents/git/webppl/node_modules/webppl-viz",author:{name:"Jeffrey Heer",url:"http://idl.cs.washington.edu"},browser:{buffer:false,fs:false,http:false,request:false,"sync-request":false,url:false},bugs:{url:"https://github.com/vega/datalib/issues"},bundleDependencies:false,contributors:[{name:"Michael Correll",url:"http://pages.cs.wisc.edu/~mcorrell/"},{name:"Ryan Russell",url:"https://github.com/RussellSprouts"}],dependencies:{"d3-dsv":"0.1","d3-format":"0.4","d3-time":"0.1","d3-time-format":"0.2",request:"^2.67.0","sync-request":"^2.1.0",topojson:"^1.6.19"},deprecated:false,description:"JavaScript utilites for loading, summarizing and working with data.",devDependencies:{browserify:"^12.0.1",chai:"^3.4.1",istanbul:"latest",jshint:"^2.9.1-rc1",mocha:"^2.3.4","uglify-js":"^2.6.1"},homepage:"https://github.com/vega/datalib#readme",keywords:["data","table","statistics","parse","csv","tsv","json","utility"],license:"BSD-3-Clause",main:"src/index.js",name:"datalib",repository:{type:"git",url:"git+ssh://git@github.com/vega/datalib.git"},scripts:{build:"browserify src/index.js -d -s dl -o datalib.js",cover:"TZ=America/Los_Angeles istanbul cover _mocha -- --recursive test/",deploy:"npm run test && scripts/deploy.sh",lint:"jshint src/",postbuild:"uglifyjs datalib.js -c -m -o datalib.min.js",test:"npm run lint && TZ=America/Los_Angeles mocha --recursive test/"},version:"1.7.3"}},{}],387:[function(require,module,exports){var util=require("./util"),time=require("./time"),utc=time.utc;var u=module.exports;u.$year=util.$func("year",time.year.unit);u.$month=util.$func("month",time.months.unit);u.$date=util.$func("date",time.dates.unit);u.$day=util.$func("day",time.weekdays.unit);u.$hour=util.$func("hour",time.hours.unit);u.$minute=util.$func("minute",time.minutes.unit);u.$second=util.$func("second",time.seconds.unit);u.$utcYear=util.$func("utcYear",utc.year.unit);u.$utcMonth=util.$func("utcMonth",utc.months.unit);u.$utcDate=util.$func("utcDate",utc.dates.unit);u.$utcDay=util.$func("utcDay",utc.weekdays.unit);u.$utcHour=util.$func("utcHour",utc.hours.unit);u.$utcMinute=util.$func("utcMinute",utc.minutes.unit);u.$utcSecond=util.$func("utcSecond",utc.seconds.unit)},{"./time":409,"./util":410}],388:[function(require,module,exports){var util=require("../util"),Measures=require("./measures"),Collector=require("./collector");function Aggregator(){this._cells={};this._aggr=[];this._stream=false}var Flags=Aggregator.Flags={ADD_CELL:1,MOD_CELL:2};var proto=Aggregator.prototype;proto.stream=function(v){if(v==null)return this._stream;this._stream=!!v;this._aggr=[];return this};proto.key=function(key){if(key==null)return this._key;this._key=util.$(key);return this};proto.groupby=function(dims){this._dims=util.array(dims).map(function(d,i){d=util.isString(d)?{name:d,get:util.$(d)}:util.isFunction(d)?{name:util.name(d)||d.name||"_"+i,get:d}:d.name&&util.isFunction(d.get)?d:null;if(d==null)throw"Invalid groupby argument: "+d;return d});return this.clear()};proto.summarize=function(fields){fields=summarize_args(fields);this._count=true;var aggr=this._aggr=[],m,f,i,j,op,as,get;for(i=0;i<fields.length;++i){for(j=0,m=[],f=fields[i];j<f.ops.length;++j){op=f.ops[j];if(op!=="count")this._count=false;as=f.as&&f.as[j]||op+(f.name==="*"?"":"_"+f.name);m.push(Measures[op](as))}get=f.get&&util.$(f.get)||(f.name==="*"?util.identity:util.$(f.name));aggr.push({name:f.name,measures:Measures.create(m,this._stream,get,this._assign)})}return this.clear()};proto.count=function(){return this.summarize({"*":"count"})};proto._assign=function(object,name,value){object[name]=value};function summarize_args(fields){if(util.isArray(fields)){return fields}if(fields==null){return[]}var a=[],name,ops;for(name in fields){ops=util.array(fields[name]);a.push({name:name,ops:ops})}return a}proto.clear=function(){return this._cells={},this};proto._cellkey=function(x){var d=this._dims,n=d.length,i,k=String(d[0].get(x));for(i=1;i<n;++i){k+="|"+d[i].get(x)}return k};proto._cell=function(x){var key=this._dims.length?this._cellkey(x):"";return this._cells[key]||(this._cells[key]=this._newcell(x,key))};proto._newcell=function(x,key){var cell={num:0,tuple:this._newtuple(x,key),flag:Flags.ADD_CELL,aggs:{}};var aggr=this._aggr,i;for(i=0;i<aggr.length;++i){cell.aggs[aggr[i].name]=new aggr[i].measures(cell,cell.tuple)}if(cell.collect){cell.data=new Collector(this._key)}return cell};proto._newtuple=function(x){var dims=this._dims,t={},i,n;for(i=0,n=dims.length;i<n;++i){t[dims[i].name]=dims[i].get(x)}return this._ingest(t)};proto._ingest=util.identity;proto._add=function(x){var cell=this._cell(x),aggr=this._aggr,i;cell.num+=1;if(!this._count){if(cell.collect)cell.data.add(x);for(i=0;i<aggr.length;++i){cell.aggs[aggr[i].name].add(x)}}cell.flag|=Flags.MOD_CELL;if(this._on_add)this._on_add(x,cell)};proto._rem=function(x){var cell=this._cell(x),aggr=this._aggr,i;cell.num-=1;if(!this._count){if(cell.collect)cell.data.rem(x);for(i=0;i<aggr.length;++i){cell.aggs[aggr[i].name].rem(x)}}cell.flag|=Flags.MOD_CELL;if(this._on_rem)this._on_rem(x,cell)};proto._mod=function(curr,prev){var cell0=this._cell(prev),cell1=this._cell(curr),aggr=this._aggr,i;if(cell0!==cell1){cell0.num-=1;cell1.num+=1;if(cell0.collect)cell0.data.rem(prev);if(cell1.collect)cell1.data.add(curr)}else if(cell0.collect&&!util.isObject(curr)){cell0.data.rem(prev);cell0.data.add(curr)}for(i=0;i<aggr.length;++i){cell0.aggs[aggr[i].name].rem(prev);cell1.aggs[aggr[i].name].add(curr)}cell0.flag|=Flags.MOD_CELL;cell1.flag|=Flags.MOD_CELL;if(this._on_mod)this._on_mod(curr,prev,cell0,cell1)};proto._markMod=function(x){var cell0=this._cell(x);cell0.flag|=Flags.MOD_CELL};proto.result=function(){var result=[],aggr=this._aggr,cell,i,k;for(k in this._cells){cell=this._cells[k];if(cell.num>0){if(cell.collect){cell.data.values()}for(i=0;i<aggr.length;++i){cell.aggs[aggr[i].name].set()}result.push(cell.tuple)}else{delete this._cells[k]}cell.flag=0}this._rems=false;return result};proto.changes=function(output){var changes=output||{add:[],rem:[],mod:[]},aggr=this._aggr,cell,flag,i,k;for(k in this._cells){cell=this._cells[k];flag=cell.flag;if(cell.collect){cell.data.values()}for(i=0;i<aggr.length;++i){cell.aggs[aggr[i].name].set()}if(cell.num<=0){changes.rem.push(cell.tuple);delete this._cells[k];if(this._on_drop)this._on_drop(cell)}else{if(this._on_keep)this._on_keep(cell);if(flag&Flags.ADD_CELL){changes.add.push(cell.tuple)}else if(flag&Flags.MOD_CELL){changes.mod.push(cell.tuple)}}cell.flag=0}this._rems=false;return changes};proto.execute=function(input){return this.clear().insert(input).result()};proto.insert=function(input){this._consolidate();for(var i=0;i<input.length;++i){this._add(input[i])}return this};proto.remove=function(input){if(!this._stream){throw"Aggregator not configured for streaming removes."+" Call stream(true) prior to calling summarize."}for(var i=0;i<input.length;++i){this._rem(input[i])}this._rems=true;return this};proto._consolidate=function(){if(!this._rems)return;for(var k in this._cells){if(this._cells[k].collect){this._cells[k].data.values()}}this._rems=false};module.exports=Aggregator},{"../util":410,"./collector":389,"./measures":391}],389:[function(require,module,exports){var util=require("../util");var stats=require("../stats");var REM="__dl_rem__";function Collector(key){this._add=[];this._rem=[];this._key=key||null;this._last=null}var proto=Collector.prototype;proto.add=function(v){this._add.push(v)};proto.rem=function(v){this._rem.push(v)};proto.values=function(){this._get=null;if(this._rem.length===0)return this._add;var a=this._add,r=this._rem,k=this._key,x=Array(a.length-r.length),i,j,n,m;if(!util.isObject(r[0])){m=stats.count.map(r);for(i=0,j=0,n=a.length;i<n;++i){if(m[a[i]]>0){m[a[i]]-=1}else{x[j++]=a[i]}}}else if(k){m=util.toMap(r,k);for(i=0,j=0,n=a.length;i<n;++i){if(!m.hasOwnProperty(k(a[i]))){x[j++]=a[i]}}}else{for(i=0,n=r.length;i<n;++i){r[i][REM]=1}for(i=0,j=0,n=a.length;i<n;++i){if(!a[i][REM]){x[j++]=a[i]}}for(i=0,n=r.length;i<n;++i){delete r[i][REM]}}this._rem=[];return this._add=x};proto.extent=function(get){if(this._get!==get||!this._ext){var v=this.values(),i=stats.extent.index(v,get);this._ext=[v[i[0]],v[i[1]]];this._get=get}return this._ext};proto.argmin=function(get){return this.extent(get)[0]};proto.argmax=function(get){return this.extent(get)[1]};proto.min=function(get){var m=this.extent(get)[0];return m!=null?get(m):+Infinity};proto.max=function(get){var m=this.extent(get)[1];return m!=null?get(m):-Infinity};proto.quartile=function(get){if(this._get!==get||!this._q){this._q=stats.quartile(this.values(),get);this._get=get}return this._q};proto.q1=function(get){return this.quartile(get)[0]};proto.q2=function(get){return this.quartile(get)[1]};proto.q3=function(get){return this.quartile(get)[2]};module.exports=Collector},{"../stats":407,"../util":410}],390:[function(require,module,exports){var util=require("../util");var Aggregator=require("./aggregator");module.exports=function(){var args=[].reduce.call(arguments,function(a,x){return a.concat(util.array(x))},[]);return(new Aggregator).groupby(args).summarize({"*":"values"})}},{"../util":410,"./aggregator":388}],391:[function(require,module,exports){var util=require("../util");var types={values:measure({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:measure({name:"count",set:"cell.num"}),missing:measure({name:"missing",set:"this.missing"}),valid:measure({name:"valid",set:"this.valid"}),sum:measure({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:measure({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:measure({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:measure({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:measure({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:measure({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:measure({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:measure({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:measure({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:measure({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:measure({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:measure({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:measure({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:measure({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:measure({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:measure({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:measure({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5})};function measure(base){return function(out){var m=util.extend({init:"",add:"",rem:"",idx:0},base);m.out=out||base.name;return m}}function resolve(agg,stream){function collect(m,a){function helper(r){if(!m[r])collect(m,m[r]=types[r]())}if(a.req)a.req.forEach(helper);if(stream&&a.str)a.str.forEach(helper);return m}var map=agg.reduce(collect,agg.reduce(function(m,a){return m[a.name]=a,m},{}));return util.vals(map).sort(function(a,b){return a.idx-b.idx})}function create(agg,stream,accessor,mutator){var all=resolve(agg,stream),ctr="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",add="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",rem="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",set="var t = this.tuple; var cell = this.cell;";all.forEach(function(a){if(a.idx<0){ctr=a.init+ctr;add=a.add+add;rem=a.rem+rem}else{ctr+=a.init;add+=a.add;rem+=a.rem}});agg.slice().sort(function(a,b){return a.idx-b.idx}).forEach(function(a){set+="this.assign(t,'"+a.out+"',"+a.set+");"});set+="return t;";ctr=Function("cell","t",ctr);ctr.prototype.assign=mutator;ctr.prototype.add=Function("t","var v = this.get(t);"+add);ctr.prototype.rem=Function("t","var v = this.get(t);"+rem);ctr.prototype.set=Function(set);ctr.prototype.get=accessor;ctr.prototype.distinct=require("../stats").count.distinct;ctr.prototype.isValid=util.isValid;ctr.fields=agg.map(util.$("out"));return ctr}types.create=create;module.exports=types},{"../stats":407,"../util":410}],392:[function(require,module,exports){var util=require("../util"),time=require("../time"),EPSILON=1e-15;function bins(opt){if(!opt){throw Error("Missing binning options.")}var maxb=opt.maxbins||15,base=opt.base||10,logb=Math.log(base),div=opt.div||[5,2],min=opt.min,max=opt.max,span=max-min,step,level,minstep,precision,v,i,eps;if(opt.step){step=opt.step}else if(opt.steps){step=opt.steps[Math.min(opt.steps.length-1,bisect(opt.steps,span/maxb,0,opt.steps.length))]}else{level=Math.ceil(Math.log(maxb)/logb);minstep=opt.minstep||0;step=Math.max(minstep,Math.pow(base,Math.round(Math.log(span)/logb)-level));while(Math.ceil(span/step)>maxb){step*=base}for(i=0;i<div.length;++i){v=step/div[i];if(v>=minstep&&span/v<=maxb)step=v}}v=Math.log(step);precision=v>=0?0:~~(-v/logb)+1;eps=Math.pow(base,-precision-1);min=Math.min(min,Math.floor(min/step+eps)*step);max=Math.ceil(max/step)*step;return{start:min,stop:max,step:step,unit:{precision:precision},value:value,index:index}}function bisect(a,x,lo,hi){while(lo<hi){var mid=lo+hi>>>1;if(util.cmp(a[mid],x)<0){lo=mid+1}else{hi=mid}}return lo}function value(v){return this.step*Math.floor(v/this.step+EPSILON)}function index(v){return Math.floor((v-this.start)/this.step+EPSILON)}function date_value(v){return this.unit.date(value.call(this,v))}function date_index(v){return index.call(this,this.unit.unit(v))}bins.date=function(opt){if(!opt){throw Error("Missing date binning options.")}var units=opt.utc?time.utc:time,dmin=opt.min,dmax=opt.max,maxb=opt.maxbins||20,minb=opt.minbins||4,span=+dmax-+dmin,unit=opt.unit?units[opt.unit]:units.find(span,minb,maxb),spec=bins({min:unit.min!=null?unit.min:unit.unit(dmin),max:unit.max!=null?unit.max:unit.unit(dmax),maxbins:maxb,minstep:unit.minstep,steps:unit.step});spec.unit=unit;spec.index=date_index;if(!opt.raw)spec.value=date_value;return spec};module.exports=bins},{"../time":409,"../util":410}],393:[function(require,module,exports){var bins=require("./bins"),gen=require("../generate"),type=require("../import/type"),util=require("../util"),stats=require("../stats");var qtype={integer:1,number:1,date:1};function $bin(values,f,opt){opt=options(values,f,opt);var b=spec(opt);return!b?opt.accessor||util.identity:util.$func("bin",b.unit.unit?function(x){return b.value(b.unit.unit(x))}:function(x){return b.value(x)})(opt.accessor)}function histogram(values,f,opt){opt=options(values,f,opt);var b=spec(opt);return b?numerical(values,opt.accessor,b):categorical(values,opt.accessor,opt&&opt.sort)}function spec(opt){var t=opt.type,b=null;if(t==null||qtype[t]){if(t==="integer"&&opt.minstep==null)opt.minstep=1;b=t==="date"?bins.date(opt):bins(opt)}return b}function options(){var a=arguments,i=0,values=util.isArray(a[i])?a[i++]:null,f=util.isFunction(a[i])||util.isString(a[i])?util.$(a[i++]):null,opt=util.extend({},a[i]);if(values){opt.type=opt.type||type(values,f);if(qtype[opt.type]){var ext=stats.extent(values,f);opt=util.extend({min:ext[0],max:ext[1]},opt)}}if(f){opt.accessor=f}return opt}function numerical(values,f,b){var h=gen.range(b.start,b.stop+b.step/2,b.step).map(function(v){return{value:b.value(v),count:0}});for(var i=0,v,j;i<values.length;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){j=b.index(v);if(j<0||j>=h.length||!isFinite(j))continue;h[j].count+=1}}h.bins=b;return h}function categorical(values,f,sort){var u=stats.unique(values,f),c=stats.count.map(values,f);return u.map(function(k){return{value:k,count:c[k]}}).sort(util.comparator(sort?"-count":"+value"))}module.exports={$bin:$bin,histogram:histogram}},{"../generate":396,"../import/type":405,"../stats":407,"../util":410,"./bins":392}],394:[function(require,module,exports){var util=require("./util"),type=require("./import/type"),stats=require("./stats"),template=require("./template");module.exports={table:formatTable,summary:formatSummary};var FMT={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'};var POS={number:"left",integer:"left"};function formatTable(data,opt){opt=util.extend({separator:" ",minwidth:8,maxwidth:15},opt);var fields=opt.fields||util.keys(data[0]),types=type.all(data);if(opt.start||opt.limit){var a=opt.start||0,b=opt.limit?a+opt.limit:data.length;data=data.slice(a,b)}var lens=fields.map(function(name){var format=FMT[types[name]]||"",t=template("{{"+name+format+"}}"),l=stats.max(data,function(x){return t(x).length});l=Math.max(Math.min(name.length,opt.minwidth),l);return opt.maxwidth>0?Math.min(l,opt.maxwidth):l});var head=fields.map(function(name,i){return util.truncate(util.pad(name,lens[i],"center"),lens[i])}).join(opt.separator);var tmpl=template(fields.map(function(name,i){return"{{"+name+(FMT[types[name]]||"")+("|pad:"+lens[i]+","+(POS[types[name]]||"right"))+("|truncate:"+lens[i])+"}}"}).join(opt.separator));return head+"\n"+data.map(tmpl).join("\n")}function formatSummary(s){s=s?s.__summary__?s:stats.summary(s):this;var str=[],i,n;for(i=0,n=s.length;i<n;++i){str.push("-- "+s[i].field+" --");if(s[i].type==="string"||s[i].distinct<10){str.push(printCategoricalProfile(s[i]))}else{str.push(printQuantitativeProfile(s[i]))}str.push("")}return str.join("\n")}function printQuantitativeProfile(p){return["valid:    "+p.valid,"missing:  "+p.missing,"distinct: "+p.distinct,"min:      "+p.min,"max:      "+p.max,"median:   "+p.median,"mean:     "+p.mean,"stdev:    "+p.stdev,"modeskew: "+p.modeskew].join("\n")}function printCategoricalProfile(p){var list=["valid:    "+p.valid,"missing:  "+p.missing,"distinct: "+p.distinct,"top values: "];var u=p.unique;var top=util.keys(u).sort(function(a,b){return u[b]-u[a]}).slice(0,6).map(function(v){return" '"+v+"' ("+u[v]+")"});return list.concat(top).join("\n")}},{"./import/type":405,"./stats":407,"./template":408,"./util":410}],395:[function(require,module,exports){var util=require("./util"),d3_time=require("d3-time"),d3_timeF=require("d3-time-format"),d3_numberF=require("d3-format"),numberF=d3_numberF,timeF=d3_timeF,tmpDate=new Date(2e3,0,1),monthFull,monthAbbr,dayFull,dayAbbr;module.exports={numberLocale:numberLocale,number:function(f){return numberF.format(f)},numberPrefix:function(f,v){return numberF.formatPrefix(f,v)},timeLocale:timeLocale,time:function(f){return timeF.format(f)},utc:function(f){return timeF.utcFormat(f)},locale:function(l){numberLocale(l);timeLocale(l)},auto:{number:autoNumberFormat,linear:linearNumberFormat,time:function(){return timeAutoFormat()},utc:function(){return utcAutoFormat()}},month:monthFormat,day:dayFormat,quarter:quarterFormat,utcQuarter:utcQuarterFormat};function localeRef(l){return l.length>4&&"locale"+(l[0].toUpperCase()+l[1].toLowerCase()+l[3].toUpperCase()+l[4].toLowerCase())}function numberLocale(l){var f=util.isString(l)?d3_numberF[localeRef(l)]:d3_numberF.locale(l);if(f==null)throw Error("Unrecognized locale: "+l);numberF=f}function timeLocale(l){var f=util.isString(l)?d3_timeF[localeRef(l)]:d3_timeF.locale(l);if(f==null)throw Error("Unrecognized locale: "+l);timeF=f;monthFull=monthAbbr=dayFull=dayAbbr=null}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function linearRange(domain,count){if(!domain.length)domain=[0];if(count==null)count=10;var start=domain[0],stop=domain[domain.length-1];if(stop<start){error=stop;stop=start;start=error}var span=stop-start||(count=1,start||stop||1),step=Math.pow(10,Math.floor(Math.log(span/count)/Math.LN10)),error=span/count/step;if(error>=e10)step*=10;else if(error>=e5)step*=5;else if(error>=e2)step*=2;return[Math.ceil(start/step)*step,Math.floor(stop/step)*step+step/2,step]}function trimZero(f,decimal){return function(x){var s=f(x),n=s.indexOf(decimal);if(n<0)return s;var idx=rightmostDigit(s,n),end=idx<s.length?s.slice(idx):"";while(--idx>n){if(s[idx]!=="0"){++idx;break}}return s.slice(0,idx)+end}}function rightmostDigit(s,n){var i=s.lastIndexOf("e"),c;if(i>0)return i;for(i=s.length;--i>n;){c=s.charCodeAt(i);if(c>=48&&c<=57)return i+1}}function autoNumberFormat(f){var decimal=numberF.format(".1f")(1)[1];if(f==null)f=",";f=d3_numberF.formatSpecifier(f);if(f.precision==null)f.precision=12;switch(f.type){case"%":f.precision-=2;break;case"e":f.precision-=1;break}return trimZero(numberF.format(f),decimal)}function linearNumberFormat(domain,count,f){var range=linearRange(domain,count);if(f==null)f=",f";switch(f=d3_numberF.formatSpecifier(f),f.type){case"s":{var value=Math.max(Math.abs(range[0]),Math.abs(range[1]));if(f.precision==null)f.precision=d3_numberF.precisionPrefix(range[2],value);return numberF.formatPrefix(f,value)}case"":case"e":case"g":case"p":case"r":{if(f.precision==null)f.precision=d3_numberF.precisionRound(range[2],Math.max(Math.abs(range[0]),Math.abs(range[1])))-(f.type==="e");break}case"f":case"%":{if(f.precision==null)f.precision=d3_numberF.precisionFixed(range[2])-2*(f.type==="%");break}}return numberF.format(f)}function timeAutoFormat(){var f=timeF.format,formatMillisecond=f(".%L"),formatSecond=f(":%S"),formatMinute=f("%I:%M"),formatHour=f("%I %p"),formatDay=f("%a %d"),formatWeek=f("%b %d"),formatMonth=f("%B"),formatYear=f("%Y");return function(date){var d=+date;return(d3_time.second(date)<d?formatMillisecond:d3_time.minute(date)<d?formatSecond:d3_time.hour(date)<d?formatMinute:d3_time.day(date)<d?formatHour:d3_time.month(date)<d?d3_time.week(date)<d?formatDay:formatWeek:d3_time.year(date)<d?formatMonth:formatYear)(date)}}function utcAutoFormat(){var f=timeF.utcFormat,formatMillisecond=f(".%L"),formatSecond=f(":%S"),formatMinute=f("%I:%M"),formatHour=f("%I %p"),formatDay=f("%a %d"),formatWeek=f("%b %d"),formatMonth=f("%B"),formatYear=f("%Y");return function(date){var d=+date;return(d3_time.utcSecond(date)<d?formatMillisecond:d3_time.utcMinute(date)<d?formatSecond:d3_time.utcHour(date)<d?formatMinute:d3_time.utcDay(date)<d?formatHour:d3_time.utcMonth(date)<d?d3_time.utcWeek(date)<d?formatDay:formatWeek:d3_time.utcYear(date)<d?formatMonth:formatYear)(date)}}function monthFormat(month,abbreviate){var f=abbreviate?monthAbbr||(monthAbbr=timeF.format("%b")):monthFull||(monthFull=timeF.format("%B"));return tmpDate.setMonth(month),f(tmpDate)}function dayFormat(day,abbreviate){var f=abbreviate?dayAbbr||(dayAbbr=timeF.format("%a")):dayFull||(dayFull=timeF.format("%A"));return tmpDate.setMonth(0),tmpDate.setDate(2+day),f(tmpDate)}function quarterFormat(date){return Math.floor(date.getMonth()/3)+1}function utcQuarterFormat(date){return Math.floor(date.getUTCMonth()/3)+1}},{"./util":410,"d3-format":382,"d3-time":384,"d3-time-format":383}],396:[function(require,module,exports){var util=require("./util"),gen=module.exports;gen.repeat=function(val,n){var a=Array(n),i;for(i=0;i<n;++i)a[i]=val;return a};gen.zeros=function(n){return gen.repeat(0,n)};gen.range=function(start,stop,step){if(arguments.length<3){step=1;if(arguments.length<2){stop=start;start=0}}if((stop-start)/step==Infinity)throw new Error("Infinite range");var range=[],i=-1,j;if(step<0)while((j=start+step*++i)>stop)range.push(j);else while((j=start+step*++i)<stop)range.push(j);return range};gen.random={};gen.random.uniform=function(min,max){if(max===undefined){max=min===undefined?1:min;min=0}var d=max-min;var f=function(){return min+d*Math.random()};f.samples=function(n){return gen.zeros(n).map(f)};f.pdf=function(x){return x>=min&&x<=max?1/d:0};f.cdf=function(x){return x<min?0:x>max?1:(x-min)/d};f.icdf=function(p){return p>=0&&p<=1?min+p*d:NaN};return f};gen.random.integer=function(a,b){if(b===undefined){b=a;a=0}var d=b-a;var f=function(){return a+Math.floor(d*Math.random())};f.samples=function(n){return gen.zeros(n).map(f)};f.pdf=function(x){return x===Math.floor(x)&&x>=a&&x<b?1/d:0};f.cdf=function(x){var v=Math.floor(x);return v<a?0:v>=b?1:(v-a+1)/d};f.icdf=function(p){return p>=0&&p<=1?a-1+Math.floor(p*d):NaN};return f};gen.random.normal=function(mean,stdev){mean=mean||0;stdev=stdev||1;var next;var f=function(){var x=0,y=0,rds,c;if(next!==undefined){x=next;next=undefined;return x}do{x=Math.random()*2-1;y=Math.random()*2-1;rds=x*x+y*y}while(rds===0||rds>1);c=Math.sqrt(-2*Math.log(rds)/rds);next=mean+y*c*stdev;return mean+x*c*stdev};f.samples=function(n){return gen.zeros(n).map(f)};f.pdf=function(x){var exp=Math.exp(Math.pow(x-mean,2)/(-2*Math.pow(stdev,2)));return 1/(stdev*Math.sqrt(2*Math.PI))*exp};f.cdf=function(x){var cd,z=(x-mean)/stdev,Z=Math.abs(z);if(Z>37){cd=0}else{var sum,exp=Math.exp(-Z*Z/2);if(Z<7.07106781186547){sum=.0352624965998911*Z+.700383064443688;sum=sum*Z+6.37396220353165;sum=sum*Z+33.912866078383;sum=sum*Z+112.079291497871;sum=sum*Z+221.213596169931;sum=sum*Z+220.206867912376;cd=exp*sum;sum=.0883883476483184*Z+1.75566716318264;sum=sum*Z+16.064177579207;sum=sum*Z+86.7807322029461;sum=sum*Z+296.564248779674;sum=sum*Z+637.333633378831;sum=sum*Z+793.826512519948;sum=sum*Z+440.413735824752;cd=cd/sum}else{sum=Z+.65;sum=Z+4/sum;sum=Z+3/sum;sum=Z+2/sum;sum=Z+1/sum;cd=exp/sum/2.506628274631}}return z>0?1-cd:cd};f.icdf=function(p){if(p<=0||p>=1)return NaN;var x=2*p-1,v=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*v)+Math.log(1-Math.pow(x,2))/2,b=Math.log(1-x*x)/v,s=(x>0?1:-1)*Math.sqrt(Math.sqrt(a*a-b)-a);return mean+stdev*Math.SQRT2*s};return f};gen.random.bootstrap=function(domain,smooth){var val=domain.filter(util.isValid),len=val.length,err=smooth?gen.random.normal(0,smooth):null;var f=function(){return val[~~(Math.random()*len)]+(err?err():0)};f.samples=function(n){return gen.zeros(n).map(f)};return f}},{"./util":410}],397:[function(require,module,exports){var util=require("../../util");var d3_dsv=require("d3-dsv");function dsv(data,format){if(data){var h=format.header;data=(h?h.join(format.delimiter)+"\n":"")+data}return d3_dsv.dsv(format.delimiter).parse(data)}dsv.delimiter=function(delim){var fmt={delimiter:delim};return function(data,format){return dsv(data,format?util.extend(format,fmt):fmt)}};module.exports=dsv},{"../../util":410,"d3-dsv":381}],398:[function(require,module,exports){var dsv=require("./dsv");module.exports={json:require("./json"),topojson:require("./topojson"),treejson:require("./treejson"),dsv:dsv,csv:dsv.delimiter(","),tsv:dsv.delimiter("\t")}},{"./dsv":397,"./json":399,"./topojson":400,"./treejson":401}],399:[function(require,module,exports){var util=require("../../util");module.exports=function(data,format){var d=util.isObject(data)&&!util.isBuffer(data)?data:JSON.parse(data);if(format&&format.property){d=util.accessor(format.property)(d)}return d}},{"../../util":410}],400:[function(require,module,exports){var json=require("./json");var reader=function(data,format){var topojson=reader.topojson;if(topojson==null){throw Error("TopoJSON library not loaded.")}var t=json(data,format),obj;if(format&&format.feature){if(obj=t.objects[format.feature]){return topojson.feature(t,obj).features}else{throw Error("Invalid TopoJSON object: "+format.feature)}}else if(format&&format.mesh){if(obj=t.objects[format.mesh]){return[topojson.mesh(t,t.objects[format.mesh])]}else{throw Error("Invalid TopoJSON object: "+format.mesh)}}else{throw Error("Missing TopoJSON feature or mesh parameter.")}};reader.topojson=require("topojson");module.exports=reader},{"./json":399,topojson:699}],401:[function(require,module,exports){var json=require("./json");module.exports=function(tree,format){return toTable(json(tree,format),format)};function toTable(root,fields){var childrenField=fields&&fields.children||"children",parentField=fields&&fields.parent||"parent",table=[];function visit(node,parent){node[parentField]=parent;table.push(node);var children=node[childrenField];if(children){for(var i=0;i<children.length;++i){visit(children[i],node)}}}visit(root,null);return table.root=root,table}},{"./json":399}],402:[function(require,module,exports){var util=require("../util");var protocol_re=/^([A-Za-z]+:)?\/\//;var fileProtocol="file://";function sanitizeUrl(opt){var url=opt.url;if(!url&&opt.file){return fileProtocol+opt.file}if(opt.baseURL&&!protocol_re.test(url)){if(!startsWith(url,"/")&&opt.baseURL[opt.baseURL.length-1]!=="/"){url="/"+url}url=opt.baseURL+url}if(!load.useXHR&&startsWith(url,"//")){url=(opt.defaultProtocol||"http")+":"+url}if(opt.domainWhiteList){var domain,origin;if(load.useXHR){var a=document.createElement("a");a.href=url;if(a.host===""){a.href=a.href}domain=a.hostname.toLowerCase();origin=window.location.hostname}else{var parts=require("url").parse(url);domain=parts.hostname;origin=null}if(origin!==domain){var whiteListed=opt.domainWhiteList.some(function(d){var idx=domain.length-d.length;return d===domain||idx>1&&domain[idx-1]==="."&&domain.lastIndexOf(d)===idx});if(!whiteListed){throw"URL is not whitelisted: "+url}}}return url}function load(opt,callback){return load.loader(opt,callback)}function loader(opt,callback){var error=callback||function(e){throw e},url;try{url=load.sanitizeUrl(opt)}catch(err){error(err);return}if(!url){error("Invalid URL: "+opt.url)}else if(load.useXHR){return load.xhr(url,opt,callback)}else if(startsWith(url,fileProtocol)){return load.file(url.slice(fileProtocol.length),opt,callback)}else if(url.indexOf("://")<0){return load.file(url,opt,callback)}else{return load.http(url,opt,callback)}}function xhrHasResponse(request){var type=request.responseType;return type&&type!=="text"?request.response:request.responseText}function xhr(url,opt,callback){var async=!!callback;var request=new XMLHttpRequest;if(typeof XDomainRequest!=="undefined"&&!("withCredentials"in request)&&/^(http(s)?:)?\/\//.test(url))request=new XDomainRequest;function respond(){var status=request.status;if(!status&&xhrHasResponse(request)||status>=200&&status<300||status===304){callback(null,request.responseText)}else{callback(request,null)}}if(async){if("onload"in request){request.onload=request.onerror=respond}else{request.onreadystatechange=function(){if(request.readyState>3)respond()}}}request.open("GET",url,async);if(request.setRequestHeader){var headers=util.extend({},load.headers,opt.headers);for(var name in headers){request.setRequestHeader(name,headers[name])}}request.send();if(!async&&xhrHasResponse(request)){return request.responseText}}function file(filename,opt,callback){var fs=require("fs");if(!callback){return fs.readFileSync(filename,"utf8")}fs.readFile(filename,callback)}function http(url,opt,callback){var headers=util.extend({},load.headers,opt.headers);var options={url:url,encoding:null,gzip:true,headers:headers};if(!callback){return require("sync-request")("GET",url,options).getBody()}require("request")(options,function(error,response,body){if(!error&&response.statusCode===200){callback(null,body)}else{error=error||"Load failed with response code "+response.statusCode+".";callback(error,null)}})}function startsWith(string,searchString){return string==null?false:string.lastIndexOf(searchString,0)===0}load.loader=loader;load.sanitizeUrl=sanitizeUrl;load.xhr=xhr;load.file=file;load.http=http;load.useXHR=typeof XMLHttpRequest!=="undefined";load.headers={};module.exports=load},{"../util":410,fs:8,request:8,"sync-request":8,url:8}],403:[function(require,module,exports){var util=require("../util"),type=require("./type"),formats=require("./formats"),timeF=require("../format").time;function read(data,format){var type=format&&format.type||"json";data=formats[type](data,format);if(format&&format.parse)parse(data,format.parse);return data}function parse(data,types){var cols,parsers,d,i,j,clen,len=data.length;types=types==="auto"?type.inferAll(data):util.duplicate(types);cols=util.keys(types);parsers=cols.map(function(c){var t=types[c];if(t&&t.indexOf("date:")===0){var parts=t.split(/:(.+)?/,2),pattern=parts[1];if(pattern[0]==="'"&&pattern[pattern.length-1]==="'"||pattern[0]==='"'&&pattern[pattern.length-1]==='"'){pattern=pattern.slice(1,-1)}else{throw Error("Format pattern must be quoted: "+pattern)}pattern=timeF(pattern);return function(v){return pattern.parse(v)}}if(!type.parsers[t]){throw Error("Illegal format pattern: "+c+":"+t)}return type.parsers[t]});for(i=0,clen=cols.length;i<len;++i){d=data[i];for(j=0;j<clen;++j){d[cols[j]]=parsers[j](d[cols[j]])}}type.annotation(data,types)}read.formats=formats;module.exports=read},{"../format":395,"../util":410,"./formats":398,"./type":405}],404:[function(require,module,exports){var util=require("../util");var load=require("./load");var read=require("./read");module.exports=util.keys(read.formats).reduce(function(out,type){out[type]=function(opt,format,callback){if(util.isString(opt)){opt={url:opt}}if(arguments.length===2&&util.isFunction(format)){callback=format;format=undefined}format=util.extend({parse:"auto"},format);format.type=type;var data=load(opt,callback?function(error,data){if(error){callback(error,null);return}try{data=read(data,format);callback(null,data)}catch(e){callback(e,null)}}:undefined);if(!callback)return read(data,format)};return out},{})},{"../util":410,"./load":402,"./read":403}],405:[function(require,module,exports){var util=require("../util");var TYPES="__types__";var PARSERS={boolean:util.boolean,integer:util.number,number:util.number,date:util.date,string:function(x){return x==null||x===""?null:x+""}};var TESTS={boolean:function(x){return x==="true"||x==="false"||util.isBoolean(x)},integer:function(x){return TESTS.number(x)&&(x=+x)===~~x},number:function(x){return!isNaN(+x)&&!util.isDate(x)},date:function(x){return!isNaN(Date.parse(x))}};function annotation(data,types){if(!types)return data&&data[TYPES]||null;data[TYPES]=types}function fieldNames(datum){return util.keys(datum)}function bracket(fieldName){return"["+fieldName+"]"}function type(values,f){values=util.array(values);f=util.$(f);var v,i,n;if(values[TYPES]){v=f(values[TYPES]);if(util.isString(v))return v}for(i=0,n=values.length;!util.isValid(v)&&i<n;++i){v=f?f(values[i]):values[i]}return util.isDate(v)?"date":util.isNumber(v)?"number":util.isBoolean(v)?"boolean":util.isString(v)?"string":null}function typeAll(data,fields){if(!data.length)return;var get=fields?util.identity:(fields=fieldNames(data[0]),bracket);return fields.reduce(function(types,f){return types[f]=type(data,get(f)),types},{})}function infer(values,f){values=util.array(values);f=util.$(f);var i,j,v;var types=["boolean","integer","number","date"];for(i=0;i<values.length;++i){v=f?f(values[i]):values[i];for(j=0;j<types.length;++j){if(util.isValid(v)&&!TESTS[types[j]](v)){types.splice(j,1);j-=1}}if(types.length===0)return"string"}return types[0]}function inferAll(data,fields){var get=fields?util.identity:(fields=fieldNames(data[0]),bracket);return fields.reduce(function(types,f){types[f]=infer(data,get(f));return types},{})}type.annotation=annotation;type.all=typeAll;type.infer=infer;type.inferAll=inferAll;type.parsers=PARSERS;module.exports=type},{"../util":410}],406:[function(require,module,exports){var util=require("./util");var dl={version:require("../package.json").version,load:require("./import/load"),read:require("./import/read"),type:require("./import/type"),Aggregator:require("./aggregate/aggregator"),groupby:require("./aggregate/groupby"),bins:require("./bins/bins"),$bin:require("./bins/histogram").$bin,histogram:require("./bins/histogram").histogram,format:require("./format"),template:require("./template"),time:require("./time")};util.extend(dl,util);util.extend(dl,require("./accessor"));util.extend(dl,require("./generate"));util.extend(dl,require("./stats"));util.extend(dl,require("./import/readers"));util.extend(dl.format,require("./format-tables"));dl.print={table:dl.format.table,summary:dl.format.summary};module.exports=dl},{"../package.json":386,"./accessor":387,"./aggregate/aggregator":388,"./aggregate/groupby":390,"./bins/bins":392,"./bins/histogram":393,"./format":395,"./format-tables":394,"./generate":396,"./import/load":402,"./import/read":403,"./import/readers":404,"./import/type":405,"./stats":407,"./template":408,"./time":409,"./util":410}],407:[function(require,module,exports){var util=require("./util");var type=require("./import/type");var gen=require("./generate");var stats=module.exports;stats.unique=function(values,f,results){f=util.$(f);results=results||[];var u={},v,i,n;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(v in u)continue;u[v]=1;results.push(v)}return results};stats.count=function(values){return values&&values.length||0};stats.count.valid=function(values,f){f=util.$(f);var v,i,n,valid=0;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v))valid+=1}return valid};stats.count.missing=function(values,f){f=util.$(f);var v,i,n,count=0;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(v==null)count+=1}return count};stats.count.distinct=function(values,f){f=util.$(f);var u={},v,i,n,count=0;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(v in u)continue;u[v]=1;count+=1}return count};stats.count.map=function(values,f){f=util.$(f);var map={},v,i,n;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];map[v]=v in map?map[v]+1:1}return map};stats.median=function(values,f){if(f)values=values.map(util.$(f));values=values.filter(util.isValid).sort(util.cmp);return stats.quantile(values,.5)};stats.quartile=function(values,f){if(f)values=values.map(util.$(f));values=values.filter(util.isValid).sort(util.cmp);var q=stats.quantile;return[q(values,.25),q(values,.5),q(values,.75)]};stats.quantile=function(values,f,p){if(p===undefined){p=f;f=util.identity}f=util.$(f);var H=(values.length-1)*p+1,h=Math.floor(H),v=+f(values[h-1]),e=H-h;return e?v+e*(f(values[h])-v):v};stats.sum=function(values,f){f=util.$(f);for(var sum=0,i=0,n=values.length,v;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v))sum+=v}return sum};stats.mean=function(values,f){f=util.$(f);var mean=0,delta,i,n,c,v;for(i=0,c=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){delta=v-mean;mean=mean+delta/++c}}return mean};stats.mean.geometric=function(values,f){f=util.$(f);var mean=1,c,n,v,i;for(i=0,c=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){if(v<=0){throw Error("Geometric mean only defined for positive values.")}mean*=v;++c}}mean=c>0?Math.pow(mean,1/c):0;return mean};stats.mean.harmonic=function(values,f){f=util.$(f);var mean=0,c,n,v,i;for(i=0,c=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){mean+=1/v;++c}}return c/mean};stats.variance=function(values,f){f=util.$(f);if(!util.isArray(values)||values.length<2)return 0;var mean=0,M2=0,delta,i,c,v;for(i=0,c=0;i<values.length;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){delta=v-mean;mean=mean+delta/++c;M2=M2+delta*(v-mean)}}M2=M2/(c-1);return M2};stats.stdev=function(values,f){return Math.sqrt(stats.variance(values,f))};stats.modeskew=function(values,f){var avg=stats.mean(values,f),med=stats.median(values,f),std=stats.stdev(values,f);return std===0?0:(avg-med)/std};stats.min=function(values,f){return stats.extent(values,f)[0]};stats.max=function(values,f){return stats.extent(values,f)[1]};stats.extent=function(values,f){f=util.$(f);var a,b,v,i,n=values.length;for(i=0;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){a=b=v;break}}for(;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){if(v<a)a=v;if(v>b)b=v}}return[a,b]};stats.extent.index=function(values,f){f=util.$(f);var x=-1,y=-1,a,b,v,i,n=values.length;for(i=0;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){a=b=v;x=y=i;break}}for(;i<n;++i){v=f?f(values[i]):values[i];if(util.isValid(v)){if(v<a){a=v;x=i}if(v>b){b=v;y=i}}}return[x,y]};stats.dot=function(values,a,b){var sum=0,i,v;if(!b){if(values.length!==a.length){throw Error("Array lengths must match.")}for(i=0;i<values.length;++i){v=values[i]*a[i];if(v===v)sum+=v}}else{a=util.$(a);b=util.$(b);for(i=0;i<values.length;++i){v=a(values[i])*b(values[i]);if(v===v)sum+=v}}return sum};stats.dist=function(values,a,b,exp){var f=util.isFunction(b)||util.isString(b),X=values,Y=f?values:a,e=f?exp:b,L2=e===2||e==null,n=values.length,s=0,d,i;if(f){a=util.$(a);b=util.$(b)}for(i=0;i<n;++i){d=f?a(X[i])-b(Y[i]):X[i]-Y[i];s+=L2?d*d:Math.pow(Math.abs(d),e)}return L2?Math.sqrt(s):Math.pow(s,1/e)};stats.cohensd=function(values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a,x1=stats.mean(X),x2=stats.mean(Y),n1=stats.count.valid(X),n2=stats.count.valid(Y);if(n1+n2-2<=0){return 0}var s1=stats.variance(X),s2=stats.variance(Y),s=Math.sqrt(((n1-1)*s1+(n2-1)*s2)/(n1+n2-2));return s===0?0:(x1-x2)/s};stats.covariance=function(values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a,n=X.length,xm=stats.mean(X),ym=stats.mean(Y),sum=0,c=0,i,x,y,vx,vy;if(n!==Y.length){throw Error("Input lengths must match.")}for(i=0;i<n;++i){x=X[i];vx=util.isValid(x);y=Y[i];vy=util.isValid(y);if(vx&&vy){sum+=(x-xm)*(y-ym);++c}else if(vx||vy){throw Error("Valid values must align.")}}return sum/(c-1)};stats.rank=function(values,f){f=util.$(f)||util.identity;var a=values.map(function(v,i){return{idx:i,val:f(v)}}).sort(util.comparator("val"));var n=values.length,r=Array(n),tie=-1,p={},i,v,mu;for(i=0;i<n;++i){v=a[i].val;if(tie<0&&p===v){tie=i-1}else if(tie>-1&&p!==v){mu=1+(i-1+tie)/2;for(;tie<i;++tie)r[a[tie].idx]=mu;tie=-1}r[a[i].idx]=i+1;p=v}if(tie>-1){mu=1+(n-1+tie)/2;for(;tie<n;++tie)r[a[tie].idx]=mu}return r};stats.cor=function(values,a,b){var fn=b;b=fn?values.map(util.$(b)):a;a=fn?values.map(util.$(a)):values;var dot=stats.dot(a,b),mua=stats.mean(a),mub=stats.mean(b),sda=stats.stdev(a),sdb=stats.stdev(b),n=values.length;return(dot-n*mua*mub)/((n-1)*sda*sdb)};stats.cor.rank=function(values,a,b){var ra=b?stats.rank(values,a):stats.rank(values),rb=b?stats.rank(values,b):stats.rank(a),n=values.length,i,s,d;for(i=0,s=0;i<n;++i){d=ra[i]-rb[i];s+=d*d}return 1-6*s/(n*(n*n-1))};stats.cor.dist=function(values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a;var A=stats.dist.mat(X),B=stats.dist.mat(Y),n=A.length,i,aa,bb,ab;for(i=0,aa=0,bb=0,ab=0;i<n;++i){aa+=A[i]*A[i];bb+=B[i]*B[i];ab+=A[i]*B[i]}return Math.sqrt(ab/Math.sqrt(aa*bb))};stats.linearRegression=function(values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a,n=X.length,xy=stats.covariance(X,Y),sx=stats.stdev(X),sy=stats.stdev(Y),slope=xy/(sx*sx),icept=stats.mean(Y)-slope*stats.mean(X),fit={slope:slope,intercept:icept,R:xy/(sx*sy),rss:0},res,i;for(i=0;i<n;++i){if(util.isValid(X[i])&&util.isValid(Y[i])){res=slope*X[i]+icept-Y[i];fit.rss+=res*res}}return fit};stats.bootstrap={};stats.bootstrap.ci=function(values,a,b,c,d){var X,N,alpha,smooth,bs,means,i;if(util.isFunction(a)||util.isString(a)){X=values.map(util.$(a));N=b;alpha=c;smooth=d}else{X=values;N=a;alpha=b;smooth=c}N=N?+N:1e3;alpha=alpha||.05;bs=gen.random.bootstrap(X,smooth);for(i=0,means=Array(N);i<N;++i){means[i]=stats.mean(bs.samples(X.length))}means.sort(util.numcmp);return[stats.quantile(means,alpha/2),stats.quantile(means,1-alpha/2)]};stats.z={};stats.z.ci=function(values,a,b){var X=values,alpha=a;if(util.isFunction(a)||util.isString(a)){X=values.map(util.$(a));alpha=b}alpha=alpha||.05;var z=alpha===.05?1.96:gen.random.normal(0,1).icdf(1-alpha/2),mu=stats.mean(X),SE=stats.stdev(X)/Math.sqrt(stats.count.valid(X));return[mu-z*SE,mu+z*SE]};stats.z.test=function(values,a,b,opt){if(util.isFunction(b)||util.isString(b)){return(opt&&opt.paired?ztestP:ztest2)(opt,values,a,b)}else if(util.isArray(a)){return(b&&b.paired?ztestP:ztest2)(b,values,a)}else if(util.isFunction(a)||util.isString(a)){return ztest1(b,values,a)}else{return ztest1(a,values)}};function ztest1(opt,X,f){var nullH=opt&&opt.nullh||0,gaussian=gen.random.normal(0,1),mu=stats.mean(X,f),SE=stats.stdev(X,f)/Math.sqrt(stats.count.valid(X,f));if(SE===0){return mu-nullH===0?1:0}var z=(mu-nullH)/SE;return 2*gaussian.cdf(-Math.abs(z))}function ztestP(opt,values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a,n1=stats.count(X),n2=stats.count(Y),diffs=Array(),i;if(n1!==n2){throw Error("Array lengths must match.")}for(i=0;i<n1;++i){if(util.isValid(X[i])&&util.isValid(Y[i])){diffs.push(X[i]-Y[i])}}return stats.z.test(diffs,opt&&opt.nullh||0)}function ztest2(opt,values,a,b){var X=b?values.map(util.$(a)):values,Y=b?values.map(util.$(b)):a,n1=stats.count.valid(X),n2=stats.count.valid(Y),gaussian=gen.random.normal(0,1),meanDiff=stats.mean(X)-stats.mean(Y)-(opt&&opt.nullh||0),SE=Math.sqrt(stats.variance(X)/n1+stats.variance(Y)/n2);if(SE===0){return meanDiff===0?1:0}var z=meanDiff/SE;return 2*gaussian.cdf(-Math.abs(z))}stats.dist.mat=function(X){var n=X.length,m=n*n,A=Array(m),R=gen.zeros(n),M=0,v,i,j;for(i=0;i<n;++i){A[i*n+i]=0;for(j=i+1;j<n;++j){A[i*n+j]=v=Math.abs(X[i]-X[j]);A[j*n+i]=v;R[i]+=v;R[j]+=v}}for(i=0;i<n;++i){M+=R[i];R[i]/=n}M/=m;for(i=0;i<n;++i){for(j=i;j<n;++j){A[i*n+j]+=M-R[i]-R[j];A[j*n+i]=A[i*n+j]}}return A};stats.entropy=function(counts,f){f=util.$(f);var i,p,s=0,H=0,n=counts.length;for(i=0;i<n;++i){s+=f?f(counts[i]):counts[i]}if(s===0)return 0;for(i=0;i<n;++i){p=(f?f(counts[i]):counts[i])/s;if(p)H+=p*Math.log(p)}return-H/Math.LN2};stats.mutual=function(values,a,b,counts){var x=counts?values.map(util.$(a)):values,y=counts?values.map(util.$(b)):a,z=counts?values.map(util.$(counts)):b;var px={},py={},n=z.length,s=0,I=0,H=0,p,t,i;for(i=0;i<n;++i){px[x[i]]=0;py[y[i]]=0}for(i=0;i<n;++i){px[x[i]]+=z[i];py[y[i]]+=z[i];s+=z[i]}t=1/(s*Math.LN2);for(i=0;i<n;++i){if(z[i]===0)continue;p=s*z[i]/(px[x[i]]*py[y[i]]);I+=z[i]*t*Math.log(p);H+=z[i]*t*Math.log(z[i]/s)}return[I,1+I/H]};stats.mutual.info=function(values,a,b,counts){return stats.mutual(values,a,b,counts)[0]};stats.mutual.dist=function(values,a,b,counts){return stats.mutual(values,a,b,counts)[1]};stats.profile=function(values,f){var mean=0,valid=0,missing=0,distinct=0,min=null,max=null,M2=0,vals=[],u={},delta,sd,i,v,x;for(i=0;i<values.length;++i){v=f?f(values[i]):values[i];u[v]=v in u?u[v]+1:(distinct+=1,1);if(v==null){++missing}else if(util.isValid(v)){x=typeof v==="string"?v.length:v;if(min===null||x<min)min=x;if(max===null||x>max)max=x;delta=x-mean;mean=mean+delta/++valid;M2=M2+delta*(x-mean);vals.push(x)}}M2=M2/(valid-1);sd=Math.sqrt(M2);vals.sort(util.cmp);return{type:type(values,f),unique:u,count:values.length,valid:valid,missing:missing,distinct:distinct,min:min,max:max,mean:mean,stdev:sd,median:v=stats.quantile(vals,.5),q1:stats.quantile(vals,.25),q3:stats.quantile(vals,.75),modeskew:sd===0?0:(mean-v)/sd}};stats.summary=function(data,fields){fields=fields||util.keys(data[0]);var s=fields.map(function(f){var p=stats.profile(data,util.$(f));return p.field=f,p});return s.__summary__=true,s}},{"./generate":396,"./import/type":405,"./util":410}],408:[function(require,module,exports){var util=require("./util"),format=require("./format");var context={formats:[],format_map:{},truncate:util.truncate,pad:util.pad,day:format.day,month:format.month,quarter:format.quarter,utcQuarter:format.utcQuarter};function template(text){var src=source(text,"d");src="var __t; return "+src+";";return new Function("d",src).bind(context)}template.source=source;template.context=context;template.format=get_format;module.exports=template;template.clearFormatCache=function(){context.formats=[];context.format_map={}};template.property=function(object,property){var src=util.field(property).map(util.str).join("][");return object+"["+src+"]"};function source(text,variable,properties){variable=variable||"obj";var index=0;var src="'";var regex=template_re;text.replace(regex,function(match,interpolate,offset){src+=text.slice(index,offset).replace(template_escaper,template_escapeChar);index=offset+match.length;if(interpolate){src+="'\n+((__t=("+template_var(interpolate,variable,properties)+"))==null?'':__t)+\n'"}return match});return src+"'"}function template_var(text,variable,properties){var filters=text.match(filter_re);var prop=filters.shift().trim();var stringCast=true;function strcall(fn){fn=fn||"";if(stringCast){stringCast=false;src="String("+src+")"+fn}else{src+=fn}return src}function date(){return"(typeof "+src+'==="number"?new Date('+src+"):"+src+")"}function formatter(type){var pattern=args[0];if(pattern[0]==="'"&&pattern[pattern.length-1]==="'"||pattern[0]==='"'&&pattern[pattern.length-1]==='"'){pattern=pattern.slice(1,-1)}else{throw Error("Format pattern must be quoted: "+pattern)}a=template_format(pattern,type);stringCast=false;var arg=type==="number"?src:date();src="this.formats["+a+"]("+arg+")"}if(properties)properties[prop]=1;var src=template.property(variable,prop);for(var i=0;i<filters.length;++i){var f=filters[i],args=null,pidx,a,b;if((pidx=f.indexOf(":"))>0){f=f.slice(0,pidx);args=filters[i].slice(pidx+1).match(args_re).map(function(s){return s.trim()})}f=f.trim();switch(f){case"length":strcall(".length");break;case"lower":strcall(".toLowerCase()");break;case"upper":strcall(".toUpperCase()");break;case"lower-locale":strcall(".toLocaleLowerCase()");break;case"upper-locale":strcall(".toLocaleUpperCase()");break;case"trim":strcall(".trim()");break;case"left":a=util.number(args[0]);strcall(".slice(0,"+a+")");break;case"right":a=util.number(args[0]);strcall(".slice(-"+a+")");break;case"mid":a=util.number(args[0]);b=a+util.number(args[1]);strcall(".slice(+"+a+","+b+")");break;case"slice":a=util.number(args[0]);strcall(".slice("+a+(args.length>1?","+util.number(args[1]):"")+")");break;case"truncate":a=util.number(args[0]);b=args[1];b=b!=="left"&&b!=="middle"&&b!=="center"?"right":b;src="this.truncate("+strcall()+","+a+",'"+b+"')";break;case"pad":a=util.number(args[0]);b=args[1];b=b!=="left"&&b!=="middle"&&b!=="center"?"right":b;src="this.pad("+strcall()+","+a+",'"+b+"')";break;case"number":formatter("number");break;case"time":formatter("time");break;case"time-utc":formatter("utc");break;case"month":src="this.month("+src+")";break;case"month-abbrev":src="this.month("+src+",true)";break;case"day":src="this.day("+src+")";break;case"day-abbrev":src="this.day("+src+",true)";break;case"quarter":src="this.quarter("+src+")";break;case"quarter-utc":src="this.utcQuarter("+src+")";break;default:throw Error("Unrecognized template filter: "+f)}}return src}var template_re=/\{\{(.+?)\}\}|$/g,filter_re=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,args_re=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g;var template_escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var template_escaper=/\\|'|\r|\n|\u2028|\u2029/g;function template_escapeChar(match){return"\\"+template_escapes[match]}function template_format(pattern,type){var key=type+":"+pattern;if(context.format_map[key]==null){var f=format[type](pattern);var i=context.formats.length;context.formats.push(f);context.format_map[key]=i;return i}return context.format_map[key]}function get_format(pattern,type){return context.formats[template_format(pattern,type)]}},{"./format":395,"./util":410}],409:[function(require,module,exports){var d3_time=require("d3-time");var tempDate=new Date,baseDate=new Date(0,0,1).setFullYear(0),utcBaseDate=new Date(Date.UTC(0,0,1)).setUTCFullYear(0);function date(d){return tempDate.setTime(+d),tempDate}function entry(type,date,unit,step,min,max){var e={type:type,date:date,unit:unit};if(step){e.step=step}else{e.minstep=1}if(min!=null)e.min=min;if(max!=null)e.max=max;return e}function create(type,unit,base,step,min,max){return entry(type,function(d){return unit.offset(base,d)},function(d){return unit.count(base,d)},step,min,max)}var locale=[create("second",d3_time.second,baseDate),create("minute",d3_time.minute,baseDate),create("hour",d3_time.hour,baseDate),create("day",d3_time.day,baseDate,[1,7]),create("month",d3_time.month,baseDate,[1,3,6]),create("year",d3_time.year,baseDate),entry("seconds",function(d){return new Date(1970,0,1,0,0,d)},function(d){return date(d).getSeconds()},null,0,59),entry("minutes",function(d){return new Date(1970,0,1,0,d)},function(d){return date(d).getMinutes()},null,0,59),entry("hours",function(d){return new Date(1970,0,1,d)},function(d){return date(d).getHours()},null,0,23),entry("weekdays",function(d){return new Date(1970,0,4+d)},function(d){return date(d).getDay()},[1],0,6),entry("dates",function(d){return new Date(1970,0,d)},function(d){return date(d).getDate()},[1],1,31),entry("months",function(d){return new Date(1970,d%12,1)},function(d){return date(d).getMonth()},[1],0,11)];var utc=[create("second",d3_time.utcSecond,utcBaseDate),create("minute",d3_time.utcMinute,utcBaseDate),create("hour",d3_time.utcHour,utcBaseDate),create("day",d3_time.utcDay,utcBaseDate,[1,7]),create("month",d3_time.utcMonth,utcBaseDate,[1,3,6]),create("year",d3_time.utcYear,utcBaseDate),entry("seconds",function(d){return new Date(Date.UTC(1970,0,1,0,0,d))},function(d){return date(d).getUTCSeconds()},null,0,59),entry("minutes",function(d){return new Date(Date.UTC(1970,0,1,0,d))},function(d){return date(d).getUTCMinutes()},null,0,59),entry("hours",function(d){return new Date(Date.UTC(1970,0,1,d))},function(d){return date(d).getUTCHours()},null,0,23),entry("weekdays",function(d){return new Date(Date.UTC(1970,0,4+d))},function(d){return date(d).getUTCDay()},[1],0,6),entry("dates",function(d){return new Date(Date.UTC(1970,0,d))},function(d){return date(d).getUTCDate()},[1],1,31),entry("months",function(d){return new Date(Date.UTC(1970,d%12,1))},function(d){return date(d).getUTCMonth()},[1],0,11)];var STEPS=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];function find(units,span,minb,maxb){var step=STEPS[0],i,n,bins;for(i=1,n=STEPS.length;i<n;++i){step=STEPS[i];if(span>step[0]){bins=span/step[0];if(bins>maxb){return units[STEPS[i-1][1]]}if(bins>=minb){return units[step[1]]}}}return units[STEPS[n-1][1]]}function toUnitMap(units){var map={},i,n;for(i=0,n=units.length;i<n;++i){map[units[i].type]=units[i]}map.find=function(span,minb,maxb){return find(units,span,minb,maxb)};return map}module.exports=toUnitMap(locale);module.exports.utc=toUnitMap(utc)},{"d3-time":384}],410:[function(require,module,exports){(function(Buffer){(function(){var u=module.exports;var FNAME="__name__";u.namedfunc=function(name,f){return f[FNAME]=name,f};u.name=function(f){return f==null?null:f[FNAME]};u.identity=function(x){return x};u.true=u.namedfunc("true",function(){return true});u.false=u.namedfunc("false",function(){return false});u.duplicate=function(obj){return JSON.parse(JSON.stringify(obj))};u.equal=function(a,b){return JSON.stringify(a)===JSON.stringify(b)};u.extend=function(obj){for(var x,name,i=1,len=arguments.length;i<len;++i){x=arguments[i];for(name in x){obj[name]=x[name]}}return obj};u.length=function(x){return x!=null&&x.length!=null?x.length:null};u.keys=function(x){var keys=[],k;for(k in x)keys.push(k);return keys};u.vals=function(x){var vals=[],k;for(k in x)vals.push(x[k]);return vals};u.toMap=function(list,f){return(f=u.$(f))?list.reduce(function(obj,x){return obj[f(x)]=1,obj},{}):list.reduce(function(obj,x){return obj[x]=1,obj},{})};u.keystr=function(values){var n=values.length;if(!n)return"";for(var s=String(values[0]),i=1;i<n;++i){s+="|"+String(values[i])}return s};var toString=Object.prototype.toString;u.isObject=function(obj){return obj===Object(obj)};u.isFunction=function(obj){return toString.call(obj)==="[object Function]"};u.isString=function(obj){return typeof value==="string"||toString.call(obj)==="[object String]"};u.isArray=Array.isArray||function(obj){return toString.call(obj)==="[object Array]"};u.isNumber=function(obj){return typeof obj==="number"||toString.call(obj)==="[object Number]"};u.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};u.isDate=function(obj){return toString.call(obj)==="[object Date]"};u.isValid=function(obj){return obj!=null&&obj===obj};u.isBuffer=typeof Buffer==="function"&&Buffer.isBuffer||u.false;u.number=function(s){return s==null||s===""?null:+s};u.boolean=function(s){return s==null||s===""?null:s==="false"?false:!!s};u.date=function(s,format){var d=format?format:Date;return s==null||s===""?null:d.parse(s)};u.array=function(x){return x!=null?u.isArray(x)?x:[x]:[]};u.str=function(x){return u.isArray(x)?"["+x.map(u.str)+"]":u.isObject(x)||u.isString(x)?JSON.stringify(x).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):x};var field_re=/\[(.*?)\]|[^.\[]+/g;u.field=function(f){return String(f).match(field_re).map(function(d){return d[0]!=="["?d:d[1]!=="'"&&d[1]!=='"'?d.slice(1,-1):d.slice(2,-2).replace(/\\(["'])/g,"$1")})};u.accessor=function(f){return f==null||u.isFunction(f)?f:u.namedfunc(f,Function("x","return x["+u.field(f).map(u.str).join("][")+"];"))};u.$=u.accessor;u.mutator=function(f){var s;return u.isString(f)&&(s=u.field(f)).length>1?function(x,v){for(var i=0;i<s.length-1;++i)x=x[s[i]];x[s[i]]=v}:function(x,v){x[f]=v}};u.$func=function(name,op){return function(f){f=u.$(f)||u.identity;var n=name+(u.name(f)?"_"+u.name(f):"");return u.namedfunc(n,function(d){return op(f(d))})}};u.$valid=u.$func("valid",u.isValid);u.$length=u.$func("length",u.length);u.$in=function(f,values){f=u.$(f);var map=u.isArray(values)?u.toMap(values):values;return function(d){return!!map[f(d)]}};u.comparator=function(sort){var sign=[];if(sort===undefined)sort=[];sort=u.array(sort).map(function(f){var s=1;if(f[0]==="-"){s=-1;f=f.slice(1)}else if(f[0]==="+"){s=+1;f=f.slice(1)}sign.push(s);return u.accessor(f)});return function(a,b){var i,n,f,c;for(i=0,n=sort.length;i<n;++i){f=sort[i];c=u.cmp(f(a),f(b));if(c)return c*sign[i]}return 0}};u.cmp=function(a,b){return(a<b||a==null)&&b!=null?-1:(a>b||b==null)&&a!=null?1:(b=b instanceof Date?+b:b,a=a instanceof Date?+a:a)!==a&&b===b?-1:b!==b&&a===a?1:0};u.numcmp=function(a,b){return a-b};u.stablesort=function(array,sortBy,keyFn){var indices=array.reduce(function(idx,v,i){return idx[keyFn(v)]=i,idx},{});array.sort(function(a,b){var sa=sortBy(a),sb=sortBy(b);return sa<sb?-1:sa>sb?1:indices[keyFn(a)]-indices[keyFn(b)]});return array};u.permute=function(a){var m=a.length,swap,i;while(m){i=Math.floor(Math.random()*m--);swap=a[m];a[m]=a[i];a[i]=swap}};u.pad=function(s,length,pos,padchar){padchar=padchar||" ";var d=length-s.length;if(d<=0)return s;switch(pos){case"left":return strrep(d,padchar)+s;case"middle":case"center":return strrep(Math.floor(d/2),padchar)+s+strrep(Math.ceil(d/2),padchar);default:return s+strrep(d,padchar)}};function strrep(n,str){var s="",i;for(i=0;i<n;++i)s+=str;return s}u.truncate=function(s,length,pos,word,ellipsis){var len=s.length;if(len<=length)return s;ellipsis=ellipsis!==undefined?String(ellipsis):"\u2026";var l=Math.max(0,length-ellipsis.length);switch(pos){case"left":return ellipsis+(word?truncateOnWord(s,l,1):s.slice(len-l));case"middle":case"center":var l1=Math.ceil(l/2),l2=Math.floor(l/2);return(word?truncateOnWord(s,l1):s.slice(0,l1))+ellipsis+(word?truncateOnWord(s,l2,1):s.slice(len-l2));default:return(word?truncateOnWord(s,l):s.slice(0,l))+ellipsis}};function truncateOnWord(s,len,rev){var cnt=0,tok=s.split(truncate_word_re);if(rev){s=(tok=tok.reverse()).filter(function(w){cnt+=w.length;return cnt<=len}).reverse()}else{s=tok.filter(function(w){cnt+=w.length;return cnt<=len})}return s.length?s.join("").trim():tok[0].slice(0,len)}var truncate_word_re=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this)}).call(this,require("buffer").Buffer)},{buffer:8}],411:[function(require,module,exports){"use strict";var value=require("../../object/valid-value");module.exports=function(){value(this).length=0;return this}},{"../../object/valid-value":439}],412:[function(require,module,exports){"use strict";var toPosInt=require("../../number/to-pos-integer"),value=require("../../object/valid-value"),indexOf=Array.prototype.indexOf,hasOwnProperty=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor;module.exports=function(searchElement){var i,l,fromIndex,val;if(searchElement===searchElement){return indexOf.apply(this,arguments)}l=toPosInt(value(this).length);fromIndex=arguments[1];if(isNaN(fromIndex))fromIndex=0;else if(fromIndex>=0)fromIndex=floor(fromIndex);else fromIndex=toPosInt(this.length)-floor(abs(fromIndex));for(i=fromIndex;i<l;++i){if(hasOwnProperty.call(this,i)){val=this[i];if(val!==val)return i}}return-1}},{"../../number/to-pos-integer":418,"../../object/valid-value":439}],413:[function(require,module,exports){"use strict";var toString=Object.prototype.toString,id=toString.call(function(){return arguments}());module.exports=function(x){return toString.call(x)===id}},{}],414:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Math.sign:require("./shim")},{"./is-implemented":415,"./shim":416}],415:[function(require,module,exports){"use strict";module.exports=function(){var sign=Math.sign;if(typeof sign!=="function")return false;return sign(10)===1&&sign(-20)===-1}},{}],416:[function(require,module,exports){"use strict";module.exports=function(value){value=Number(value);if(isNaN(value)||value===0)return value;return value>0?1:-1}},{}],417:[function(require,module,exports){"use strict";var sign=require("../math/sign"),abs=Math.abs,floor=Math.floor;module.exports=function(value){if(isNaN(value))return 0;value=Number(value);if(value===0||!isFinite(value))return value;return sign(value)*floor(abs(value))}},{"../math/sign":414}],418:[function(require,module,exports){"use strict";var toInteger=require("./to-integer"),max=Math.max;module.exports=function(value){return max(0,toInteger(value))}},{"./to-integer":417}],419:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),value=require("./valid-value"),bind=Function.prototype.bind,call=Function.prototype.call,keys=Object.keys,propertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(method,defVal){return function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];obj=Object(value(obj));callable(cb);list=keys(obj);if(compareFn){list.sort(typeof compareFn==="function"?bind.call(compareFn,obj):undefined)}if(typeof method!=="function")method=list[method];return call.call(method,list,function(key,index){if(!propertyIsEnumerable.call(obj,key))return defVal;return call.call(cb,thisArg,obj[key],key,obj,index)})}}},{"./valid-callable":437,"./valid-value":439}],420:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.assign:require("./shim")},{"./is-implemented":421,"./shim":422}],421:[function(require,module,exports){"use strict";module.exports=function(){var assign=Object.assign,obj;if(typeof assign!=="function")return false;obj={foo:"raz"};assign(obj,{bar:"dwa"},{trzy:"trzy"});return obj.foo+obj.bar+obj.trzy==="razdwatrzy"}},{}],422:[function(require,module,exports){"use strict";var keys=require("../keys"),value=require("../valid-value"),max=Math.max;module.exports=function(dest,src){var error,i,l=max(arguments.length,2),assign;dest=Object(value(dest));assign=function(key){try{dest[key]=src[key]}catch(e){if(!error)error=e}};for(i=1;i<l;++i){src=arguments[i];keys(src).forEach(assign)}if(error!==undefined)throw error;return dest}},{"../keys":428,"../valid-value":439}],423:[function(require,module,exports){"use strict";var assign=require("./assign"),value=require("./valid-value");module.exports=function(obj){var copy=Object(value(obj));if(copy!==obj)return copy;return assign({},obj)}},{"./assign":420,"./valid-value":439}],424:[function(require,module,exports){"use strict";var create=Object.create,shim;if(!require("./set-prototype-of/is-implemented")()){shim=require("./set-prototype-of/shim")}module.exports=function(){var nullObject,props,desc;if(!shim)return create;if(shim.level!==1)return create;nullObject={};props={};desc={configurable:false,enumerable:false,writable:true,value:undefined};Object.getOwnPropertyNames(Object.prototype).forEach(function(name){if(name==="__proto__"){props[name]={configurable:true,enumerable:false,writable:true,value:undefined};return}props[name]=desc});Object.defineProperties(nullObject,props);Object.defineProperty(shim,"nullPolyfill",{configurable:false,enumerable:false,writable:false,value:nullObject});return function(prototype,props){return create(prototype===null?nullObject:prototype,props)}}()},{"./set-prototype-of/is-implemented":435,"./set-prototype-of/shim":436}],425:[function(require,module,exports){"use strict";module.exports=require("./_iterate")("forEach")},{"./_iterate":419}],426:[function(require,module,exports){"use strict";module.exports=function(obj){return typeof obj==="function"}},{}],427:[function(require,module,exports){"use strict";var map={function:true,object:true};module.exports=function(x){return x!=null&&map[typeof x]||false}},{}],428:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.keys:require("./shim")},{"./is-implemented":429,"./shim":430}],429:[function(require,module,exports){"use strict";module.exports=function(){try{Object.keys("primitive");return true}catch(e){return false}}},{}],430:[function(require,module,exports){"use strict";var keys=Object.keys;module.exports=function(object){return keys(object==null?object:Object(object))}},{}],431:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),forEach=require("./for-each"),call=Function.prototype.call;module.exports=function(obj,cb){var o={},thisArg=arguments[2];callable(cb);forEach(obj,function(value,key,obj,index){o[key]=call.call(cb,thisArg,value,key,obj,index)});return o}},{"./for-each":425,"./valid-callable":437}],432:[function(require,module,exports){"use strict";var forEach=Array.prototype.forEach,create=Object.create;var process=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(options){var result=create(null);forEach.call(arguments,function(options){if(options==null)return;process(Object(options),result)});return result}},{}],433:[function(require,module,exports){"use strict";var forEach=Array.prototype.forEach,create=Object.create;module.exports=function(arg){var set=create(null);forEach.call(arguments,function(name){set[name]=true});return set}},{}],434:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.setPrototypeOf:require("./shim")},{"./is-implemented":435,"./shim":436}],435:[function(require,module,exports){"use strict";var create=Object.create,getPrototypeOf=Object.getPrototypeOf,x={};module.exports=function(){var setPrototypeOf=Object.setPrototypeOf,customCreate=arguments[0]||create;if(typeof setPrototypeOf!=="function")return false;return getPrototypeOf(setPrototypeOf(customCreate(null),x))===x}},{}],436:[function(require,module,exports){"use strict";var isObject=require("../is-object"),value=require("../valid-value"),isPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:true,enumerable:false,writable:true,value:undefined},validate;validate=function(obj,prototype){value(obj);if(prototype===null||isObject(prototype))return obj;throw new TypeError("Prototype must be null or an object")};module.exports=function(status){var fn,set;if(!status)return null;if(status.level===2){if(status.set){set=status.set;fn=function(obj,prototype){set.call(validate(obj,prototype),prototype);return obj}}else{fn=function(obj,prototype){validate(obj,prototype).__proto__=prototype;return obj}}}else{fn=function self(obj,prototype){var isNullBase;validate(obj,prototype);isNullBase=isPrototypeOf.call(self.nullPolyfill,obj);if(isNullBase)delete self.nullPolyfill.__proto__;if(prototype===null)prototype=self.nullPolyfill;obj.__proto__=prototype;if(isNullBase)defineProperty(self.nullPolyfill,"__proto__",nullDesc);return obj}}return Object.defineProperty(fn,"level",{configurable:false,enumerable:false,writable:false,value:status.level})}(function(){var x=Object.create(null),y={},set,desc=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(desc){try{set=desc.set;set.call(x,y)}catch(ignore){}if(Object.getPrototypeOf(x)===y)return{set:set,level:2}}x.__proto__=y;if(Object.getPrototypeOf(x)===y)return{level:2};x={};x.__proto__=y;if(Object.getPrototypeOf(x)===y)return{level:1};return false}());require("../create")},{"../create":424,"../is-object":427,"../valid-value":439}],437:[function(require,module,exports){"use strict";module.exports=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn}},{}],438:[function(require,module,exports){"use strict";var isObject=require("./is-object");module.exports=function(value){if(!isObject(value))throw new TypeError(value+" is not an Object");return value}},{"./is-object":427}],439:[function(require,module,exports){"use strict";module.exports=function(value){if(value==null)throw new TypeError("Cannot use null or undefined");return value}},{}],440:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?String.prototype.contains:require("./shim")},{"./is-implemented":441,"./shim":442}],441:[function(require,module,exports){"use strict";var str="razdwatrzy";module.exports=function(){if(typeof str.contains!=="function")return false;return str.contains("dwa")===true&&str.contains("foo")===false}},{}],442:[function(require,module,exports){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},{}],443:[function(require,module,exports){"use strict";var toString=Object.prototype.toString,id=toString.call("");module.exports=function(x){return typeof x==="string"||x&&typeof x==="object"&&(x instanceof String||toString.call(x)===id)||false}},{}],444:[function(require,module,exports){"use strict";var generated=Object.create(null),random=Math.random;module.exports=function(){var str;do{str=random().toString(36).slice(2)}while(generated[str]);return str}},{}],445:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),contains=require("es5-ext/string/#/contains"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,ArrayIterator;ArrayIterator=module.exports=function(arr,kind){if(!(this instanceof ArrayIterator))return new ArrayIterator(arr,kind);Iterator.call(this,arr);if(!kind)kind="value";else if(contains.call(kind,"key+value"))kind="key+value";else if(contains.call(kind,"key"))kind="key";else kind="value";defineProperty(this,"__kind__",d("",kind))};if(setPrototypeOf)setPrototypeOf(ArrayIterator,Iterator);ArrayIterator.prototype=Object.create(Iterator.prototype,{constructor:d(ArrayIterator),_resolve:d(function(i){if(this.__kind__==="value")return this.__list__[i];if(this.__kind__==="key+value")return[i,this.__list__[i]];return i}),toString:d(function(){return"[object Array Iterator]"})})},{"./":448,d:380,"es5-ext/object/set-prototype-of":434,"es5-ext/string/#/contains":440}],446:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),callable=require("es5-ext/object/valid-callable"),isString=require("es5-ext/string/is-string"),get=require("./get"),isArray=Array.isArray,call=Function.prototype.call,some=Array.prototype.some;module.exports=function(iterable,cb){var mode,thisArg=arguments[2],result,doBreak,broken,i,l,char,code;if(isArray(iterable)||isArguments(iterable))mode="array";else if(isString(iterable))mode="string";else iterable=get(iterable);callable(cb);doBreak=function(){broken=true};if(mode==="array"){some.call(iterable,function(value){call.call(cb,thisArg,value,doBreak);if(broken)return true});return}if(mode==="string"){l=iterable.length;for(i=0;i<l;++i){char=iterable[i];if(i+1<l){code=char.charCodeAt(0);if(code>=55296&&code<=56319)char+=iterable[++i]}call.call(cb,thisArg,char,doBreak);if(broken)break}return}result=iterable.next();while(!result.done){call.call(cb,thisArg,result.value,doBreak);if(broken)return;result=iterable.next()}}},{"./get":447,"es5-ext/function/is-arguments":413,"es5-ext/object/valid-callable":437,"es5-ext/string/is-string":443}],447:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),ArrayIterator=require("./array"),StringIterator=require("./string"),iterable=require("./valid-iterable"),iteratorSymbol=require("es6-symbol").iterator;module.exports=function(obj){if(typeof iterable(obj)[iteratorSymbol]==="function")return obj[iteratorSymbol]();if(isArguments(obj))return new ArrayIterator(obj);if(isString(obj))return new StringIterator(obj);return new ArrayIterator(obj)}},{"./array":445,"./string":450,"./valid-iterable":451,"es5-ext/function/is-arguments":413,"es5-ext/string/is-string":443,"es6-symbol":458}],448:[function(require,module,exports){"use strict";var clear=require("es5-ext/array/#/clear"),assign=require("es5-ext/object/assign"),callable=require("es5-ext/object/valid-callable"),value=require("es5-ext/object/valid-value"),d=require("d"),autoBind=require("d/auto-bind"),Symbol=require("es6-symbol"),defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,Iterator;module.exports=Iterator=function(list,context){if(!(this instanceof Iterator))return new Iterator(list,context);defineProperties(this,{__list__:d("w",value(list)),__context__:d("w",context),__nextIndex__:d("w",0)});if(!context)return;callable(context.on);context.on("_add",this._onAdd);context.on("_delete",this._onDelete);context.on("_clear",this._onClear)};defineProperties(Iterator.prototype,assign({constructor:d(Iterator),_next:d(function(){var i;if(!this.__list__)return;if(this.__redo__){i=this.__redo__.shift();if(i!==undefined)return i}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(i){if(i===undefined)return{done:true,value:undefined};return{done:false,value:this._resolve(i)}}),_resolve:d(function(i){return this.__list__[i]}),_unBind:d(function(){this.__list__=null;delete this.__redo__;if(!this.__context__)return;this.__context__.off("_add",this._onAdd);this.__context__.off("_delete",this._onDelete);this.__context__.off("_clear",this._onClear);this.__context__=null}),toString:d(function(){return"[object Iterator]"})},autoBind({_onAdd:d(function(index){if(index>=this.__nextIndex__)return;++this.__nextIndex__;if(!this.__redo__){defineProperty(this,"__redo__",d("c",[index]));return}this.__redo__.forEach(function(redo,i){if(redo>=index)this.__redo__[i]=++redo},this);this.__redo__.push(index)}),_onDelete:d(function(index){var i;if(index>=this.__nextIndex__)return;--this.__nextIndex__;if(!this.__redo__)return;i=this.__redo__.indexOf(index);if(i!==-1)this.__redo__.splice(i,1);this.__redo__.forEach(function(redo,i){if(redo>index)this.__redo__[i]=--redo},this)}),_onClear:d(function(){if(this.__redo__)clear.call(this.__redo__);this.__nextIndex__=0})})));defineProperty(Iterator.prototype,Symbol.iterator,d(function(){return this}));defineProperty(Iterator.prototype,Symbol.toStringTag,d("","Iterator"))},{d:380,"d/auto-bind":379,"es5-ext/array/#/clear":411,"es5-ext/object/assign":420,"es5-ext/object/valid-callable":437,"es5-ext/object/valid-value":439,"es6-symbol":458}],449:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),iteratorSymbol=require("es6-symbol").iterator,isArray=Array.isArray;module.exports=function(value){if(value==null)return false;if(isArray(value))return true;if(isString(value))return true;if(isArguments(value))return true;return typeof value[iteratorSymbol]==="function"}},{"es5-ext/function/is-arguments":413,"es5-ext/string/is-string":443,"es6-symbol":458}],450:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,StringIterator;StringIterator=module.exports=function(str){if(!(this instanceof StringIterator))return new StringIterator(str);str=String(str);Iterator.call(this,str);defineProperty(this,"__length__",d("",str.length))};if(setPrototypeOf)setPrototypeOf(StringIterator,Iterator);StringIterator.prototype=Object.create(Iterator.prototype,{constructor:d(StringIterator),_next:d(function(){if(!this.__list__)return;if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}),_resolve:d(function(i){var char=this.__list__[i],code;if(this.__nextIndex__===this.__length__)return char;code=char.charCodeAt(0);if(code>=55296&&code<=56319)return char+this.__list__[this.__nextIndex__++];return char}),toString:d(function(){return"[object String Iterator]"})})},{"./":448,d:380,"es5-ext/object/set-prototype-of":434}],451:[function(require,module,exports){"use strict";var isIterable=require("./is-iterable");module.exports=function(value){if(!isIterable(value))throw new TypeError(value+" is not iterable");return value}},{"./is-iterable":449}],452:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Map:require("./polyfill")},{"./is-implemented":453,"./polyfill":457}],453:[function(require,module,exports){"use strict";module.exports=function(){var map,iterator,result;if(typeof Map!=="function")return false;try{map=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return false}if(String(map)!=="[object Map]")return false;if(map.size!==3)return false;if(typeof map.clear!=="function")return false;if(typeof map.delete!=="function")return false;if(typeof map.entries!=="function")return false;if(typeof map.forEach!=="function")return false;if(typeof map.get!=="function")return false;if(typeof map.has!=="function")return false;if(typeof map.keys!=="function")return false;if(typeof map.set!=="function")return false;if(typeof map.values!=="function")return false;iterator=map.entries();result=iterator.next();if(result.done!==false)return false;if(!result.value)return false;if(result.value[0]!=="raz")return false;if(result.value[1]!=="one")return false;return true}},{}],454:[function(require,module,exports){"use strict";module.exports=function(){if(typeof Map==="undefined")return false;return Object.prototype.toString.call(new Map)==="[object Map]"}()},{}],455:[function(require,module,exports){"use strict";module.exports=require("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":433}],456:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("es6-iterator"),toStringTagSymbol=require("es6-symbol").toStringTag,kinds=require("./iterator-kinds"),defineProperties=Object.defineProperties,unBind=Iterator.prototype._unBind,MapIterator;MapIterator=module.exports=function(map,kind){if(!(this instanceof MapIterator))return new MapIterator(map,kind);Iterator.call(this,map.__mapKeysData__,map);if(!kind||!kinds[kind])kind="key+value";defineProperties(this,{__kind__:d("",kind),__values__:d("w",map.__mapValuesData__)})};if(setPrototypeOf)setPrototypeOf(MapIterator,Iterator);MapIterator.prototype=Object.create(Iterator.prototype,{constructor:d(MapIterator),_resolve:d(function(i){if(this.__kind__==="value")return this.__values__[i];if(this.__kind__==="key")return this.__list__[i];return[this.__list__[i],this.__values__[i]]}),_unBind:d(function(){this.__values__=null;unBind.call(this)}),toString:d(function(){return"[object Map Iterator]"})});Object.defineProperty(MapIterator.prototype,toStringTagSymbol,d("c","Map Iterator"))},{"./iterator-kinds":455,d:380,"es5-ext/object/set-prototype-of":434,"es6-iterator":448,"es6-symbol":458}],457:[function(require,module,exports){"use strict";var clear=require("es5-ext/array/#/clear"),eIndexOf=require("es5-ext/array/#/e-index-of"),setPrototypeOf=require("es5-ext/object/set-prototype-of"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),d=require("d"),ee=require("event-emitter"),Symbol=require("es6-symbol"),iterator=require("es6-iterator/valid-iterable"),forOf=require("es6-iterator/for-of"),Iterator=require("./lib/iterator"),isNative=require("./is-native-implemented"),call=Function.prototype.call,defineProperties=Object.defineProperties,getPrototypeOf=Object.getPrototypeOf,MapPoly;module.exports=MapPoly=function(){var iterable=arguments[0],keys,values,self;if(!(this instanceof MapPoly))throw new TypeError("Constructor requires 'new'");if(isNative&&setPrototypeOf&&Map!==MapPoly){self=setPrototypeOf(new Map,getPrototypeOf(this))}else{self=this}if(iterable!=null)iterator(iterable);defineProperties(self,{__mapKeysData__:d("c",keys=[]),__mapValuesData__:d("c",values=[])});if(!iterable)return self;forOf(iterable,function(value){var key=validValue(value)[0];value=value[1];if(eIndexOf.call(keys,key)!==-1)return;keys.push(key);values.push(value)},self);return self};if(isNative){if(setPrototypeOf)setPrototypeOf(MapPoly,Map);MapPoly.prototype=Object.create(Map.prototype,{constructor:d(MapPoly)})}ee(defineProperties(MapPoly.prototype,{clear:d(function(){if(!this.__mapKeysData__.length)return;clear.call(this.__mapKeysData__);clear.call(this.__mapValuesData__);this.emit("_clear")}),delete:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(index===-1)return false;this.__mapKeysData__.splice(index,1);this.__mapValuesData__.splice(index,1);this.emit("_delete",index,key);return true}),entries:d(function(){return new Iterator(this,"key+value")}),forEach:d(function(cb){var thisArg=arguments[1],iterator,result;callable(cb);iterator=this.entries();result=iterator._next();while(result!==undefined){call.call(cb,thisArg,this.__mapValuesData__[result],this.__mapKeysData__[result],this);result=iterator._next()}}),get:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(index===-1)return;return this.__mapValuesData__[index]}),has:d(function(key){return eIndexOf.call(this.__mapKeysData__,key)!==-1}),keys:d(function(){return new Iterator(this,"key")}),set:d(function(key,value){var index=eIndexOf.call(this.__mapKeysData__,key),emit;if(index===-1){index=this.__mapKeysData__.push(key)-1;emit=true}this.__mapValuesData__[index]=value;if(emit)this.emit("_add",index,key);return this}),size:d.gs(function(){return this.__mapKeysData__.length}),values:d(function(){return new Iterator(this,"value")}),toString:d(function(){return"[object Map]"})}));Object.defineProperty(MapPoly.prototype,Symbol.iterator,d(function(){return this.entries()}));Object.defineProperty(MapPoly.prototype,Symbol.toStringTag,d("c","Map"))},{"./is-native-implemented":454,"./lib/iterator":456,d:380,"es5-ext/array/#/clear":411,"es5-ext/array/#/e-index-of":412,"es5-ext/object/set-prototype-of":434,"es5-ext/object/valid-callable":437,"es5-ext/object/valid-value":439,"es6-iterator/for-of":446,"es6-iterator/valid-iterable":451,"es6-symbol":458,"event-emitter":502}],458:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Symbol:require("./polyfill")},{"./is-implemented":459,"./polyfill":461}],459:[function(require,module,exports){"use strict";var validTypes={object:true,symbol:true};module.exports=function(){var symbol;if(typeof Symbol!=="function")return false;symbol=Symbol("test symbol");try{String(symbol)}catch(e){return false}if(!validTypes[typeof Symbol.iterator])return false;if(!validTypes[typeof Symbol.toPrimitive])return false;if(!validTypes[typeof Symbol.toStringTag])return false;return true}},{}],460:[function(require,module,exports){"use strict";module.exports=function(x){if(!x)return false;if(typeof x==="symbol")return true;if(!x.constructor)return false;if(x.constructor.name!=="Symbol")return false;return x[x.constructor.toStringTag]==="Symbol"}},{}],461:[function(require,module,exports){"use strict";var d=require("d"),validateSymbol=require("./validate-symbol"),create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty,objPrototype=Object.prototype,NativeSymbol,SymbolPolyfill,HiddenSymbol,globalSymbols=create(null),isNativeSafe;if(typeof Symbol==="function"){NativeSymbol=Symbol;try{String(NativeSymbol());isNativeSafe=true}catch(ignore){}}var generateName=function(){var created=create(null);return function(desc){var postfix=0,name,ie11BugWorkaround;while(created[desc+(postfix||"")])++postfix;desc+=postfix||"";created[desc]=true;name="@@"+desc;defineProperty(objPrototype,name,d.gs(null,function(value){if(ie11BugWorkaround)return;ie11BugWorkaround=true;defineProperty(this,name,d(value));ie11BugWorkaround=false}));return name}}();HiddenSymbol=function Symbol(description){if(this instanceof HiddenSymbol)throw new TypeError("TypeError: Symbol is not a constructor");return SymbolPolyfill(description)};module.exports=SymbolPolyfill=function Symbol(description){var symbol;if(this instanceof Symbol)throw new TypeError("TypeError: Symbol is not a constructor");if(isNativeSafe)return NativeSymbol(description);symbol=create(HiddenSymbol.prototype);description=description===undefined?"":String(description);return defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))})};defineProperties(SymbolPolyfill,{for:d(function(key){if(globalSymbols[key])return globalSymbols[key];return globalSymbols[key]=SymbolPolyfill(String(key))}),keyFor:d(function(s){var key;validateSymbol(s);for(key in globalSymbols)if(globalSymbols[key]===s)return key}),hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))});defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",function(){return this.__name__})});defineProperties(SymbolPolyfill.prototype,{toString:d(function(){return"Symbol ("+validateSymbol(this).__description__+")"}),valueOf:d(function(){return validateSymbol(this)})});defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",function(){var symbol=validateSymbol(this);if(typeof symbol==="symbol")return symbol;return symbol.toString()}));defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol"));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag]));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]))},{"./validate-symbol":462,d:380}],462:[function(require,module,exports){"use strict";var isSymbol=require("./is-symbol");module.exports=function(value){if(!isSymbol(value))throw new TypeError(value+" is not a symbol");return value}},{"./is-symbol":460}],463:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?WeakMap:require("./polyfill")},{"./is-implemented":464,"./polyfill":466}],464:[function(require,module,exports){"use strict";module.exports=function(){var weakMap,x;if(typeof WeakMap!=="function")return false;try{weakMap=new WeakMap([[x={},"one"],[{},"two"],[{},"three"]])}catch(e){return false}if(String(weakMap)!=="[object WeakMap]")return false;if(typeof weakMap.set!=="function")return false;if(weakMap.set({},1)!==weakMap)return false;if(typeof weakMap.delete!=="function")return false;if(typeof weakMap.has!=="function")return false;if(weakMap.get(x)!=="one")return false;return true}},{}],465:[function(require,module,exports){"use strict";module.exports=function(){if(typeof WeakMap!=="function")return false;return Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],466:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),object=require("es5-ext/object/valid-object"),value=require("es5-ext/object/valid-value"),randomUniq=require("es5-ext/string/random-uniq"),d=require("d"),getIterator=require("es6-iterator/get"),forOf=require("es6-iterator/for-of"),toStringTagSymbol=require("es6-symbol").toStringTag,isNative=require("./is-native-implemented"),isArray=Array.isArray,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty,getPrototypeOf=Object.getPrototypeOf,WeakMapPoly;module.exports=WeakMapPoly=function(){var iterable=arguments[0],self;if(!(this instanceof WeakMapPoly))throw new TypeError("Constructor requires 'new'");if(isNative&&setPrototypeOf&&WeakMap!==WeakMapPoly){self=setPrototypeOf(new WeakMap,getPrototypeOf(this))}else{self=this}if(iterable!=null){if(!isArray(iterable))iterable=getIterator(iterable)}defineProperty(self,"__weakMapData__",d("c","$weakMap$"+randomUniq()));if(!iterable)return self;forOf(iterable,function(val){value(val);self.set(val[0],val[1])});return self};if(isNative){if(setPrototypeOf)setPrototypeOf(WeakMapPoly,WeakMap);WeakMapPoly.prototype=Object.create(WeakMap.prototype,{constructor:d(WeakMapPoly)})}Object.defineProperties(WeakMapPoly.prototype,{delete:d(function(key){if(hasOwnProperty.call(object(key),this.__weakMapData__)){delete key[this.__weakMapData__];return true}return false}),get:d(function(key){if(hasOwnProperty.call(object(key),this.__weakMapData__)){return key[this.__weakMapData__]}}),has:d(function(key){return hasOwnProperty.call(object(key),this.__weakMapData__)}),set:d(function(key,value){defineProperty(object(key),this.__weakMapData__,d("c",value));return this}),toString:d(function(){return"[object WeakMap]"})});defineProperty(WeakMapPoly.prototype,toStringTagSymbol,d("c","WeakMap"))},{"./is-native-implemented":465,d:380,"es5-ext/object/set-prototype-of":434,"es5-ext/object/valid-object":438,"es5-ext/object/valid-value":439,"es5-ext/string/random-uniq":444,"es6-iterator/for-of":446,"es6-iterator/get":447,"es6-symbol":458}],467:[function(require,module,exports){(function(global){(function(){(function(){"use strict";var Syntax,Precedence,BinaryPrecedence,SourceNode,estraverse,esutils,isArray,base,indent,json,renumber,hexadecimal,quotes,escapeless,newline,space,parentheses,semicolons,safeConcatenation,directive,extra,parse,sourceMap,sourceCode,preserveBlankLines,FORMAT_MINIFY,FORMAT_DEFAULTS;estraverse=require("estraverse");esutils=require("esutils");Syntax=estraverse.Syntax;function isExpression(node){return CodeGenerator.Expression.hasOwnProperty(node.type)}function isStatement(node){return CodeGenerator.Statement.hasOwnProperty(node.type)}Precedence={Sequence:0,Yield:1,Await:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19};BinaryPrecedence={"||":Precedence.LogicalOR,"&&":Precedence.LogicalAND,"|":Precedence.BitwiseOR,"^":Precedence.BitwiseXOR,"&":Precedence.BitwiseAND,"==":Precedence.Equality,"!=":Precedence.Equality,"===":Precedence.Equality,"!==":Precedence.Equality,is:Precedence.Equality,isnt:Precedence.Equality,"<":Precedence.Relational,">":Precedence.Relational,"<=":Precedence.Relational,">=":Precedence.Relational,in:Precedence.Relational,instanceof:Precedence.Relational,"<<":Precedence.BitwiseSHIFT,">>":Precedence.BitwiseSHIFT,">>>":Precedence.BitwiseSHIFT,"+":Precedence.Additive,"-":Precedence.Additive,"*":Precedence.Multiplicative,"%":Precedence.Multiplicative,"/":Precedence.Multiplicative};var F_ALLOW_IN=1,F_ALLOW_CALL=1<<1,F_ALLOW_UNPARATH_NEW=1<<2,F_FUNC_BODY=1<<3,F_DIRECTIVE_CTX=1<<4,F_SEMICOLON_OPT=1<<5;var E_FTT=F_ALLOW_CALL|F_ALLOW_UNPARATH_NEW,E_TTF=F_ALLOW_IN|F_ALLOW_CALL,E_TTT=F_ALLOW_IN|F_ALLOW_CALL|F_ALLOW_UNPARATH_NEW,E_TFF=F_ALLOW_IN,E_FFT=F_ALLOW_UNPARATH_NEW,E_TFT=F_ALLOW_IN|F_ALLOW_UNPARATH_NEW;var S_TFFF=F_ALLOW_IN,S_TFFT=F_ALLOW_IN|F_SEMICOLON_OPT,S_FFFF=0,S_TFTF=F_ALLOW_IN|F_DIRECTIVE_CTX,S_TTFF=F_ALLOW_IN|F_FUNC_BODY;function getDefaultOptions(){return{indent:null,base:null,parse:null,comment:false,format:{indent:{style:"    ",base:0,adjustMultilineComment:false},newline:"\n",space:" ",json:false,renumber:false,hexadecimal:false,quotes:"single",escapeless:false,compact:false,parentheses:true,semicolons:true,safeConcatenation:false,preserveBlankLines:false},moz:{comprehensionExpressionStartsWithAssignment:false,starlessGenerator:false},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:false,directive:false,raw:true,verbatim:null,sourceCode:null}}function stringRepeat(str,num){var result="";for(num|=0;num>0;num>>>=1,str+=str){if(num&1){result+=str}}return result}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function hasLineTerminator(str){return/[\r\n]/g.test(str)}function endsWithLineTerminator(str){var len=str.length;return len&&esutils.code.isLineTerminator(str.charCodeAt(len-1))}function merge(target,override){var key;for(key in override){if(override.hasOwnProperty(key)){target[key]=override[key]}}return target}function updateDeeply(target,override){var key,val;function isHashObject(target){return typeof target==="object"&&target instanceof Object&&!(target instanceof RegExp)}for(key in override){if(override.hasOwnProperty(key)){val=override[key];if(isHashObject(val)){if(isHashObject(target[key])){updateDeeply(target[key],val)}else{target[key]=updateDeeply({},val)}}else{target[key]=val}}}return target}function generateNumber(value){var result,point,temp,exponent,pos;if(value!==value){throw new Error("Numeric literal whose value is NaN")}if(value<0||value===0&&1/value<0){throw new Error("Numeric literal whose value is negative")}if(value===1/0){return json?"null":renumber?"1e400":"1e+400"}result=""+value;if(!renumber||result.length<3){return result}point=result.indexOf(".");if(!json&&result.charCodeAt(0)===48&&point===1){point=0;result=result.slice(1)}temp=result;result=result.replace("e+","e");exponent=0;if((pos=temp.indexOf("e"))>0){exponent=+temp.slice(pos+1);temp=temp.slice(0,pos)}if(point>=0){exponent-=temp.length-point-1;temp=+(temp.slice(0,point)+temp.slice(point+1))+""}pos=0;while(temp.charCodeAt(temp.length+pos-1)===48){--pos}if(pos!==0){exponent-=pos;temp=temp.slice(0,pos)}if(exponent!==0){temp+="e"+exponent}if((temp.length<result.length||hexadecimal&&value>1e12&&Math.floor(value)===value&&(temp="0x"+value.toString(16)).length<result.length)&&+temp===value){result=temp}return result}function escapeRegExpCharacter(ch,previousIsBackslash){if((ch&~1)===8232){return(previousIsBackslash?"u":"\\u")+(ch===8232?"2028":"2029")}else if(ch===10||ch===13){return(previousIsBackslash?"":"\\")+(ch===10?"n":"r")}return String.fromCharCode(ch)}function generateRegExp(reg){var match,result,flags,i,iz,ch,characterInBrack,previousIsBackslash;result=reg.toString();if(reg.source){match=result.match(/\/([^/]*)$/);if(!match){return result}flags=match[1];result="";characterInBrack=false;previousIsBackslash=false;for(i=0,iz=reg.source.length;i<iz;++i){ch=reg.source.charCodeAt(i);if(!previousIsBackslash){if(characterInBrack){if(ch===93){characterInBrack=false}}else{if(ch===47){result+="\\"}else if(ch===91){characterInBrack=true}}result+=escapeRegExpCharacter(ch,previousIsBackslash);previousIsBackslash=ch===92}else{result+=escapeRegExpCharacter(ch,previousIsBackslash);previousIsBackslash=false}}return"/"+result+"/"+flags}return result}function escapeAllowedCharacter(code,next){var hex;if(code===8){return"\\b"}if(code===12){return"\\f"}if(code===9){return"\\t"}hex=code.toString(16).toUpperCase();if(json||code>255){return"\\u"+"0000".slice(hex.length)+hex}else if(code===0&&!esutils.code.isDecimalDigit(next)){return"\\0"}else if(code===11){return"\\x0B"}else{return"\\x"+"00".slice(hex.length)+hex}}function escapeDisallowedCharacter(code){if(code===92){return"\\\\"}if(code===10){return"\\n"}if(code===13){return"\\r"}if(code===8232){return"\\u2028"}if(code===8233){return"\\u2029"}throw new Error("Incorrectly classified character")}function escapeDirective(str){var i,iz,code,quote;quote=quotes==="double"?'"':"'";for(i=0,iz=str.length;i<iz;++i){code=str.charCodeAt(i);if(code===39){quote='"';break}else if(code===34){quote="'";break}else if(code===92){++i}}return quote+str+quote}function escapeString(str){var result="",i,len,code,singleQuotes=0,doubleQuotes=0,single,quote;for(i=0,len=str.length;i<len;++i){code=str.charCodeAt(i);if(code===39){++singleQuotes}else if(code===34){++doubleQuotes}else if(code===47&&json){result+="\\"}else if(esutils.code.isLineTerminator(code)||code===92){result+=escapeDisallowedCharacter(code);continue}else if(!esutils.code.isIdentifierPartES5(code)&&(json&&code<32||!json&&!escapeless&&(code<32||code>126))){result+=escapeAllowedCharacter(code,str.charCodeAt(i+1));continue}result+=String.fromCharCode(code)}single=!(quotes==="double"||quotes==="auto"&&doubleQuotes<singleQuotes);quote=single?"'":'"';if(!(single?singleQuotes:doubleQuotes)){return quote+result+quote}str=result;result=quote;for(i=0,len=str.length;i<len;++i){code=str.charCodeAt(i);if(code===39&&single||code===34&&!single){result+="\\"}result+=String.fromCharCode(code)}return result+quote}function flattenToString(arr){var i,iz,elem,result="";for(i=0,iz=arr.length;i<iz;++i){elem=arr[i];result+=isArray(elem)?flattenToString(elem):elem}return result}function toSourceNodeWhenNeeded(generated,node){if(!sourceMap){if(isArray(generated)){return flattenToString(generated)}else{return generated}}if(node==null){if(generated instanceof SourceNode){return generated}else{node={}}}if(node.loc==null){return new SourceNode(null,null,sourceMap,generated,node.name||null)}return new SourceNode(node.loc.start.line,node.loc.start.column,sourceMap===true?node.loc.source||null:sourceMap,generated,node.name||null)}function noEmptySpace(){return space?space:" "}function join(left,right){var leftSource,rightSource,leftCharCode,rightCharCode;leftSource=toSourceNodeWhenNeeded(left).toString();if(leftSource.length===0){return[right]}rightSource=toSourceNodeWhenNeeded(right).toString();if(rightSource.length===0){return[left]}leftCharCode=leftSource.charCodeAt(leftSource.length-1);rightCharCode=rightSource.charCodeAt(0);if((leftCharCode===43||leftCharCode===45)&&leftCharCode===rightCharCode||esutils.code.isIdentifierPartES5(leftCharCode)&&esutils.code.isIdentifierPartES5(rightCharCode)||leftCharCode===47&&rightCharCode===105){return[left,noEmptySpace(),right]}else if(esutils.code.isWhiteSpace(leftCharCode)||esutils.code.isLineTerminator(leftCharCode)||esutils.code.isWhiteSpace(rightCharCode)||esutils.code.isLineTerminator(rightCharCode)){return[left,right]}return[left,space,right]}function addIndent(stmt){return[base,stmt]}function withIndent(fn){var previousBase;previousBase=base;base+=indent;fn(base);base=previousBase}function calculateSpaces(str){var i;for(i=str.length-1;i>=0;--i){if(esutils.code.isLineTerminator(str.charCodeAt(i))){break}}return str.length-1-i}function adjustMultilineComment(value,specialBase){var array,i,len,line,j,spaces,previousBase,sn;array=value.split(/\r\n|[\r\n]/);spaces=Number.MAX_VALUE;for(i=1,len=array.length;i<len;++i){line=array[i];j=0;while(j<line.length&&esutils.code.isWhiteSpace(line.charCodeAt(j))){++j}if(spaces>j){spaces=j}}if(typeof specialBase!=="undefined"){previousBase=base;if(array[1][spaces]==="*"){specialBase+=" "}base=specialBase}else{if(spaces&1){--spaces}previousBase=base}for(i=1,len=array.length;i<len;++i){sn=toSourceNodeWhenNeeded(addIndent(array[i].slice(spaces)));array[i]=sourceMap?sn.join(""):sn}base=previousBase;return array.join("\n")}function generateComment(comment,specialBase){if(comment.type==="Line"){if(endsWithLineTerminator(comment.value)){return"//"+comment.value}else{var result="//"+comment.value;if(!preserveBlankLines){result+="\n"}return result}}if(extra.format.indent.adjustMultilineComment&&/[\n\r]/.test(comment.value)){return adjustMultilineComment("/*"+comment.value+"*/",specialBase)}return"/*"+comment.value+"*/"}function addComments(stmt,result){var i,len,comment,save,tailingToStatement,specialBase,fragment,extRange,range,prevRange,prefix,infix,suffix,count;if(stmt.leadingComments&&stmt.leadingComments.length>0){save=result;if(preserveBlankLines){comment=stmt.leadingComments[0];result=[];extRange=comment.extendedRange;range=comment.range;prefix=sourceCode.substring(extRange[0],range[0]);count=(prefix.match(/\n/g)||[]).length;if(count>0){result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)))}else{result.push(prefix);result.push(generateComment(comment))}prevRange=range;for(i=1,len=stmt.leadingComments.length;i<len;i++){comment=stmt.leadingComments[i];range=comment.range;infix=sourceCode.substring(prevRange[1],range[0]);count=(infix.match(/\n/g)||[]).length;result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)));prevRange=range}suffix=sourceCode.substring(range[1],extRange[1]);count=(suffix.match(/\n/g)||[]).length;result.push(stringRepeat("\n",count))}else{comment=stmt.leadingComments[0];result=[];if(safeConcatenation&&stmt.type===Syntax.Program&&stmt.body.length===0){result.push("\n")}result.push(generateComment(comment));if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push("\n")}for(i=1,len=stmt.leadingComments.length;i<len;++i){comment=stmt.leadingComments[i];fragment=[generateComment(comment)];if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){fragment.push("\n")}result.push(addIndent(fragment))}}result.push(addIndent(save))}if(stmt.trailingComments){if(preserveBlankLines){comment=stmt.trailingComments[0];extRange=comment.extendedRange;range=comment.range;prefix=sourceCode.substring(extRange[0],range[0]);count=(prefix.match(/\n/g)||[]).length;if(count>0){result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)))}else{result.push(prefix);result.push(generateComment(comment))}}else{tailingToStatement=!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString());specialBase=stringRepeat(" ",calculateSpaces(toSourceNodeWhenNeeded([base,result,indent]).toString()));for(i=0,len=stmt.trailingComments.length;i<len;++i){comment=stmt.trailingComments[i];if(tailingToStatement){if(i===0){result=[result,indent]}else{result=[result,specialBase]}result.push(generateComment(comment,specialBase))}else{result=[result,addIndent(generateComment(comment))]}if(i!==len-1&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result=[result,"\n"]}}}}return result}function generateBlankLines(start,end,result){var j,newlineCount=0;for(j=start;j<end;j++){if(sourceCode[j]==="\n"){newlineCount++}}for(j=1;j<newlineCount;j++){result.push(newline)}}function parenthesize(text,current,should){if(current<should){return["(",text,")"]}return text}function generateVerbatimString(string){var i,iz,result;result=string.split(/\r\n|\n/);for(i=1,iz=result.length;i<iz;i++){result[i]=newline+base+result[i]}return result}function generateVerbatim(expr,precedence){var verbatim,result,prec;verbatim=expr[extra.verbatim];if(typeof verbatim==="string"){result=parenthesize(generateVerbatimString(verbatim),Precedence.Sequence,precedence)}else{result=generateVerbatimString(verbatim.content);prec=verbatim.precedence!=null?verbatim.precedence:Precedence.Sequence;result=parenthesize(result,prec,precedence)}return toSourceNodeWhenNeeded(result,expr)}function CodeGenerator(){}CodeGenerator.prototype.maybeBlock=function(stmt,flags){var result,noLeadingComment,that=this;noLeadingComment=!extra.comment||!stmt.leadingComments;if(stmt.type===Syntax.BlockStatement&&noLeadingComment){return[space,this.generateStatement(stmt,flags)]}if(stmt.type===Syntax.EmptyStatement&&noLeadingComment){return";"}withIndent(function(){result=[newline,addIndent(that.generateStatement(stmt,flags))]});return result};CodeGenerator.prototype.maybeBlockSuffix=function(stmt,result){var ends=endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString());if(stmt.type===Syntax.BlockStatement&&(!extra.comment||!stmt.leadingComments)&&!ends){return[result,space]}if(ends){return[result,base]}return[result,newline,base]};function generateIdentifier(node){return toSourceNodeWhenNeeded(node.name,node)}function generateAsyncPrefix(node,spaceRequired){return node.async?"async"+(spaceRequired?noEmptySpace():space):""}function generateStarSuffix(node){var isGenerator=node.generator&&!extra.moz.starlessGenerator;return isGenerator?"*"+space:""}function generateMethodPrefix(prop){var func=prop.value;if(func.async){return generateAsyncPrefix(func,!prop.computed)}else{return generateStarSuffix(func)?"*":""}}CodeGenerator.prototype.generatePattern=function(node,precedence,flags){if(node.type===Syntax.Identifier){return generateIdentifier(node)}return this.generateExpression(node,precedence,flags)};CodeGenerator.prototype.generateFunctionParams=function(node){var i,iz,result,hasDefault;hasDefault=false;if(node.type===Syntax.ArrowFunctionExpression&&!node.rest&&(!node.defaults||node.defaults.length===0)&&node.params.length===1&&node.params[0].type===Syntax.Identifier){result=[generateAsyncPrefix(node,true),generateIdentifier(node.params[0])]}else{result=node.type===Syntax.ArrowFunctionExpression?[generateAsyncPrefix(node,false)]:[];result.push("(");if(node.defaults){hasDefault=true}for(i=0,iz=node.params.length;i<iz;++i){if(hasDefault&&node.defaults[i]){result.push(this.generateAssignment(node.params[i],node.defaults[i],"=",Precedence.Assignment,E_TTT))}else{result.push(this.generatePattern(node.params[i],Precedence.Assignment,E_TTT))}if(i+1<iz){result.push(","+space)}}if(node.rest){if(node.params.length){result.push(","+space)}result.push("...");result.push(generateIdentifier(node.rest))}result.push(")")}return result};CodeGenerator.prototype.generateFunctionBody=function(node){var result,expr;result=this.generateFunctionParams(node);if(node.type===Syntax.ArrowFunctionExpression){result.push(space);result.push("=>")}if(node.expression){result.push(space);expr=this.generateExpression(node.body,Precedence.Assignment,E_TTT);if(expr.toString().charAt(0)==="{"){expr=["(",expr,")"]}result.push(expr)}else{result.push(this.maybeBlock(node.body,S_TTFF))}return result};CodeGenerator.prototype.generateIterationForStatement=function(operator,stmt,flags){var result=["for"+space+"("],that=this;withIndent(function(){if(stmt.left.type===Syntax.VariableDeclaration){withIndent(function(){result.push(stmt.left.kind+noEmptySpace());result.push(that.generateStatement(stmt.left.declarations[0],S_FFFF))})}else{result.push(that.generateExpression(stmt.left,Precedence.Call,E_TTT))}result=join(result,operator);result=[join(result,that.generateExpression(stmt.right,Precedence.Sequence,E_TTT)),")"]});result.push(this.maybeBlock(stmt.body,flags));return result};CodeGenerator.prototype.generatePropertyKey=function(expr,computed,value){var result=[];if(computed){result.push("[")}if(value.type==="AssignmentPattern"){result.push(this.AssignmentPattern(value,Precedence.Sequence,E_TTT))}else{result.push(this.generateExpression(expr,Precedence.Sequence,E_TTT))}if(computed){result.push("]")}return result};CodeGenerator.prototype.generateAssignment=function(left,right,operator,precedence,flags){if(Precedence.Assignment<precedence){flags|=F_ALLOW_IN}return parenthesize([this.generateExpression(left,Precedence.Call,flags),space+operator+space,this.generateExpression(right,Precedence.Assignment,flags)],Precedence.Assignment,precedence)};CodeGenerator.prototype.semicolon=function(flags){if(!semicolons&&flags&F_SEMICOLON_OPT){return""}return";"};CodeGenerator.Statement={BlockStatement:function(stmt,flags){var range,content,result=["{",newline],that=this;withIndent(function(){if(stmt.body.length===0&&preserveBlankLines){range=stmt.range;if(range[1]-range[0]>2){content=sourceCode.substring(range[0]+1,range[1]-1);if(content[0]==="\n"){result=["{"]}result.push(content)}}var i,iz,fragment,bodyFlags;bodyFlags=S_TFFF;if(flags&F_FUNC_BODY){bodyFlags|=F_DIRECTIVE_CTX}for(i=0,iz=stmt.body.length;i<iz;++i){if(preserveBlankLines){if(i===0){if(stmt.body[0].leadingComments){range=stmt.body[0].leadingComments[0].extendedRange;content=sourceCode.substring(range[0],range[1]);if(content[0]==="\n"){result=["{"]}}if(!stmt.body[0].leadingComments){generateBlankLines(stmt.range[0],stmt.body[0].range[0],result)}}if(i>0){if(!stmt.body[i-1].trailingComments&&!stmt.body[i].leadingComments){generateBlankLines(stmt.body[i-1].range[1],stmt.body[i].range[0],result)}}}if(i===iz-1){bodyFlags|=F_SEMICOLON_OPT}if(stmt.body[i].leadingComments&&preserveBlankLines){fragment=that.generateStatement(stmt.body[i],bodyFlags)}else{fragment=addIndent(that.generateStatement(stmt.body[i],bodyFlags))}result.push(fragment);if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){if(preserveBlankLines&&i<iz-1){if(!stmt.body[i+1].leadingComments){result.push(newline)}}else{result.push(newline)}}if(preserveBlankLines){if(i===iz-1){if(!stmt.body[i].trailingComments){generateBlankLines(stmt.body[i].range[1],stmt.range[1],result)}}}}});result.push(addIndent("}"));return result},BreakStatement:function(stmt,flags){if(stmt.label){return"break "+stmt.label.name+this.semicolon(flags)}return"break"+this.semicolon(flags)},ContinueStatement:function(stmt,flags){if(stmt.label){return"continue "+stmt.label.name+this.semicolon(flags)}return"continue"+this.semicolon(flags)},ClassBody:function(stmt,flags){var result=["{",newline],that=this;withIndent(function(indent){var i,iz;for(i=0,iz=stmt.body.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.body[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base);result.push("}");return result},ClassDeclaration:function(stmt,flags){var result,fragment;result=["class"];if(stmt.id){result=join(result,this.generateExpression(stmt.id,Precedence.Sequence,E_TTT))}if(stmt.superClass){fragment=join("extends",this.generateExpression(stmt.superClass,Precedence.Assignment,E_TTT));result=join(result,fragment)}result.push(space);result.push(this.generateStatement(stmt.body,S_TFFT));return result},DirectiveStatement:function(stmt,flags){if(extra.raw&&stmt.raw){return stmt.raw+this.semicolon(flags)}return escapeDirective(stmt.directive)+this.semicolon(flags)},DoWhileStatement:function(stmt,flags){var result=join("do",this.maybeBlock(stmt.body,S_TFFF));result=this.maybeBlockSuffix(stmt.body,result);return join(result,["while"+space+"(",this.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"+this.semicolon(flags)])},CatchClause:function(stmt,flags){var result,that=this;withIndent(function(){var guard;result=["catch"+space+"(",that.generateExpression(stmt.param,Precedence.Sequence,E_TTT),")"];if(stmt.guard){guard=that.generateExpression(stmt.guard,Precedence.Sequence,E_TTT);result.splice(2,0," if ",guard)}});result.push(this.maybeBlock(stmt.body,S_TFFF));return result},DebuggerStatement:function(stmt,flags){return"debugger"+this.semicolon(flags)},EmptyStatement:function(stmt,flags){return";"},ExportDefaultDeclaration:function(stmt,flags){var result=["export"],bodyFlags;bodyFlags=flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF;result=join(result,"default");if(isStatement(stmt.declaration)){result=join(result,this.generateStatement(stmt.declaration,bodyFlags))}else{result=join(result,this.generateExpression(stmt.declaration,Precedence.Assignment,E_TTT)+this.semicolon(flags))}return result},ExportNamedDeclaration:function(stmt,flags){var result=["export"],bodyFlags,that=this;bodyFlags=flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF;if(stmt.declaration){return join(result,this.generateStatement(stmt.declaration,bodyFlags))}if(stmt.specifiers){if(stmt.specifiers.length===0){result=join(result,"{"+space+"}")}else if(stmt.specifiers[0].type===Syntax.ExportBatchSpecifier){result=join(result,this.generateExpression(stmt.specifiers[0],Precedence.Sequence,E_TTT))}else{result=join(result,"{");withIndent(function(indent){var i,iz;result.push(newline);for(i=0,iz=stmt.specifiers.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.specifiers[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base+"}")}if(stmt.source){result=join(result,["from"+space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)])}else{result.push(this.semicolon(flags))}}return result},ExportAllDeclaration:function(stmt,flags){return["export"+space,"*"+space,"from"+space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)]},ExpressionStatement:function(stmt,flags){var result,fragment;function isClassPrefixed(fragment){var code;if(fragment.slice(0,5)!=="class"){return false}code=fragment.charCodeAt(5);return code===123||esutils.code.isWhiteSpace(code)||esutils.code.isLineTerminator(code)}function isFunctionPrefixed(fragment){var code;if(fragment.slice(0,8)!=="function"){return false}code=fragment.charCodeAt(8);return code===40||esutils.code.isWhiteSpace(code)||code===42||esutils.code.isLineTerminator(code)}function isAsyncPrefixed(fragment){var code,i,iz;if(fragment.slice(0,5)!=="async"){return false}if(!esutils.code.isWhiteSpace(fragment.charCodeAt(5))){return false}for(i=6,iz=fragment.length;i<iz;++i){if(!esutils.code.isWhiteSpace(fragment.charCodeAt(i))){break}}if(i===iz){return false}if(fragment.slice(i,i+8)!=="function"){return false}code=fragment.charCodeAt(i+8);return code===40||esutils.code.isWhiteSpace(code)||code===42||esutils.code.isLineTerminator(code)}result=[this.generateExpression(stmt.expression,Precedence.Sequence,E_TTT)];fragment=toSourceNodeWhenNeeded(result).toString();if(fragment.charCodeAt(0)===123||isClassPrefixed(fragment)||isFunctionPrefixed(fragment)||isAsyncPrefixed(fragment)||directive&&flags&F_DIRECTIVE_CTX&&stmt.expression.type===Syntax.Literal&&typeof stmt.expression.value==="string"){result=["(",result,")"+this.semicolon(flags)]}else{result.push(this.semicolon(flags))}return result},ImportDeclaration:function(stmt,flags){var result,cursor,that=this;if(stmt.specifiers.length===0){return["import",space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)]}result=["import"];cursor=0;if(stmt.specifiers[cursor].type===Syntax.ImportDefaultSpecifier){result=join(result,[this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT)]);++cursor}if(stmt.specifiers[cursor]){if(cursor!==0){result.push(",")}if(stmt.specifiers[cursor].type===Syntax.ImportNamespaceSpecifier){result=join(result,[space,this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT)])}else{result.push(space+"{");if(stmt.specifiers.length-cursor===1){result.push(space);result.push(this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT));result.push(space+"}"+space)}else{withIndent(function(indent){var i,iz;result.push(newline);for(i=cursor,iz=stmt.specifiers.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.specifiers[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base+"}"+space)}}}result=join(result,["from"+space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)]);return result},VariableDeclarator:function(stmt,flags){var itemFlags=flags&F_ALLOW_IN?E_TTT:E_FTT;if(stmt.init){return[this.generateExpression(stmt.id,Precedence.Assignment,itemFlags),space,"=",space,this.generateExpression(stmt.init,Precedence.Assignment,itemFlags)]}return this.generatePattern(stmt.id,Precedence.Assignment,itemFlags)},VariableDeclaration:function(stmt,flags){var result,i,iz,node,bodyFlags,that=this;result=[stmt.kind];bodyFlags=flags&F_ALLOW_IN?S_TFFF:S_FFFF;function block(){node=stmt.declarations[0];if(extra.comment&&node.leadingComments){result.push("\n");result.push(addIndent(that.generateStatement(node,bodyFlags)))}else{result.push(noEmptySpace());result.push(that.generateStatement(node,bodyFlags))}for(i=1,iz=stmt.declarations.length;i<iz;++i){node=stmt.declarations[i];if(extra.comment&&node.leadingComments){result.push(","+newline);result.push(addIndent(that.generateStatement(node,bodyFlags)))}else{result.push(","+space);result.push(that.generateStatement(node,bodyFlags))}}}if(stmt.declarations.length>1){withIndent(block)}else{block()}result.push(this.semicolon(flags));return result},ThrowStatement:function(stmt,flags){return[join("throw",this.generateExpression(stmt.argument,Precedence.Sequence,E_TTT)),this.semicolon(flags)]},TryStatement:function(stmt,flags){var result,i,iz,guardedHandlers;result=["try",this.maybeBlock(stmt.block,S_TFFF)];result=this.maybeBlockSuffix(stmt.block,result);if(stmt.handlers){for(i=0,iz=stmt.handlers.length;i<iz;++i){result=join(result,this.generateStatement(stmt.handlers[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(stmt.handlers[i].body,result)}}}else{guardedHandlers=stmt.guardedHandlers||[];for(i=0,iz=guardedHandlers.length;i<iz;++i){result=join(result,this.generateStatement(guardedHandlers[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(guardedHandlers[i].body,result)}}if(stmt.handler){if(isArray(stmt.handler)){for(i=0,iz=stmt.handler.length;i<iz;++i){result=join(result,this.generateStatement(stmt.handler[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(stmt.handler[i].body,result)}}}else{result=join(result,this.generateStatement(stmt.handler,S_TFFF));if(stmt.finalizer){result=this.maybeBlockSuffix(stmt.handler.body,result)}}}}if(stmt.finalizer){result=join(result,["finally",this.maybeBlock(stmt.finalizer,S_TFFF)])}return result},SwitchStatement:function(stmt,flags){var result,fragment,i,iz,bodyFlags,that=this;withIndent(function(){result=["switch"+space+"(",that.generateExpression(stmt.discriminant,Precedence.Sequence,E_TTT),")"+space+"{"+newline]});if(stmt.cases){bodyFlags=S_TFFF;for(i=0,iz=stmt.cases.length;i<iz;++i){if(i===iz-1){bodyFlags|=F_SEMICOLON_OPT}fragment=addIndent(this.generateStatement(stmt.cases[i],bodyFlags));result.push(fragment);if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){result.push(newline)}}}result.push(addIndent("}"));return result},SwitchCase:function(stmt,flags){var result,fragment,i,iz,bodyFlags,that=this;withIndent(function(){if(stmt.test){result=[join("case",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT)),":"]}else{result=["default:"]}i=0;iz=stmt.consequent.length;if(iz&&stmt.consequent[0].type===Syntax.BlockStatement){fragment=that.maybeBlock(stmt.consequent[0],S_TFFF);result.push(fragment);i=1}if(i!==iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}bodyFlags=S_TFFF;for(;i<iz;++i){if(i===iz-1&&flags&F_SEMICOLON_OPT){bodyFlags|=F_SEMICOLON_OPT}fragment=addIndent(that.generateStatement(stmt.consequent[i],bodyFlags));result.push(fragment);if(i+1!==iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){result.push(newline)}}});return result},IfStatement:function(stmt,flags){var result,bodyFlags,semicolonOptional,that=this;withIndent(function(){result=["if"+space+"(",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"]});semicolonOptional=flags&F_SEMICOLON_OPT;bodyFlags=S_TFFF;if(semicolonOptional){bodyFlags|=F_SEMICOLON_OPT}if(stmt.alternate){result.push(this.maybeBlock(stmt.consequent,S_TFFF));result=this.maybeBlockSuffix(stmt.consequent,result);if(stmt.alternate.type===Syntax.IfStatement){result=join(result,["else ",this.generateStatement(stmt.alternate,bodyFlags)])}else{result=join(result,join("else",this.maybeBlock(stmt.alternate,bodyFlags)))}}else{result.push(this.maybeBlock(stmt.consequent,bodyFlags))}return result},ForStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["for"+space+"("];if(stmt.init){if(stmt.init.type===Syntax.VariableDeclaration){result.push(that.generateStatement(stmt.init,S_FFFF))}else{result.push(that.generateExpression(stmt.init,Precedence.Sequence,E_FTT));result.push(";")}}else{result.push(";")}if(stmt.test){result.push(space);result.push(that.generateExpression(stmt.test,Precedence.Sequence,E_TTT));result.push(";")}else{result.push(";")}if(stmt.update){result.push(space);result.push(that.generateExpression(stmt.update,Precedence.Sequence,E_TTT));result.push(")")}else{result.push(")")}});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result},ForInStatement:function(stmt,flags){return this.generateIterationForStatement("in",stmt,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)},ForOfStatement:function(stmt,flags){return this.generateIterationForStatement("of",stmt,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)},LabeledStatement:function(stmt,flags){return[stmt.label.name+":",this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)]},Program:function(stmt,flags){var result,fragment,i,iz,bodyFlags;iz=stmt.body.length;result=[safeConcatenation&&iz>0?"\n":""];bodyFlags=S_TFTF;for(i=0;i<iz;++i){if(!safeConcatenation&&i===iz-1){bodyFlags|=F_SEMICOLON_OPT}if(preserveBlankLines){if(i===0){if(!stmt.body[0].leadingComments){generateBlankLines(stmt.range[0],stmt.body[i].range[0],result)}}if(i>0){if(!stmt.body[i-1].trailingComments&&!stmt.body[i].leadingComments){generateBlankLines(stmt.body[i-1].range[1],stmt.body[i].range[0],result)}}}fragment=addIndent(this.generateStatement(stmt.body[i],bodyFlags));result.push(fragment);if(i+1<iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){if(preserveBlankLines){if(!stmt.body[i+1].leadingComments){result.push(newline)}}else{result.push(newline)}}if(preserveBlankLines){if(i===iz-1){if(!stmt.body[i].trailingComments){generateBlankLines(stmt.body[i].range[1],stmt.range[1],result)}}}}return result},FunctionDeclaration:function(stmt,flags){return[generateAsyncPrefix(stmt,true),"function",generateStarSuffix(stmt)||noEmptySpace(),stmt.id?generateIdentifier(stmt.id):"",this.generateFunctionBody(stmt)]},ReturnStatement:function(stmt,flags){if(stmt.argument){return[join("return",this.generateExpression(stmt.argument,Precedence.Sequence,E_TTT)),this.semicolon(flags)]}return["return"+this.semicolon(flags)]},WhileStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["while"+space+"(",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"]});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result},WithStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["with"+space+"(",that.generateExpression(stmt.object,Precedence.Sequence,E_TTT),")"]});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result}};merge(CodeGenerator.prototype,CodeGenerator.Statement);CodeGenerator.Expression={SequenceExpression:function(expr,precedence,flags){var result,i,iz;if(Precedence.Sequence<precedence){flags|=F_ALLOW_IN}result=[];for(i=0,iz=expr.expressions.length;i<iz;++i){result.push(this.generateExpression(expr.expressions[i],Precedence.Assignment,flags));if(i+1<iz){result.push(","+space)}}return parenthesize(result,Precedence.Sequence,precedence)},AssignmentExpression:function(expr,precedence,flags){return this.generateAssignment(expr.left,expr.right,expr.operator,precedence,flags)},ArrowFunctionExpression:function(expr,precedence,flags){return parenthesize(this.generateFunctionBody(expr),Precedence.ArrowFunction,precedence)},ConditionalExpression:function(expr,precedence,flags){if(Precedence.Conditional<precedence){flags|=F_ALLOW_IN}return parenthesize([this.generateExpression(expr.test,Precedence.LogicalOR,flags),space+"?"+space,this.generateExpression(expr.consequent,Precedence.Assignment,flags),space+":"+space,this.generateExpression(expr.alternate,Precedence.Assignment,flags)],Precedence.Conditional,precedence)},LogicalExpression:function(expr,precedence,flags){return this.BinaryExpression(expr,precedence,flags)},BinaryExpression:function(expr,precedence,flags){var result,currentPrecedence,fragment,leftSource;currentPrecedence=BinaryPrecedence[expr.operator];if(currentPrecedence<precedence){flags|=F_ALLOW_IN}fragment=this.generateExpression(expr.left,currentPrecedence,flags);leftSource=fragment.toString();if(leftSource.charCodeAt(leftSource.length-1)===47&&esutils.code.isIdentifierPartES5(expr.operator.charCodeAt(0))){result=[fragment,noEmptySpace(),expr.operator]}else{result=join(fragment,expr.operator)}fragment=this.generateExpression(expr.right,currentPrecedence+1,flags);if(expr.operator==="/"&&fragment.toString().charAt(0)==="/"||expr.operator.slice(-1)==="<"&&fragment.toString().slice(0,3)==="!--"){result.push(noEmptySpace());result.push(fragment)}else{result=join(result,fragment)}if(expr.operator==="in"&&!(flags&F_ALLOW_IN)){return["(",result,")"]}return parenthesize(result,currentPrecedence,precedence)},CallExpression:function(expr,precedence,flags){var result,i,iz;result=[this.generateExpression(expr.callee,Precedence.Call,E_TTF)];result.push("(");for(i=0,iz=expr["arguments"].length;i<iz;++i){result.push(this.generateExpression(expr["arguments"][i],Precedence.Assignment,E_TTT));if(i+1<iz){result.push(","+space)}}result.push(")");if(!(flags&F_ALLOW_CALL)){return["(",result,")"]}return parenthesize(result,Precedence.Call,precedence)},NewExpression:function(expr,precedence,flags){var result,length,i,iz,itemFlags;length=expr["arguments"].length;itemFlags=flags&F_ALLOW_UNPARATH_NEW&&!parentheses&&length===0?E_TFT:E_TFF;result=join("new",this.generateExpression(expr.callee,Precedence.New,itemFlags));if(!(flags&F_ALLOW_UNPARATH_NEW)||parentheses||length>0){result.push("(");for(i=0,iz=length;i<iz;++i){result.push(this.generateExpression(expr["arguments"][i],Precedence.Assignment,E_TTT));if(i+1<iz){result.push(","+space)}}result.push(")")}return parenthesize(result,Precedence.New,precedence)},MemberExpression:function(expr,precedence,flags){var result,fragment;result=[this.generateExpression(expr.object,Precedence.Call,flags&F_ALLOW_CALL?E_TTF:E_TFF)];if(expr.computed){result.push("[");result.push(this.generateExpression(expr.property,Precedence.Sequence,flags&F_ALLOW_CALL?E_TTT:E_TFT));result.push("]")}else{if(expr.object.type===Syntax.Literal&&typeof expr.object.value==="number"){fragment=toSourceNodeWhenNeeded(result).toString();if(fragment.indexOf(".")<0&&!/[eExX]/.test(fragment)&&esutils.code.isDecimalDigit(fragment.charCodeAt(fragment.length-1))&&!(fragment.length>=2&&fragment.charCodeAt(0)===48)){result.push(".")}}result.push(".");result.push(generateIdentifier(expr.property))}return parenthesize(result,Precedence.Member,precedence)},MetaProperty:function(expr,precedence,flags){var result;result=[];result.push(expr.meta);result.push(".");result.push(expr.property);return parenthesize(result,Precedence.Member,precedence)},UnaryExpression:function(expr,precedence,flags){var result,fragment,rightCharCode,leftSource,leftCharCode;fragment=this.generateExpression(expr.argument,Precedence.Unary,E_TTT);if(space===""){result=join(expr.operator,fragment)}else{result=[expr.operator];if(expr.operator.length>2){result=join(result,fragment)}else{leftSource=toSourceNodeWhenNeeded(result).toString();leftCharCode=leftSource.charCodeAt(leftSource.length-1);rightCharCode=fragment.toString().charCodeAt(0);if((leftCharCode===43||leftCharCode===45)&&leftCharCode===rightCharCode||esutils.code.isIdentifierPartES5(leftCharCode)&&esutils.code.isIdentifierPartES5(rightCharCode)){result.push(noEmptySpace());result.push(fragment)}else{result.push(fragment)}}}return parenthesize(result,Precedence.Unary,precedence)},YieldExpression:function(expr,precedence,flags){var result;if(expr.delegate){result="yield*"}else{result="yield"}if(expr.argument){result=join(result,this.generateExpression(expr.argument,Precedence.Yield,E_TTT))}return parenthesize(result,Precedence.Yield,precedence)},AwaitExpression:function(expr,precedence,flags){var result=join(expr.all?"await*":"await",this.generateExpression(expr.argument,Precedence.Await,E_TTT));return parenthesize(result,Precedence.Await,precedence)},UpdateExpression:function(expr,precedence,flags){if(expr.prefix){return parenthesize([expr.operator,this.generateExpression(expr.argument,Precedence.Unary,E_TTT)],Precedence.Unary,precedence)}return parenthesize([this.generateExpression(expr.argument,Precedence.Postfix,E_TTT),expr.operator],Precedence.Postfix,precedence)},FunctionExpression:function(expr,precedence,flags){var result=[generateAsyncPrefix(expr,true),"function"];if(expr.id){result.push(generateStarSuffix(expr)||noEmptySpace());result.push(generateIdentifier(expr.id))}else{result.push(generateStarSuffix(expr)||space)}result.push(this.generateFunctionBody(expr));return result},ArrayPattern:function(expr,precedence,flags){return this.ArrayExpression(expr,precedence,flags,true)},ArrayExpression:function(expr,precedence,flags,isPattern){var result,multiline,that=this;if(!expr.elements.length){return"[]"}multiline=isPattern?false:expr.elements.length>1;result=["[",multiline?newline:""];withIndent(function(indent){var i,iz;for(i=0,iz=expr.elements.length;i<iz;++i){if(!expr.elements[i]){if(multiline){result.push(indent)}if(i+1===iz){result.push(",")}}else{result.push(multiline?indent:"");result.push(that.generateExpression(expr.elements[i],Precedence.Assignment,E_TTT))}if(i+1<iz){result.push(","+(multiline?newline:space))}}});if(multiline&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(multiline?base:"");result.push("]");return result},RestElement:function(expr,precedence,flags){return"..."+this.generatePattern(expr.argument)},ClassExpression:function(expr,precedence,flags){var result,fragment;result=["class"];if(expr.id){result=join(result,this.generateExpression(expr.id,Precedence.Sequence,E_TTT))}if(expr.superClass){fragment=join("extends",this.generateExpression(expr.superClass,Precedence.Assignment,E_TTT));result=join(result,fragment)}result.push(space);result.push(this.generateStatement(expr.body,S_TFFT));return result},MethodDefinition:function(expr,precedence,flags){var result,fragment;if(expr["static"]){result=["static"+space]}else{result=[]}if(expr.kind==="get"||expr.kind==="set"){fragment=[join(expr.kind,this.generatePropertyKey(expr.key,expr.computed,expr.value)),this.generateFunctionBody(expr.value)]}else{fragment=[generateMethodPrefix(expr),this.generatePropertyKey(expr.key,expr.computed,expr.value),this.generateFunctionBody(expr.value)]}return join(result,fragment)},Property:function(expr,precedence,flags){if(expr.kind==="get"||expr.kind==="set"){return[expr.kind,noEmptySpace(),this.generatePropertyKey(expr.key,expr.computed,expr.value),this.generateFunctionBody(expr.value)]}if(expr.shorthand){return this.generatePropertyKey(expr.key,expr.computed,expr.value)}if(expr.method){return[generateMethodPrefix(expr),this.generatePropertyKey(expr.key,expr.computed,expr.value),this.generateFunctionBody(expr.value)]}return[this.generatePropertyKey(expr.key,expr.computed,expr.value),":"+space,this.generateExpression(expr.value,Precedence.Assignment,E_TTT)]},ObjectExpression:function(expr,precedence,flags){var multiline,result,fragment,that=this;if(!expr.properties.length){return"{}"}multiline=expr.properties.length>1;withIndent(function(){fragment=that.generateExpression(expr.properties[0],Precedence.Sequence,E_TTT)});if(!multiline){if(!hasLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){return["{",space,fragment,space,"}"]}}withIndent(function(indent){var i,iz;result=["{",newline,indent,fragment];if(multiline){result.push(","+newline);for(i=1,iz=expr.properties.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(expr.properties[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base);result.push("}");return result},AssignmentPattern:function(expr,precedence,flags){return this.generateAssignment(expr.left,expr.right,"=",precedence,flags)},ObjectPattern:function(expr,precedence,flags){var result,i,iz,multiline,property,that=this;if(!expr.properties.length){return"{}"}multiline=false;if(expr.properties.length===1){property=expr.properties[0];if(property.value.type!==Syntax.Identifier){multiline=true}}else{for(i=0,iz=expr.properties.length;i<iz;++i){property=expr.properties[i];if(!property.shorthand){multiline=true;break}}}result=["{",multiline?newline:""];withIndent(function(indent){var i,iz;for(i=0,iz=expr.properties.length;i<iz;++i){result.push(multiline?indent:"");result.push(that.generateExpression(expr.properties[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+(multiline?newline:space))}}});if(multiline&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(multiline?base:"");result.push("}");return result},ThisExpression:function(expr,precedence,flags){return"this"},Super:function(expr,precedence,flags){return"super"},Identifier:function(expr,precedence,flags){return generateIdentifier(expr)},ImportDefaultSpecifier:function(expr,precedence,flags){return generateIdentifier(expr.id||expr.local)},ImportNamespaceSpecifier:function(expr,precedence,flags){var result=["*"];var id=expr.id||expr.local;if(id){result.push(space+"as"+noEmptySpace()+generateIdentifier(id))}return result},ImportSpecifier:function(expr,precedence,flags){var imported=expr.imported;var result=[imported.name];var local=expr.local;if(local&&local.name!==imported.name){result.push(noEmptySpace()+"as"+noEmptySpace()+generateIdentifier(local))}return result},ExportSpecifier:function(expr,precedence,flags){var local=expr.local;var result=[local.name];var exported=expr.exported;if(exported&&exported.name!==local.name){result.push(noEmptySpace()+"as"+noEmptySpace()+generateIdentifier(exported))}return result},Literal:function(expr,precedence,flags){var raw;if(expr.hasOwnProperty("raw")&&parse&&extra.raw){try{raw=parse(expr.raw).body[0].expression;if(raw.type===Syntax.Literal){if(raw.value===expr.value){return expr.raw}}}catch(e){}}if(expr.value===null){return"null"}if(typeof expr.value==="string"){return escapeString(expr.value)}if(typeof expr.value==="number"){return generateNumber(expr.value)}if(typeof expr.value==="boolean"){return expr.value?"true":"false"}return generateRegExp(expr.value)},GeneratorExpression:function(expr,precedence,flags){return this.ComprehensionExpression(expr,precedence,flags)},ComprehensionExpression:function(expr,precedence,flags){var result,i,iz,fragment,that=this;result=expr.type===Syntax.GeneratorExpression?["("]:["["];if(extra.moz.comprehensionExpressionStartsWithAssignment){fragment=this.generateExpression(expr.body,Precedence.Assignment,E_TTT);result.push(fragment)}if(expr.blocks){withIndent(function(){for(i=0,iz=expr.blocks.length;i<iz;++i){fragment=that.generateExpression(expr.blocks[i],Precedence.Sequence,E_TTT);if(i>0||extra.moz.comprehensionExpressionStartsWithAssignment){result=join(result,fragment)}else{result.push(fragment)}}})}if(expr.filter){result=join(result,"if"+space);fragment=this.generateExpression(expr.filter,Precedence.Sequence,E_TTT);result=join(result,["(",fragment,")"])}if(!extra.moz.comprehensionExpressionStartsWithAssignment){fragment=this.generateExpression(expr.body,Precedence.Assignment,E_TTT);result=join(result,fragment)}result.push(expr.type===Syntax.GeneratorExpression?")":"]");return result},ComprehensionBlock:function(expr,precedence,flags){var fragment;if(expr.left.type===Syntax.VariableDeclaration){fragment=[expr.left.kind,noEmptySpace(),this.generateStatement(expr.left.declarations[0],S_FFFF)]}else{fragment=this.generateExpression(expr.left,Precedence.Call,E_TTT)}fragment=join(fragment,expr.of?"of":"in");fragment=join(fragment,this.generateExpression(expr.right,Precedence.Sequence,E_TTT));return["for"+space+"(",fragment,")"]},SpreadElement:function(expr,precedence,flags){return["...",this.generateExpression(expr.argument,Precedence.Assignment,E_TTT)]},TaggedTemplateExpression:function(expr,precedence,flags){var itemFlags=E_TTF;if(!(flags&F_ALLOW_CALL)){itemFlags=E_TFF}var result=[this.generateExpression(expr.tag,Precedence.Call,itemFlags),this.generateExpression(expr.quasi,Precedence.Primary,E_FFT)];return parenthesize(result,Precedence.TaggedTemplate,precedence)},TemplateElement:function(expr,precedence,flags){return expr.value.raw},TemplateLiteral:function(expr,precedence,flags){var result,i,iz;result=["`"];for(i=0,iz=expr.quasis.length;i<iz;++i){result.push(this.generateExpression(expr.quasis[i],Precedence.Primary,E_TTT));if(i+1<iz){result.push("${"+space);result.push(this.generateExpression(expr.expressions[i],Precedence.Sequence,E_TTT));result.push(space+"}")}}result.push("`");return result},ModuleSpecifier:function(expr,precedence,flags){return this.Literal(expr,precedence,flags)}};merge(CodeGenerator.prototype,CodeGenerator.Expression);CodeGenerator.prototype.generateExpression=function(expr,precedence,flags){var result,type;type=expr.type||Syntax.Property;if(extra.verbatim&&expr.hasOwnProperty(extra.verbatim)){return generateVerbatim(expr,precedence)}result=this[type](expr,precedence,flags);if(extra.comment){result=addComments(expr,result)}return toSourceNodeWhenNeeded(result,expr)};CodeGenerator.prototype.generateStatement=function(stmt,flags){var result,fragment;result=this[stmt.type](stmt,flags);if(extra.comment){result=addComments(stmt,result)}fragment=toSourceNodeWhenNeeded(result).toString();if(stmt.type===Syntax.Program&&!safeConcatenation&&newline===""&&fragment.charAt(fragment.length-1)==="\n"){result=sourceMap?toSourceNodeWhenNeeded(result).replaceRight(/\s+$/,""):fragment.replace(/\s+$/,"")}return toSourceNodeWhenNeeded(result,stmt)};function generateInternal(node){var codegen;codegen=new CodeGenerator;if(isStatement(node)){return codegen.generateStatement(node,S_TFFF)}if(isExpression(node)){return codegen.generateExpression(node,Precedence.Sequence,E_TTT)}throw new Error("Unknown node type: "+node.type)}function generate(node,options){var defaultOptions=getDefaultOptions(),result,pair;if(options!=null){if(typeof options.indent==="string"){defaultOptions.format.indent.style=options.indent}if(typeof options.base==="number"){defaultOptions.format.indent.base=options.base}options=updateDeeply(defaultOptions,options);indent=options.format.indent.style;if(typeof options.base==="string"){base=options.base}else{base=stringRepeat(indent,options.format.indent.base)}}else{options=defaultOptions;indent=options.format.indent.style;base=stringRepeat(indent,options.format.indent.base)}json=options.format.json;renumber=options.format.renumber;hexadecimal=json?false:options.format.hexadecimal;quotes=json?"double":options.format.quotes;escapeless=options.format.escapeless;newline=options.format.newline;space=options.format.space;if(options.format.compact){newline=space=indent=base=""}parentheses=options.format.parentheses;semicolons=options.format.semicolons;safeConcatenation=options.format.safeConcatenation;directive=options.directive;parse=json?null:options.parse;sourceMap=options.sourceMap;sourceCode=options.sourceCode;preserveBlankLines=options.format.preserveBlankLines&&sourceCode!==null;extra=options;if(sourceMap){if(!exports.browser){SourceNode=require("source-map").SourceNode}else{SourceNode=global.sourceMap.SourceNode}}result=generateInternal(node);if(!sourceMap){pair={code:result.toString(),map:null};return options.sourceMapWithCode?pair:pair.code}pair=result.toStringWithSourceMap({file:options.file,sourceRoot:options.sourceMapRoot});if(options.sourceContent){pair.map.setSourceContent(options.sourceMap,options.sourceContent)}if(options.sourceMapWithCode){return pair}return pair.map.toString()}FORMAT_MINIFY={indent:{style:"",base:0},renumber:true,hexadecimal:true,quotes:"auto",escapeless:true,compact:true,parentheses:false,semicolons:false};FORMAT_DEFAULTS=getDefaultOptions().format;exports.version=require("./package.json").version;exports.generate=generate;exports.attachComments=estraverse.attachComments;exports.Precedence=updateDeeply({},Precedence);exports.browser=false;exports.FORMAT_MINIFY=FORMAT_MINIFY;exports.FORMAT_DEFAULTS=FORMAT_DEFAULTS})()}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./package.json":481,estraverse:468,esutils:501,"source-map":469}],468:[function(require,module,exports){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{factory(root.estraverse={})}})(this,function clone(exports){"use strict";var Syntax,isArray,VisitorOption,VisitorKeys,objectCreate,objectKeys,BREAK,SKIP,REMOVE;function ignoreJSHintError(){}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){var ret={},key,val;for(key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){ret[key]=deepCopy(val)}else{ret[key]=val}}}return ret}function shallowCopy(obj){var ret={},key;for(key in obj){if(obj.hasOwnProperty(key)){ret[key]=obj[key]}}return ret}ignoreJSHintError(shallowCopy);function upperBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){len=diff}else{i=current+1;len-=diff+1}}return i}function lowerBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){i=current+1;len-=diff+1}else{len=diff}}return i}ignoreJSHintError(lowerBound);objectCreate=Object.create||function(){function F(){}return function(o){F.prototype=o;return new F}}();objectKeys=Object.keys||function(o){var keys=[],key;for(key in o){keys.push(key)}return keys};function extend(to,from){var keys=objectKeys(from),key,i,len;for(i=0,len=keys.length;i<len;i+=1){key=keys[i];to[key]=from[key]}return to}Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};VisitorKeys={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportBatchSpecifier:[],ExportDeclaration:["declaration","specifiers","source"],ExportSpecifier:["id","name"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["id"],ImportNamespaceSpecifier:["id"],ImportSpecifier:["id","name"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};BREAK={};SKIP={};REMOVE={};VisitorOption={Break:BREAK,Skip:SKIP,Remove:REMOVE};function Reference(parent,key){this.parent=parent;this.key=key}Reference.prototype.replace=function replace(node){this.parent[this.key]=node};Reference.prototype.remove=function remove(){if(isArray(this.parent)){this.parent.splice(this.key,1);return true}else{this.replace(null);return false}};function Element(node,path,wrap,ref){this.node=node;this.path=path;this.wrap=wrap;this.ref=ref}function Controller(){}Controller.prototype.path=function path(){var i,iz,j,jz,result,element;function addToPath(result,path){if(isArray(path)){for(j=0,jz=path.length;j<jz;++j){result.push(path[j])}}else{result.push(path)}}if(!this.__current.path){return null}result=[];for(i=2,iz=this.__leavelist.length;i<iz;++i){element=this.__leavelist[i];addToPath(result,element.path)}addToPath(result,this.__current.path);return result};Controller.prototype.type=function(){var node=this.current();return node.type||this.__current.wrap};Controller.prototype.parents=function parents(){var i,iz,result;result=[];for(i=1,iz=this.__leavelist.length;i<iz;++i){result.push(this.__leavelist[i].node)}return result};Controller.prototype.current=function current(){return this.__current.node};Controller.prototype.__execute=function __execute(callback,element){var previous,result;result=undefined;previous=this.__current;this.__current=element;this.__state=null;if(callback){result=callback.call(this,element.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=previous;return result};Controller.prototype.notify=function notify(flag){this.__state=flag};Controller.prototype.skip=function(){this.notify(SKIP)};Controller.prototype["break"]=function(){this.notify(BREAK)};Controller.prototype.remove=function(){this.notify(REMOVE)};Controller.prototype.__initialize=function(root,visitor){this.visitor=visitor;this.root=root;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null;this.__fallback=visitor.fallback==="iteration";this.__keys=VisitorKeys;if(visitor.keys){this.__keys=extend(objectCreate(this.__keys),visitor.keys)}};function isNode(node){if(node==null){return false}return typeof node==="object"&&typeof node.type==="string"}function isProperty(nodeType,key){return(nodeType===Syntax.ObjectExpression||nodeType===Syntax.ObjectPattern)&&"properties"===key}Controller.prototype.traverse=function traverse(root,visitor){var worklist,leavelist,element,node,nodeType,ret,key,current,current2,candidates,candidate,sentinel;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;worklist.push(new Element(root,null,null,null));leavelist.push(new Element(null,null,null,null));while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();ret=this.__execute(visitor.leave,element);if(this.__state===BREAK||ret===BREAK){return}continue}if(element.node){ret=this.__execute(visitor.enter,element);if(this.__state===BREAK||ret===BREAK){return}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||ret===SKIP){continue}node=element.node;nodeType=element.wrap||node.type;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",null)}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,null)}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,null))}}}}};Controller.prototype.replace=function replace(root,visitor){function removeElem(element){var i,key,nextElem,parent;if(element.ref.remove()){key=element.ref.key;parent=element.ref.parent;i=worklist.length;while(i--){nextElem=worklist[i];if(nextElem.ref&&nextElem.ref.parent===parent){if(nextElem.ref.key<key){break}--nextElem.ref.key}}}}var worklist,leavelist,node,nodeType,target,element,current,current2,candidates,candidate,sentinel,outer,key;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;outer={root:root};element=new Element(root,null,null,new Reference(outer,"root"));worklist.push(element);leavelist.push(element);while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();target=this.__execute(visitor.leave,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target)}if(this.__state===REMOVE||target===REMOVE){removeElem(element)}if(this.__state===BREAK||target===BREAK){return outer.root}continue}target=this.__execute(visitor.enter,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target);element.node=target}if(this.__state===REMOVE||target===REMOVE){removeElem(element);element.node=null}if(this.__state===BREAK||target===BREAK){return outer.root}node=element.node;if(!node){continue}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||target===SKIP){continue}nodeType=element.wrap||node.type;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",new Reference(candidate,current2))}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,new Reference(candidate,current2))}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,new Reference(node,key)))}}}return outer.root};function traverse(root,visitor){var controller=new Controller;return controller.traverse(root,visitor)}function replace(root,visitor){var controller=new Controller;return controller.replace(root,visitor)}function extendCommentRange(comment,tokens){var target;target=upperBound(tokens,function search(token){return token.range[0]>comment.range[0]});comment.extendedRange=[comment.range[0],comment.range[1]];if(target!==tokens.length){comment.extendedRange[1]=tokens[target].range[0]}target-=1;if(target>=0){comment.extendedRange[0]=tokens[target].range[1]}return comment}function attachComments(tree,providedComments,tokens){var comments=[],comment,len,i,cursor;if(!tree.range){throw new Error("attachComments needs range information")}if(!tokens.length){if(providedComments.length){for(i=0,len=providedComments.length;i<len;i+=1){comment=deepCopy(providedComments[i]);comment.extendedRange=[0,tree.range[0]];comments.push(comment)}tree.leadingComments=comments}return tree}for(i=0,len=providedComments.length;i<len;i+=1){comments.push(extendCommentRange(deepCopy(providedComments[i]),tokens))}cursor=0;traverse(tree,{enter:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(comment.extendedRange[1]>node.range[0]){break}if(comment.extendedRange[1]===node.range[0]){if(!node.leadingComments){node.leadingComments=[]}node.leadingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});cursor=0;traverse(tree,{leave:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(node.range[1]<comment.extendedRange[0]){break}if(node.range[1]===comment.extendedRange[0]){if(!node.trailingComments){node.trailingComments=[]}node.trailingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});return tree}exports.version="1.8.1-dev";exports.Syntax=Syntax;exports.traverse=traverse;exports.replace=replace;exports.attachComments=attachComments;exports.VisitorKeys=VisitorKeys;exports.VisitorOption=VisitorOption;exports.Controller=Controller;exports.cloneEnvironment=function(){return clone({})};return exports})},{}],469:[function(require,module,exports){exports.SourceMapGenerator=require("./source-map/source-map-generator").SourceMapGenerator;exports.SourceMapConsumer=require("./source-map/source-map-consumer").SourceMapConsumer;exports.SourceNode=require("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":477,"./source-map/source-map-generator":478,"./source-map/source-node":479}],470:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");function ArraySet(){this._array=[];this._set={}}ArraySet.fromArray=function ArraySet_fromArray(aArray,aAllowDuplicates){var set=new ArraySet;for(var i=0,len=aArray.length;i<len;i++){set.add(aArray[i],aAllowDuplicates)}return set};ArraySet.prototype.add=function ArraySet_add(aStr,aAllowDuplicates){var isDuplicate=this.has(aStr);var idx=this._array.length;if(!isDuplicate||aAllowDuplicates){this._array.push(aStr)}if(!isDuplicate){this._set[util.toSetString(aStr)]=idx}};ArraySet.prototype.has=function ArraySet_has(aStr){return Object.prototype.hasOwnProperty.call(this._set,util.toSetString(aStr))};ArraySet.prototype.indexOf=function ArraySet_indexOf(aStr){if(this.has(aStr)){return this._set[util.toSetString(aStr)]}throw new Error('"'+aStr+'" is not in the set.')};ArraySet.prototype.at=function ArraySet_at(aIdx){if(aIdx>=0&&aIdx<this._array.length){return this._array[aIdx]}throw new Error("No element indexed by "+aIdx)};ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()};exports.ArraySet=ArraySet})},{"./util":480,amdefine:357}],471:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var base64=require("./base64");var VLQ_BASE_SHIFT=5;var VLQ_BASE=1<<VLQ_BASE_SHIFT;var VLQ_BASE_MASK=VLQ_BASE-1;var VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(aValue){return aValue<0?(-aValue<<1)+1:(aValue<<1)+0}function fromVLQSigned(aValue){var isNegative=(aValue&1)===1;var shifted=aValue>>1;return isNegative?-shifted:shifted}exports.encode=function base64VLQ_encode(aValue){var encoded="";var digit;var vlq=toVLQSigned(aValue);do{digit=vlq&VLQ_BASE_MASK;vlq>>>=VLQ_BASE_SHIFT;if(vlq>0){digit|=VLQ_CONTINUATION_BIT}encoded+=base64.encode(digit)}while(vlq>0);return encoded};exports.decode=function base64VLQ_decode(aStr,aOutParam){var i=0;var strLen=aStr.length;var result=0;var shift=0;var continuation,digit;do{if(i>=strLen){throw new Error("Expected more digits in base 64 VLQ value.")}digit=base64.decode(aStr.charAt(i++));continuation=!!(digit&VLQ_CONTINUATION_BIT);digit&=VLQ_BASE_MASK;result=result+(digit<<shift);shift+=VLQ_BASE_SHIFT}while(continuation);aOutParam.value=fromVLQSigned(result);aOutParam.rest=aStr.slice(i)}})},{"./base64":472,amdefine:357}],472:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var charToIntMap={};var intToCharMap={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(ch,index){charToIntMap[ch]=index;intToCharMap[index]=ch});exports.encode=function base64_encode(aNumber){if(aNumber in intToCharMap){return intToCharMap[aNumber]}throw new TypeError("Must be between 0 and 63: "+aNumber)};exports.decode=function base64_decode(aChar){if(aChar in charToIntMap){return charToIntMap[aChar]}throw new TypeError("Not a valid base 64 digit: "+aChar)}})},{amdefine:357}],473:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");var binarySearch=require("./binary-search");var ArraySet=require("./array-set").ArraySet;var base64VLQ=require("./base64-vlq");var SourceMapConsumer=require("./source-map-consumer").SourceMapConsumer;function BasicSourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}var version=util.getArg(sourceMap,"version");var sources=util.getArg(sourceMap,"sources");var names=util.getArg(sourceMap,"names",[]);var sourceRoot=util.getArg(sourceMap,"sourceRoot",null);var sourcesContent=util.getArg(sourceMap,"sourcesContent",null);var mappings=util.getArg(sourceMap,"mappings");var file=util.getArg(sourceMap,"file",null);if(version!=this._version){throw new Error("Unsupported version: "+version)}sources=sources.map(util.normalize);this._names=ArraySet.fromArray(names,true);this._sources=ArraySet.fromArray(sources,true);this.sourceRoot=sourceRoot;this.sourcesContent=sourcesContent;this._mappings=mappings;this.file=file}BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype);BasicSourceMapConsumer.prototype.consumer=SourceMapConsumer;BasicSourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(aSourceMap){var smc=Object.create(BasicSourceMapConsumer.prototype);smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),true);smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),true);smc.sourceRoot=aSourceMap._sourceRoot;smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot);smc.file=aSourceMap._file;smc.__generatedMappings=aSourceMap._mappings.toArray().slice();smc.__originalMappings=aSourceMap._mappings.toArray().slice().sort(util.compareByOriginalPositions);return smc};BasicSourceMapConsumer.prototype._version=3;Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._sources.toArray().map(function(s){return this.sourceRoot!=null?util.join(this.sourceRoot,s):s},this)}});BasicSourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){var generatedLine=1;var previousGeneratedColumn=0;var previousOriginalLine=0;var previousOriginalColumn=0;var previousSource=0;var previousName=0;var str=aStr;var temp={};var mapping;while(str.length>0){if(str.charAt(0)===";"){generatedLine++;str=str.slice(1);previousGeneratedColumn=0}else if(str.charAt(0)===","){str=str.slice(1)}else{mapping={};mapping.generatedLine=generatedLine;base64VLQ.decode(str,temp);mapping.generatedColumn=previousGeneratedColumn+temp.value;previousGeneratedColumn=mapping.generatedColumn;str=temp.rest;if(str.length>0&&!this._nextCharIsMappingSeparator(str)){base64VLQ.decode(str,temp);mapping.source=this._sources.at(previousSource+temp.value);previousSource+=temp.value;str=temp.rest;if(str.length===0||this._nextCharIsMappingSeparator(str)){throw new Error("Found a source, but no line and column")}base64VLQ.decode(str,temp);mapping.originalLine=previousOriginalLine+temp.value;previousOriginalLine=mapping.originalLine;mapping.originalLine+=1;str=temp.rest;if(str.length===0||this._nextCharIsMappingSeparator(str)){throw new Error("Found a source and line, but no column")}base64VLQ.decode(str,temp);mapping.originalColumn=previousOriginalColumn+temp.value;previousOriginalColumn=mapping.originalColumn;str=temp.rest;if(str.length>0&&!this._nextCharIsMappingSeparator(str)){base64VLQ.decode(str,temp);mapping.name=this._names.at(previousName+temp.value);previousName+=temp.value;str=temp.rest}}this.__generatedMappings.push(mapping);if(typeof mapping.originalLine==="number"){this.__originalMappings.push(mapping)}}}this.__generatedMappings.sort(util.compareByGeneratedPositions);this.__originalMappings.sort(util.compareByOriginalPositions)};BasicSourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(aNeedle,aMappings,aLineName,aColumnName,aComparator){if(aNeedle[aLineName]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName])}if(aNeedle[aColumnName]<0){throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName])}return binarySearch.search(aNeedle,aMappings,aComparator)};BasicSourceMapConsumer.prototype.computeColumnSpans=function SourceMapConsumer_computeColumnSpans(){for(var index=0;index<this._generatedMappings.length;++index){var mapping=this._generatedMappings[index];if(index+1<this._generatedMappings.length){var nextMapping=this._generatedMappings[index+1];if(mapping.generatedLine===nextMapping.generatedLine){mapping.lastGeneratedColumn=nextMapping.generatedColumn-1;continue}}mapping.lastGeneratedColumn=Infinity}};BasicSourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositions);if(index>=0){var mapping=this._generatedMappings[index];if(mapping.generatedLine===needle.generatedLine){var source=util.getArg(mapping,"source",null);if(source!=null&&this.sourceRoot!=null){source=util.join(this.sourceRoot,source)}return{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:util.getArg(mapping,"name",null)}}}return{source:null,line:null,column:null,name:null}};BasicSourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(aSource,nullOnMissing){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){aSource=util.relative(this.sourceRoot,aSource)}if(this._sources.has(aSource)){return this.sourcesContent[this._sources.indexOf(aSource)]}var url;if(this.sourceRoot!=null&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=aSource.replace(/^file:\/\//,"");if(url.scheme=="file"&&this._sources.has(fileUriAbsPath)){return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]}if((!url.path||url.path=="/")&&this._sources.has("/"+aSource)){return this.sourcesContent[this._sources.indexOf("/"+aSource)]}}if(nullOnMissing){return null}else{throw new Error('"'+aSource+'" is not in the SourceMap.')}};BasicSourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(aArgs){var needle={source:util.getArg(aArgs,"source"),originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")};if(this.sourceRoot!=null){needle.source=util.relative(this.sourceRoot,needle.source)}var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions);if(index>=0){var mapping=this._originalMappings[index];return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};exports.BasicSourceMapConsumer=BasicSourceMapConsumer})},{"./array-set":470,"./base64-vlq":471,"./binary-search":474,"./source-map-consumer":477,"./util":480,amdefine:357}],474:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare){var mid=Math.floor((aHigh-aLow)/2)+aLow;var cmp=aCompare(aNeedle,aHaystack[mid],true);if(cmp===0){return mid}else if(cmp>0){if(aHigh-mid>1){return recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare)}return mid}else{if(mid-aLow>1){return recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare)}return aLow<0?-1:aLow}}exports.search=function search(aNeedle,aHaystack,aCompare){if(aHaystack.length===0){return-1}return recursiveSearch(-1,aHaystack.length,aNeedle,aHaystack,aCompare)}})},{amdefine:357}],475:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");var binarySearch=require("./binary-search");var SourceMapConsumer=require("./source-map-consumer").SourceMapConsumer;var BasicSourceMapConsumer=require("./basic-source-map-consumer").BasicSourceMapConsumer;function IndexedSourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}var version=util.getArg(sourceMap,"version");var sections=util.getArg(sourceMap,"sections");if(version!=this._version){throw new Error("Unsupported version: "+version)}var lastOffset={line:-1,column:0};this._sections=sections.map(function(s){if(s.url){throw new Error("Support for url field in sections not implemented.")}var offset=util.getArg(s,"offset");var offsetLine=util.getArg(offset,"line");var offsetColumn=util.getArg(offset,"column");if(offsetLine<lastOffset.line||offsetLine===lastOffset.line&&offsetColumn<lastOffset.column){throw new Error("Section offsets must be ordered and non-overlapping.")}lastOffset=offset;return{generatedOffset:{generatedLine:offsetLine+1,generatedColumn:offsetColumn+1},consumer:new SourceMapConsumer(util.getArg(s,"map"))}})}IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype);IndexedSourceMapConsumer.prototype.constructor=SourceMapConsumer;IndexedSourceMapConsumer.prototype._version=3;Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){var sources=[];for(var i=0;i<this._sections.length;i++){for(var j=0;j<this._sections[i].consumer.sources.length;j++){sources.push(this._sections[i].consumer.sources[j])}}return sources}});IndexedSourceMapConsumer.prototype.originalPositionFor=function IndexedSourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var sectionIndex=binarySearch.search(needle,this._sections,function(needle,section){var cmp=needle.generatedLine-section.generatedOffset.generatedLine;if(cmp){return cmp}return needle.generatedColumn-section.generatedOffset.generatedColumn});var section=this._sections[sectionIndex];if(!section){return{source:null,line:null,column:null,name:null}}return section.consumer.originalPositionFor({line:needle.generatedLine-(section.generatedOffset.generatedLine-1),column:needle.generatedColumn-(section.generatedOffset.generatedLine===needle.generatedLine?section.generatedOffset.generatedColumn-1:0)})};IndexedSourceMapConsumer.prototype.sourceContentFor=function IndexedSourceMapConsumer_sourceContentFor(aSource,nullOnMissing){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];var content=section.consumer.sourceContentFor(aSource,true);if(content){return content}}if(nullOnMissing){return null}else{throw new Error('"'+aSource+'" is not in the SourceMap.')}};IndexedSourceMapConsumer.prototype.generatedPositionFor=function IndexedSourceMapConsumer_generatedPositionFor(aArgs){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];if(section.consumer.sources.indexOf(util.getArg(aArgs,"source"))===-1){continue}var generatedPosition=section.consumer.generatedPositionFor(aArgs);if(generatedPosition){var ret={line:generatedPosition.line+(section.generatedOffset.generatedLine-1),column:generatedPosition.column+(section.generatedOffset.generatedLine===generatedPosition.line?section.generatedOffset.generatedColumn-1:0)};return ret}}return{line:null,column:null}};IndexedSourceMapConsumer.prototype._parseMappings=function IndexedSourceMapConsumer_parseMappings(aStr,aSourceRoot){this.__generatedMappings=[];this.__originalMappings=[];for(var i=0;i<this._sections.length;i++){var section=this._sections[i];var sectionMappings=section.consumer._generatedMappings;for(var j=0;j<sectionMappings.length;j++){var mapping=sectionMappings[i];var source=mapping.source;var sourceRoot=section.consumer.sourceRoot;if(source!=null&&sourceRoot!=null){source=util.join(sourceRoot,source)}var adjustedMapping={source:source,generatedLine:mapping.generatedLine+(section.generatedOffset.generatedLine-1),generatedColumn:mapping.column+(section.generatedOffset.generatedLine===mapping.generatedLine)?section.generatedOffset.generatedColumn-1:0,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:mapping.name};this.__generatedMappings.push(adjustedMapping);if(typeof adjustedMapping.originalLine==="number"){this.__originalMappings.push(adjustedMapping)}}}this.__generatedMappings.sort(util.compareByGeneratedPositions);this.__originalMappings.sort(util.compareByOriginalPositions)};exports.IndexedSourceMapConsumer=IndexedSourceMapConsumer})},{"./basic-source-map-consumer":473,"./binary-search":474,"./source-map-consumer":477,"./util":480,amdefine:357}],476:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");function generatedPositionAfter(mappingA,mappingB){var lineA=mappingA.generatedLine;var lineB=mappingB.generatedLine;var columnA=mappingA.generatedColumn;var columnB=mappingB.generatedColumn;return lineB>lineA||lineB==lineA&&columnB>=columnA||util.compareByGeneratedPositions(mappingA,mappingB)<=0}function MappingList(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function MappingList_forEach(aCallback,aThisArg){this._array.forEach(aCallback,aThisArg)};MappingList.prototype.add=function MappingList_add(aMapping){var mapping;if(generatedPositionAfter(this._last,aMapping)){this._last=aMapping;this._array.push(aMapping)}else{this._sorted=false;this._array.push(aMapping)}};MappingList.prototype.toArray=function MappingList_toArray(){if(!this._sorted){this._array.sort(util.compareByGeneratedPositions);this._sorted=true}return this._array};exports.MappingList=MappingList})},{"./util":480,amdefine:357}],477:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");function SourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}if(sourceMap.sections!=null){var indexedSourceMapConsumer=require("./indexed-source-map-consumer");return new indexedSourceMapConsumer.IndexedSourceMapConsumer(sourceMap)}else{var basicSourceMapConsumer=require("./basic-source-map-consumer");return new basicSourceMapConsumer.BasicSourceMapConsumer(sourceMap)}}SourceMapConsumer.fromSourceMap=function(aSourceMap){var basicSourceMapConsumer=require("./basic-source-map-consumer");return basicSourceMapConsumer.BasicSourceMapConsumer.fromSourceMap(aSourceMap)};SourceMapConsumer.prototype._version=3;SourceMapConsumer.prototype.__generatedMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});SourceMapConsumer.prototype.__originalMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});SourceMapConsumer.prototype._nextCharIsMappingSeparator=function SourceMapConsumer_nextCharIsMappingSeparator(aStr){var c=aStr.charAt(0);return c===";"||c===","};SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){throw new Error("Subclasses must implement _parseMappings")};SourceMapConsumer.GENERATED_ORDER=1;SourceMapConsumer.ORIGINAL_ORDER=2;SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(aCallback,aContext,aOrder){var context=aContext||null;var order=aOrder||SourceMapConsumer.GENERATED_ORDER;var mappings;switch(order){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=mapping.source;if(source!=null&&sourceRoot!=null){source=util.join(sourceRoot,source)}return{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:mapping.name}}).forEach(aCallback,context)};SourceMapConsumer.prototype.allGeneratedPositionsFor=function SourceMapConsumer_allGeneratedPositionsFor(aArgs){var needle={source:util.getArg(aArgs,"source"),originalLine:util.getArg(aArgs,"line"),originalColumn:Infinity};if(this.sourceRoot!=null){needle.source=util.relative(this.sourceRoot,needle.source)}var mappings=[];var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions);if(index>=0){var mapping=this._originalMappings[index];while(mapping&&mapping.originalLine===needle.originalLine){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[--index]}}return mappings.reverse()};exports.SourceMapConsumer=SourceMapConsumer})},{"./basic-source-map-consumer":473,"./indexed-source-map-consumer":475,"./util":480,amdefine:357}],478:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var base64VLQ=require("./base64-vlq");var util=require("./util");var ArraySet=require("./array-set").ArraySet;var MappingList=require("./mapping-list").MappingList;function SourceMapGenerator(aArgs){if(!aArgs){aArgs={}}this._file=util.getArg(aArgs,"file",null);this._sourceRoot=util.getArg(aArgs,"sourceRoot",null);this._skipValidation=util.getArg(aArgs,"skipValidation",false);this._sources=new ArraySet;this._names=new ArraySet;this._mappings=new MappingList;this._sourcesContents=null}SourceMapGenerator.prototype._version=3;SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot;var generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};if(mapping.source!=null){newMapping.source=mapping.source;if(sourceRoot!=null){newMapping.source=util.relative(sourceRoot,newMapping.source)}newMapping.original={line:mapping.originalLine,column:mapping.originalColumn};if(mapping.name!=null){newMapping.name=mapping.name}}generator.addMapping(newMapping)});aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){generator.setSourceContent(sourceFile,content)}});return generator};SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(aArgs){var generated=util.getArg(aArgs,"generated");var original=util.getArg(aArgs,"original",null);var source=util.getArg(aArgs,"source",null);var name=util.getArg(aArgs,"name",null);if(!this._skipValidation){this._validateMapping(generated,original,source,name)}if(source!=null&&!this._sources.has(source)){this._sources.add(source)}if(name!=null&&!this._names.has(name)){this._names.add(name)}this._mappings.add({generatedLine:generated.line,generatedColumn:generated.column,originalLine:original!=null&&original.line,originalColumn:original!=null&&original.column,source:source,name:name})};SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(aSourceFile,aSourceContent){var source=aSourceFile;if(this._sourceRoot!=null){source=util.relative(this._sourceRoot,source)}if(aSourceContent!=null){if(!this._sourcesContents){this._sourcesContents={}}this._sourcesContents[util.toSetString(source)]=aSourceContent}else if(this._sourcesContents){delete this._sourcesContents[util.toSetString(source)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(aSourceMapConsumer,aSourceFile,aSourceMapPath){var sourceFile=aSourceFile;if(aSourceFile==null){if(aSourceMapConsumer.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}sourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}var newSources=new ArraySet;var newNames=new ArraySet;this._mappings.unsortedForEach(function(mapping){if(mapping.source===sourceFile&&mapping.originalLine!=null){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});if(original.source!=null){mapping.source=original.source;if(aSourceMapPath!=null){mapping.source=util.join(aSourceMapPath,mapping.source)}if(sourceRoot!=null){mapping.source=util.relative(sourceRoot,mapping.source)}mapping.originalLine=original.line;mapping.originalColumn=original.column;if(original.name!=null){mapping.name=original.name}}}var source=mapping.source;if(source!=null&&!newSources.has(source)){newSources.add(source)}var name=mapping.name;if(name!=null&&!newNames.has(name)){newNames.add(name)}},this);this._sources=newSources;this._names=newNames;aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aSourceMapPath!=null){sourceFile=util.join(aSourceMapPath,sourceFile)}if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}this.setSourceContent(sourceFile,content)}},this)};SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(aGenerated,aOriginal,aSource,aName){if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName){return}else if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))}};SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){var previousGeneratedColumn=0;var previousGeneratedLine=1;var previousOriginalColumn=0;var previousOriginalLine=0;var previousName=0;var previousSource=0;var result="";var mapping;var mappings=this._mappings.toArray();for(var i=0,len=mappings.length;i<len;i++){mapping=mappings[i];if(mapping.generatedLine!==previousGeneratedLine){previousGeneratedColumn=0;while(mapping.generatedLine!==previousGeneratedLine){result+=";";previousGeneratedLine++}}else{if(i>0){if(!util.compareByGeneratedPositions(mapping,mappings[i-1])){continue}result+=","}}result+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn);previousGeneratedColumn=mapping.generatedColumn;if(mapping.source!=null){result+=base64VLQ.encode(this._sources.indexOf(mapping.source)-previousSource);previousSource=this._sources.indexOf(mapping.source);result+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine);previousOriginalLine=mapping.originalLine-1;result+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn);previousOriginalColumn=mapping.originalColumn;if(mapping.name!=null){result+=base64VLQ.encode(this._names.indexOf(mapping.name)-previousName);previousName=this._names.indexOf(mapping.name)}}}return result};SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents){return null}if(aSourceRoot!=null){source=util.relative(aSourceRoot,source)}var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)};SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){map.file=this._file}if(this._sourceRoot!=null){map.sourceRoot=this._sourceRoot}if(this._sourcesContents){map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)}return map};SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this)};exports.SourceMapGenerator=SourceMapGenerator})},{"./array-set":470,"./base64-vlq":471,"./mapping-list":476,"./util":480,amdefine:357}],479:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var SourceMapGenerator=require("./source-map-generator").SourceMapGenerator;var util=require("./util");var REGEX_NEWLINE=/(\r?\n)/;var NEWLINE_CODE=10;var isSourceNode="$$$isSourceNode$$$";function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[];this.sourceContents={};this.line=aLine==null?null:aLine;this.column=aColumn==null?null:aColumn;this.source=aSource==null?null:aSource;this.name=aName==null?null:aName;this[isSourceNode]=true;if(aChunks!=null)this.add(aChunks)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(aGeneratedCode,aSourceMapConsumer,aRelativePath){var node=new SourceNode;var remainingLines=aGeneratedCode.split(REGEX_NEWLINE);var shiftNextLine=function(){var lineContents=remainingLines.shift();var newLine=remainingLines.shift()||"";return lineContents+newLine};var lastGeneratedLine=1,lastGeneratedColumn=0;var lastMapping=null;aSourceMapConsumer.eachMapping(function(mapping){if(lastMapping!==null){if(lastGeneratedLine<mapping.generatedLine){var code="";addMappingWithCode(lastMapping,shiftNextLine());lastGeneratedLine++;lastGeneratedColumn=0}else{var nextLine=remainingLines[0];var code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[0]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn);lastGeneratedColumn=mapping.generatedColumn;addMappingWithCode(lastMapping,code);lastMapping=mapping;return}}while(lastGeneratedLine<mapping.generatedLine){node.add(shiftNextLine());lastGeneratedLine++}if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];node.add(nextLine.substr(0,mapping.generatedColumn));remainingLines[0]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping},this);if(remainingLines.length>0){if(lastMapping){addMappingWithCode(lastMapping,shiftNextLine())}node.add(remainingLines.join(""))}aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aRelativePath!=null){sourceFile=util.join(aRelativePath,sourceFile)}node.setSourceContent(sourceFile,content)}});return node;function addMappingWithCode(mapping,code){if(mapping===null||mapping.source===undefined){node.add(code)}else{var source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}};SourceNode.prototype.add=function SourceNode_add(aChunk){if(Array.isArray(aChunk)){aChunk.forEach(function(chunk){this.add(chunk)},this)}else if(aChunk[isSourceNode]||typeof aChunk==="string"){if(aChunk){this.children.push(aChunk)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.prepend=function SourceNode_prepend(aChunk){if(Array.isArray(aChunk)){for(var i=aChunk.length-1;i>=0;i--){this.prepend(aChunk[i])}}else if(aChunk[isSourceNode]||typeof aChunk==="string"){this.children.unshift(aChunk)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.walk=function SourceNode_walk(aFn){var chunk;for(var i=0,len=this.children.length;i<len;i++){chunk=this.children[i];if(chunk[isSourceNode]){chunk.walk(aFn)}else{if(chunk!==""){aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};SourceNode.prototype.join=function SourceNode_join(aSep){var newChildren;var i;var len=this.children.length;if(len>0){newChildren=[];for(i=0;i<len-1;i++){newChildren.push(this.children[i]);newChildren.push(aSep)}newChildren.push(this.children[i]);this.children=newChildren}return this};SourceNode.prototype.replaceRight=function SourceNode_replaceRight(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];if(lastChild[isSourceNode]){lastChild.replaceRight(aPattern,aReplacement)}else if(typeof lastChild==="string"){this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement)}else{this.children.push("".replace(aPattern,aReplacement))}return this};SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent};SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(aFn){for(var i=0,len=this.children.length;i<len;i++){if(this.children[i][isSourceNode]){this.children[i].walkSourceContents(aFn)}}var sources=Object.keys(this.sourceContents);for(var i=0,len=sources.length;i<len;i++){aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])}};SourceNode.prototype.toString=function SourceNode_toString(){var str="";this.walk(function(chunk){str+=chunk});return str};SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(aArgs){var generated={code:"",line:1,column:0};var map=new SourceMapGenerator(aArgs);var sourceMappingActive=false;var lastOriginalSource=null;var lastOriginalLine=null;var lastOriginalColumn=null;var lastOriginalName=null;this.walk(function(chunk,original){generated.code+=chunk;if(original.source!==null&&original.line!==null&&original.column!==null){if(lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}lastOriginalSource=original.source;lastOriginalLine=original.line;lastOriginalColumn=original.column;lastOriginalName=original.name;sourceMappingActive=true}else if(sourceMappingActive){map.addMapping({generated:{line:generated.line,column:generated.column}});lastOriginalSource=null;sourceMappingActive=false}for(var idx=0,length=chunk.length;idx<length;idx++){if(chunk.charCodeAt(idx)===NEWLINE_CODE){generated.line++;generated.column=0;if(idx+1===length){lastOriginalSource=null;sourceMappingActive=false}else if(sourceMappingActive){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}}else{generated.column++}}});this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)});return{code:generated.code,map:map}};exports.SourceNode=SourceNode})},{"./source-map-generator":478,"./util":480,amdefine:357}],480:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){function getArg(aArgs,aName,aDefaultValue){if(aName in aArgs){return aArgs[aName]}else if(arguments.length===3){return aDefaultValue}else{throw new Error('"'+aName+'" is a required argument.')}}exports.getArg=getArg;var urlRegexp=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/;var dataUrlRegexp=/^data:.+\,.+$/;function urlParse(aUrl){var match=aUrl.match(urlRegexp);if(!match){return null}return{scheme:match[1],auth:match[2],host:match[3],port:match[4],path:match[5]}}exports.urlParse=urlParse;function urlGenerate(aParsedUrl){var url="";if(aParsedUrl.scheme){url+=aParsedUrl.scheme+":"}url+="//";if(aParsedUrl.auth){url+=aParsedUrl.auth+"@"}if(aParsedUrl.host){url+=aParsedUrl.host}if(aParsedUrl.port){url+=":"+aParsedUrl.port}if(aParsedUrl.path){url+=aParsedUrl.path}return url}exports.urlGenerate=urlGenerate;function normalize(aPath){var path=aPath;var url=urlParse(aPath);if(url){if(!url.path){return aPath}path=url.path}var isAbsolute=path.charAt(0)==="/";var parts=path.split(/\/+/);for(var part,up=0,i=parts.length-1;i>=0;i--){part=parts[i];if(part==="."){parts.splice(i,1)}else if(part===".."){up++}else if(up>0){if(part===""){parts.splice(i+1,up);up=0}else{parts.splice(i,2);up--}}}path=parts.join("/");if(path===""){path=isAbsolute?"/":"."}if(url){url.path=path;return urlGenerate(url)}return path}exports.normalize=normalize;function join(aRoot,aPath){if(aRoot===""){aRoot="."}if(aPath===""){aPath="."}var aPathUrl=urlParse(aPath);var aRootUrl=urlParse(aRoot);if(aRootUrl){aRoot=aRootUrl.path||"/"}if(aPathUrl&&!aPathUrl.scheme){if(aRootUrl){aPathUrl.scheme=aRootUrl.scheme}return urlGenerate(aPathUrl)}if(aPathUrl||aPath.match(dataUrlRegexp)){return aPath}if(aRootUrl&&!aRootUrl.host&&!aRootUrl.path){aRootUrl.host=aPath;return urlGenerate(aRootUrl)}var joined=aPath.charAt(0)==="/"?aPath:normalize(aRoot.replace(/\/+$/,"")+"/"+aPath);if(aRootUrl){aRootUrl.path=joined;return urlGenerate(aRootUrl)}return joined}exports.join=join;function relative(aRoot,aPath){if(aRoot===""){aRoot="."}aRoot=aRoot.replace(/\/$/,"");var url=urlParse(aRoot);if(aPath.charAt(0)=="/"&&url&&url.path=="/"){return aPath.slice(1)}return aPath.indexOf(aRoot+"/")===0?aPath.substr(aRoot.length+1):aPath}exports.relative=relative;function toSetString(aStr){return"$"+aStr}exports.toSetString=toSetString;function fromSetString(aStr){return aStr.substr(1)}exports.fromSetString=fromSetString;function strcmp(aStr1,aStr2){var s1=aStr1||"";var s2=aStr2||"";return(s1>s2)-(s1<s2)}function compareByOriginalPositions(mappingA,mappingB,onlyCompareOriginal){var cmp;cmp=strcmp(mappingA.source,mappingB.source);if(cmp){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp||onlyCompareOriginal){return cmp}cmp=strcmp(mappingA.name,mappingB.name);if(cmp){return cmp}cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp){return cmp}return mappingA.generatedColumn-mappingB.generatedColumn}exports.compareByOriginalPositions=compareByOriginalPositions;function compareByGeneratedPositions(mappingA,mappingB,onlyCompareGenerated){var cmp;cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp||onlyCompareGenerated){return cmp}cmp=strcmp(mappingA.source,mappingB.source);if(cmp){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByGeneratedPositions=compareByGeneratedPositions})},{amdefine:357}],481:[function(require,module,exports){module.exports={_from:"escodegen@>=1.8.1 <2.0.0",_id:"escodegen@1.8.1",_inBundle:false,_integrity:"sha1-WltTr0aTEQvrsIZ6o0MN07cKEBg=",_location:"/webppl-viz/escodegen",_phantomChildren:{amdefine:"1.0.1"},_requested:{type:"version",registry:true,raw:"escodegen@1.8.1",name:"escodegen",escapedName:"escodegen",rawSpec:"1.8.1",saveSpec:null,fetchSpec:"1.8.1"},_requiredBy:["/webppl-viz","/webppl-viz/replace-requires/detective"],_resolved:"https://registry.npmjs.org/escodegen/-/escodegen-1.8.1.tgz",_shasum:"5a5b53af4693110bebb0867aa3430dd3b70a1018",_spec:"escodegen@1.8.1",_where:"/Users/lestera/Documents/git/webppl/node_modules/webppl-viz",bin:{esgenerate:"bin/esgenerate.js",escodegen:"bin/escodegen.js"},bugs:{url:"https://github.com/estools/escodegen/issues"},bundleDependencies:false,dependencies:{esprima:"^2.7.1",estraverse:"^1.9.1",esutils:"^2.0.2",optionator:"^0.8.1","source-map":"~0.2.0"},deprecated:false,description:"ECMAScript code generator",devDependencies:{acorn:"^2.7.0",bluebird:"^2.3.11","bower-registry-client":"^0.2.1",chai:"^1.10.0","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^0.2.0","gulp-mocha":"^2.0.0",semver:"^5.1.0"},engines:{node:">=0.12.0"},files:["LICENSE.BSD","LICENSE.source-map","README.md","bin","escodegen.js","package.json"],homepage:"http://github.com/estools/escodegen",license:"BSD-2-Clause",main:"escodegen.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"escodegen",optionalDependencies:{"source-map":"~0.2.0"},repository:{type:"git",url:"git+ssh://git@github.com/estools/escodegen.git"},scripts:{build:"cjsify -a path: tools/entry-point.js > escodegen.browser.js","build-min":"cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",lint:"gulp lint",release:"node tools/release.js",test:"gulp travis","unit-test":"gulp test"},version:"1.8.1"}},{}],482:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Definition=exports.ParameterDefinition=undefined;var _variable=require("./variable");var _variable2=_interopRequireDefault(_variable);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Definition=function Definition(type,name,node,parent,index,kind){_classCallCheck(this,Definition);this.type=type;this.name=name;this.node=node;this.parent=parent;this.index=index;this.kind=kind};exports.default=Definition;var ParameterDefinition=function(_Definition){_inherits(ParameterDefinition,_Definition);function ParameterDefinition(name,node,index,rest){_classCallCheck(this,ParameterDefinition);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ParameterDefinition).call(this,_variable2.default.Parameter,name,node,null,index,null));_this.rest=rest;return _this}return ParameterDefinition}(Definition);exports.ParameterDefinition=ParameterDefinition;exports.Definition=Definition},{"./variable":489}],483:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScopeManager=exports.Scope=exports.Variable=exports.Reference=exports.version=undefined;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};exports.analyze=analyze;var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);var _scopeManager=require("./scope-manager");var _scopeManager2=_interopRequireDefault(_scopeManager);var _referencer=require("./referencer");var _referencer2=_interopRequireDefault(_referencer);var _reference=require("./reference");var _reference2=_interopRequireDefault(_reference);var _variable=require("./variable");var _variable2=_interopRequireDefault(_variable);var _scope=require("./scope");var _scope2=_interopRequireDefault(_scope);var _package=require("../package.json");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function defaultOptions(){return{optimistic:false,directive:false,nodejsScope:false,impliedStrict:false,sourceType:"script",ecmaVersion:5,childVisitorKeys:null,fallback:"iteration"}}function updateDeeply(target,override){var key,val;function isHashObject(target){return(typeof target==="undefined"?"undefined":_typeof(target))==="object"&&target instanceof Object&&!(target instanceof Array)&&!(target instanceof RegExp)}for(key in override){if(override.hasOwnProperty(key)){val=override[key];if(isHashObject(val)){if(isHashObject(target[key])){updateDeeply(target[key],val)}else{target[key]=updateDeeply({},val)}}else{target[key]=val}}}return target}function analyze(tree,providedOptions){var scopeManager,referencer,options;options=updateDeeply(defaultOptions(),providedOptions);scopeManager=new _scopeManager2.default(options);referencer=new _referencer2.default(options,scopeManager);referencer.visit(tree);(0,_assert2.default)(scopeManager.__currentScope===null,"currentScope should be null.");return scopeManager}exports.version=_package.version;exports.Reference=_reference2.default;exports.Variable=_variable2.default;exports.Scope=_scope2.default;exports.ScopeManager=_scopeManager2.default},{"../package.json":490,"./reference":485,"./referencer":486,"./scope":488,"./scope-manager":487,"./variable":489,assert:3}],484:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _estraverse=require("estraverse");var _esrecurse=require("esrecurse");var _esrecurse2=_interopRequireDefault(_esrecurse);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function getLast(xs){return xs[xs.length-1]||null}var PatternVisitor=function(_esrecurse$Visitor){_inherits(PatternVisitor,_esrecurse$Visitor);_createClass(PatternVisitor,null,[{key:"isPattern",value:function isPattern(node){var nodeType=node.type;return nodeType===_estraverse.Syntax.Identifier||nodeType===_estraverse.Syntax.ObjectPattern||nodeType===_estraverse.Syntax.ArrayPattern||nodeType===_estraverse.Syntax.SpreadElement||nodeType===_estraverse.Syntax.RestElement||nodeType===_estraverse.Syntax.AssignmentPattern}}]);function PatternVisitor(options,rootPattern,callback){_classCallCheck(this,PatternVisitor);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(PatternVisitor).call(this,null,options));_this.rootPattern=rootPattern;_this.callback=callback;_this.assignments=[];_this.rightHandNodes=[];_this.restElements=[];return _this}_createClass(PatternVisitor,[{key:"Identifier",value:function Identifier(pattern){var lastRestElement=getLast(this.restElements);this.callback(pattern,{topLevel:pattern===this.rootPattern,rest:lastRestElement!=null&&lastRestElement.argument===pattern,assignments:this.assignments})}},{key:"Property",value:function Property(property){if(property.computed){this.rightHandNodes.push(property.key)}this.visit(property.value)}},{key:"ArrayPattern",value:function ArrayPattern(pattern){var i,iz,element;for(i=0,iz=pattern.elements.length;i<iz;++i){element=pattern.elements[i];this.visit(element)}}},{key:"AssignmentPattern",value:function AssignmentPattern(pattern){this.assignments.push(pattern);this.visit(pattern.left);this.rightHandNodes.push(pattern.right);this.assignments.pop()}},{key:"RestElement",value:function RestElement(pattern){this.restElements.push(pattern);this.visit(pattern.argument);this.restElements.pop()}},{key:"MemberExpression",value:function MemberExpression(node){if(node.computed){this.rightHandNodes.push(node.property)}this.rightHandNodes.push(node.object)}},{key:"SpreadElement",value:function SpreadElement(node){this.visit(node.argument)}},{key:"ArrayExpression",value:function ArrayExpression(node){node.elements.forEach(this.visit,this)}},{key:"AssignmentExpression",value:function AssignmentExpression(node){this.assignments.push(node);this.visit(node.left);this.rightHandNodes.push(node.right);this.assignments.pop()}},{key:"CallExpression",value:function CallExpression(node){var _this2=this;node.arguments.forEach(function(a){_this2.rightHandNodes.push(a)});this.visit(node.callee)}}]);return PatternVisitor}(_esrecurse2.default.Visitor);exports.default=PatternVisitor},{esrecurse:492,estraverse:496}],485:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var READ=1;var WRITE=2;var RW=READ|WRITE;var Reference=function(){function Reference(ident,scope,flag,writeExpr,maybeImplicitGlobal,partial,init){_classCallCheck(this,Reference);this.identifier=ident;this.from=scope;this.tainted=false;this.resolved=null;this.flag=flag;if(this.isWrite()){this.writeExpr=writeExpr;this.partial=partial;this.init=init}this.__maybeImplicitGlobal=maybeImplicitGlobal}_createClass(Reference,[{key:"isStatic",value:function isStatic(){return!this.tainted&&this.resolved&&this.resolved.scope.isStatic()}},{key:"isWrite",value:function isWrite(){return!!(this.flag&Reference.WRITE)}},{key:"isRead",value:function isRead(){return!!(this.flag&Reference.READ)}},{key:"isReadOnly",value:function isReadOnly(){return this.flag===Reference.READ}},{key:"isWriteOnly",value:function isWriteOnly(){return this.flag===Reference.WRITE}},{key:"isReadWrite",value:function isReadWrite(){return this.flag===Reference.RW}}]);return Reference}();exports.default=Reference;Reference.READ=READ;Reference.WRITE=WRITE;Reference.RW=RW},{}],486:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _estraverse=require("estraverse");var _esrecurse=require("esrecurse");var _esrecurse2=_interopRequireDefault(_esrecurse);var _reference=require("./reference");var _reference2=_interopRequireDefault(_reference);var _variable=require("./variable");var _variable2=_interopRequireDefault(_variable);var _patternVisitor=require("./pattern-visitor");var _patternVisitor2=_interopRequireDefault(_patternVisitor);var _definition=require("./definition");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function traverseIdentifierInPattern(options,rootPattern,referencer,callback){var visitor=new _patternVisitor2.default(options,rootPattern,callback);visitor.visit(rootPattern);if(referencer!=null){visitor.rightHandNodes.forEach(referencer.visit,referencer)}}var Importer=function(_esrecurse$Visitor){_inherits(Importer,_esrecurse$Visitor);function Importer(declaration,referencer){_classCallCheck(this,Importer);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Importer).call(this,null,referencer.options));_this.declaration=declaration;_this.referencer=referencer;return _this}_createClass(Importer,[{key:"visitImport",value:function visitImport(id,specifier){var _this2=this;this.referencer.visitPattern(id,function(pattern){_this2.referencer.currentScope().__define(pattern,new _definition.Definition(_variable2.default.ImportBinding,pattern,specifier,_this2.declaration,null,null))})}},{key:"ImportNamespaceSpecifier",value:function ImportNamespaceSpecifier(node){var local=node.local||node.id;if(local){this.visitImport(local,node)}}},{key:"ImportDefaultSpecifier",value:function ImportDefaultSpecifier(node){var local=node.local||node.id;this.visitImport(local,node)}},{key:"ImportSpecifier",value:function ImportSpecifier(node){var local=node.local||node.id;if(node.name){this.visitImport(node.name,node)}else{this.visitImport(local,node)}}}]);return Importer}(_esrecurse2.default.Visitor);var Referencer=function(_esrecurse$Visitor2){_inherits(Referencer,_esrecurse$Visitor2);function Referencer(options,scopeManager){_classCallCheck(this,Referencer);var _this3=_possibleConstructorReturn(this,Object.getPrototypeOf(Referencer).call(this,null,options));_this3.options=options;_this3.scopeManager=scopeManager;_this3.parent=null;_this3.isInnerMethodDefinition=false;return _this3}_createClass(Referencer,[{key:"currentScope",value:function currentScope(){return this.scopeManager.__currentScope}},{key:"close",value:function close(node){while(this.currentScope()&&node===this.currentScope().block){this.scopeManager.__currentScope=this.currentScope().__close(this.scopeManager)}}},{key:"pushInnerMethodDefinition",value:function pushInnerMethodDefinition(isInnerMethodDefinition){var previous=this.isInnerMethodDefinition;this.isInnerMethodDefinition=isInnerMethodDefinition;return previous}},{key:"popInnerMethodDefinition",value:function popInnerMethodDefinition(isInnerMethodDefinition){this.isInnerMethodDefinition=isInnerMethodDefinition}},{key:"materializeTDZScope",value:function materializeTDZScope(node,iterationNode){this.scopeManager.__nestTDZScope(node,iterationNode);this.visitVariableDeclaration(this.currentScope(),_variable2.default.TDZ,iterationNode.left,0,true)}},{key:"materializeIterationScope",value:function materializeIterationScope(node){var _this4=this;var letOrConstDecl;this.scopeManager.__nestForScope(node);letOrConstDecl=node.left;this.visitVariableDeclaration(this.currentScope(),_variable2.default.Variable,letOrConstDecl,0);this.visitPattern(letOrConstDecl.declarations[0].id,function(pattern){_this4.currentScope().__referencing(pattern,_reference2.default.WRITE,node.right,null,true,true)})}},{key:"referencingDefaultValue",value:function referencingDefaultValue(pattern,assignments,maybeImplicitGlobal,init){var scope=this.currentScope();assignments.forEach(function(assignment){scope.__referencing(pattern,_reference2.default.WRITE,assignment.right,maybeImplicitGlobal,pattern!==assignment.left,init)})}},{key:"visitPattern",value:function visitPattern(node,options,callback){if(typeof options==="function"){callback=options;options={processRightHandNodes:false}}traverseIdentifierInPattern(this.options,node,options.processRightHandNodes?this:null,callback)}},{key:"visitFunction",value:function visitFunction(node){var _this5=this;var i,iz;if(node.type===_estraverse.Syntax.FunctionDeclaration){this.currentScope().__define(node.id,new _definition.Definition(_variable2.default.FunctionName,node.id,node,null,null,null))}if(node.type===_estraverse.Syntax.FunctionExpression&&node.id){this.scopeManager.__nestFunctionExpressionNameScope(node)}this.scopeManager.__nestFunctionScope(node,this.isInnerMethodDefinition);for(i=0,iz=node.params.length;i<iz;++i){this.visitPattern(node.params[i],{processRightHandNodes:true},function(pattern,info){_this5.currentScope().__define(pattern,new _definition.ParameterDefinition(pattern,node,i,info.rest));_this5.referencingDefaultValue(pattern,info.assignments,null,true)})}if(node.rest){this.visitPattern({type:"RestElement",argument:node.rest},function(pattern){_this5.currentScope().__define(pattern,new _definition.ParameterDefinition(pattern,node,node.params.length,true))})}if(node.body.type===_estraverse.Syntax.BlockStatement){this.visitChildren(node.body)}else{this.visit(node.body)}this.close(node)}},{key:"visitClass",value:function visitClass(node){if(node.type===_estraverse.Syntax.ClassDeclaration){this.currentScope().__define(node.id,new _definition.Definition(_variable2.default.ClassName,node.id,node,null,null,null))}this.visit(node.superClass);this.scopeManager.__nestClassScope(node);if(node.id){this.currentScope().__define(node.id,new _definition.Definition(_variable2.default.ClassName,node.id,node))}this.visit(node.body);this.close(node)}},{key:"visitProperty",value:function visitProperty(node){var previous,isMethodDefinition;if(node.computed){this.visit(node.key)}isMethodDefinition=node.type===_estraverse.Syntax.MethodDefinition;if(isMethodDefinition){previous=this.pushInnerMethodDefinition(true)}this.visit(node.value);if(isMethodDefinition){this.popInnerMethodDefinition(previous)}}},{key:"visitForIn",value:function visitForIn(node){var _this6=this;if(node.left.type===_estraverse.Syntax.VariableDeclaration&&node.left.kind!=="var"){this.materializeTDZScope(node.right,node);this.visit(node.right);this.close(node.right);this.materializeIterationScope(node);this.visit(node.body);this.close(node)}else{if(node.left.type===_estraverse.Syntax.VariableDeclaration){this.visit(node.left);this.visitPattern(node.left.declarations[0].id,function(pattern){_this6.currentScope().__referencing(pattern,_reference2.default.WRITE,node.right,null,true,true)})}else{this.visitPattern(node.left,{processRightHandNodes:true},function(pattern,info){var maybeImplicitGlobal=null;if(!_this6.currentScope().isStrict){maybeImplicitGlobal={pattern:pattern,node:node}}_this6.referencingDefaultValue(pattern,info.assignments,maybeImplicitGlobal,false);_this6.currentScope().__referencing(pattern,_reference2.default.WRITE,node.right,maybeImplicitGlobal,true,false)})}this.visit(node.right);this.visit(node.body)}}},{key:"visitVariableDeclaration",value:function visitVariableDeclaration(variableTargetScope,type,node,index,fromTDZ){var _this7=this;var decl,init;decl=node.declarations[index];init=decl.init;this.visitPattern(decl.id,{processRightHandNodes:!fromTDZ},function(pattern,info){variableTargetScope.__define(pattern,new _definition.Definition(type,pattern,decl,node,index,node.kind));if(!fromTDZ){_this7.referencingDefaultValue(pattern,info.assignments,null,true)}if(init){_this7.currentScope().__referencing(pattern,_reference2.default.WRITE,init,null,!info.topLevel,true)}})}},{key:"AssignmentExpression",value:function AssignmentExpression(node){var _this8=this;if(_patternVisitor2.default.isPattern(node.left)){if(node.operator==="="){this.visitPattern(node.left,{processRightHandNodes:true},function(pattern,info){var maybeImplicitGlobal=null;if(!_this8.currentScope().isStrict){maybeImplicitGlobal={pattern:pattern,node:node}}_this8.referencingDefaultValue(pattern,info.assignments,maybeImplicitGlobal,false);_this8.currentScope().__referencing(pattern,_reference2.default.WRITE,node.right,maybeImplicitGlobal,!info.topLevel,false)})}else{this.currentScope().__referencing(node.left,_reference2.default.RW,node.right)}}else{this.visit(node.left)}this.visit(node.right)}},{key:"CatchClause",value:function CatchClause(node){var _this9=this;this.scopeManager.__nestCatchScope(node);this.visitPattern(node.param,{processRightHandNodes:true},function(pattern,info){_this9.currentScope().__define(pattern,new _definition.Definition(_variable2.default.CatchClause,node.param,node,null,null,null));_this9.referencingDefaultValue(pattern,info.assignments,null,true)});this.visit(node.body);this.close(node)}},{key:"Program",value:function Program(node){this.scopeManager.__nestGlobalScope(node);if(this.scopeManager.__isNodejsScope()){this.currentScope().isStrict=false;this.scopeManager.__nestFunctionScope(node,false)}if(this.scopeManager.__isES6()&&this.scopeManager.isModule()){this.scopeManager.__nestModuleScope(node)}if(this.scopeManager.isStrictModeSupported()&&this.scopeManager.isImpliedStrict()){this.currentScope().isStrict=true}this.visitChildren(node);this.close(node)}},{key:"Identifier",value:function Identifier(node){this.currentScope().__referencing(node)}},{key:"UpdateExpression",value:function UpdateExpression(node){if(_patternVisitor2.default.isPattern(node.argument)){this.currentScope().__referencing(node.argument,_reference2.default.RW,null)}else{this.visitChildren(node)}}},{key:"MemberExpression",value:function MemberExpression(node){this.visit(node.object);if(node.computed){this.visit(node.property)}}},{key:"Property",value:function Property(node){this.visitProperty(node)}},{key:"MethodDefinition",value:function MethodDefinition(node){this.visitProperty(node)}},{key:"BreakStatement",value:function BreakStatement(){}},{key:"ContinueStatement",value:function ContinueStatement(){}},{key:"LabeledStatement",value:function LabeledStatement(node){this.visit(node.body)}},{key:"ForStatement",value:function ForStatement(node){if(node.init&&node.init.type===_estraverse.Syntax.VariableDeclaration&&node.init.kind!=="var"){this.scopeManager.__nestForScope(node)}this.visitChildren(node);this.close(node)}},{key:"ClassExpression",value:function ClassExpression(node){this.visitClass(node)}},{key:"ClassDeclaration",value:function ClassDeclaration(node){this.visitClass(node)}},{key:"CallExpression",value:function CallExpression(node){if(!this.scopeManager.__ignoreEval()&&node.callee.type===_estraverse.Syntax.Identifier&&node.callee.name==="eval"){this.currentScope().variableScope.__detectEval()}this.visitChildren(node)}},{key:"BlockStatement",value:function BlockStatement(node){if(this.scopeManager.__isES6()){this.scopeManager.__nestBlockScope(node)}this.visitChildren(node);this.close(node)}},{key:"ThisExpression",value:function ThisExpression(){this.currentScope().variableScope.__detectThis()}},{key:"WithStatement",value:function WithStatement(node){this.visit(node.object);this.scopeManager.__nestWithScope(node);this.visit(node.body);this.close(node)}},{key:"VariableDeclaration",value:function VariableDeclaration(node){var variableTargetScope,i,iz,decl;variableTargetScope=node.kind==="var"?this.currentScope().variableScope:this.currentScope();for(i=0,iz=node.declarations.length;i<iz;++i){decl=node.declarations[i];this.visitVariableDeclaration(variableTargetScope,_variable2.default.Variable,node,i);if(decl.init){this.visit(decl.init)}}}},{key:"SwitchStatement",value:function SwitchStatement(node){var i,iz;this.visit(node.discriminant);if(this.scopeManager.__isES6()){this.scopeManager.__nestSwitchScope(node)}for(i=0,iz=node.cases.length;i<iz;++i){this.visit(node.cases[i])}this.close(node)}},{key:"FunctionDeclaration",value:function FunctionDeclaration(node){this.visitFunction(node)}},{key:"FunctionExpression",value:function FunctionExpression(node){this.visitFunction(node)}},{key:"ForOfStatement",value:function ForOfStatement(node){this.visitForIn(node)}},{key:"ForInStatement",value:function ForInStatement(node){this.visitForIn(node)}},{key:"ArrowFunctionExpression",value:function ArrowFunctionExpression(node){this.visitFunction(node)}},{key:"ImportDeclaration",value:function ImportDeclaration(node){var importer;(0,_assert2.default)(this.scopeManager.__isES6()&&this.scopeManager.isModule(),"ImportDeclaration should appear when the mode is ES6 and in the module context.");importer=new Importer(node,this);importer.visit(node)}},{key:"visitExportDeclaration",value:function visitExportDeclaration(node){if(node.source){return}if(node.declaration){this.visit(node.declaration);return}this.visitChildren(node)}},{key:"ExportDeclaration",value:function ExportDeclaration(node){this.visitExportDeclaration(node)}},{key:"ExportNamedDeclaration",value:function ExportNamedDeclaration(node){this.visitExportDeclaration(node)}},{key:"ExportSpecifier",value:function ExportSpecifier(node){var local=node.id||node.local;this.visit(local)}},{key:"MetaProperty",value:function MetaProperty(){}}]);return Referencer}(_esrecurse2.default.Visitor);exports.default=Referencer},{"./definition":482,"./pattern-visitor":484,"./reference":485,"./variable":489,assert:3,esrecurse:492,estraverse:496}],487:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _es6WeakMap=require("es6-weak-map");var _es6WeakMap2=_interopRequireDefault(_es6WeakMap);var _scope=require("./scope");var _scope2=_interopRequireDefault(_scope);var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ScopeManager=function(){function ScopeManager(options){_classCallCheck(this,ScopeManager);this.scopes=[];this.globalScope=null;this.__nodeToScope=new _es6WeakMap2.default;this.__currentScope=null;this.__options=options;this.__declaredVariables=new _es6WeakMap2.default}_createClass(ScopeManager,[{key:"__useDirective",value:function __useDirective(){return this.__options.directive}},{key:"__isOptimistic",value:function __isOptimistic(){return this.__options.optimistic}},{key:"__ignoreEval",value:function __ignoreEval(){return this.__options.ignoreEval}},{key:"__isNodejsScope",value:function __isNodejsScope(){return this.__options.nodejsScope}},{key:"isModule",value:function isModule(){return this.__options.sourceType==="module"}},{key:"isImpliedStrict",value:function isImpliedStrict(){return this.__options.impliedStrict}},{key:"isStrictModeSupported",value:function isStrictModeSupported(){return this.__options.ecmaVersion>=5}},{key:"__get",value:function __get(node){return this.__nodeToScope.get(node)}},{key:"getDeclaredVariables",value:function getDeclaredVariables(node){return this.__declaredVariables.get(node)||[]}},{key:"acquire",value:function acquire(node,inner){var scopes,scope,i,iz;function predicate(scope){if(scope.type==="function"&&scope.functionExpressionScope){return false}if(scope.type==="TDZ"){return false}return true}scopes=this.__get(node);if(!scopes||scopes.length===0){return null}if(scopes.length===1){return scopes[0]}if(inner){for(i=scopes.length-1;i>=0;--i){scope=scopes[i];if(predicate(scope)){return scope}}}else{for(i=0,iz=scopes.length;i<iz;++i){scope=scopes[i];if(predicate(scope)){return scope}}}return null}},{key:"acquireAll",value:function acquireAll(node){return this.__get(node)}},{key:"release",value:function release(node,inner){var scopes,scope;scopes=this.__get(node);if(scopes&&scopes.length){scope=scopes[0].upper;if(!scope){return null}return this.acquire(scope.block,inner)}return null}},{key:"attach",value:function attach(){}},{key:"detach",value:function detach(){}},{key:"__nestScope",value:function __nestScope(scope){if(scope instanceof _scope.GlobalScope){(0,_assert2.default)(this.__currentScope===null);this.globalScope=scope}this.__currentScope=scope;return scope}},{key:"__nestGlobalScope",value:function __nestGlobalScope(node){return this.__nestScope(new _scope.GlobalScope(this,node))}},{key:"__nestBlockScope",value:function __nestBlockScope(node,isMethodDefinition){return this.__nestScope(new _scope.BlockScope(this,this.__currentScope,node))}},{key:"__nestFunctionScope",value:function __nestFunctionScope(node,isMethodDefinition){return this.__nestScope(new _scope.FunctionScope(this,this.__currentScope,node,isMethodDefinition))}},{key:"__nestForScope",value:function __nestForScope(node){return this.__nestScope(new _scope.ForScope(this,this.__currentScope,node))}},{key:"__nestCatchScope",value:function __nestCatchScope(node){return this.__nestScope(new _scope.CatchScope(this,this.__currentScope,node))}},{key:"__nestWithScope",value:function __nestWithScope(node){return this.__nestScope(new _scope.WithScope(this,this.__currentScope,node))}},{key:"__nestClassScope",value:function __nestClassScope(node){return this.__nestScope(new _scope.ClassScope(this,this.__currentScope,node))}},{key:"__nestSwitchScope",value:function __nestSwitchScope(node){return this.__nestScope(new _scope.SwitchScope(this,this.__currentScope,node))}},{key:"__nestModuleScope",value:function __nestModuleScope(node){return this.__nestScope(new _scope.ModuleScope(this,this.__currentScope,node))}},{key:"__nestTDZScope",value:function __nestTDZScope(node){return this.__nestScope(new _scope.TDZScope(this,this.__currentScope,node))}},{key:"__nestFunctionExpressionNameScope",value:function __nestFunctionExpressionNameScope(node){return this.__nestScope(new _scope.FunctionExpressionNameScope(this,this.__currentScope,node))}},{key:"__isES6",value:function __isES6(){return this.__options.ecmaVersion>=6}}]);return ScopeManager}();exports.default=ScopeManager},{"./scope":488,assert:3,"es6-weak-map":463}],488:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ClassScope=exports.ForScope=exports.FunctionScope=exports.SwitchScope=exports.BlockScope=exports.TDZScope=exports.WithScope=exports.CatchScope=exports.FunctionExpressionNameScope=exports.ModuleScope=exports.GlobalScope=undefined;var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _estraverse=require("estraverse");var _es6Map=require("es6-map");var _es6Map2=_interopRequireDefault(_es6Map);var _reference=require("./reference");var _reference2=_interopRequireDefault(_reference);var _variable=require("./variable");var _variable2=_interopRequireDefault(_variable);var _definition=require("./definition");var _definition2=_interopRequireDefault(_definition);var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function isStrictScope(scope,block,isMethodDefinition,useDirective){var body,i,iz,stmt,expr;if(scope.upper&&scope.upper.isStrict){return true}if(block.type===_estraverse.Syntax.ArrowFunctionExpression){return true}if(isMethodDefinition){return true}if(scope.type==="class"||scope.type==="module"){return true}if(scope.type==="block"||scope.type==="switch"){return false}if(scope.type==="function"){if(block.type===_estraverse.Syntax.Program){body=block}else{body=block.body}}else if(scope.type==="global"){body=block}else{return false}if(useDirective){for(i=0,iz=body.body.length;i<iz;++i){stmt=body.body[i];if(stmt.type!==_estraverse.Syntax.DirectiveStatement){break}if(stmt.raw==='"use strict"'||stmt.raw==="'use strict'"){return true}}}else{for(i=0,iz=body.body.length;i<iz;++i){stmt=body.body[i];if(stmt.type!==_estraverse.Syntax.ExpressionStatement){break}expr=stmt.expression;if(expr.type!==_estraverse.Syntax.Literal||typeof expr.value!=="string"){break}if(expr.raw!=null){if(expr.raw==='"use strict"'||expr.raw==="'use strict'"){return true}}else{if(expr.value==="use strict"){return true}}}}return false}function registerScope(scopeManager,scope){var scopes;scopeManager.scopes.push(scope);scopes=scopeManager.__nodeToScope.get(scope.block);if(scopes){scopes.push(scope)}else{scopeManager.__nodeToScope.set(scope.block,[scope])}}function shouldBeStatically(def){return def.type===_variable2.default.ClassName||def.type===_variable2.default.Variable&&def.parent.kind!=="var"}var Scope=function(){function Scope(scopeManager,type,upperScope,block,isMethodDefinition){_classCallCheck(this,Scope);this.type=type;this.set=new _es6Map2.default;this.taints=new _es6Map2.default;this.dynamic=this.type==="global"||this.type==="with";this.block=block;this.through=[];this.variables=[];this.references=[];this.variableScope=this.type==="global"||this.type==="function"||this.type==="module"?this:upperScope.variableScope;this.functionExpressionScope=false;this.directCallToEvalScope=false;this.thisFound=false;this.__left=[];this.upper=upperScope;this.isStrict=isStrictScope(this,block,isMethodDefinition,scopeManager.__useDirective());this.childScopes=[];if(this.upper){this.upper.childScopes.push(this)}this.__declaredVariables=scopeManager.__declaredVariables;registerScope(scopeManager,this)}_createClass(Scope,[{key:"__shouldStaticallyClose",value:function __shouldStaticallyClose(scopeManager){return!this.dynamic||scopeManager.__isOptimistic()}},{key:"__shouldStaticallyCloseForGlobal",value:function __shouldStaticallyCloseForGlobal(ref){var name=ref.identifier.name;if(!this.set.has(name)){return false}var variable=this.set.get(name);var defs=variable.defs;return defs.length>0&&defs.every(shouldBeStatically)}},{key:"__staticCloseRef",value:function __staticCloseRef(ref){if(!this.__resolve(ref)){this.__delegateToUpperScope(ref)}}},{key:"__dynamicCloseRef",value:function __dynamicCloseRef(ref){var current=this;do{current.through.push(ref);current=current.upper}while(current)}},{key:"__globalCloseRef",value:function __globalCloseRef(ref){if(this.__shouldStaticallyCloseForGlobal(ref)){this.__staticCloseRef(ref)}else{this.__dynamicCloseRef(ref)}}},{key:"__close",value:function __close(scopeManager){var closeRef;if(this.__shouldStaticallyClose(scopeManager)){closeRef=this.__staticCloseRef}else if(this.type!=="global"){closeRef=this.__dynamicCloseRef}else{closeRef=this.__globalCloseRef}for(var i=0,iz=this.__left.length;i<iz;++i){var ref=this.__left[i];closeRef.call(this,ref)}this.__left=null;return this.upper}},{key:"__resolve",value:function __resolve(ref){var variable,name;name=ref.identifier.name;if(this.set.has(name)){variable=this.set.get(name);variable.references.push(ref);variable.stack=variable.stack&&ref.from.variableScope===this.variableScope;if(ref.tainted){variable.tainted=true;this.taints.set(variable.name,true)}ref.resolved=variable;return true}return false}},{key:"__delegateToUpperScope",value:function __delegateToUpperScope(ref){if(this.upper){this.upper.__left.push(ref)}this.through.push(ref)}},{key:"__addDeclaredVariablesOfNode",value:function __addDeclaredVariablesOfNode(variable,node){if(node==null){return}var variables=this.__declaredVariables.get(node);if(variables==null){variables=[];this.__declaredVariables.set(node,variables)}if(variables.indexOf(variable)===-1){variables.push(variable)}}},{key:"__defineGeneric",value:function __defineGeneric(name,set,variables,node,def){var variable;variable=set.get(name);if(!variable){variable=new _variable2.default(name,this);set.set(name,variable);variables.push(variable)}if(def){variable.defs.push(def);if(def.type!==_variable2.default.TDZ){this.__addDeclaredVariablesOfNode(variable,def.node);this.__addDeclaredVariablesOfNode(variable,def.parent)}}if(node){variable.identifiers.push(node)}}},{key:"__define",value:function __define(node,def){if(node&&node.type===_estraverse.Syntax.Identifier){this.__defineGeneric(node.name,this.set,this.variables,node,def)}}},{key:"__referencing",value:function __referencing(node,assign,writeExpr,maybeImplicitGlobal,partial,init){if(!node||node.type!==_estraverse.Syntax.Identifier){return}if(node.name==="super"){return}var ref=new _reference2.default(node,this,assign||_reference2.default.READ,writeExpr,maybeImplicitGlobal,!!partial,!!init);this.references.push(ref);this.__left.push(ref)}},{key:"__detectEval",value:function __detectEval(){var current;current=this;this.directCallToEvalScope=true;do{current.dynamic=true;current=current.upper}while(current)}},{key:"__detectThis",value:function __detectThis(){this.thisFound=true}},{key:"__isClosed",value:function __isClosed(){return this.__left===null}},{key:"resolve",value:function resolve(ident){var ref,i,iz;(0,_assert2.default)(this.__isClosed(),"Scope should be closed.");(0,_assert2.default)(ident.type===_estraverse.Syntax.Identifier,"Target should be identifier.");for(i=0,iz=this.references.length;i<iz;++i){ref=this.references[i];if(ref.identifier===ident){return ref}}return null}},{key:"isStatic",value:function isStatic(){return!this.dynamic}},{key:"isArgumentsMaterialized",value:function isArgumentsMaterialized(){return true}},{key:"isThisMaterialized",value:function isThisMaterialized(){return true}},{key:"isUsedName",value:function isUsedName(name){if(this.set.has(name)){return true}for(var i=0,iz=this.through.length;i<iz;++i){if(this.through[i].identifier.name===name){return true}}return false}}]);return Scope}();exports.default=Scope;var GlobalScope=exports.GlobalScope=function(_Scope){_inherits(GlobalScope,_Scope);function GlobalScope(scopeManager,block){_classCallCheck(this,GlobalScope);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(GlobalScope).call(this,scopeManager,"global",null,block,false));_this.implicit={set:new _es6Map2.default,variables:[],left:[]};return _this}_createClass(GlobalScope,[{key:"__close",value:function __close(scopeManager){var implicit=[];for(var i=0,iz=this.__left.length;i<iz;++i){var ref=this.__left[i];if(ref.__maybeImplicitGlobal&&!this.set.has(ref.identifier.name)){implicit.push(ref.__maybeImplicitGlobal)}}for(var _i=0,_iz=implicit.length;_i<_iz;++_i){var info=implicit[_i];this.__defineImplicit(info.pattern,new _definition2.default(_variable2.default.ImplicitGlobalVariable,info.pattern,info.node,null,null,null))}this.implicit.left=this.__left;return _get(Object.getPrototypeOf(GlobalScope.prototype),"__close",this).call(this,scopeManager)}},{key:"__defineImplicit",value:function __defineImplicit(node,def){if(node&&node.type===_estraverse.Syntax.Identifier){this.__defineGeneric(node.name,this.implicit.set,this.implicit.variables,node,def)}}}]);return GlobalScope}(Scope);var ModuleScope=exports.ModuleScope=function(_Scope2){_inherits(ModuleScope,_Scope2);function ModuleScope(scopeManager,upperScope,block){_classCallCheck(this,ModuleScope);return _possibleConstructorReturn(this,Object.getPrototypeOf(ModuleScope).call(this,scopeManager,"module",upperScope,block,false))}return ModuleScope}(Scope);var FunctionExpressionNameScope=exports.FunctionExpressionNameScope=function(_Scope3){_inherits(FunctionExpressionNameScope,_Scope3);function FunctionExpressionNameScope(scopeManager,upperScope,block){_classCallCheck(this,FunctionExpressionNameScope);var _this3=_possibleConstructorReturn(this,Object.getPrototypeOf(FunctionExpressionNameScope).call(this,scopeManager,"function-expression-name",upperScope,block,false));_this3.__define(block.id,new _definition2.default(_variable2.default.FunctionName,block.id,block,null,null,null));_this3.functionExpressionScope=true;return _this3}return FunctionExpressionNameScope}(Scope);var CatchScope=exports.CatchScope=function(_Scope4){_inherits(CatchScope,_Scope4);function CatchScope(scopeManager,upperScope,block){_classCallCheck(this,CatchScope);return _possibleConstructorReturn(this,Object.getPrototypeOf(CatchScope).call(this,scopeManager,"catch",upperScope,block,false))}return CatchScope}(Scope);var WithScope=exports.WithScope=function(_Scope5){_inherits(WithScope,_Scope5);function WithScope(scopeManager,upperScope,block){_classCallCheck(this,WithScope);return _possibleConstructorReturn(this,Object.getPrototypeOf(WithScope).call(this,scopeManager,"with",upperScope,block,false))}_createClass(WithScope,[{key:"__close",value:function __close(scopeManager){if(this.__shouldStaticallyClose(scopeManager)){return _get(Object.getPrototypeOf(WithScope.prototype),"__close",this).call(this,scopeManager)}for(var i=0,iz=this.__left.length;i<iz;++i){var ref=this.__left[i];ref.tainted=true;this.__delegateToUpperScope(ref)}this.__left=null;return this.upper}}]);return WithScope}(Scope);var TDZScope=exports.TDZScope=function(_Scope6){_inherits(TDZScope,_Scope6);function TDZScope(scopeManager,upperScope,block){_classCallCheck(this,TDZScope);return _possibleConstructorReturn(this,Object.getPrototypeOf(TDZScope).call(this,scopeManager,"TDZ",upperScope,block,false))}return TDZScope}(Scope);var BlockScope=exports.BlockScope=function(_Scope7){_inherits(BlockScope,_Scope7);function BlockScope(scopeManager,upperScope,block){_classCallCheck(this,BlockScope);return _possibleConstructorReturn(this,Object.getPrototypeOf(BlockScope).call(this,scopeManager,"block",upperScope,block,false))}return BlockScope}(Scope);var SwitchScope=exports.SwitchScope=function(_Scope8){_inherits(SwitchScope,_Scope8);function SwitchScope(scopeManager,upperScope,block){_classCallCheck(this,SwitchScope);return _possibleConstructorReturn(this,Object.getPrototypeOf(SwitchScope).call(this,scopeManager,"switch",upperScope,block,false))}return SwitchScope}(Scope);var FunctionScope=exports.FunctionScope=function(_Scope9){_inherits(FunctionScope,_Scope9);function FunctionScope(scopeManager,upperScope,block,isMethodDefinition){_classCallCheck(this,FunctionScope);var _this9=_possibleConstructorReturn(this,Object.getPrototypeOf(FunctionScope).call(this,scopeManager,"function",upperScope,block,isMethodDefinition));if(_this9.block.type!==_estraverse.Syntax.ArrowFunctionExpression){_this9.__defineArguments()}return _this9}_createClass(FunctionScope,[{key:"isArgumentsMaterialized",value:function isArgumentsMaterialized(){if(this.block.type===_estraverse.Syntax.ArrowFunctionExpression){return false}if(!this.isStatic()){return true}var variable=this.set.get("arguments");(0,_assert2.default)(variable,"Always have arguments variable.");return variable.tainted||variable.references.length!==0}},{key:"isThisMaterialized",value:function isThisMaterialized(){if(!this.isStatic()){return true}return this.thisFound}},{key:"__defineArguments",value:function __defineArguments(){this.__defineGeneric("arguments",this.set,this.variables,null,null);this.taints.set("arguments",true)}}]);return FunctionScope}(Scope);var ForScope=exports.ForScope=function(_Scope10){_inherits(ForScope,_Scope10);function ForScope(scopeManager,upperScope,block){_classCallCheck(this,ForScope);return _possibleConstructorReturn(this,Object.getPrototypeOf(ForScope).call(this,scopeManager,"for",upperScope,block,false))}return ForScope}(Scope);var ClassScope=exports.ClassScope=function(_Scope11){_inherits(ClassScope,_Scope11);function ClassScope(scopeManager,upperScope,block){_classCallCheck(this,ClassScope);return _possibleConstructorReturn(this,Object.getPrototypeOf(ClassScope).call(this,scopeManager,"class",upperScope,block,false))}return ClassScope}(Scope)},{"./definition":482,"./reference":485,"./variable":489,assert:3,"es6-map":452,estraverse:496}],489:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Variable=function Variable(name,scope){_classCallCheck(this,Variable);this.name=name;this.identifiers=[];this.references=[];this.defs=[];this.tainted=false;this.stack=true;this.scope=scope};exports.default=Variable;Variable.CatchClause="CatchClause";Variable.Parameter="Parameter";Variable.FunctionName="FunctionName";Variable.ClassName="ClassName";Variable.Variable="Variable";Variable.ImportBinding="ImportBinding";Variable.TDZ="TDZ";Variable.ImplicitGlobalVariable="ImplicitGlobalVariable"},{}],490:[function(require,module,exports){module.exports={_from:"escope@>=3.6.0 <4.0.0",_id:"escope@3.6.0",_inBundle:false,_integrity:"sha1-4Bl16BJ4GhY6ba392AOY3GTIicM=",_location:"/webppl-viz/escope",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"escope@3.6.0",name:"escope",escapedName:"escope",rawSpec:"3.6.0",saveSpec:null,fetchSpec:"3.6.0"},_requiredBy:["/webppl-viz"],_resolved:"https://registry.npmjs.org/escope/-/escope-3.6.0.tgz",_shasum:"e01975e812781a163a6dadfdd80398dc64c889c3",_spec:"escope@3.6.0",_where:"/Users/lestera/Documents/git/webppl/node_modules/webppl-viz",bugs:{url:"https://github.com/estools/escope/issues"},bundleDependencies:false,dependencies:{"es6-map":"^0.1.3","es6-weak-map":"^2.0.1",esrecurse:"^4.1.0",estraverse:"^4.1.1"},deprecated:false,description:"ECMAScript scope analyzer",devDependencies:{babel:"^6.3.26","babel-preset-es2015":"^6.3.13","babel-register":"^6.3.13",browserify:"^13.0.0",chai:"^3.4.1",espree:"^3.1.1",esprima:"^2.7.1",gulp:"^3.9.0","gulp-babel":"^6.1.1","gulp-bump":"^1.0.0","gulp-eslint":"^1.1.1","gulp-espower":"^1.0.2","gulp-filter":"^3.0.1","gulp-git":"^1.6.1","gulp-mocha":"^2.2.0","gulp-plumber":"^1.0.1","gulp-sourcemaps":"^1.6.0","gulp-tag-version":"^1.3.0",jsdoc:"^3.4.0",lazypipe:"^1.0.1","vinyl-source-stream":"^1.1.0"},engines:{node:">=0.4.0"},homepage:"http://github.com/estools/escope",license:"BSD-2-Clause",main:"lib/index.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"escope",repository:{type:"git",url:"git+https://github.com/estools/escope.git"},scripts:{jsdoc:"jsdoc src/*.js README.md",lint:"gulp lint",test:"gulp travis","unit-test":"gulp test"},version:"3.6.0"}},{}],491:[function(require,module,exports){arguments[4][126][0].apply(exports,arguments)},{dup:126}],492:[function(require,module,exports){(function(){"use strict";var assign,estraverse,isArray,objectKeys;assign=require("object-assign");estraverse=require("estraverse");isArray=Array.isArray||function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"};objectKeys=Object.keys||function(o){var keys=[],key;for(key in o){keys.push(key)}return keys};function isNode(node){if(node==null){return false}return typeof node==="object"&&typeof node.type==="string"}function isProperty(nodeType,key){return(nodeType===estraverse.Syntax.ObjectExpression||nodeType===estraverse.Syntax.ObjectPattern)&&key==="properties"}function Visitor(visitor,options){options=options||{};this.__visitor=visitor||this;this.__childVisitorKeys=options.childVisitorKeys?assign({},estraverse.VisitorKeys,options.childVisitorKeys):estraverse.VisitorKeys;if(options.fallback==="iteration"){this.__fallback=objectKeys}else if(typeof options.fallback==="function"){this.__fallback=options.fallback}}Visitor.prototype.visitChildren=function(node){var type,children,i,iz,j,jz,child;if(node==null){return}type=node.type||estraverse.Syntax.Property;children=this.__childVisitorKeys[type];if(!children){if(this.__fallback){children=this.__fallback(node)}else{throw new Error("Unknown node type "+type+".")}}for(i=0,iz=children.length;i<iz;++i){child=node[children[i]];if(child){if(isArray(child)){for(j=0,jz=child.length;j<jz;++j){if(child[j]){if(isNode(child[j])||isProperty(type,children[i])){this.visit(child[j])}}}}else if(isNode(child)){this.visit(child)}}}};Visitor.prototype.visit=function(node){var type;if(node==null){return}type=node.type||estraverse.Syntax.Property;if(this.__visitor[type]){this.__visitor[type].call(this,node);return}this.visitChildren(node)};exports.version=require("./package.json").version;exports.Visitor=Visitor;exports.visit=function(node,visitor,options){var v=new Visitor(visitor,options);v.visit(node)}})()},{"./package.json":495,estraverse:493,"object-assign":533}],493:[function(require,module,exports){arguments[4][130][0].apply(exports,arguments)},{"./package.json":494,dup:130}],494:[function(require,module,exports){module.exports={_from:"estraverse@>=4.1.0 <4.2.0",_id:"estraverse@4.1.1",_inBundle:false,_integrity:"sha1-9srKcokzqFDvkGYdDheYK6RxEaI=",_location:"/webppl-viz/esrecurse/estraverse",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"estraverse@4.1.1",name:"estraverse",escapedName:"estraverse",rawSpec:"4.1.1",saveSpec:null,fetchSpec:"4.1.1"},_requiredBy:["/webppl-viz/esrecurse"],_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-4.1.1.tgz",_shasum:"f6caca728933a850ef90661d0e17982ba47111a2",_spec:"estraverse@4.1.1",_where:"/Users/lestera/Documents/git/webppl/node_modules/webppl-viz",bugs:{url:"https://github.com/estools/estraverse/issues"},bundleDependencies:false,deprecated:false,description:"ECMAScript JS AST traversal functions",devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},engines:{node:">=0.10.0"},homepage:"https://github.com/estools/estraverse",license:"BSD-2-Clause",main:"estraverse.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"estraverse",repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},scripts:{lint:"jshint estraverse.js",test:"npm run-script lint && npm run-script unit-test","unit-test":"mocha --compilers coffee:coffee-script/register"},version:"4.1.1"}},{}],495:[function(require,module,exports){module.exports={_from:"esrecurse@>=4.1.0 <5.0.0",_id:"esrecurse@4.1.0",_inBundle:false,_integrity:"sha1-RxO2U2rffyrE8yfVWed1a/9kgiA=",_location:"/webppl-viz/esrecurse",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"esrecurse@4.1.0",name:"esrecurse",escapedName:"esrecurse",rawSpec:"4.1.0",saveSpec:null,fetchSpec:"4.1.0"},_requiredBy:["/webppl-viz/escope"],_resolved:"https://registry.npmjs.org/esrecurse/-/esrecurse-4.1.0.tgz",_shasum:"4713b6536adf7f2ac4f327d559e7756bff648220",_spec:"esrecurse@4.1.0",_where:"/Users/lestera/Documents/git/webppl/node_modules/webppl-viz",bugs:{url:"https://github.com/estools/esrecurse/issues"},bundleDependencies:false,dependencies:{estraverse:"~4.1.0","object-assign":"^4.0.1"},deprecated:false,description:"ECMAScript AST recursive visitor",devDependencies:{chai:"^3.3.0","coffee-script":"^1.9.1",esprima:"^2.1.0",gulp:"^3.9.0","gulp-bump":"^1.0.0","gulp-eslint":"^1.0.0","gulp-filter":"^3.0.1","gulp-git":"^1.1.0","gulp-mocha":"^2.1.3","gulp-tag-version":"^1.2.1",jsdoc:"^3.3.0-alpha10",minimist:"^1.1.0"},engines:{node:">=0.10.0"},homepage:"https://github.com/estools/esrecurse",license:"BSD-2-Clause",main:"esrecurse.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"https://github.com/Constellation"}],name:"esrecurse",repository:{type:"git",url:"git+https://github.com/estools/esrecurse.git"},scripts:{lint:"gulp lint",test:"gulp travis","unit-test":"gulp test"},version:"4.1.0"}},{}],496:[function(require,module,exports){arguments[4][133][0].apply(exports,arguments)},{"./package.json":497,dup:133}],497:[function(require,module,exports){module.exports={_from:"estraverse@>=4.2.0 <5.0.0",_id:"estraverse@4.2.0",_inBundle:false,_integrity:"sha1-De4/7TH81GlhjOc0IJn8GvoL2xM=",_location:"/webppl-viz/estraverse",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"estraverse@4.2.0",name:"estraverse",escapedName:"estraverse",rawSpec:"4.2.0",saveSpec:null,fetchSpec:"4.2.0"},_requiredBy:["/webppl-viz","/webppl-viz/escope"],_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-4.2.0.tgz",_shasum:"0dee3fed31fcd469618ce7342099fc1afa0bdb13",_spec:"estraverse@4.2.0",_where:"/Users/lestera/Documents/git/webppl/node_modules/webppl-viz",bugs:{url:"https://github.com/estools/estraverse/issues"},bundleDependencies:false,deprecated:false,description:"ECMAScript JS AST traversal functions",devDependencies:{"babel-preset-es2015":"^6.3.13","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},engines:{node:">=0.10.0"},homepage:"https://github.com/estools/estraverse",license:"BSD-2-Clause",main:"estraverse.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"estraverse",repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},scripts:{lint:"jshint estraverse.js",test:"npm run-script lint && npm run-script unit-test","unit-test":"mocha --compilers js:babel-register"},version:"4.2.0"}},{}],498:[function(require,module,exports){arguments[4][135][0].apply(exports,arguments)},{dup:135}],499:[function(require,module,exports){arguments[4][136][0].apply(exports,arguments)},{dup:136}],500:[function(require,module,exports){arguments[4][137][0].apply(exports,arguments)},{"./code":499,dup:137}],501:[function(require,module,exports){arguments[4][138][0].apply(exports,arguments)},{"./ast":498,"./code":499,"./keyword":500,dup:138}],502:[function(require,module,exports){"use strict";var d=require("d"),callable=require("es5-ext/object/valid-callable"),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:true,enumerable:false,writable:true},on,once,off,emit,methods,descriptors,base;on=function(type,listener){var data;callable(listener);if(!hasOwnProperty.call(this,"__ee__")){data=descriptor.value=create(null);defineProperty(this,"__ee__",descriptor);descriptor.value=null}else{data=this.__ee__}if(!data[type])data[type]=listener;else if(typeof data[type]==="object")data[type].push(listener);else data[type]=[data[type],listener];return this};once=function(type,listener){var once,self;callable(listener);self=this;on.call(this,type,once=function(){off.call(self,type,once);apply.call(listener,this,arguments)});once.__eeOnceListener__=listener;return this};off=function(type,listener){var data,listeners,candidate,i;callable(listener);if(!hasOwnProperty.call(this,"__ee__"))return this;data=this.__ee__;if(!data[type])return this;listeners=data[type];if(typeof listeners==="object"){for(i=0;candidate=listeners[i];++i){if(candidate===listener||candidate.__eeOnceListener__===listener){if(listeners.length===2)data[type]=listeners[i?0:1];else listeners.splice(i,1)}}}else{if(listeners===listener||listeners.__eeOnceListener__===listener){delete data[type]}}return this};emit=function(type){var i,l,listener,listeners,args;if(!hasOwnProperty.call(this,"__ee__"))return;listeners=this.__ee__[type];if(!listeners)return;if(typeof listeners==="object"){l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i)args[i-1]=arguments[i];listeners=listeners.slice();for(i=0;listener=listeners[i];++i){apply.call(listener,this,args)}}else{switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i){args[i-1]=arguments[i]}apply.call(listeners,this,args)}}};methods={on:on,once:once,off:off,emit:emit};descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)};base=defineProperties({},descriptors);module.exports=exports=function(o){return o==null?create(base):defineProperties(Object(o),descriptors)};exports.methods=methods},{d:380,"es5-ext/object/valid-callable":437}],503:[function(require,module,exports){(function(process){(function(){"use strict";var emptyFunction=require("./emptyFunction");var EventListener={listen:function listen(target,eventType,callback){if(target.addEventListener){target.addEventListener(eventType,callback,false);return{remove:function remove(){target.removeEventListener(eventType,callback,false)}}}else if(target.attachEvent){target.attachEvent("on"+eventType,callback);return{remove:function remove(){target.detachEvent("on"+eventType,callback)}}}},capture:function capture(target,eventType,callback){if(target.addEventListener){target.addEventListener(eventType,callback,true);return{remove:function remove(){target.removeEventListener(eventType,callback,true)}}}else{if(process.env.NODE_ENV!=="production"){console.error("Attempted to listen to events during the capture phase on a "+"browser that does not support the capture phase. Your application "+"will not receive some events.")}return{remove:emptyFunction}}},registerDefault:function registerDefault(){}};module.exports=EventListener}).call(this)}).call(this,require("_process"))},{"./emptyFunction":510,_process:25}],504:[function(require,module,exports){"use strict";var canUseDOM=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);var ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:typeof Worker!=="undefined",canUseEventListeners:canUseDOM&&!!(window.addEventListener||window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment},{}],505:[function(require,module,exports){"use strict";var _hyphenPattern=/-(.)/g;function camelize(string){return string.replace(_hyphenPattern,function(_,character){return character.toUpperCase()})}module.exports=camelize},{}],506:[function(require,module,exports){"use strict";var camelize=require("./camelize");var msPattern=/^-ms-/;function camelizeStyleName(string){return camelize(string.replace(msPattern,"ms-"))}module.exports=camelizeStyleName},{"./camelize":505}],507:[function(require,module,exports){"use strict";var isTextNode=require("./isTextNode");function containsNode(outerNode,innerNode){if(!outerNode||!innerNode){return false}else if(outerNode===innerNode){return true}else if(isTextNode(outerNode)){return false}else if(isTextNode(innerNode)){return containsNode(outerNode,innerNode.parentNode)}else if("contains"in outerNode){return outerNode.contains(innerNode)}else if(outerNode.compareDocumentPosition){return!!(outerNode.compareDocumentPosition(innerNode)&16)}else{return false}}module.exports=containsNode},{"./isTextNode":520}],508:[function(require,module,exports){(function(process){(function(){"use strict";var invariant=require("./invariant");function toArray(obj){var length=obj.length;!(!Array.isArray(obj)&&(typeof obj==="object"||typeof obj==="function"))?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Array-like object expected"):invariant(false):void 0;!(typeof length==="number")?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Object needs a length property"):invariant(false):void 0;!(length===0||length-1 in obj)?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Object should have keys for indices"):invariant(false):void 0;!(typeof obj.callee!=="function")?process.env.NODE_ENV!=="production"?invariant(false,"toArray: Object can't be `arguments`. Use rest params "+"(function(...args) {}) or Array.from() instead."):invariant(false):void 0;if(obj.hasOwnProperty){try{return Array.prototype.slice.call(obj)}catch(e){}}var ret=Array(length);for(var ii=0;ii<length;ii++){ret[ii]=obj[ii]}return ret}function hasArrayNature(obj){return!!obj&&(typeof obj=="object"||typeof obj=="function")&&"length"in obj&&!("setInterval"in obj)&&typeof obj.nodeType!="number"&&(Array.isArray(obj)||"callee"in obj||"item"in obj)}function createArrayFromMixed(obj){if(!hasArrayNature(obj)){return[obj]}else if(Array.isArray(obj)){return obj.slice()}else{return toArray(obj)}}module.exports=createArrayFromMixed}).call(this)}).call(this,require("_process"))},{"./invariant":518,_process:25}],509:[function(require,module,exports){(function(process){(function(){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var createArrayFromMixed=require("./createArrayFromMixed");var getMarkupWrap=require("./getMarkupWrap");var invariant=require("./invariant");var dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null;var nodeNamePattern=/^\s*<(\w+)/;function getNodeName(markup){var nodeNameMatch=markup.match(nodeNamePattern);return nodeNameMatch&&nodeNameMatch[1].toLowerCase()}function createNodesFromMarkup(markup,handleScript){var node=dummyNode;!!!dummyNode?process.env.NODE_ENV!=="production"?invariant(false,"createNodesFromMarkup dummy not initialized"):invariant(false):void 0;var nodeName=getNodeName(markup);var wrap=nodeName&&getMarkupWrap(nodeName);if(wrap){node.innerHTML=wrap[1]+markup+wrap[2];var wrapDepth=wrap[0];while(wrapDepth--){node=node.lastChild}}else{node.innerHTML=markup}var scripts=node.getElementsByTagName("script");if(scripts.length){!handleScript?process.env.NODE_ENV!=="production"?invariant(false,"createNodesFromMarkup(...): Unexpected <script> element rendered."):invariant(false):void 0;createArrayFromMixed(scripts).forEach(handleScript)}var nodes=Array.from(node.childNodes);while(node.lastChild){node.removeChild(node.lastChild)}return nodes}module.exports=createNodesFromMarkup}).call(this)}).call(this,require("_process"))},{"./ExecutionEnvironment":504,"./createArrayFromMixed":508,"./getMarkupWrap":514,"./invariant":518,_process:25}],510:[function(require,module,exports){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function emptyFunction(){};emptyFunction.thatReturns=makeEmptyFunction;emptyFunction.thatReturnsFalse=makeEmptyFunction(false);emptyFunction.thatReturnsTrue=makeEmptyFunction(true);emptyFunction.thatReturnsNull=makeEmptyFunction(null);emptyFunction.thatReturnsThis=function(){return this};emptyFunction.thatReturnsArgument=function(arg){return arg};module.exports=emptyFunction},{}],511:[function(require,module,exports){(function(process){(function(){"use strict";var emptyObject={};if(process.env.NODE_ENV!=="production"){Object.freeze(emptyObject)}module.exports=emptyObject}).call(this)}).call(this,require("_process"))},{_process:25}],512:[function(require,module,exports){"use strict";function focusNode(node){try{node.focus()}catch(e){}}module.exports=focusNode},{}],513:[function(require,module,exports){"use strict";function getActiveElement(){if(typeof document==="undefined"){return null}try{return document.activeElement||document.body}catch(e){return document.body}}module.exports=getActiveElement},{}],514:[function(require,module,exports){(function(process){(function(){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var invariant=require("./invariant");var dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null;var shouldWrap={};var selectWrap=[1,'<select multiple="true">',"</select>"];var tableWrap=[1,"<table>","</table>"];var trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"];var svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"];var markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap};var svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(nodeName){markupWrap[nodeName]=svgWrap;shouldWrap[nodeName]=true});function getMarkupWrap(nodeName){!!!dummyNode?process.env.NODE_ENV!=="production"?invariant(false,"Markup wrapping node not initialized"):invariant(false):void 0;if(!markupWrap.hasOwnProperty(nodeName)){nodeName="*"}if(!shouldWrap.hasOwnProperty(nodeName)){if(nodeName==="*"){dummyNode.innerHTML="<link />"}else{dummyNode.innerHTML="<"+nodeName+"></"+nodeName+">"}shouldWrap[nodeName]=!dummyNode.firstChild}return shouldWrap[nodeName]?markupWrap[nodeName]:null}module.exports=getMarkupWrap}).call(this)}).call(this,require("_process"))},{"./ExecutionEnvironment":504,"./invariant":518,_process:25}],515:[function(require,module,exports){"use strict";function getUnboundedScrollPosition(scrollable){if(scrollable===window){return{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}}return{x:scrollable.scrollLeft,y:scrollable.scrollTop}}module.exports=getUnboundedScrollPosition},{}],516:[function(require,module,exports){"use strict";var _uppercasePattern=/([A-Z])/g;function hyphenate(string){return string.replace(_uppercasePattern,"-$1").toLowerCase()}module.exports=hyphenate},{}],517:[function(require,module,exports){"use strict";var hyphenate=require("./hyphenate");var msPattern=/^ms-/;function hyphenateStyleName(string){return hyphenate(string).replace(msPattern,"-ms-")}module.exports=hyphenateStyleName},{"./hyphenate":516}],518:[function(require,module,exports){(function(process){(function(){"use strict";var validateFormat=function validateFormat(format){};if(process.env.NODE_ENV!=="production"){validateFormat=function validateFormat(format){if(format===undefined){throw new Error("invariant requires an error message argument")}}}function invariant(condition,format,a,b,c,d,e,f){validateFormat(format);if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]}));error.name="Invariant Violation"}error.framesToPop=1;throw error}}module.exports=invariant}).call(this)}).call(this,require("_process"))},{_process:25}],519:[function(require,module,exports){"use strict";function isNode(object){return!!(object&&(typeof Node==="function"?object instanceof Node:typeof object==="object"&&typeof object.nodeType==="number"&&typeof object.nodeName==="string"))}module.exports=isNode},{}],520:[function(require,module,exports){"use strict";var isNode=require("./isNode");function isTextNode(object){return isNode(object)&&object.nodeType==3}module.exports=isTextNode},{"./isNode":519}],521:[function(require,module,exports){"use strict";function memoizeStringOnly(callback){var cache={};return function(string){if(!cache.hasOwnProperty(string)){cache[string]=callback.call(this,string)}return cache[string]}}module.exports=memoizeStringOnly},{}],522:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("./ExecutionEnvironment");var performance;if(ExecutionEnvironment.canUseDOM){performance=window.performance||window.msPerformance||window.webkitPerformance}module.exports=performance||{}},{"./ExecutionEnvironment":504}],523:[function(require,module,exports){"use strict";var performance=require("./performance");var performanceNow;if(performance.now){performanceNow=function performanceNow(){return performance.now()}}else{performanceNow=function performanceNow(){return Date.now()}}module.exports=performanceNow},{"./performance":522}],524:[function(require,module,exports){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;function is(x,y){if(x===y){return x!==0||y!==0||1/x===1/y}else{return x!==x&&y!==y}}function shallowEqual(objA,objB){if(is(objA,objB)){return true}if(typeof objA!=="object"||objA===null||typeof objB!=="object"||objB===null){return false}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length){return false}for(var i=0;i<keysA.length;i++){if(!hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]])){return false}}return true}module.exports=shallowEqual},{}],525:[function(require,module,exports){(function(process){(function(){"use strict";var emptyFunction=require("./emptyFunction");var warning=emptyFunction;if(process.env.NODE_ENV!=="production"){(function(){var printWarning=function printWarning(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var argIndex=0;var message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}};warning=function warning(condition,format){if(format===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(format.indexOf("Failed Composite propType: ")===0){return}if(!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}printWarning.apply(undefined,[format].concat(args))}}})()}module.exports=warning}).call(this)}).call(this,require("_process"))},{"./emptyFunction":510,_process:25}],526:[function(require,module,exports){module.exports=function(obj){return obj!=null&&(isBuffer(obj)||isSlowBuffer(obj)||!!obj._isBuffer)};function isBuffer(obj){return!!obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)}function isSlowBuffer(obj){return typeof obj.readFloatLE==="function"&&typeof obj.slice==="function"&&isBuffer(obj.slice(0,0))}},{}],527:[function(require,module,exports){arguments[4][162][0].apply(exports,arguments)},{dup:162}],528:[function(require,module,exports){exports.parse=require("./lib/parse");exports.stringify=require("./lib/stringify")},{"./lib/parse":529,"./lib/stringify":530}],529:[function(require,module,exports){var at,ch,escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},text,error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){if(c&&c!==ch){error("Expected '"+c+"' instead of '"+ch+"'")}ch=text.charAt(at);at+=1;return ch},number=function(){var number,string="";if(ch==="-"){string="-";next("-")}while(ch>="0"&&ch<="9"){string+=ch;next()}if(ch==="."){string+=".";while(next()&&ch>="0"&&ch<="9"){string+=ch}}if(ch==="e"||ch==="E"){string+=ch;next();if(ch==="-"||ch==="+"){string+=ch;next()}while(ch>="0"&&ch<="9"){string+=ch;next()}}number=+string;if(!isFinite(number)){error("Bad number")}else{return number}},string=function(){var hex,i,string="",uffff;if(ch==='"'){while(next()){if(ch==='"'){next();return string}else if(ch==="\\"){next();if(ch==="u"){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex)){break}uffff=uffff*16+hex}string+=String.fromCharCode(uffff)}else if(typeof escapee[ch]==="string"){string+=escapee[ch]}else{break}}else{string+=ch}}}error("Bad string")},white=function(){while(ch&&ch<=" "){next()}},word=function(){switch(ch){case"t":next("t");next("r");next("u");next("e");return true;case"f":next("f");next("a");next("l");next("s");next("e");return false;case"n":next("n");next("u");next("l");next("l");return null}error("Unexpected '"+ch+"'")},value,array=function(){var array=[];if(ch==="["){next("[");white();if(ch==="]"){next("]");return array}while(ch){array.push(value());white();if(ch==="]"){next("]");return array}next(",");white()}}error("Bad array")},object=function(){var key,object={};if(ch==="{"){next("{");white();if(ch==="}"){next("}");return object}while(ch){key=string();white();next(":");if(Object.hasOwnProperty.call(object,key)){error('Duplicate key "'+key+'"')}object[key]=value();white();if(ch==="}"){next("}");return object}next(",");white()}}error("Bad object")};value=function(){white();switch(ch){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return ch>="0"&&ch<="9"?number():word()}};module.exports=function(source,reviver){var result;text=source;at=0;ch=" ";result=value();white();if(ch){error("Syntax error")}return typeof reviver==="function"?function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}({"":result},""):result}},{}],530:[function(require,module,exports){var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}module.exports=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}},{}],531:[function(require,module,exports){arguments[4][164][0].apply(exports,arguments)},{dup:164}],532:[function(require,module,exports){(function(){var crypt=require("crypt"),utf8=require("charenc").utf8,isBuffer=require("is-buffer"),bin=require("charenc").bin,md5=function(message,options){if(message.constructor==String)if(options&&options.encoding==="binary")message=bin.stringToBytes(message);else message=utf8.stringToBytes(message);else if(isBuffer(message))message=Array.prototype.slice.call(message,0);else if(!Array.isArray(message))message=message.toString();var m=crypt.bytesToWords(message),l=message.length*8,a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(var i=0;i<m.length;i++){m[i]=(m[i]<<8|m[i]>>>24)&16711935|(m[i]<<24|m[i]>>>8)&4278255360}m[l>>>5]|=128<<l%32;m[(l+64>>>9<<4)+14]=l;var FF=md5._ff,GG=md5._gg,HH=md5._hh,II=md5._ii;for(var i=0;i<m.length;i+=16){var aa=a,bb=b,cc=c,dd=d;a=FF(a,b,c,d,m[i+0],7,-680876936);d=FF(d,a,b,c,m[i+1],12,-389564586);c=FF(c,d,a,b,m[i+2],17,606105819);b=FF(b,c,d,a,m[i+3],22,-1044525330);a=FF(a,b,c,d,m[i+4],7,-176418897);d=FF(d,a,b,c,m[i+5],12,1200080426);c=FF(c,d,a,b,m[i+6],17,-1473231341);b=FF(b,c,d,a,m[i+7],22,-45705983);a=FF(a,b,c,d,m[i+8],7,1770035416);d=FF(d,a,b,c,m[i+9],12,-1958414417);c=FF(c,d,a,b,m[i+10],17,-42063);b=FF(b,c,d,a,m[i+11],22,-1990404162);a=FF(a,b,c,d,m[i+12],7,1804603682);d=FF(d,a,b,c,m[i+13],12,-40341101);c=FF(c,d,a,b,m[i+14],17,-1502002290);b=FF(b,c,d,a,m[i+15],22,1236535329);a=GG(a,b,c,d,m[i+1],5,-165796510);d=GG(d,a,b,c,m[i+6],9,-1069501632);c=GG(c,d,a,b,m[i+11],14,643717713);b=GG(b,c,d,a,m[i+0],20,-373897302);a=GG(a,b,c,d,m[i+5],5,-701558691);d=GG(d,a,b,c,m[i+10],9,38016083);c=GG(c,d,a,b,m[i+15],14,-660478335);b=GG(b,c,d,a,m[i+4],20,-405537848);a=GG(a,b,c,d,m[i+9],5,568446438);d=GG(d,a,b,c,m[i+14],9,-1019803690);c=GG(c,d,a,b,m[i+3],14,-187363961);b=GG(b,c,d,a,m[i+8],20,1163531501);a=GG(a,b,c,d,m[i+13],5,-1444681467);d=GG(d,a,b,c,m[i+2],9,-51403784);c=GG(c,d,a,b,m[i+7],14,1735328473);b=GG(b,c,d,a,m[i+12],20,-1926607734);a=HH(a,b,c,d,m[i+5],4,-378558);d=HH(d,a,b,c,m[i+8],11,-2022574463);c=HH(c,d,a,b,m[i+11],16,1839030562);b=HH(b,c,d,a,m[i+14],23,-35309556);a=HH(a,b,c,d,m[i+1],4,-1530992060);d=HH(d,a,b,c,m[i+4],11,1272893353);c=HH(c,d,a,b,m[i+7],16,-155497632);b=HH(b,c,d,a,m[i+10],23,-1094730640);a=HH(a,b,c,d,m[i+13],4,681279174);d=HH(d,a,b,c,m[i+0],11,-358537222);c=HH(c,d,a,b,m[i+3],16,-722521979);b=HH(b,c,d,a,m[i+6],23,76029189);a=HH(a,b,c,d,m[i+9],4,-640364487);d=HH(d,a,b,c,m[i+12],11,-421815835);c=HH(c,d,a,b,m[i+15],16,530742520);b=HH(b,c,d,a,m[i+2],23,-995338651);a=II(a,b,c,d,m[i+0],6,-198630844);d=II(d,a,b,c,m[i+7],10,1126891415);c=II(c,d,a,b,m[i+14],15,-1416354905);b=II(b,c,d,a,m[i+5],21,-57434055);a=II(a,b,c,d,m[i+12],6,1700485571);d=II(d,a,b,c,m[i+3],10,-1894986606);c=II(c,d,a,b,m[i+10],15,-1051523);b=II(b,c,d,a,m[i+1],21,-2054922799);a=II(a,b,c,d,m[i+8],6,1873313359);d=II(d,a,b,c,m[i+15],10,-30611744);c=II(c,d,a,b,m[i+6],15,-1560198380);b=II(b,c,d,a,m[i+13],21,1309151649);a=II(a,b,c,d,m[i+4],6,-145523070);d=II(d,a,b,c,m[i+11],10,-1120210379);c=II(c,d,a,b,m[i+2],15,718787259);b=II(b,c,d,a,m[i+9],21,-343485551);a=a+aa>>>0;b=b+bb>>>0;c=c+cc>>>0;d=d+dd>>>0}return crypt.endian([a,b,c,d])};md5._ff=function(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._gg=function(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._hh=function(a,b,c,d,x,s,t){var n=a+(b^c^d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._ii=function(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._blocksize=16;md5._digestsize=16;module.exports=function(message,options){if(message===undefined||message===null)throw new Error("Illegal argument "+message);var digestbytes=crypt.wordsToBytes(md5(message,options));return options&&options.asBytes?digestbytes:options&&options.asString?bin.bytesToString(digestbytes):crypt.bytesToHex(digestbytes)}})()},{charenc:377,crypt:378,"is-buffer":526}],533:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{dup:23}],534:[function(require,module,exports){(function(process,__dirname){(function(){var exec=require("child_process").exec,path=require("path");module.exports=open;function open(target,appName,callback){var opener;if(typeof appName==="function"){callback=appName;appName=null}switch(process.platform){case"darwin":if(appName){opener='open -a "'+escape(appName)+'"'}else{opener="open"}break;case"win32":if(appName){opener='start "" "'+escape(appName)+'"'}else{opener='start ""'}break;default:if(appName){opener=escape(appName)}else{opener=path.join(__dirname,"../vendor/xdg-open")}break}if(process.env.SUDO_USER){opener="sudo -u "+process.env.SUDO_USER+" "+opener}return exec(opener+' "'+escape(target)+'"',callback)}function escape(s){return s.replace(/"/g,'\\"')}}).call(this)}).call(this,require("_process"),"/node_modules/webppl-viz/node_modules/open/lib")},{_process:25,child_process:1,path:24}],535:[function(require,module,exports){arguments[4][177][0].apply(exports,arguments)},{"./lib/ReactDOM":565,dup:177}],536:[function(require,module,exports){"use strict";var ARIADOMPropertyConfig={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};module.exports=ARIADOMPropertyConfig},{}],537:[function(require,module,exports){"use strict";var ReactDOMComponentTree=require("./ReactDOMComponentTree");var focusNode=require("fbjs/lib/focusNode");var AutoFocusUtils={focusDOMComponent:function(){focusNode(ReactDOMComponentTree.getNodeFromInstance(this))}};module.exports=AutoFocusUtils},{"./ReactDOMComponentTree":568,"fbjs/lib/focusNode":512}],538:[function(require,module,exports){"use strict";var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var FallbackCompositionState=require("./FallbackCompositionState");var SyntheticCompositionEvent=require("./SyntheticCompositionEvent");var SyntheticInputEvent=require("./SyntheticInputEvent");var END_KEYCODES=[9,13,27,32];var START_KEYCODE=229;var canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window;var documentMode=null;if(ExecutionEnvironment.canUseDOM&&"documentMode"in document){documentMode=document.documentMode}var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto();var useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11);function isPresto(){var opera=window.opera;return typeof opera==="object"&&typeof opera.version==="function"&&parseInt(opera.version(),10)<=12}var SPACEBAR_CODE=32;var SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE);var eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}};var hasSpaceKeypress=false;function isKeypressCommand(nativeEvent){return(nativeEvent.ctrlKey||nativeEvent.altKey||nativeEvent.metaKey)&&!(nativeEvent.ctrlKey&&nativeEvent.altKey)}function getCompositionEventType(topLevelType){switch(topLevelType){case"topCompositionStart":return eventTypes.compositionStart;case"topCompositionEnd":return eventTypes.compositionEnd;case"topCompositionUpdate":return eventTypes.compositionUpdate}}function isFallbackCompositionStart(topLevelType,nativeEvent){return topLevelType==="topKeyDown"&&nativeEvent.keyCode===START_KEYCODE}function isFallbackCompositionEnd(topLevelType,nativeEvent){switch(topLevelType){case"topKeyUp":return END_KEYCODES.indexOf(nativeEvent.keyCode)!==-1;case"topKeyDown":return nativeEvent.keyCode!==START_KEYCODE;case"topKeyPress":case"topMouseDown":case"topBlur":return true;default:return false}}function getDataFromCustomEvent(nativeEvent){var detail=nativeEvent.detail;if(typeof detail==="object"&&"data"in detail){return detail.data}return null}var currentComposition=null;function extractCompositionEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget){var eventType;var fallbackData;if(canUseCompositionEvent){eventType=getCompositionEventType(topLevelType)}else if(!currentComposition){if(isFallbackCompositionStart(topLevelType,nativeEvent)){eventType=eventTypes.compositionStart}}else if(isFallbackCompositionEnd(topLevelType,nativeEvent)){eventType=eventTypes.compositionEnd}if(!eventType){return null}if(useFallbackCompositionData){if(!currentComposition&&eventType===eventTypes.compositionStart){currentComposition=FallbackCompositionState.getPooled(nativeEventTarget)}else if(eventType===eventTypes.compositionEnd){if(currentComposition){fallbackData=currentComposition.getData()}}}var event=SyntheticCompositionEvent.getPooled(eventType,targetInst,nativeEvent,nativeEventTarget);if(fallbackData){event.data=fallbackData}else{var customData=getDataFromCustomEvent(nativeEvent);if(customData!==null){event.data=customData}}EventPropagators.accumulateTwoPhaseDispatches(event);return event}function getNativeBeforeInputChars(topLevelType,nativeEvent){switch(topLevelType){case"topCompositionEnd":return getDataFromCustomEvent(nativeEvent);case"topKeyPress":var which=nativeEvent.which;if(which!==SPACEBAR_CODE){return null}hasSpaceKeypress=true;return SPACEBAR_CHAR;case"topTextInput":var chars=nativeEvent.data;if(chars===SPACEBAR_CHAR&&hasSpaceKeypress){return null}return chars;default:return null}}function getFallbackBeforeInputChars(topLevelType,nativeEvent){if(currentComposition){if(topLevelType==="topCompositionEnd"||!canUseCompositionEvent&&isFallbackCompositionEnd(topLevelType,nativeEvent)){var chars=currentComposition.getData();FallbackCompositionState.release(currentComposition);currentComposition=null;return chars}return null}switch(topLevelType){case"topPaste":return null;case"topKeyPress":if(nativeEvent.which&&!isKeypressCommand(nativeEvent)){return String.fromCharCode(nativeEvent.which)}return null;case"topCompositionEnd":return useFallbackCompositionData?null:nativeEvent.data;default:return null}}function extractBeforeInputEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget){var chars;if(canUseTextInputEvent){chars=getNativeBeforeInputChars(topLevelType,nativeEvent)}else{chars=getFallbackBeforeInputChars(topLevelType,nativeEvent)}if(!chars){return null}var event=SyntheticInputEvent.getPooled(eventTypes.beforeInput,targetInst,nativeEvent,nativeEventTarget);event.data=chars;EventPropagators.accumulateTwoPhaseDispatches(event);return event}var BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){return[extractCompositionEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget),extractBeforeInputEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget)]}};module.exports=BeforeInputEventPlugin},{"./EventPropagators":554,"./FallbackCompositionState":555,"./SyntheticCompositionEvent":619,"./SyntheticInputEvent":623,"fbjs/lib/ExecutionEnvironment":504}],539:[function(require,module,exports){"use strict";var isUnitlessNumber={animationIterationCount:true,borderImageOutset:true,borderImageSlice:true,borderImageWidth:true,boxFlex:true,boxFlexGroup:true,boxOrdinalGroup:true,columnCount:true,flex:true,flexGrow:true,flexPositive:true,flexShrink:true,flexNegative:true,flexOrder:true,gridRow:true,gridColumn:true,fontWeight:true,lineClamp:true,lineHeight:true,opacity:true,order:true,orphans:true,tabSize:true,widows:true,zIndex:true,zoom:true,fillOpacity:true,floodOpacity:true,stopOpacity:true,strokeDasharray:true,strokeDashoffset:true,strokeMiterlimit:true,strokeOpacity:true,strokeWidth:true};function prefixKey(prefix,key){return prefix+key.charAt(0).toUpperCase()+key.substring(1)}var prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(prop){prefixes.forEach(function(prefix){isUnitlessNumber[prefixKey(prefix,prop)]=isUnitlessNumber[prop]})});var shorthandPropertyExpansions={background:{backgroundAttachment:true,backgroundColor:true,backgroundImage:true,backgroundPositionX:true,backgroundPositionY:true,backgroundRepeat:true},backgroundPosition:{backgroundPositionX:true,backgroundPositionY:true},border:{borderWidth:true,borderStyle:true,borderColor:true},borderBottom:{borderBottomWidth:true,borderBottomStyle:true,borderBottomColor:true},borderLeft:{borderLeftWidth:true,borderLeftStyle:true,borderLeftColor:true},borderRight:{borderRightWidth:true,borderRightStyle:true,borderRightColor:true},borderTop:{borderTopWidth:true,borderTopStyle:true,borderTopColor:true},font:{fontStyle:true,fontVariant:true,fontWeight:true,fontSize:true,lineHeight:true,fontFamily:true},outline:{outlineWidth:true,outlineStyle:true,outlineColor:true}};var CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty},{}],540:[function(require,module,exports){(function(process){(function(){"use strict";var CSSProperty=require("./CSSProperty");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var ReactInstrumentation=require("./ReactInstrumentation");var camelizeStyleName=require("fbjs/lib/camelizeStyleName");var dangerousStyleValue=require("./dangerousStyleValue");var hyphenateStyleName=require("fbjs/lib/hyphenateStyleName");var memoizeStringOnly=require("fbjs/lib/memoizeStringOnly");var warning=require("fbjs/lib/warning");var processStyleName=memoizeStringOnly(function(styleName){return hyphenateStyleName(styleName)});var hasShorthandPropertyBug=false;var styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=true}if(document.documentElement.style.cssFloat===undefined){styleFloatAccessor="styleFloat"}}if(process.env.NODE_ENV!=="production"){var badVendoredStyleNamePattern=/^(?:webkit|moz|o)[A-Z]/;var badStyleValueWithSemicolonPattern=/;\s*$/;var warnedStyleNames={};var warnedStyleValues={};var warnedForNaNValue=false;var warnHyphenatedStyleName=function(name,owner){if(warnedStyleNames.hasOwnProperty(name)&&warnedStyleNames[name]){return}warnedStyleNames[name]=true;process.env.NODE_ENV!=="production"?warning(false,"Unsupported style property %s. Did you mean %s?%s",name,camelizeStyleName(name),checkRenderMessage(owner)):void 0};var warnBadVendoredStyleName=function(name,owner){if(warnedStyleNames.hasOwnProperty(name)&&warnedStyleNames[name]){return}warnedStyleNames[name]=true;process.env.NODE_ENV!=="production"?warning(false,"Unsupported vendor-prefixed style property %s. Did you mean %s?%s",name,name.charAt(0).toUpperCase()+name.slice(1),checkRenderMessage(owner)):void 0};var warnStyleValueWithSemicolon=function(name,value,owner){if(warnedStyleValues.hasOwnProperty(value)&&warnedStyleValues[value]){return}warnedStyleValues[value]=true;process.env.NODE_ENV!=="production"?warning(false,"Style property values shouldn't contain a semicolon.%s "+'Try "%s: %s" instead.',checkRenderMessage(owner),name,value.replace(badStyleValueWithSemicolonPattern,"")):void 0};var warnStyleValueIsNaN=function(name,value,owner){if(warnedForNaNValue){return}warnedForNaNValue=true;process.env.NODE_ENV!=="production"?warning(false,"`NaN` is an invalid value for the `%s` css style property.%s",name,checkRenderMessage(owner)):void 0};var checkRenderMessage=function(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""};var warnValidStyle=function(name,value,component){var owner;if(component){owner=component._currentElement._owner}if(name.indexOf("-")>-1){warnHyphenatedStyleName(name,owner)}else if(badVendoredStyleNamePattern.test(name)){warnBadVendoredStyleName(name,owner)}else if(badStyleValueWithSemicolonPattern.test(value)){warnStyleValueWithSemicolon(name,value,owner)}if(typeof value==="number"&&isNaN(value)){warnStyleValueIsNaN(name,value,owner)}}}var CSSPropertyOperations={createMarkupForStyles:function(styles,component){var serialized="";for(var styleName in styles){if(!styles.hasOwnProperty(styleName)){continue}var styleValue=styles[styleName];if(process.env.NODE_ENV!=="production"){warnValidStyle(styleName,styleValue,component)}if(styleValue!=null){serialized+=processStyleName(styleName)+":";serialized+=dangerousStyleValue(styleName,styleValue,component)+";"}}return serialized||null},setValueForStyles:function(node,styles,component){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:component._debugID,type:"update styles",payload:styles})}var style=node.style;for(var styleName in styles){if(!styles.hasOwnProperty(styleName)){continue}if(process.env.NODE_ENV!=="production"){warnValidStyle(styleName,styles[styleName],component)}var styleValue=dangerousStyleValue(styleName,styles[styleName],component);if(styleName==="float"||styleName==="cssFloat"){styleName=styleFloatAccessor}if(styleValue){style[styleName]=styleValue}else{var expansion=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[styleName];if(expansion){for(var individualStyleName in expansion){style[individualStyleName]=""}}else{style[styleName]=""}}}}};module.exports=CSSPropertyOperations}).call(this)}).call(this,require("_process"))},{"./CSSProperty":539,"./ReactInstrumentation":597,"./dangerousStyleValue":636,_process:25,"fbjs/lib/ExecutionEnvironment":504,"fbjs/lib/camelizeStyleName":506,"fbjs/lib/hyphenateStyleName":517,"fbjs/lib/memoizeStringOnly":521,"fbjs/lib/warning":525}],541:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var PooledClass=require("./PooledClass");var invariant=require("fbjs/lib/invariant");var CallbackQueue=function(){function CallbackQueue(arg){_classCallCheck(this,CallbackQueue);this._callbacks=null;this._contexts=null;this._arg=arg}CallbackQueue.prototype.enqueue=function enqueue(callback,context){this._callbacks=this._callbacks||[];this._callbacks.push(callback);this._contexts=this._contexts||[];this._contexts.push(context)};CallbackQueue.prototype.notifyAll=function notifyAll(){var callbacks=this._callbacks;var contexts=this._contexts;var arg=this._arg;if(callbacks&&contexts){!(callbacks.length===contexts.length)?process.env.NODE_ENV!=="production"?invariant(false,"Mismatched list of contexts in callback queue"):_prodInvariant("24"):void 0;this._callbacks=null;this._contexts=null;for(var i=0;i<callbacks.length;i++){callbacks[i].call(contexts[i],arg)}callbacks.length=0;contexts.length=0}};CallbackQueue.prototype.checkpoint=function checkpoint(){return this._callbacks?this._callbacks.length:0};CallbackQueue.prototype.rollback=function rollback(len){if(this._callbacks&&this._contexts){this._callbacks.length=len;this._contexts.length=len}};CallbackQueue.prototype.reset=function reset(){this._callbacks=null;this._contexts=null};CallbackQueue.prototype.destructor=function destructor(){this.reset()};return CallbackQueue}();module.exports=PooledClass.addPoolingTo(CallbackQueue)}).call(this)}).call(this,require("_process"))},{"./PooledClass":559,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],542:[function(require,module,exports){"use strict";var EventPluginHub=require("./EventPluginHub");var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var SyntheticEvent=require("./SyntheticEvent");var getEventTarget=require("./getEventTarget");var isEventSupported=require("./isEventSupported");var isTextInputElement=require("./isTextInputElement");var eventTypes={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}};var activeElement=null;var activeElementInst=null;var activeElementValue=null;var activeElementValueProp=null;function shouldUseChangeEvent(elem){var nodeName=elem.nodeName&&elem.nodeName.toLowerCase();return nodeName==="select"||nodeName==="input"&&elem.type==="file"}var doesChangeEventBubble=false;if(ExecutionEnvironment.canUseDOM){doesChangeEventBubble=isEventSupported("change")&&(!document.documentMode||document.documentMode>8)}function manualDispatchChangeEvent(nativeEvent){var event=SyntheticEvent.getPooled(eventTypes.change,activeElementInst,nativeEvent,getEventTarget(nativeEvent));EventPropagators.accumulateTwoPhaseDispatches(event);ReactUpdates.batchedUpdates(runEventInBatch,event)}function runEventInBatch(event){EventPluginHub.enqueueEvents(event);EventPluginHub.processEventQueue(false)}function startWatchingForChangeEventIE8(target,targetInst){activeElement=target;activeElementInst=targetInst;activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){if(!activeElement){return}activeElement.detachEvent("onchange",manualDispatchChangeEvent);activeElement=null;activeElementInst=null}function getTargetInstForChangeEvent(topLevelType,targetInst){if(topLevelType==="topChange"){return targetInst}}function handleEventsForChangeEventIE8(topLevelType,target,targetInst){if(topLevelType==="topFocus"){stopWatchingForChangeEventIE8();startWatchingForChangeEventIE8(target,targetInst)}else if(topLevelType==="topBlur"){stopWatchingForChangeEventIE8()}}var isInputEventSupported=false;if(ExecutionEnvironment.canUseDOM){isInputEventSupported=isEventSupported("input")&&(!document.documentMode||document.documentMode>11)}var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(val){activeElementValue=""+val;activeElementValueProp.set.call(this,val)}};function startWatchingForValueChange(target,targetInst){activeElement=target;activeElementInst=targetInst;activeElementValue=target.value;activeElementValueProp=Object.getOwnPropertyDescriptor(target.constructor.prototype,"value");Object.defineProperty(activeElement,"value",newValueProp);if(activeElement.attachEvent){activeElement.attachEvent("onpropertychange",handlePropertyChange)}else{activeElement.addEventListener("propertychange",handlePropertyChange,false)}}function stopWatchingForValueChange(){if(!activeElement){return}delete activeElement.value;if(activeElement.detachEvent){activeElement.detachEvent("onpropertychange",handlePropertyChange)}else{activeElement.removeEventListener("propertychange",handlePropertyChange,false)}activeElement=null;activeElementInst=null;activeElementValue=null;activeElementValueProp=null}function handlePropertyChange(nativeEvent){if(nativeEvent.propertyName!=="value"){return}var value=nativeEvent.srcElement.value;if(value===activeElementValue){return}activeElementValue=value;manualDispatchChangeEvent(nativeEvent)}function getTargetInstForInputEvent(topLevelType,targetInst){if(topLevelType==="topInput"){return targetInst}}function handleEventsForInputEventIE(topLevelType,target,targetInst){if(topLevelType==="topFocus"){stopWatchingForValueChange();startWatchingForValueChange(target,targetInst)}else if(topLevelType==="topBlur"){stopWatchingForValueChange()}}function getTargetInstForInputEventIE(topLevelType,targetInst){if(topLevelType==="topSelectionChange"||topLevelType==="topKeyUp"||topLevelType==="topKeyDown"){if(activeElement&&activeElement.value!==activeElementValue){activeElementValue=activeElement.value;return activeElementInst}}}function shouldUseClickEvent(elem){return elem.nodeName&&elem.nodeName.toLowerCase()==="input"&&(elem.type==="checkbox"||elem.type==="radio")}function getTargetInstForClickEvent(topLevelType,targetInst){if(topLevelType==="topClick"){return targetInst}}var ChangeEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var targetNode=targetInst?ReactDOMComponentTree.getNodeFromInstance(targetInst):window;var getTargetInstFunc,handleEventFunc;if(shouldUseChangeEvent(targetNode)){if(doesChangeEventBubble){getTargetInstFunc=getTargetInstForChangeEvent}else{handleEventFunc=handleEventsForChangeEventIE8}}else if(isTextInputElement(targetNode)){if(isInputEventSupported){getTargetInstFunc=getTargetInstForInputEvent}else{getTargetInstFunc=getTargetInstForInputEventIE;handleEventFunc=handleEventsForInputEventIE}}else if(shouldUseClickEvent(targetNode)){getTargetInstFunc=getTargetInstForClickEvent}if(getTargetInstFunc){var inst=getTargetInstFunc(topLevelType,targetInst);if(inst){var event=SyntheticEvent.getPooled(eventTypes.change,inst,nativeEvent,nativeEventTarget);event.type="change";EventPropagators.accumulateTwoPhaseDispatches(event);return event}}if(handleEventFunc){handleEventFunc(topLevelType,targetNode,targetInst)}}};module.exports=ChangeEventPlugin},{"./EventPluginHub":551,"./EventPropagators":554,"./ReactDOMComponentTree":568,"./ReactUpdates":612,"./SyntheticEvent":621,"./getEventTarget":644,"./isEventSupported":652,"./isTextInputElement":653,"fbjs/lib/ExecutionEnvironment":504}],543:[function(require,module,exports){(function(process){(function(){"use strict";var DOMLazyTree=require("./DOMLazyTree");var Danger=require("./Danger");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInstrumentation=require("./ReactInstrumentation");var createMicrosoftUnsafeLocalFunction=require("./createMicrosoftUnsafeLocalFunction");var setInnerHTML=require("./setInnerHTML");var setTextContent=require("./setTextContent");function getNodeAfter(parentNode,node){if(Array.isArray(node)){node=node[1]}return node?node.nextSibling:parentNode.firstChild}var insertChildAt=createMicrosoftUnsafeLocalFunction(function(parentNode,childNode,referenceNode){parentNode.insertBefore(childNode,referenceNode)});function insertLazyTreeChildAt(parentNode,childTree,referenceNode){DOMLazyTree.insertTreeBefore(parentNode,childTree,referenceNode)}function moveChild(parentNode,childNode,referenceNode){if(Array.isArray(childNode)){moveDelimitedText(parentNode,childNode[0],childNode[1],referenceNode)}else{insertChildAt(parentNode,childNode,referenceNode)}}function removeChild(parentNode,childNode){if(Array.isArray(childNode)){var closingComment=childNode[1];childNode=childNode[0];removeDelimitedText(parentNode,childNode,closingComment);parentNode.removeChild(closingComment)}parentNode.removeChild(childNode)}function moveDelimitedText(parentNode,openingComment,closingComment,referenceNode){var node=openingComment;while(true){var nextNode=node.nextSibling;insertChildAt(parentNode,node,referenceNode);if(node===closingComment){break}node=nextNode}}function removeDelimitedText(parentNode,startNode,closingComment){while(true){var node=startNode.nextSibling;if(node===closingComment){break}else{parentNode.removeChild(node)}}}function replaceDelimitedText(openingComment,closingComment,stringText){var parentNode=openingComment.parentNode;var nodeAfterComment=openingComment.nextSibling;if(nodeAfterComment===closingComment){if(stringText){insertChildAt(parentNode,document.createTextNode(stringText),nodeAfterComment)}}else{if(stringText){setTextContent(nodeAfterComment,stringText);removeDelimitedText(parentNode,nodeAfterComment,closingComment)}else{removeDelimitedText(parentNode,openingComment,closingComment)}}if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(openingComment)._debugID,type:"replace text",payload:stringText})}}var dangerouslyReplaceNodeWithMarkup=Danger.dangerouslyReplaceNodeWithMarkup;if(process.env.NODE_ENV!=="production"){dangerouslyReplaceNodeWithMarkup=function(oldChild,markup,prevInstance){Danger.dangerouslyReplaceNodeWithMarkup(oldChild,markup);if(prevInstance._debugID!==0){ReactInstrumentation.debugTool.onHostOperation({instanceID:prevInstance._debugID,type:"replace with",payload:markup.toString()})}else{var nextInstance=ReactDOMComponentTree.getInstanceFromNode(markup.node);if(nextInstance._debugID!==0){ReactInstrumentation.debugTool.onHostOperation({instanceID:nextInstance._debugID,type:"mount",payload:markup.toString()})}}}}var DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:dangerouslyReplaceNodeWithMarkup,replaceDelimitedText:replaceDelimitedText,processUpdates:function(parentNode,updates){if(process.env.NODE_ENV!=="production"){var parentNodeDebugID=ReactDOMComponentTree.getInstanceFromNode(parentNode)._debugID}for(var k=0;k<updates.length;k++){var update=updates[k];switch(update.type){case"INSERT_MARKUP":insertLazyTreeChildAt(parentNode,update.content,getNodeAfter(parentNode,update.afterNode));if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"insert child",payload:{toIndex:update.toIndex,content:update.content.toString()}})}break;case"MOVE_EXISTING":moveChild(parentNode,update.fromNode,getNodeAfter(parentNode,update.afterNode));if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"move child",payload:{fromIndex:update.fromIndex,toIndex:update.toIndex}})}break;case"SET_MARKUP":setInnerHTML(parentNode,update.content);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"replace children",payload:update.content.toString()})}break;case"TEXT_CONTENT":setTextContent(parentNode,update.content);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"replace text",payload:update.content.toString()})}break;case"REMOVE_NODE":removeChild(parentNode,update.fromNode);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:parentNodeDebugID,type:"remove child",payload:{fromIndex:update.fromIndex}})}break}}}};module.exports=DOMChildrenOperations}).call(this)}).call(this,require("_process"))},{"./DOMLazyTree":544,"./Danger":548,"./ReactDOMComponentTree":568,"./ReactInstrumentation":597,"./createMicrosoftUnsafeLocalFunction":635,"./setInnerHTML":657,"./setTextContent":658,_process:25}],544:[function(require,module,exports){"use strict";var DOMNamespaces=require("./DOMNamespaces");var setInnerHTML=require("./setInnerHTML");var createMicrosoftUnsafeLocalFunction=require("./createMicrosoftUnsafeLocalFunction");var setTextContent=require("./setTextContent");var ELEMENT_NODE_TYPE=1;var DOCUMENT_FRAGMENT_NODE_TYPE=11;var enableLazy=typeof document!=="undefined"&&typeof document.documentMode==="number"||typeof navigator!=="undefined"&&typeof navigator.userAgent==="string"&&/\bEdge\/\d/.test(navigator.userAgent);function insertTreeChildren(tree){if(!enableLazy){return}var node=tree.node;var children=tree.children;if(children.length){for(var i=0;i<children.length;i++){insertTreeBefore(node,children[i],null)}}else if(tree.html!=null){setInnerHTML(node,tree.html)}else if(tree.text!=null){setTextContent(node,tree.text)}}var insertTreeBefore=createMicrosoftUnsafeLocalFunction(function(parentNode,tree,referenceNode){if(tree.node.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE||tree.node.nodeType===ELEMENT_NODE_TYPE&&tree.node.nodeName.toLowerCase()==="object"&&(tree.node.namespaceURI==null||tree.node.namespaceURI===DOMNamespaces.html)){insertTreeChildren(tree);parentNode.insertBefore(tree.node,referenceNode)}else{parentNode.insertBefore(tree.node,referenceNode);insertTreeChildren(tree)}});function replaceChildWithTree(oldNode,newTree){oldNode.parentNode.replaceChild(newTree.node,oldNode);insertTreeChildren(newTree)}function queueChild(parentTree,childTree){if(enableLazy){parentTree.children.push(childTree)}else{parentTree.node.appendChild(childTree.node)}}function queueHTML(tree,html){if(enableLazy){tree.html=html}else{setInnerHTML(tree.node,html)}}function queueText(tree,text){if(enableLazy){tree.text=text}else{setTextContent(tree.node,text)}}function toString(){return this.node.nodeName}function DOMLazyTree(node){return{node:node,children:[],html:null,text:null,toString:toString}}DOMLazyTree.insertTreeBefore=insertTreeBefore;DOMLazyTree.replaceChildWithTree=replaceChildWithTree;DOMLazyTree.queueChild=queueChild;DOMLazyTree.queueHTML=queueHTML;DOMLazyTree.queueText=queueText;module.exports=DOMLazyTree},{"./DOMNamespaces":545,"./createMicrosoftUnsafeLocalFunction":635,"./setInnerHTML":657,"./setTextContent":658}],545:[function(require,module,exports){"use strict";var DOMNamespaces={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};module.exports=DOMNamespaces},{}],546:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function checkMask(value,bitmask){return(value&bitmask)===bitmask}var DOMPropertyInjection={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:16|8,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(domPropertyConfig){var Injection=DOMPropertyInjection;var Properties=domPropertyConfig.Properties||{};var DOMAttributeNamespaces=domPropertyConfig.DOMAttributeNamespaces||{};var DOMAttributeNames=domPropertyConfig.DOMAttributeNames||{};var DOMPropertyNames=domPropertyConfig.DOMPropertyNames||{};var DOMMutationMethods=domPropertyConfig.DOMMutationMethods||{};if(domPropertyConfig.isCustomAttribute){DOMProperty._isCustomAttributeFunctions.push(domPropertyConfig.isCustomAttribute)}for(var propName in Properties){!!DOMProperty.properties.hasOwnProperty(propName)?process.env.NODE_ENV!=="production"?invariant(false,"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",propName):_prodInvariant("48",propName):void 0;var lowerCased=propName.toLowerCase();var propConfig=Properties[propName];var propertyInfo={attributeName:lowerCased,attributeNamespace:null,propertyName:propName,mutationMethod:null,mustUseProperty:checkMask(propConfig,Injection.MUST_USE_PROPERTY),hasBooleanValue:checkMask(propConfig,Injection.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(propConfig,Injection.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(propConfig,Injection.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(propConfig,Injection.HAS_OVERLOADED_BOOLEAN_VALUE)};!(propertyInfo.hasBooleanValue+propertyInfo.hasNumericValue+propertyInfo.hasOverloadedBooleanValue<=1)?process.env.NODE_ENV!=="production"?invariant(false,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",propName):_prodInvariant("50",propName):void 0;if(process.env.NODE_ENV!=="production"){DOMProperty.getPossibleStandardName[lowerCased]=propName}if(DOMAttributeNames.hasOwnProperty(propName)){var attributeName=DOMAttributeNames[propName];propertyInfo.attributeName=attributeName;if(process.env.NODE_ENV!=="production"){DOMProperty.getPossibleStandardName[attributeName]=propName}}if(DOMAttributeNamespaces.hasOwnProperty(propName)){propertyInfo.attributeNamespace=DOMAttributeNamespaces[propName]}if(DOMPropertyNames.hasOwnProperty(propName)){propertyInfo.propertyName=DOMPropertyNames[propName]}if(DOMMutationMethods.hasOwnProperty(propName)){propertyInfo.mutationMethod=DOMMutationMethods[propName]}DOMProperty.properties[propName]=propertyInfo}}};var ATTRIBUTE_NAME_START_CHAR=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:ATTRIBUTE_NAME_START_CHAR,ATTRIBUTE_NAME_CHAR:ATTRIBUTE_NAME_START_CHAR+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:process.env.NODE_ENV!=="production"?{autofocus:"autoFocus"}:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(attributeName){for(var i=0;i<DOMProperty._isCustomAttributeFunctions.length;i++){var isCustomAttributeFn=DOMProperty._isCustomAttributeFunctions[i];if(isCustomAttributeFn(attributeName)){return true}}return false},injection:DOMPropertyInjection};module.exports=DOMProperty}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],547:[function(require,module,exports){(function(process){(function(){"use strict";var DOMProperty=require("./DOMProperty");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInstrumentation=require("./ReactInstrumentation");var quoteAttributeValueForBrowser=require("./quoteAttributeValueForBrowser");var warning=require("fbjs/lib/warning");var VALID_ATTRIBUTE_NAME_REGEX=new RegExp("^["+DOMProperty.ATTRIBUTE_NAME_START_CHAR+"]["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$");var illegalAttributeNameCache={};var validatedAttributeNameCache={};function isAttributeNameSafe(attributeName){if(validatedAttributeNameCache.hasOwnProperty(attributeName)){return true}if(illegalAttributeNameCache.hasOwnProperty(attributeName)){return false}if(VALID_ATTRIBUTE_NAME_REGEX.test(attributeName)){validatedAttributeNameCache[attributeName]=true;return true}illegalAttributeNameCache[attributeName]=true;process.env.NODE_ENV!=="production"?warning(false,"Invalid attribute name: `%s`",attributeName):void 0;return false}function shouldIgnoreValue(propertyInfo,value){return value==null||propertyInfo.hasBooleanValue&&!value||propertyInfo.hasNumericValue&&isNaN(value)||propertyInfo.hasPositiveNumericValue&&value<1||propertyInfo.hasOverloadedBooleanValue&&value===false}var DOMPropertyOperations={createMarkupForID:function(id){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(id)},setAttributeForID:function(node,id){node.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,id)},createMarkupForRoot:function(){return DOMProperty.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(node){node.setAttribute(DOMProperty.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){if(shouldIgnoreValue(propertyInfo,value)){return""}var attributeName=propertyInfo.attributeName;if(propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===true){return attributeName+'=""'}return attributeName+"="+quoteAttributeValueForBrowser(value)}else if(DOMProperty.isCustomAttribute(name)){if(value==null){return""}return name+"="+quoteAttributeValueForBrowser(value)}return null},createMarkupForCustomAttribute:function(name,value){if(!isAttributeNameSafe(name)||value==null){return""}return name+"="+quoteAttributeValueForBrowser(value)},setValueForProperty:function(node,name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod){mutationMethod(node,value)}else if(shouldIgnoreValue(propertyInfo,value)){this.deleteValueForProperty(node,name);return}else if(propertyInfo.mustUseProperty){node[propertyInfo.propertyName]=value}else{var attributeName=propertyInfo.attributeName;var namespace=propertyInfo.attributeNamespace;if(namespace){node.setAttributeNS(namespace,attributeName,""+value)}else if(propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===true){node.setAttribute(attributeName,"")}else{node.setAttribute(attributeName,""+value)}}}else if(DOMProperty.isCustomAttribute(name)){DOMPropertyOperations.setValueForAttribute(node,name,value);return}if(process.env.NODE_ENV!=="production"){var payload={};payload[name]=value;ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"update attribute",payload:payload})}},setValueForAttribute:function(node,name,value){if(!isAttributeNameSafe(name)){return}if(value==null){node.removeAttribute(name)}else{node.setAttribute(name,""+value)}if(process.env.NODE_ENV!=="production"){var payload={};payload[name]=value;ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"update attribute",payload:payload})}},deleteValueForAttribute:function(node,name){node.removeAttribute(name);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"remove attribute",payload:name})}},deleteValueForProperty:function(node,name){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod){mutationMethod(node,undefined)}else if(propertyInfo.mustUseProperty){var propName=propertyInfo.propertyName;if(propertyInfo.hasBooleanValue){node[propName]=false}else{node[propName]=""}}else{node.removeAttribute(propertyInfo.attributeName)}}else if(DOMProperty.isCustomAttribute(name)){node.removeAttribute(name)}if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onHostOperation({instanceID:ReactDOMComponentTree.getInstanceFromNode(node)._debugID,type:"remove attribute",payload:name})}}};module.exports=DOMPropertyOperations}).call(this)}).call(this,require("_process"))},{"./DOMProperty":546,"./ReactDOMComponentTree":568,"./ReactInstrumentation":597,"./quoteAttributeValueForBrowser":654,_process:25,"fbjs/lib/warning":525}],548:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var DOMLazyTree=require("./DOMLazyTree");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var createNodesFromMarkup=require("fbjs/lib/createNodesFromMarkup");var emptyFunction=require("fbjs/lib/emptyFunction");var invariant=require("fbjs/lib/invariant");var Danger={dangerouslyReplaceNodeWithMarkup:function(oldChild,markup){!ExecutionEnvironment.canUseDOM?process.env.NODE_ENV!=="production"?invariant(false,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString() for server rendering."):_prodInvariant("56"):void 0;!markup?process.env.NODE_ENV!=="production"?invariant(false,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):_prodInvariant("57"):void 0;!(oldChild.nodeName!=="HTML")?process.env.NODE_ENV!=="production"?invariant(false,"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See ReactDOMServer.renderToString()."):_prodInvariant("58"):void 0;if(typeof markup==="string"){var newChild=createNodesFromMarkup(markup,emptyFunction)[0];oldChild.parentNode.replaceChild(newChild,oldChild)}else{DOMLazyTree.replaceChildWithTree(oldChild,markup)}}};module.exports=Danger}).call(this)}).call(this,require("_process"))},{"./DOMLazyTree":544,"./reactProdInvariant":655,_process:25,"fbjs/lib/ExecutionEnvironment":504,"fbjs/lib/createNodesFromMarkup":509,"fbjs/lib/emptyFunction":510,"fbjs/lib/invariant":518}],549:[function(require,module,exports){"use strict";var DefaultEventPluginOrder=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];module.exports=DefaultEventPluginOrder},{}],550:[function(require,module,exports){"use strict";var EventPropagators=require("./EventPropagators");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var SyntheticMouseEvent=require("./SyntheticMouseEvent");var eventTypes={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}};var EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){if(topLevelType==="topMouseOver"&&(nativeEvent.relatedTarget||nativeEvent.fromElement)){return null}if(topLevelType!=="topMouseOut"&&topLevelType!=="topMouseOver"){return null}var win;if(nativeEventTarget.window===nativeEventTarget){win=nativeEventTarget}else{var doc=nativeEventTarget.ownerDocument;if(doc){win=doc.defaultView||doc.parentWindow}else{win=window}}var from;var to;if(topLevelType==="topMouseOut"){from=targetInst;var related=nativeEvent.relatedTarget||nativeEvent.toElement;to=related?ReactDOMComponentTree.getClosestInstanceFromNode(related):null}else{from=null;to=targetInst}if(from===to){return null}var fromNode=from==null?win:ReactDOMComponentTree.getNodeFromInstance(from);var toNode=to==null?win:ReactDOMComponentTree.getNodeFromInstance(to);var leave=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,from,nativeEvent,nativeEventTarget);leave.type="mouseleave";leave.target=fromNode;leave.relatedTarget=toNode;var enter=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,to,nativeEvent,nativeEventTarget);enter.type="mouseenter";enter.target=toNode;enter.relatedTarget=fromNode;EventPropagators.accumulateEnterLeaveDispatches(leave,enter,from,to);return[leave,enter]}};module.exports=EnterLeaveEventPlugin},{"./EventPropagators":554,"./ReactDOMComponentTree":568,"./SyntheticMouseEvent":625}],551:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var EventPluginRegistry=require("./EventPluginRegistry");var EventPluginUtils=require("./EventPluginUtils");var ReactErrorUtils=require("./ReactErrorUtils");var accumulateInto=require("./accumulateInto");var forEachAccumulated=require("./forEachAccumulated");var invariant=require("fbjs/lib/invariant");var listenerBank={};var eventQueue=null;var executeDispatchesAndRelease=function(event,simulated){if(event){EventPluginUtils.executeDispatchesInOrder(event,simulated);if(!event.isPersistent()){event.constructor.release(event)}}};var executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,true)};var executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,false)};var getDictionaryKey=function(inst){return"."+inst._rootNodeID};function isInteractive(tag){return tag==="button"||tag==="input"||tag==="select"||tag==="textarea"}function shouldPreventMouseEvent(name,type,props){switch(name){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!!(props.disabled&&isInteractive(type));default:return false}}var EventPluginHub={injection:{injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},putListener:function(inst,registrationName,listener){!(typeof listener==="function")?process.env.NODE_ENV!=="production"?invariant(false,"Expected %s listener to be a function, instead got type %s",registrationName,typeof listener):_prodInvariant("94",registrationName,typeof listener):void 0;var key=getDictionaryKey(inst);var bankForRegistrationName=listenerBank[registrationName]||(listenerBank[registrationName]={});bankForRegistrationName[key]=listener;var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];if(PluginModule&&PluginModule.didPutListener){PluginModule.didPutListener(inst,registrationName,listener)}},getListener:function(inst,registrationName){var bankForRegistrationName=listenerBank[registrationName];if(shouldPreventMouseEvent(registrationName,inst._currentElement.type,inst._currentElement.props)){return null}var key=getDictionaryKey(inst);return bankForRegistrationName&&bankForRegistrationName[key]},deleteListener:function(inst,registrationName){var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];if(PluginModule&&PluginModule.willDeleteListener){PluginModule.willDeleteListener(inst,registrationName)}var bankForRegistrationName=listenerBank[registrationName];if(bankForRegistrationName){var key=getDictionaryKey(inst);delete bankForRegistrationName[key]}},deleteAllListeners:function(inst){var key=getDictionaryKey(inst);for(var registrationName in listenerBank){if(!listenerBank.hasOwnProperty(registrationName)){continue}if(!listenerBank[registrationName][key]){continue}var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];if(PluginModule&&PluginModule.willDeleteListener){PluginModule.willDeleteListener(inst,registrationName)}delete listenerBank[registrationName][key]}},extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var events;var plugins=EventPluginRegistry.plugins;for(var i=0;i<plugins.length;i++){var possiblePlugin=plugins[i];if(possiblePlugin){var extractedEvents=possiblePlugin.extractEvents(topLevelType,targetInst,nativeEvent,nativeEventTarget);if(extractedEvents){events=accumulateInto(events,extractedEvents)}}}return events},enqueueEvents:function(events){if(events){eventQueue=accumulateInto(eventQueue,events)}},processEventQueue:function(simulated){var processingEventQueue=eventQueue;eventQueue=null;if(simulated){forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseSimulated)}else{forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseTopLevel)}!!eventQueue?process.env.NODE_ENV!=="production"?invariant(false,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):_prodInvariant("95"):void 0;ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub}).call(this)}).call(this,require("_process"))},{"./EventPluginRegistry":552,"./EventPluginUtils":553,"./ReactErrorUtils":588,"./accumulateInto":632,"./forEachAccumulated":640,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],552:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var eventPluginOrder=null;var namesToPlugins={};function recomputePluginOrdering(){if(!eventPluginOrder){return}for(var pluginName in namesToPlugins){var pluginModule=namesToPlugins[pluginName];var pluginIndex=eventPluginOrder.indexOf(pluginName);!(pluginIndex>-1)?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",pluginName):_prodInvariant("96",pluginName):void 0;if(EventPluginRegistry.plugins[pluginIndex]){continue}!pluginModule.extractEvents?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",pluginName):_prodInvariant("97",pluginName):void 0;EventPluginRegistry.plugins[pluginIndex]=pluginModule;var publishedEvents=pluginModule.eventTypes;for(var eventName in publishedEvents){!publishEventForPlugin(publishedEvents[eventName],pluginModule,eventName)?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",eventName,pluginName):_prodInvariant("98",eventName,pluginName):void 0}}}function publishEventForPlugin(dispatchConfig,pluginModule,eventName){!!EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(eventName)?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",eventName):_prodInvariant("99",eventName):void 0;EventPluginRegistry.eventNameDispatchConfigs[eventName]=dispatchConfig;var phasedRegistrationNames=dispatchConfig.phasedRegistrationNames;if(phasedRegistrationNames){for(var phaseName in phasedRegistrationNames){if(phasedRegistrationNames.hasOwnProperty(phaseName)){var phasedRegistrationName=phasedRegistrationNames[phaseName];publishRegistrationName(phasedRegistrationName,pluginModule,eventName)}}return true}else if(dispatchConfig.registrationName){publishRegistrationName(dispatchConfig.registrationName,pluginModule,eventName);return true}return false}function publishRegistrationName(registrationName,pluginModule,eventName){!!EventPluginRegistry.registrationNameModules[registrationName]?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",registrationName):_prodInvariant("100",registrationName):void 0;EventPluginRegistry.registrationNameModules[registrationName]=pluginModule;EventPluginRegistry.registrationNameDependencies[registrationName]=pluginModule.eventTypes[eventName].dependencies;if(process.env.NODE_ENV!=="production"){var lowerCasedName=registrationName.toLowerCase();EventPluginRegistry.possibleRegistrationNames[lowerCasedName]=registrationName;if(registrationName==="onDoubleClick"){EventPluginRegistry.possibleRegistrationNames.ondblclick=registrationName}}}var EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:process.env.NODE_ENV!=="production"?{}:null,injectEventPluginOrder:function(injectedEventPluginOrder){!!eventPluginOrder?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):_prodInvariant("101"):void 0;eventPluginOrder=Array.prototype.slice.call(injectedEventPluginOrder);recomputePluginOrdering()},injectEventPluginsByName:function(injectedNamesToPlugins){var isOrderingDirty=false;for(var pluginName in injectedNamesToPlugins){if(!injectedNamesToPlugins.hasOwnProperty(pluginName)){continue}var pluginModule=injectedNamesToPlugins[pluginName];if(!namesToPlugins.hasOwnProperty(pluginName)||namesToPlugins[pluginName]!==pluginModule){!!namesToPlugins[pluginName]?process.env.NODE_ENV!=="production"?invariant(false,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",pluginName):_prodInvariant("102",pluginName):void 0;namesToPlugins[pluginName]=pluginModule;isOrderingDirty=true}}if(isOrderingDirty){recomputePluginOrdering()}},getPluginModuleForEvent:function(event){var dispatchConfig=event.dispatchConfig;if(dispatchConfig.registrationName){return EventPluginRegistry.registrationNameModules[dispatchConfig.registrationName]||null}if(dispatchConfig.phasedRegistrationNames!==undefined){var phasedRegistrationNames=dispatchConfig.phasedRegistrationNames;for(var phase in phasedRegistrationNames){if(!phasedRegistrationNames.hasOwnProperty(phase)){continue}var pluginModule=EventPluginRegistry.registrationNameModules[phasedRegistrationNames[phase]];if(pluginModule){return pluginModule}}}return null},_resetEventPlugins:function(){eventPluginOrder=null;for(var pluginName in namesToPlugins){if(namesToPlugins.hasOwnProperty(pluginName)){delete namesToPlugins[pluginName]}}EventPluginRegistry.plugins.length=0;var eventNameDispatchConfigs=EventPluginRegistry.eventNameDispatchConfigs;for(var eventName in eventNameDispatchConfigs){if(eventNameDispatchConfigs.hasOwnProperty(eventName)){delete eventNameDispatchConfigs[eventName]}}var registrationNameModules=EventPluginRegistry.registrationNameModules;for(var registrationName in registrationNameModules){if(registrationNameModules.hasOwnProperty(registrationName)){delete registrationNameModules[registrationName]}}if(process.env.NODE_ENV!=="production"){var possibleRegistrationNames=EventPluginRegistry.possibleRegistrationNames;for(var lowerCasedName in possibleRegistrationNames){if(possibleRegistrationNames.hasOwnProperty(lowerCasedName)){delete possibleRegistrationNames[lowerCasedName]}}}}};module.exports=EventPluginRegistry}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],553:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactErrorUtils=require("./ReactErrorUtils");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ComponentTree;var TreeTraversal;var injection={injectComponentTree:function(Injected){ComponentTree=Injected;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(Injected&&Injected.getNodeFromInstance&&Injected.getInstanceFromNode,"EventPluginUtils.injection.injectComponentTree(...): Injected "+"module is missing getNodeFromInstance or getInstanceFromNode."):void 0}},injectTreeTraversal:function(Injected){TreeTraversal=Injected;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(Injected&&Injected.isAncestor&&Injected.getLowestCommonAncestor,"EventPluginUtils.injection.injectTreeTraversal(...): Injected "+"module is missing isAncestor or getLowestCommonAncestor."):void 0}}};function isEndish(topLevelType){return topLevelType==="topMouseUp"||topLevelType==="topTouchEnd"||topLevelType==="topTouchCancel"}function isMoveish(topLevelType){return topLevelType==="topMouseMove"||topLevelType==="topTouchMove"}function isStartish(topLevelType){return topLevelType==="topMouseDown"||topLevelType==="topTouchStart"}var validateEventDispatches;if(process.env.NODE_ENV!=="production"){validateEventDispatches=function(event){var dispatchListeners=event._dispatchListeners;var dispatchInstances=event._dispatchInstances;var listenersIsArr=Array.isArray(dispatchListeners);var listenersLen=listenersIsArr?dispatchListeners.length:dispatchListeners?1:0;var instancesIsArr=Array.isArray(dispatchInstances);var instancesLen=instancesIsArr?dispatchInstances.length:dispatchInstances?1:0;process.env.NODE_ENV!=="production"?warning(instancesIsArr===listenersIsArr&&instancesLen===listenersLen,"EventPluginUtils: Invalid `event`."):void 0}}function executeDispatch(event,simulated,listener,inst){var type=event.type||"unknown-event";event.currentTarget=EventPluginUtils.getNodeFromInstance(inst);if(simulated){ReactErrorUtils.invokeGuardedCallbackWithCatch(type,listener,event)}else{ReactErrorUtils.invokeGuardedCallback(type,listener,event)}event.currentTarget=null}function executeDispatchesInOrder(event,simulated){var dispatchListeners=event._dispatchListeners;var dispatchInstances=event._dispatchInstances;if(process.env.NODE_ENV!=="production"){validateEventDispatches(event)}if(Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length;i++){if(event.isPropagationStopped()){break}executeDispatch(event,simulated,dispatchListeners[i],dispatchInstances[i])}}else if(dispatchListeners){executeDispatch(event,simulated,dispatchListeners,dispatchInstances)}event._dispatchListeners=null;event._dispatchInstances=null}function executeDispatchesInOrderStopAtTrueImpl(event){var dispatchListeners=event._dispatchListeners;var dispatchInstances=event._dispatchInstances;if(process.env.NODE_ENV!=="production"){validateEventDispatches(event)}if(Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length;i++){if(event.isPropagationStopped()){break}if(dispatchListeners[i](event,dispatchInstances[i])){return dispatchInstances[i]}}}else if(dispatchListeners){if(dispatchListeners(event,dispatchInstances)){return dispatchInstances}}return null}function executeDispatchesInOrderStopAtTrue(event){var ret=executeDispatchesInOrderStopAtTrueImpl(event);event._dispatchInstances=null;event._dispatchListeners=null;return ret}function executeDirectDispatch(event){if(process.env.NODE_ENV!=="production"){validateEventDispatches(event)}var dispatchListener=event._dispatchListeners;var dispatchInstance=event._dispatchInstances;!!Array.isArray(dispatchListener)?process.env.NODE_ENV!=="production"?invariant(false,"executeDirectDispatch(...): Invalid `event`."):_prodInvariant("103"):void 0;event.currentTarget=dispatchListener?EventPluginUtils.getNodeFromInstance(dispatchInstance):null;var res=dispatchListener?dispatchListener(event):null;event.currentTarget=null;event._dispatchListeners=null;event._dispatchInstances=null;return res}function hasDispatches(event){return!!event._dispatchListeners}var EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getInstanceFromNode:function(node){return ComponentTree.getInstanceFromNode(node)},getNodeFromInstance:function(node){return ComponentTree.getNodeFromInstance(node)},isAncestor:function(a,b){return TreeTraversal.isAncestor(a,b)},getLowestCommonAncestor:function(a,b){return TreeTraversal.getLowestCommonAncestor(a,b)},getParentInstance:function(inst){return TreeTraversal.getParentInstance(inst)},traverseTwoPhase:function(target,fn,arg){return TreeTraversal.traverseTwoPhase(target,fn,arg)},traverseEnterLeave:function(from,to,fn,argFrom,argTo){return TreeTraversal.traverseEnterLeave(from,to,fn,argFrom,argTo)},injection:injection};module.exports=EventPluginUtils}).call(this)}).call(this,require("_process"))},{"./ReactErrorUtils":588,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525}],554:[function(require,module,exports){(function(process){(function(){"use strict";var EventPluginHub=require("./EventPluginHub");var EventPluginUtils=require("./EventPluginUtils");var accumulateInto=require("./accumulateInto");var forEachAccumulated=require("./forEachAccumulated");var warning=require("fbjs/lib/warning");var getListener=EventPluginHub.getListener;function listenerAtPhase(inst,event,propagationPhase){var registrationName=event.dispatchConfig.phasedRegistrationNames[propagationPhase];return getListener(inst,registrationName)}function accumulateDirectionalDispatches(inst,phase,event){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(inst,"Dispatching inst must not be null"):void 0}var listener=listenerAtPhase(inst,event,phase);if(listener){event._dispatchListeners=accumulateInto(event._dispatchListeners,listener);event._dispatchInstances=accumulateInto(event._dispatchInstances,inst)}}function accumulateTwoPhaseDispatchesSingle(event){if(event&&event.dispatchConfig.phasedRegistrationNames){EventPluginUtils.traverseTwoPhase(event._targetInst,accumulateDirectionalDispatches,event)}}function accumulateTwoPhaseDispatchesSingleSkipTarget(event){if(event&&event.dispatchConfig.phasedRegistrationNames){var targetInst=event._targetInst;var parentInst=targetInst?EventPluginUtils.getParentInstance(targetInst):null;EventPluginUtils.traverseTwoPhase(parentInst,accumulateDirectionalDispatches,event)}}function accumulateDispatches(inst,ignoredDirection,event){if(event&&event.dispatchConfig.registrationName){var registrationName=event.dispatchConfig.registrationName;var listener=getListener(inst,registrationName);if(listener){event._dispatchListeners=accumulateInto(event._dispatchListeners,listener);event._dispatchInstances=accumulateInto(event._dispatchInstances,inst)}}}function accumulateDirectDispatchesSingle(event){if(event&&event.dispatchConfig.registrationName){accumulateDispatches(event._targetInst,null,event)}}function accumulateTwoPhaseDispatches(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(leave,enter,from,to){EventPluginUtils.traverseEnterLeave(from,to,accumulateDispatches,leave,enter)}function accumulateDirectDispatches(events){forEachAccumulated(events,accumulateDirectDispatchesSingle)}var EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators}).call(this)}).call(this,require("_process"))},{"./EventPluginHub":551,"./EventPluginUtils":553,"./accumulateInto":632,"./forEachAccumulated":640,_process:25,"fbjs/lib/warning":525}],555:[function(require,module,exports){"use strict";var _assign=require("object-assign");var PooledClass=require("./PooledClass");var getTextContentAccessor=require("./getTextContentAccessor");function FallbackCompositionState(root){this._root=root;this._startText=this.getText();this._fallbackText=null}_assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null;this._startText=null;this._fallbackText=null},getText:function(){if("value"in this._root){return this._root.value}return this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText){return this._fallbackText}var start;var startValue=this._startText;var startLength=startValue.length;var end;var endValue=this.getText();var endLength=endValue.length;for(start=0;start<startLength;start++){if(startValue[start]!==endValue[start]){break}}var minEnd=startLength-start;for(end=1;end<=minEnd;end++){if(startValue[startLength-end]!==endValue[endLength-end]){break}}var sliceTail=end>1?1-end:undefined;this._fallbackText=endValue.slice(start,sliceTail);return this._fallbackText}});PooledClass.addPoolingTo(FallbackCompositionState);module.exports=FallbackCompositionState},{"./PooledClass":559,"./getTextContentAccessor":649,"object-assign":533}],556:[function(require,module,exports){"use strict";var DOMProperty=require("./DOMProperty");var MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY;var HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE;var HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE;var HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE;var HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE;var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:HAS_BOOLEAN_VALUE,allowTransparency:0,alt:0,as:0,async:HAS_BOOLEAN_VALUE,autoComplete:0,autoPlay:HAS_BOOLEAN_VALUE,capture:HAS_BOOLEAN_VALUE,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,cite:0,classID:0,className:0,cols:HAS_POSITIVE_NUMERIC_VALUE,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:HAS_BOOLEAN_VALUE,coords:0,crossOrigin:0,data:0,dateTime:0,default:HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:0,disabled:HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:0,frameBorder:0,headers:0,height:0,hidden:HAS_BOOLEAN_VALUE,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:HAS_BOOLEAN_VALUE,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:0,nonce:0,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:0,pattern:0,placeholder:0,playsInline:HAS_BOOLEAN_VALUE,poster:0,preload:0,profile:0,radioGroup:0,readOnly:HAS_BOOLEAN_VALUE,referrerPolicy:0,rel:0,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:0,rows:HAS_POSITIVE_NUMERIC_VALUE,rowSpan:HAS_NUMERIC_VALUE,sandbox:0,scope:0,scoped:HAS_BOOLEAN_VALUE,scrolling:0,seamless:HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:0,size:HAS_POSITIVE_NUMERIC_VALUE,sizes:0,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:HAS_NUMERIC_VALUE,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:HAS_BOOLEAN_VALUE,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};module.exports=HTMLDOMPropertyConfig},{"./DOMProperty":546}],557:[function(require,module,exports){"use strict";function escape(key){var escapeRegex=/[=:]/g;var escaperLookup={"=":"=0",":":"=2"};var escapedString=(""+key).replace(escapeRegex,function(match){return escaperLookup[match]});return"$"+escapedString}function unescape(key){var unescapeRegex=/(=0|=2)/g;var unescaperLookup={"=0":"=","=2":":"};var keySubstring=key[0]==="."&&key[1]==="$"?key.substring(2):key.substring(1);return(""+keySubstring).replace(unescapeRegex,function(match){return unescaperLookup[match]})}var KeyEscapeUtils={escape:escape,unescape:unescape};module.exports=KeyEscapeUtils},{}],558:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var React=require("react/lib/React");var ReactPropTypesSecret=require("./ReactPropTypesSecret");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var hasReadOnlyValue={button:true,checkbox:true,image:true,hidden:true,radio:true,reset:true,submit:true};function _assertSingleLink(inputProps){!(inputProps.checkedLink==null||inputProps.valueLink==null)?process.env.NODE_ENV!=="production"?invariant(false,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):_prodInvariant("87"):void 0}function _assertValueLink(inputProps){_assertSingleLink(inputProps);!(inputProps.value==null&&inputProps.onChange==null)?process.env.NODE_ENV!=="production"?invariant(false,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):_prodInvariant("88"):void 0}function _assertCheckedLink(inputProps){_assertSingleLink(inputProps);!(inputProps.checked==null&&inputProps.onChange==null)?process.env.NODE_ENV!=="production"?invariant(false,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):_prodInvariant("89"):void 0}var propTypes={value:function(props,propName,componentName){if(!props[propName]||hasReadOnlyValue[props.type]||props.onChange||props.readOnly||props.disabled){return null}return new Error("You provided a `value` prop to a form field without an "+"`onChange` handler. This will render a read-only field. If "+"the field should be mutable use `defaultValue`. Otherwise, "+"set either `onChange` or `readOnly`.")},checked:function(props,propName,componentName){if(!props[propName]||props.onChange||props.readOnly||props.disabled){return null}return new Error("You provided a `checked` prop to a form field without an "+"`onChange` handler. This will render a read-only field. If "+"the field should be mutable use `defaultChecked`. Otherwise, "+"set either `onChange` or `readOnly`.")},onChange:React.PropTypes.func};var loggedTypeFailures={};function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""}var LinkedValueUtils={checkPropTypes:function(tagName,props,owner){for(var propName in propTypes){if(propTypes.hasOwnProperty(propName)){var error=propTypes[propName](props,propName,tagName,"prop",null,ReactPropTypesSecret)}if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var addendum=getDeclarationErrorAddendum(owner);process.env.NODE_ENV!=="production"?warning(false,"Failed form propType: %s%s",error.message,addendum):void 0}}},getValue:function(inputProps){if(inputProps.valueLink){_assertValueLink(inputProps);return inputProps.valueLink.value}return inputProps.value},getChecked:function(inputProps){if(inputProps.checkedLink){_assertCheckedLink(inputProps);return inputProps.checkedLink.value}return inputProps.checked},executeOnChange:function(inputProps,event){if(inputProps.valueLink){_assertValueLink(inputProps);return inputProps.valueLink.requestChange(event.target.value)}else if(inputProps.checkedLink){_assertCheckedLink(inputProps);return inputProps.checkedLink.requestChange(event.target.checked)}else if(inputProps.onChange){return inputProps.onChange.call(undefined,event)}}};module.exports=LinkedValueUtils}).call(this)}).call(this,require("_process"))},{"./ReactPropTypesSecret":605,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525,"react/lib/React":664}],559:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var oneArgumentPooler=function(copyFieldsFrom){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,copyFieldsFrom);return instance}else{return new Klass(copyFieldsFrom)}};var twoArgumentPooler=function(a1,a2){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2);return instance}else{return new Klass(a1,a2)}};var threeArgumentPooler=function(a1,a2,a3){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2,a3);return instance}else{return new Klass(a1,a2,a3)}};var fourArgumentPooler=function(a1,a2,a3,a4){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();Klass.call(instance,a1,a2,a3,a4);return instance}else{return new Klass(a1,a2,a3,a4)}};var standardReleaser=function(instance){var Klass=this;!(instance instanceof Klass)?process.env.NODE_ENV!=="production"?invariant(false,"Trying to release an instance into a pool of a different type."):_prodInvariant("25"):void 0;instance.destructor();if(Klass.instancePool.length<Klass.poolSize){Klass.instancePool.push(instance)}};var DEFAULT_POOL_SIZE=10;var DEFAULT_POOLER=oneArgumentPooler;var addPoolingTo=function(CopyConstructor,pooler){var NewKlass=CopyConstructor;NewKlass.instancePool=[];NewKlass.getPooled=pooler||DEFAULT_POOLER;if(!NewKlass.poolSize){NewKlass.poolSize=DEFAULT_POOL_SIZE}NewKlass.release=standardReleaser;return NewKlass};var PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler};module.exports=PooledClass}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],560:[function(require,module,exports){"use strict";var _assign=require("object-assign");var EventPluginRegistry=require("./EventPluginRegistry");var ReactEventEmitterMixin=require("./ReactEventEmitterMixin");var ViewportMetrics=require("./ViewportMetrics");var getVendorPrefixedEventName=require("./getVendorPrefixedEventName");var isEventSupported=require("./isEventSupported");var hasEventPageXY;var alreadyListeningTo={};var isMonitoringScrollValue=false;var reactTopListenersCounter=0;var topEventMapping={topAbort:"abort",topAnimationEnd:getVendorPrefixedEventName("animationend")||"animationend",topAnimationIteration:getVendorPrefixedEventName("animationiteration")||"animationiteration",topAnimationStart:getVendorPrefixedEventName("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:getVendorPrefixedEventName("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"};var topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2);function getListeningForDocument(mountAt){if(!Object.prototype.hasOwnProperty.call(mountAt,topListenersIDKey)){mountAt[topListenersIDKey]=reactTopListenersCounter++;alreadyListeningTo[mountAt[topListenersIDKey]]={}}return alreadyListeningTo[mountAt[topListenersIDKey]]}var ReactBrowserEventEmitter=_assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(ReactEventListener){ReactEventListener.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel);ReactBrowserEventEmitter.ReactEventListener=ReactEventListener}},setEnabled:function(enabled){if(ReactBrowserEventEmitter.ReactEventListener){ReactBrowserEventEmitter.ReactEventListener.setEnabled(enabled)}},isEnabled:function(){return!!(ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(registrationName,contentDocumentHandle){var mountAt=contentDocumentHandle;var isListening=getListeningForDocument(mountAt);var dependencies=EventPluginRegistry.registrationNameDependencies[registrationName];for(var i=0;i<dependencies.length;i++){var dependency=dependencies[i];if(!(isListening.hasOwnProperty(dependency)&&isListening[dependency])){if(dependency==="topWheel"){if(isEventSupported("wheel")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topWheel","wheel",mountAt)}else if(isEventSupported("mousewheel")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",mountAt)}else{ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",mountAt)}}else if(dependency==="topScroll"){if(isEventSupported("scroll",true)){ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent("topScroll","scroll",mountAt)}else{ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topScroll","scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE)}}else if(dependency==="topFocus"||dependency==="topBlur"){if(isEventSupported("focus",true)){ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent("topFocus","focus",mountAt);ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent("topBlur","blur",mountAt)}else if(isEventSupported("focusin")){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topFocus","focusin",mountAt);ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent("topBlur","focusout",mountAt)}isListening.topBlur=true;isListening.topFocus=true}else if(topEventMapping.hasOwnProperty(dependency)){ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(dependency,topEventMapping[dependency],mountAt)}isListening[dependency]=true}}},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelType,handlerBaseName,handle)},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelType,handlerBaseName,handle)},supportsEventPageXY:function(){if(!document.createEvent){return false}var ev=document.createEvent("MouseEvent");return ev!=null&&"pageX"in ev},ensureScrollValueMonitoring:function(){if(hasEventPageXY===undefined){hasEventPageXY=ReactBrowserEventEmitter.supportsEventPageXY()}if(!hasEventPageXY&&!isMonitoringScrollValue){var refresh=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(refresh);isMonitoringScrollValue=true}}});module.exports=ReactBrowserEventEmitter},{"./EventPluginRegistry":552,"./ReactEventEmitterMixin":589,"./ViewportMetrics":631,"./getVendorPrefixedEventName":650,"./isEventSupported":652,"object-assign":533}],561:[function(require,module,exports){(function(process){(function(){"use strict";var ReactReconciler=require("./ReactReconciler");var instantiateReactComponent=require("./instantiateReactComponent");var KeyEscapeUtils=require("./KeyEscapeUtils");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var traverseAllChildren=require("./traverseAllChildren");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}function instantiateChild(childInstances,child,name,selfDebugID){var keyUnique=childInstances[name]===undefined;if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}if(!keyUnique){process.env.NODE_ENV!=="production"?warning(false,"flattenChildren(...): Encountered two children with the same key, "+"`%s`. Child keys must be unique; when two children share a key, only "+"the first child will be used.%s",KeyEscapeUtils.unescape(name),ReactComponentTreeHook.getStackAddendumByID(selfDebugID)):void 0}}if(child!=null&&keyUnique){childInstances[name]=instantiateReactComponent(child,true)}}var ReactChildReconciler={instantiateChildren:function(nestedChildNodes,transaction,context,selfDebugID){if(nestedChildNodes==null){return null}var childInstances={};if(process.env.NODE_ENV!=="production"){traverseAllChildren(nestedChildNodes,function(childInsts,child,name){return instantiateChild(childInsts,child,name,selfDebugID)},childInstances)}else{traverseAllChildren(nestedChildNodes,instantiateChild,childInstances)}return childInstances},updateChildren:function(prevChildren,nextChildren,mountImages,removedNodes,transaction,hostParent,hostContainerInfo,context,selfDebugID){if(!nextChildren&&!prevChildren){return}var name;var prevChild;for(name in nextChildren){if(!nextChildren.hasOwnProperty(name)){continue}prevChild=prevChildren&&prevChildren[name];var prevElement=prevChild&&prevChild._currentElement;var nextElement=nextChildren[name];if(prevChild!=null&&shouldUpdateReactComponent(prevElement,nextElement)){ReactReconciler.receiveComponent(prevChild,nextElement,transaction,context);nextChildren[name]=prevChild}else{if(prevChild){removedNodes[name]=ReactReconciler.getHostNode(prevChild);ReactReconciler.unmountComponent(prevChild,false)}var nextChildInstance=instantiateReactComponent(nextElement,true);nextChildren[name]=nextChildInstance;var nextChildMountImage=ReactReconciler.mountComponent(nextChildInstance,transaction,hostParent,hostContainerInfo,context,selfDebugID);mountImages.push(nextChildMountImage)}}for(name in prevChildren){if(prevChildren.hasOwnProperty(name)&&!(nextChildren&&nextChildren.hasOwnProperty(name))){prevChild=prevChildren[name];removedNodes[name]=ReactReconciler.getHostNode(prevChild);ReactReconciler.unmountComponent(prevChild,false)}}},unmountChildren:function(renderedChildren,safely){for(var name in renderedChildren){if(renderedChildren.hasOwnProperty(name)){var renderedChild=renderedChildren[name];ReactReconciler.unmountComponent(renderedChild,safely)}}}};module.exports=ReactChildReconciler}).call(this)}).call(this,require("_process"))},{"./KeyEscapeUtils":557,"./ReactReconciler":607,"./instantiateReactComponent":651,"./shouldUpdateReactComponent":659,"./traverseAllChildren":660,_process:25,"fbjs/lib/warning":525,"react/lib/ReactComponentTreeHook":668}],562:[function(require,module,exports){"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations");var ReactDOMIDOperations=require("./ReactDOMIDOperations");var ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup};module.exports=ReactComponentBrowserEnvironment},{"./DOMChildrenOperations":543,"./ReactDOMIDOperations":572}],563:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var injected=false;var ReactComponentEnvironment={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(environment){!!injected?process.env.NODE_ENV!=="production"?invariant(false,"ReactCompositeComponent: injectEnvironment() can only be called once."):_prodInvariant("104"):void 0;ReactComponentEnvironment.replaceNodeWithMarkup=environment.replaceNodeWithMarkup;ReactComponentEnvironment.processChildrenUpdates=environment.processChildrenUpdates;injected=true}}};module.exports=ReactComponentEnvironment}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],564:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var React=require("react/lib/React");var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactErrorUtils=require("./ReactErrorUtils");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactNodeTypes=require("./ReactNodeTypes");var ReactReconciler=require("./ReactReconciler");if(process.env.NODE_ENV!=="production"){var checkReactTypeSpec=require("./checkReactTypeSpec")}var emptyObject=require("fbjs/lib/emptyObject");var invariant=require("fbjs/lib/invariant");var shallowEqual=require("fbjs/lib/shallowEqual");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var warning=require("fbjs/lib/warning");var CompositeTypes={ImpureClass:0,PureClass:1,StatelessFunctional:2};function StatelessComponent(Component){}StatelessComponent.prototype.render=function(){var Component=ReactInstanceMap.get(this)._currentElement.type;var element=Component(this.props,this.context,this.updater);warnIfInvalidElement(Component,element);return element};function warnIfInvalidElement(Component,element){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(element===null||element===false||React.isValidElement(element),"%s(...): A valid React element (or null) must be returned. You may have "+"returned undefined, an array or some other invalid object.",Component.displayName||Component.name||"Component"):void 0;process.env.NODE_ENV!=="production"?warning(!Component.childContextTypes,"%s(...): childContextTypes cannot be defined on a functional component.",Component.displayName||Component.name||"Component"):void 0}}function shouldConstruct(Component){return!!(Component.prototype&&Component.prototype.isReactComponent)}function isPureComponent(Component){return!!(Component.prototype&&Component.prototype.isPureReactComponent)}function measureLifeCyclePerf(fn,debugID,timerType){if(debugID===0){return fn()}ReactInstrumentation.debugTool.onBeginLifeCycleTimer(debugID,timerType);try{return fn()}finally{ReactInstrumentation.debugTool.onEndLifeCycleTimer(debugID,timerType)}}var nextMountID=1;var ReactCompositeComponent={construct:function(element){this._currentElement=element;this._rootNodeID=0;this._compositeType=null;this._instance=null;this._hostParent=null;this._hostContainerInfo=null;this._updateBatchNumber=null;this._pendingElement=null;this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;this._renderedNodeType=null;this._renderedComponent=null;this._context=null;this._mountOrder=0;this._topLevelWrapper=null;this._pendingCallbacks=null;this._calledComponentWillUnmount=false;if(process.env.NODE_ENV!=="production"){this._warnedAboutRefsInRender=false}},mountComponent:function(transaction,hostParent,hostContainerInfo,context){var _this=this;this._context=context;this._mountOrder=nextMountID++;this._hostParent=hostParent;this._hostContainerInfo=hostContainerInfo;var publicProps=this._currentElement.props;var publicContext=this._processContext(context);var Component=this._currentElement.type;var updateQueue=transaction.getUpdateQueue();var doConstruct=shouldConstruct(Component);var inst=this._constructComponent(doConstruct,publicProps,publicContext,updateQueue);var renderedElement;if(!doConstruct&&(inst==null||inst.render==null)){renderedElement=inst;warnIfInvalidElement(Component,renderedElement);!(inst===null||inst===false||React.isValidElement(inst))?process.env.NODE_ENV!=="production"?invariant(false,"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",Component.displayName||Component.name||"Component"):_prodInvariant("105",Component.displayName||Component.name||"Component"):void 0;inst=new StatelessComponent(Component);this._compositeType=CompositeTypes.StatelessFunctional}else{if(isPureComponent(Component)){this._compositeType=CompositeTypes.PureClass}else{this._compositeType=CompositeTypes.ImpureClass}}if(process.env.NODE_ENV!=="production"){if(inst.render==null){process.env.NODE_ENV!=="production"?warning(false,"%s(...): No `render` method found on the returned component "+"instance: you may have forgotten to define `render`.",Component.displayName||Component.name||"Component"):void 0}var propsMutated=inst.props!==publicProps;var componentName=Component.displayName||Component.name||"Component";process.env.NODE_ENV!=="production"?warning(inst.props===undefined||!propsMutated,"%s(...): When calling super() in `%s`, make sure to pass "+"up the same props that your component's constructor was passed.",componentName,componentName):void 0}inst.props=publicProps;inst.context=publicContext;inst.refs=emptyObject;inst.updater=updateQueue;this._instance=inst;ReactInstanceMap.set(inst,this);if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!inst.getInitialState||inst.getInitialState.isReactClassApproved||inst.state,"getInitialState was defined on %s, a plain JavaScript class. "+"This is only supported for classes created using React.createClass. "+"Did you mean to define a state property instead?",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(!inst.getDefaultProps||inst.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. "+"This is only supported for classes created using React.createClass. "+"Use a static property to define defaultProps instead.",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(!inst.propTypes,"propTypes was defined as an instance property on %s. Use a static "+"property to define propTypes instead.",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(!inst.contextTypes,"contextTypes was defined as an instance property on %s. Use a "+"static property to define contextTypes instead.",this.getName()||"a component"):void 0;process.env.NODE_ENV!=="production"?warning(typeof inst.componentShouldUpdate!=="function","%s has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value.",this.getName()||"A component"):void 0;process.env.NODE_ENV!=="production"?warning(typeof inst.componentDidUnmount!=="function","%s has a method called "+"componentDidUnmount(). But there is no such lifecycle method. "+"Did you mean componentWillUnmount()?",this.getName()||"A component"):void 0;process.env.NODE_ENV!=="production"?warning(typeof inst.componentWillRecieveProps!=="function","%s has a method called "+"componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",this.getName()||"A component"):void 0}var initialState=inst.state;if(initialState===undefined){inst.state=initialState=null}!(typeof initialState==="object"&&!Array.isArray(initialState))?process.env.NODE_ENV!=="production"?invariant(false,"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):_prodInvariant("106",this.getName()||"ReactCompositeComponent"):void 0;this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;var markup;if(inst.unstable_handleError){markup=this.performInitialMountWithErrorHandling(renderedElement,hostParent,hostContainerInfo,transaction,context)}else{markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}if(inst.componentDidMount){if(process.env.NODE_ENV!=="production"){transaction.getReactMountReady().enqueue(function(){measureLifeCyclePerf(function(){return inst.componentDidMount()},_this._debugID,"componentDidMount")})}else{transaction.getReactMountReady().enqueue(inst.componentDidMount,inst)}}return markup},_constructComponent:function(doConstruct,publicProps,publicContext,updateQueue){if(process.env.NODE_ENV!=="production"){ReactCurrentOwner.current=this;try{return this._constructComponentWithoutOwner(doConstruct,publicProps,publicContext,updateQueue)}finally{ReactCurrentOwner.current=null}}else{return this._constructComponentWithoutOwner(doConstruct,publicProps,publicContext,updateQueue)}},_constructComponentWithoutOwner:function(doConstruct,publicProps,publicContext,updateQueue){var Component=this._currentElement.type;if(doConstruct){if(process.env.NODE_ENV!=="production"){return measureLifeCyclePerf(function(){return new Component(publicProps,publicContext,updateQueue)},this._debugID,"ctor")}else{return new Component(publicProps,publicContext,updateQueue)}}if(process.env.NODE_ENV!=="production"){return measureLifeCyclePerf(function(){return Component(publicProps,publicContext,updateQueue)},this._debugID,"render")}else{return Component(publicProps,publicContext,updateQueue)}},performInitialMountWithErrorHandling:function(renderedElement,hostParent,hostContainerInfo,transaction,context){var markup;var checkpoint=transaction.checkpoint();try{markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}catch(e){transaction.rollback(checkpoint);this._instance.unstable_handleError(e);if(this._pendingStateQueue){this._instance.state=this._processPendingState(this._instance.props,this._instance.context)}checkpoint=transaction.checkpoint();this._renderedComponent.unmountComponent(true);transaction.rollback(checkpoint);markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}return markup},performInitialMount:function(renderedElement,hostParent,hostContainerInfo,transaction,context){var inst=this._instance;var debugID=0;if(process.env.NODE_ENV!=="production"){debugID=this._debugID}if(inst.componentWillMount){if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillMount()},debugID,"componentWillMount")}else{inst.componentWillMount()}if(this._pendingStateQueue){inst.state=this._processPendingState(inst.props,inst.context)}}if(renderedElement===undefined){renderedElement=this._renderValidatedComponent()}var nodeType=ReactNodeTypes.getType(renderedElement);this._renderedNodeType=nodeType;var child=this._instantiateReactComponent(renderedElement,nodeType!==ReactNodeTypes.EMPTY);this._renderedComponent=child;var markup=ReactReconciler.mountComponent(child,transaction,hostParent,hostContainerInfo,this._processChildContext(context),debugID);if(process.env.NODE_ENV!=="production"){if(debugID!==0){var childDebugIDs=child._debugID!==0?[child._debugID]:[];ReactInstrumentation.debugTool.onSetChildren(debugID,childDebugIDs)}}return markup},getHostNode:function(){return ReactReconciler.getHostNode(this._renderedComponent)},unmountComponent:function(safely){if(!this._renderedComponent){return}var inst=this._instance;if(inst.componentWillUnmount&&!inst._calledComponentWillUnmount){inst._calledComponentWillUnmount=true;if(safely){var name=this.getName()+".componentWillUnmount()";ReactErrorUtils.invokeGuardedCallback(name,inst.componentWillUnmount.bind(inst))}else{if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillUnmount()},this._debugID,"componentWillUnmount")}else{inst.componentWillUnmount()}}}if(this._renderedComponent){ReactReconciler.unmountComponent(this._renderedComponent,safely);this._renderedNodeType=null;this._renderedComponent=null;this._instance=null}this._pendingStateQueue=null;this._pendingReplaceState=false;this._pendingForceUpdate=false;this._pendingCallbacks=null;this._pendingElement=null;this._context=null;this._rootNodeID=0;this._topLevelWrapper=null;ReactInstanceMap.remove(inst)},_maskContext:function(context){var Component=this._currentElement.type;var contextTypes=Component.contextTypes;if(!contextTypes){return emptyObject}var maskedContext={};for(var contextName in contextTypes){maskedContext[contextName]=context[contextName]}return maskedContext},_processContext:function(context){var maskedContext=this._maskContext(context);if(process.env.NODE_ENV!=="production"){var Component=this._currentElement.type;if(Component.contextTypes){this._checkContextTypes(Component.contextTypes,maskedContext,"context")}}return maskedContext},_processChildContext:function(currentContext){var Component=this._currentElement.type;var inst=this._instance;var childContext;if(inst.getChildContext){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onBeginProcessingChildContext();try{childContext=inst.getChildContext()}finally{ReactInstrumentation.debugTool.onEndProcessingChildContext()}}else{childContext=inst.getChildContext()}}if(childContext){!(typeof Component.childContextTypes==="object")?process.env.NODE_ENV!=="production"?invariant(false,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):_prodInvariant("107",this.getName()||"ReactCompositeComponent"):void 0;if(process.env.NODE_ENV!=="production"){this._checkContextTypes(Component.childContextTypes,childContext,"childContext")}for(var name in childContext){!(name in Component.childContextTypes)?process.env.NODE_ENV!=="production"?invariant(false,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",name):_prodInvariant("108",this.getName()||"ReactCompositeComponent",name):void 0}return _assign({},currentContext,childContext)}return currentContext},_checkContextTypes:function(typeSpecs,values,location){if(process.env.NODE_ENV!=="production"){checkReactTypeSpec(typeSpecs,values,location,this.getName(),null,this._debugID)}},receiveComponent:function(nextElement,transaction,nextContext){var prevElement=this._currentElement;var prevContext=this._context;this._pendingElement=null;this.updateComponent(transaction,prevElement,nextElement,prevContext,nextContext)},performUpdateIfNecessary:function(transaction){if(this._pendingElement!=null){ReactReconciler.receiveComponent(this,this._pendingElement,transaction,this._context)}else if(this._pendingStateQueue!==null||this._pendingForceUpdate){this.updateComponent(transaction,this._currentElement,this._currentElement,this._context,this._context)}else{this._updateBatchNumber=null}},updateComponent:function(transaction,prevParentElement,nextParentElement,prevUnmaskedContext,nextUnmaskedContext){var inst=this._instance;!(inst!=null)?process.env.NODE_ENV!=="production"?invariant(false,"Attempted to update component `%s` that has already been unmounted (or failed to mount).",this.getName()||"ReactCompositeComponent"):_prodInvariant("136",this.getName()||"ReactCompositeComponent"):void 0;var willReceive=false;var nextContext;if(this._context===nextUnmaskedContext){nextContext=inst.context}else{nextContext=this._processContext(nextUnmaskedContext);willReceive=true}var prevProps=prevParentElement.props;var nextProps=nextParentElement.props;if(prevParentElement!==nextParentElement){willReceive=true}if(willReceive&&inst.componentWillReceiveProps){if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillReceiveProps(nextProps,nextContext)},this._debugID,"componentWillReceiveProps")}else{inst.componentWillReceiveProps(nextProps,nextContext)}}var nextState=this._processPendingState(nextProps,nextContext);var shouldUpdate=true;if(!this._pendingForceUpdate){if(inst.shouldComponentUpdate){if(process.env.NODE_ENV!=="production"){shouldUpdate=measureLifeCyclePerf(function(){return inst.shouldComponentUpdate(nextProps,nextState,nextContext)},this._debugID,"shouldComponentUpdate")}else{shouldUpdate=inst.shouldComponentUpdate(nextProps,nextState,nextContext)}}else{if(this._compositeType===CompositeTypes.PureClass){shouldUpdate=!shallowEqual(prevProps,nextProps)||!shallowEqual(inst.state,nextState)}}}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(shouldUpdate!==undefined,"%s.shouldComponentUpdate(): Returned undefined instead of a "+"boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"):void 0}this._updateBatchNumber=null;if(shouldUpdate){this._pendingForceUpdate=false;this._performComponentUpdate(nextParentElement,nextProps,nextState,nextContext,transaction,nextUnmaskedContext)}else{this._currentElement=nextParentElement;this._context=nextUnmaskedContext;inst.props=nextProps;inst.state=nextState;inst.context=nextContext}},_processPendingState:function(props,context){var inst=this._instance;var queue=this._pendingStateQueue;var replace=this._pendingReplaceState;this._pendingReplaceState=false;this._pendingStateQueue=null;if(!queue){return inst.state}if(replace&&queue.length===1){return queue[0]}var nextState=_assign({},replace?queue[0]:inst.state);for(var i=replace?1:0;i<queue.length;i++){var partial=queue[i];_assign(nextState,typeof partial==="function"?partial.call(inst,nextState,props,context):partial)}return nextState},_performComponentUpdate:function(nextElement,nextProps,nextState,nextContext,transaction,unmaskedContext){var _this2=this;var inst=this._instance;var hasComponentDidUpdate=Boolean(inst.componentDidUpdate);var prevProps;var prevState;var prevContext;if(hasComponentDidUpdate){prevProps=inst.props;prevState=inst.state;prevContext=inst.context}if(inst.componentWillUpdate){if(process.env.NODE_ENV!=="production"){measureLifeCyclePerf(function(){return inst.componentWillUpdate(nextProps,nextState,nextContext)},this._debugID,"componentWillUpdate")}else{inst.componentWillUpdate(nextProps,nextState,nextContext)}}this._currentElement=nextElement;this._context=unmaskedContext;inst.props=nextProps;inst.state=nextState;inst.context=nextContext;this._updateRenderedComponent(transaction,unmaskedContext);if(hasComponentDidUpdate){if(process.env.NODE_ENV!=="production"){transaction.getReactMountReady().enqueue(function(){measureLifeCyclePerf(inst.componentDidUpdate.bind(inst,prevProps,prevState,prevContext),_this2._debugID,"componentDidUpdate")})}else{transaction.getReactMountReady().enqueue(inst.componentDidUpdate.bind(inst,prevProps,prevState,prevContext),inst)}}},_updateRenderedComponent:function(transaction,context){var prevComponentInstance=this._renderedComponent;var prevRenderedElement=prevComponentInstance._currentElement;var nextRenderedElement=this._renderValidatedComponent();var debugID=0;if(process.env.NODE_ENV!=="production"){debugID=this._debugID}if(shouldUpdateReactComponent(prevRenderedElement,nextRenderedElement)){ReactReconciler.receiveComponent(prevComponentInstance,nextRenderedElement,transaction,this._processChildContext(context))}else{var oldHostNode=ReactReconciler.getHostNode(prevComponentInstance);ReactReconciler.unmountComponent(prevComponentInstance,false);var nodeType=ReactNodeTypes.getType(nextRenderedElement);this._renderedNodeType=nodeType;var child=this._instantiateReactComponent(nextRenderedElement,nodeType!==ReactNodeTypes.EMPTY);this._renderedComponent=child;var nextMarkup=ReactReconciler.mountComponent(child,transaction,this._hostParent,this._hostContainerInfo,this._processChildContext(context),debugID);if(process.env.NODE_ENV!=="production"){if(debugID!==0){var childDebugIDs=child._debugID!==0?[child._debugID]:[];ReactInstrumentation.debugTool.onSetChildren(debugID,childDebugIDs)}}this._replaceNodeWithMarkup(oldHostNode,nextMarkup,prevComponentInstance)}},_replaceNodeWithMarkup:function(oldHostNode,nextMarkup,prevInstance){ReactComponentEnvironment.replaceNodeWithMarkup(oldHostNode,nextMarkup,prevInstance)},_renderValidatedComponentWithoutOwnerOrContext:function(){var inst=this._instance;var renderedElement;if(process.env.NODE_ENV!=="production"){renderedElement=measureLifeCyclePerf(function(){return inst.render()},this._debugID,"render")}else{renderedElement=inst.render()}if(process.env.NODE_ENV!=="production"){if(renderedElement===undefined&&inst.render._isMockFunction){renderedElement=null}}return renderedElement},_renderValidatedComponent:function(){var renderedElement;if(process.env.NODE_ENV!=="production"||this._compositeType!==CompositeTypes.StatelessFunctional){ReactCurrentOwner.current=this;try{renderedElement=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}}else{renderedElement=this._renderValidatedComponentWithoutOwnerOrContext()}!(renderedElement===null||renderedElement===false||React.isValidElement(renderedElement))?process.env.NODE_ENV!=="production"?invariant(false,"%s.render(): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"):_prodInvariant("109",this.getName()||"ReactCompositeComponent"):void 0;return renderedElement},attachRef:function(ref,component){var inst=this.getPublicInstance();!(inst!=null)?process.env.NODE_ENV!=="production"?invariant(false,"Stateless function components cannot have refs."):_prodInvariant("110"):void 0;var publicComponentInstance=component.getPublicInstance();if(process.env.NODE_ENV!=="production"){var componentName=component&&component.getName?component.getName():"a component";process.env.NODE_ENV!=="production"?warning(publicComponentInstance!=null||component._compositeType!==CompositeTypes.StatelessFunctional,"Stateless function components cannot be given refs "+'(See ref "%s" in %s created by %s). '+"Attempts to access this ref will fail.",ref,componentName,this.getName()):void 0}var refs=inst.refs===emptyObject?inst.refs={}:inst.refs;refs[ref]=publicComponentInstance},detachRef:function(ref){var refs=this.getPublicInstance().refs;delete refs[ref]},getName:function(){var type=this._currentElement.type;var constructor=this._instance&&this._instance.constructor;return type.displayName||constructor&&constructor.displayName||type.name||constructor&&constructor.name||null},getPublicInstance:function(){var inst=this._instance;if(this._compositeType===CompositeTypes.StatelessFunctional){return null}return inst},_instantiateReactComponent:null};module.exports=ReactCompositeComponent}).call(this)}).call(this,require("_process"))},{"./ReactComponentEnvironment":563,"./ReactErrorUtils":588,"./ReactInstanceMap":596,"./ReactInstrumentation":597,"./ReactNodeTypes":602,"./ReactReconciler":607,"./checkReactTypeSpec":634,"./reactProdInvariant":655,"./shouldUpdateReactComponent":659,_process:25,"fbjs/lib/emptyObject":511,"fbjs/lib/invariant":518,"fbjs/lib/shallowEqual":524,"fbjs/lib/warning":525,"object-assign":533,"react/lib/React":664,"react/lib/ReactCurrentOwner":669}],565:[function(require,module,exports){(function(process){(function(){"use strict";var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDefaultInjection=require("./ReactDefaultInjection");var ReactMount=require("./ReactMount");var ReactReconciler=require("./ReactReconciler");var ReactUpdates=require("./ReactUpdates");var ReactVersion=require("./ReactVersion");var findDOMNode=require("./findDOMNode");var getHostComponentFromComposite=require("./getHostComponentFromComposite");var renderSubtreeIntoContainer=require("./renderSubtreeIntoContainer");var warning=require("fbjs/lib/warning");ReactDefaultInjection.inject();var ReactDOM={findDOMNode:findDOMNode,render:ReactMount.render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject==="function"){__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:ReactDOMComponentTree.getClosestInstanceFromNode,getNodeFromInstance:function(inst){if(inst._renderedComponent){inst=getHostComponentFromComposite(inst)}if(inst){return ReactDOMComponentTree.getNodeFromInstance(inst)}else{return null}}},Mount:ReactMount,Reconciler:ReactReconciler})}if(process.env.NODE_ENV!=="production"){var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");if(ExecutionEnvironment.canUseDOM&&window.top===window.self){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__==="undefined"){if(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1){var showFileUrlMessage=window.location.protocol.indexOf("http")===-1&&navigator.userAgent.indexOf("Firefox")===-1;console.debug("Download the React DevTools "+(showFileUrlMessage?"and use an HTTP server (instead of a file: URL) ":"")+"for a better development experience: "+"https://fb.me/react-devtools")}}var testFunc=function testFn(){};process.env.NODE_ENV!=="production"?warning((testFunc.name||testFunc.toString()).indexOf("testFn")!==-1,"It looks like you're using a minified copy of the development build "+"of React. When deploying React apps to production, make sure to use "+"the production build which skips development warnings and is faster. "+"See https://fb.me/react-minification for more details."):void 0;var ieCompatibilityMode=document.documentMode&&document.documentMode<8;process.env.NODE_ENV!=="production"?warning(!ieCompatibilityMode,"Internet Explorer is running in compatibility mode; please add the "+"following tag to your HTML to prevent this from happening: "+'<meta http-equiv="X-UA-Compatible" content="IE=edge" />'):void 0;var expectedFeatures=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.trim];for(var i=0;i<expectedFeatures.length;i++){if(!expectedFeatures[i]){process.env.NODE_ENV!=="production"?warning(false,"One or more ES5 shims expected by React are not available: "+"https://fb.me/react-warning-polyfills"):void 0;break}}}}if(process.env.NODE_ENV!=="production"){var ReactInstrumentation=require("./ReactInstrumentation");var ReactDOMUnknownPropertyHook=require("./ReactDOMUnknownPropertyHook");var ReactDOMNullInputValuePropHook=require("./ReactDOMNullInputValuePropHook");var ReactDOMInvalidARIAHook=require("./ReactDOMInvalidARIAHook");ReactInstrumentation.debugTool.addHook(ReactDOMUnknownPropertyHook);ReactInstrumentation.debugTool.addHook(ReactDOMNullInputValuePropHook);ReactInstrumentation.debugTool.addHook(ReactDOMInvalidARIAHook)}module.exports=ReactDOM}).call(this)}).call(this,require("_process"))},{"./ReactDOMComponentTree":568,"./ReactDOMInvalidARIAHook":574,"./ReactDOMNullInputValuePropHook":575,"./ReactDOMUnknownPropertyHook":582,"./ReactDefaultInjection":585,"./ReactInstrumentation":597,"./ReactMount":600,"./ReactReconciler":607,"./ReactUpdates":612,"./ReactVersion":613,"./findDOMNode":638,"./getHostComponentFromComposite":645,"./renderSubtreeIntoContainer":656,_process:25,"fbjs/lib/ExecutionEnvironment":504,"fbjs/lib/warning":525}],566:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var AutoFocusUtils=require("./AutoFocusUtils");var CSSPropertyOperations=require("./CSSPropertyOperations");var DOMLazyTree=require("./DOMLazyTree");var DOMNamespaces=require("./DOMNamespaces");var DOMProperty=require("./DOMProperty");var DOMPropertyOperations=require("./DOMPropertyOperations");var EventPluginHub=require("./EventPluginHub");var EventPluginRegistry=require("./EventPluginRegistry");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactDOMComponentFlags=require("./ReactDOMComponentFlags");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMInput=require("./ReactDOMInput");var ReactDOMOption=require("./ReactDOMOption");var ReactDOMSelect=require("./ReactDOMSelect");var ReactDOMTextarea=require("./ReactDOMTextarea");var ReactInstrumentation=require("./ReactInstrumentation");var ReactMultiChild=require("./ReactMultiChild");var ReactServerRenderingTransaction=require("./ReactServerRenderingTransaction");var emptyFunction=require("fbjs/lib/emptyFunction");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var invariant=require("fbjs/lib/invariant");var isEventSupported=require("./isEventSupported");var shallowEqual=require("fbjs/lib/shallowEqual");var validateDOMNesting=require("./validateDOMNesting");var warning=require("fbjs/lib/warning");var Flags=ReactDOMComponentFlags;var deleteListener=EventPluginHub.deleteListener;var getNode=ReactDOMComponentTree.getNodeFromInstance;var listenTo=ReactBrowserEventEmitter.listenTo;var registrationNameModules=EventPluginRegistry.registrationNameModules;var CONTENT_TYPES={string:true,number:true};var STYLE="style";var HTML="__html";var RESERVED_PROPS={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null};var DOC_FRAGMENT_TYPE=11;function getDeclarationErrorAddendum(internalInstance){if(internalInstance){var owner=internalInstance._currentElement._owner||null;if(owner){var name=owner.getName();if(name){return" This DOM node was rendered by `"+name+"`."}}}return""}function friendlyStringify(obj){if(typeof obj==="object"){if(Array.isArray(obj)){return"["+obj.map(friendlyStringify).join(", ")+"]"}else{var pairs=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var keyEscaped=/^[a-z$_][\w$_]*$/i.test(key)?key:JSON.stringify(key);pairs.push(keyEscaped+": "+friendlyStringify(obj[key]))}}return"{"+pairs.join(", ")+"}"}}else if(typeof obj==="string"){return JSON.stringify(obj)}else if(typeof obj==="function"){return"[function object]"}return String(obj)}var styleMutationWarning={};function checkAndWarnForMutatedStyle(style1,style2,component){if(style1==null||style2==null){return}if(shallowEqual(style1,style2)){return}var componentName=component._tag;var owner=component._currentElement._owner;var ownerName;if(owner){ownerName=owner.getName()}var hash=ownerName+"|"+componentName;if(styleMutationWarning.hasOwnProperty(hash)){return}styleMutationWarning[hash]=true;process.env.NODE_ENV!=="production"?warning(false,"`%s` was passed a style object that has previously been mutated. "+"Mutating `style` is deprecated. Consider cloning it beforehand. Check "+"the `render` %s. Previous style: %s. Mutated style: %s.",componentName,owner?"of `"+ownerName+"`":"using <"+componentName+">",friendlyStringify(style1),friendlyStringify(style2)):void 0}function assertValidProps(component,props){if(!props){return}if(voidElementTags[component._tag]){!(props.children==null&&props.dangerouslySetInnerHTML==null)?process.env.NODE_ENV!=="production"?invariant(false,"%s is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.%s",component._tag,component._currentElement._owner?" Check the render method of "+component._currentElement._owner.getName()+".":""):_prodInvariant("137",component._tag,component._currentElement._owner?" Check the render method of "+component._currentElement._owner.getName()+".":""):void 0}if(props.dangerouslySetInnerHTML!=null){!(props.children==null)?process.env.NODE_ENV!=="production"?invariant(false,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):_prodInvariant("60"):void 0;!(typeof props.dangerouslySetInnerHTML==="object"&&HTML in props.dangerouslySetInnerHTML)?process.env.NODE_ENV!=="production"?invariant(false,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information."):_prodInvariant("61"):void 0}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(props.innerHTML==null,"Directly setting property `innerHTML` is not permitted. "+"For more information, lookup documentation on `dangerouslySetInnerHTML`."):void 0;process.env.NODE_ENV!=="production"?warning(props.suppressContentEditableWarning||!props.contentEditable||props.children==null,"A component is `contentEditable` and contains `children` managed by "+"React. It is now your responsibility to guarantee that none of "+"those nodes are unexpectedly modified or duplicated. This is "+"probably not intentional."):void 0;process.env.NODE_ENV!=="production"?warning(props.onFocusIn==null&&props.onFocusOut==null,"React uses onFocus and onBlur instead of onFocusIn and onFocusOut. "+"All React events are normalized to bubble, so onFocusIn and onFocusOut "+"are not needed/supported by React."):void 0}!(props.style==null||typeof props.style==="object")?process.env.NODE_ENV!=="production"?invariant(false,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",getDeclarationErrorAddendum(component)):_prodInvariant("62",getDeclarationErrorAddendum(component)):void 0}function enqueuePutListener(inst,registrationName,listener,transaction){if(transaction instanceof ReactServerRenderingTransaction){return}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(registrationName!=="onScroll"||isEventSupported("scroll",true),"This browser doesn't support the `onScroll` event"):void 0}var containerInfo=inst._hostContainerInfo;var isDocumentFragment=containerInfo._node&&containerInfo._node.nodeType===DOC_FRAGMENT_TYPE;var doc=isDocumentFragment?containerInfo._node:containerInfo._ownerDocument;listenTo(registrationName,doc);transaction.getReactMountReady().enqueue(putListener,{inst:inst,registrationName:registrationName,listener:listener})}function putListener(){var listenerToPut=this;EventPluginHub.putListener(listenerToPut.inst,listenerToPut.registrationName,listenerToPut.listener)}function inputPostMount(){var inst=this;ReactDOMInput.postMountWrapper(inst)}function textareaPostMount(){var inst=this;ReactDOMTextarea.postMountWrapper(inst)}function optionPostMount(){var inst=this;ReactDOMOption.postMountWrapper(inst)}var setAndValidateContentChildDev=emptyFunction;if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev=function(content){var hasExistingContent=this._contentDebugID!=null;var debugID=this._debugID;var contentDebugID=-debugID;if(content==null){if(hasExistingContent){ReactInstrumentation.debugTool.onUnmountComponent(this._contentDebugID)}this._contentDebugID=null;return}validateDOMNesting(null,String(content),this,this._ancestorInfo);this._contentDebugID=contentDebugID;if(hasExistingContent){ReactInstrumentation.debugTool.onBeforeUpdateComponent(contentDebugID,content);ReactInstrumentation.debugTool.onUpdateComponent(contentDebugID)}else{ReactInstrumentation.debugTool.onBeforeMountComponent(contentDebugID,content,debugID);ReactInstrumentation.debugTool.onMountComponent(contentDebugID);ReactInstrumentation.debugTool.onSetChildren(debugID,[contentDebugID])}}}var mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"};function trapBubbledEventsLocal(){var inst=this;!inst._rootNodeID?process.env.NODE_ENV!=="production"?invariant(false,"Must be mounted to trap events"):_prodInvariant("63"):void 0;var node=getNode(inst);!node?process.env.NODE_ENV!=="production"?invariant(false,"trapBubbledEvent(...): Requires node to be rendered."):_prodInvariant("64"):void 0;switch(inst._tag){case"iframe":case"object":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topLoad","load",node)];break;case"video":case"audio":inst._wrapperState.listeners=[];for(var event in mediaEvents){if(mediaEvents.hasOwnProperty(event)){inst._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(event,mediaEvents[event],node))}}break;case"source":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topError","error",node)];break;case"img":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topError","error",node),ReactBrowserEventEmitter.trapBubbledEvent("topLoad","load",node)];break;case"form":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topReset","reset",node),ReactBrowserEventEmitter.trapBubbledEvent("topSubmit","submit",node)];break;case"input":case"select":case"textarea":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topInvalid","invalid",node)];break}}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}var omittedCloseTags={area:true,base:true,br:true,col:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true};var newlineEatingTags={listing:true,pre:true,textarea:true};var voidElementTags=_assign({menuitem:true},omittedCloseTags);var VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/;var validatedTagCache={};var hasOwnProperty={}.hasOwnProperty;function validateDangerousTag(tag){if(!hasOwnProperty.call(validatedTagCache,tag)){!VALID_TAG_REGEX.test(tag)?process.env.NODE_ENV!=="production"?invariant(false,"Invalid tag: %s",tag):_prodInvariant("65",tag):void 0;validatedTagCache[tag]=true}}function isCustomComponent(tagName,props){return tagName.indexOf("-")>=0||props.is!=null}var globalIdCounter=1;function ReactDOMComponent(element){var tag=element.type;validateDangerousTag(tag);this._currentElement=element;this._tag=tag.toLowerCase();this._namespaceURI=null;this._renderedChildren=null;this._previousStyle=null;this._previousStyleCopy=null;this._hostNode=null;this._hostParent=null;this._rootNodeID=0;this._domID=0;this._hostContainerInfo=null;this._wrapperState=null;this._topLevelWrapper=null;this._flags=0;if(process.env.NODE_ENV!=="production"){this._ancestorInfo=null;setAndValidateContentChildDev.call(this,null)}}ReactDOMComponent.displayName="ReactDOMComponent";ReactDOMComponent.Mixin={mountComponent:function(transaction,hostParent,hostContainerInfo,context){this._rootNodeID=globalIdCounter++;this._domID=hostContainerInfo._idCounter++;this._hostParent=hostParent;this._hostContainerInfo=hostContainerInfo;var props=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null};transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"input":ReactDOMInput.mountWrapper(this,props,hostParent);props=ReactDOMInput.getHostProps(this,props);transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"option":ReactDOMOption.mountWrapper(this,props,hostParent);props=ReactDOMOption.getHostProps(this,props);break;case"select":ReactDOMSelect.mountWrapper(this,props,hostParent);props=ReactDOMSelect.getHostProps(this,props);transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"textarea":ReactDOMTextarea.mountWrapper(this,props,hostParent);props=ReactDOMTextarea.getHostProps(this,props);transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break}assertValidProps(this,props);var namespaceURI;var parentTag;if(hostParent!=null){namespaceURI=hostParent._namespaceURI;parentTag=hostParent._tag}else if(hostContainerInfo._tag){namespaceURI=hostContainerInfo._namespaceURI;parentTag=hostContainerInfo._tag}if(namespaceURI==null||namespaceURI===DOMNamespaces.svg&&parentTag==="foreignobject"){namespaceURI=DOMNamespaces.html}if(namespaceURI===DOMNamespaces.html){if(this._tag==="svg"){namespaceURI=DOMNamespaces.svg}else if(this._tag==="math"){namespaceURI=DOMNamespaces.mathml}}this._namespaceURI=namespaceURI;if(process.env.NODE_ENV!=="production"){var parentInfo;if(hostParent!=null){parentInfo=hostParent._ancestorInfo}else if(hostContainerInfo._tag){parentInfo=hostContainerInfo._ancestorInfo}if(parentInfo){validateDOMNesting(this._tag,null,this,parentInfo)}this._ancestorInfo=validateDOMNesting.updatedAncestorInfo(parentInfo,this._tag,this)}var mountImage;if(transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument;var el;if(namespaceURI===DOMNamespaces.html){if(this._tag==="script"){var div=ownerDocument.createElement("div");var type=this._currentElement.type;div.innerHTML="<"+type+"></"+type+">";el=div.removeChild(div.firstChild)}else if(props.is){el=ownerDocument.createElement(this._currentElement.type,props.is)}else{el=ownerDocument.createElement(this._currentElement.type)}}else{el=ownerDocument.createElementNS(namespaceURI,this._currentElement.type)}ReactDOMComponentTree.precacheNode(this,el);this._flags|=Flags.hasCachedChildNodes;if(!this._hostParent){DOMPropertyOperations.setAttributeForRoot(el)}this._updateDOMProperties(null,props,transaction);var lazyTree=DOMLazyTree(el);this._createInitialChildren(transaction,props,context,lazyTree);mountImage=lazyTree}else{var tagOpen=this._createOpenTagMarkupAndPutListeners(transaction,props);var tagContent=this._createContentMarkup(transaction,props,context);if(!tagContent&&omittedCloseTags[this._tag]){mountImage=tagOpen+"/>"}else{mountImage=tagOpen+">"+tagContent+"</"+this._currentElement.type+">"}}switch(this._tag){case"input":transaction.getReactMountReady().enqueue(inputPostMount,this);if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"textarea":transaction.getReactMountReady().enqueue(textareaPostMount,this);if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"select":if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"button":if(props.autoFocus){transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}break;case"option":transaction.getReactMountReady().enqueue(optionPostMount,this);break}return mountImage},_createOpenTagMarkupAndPutListeners:function(transaction,props){var ret="<"+this._currentElement.type;for(var propKey in props){if(!props.hasOwnProperty(propKey)){continue}var propValue=props[propKey];if(propValue==null){continue}if(registrationNameModules.hasOwnProperty(propKey)){if(propValue){enqueuePutListener(this,propKey,propValue,transaction)}}else{if(propKey===STYLE){if(propValue){if(process.env.NODE_ENV!=="production"){this._previousStyle=propValue}propValue=this._previousStyleCopy=_assign({},props.style)}propValue=CSSPropertyOperations.createMarkupForStyles(propValue,this)}var markup=null;if(this._tag!=null&&isCustomComponent(this._tag,props)){if(!RESERVED_PROPS.hasOwnProperty(propKey)){markup=DOMPropertyOperations.createMarkupForCustomAttribute(propKey,propValue)}}else{markup=DOMPropertyOperations.createMarkupForProperty(propKey,propValue)}if(markup){ret+=" "+markup}}}if(transaction.renderToStaticMarkup){return ret}if(!this._hostParent){ret+=" "+DOMPropertyOperations.createMarkupForRoot()}ret+=" "+DOMPropertyOperations.createMarkupForID(this._domID);return ret},_createContentMarkup:function(transaction,props,context){var ret="";var innerHTML=props.dangerouslySetInnerHTML;if(innerHTML!=null){if(innerHTML.__html!=null){ret=innerHTML.__html}}else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null;var childrenToUse=contentToUse!=null?null:props.children;if(contentToUse!=null){ret=escapeTextContentForBrowser(contentToUse);if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,contentToUse)}}else if(childrenToUse!=null){var mountImages=this.mountChildren(childrenToUse,transaction,context);ret=mountImages.join("")}}if(newlineEatingTags[this._tag]&&ret.charAt(0)==="\n"){return"\n"+ret}else{return ret}},_createInitialChildren:function(transaction,props,context,lazyTree){var innerHTML=props.dangerouslySetInnerHTML;if(innerHTML!=null){if(innerHTML.__html!=null){DOMLazyTree.queueHTML(lazyTree,innerHTML.__html)}}else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null;var childrenToUse=contentToUse!=null?null:props.children;if(contentToUse!=null){if(contentToUse!==""){if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,contentToUse)}DOMLazyTree.queueText(lazyTree,contentToUse)}}else if(childrenToUse!=null){var mountImages=this.mountChildren(childrenToUse,transaction,context);for(var i=0;i<mountImages.length;i++){DOMLazyTree.queueChild(lazyTree,mountImages[i])}}}},receiveComponent:function(nextElement,transaction,context){var prevElement=this._currentElement;this._currentElement=nextElement;this.updateComponent(transaction,prevElement,nextElement,context)},updateComponent:function(transaction,prevElement,nextElement,context){var lastProps=prevElement.props;var nextProps=this._currentElement.props;switch(this._tag){case"input":lastProps=ReactDOMInput.getHostProps(this,lastProps);nextProps=ReactDOMInput.getHostProps(this,nextProps);break;case"option":lastProps=ReactDOMOption.getHostProps(this,lastProps);nextProps=ReactDOMOption.getHostProps(this,nextProps);break;case"select":lastProps=ReactDOMSelect.getHostProps(this,lastProps);nextProps=ReactDOMSelect.getHostProps(this,nextProps);break;case"textarea":lastProps=ReactDOMTextarea.getHostProps(this,lastProps);nextProps=ReactDOMTextarea.getHostProps(this,nextProps);break}assertValidProps(this,nextProps);this._updateDOMProperties(lastProps,nextProps,transaction);this._updateDOMChildren(lastProps,nextProps,transaction,context);switch(this._tag){case"input":ReactDOMInput.updateWrapper(this);break;case"textarea":ReactDOMTextarea.updateWrapper(this);break;case"select":transaction.getReactMountReady().enqueue(postUpdateSelectWrapper,this);break}},_updateDOMProperties:function(lastProps,nextProps,transaction){var propKey;var styleName;var styleUpdates;for(propKey in lastProps){if(nextProps.hasOwnProperty(propKey)||!lastProps.hasOwnProperty(propKey)||lastProps[propKey]==null){continue}if(propKey===STYLE){var lastStyle=this._previousStyleCopy;for(styleName in lastStyle){if(lastStyle.hasOwnProperty(styleName)){styleUpdates=styleUpdates||{};styleUpdates[styleName]=""}}this._previousStyleCopy=null}else if(registrationNameModules.hasOwnProperty(propKey)){if(lastProps[propKey]){deleteListener(this,propKey)}}else if(isCustomComponent(this._tag,lastProps)){if(!RESERVED_PROPS.hasOwnProperty(propKey)){DOMPropertyOperations.deleteValueForAttribute(getNode(this),propKey)}}else if(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey)){DOMPropertyOperations.deleteValueForProperty(getNode(this),propKey)}}for(propKey in nextProps){var nextProp=nextProps[propKey];var lastProp=propKey===STYLE?this._previousStyleCopy:lastProps!=null?lastProps[propKey]:undefined;if(!nextProps.hasOwnProperty(propKey)||nextProp===lastProp||nextProp==null&&lastProp==null){continue}if(propKey===STYLE){if(nextProp){if(process.env.NODE_ENV!=="production"){checkAndWarnForMutatedStyle(this._previousStyleCopy,this._previousStyle,this);this._previousStyle=nextProp}nextProp=this._previousStyleCopy=_assign({},nextProp)}else{this._previousStyleCopy=null}if(lastProp){for(styleName in lastProp){if(lastProp.hasOwnProperty(styleName)&&(!nextProp||!nextProp.hasOwnProperty(styleName))){styleUpdates=styleUpdates||{};styleUpdates[styleName]=""}}for(styleName in nextProp){if(nextProp.hasOwnProperty(styleName)&&lastProp[styleName]!==nextProp[styleName]){styleUpdates=styleUpdates||{};styleUpdates[styleName]=nextProp[styleName]}}}else{styleUpdates=nextProp}}else if(registrationNameModules.hasOwnProperty(propKey)){if(nextProp){enqueuePutListener(this,propKey,nextProp,transaction)}else if(lastProp){deleteListener(this,propKey)}}else if(isCustomComponent(this._tag,nextProps)){if(!RESERVED_PROPS.hasOwnProperty(propKey)){DOMPropertyOperations.setValueForAttribute(getNode(this),propKey,nextProp)}}else if(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey)){var node=getNode(this);if(nextProp!=null){DOMPropertyOperations.setValueForProperty(node,propKey,nextProp)}else{DOMPropertyOperations.deleteValueForProperty(node,propKey)}}}if(styleUpdates){CSSPropertyOperations.setValueForStyles(getNode(this),styleUpdates,this)}},_updateDOMChildren:function(lastProps,nextProps,transaction,context){var lastContent=CONTENT_TYPES[typeof lastProps.children]?lastProps.children:null;var nextContent=CONTENT_TYPES[typeof nextProps.children]?nextProps.children:null;var lastHtml=lastProps.dangerouslySetInnerHTML&&lastProps.dangerouslySetInnerHTML.__html;var nextHtml=nextProps.dangerouslySetInnerHTML&&nextProps.dangerouslySetInnerHTML.__html;var lastChildren=lastContent!=null?null:lastProps.children;var nextChildren=nextContent!=null?null:nextProps.children;var lastHasContentOrHtml=lastContent!=null||lastHtml!=null;var nextHasContentOrHtml=nextContent!=null||nextHtml!=null;if(lastChildren!=null&&nextChildren==null){this.updateChildren(null,transaction,context)}else if(lastHasContentOrHtml&&!nextHasContentOrHtml){this.updateTextContent("");if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onSetChildren(this._debugID,[])}}if(nextContent!=null){if(lastContent!==nextContent){this.updateTextContent(""+nextContent);if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,nextContent)}}}else if(nextHtml!=null){if(lastHtml!==nextHtml){this.updateMarkup(""+nextHtml)}if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onSetChildren(this._debugID,[])}}else if(nextChildren!=null){if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,null)}this.updateChildren(nextChildren,transaction,context)}},getHostNode:function(){return getNode(this)},unmountComponent:function(safely){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var listeners=this._wrapperState.listeners;if(listeners){for(var i=0;i<listeners.length;i++){listeners[i].remove()}}break;case"html":case"head":case"body":!false?process.env.NODE_ENV!=="production"?invariant(false,"<%s> tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this._tag):_prodInvariant("66",this._tag):void 0;break}this.unmountChildren(safely);ReactDOMComponentTree.uncacheNode(this);EventPluginHub.deleteAllListeners(this);this._rootNodeID=0;this._domID=0;this._wrapperState=null;if(process.env.NODE_ENV!=="production"){setAndValidateContentChildDev.call(this,null)}},getPublicInstance:function(){return getNode(this)}};_assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin);module.exports=ReactDOMComponent}).call(this)}).call(this,require("_process"))},{"./AutoFocusUtils":537,"./CSSPropertyOperations":540,"./DOMLazyTree":544,"./DOMNamespaces":545,"./DOMProperty":546,"./DOMPropertyOperations":547,"./EventPluginHub":551,"./EventPluginRegistry":552,"./ReactBrowserEventEmitter":560,"./ReactDOMComponentFlags":567,"./ReactDOMComponentTree":568,"./ReactDOMInput":573,"./ReactDOMOption":576,"./ReactDOMSelect":577,"./ReactDOMTextarea":580,"./ReactInstrumentation":597,"./ReactMultiChild":601,"./ReactServerRenderingTransaction":609,"./escapeTextContentForBrowser":637,"./isEventSupported":652,"./reactProdInvariant":655,"./validateDOMNesting":661,_process:25,"fbjs/lib/emptyFunction":510,"fbjs/lib/invariant":518,"fbjs/lib/shallowEqual":524,"fbjs/lib/warning":525,"object-assign":533}],567:[function(require,module,exports){"use strict";var ReactDOMComponentFlags={hasCachedChildNodes:1<<0};module.exports=ReactDOMComponentFlags},{}],568:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var DOMProperty=require("./DOMProperty");var ReactDOMComponentFlags=require("./ReactDOMComponentFlags");var invariant=require("fbjs/lib/invariant");var ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME;var Flags=ReactDOMComponentFlags;var internalInstanceKey="__reactInternalInstance$"+Math.random().toString(36).slice(2);function shouldPrecacheNode(node,nodeID){return node.nodeType===1&&node.getAttribute(ATTR_NAME)===String(nodeID)||node.nodeType===8&&node.nodeValue===" react-text: "+nodeID+" "||node.nodeType===8&&node.nodeValue===" react-empty: "+nodeID+" "}function getRenderedHostOrTextFromComponent(component){var rendered;while(rendered=component._renderedComponent){component=rendered}return component}function precacheNode(inst,node){var hostInst=getRenderedHostOrTextFromComponent(inst);hostInst._hostNode=node;node[internalInstanceKey]=hostInst}function uncacheNode(inst){var node=inst._hostNode;if(node){delete node[internalInstanceKey];inst._hostNode=null}}function precacheChildNodes(inst,node){if(inst._flags&Flags.hasCachedChildNodes){return}var children=inst._renderedChildren;var childNode=node.firstChild;outer:for(var name in children){if(!children.hasOwnProperty(name)){continue}var childInst=children[name];var childID=getRenderedHostOrTextFromComponent(childInst)._domID;if(childID===0){continue}for(;childNode!==null;childNode=childNode.nextSibling){if(shouldPrecacheNode(childNode,childID)){precacheNode(childInst,childNode);continue outer}}!false?process.env.NODE_ENV!=="production"?invariant(false,"Unable to find element with ID %s.",childID):_prodInvariant("32",childID):void 0}inst._flags|=Flags.hasCachedChildNodes}function getClosestInstanceFromNode(node){if(node[internalInstanceKey]){return node[internalInstanceKey]}var parents=[];while(!node[internalInstanceKey]){parents.push(node);if(node.parentNode){node=node.parentNode}else{return null}}var closest;var inst;for(;node&&(inst=node[internalInstanceKey]);node=parents.pop()){closest=inst;if(parents.length){precacheChildNodes(inst,node)}}return closest}function getInstanceFromNode(node){var inst=getClosestInstanceFromNode(node);if(inst!=null&&inst._hostNode===node){return inst}else{return null}}function getNodeFromInstance(inst){!(inst._hostNode!==undefined)?process.env.NODE_ENV!=="production"?invariant(false,"getNodeFromInstance: Invalid argument."):_prodInvariant("33"):void 0;if(inst._hostNode){return inst._hostNode}var parents=[];while(!inst._hostNode){parents.push(inst);!inst._hostParent?process.env.NODE_ENV!=="production"?invariant(false,"React DOM tree root should always have a node reference."):_prodInvariant("34"):void 0;inst=inst._hostParent}for(;parents.length;inst=parents.pop()){precacheChildNodes(inst,inst._hostNode)}return inst._hostNode}var ReactDOMComponentTree={getClosestInstanceFromNode:getClosestInstanceFromNode,getInstanceFromNode:getInstanceFromNode,getNodeFromInstance:getNodeFromInstance,precacheChildNodes:precacheChildNodes,precacheNode:precacheNode,uncacheNode:uncacheNode};module.exports=ReactDOMComponentTree}).call(this)}).call(this,require("_process"))},{"./DOMProperty":546,"./ReactDOMComponentFlags":567,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],569:[function(require,module,exports){(function(process){(function(){"use strict";var validateDOMNesting=require("./validateDOMNesting");var DOC_NODE_TYPE=9;function ReactDOMContainerInfo(topLevelWrapper,node){var info={_topLevelWrapper:topLevelWrapper,_idCounter:1,_ownerDocument:node?node.nodeType===DOC_NODE_TYPE?node:node.ownerDocument:null,_node:node,_tag:node?node.nodeName.toLowerCase():null,_namespaceURI:node?node.namespaceURI:null};if(process.env.NODE_ENV!=="production"){info._ancestorInfo=node?validateDOMNesting.updatedAncestorInfo(null,info._tag,null):null}return info}module.exports=ReactDOMContainerInfo}).call(this)}).call(this,require("_process"))},{"./validateDOMNesting":661,_process:25}],570:[function(require,module,exports){"use strict";var _assign=require("object-assign");var DOMLazyTree=require("./DOMLazyTree");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMEmptyComponent=function(instantiate){this._currentElement=null;this._hostNode=null;this._hostParent=null;this._hostContainerInfo=null;this._domID=0};_assign(ReactDOMEmptyComponent.prototype,{mountComponent:function(transaction,hostParent,hostContainerInfo,context){var domID=hostContainerInfo._idCounter++;this._domID=domID;this._hostParent=hostParent;this._hostContainerInfo=hostContainerInfo;var nodeValue=" react-empty: "+this._domID+" ";if(transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument;var node=ownerDocument.createComment(nodeValue);ReactDOMComponentTree.precacheNode(this,node);return DOMLazyTree(node)}else{if(transaction.renderToStaticMarkup){return""}return"\x3c!--"+nodeValue+"--\x3e"}},receiveComponent:function(){},getHostNode:function(){return ReactDOMComponentTree.getNodeFromInstance(this)},unmountComponent:function(){ReactDOMComponentTree.uncacheNode(this)}});module.exports=ReactDOMEmptyComponent},{"./DOMLazyTree":544,"./ReactDOMComponentTree":568,"object-assign":533}],571:[function(require,module,exports){"use strict";var ReactDOMFeatureFlags={useCreateElement:true,useFiber:false};module.exports=ReactDOMFeatureFlags},{}],572:[function(require,module,exports){"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMIDOperations={dangerouslyProcessChildrenUpdates:function(parentInst,updates){var node=ReactDOMComponentTree.getNodeFromInstance(parentInst);DOMChildrenOperations.processUpdates(node,updates)}};module.exports=ReactDOMIDOperations},{"./DOMChildrenOperations":543,"./ReactDOMComponentTree":568}],573:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var DOMPropertyOperations=require("./DOMPropertyOperations");var LinkedValueUtils=require("./LinkedValueUtils");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var didWarnValueLink=false;var didWarnCheckedLink=false;var didWarnValueDefaultValue=false;var didWarnCheckedDefaultChecked=false;var didWarnControlledToUncontrolled=false;var didWarnUncontrolledToControlled=false;function forceUpdateIfMounted(){if(this._rootNodeID){ReactDOMInput.updateWrapper(this)}}function isControlled(props){var usesChecked=props.type==="checkbox"||props.type==="radio";return usesChecked?props.checked!=null:props.value!=null}var ReactDOMInput={getHostProps:function(inst,props){var value=LinkedValueUtils.getValue(props);var checked=LinkedValueUtils.getChecked(props);var hostProps=_assign({type:undefined,step:undefined,min:undefined,max:undefined},props,{defaultChecked:undefined,defaultValue:undefined,value:value!=null?value:inst._wrapperState.initialValue,checked:checked!=null?checked:inst._wrapperState.initialChecked,onChange:inst._wrapperState.onChange});return hostProps},mountWrapper:function(inst,props){if(process.env.NODE_ENV!=="production"){LinkedValueUtils.checkPropTypes("input",props,inst._currentElement._owner);var owner=inst._currentElement._owner;if(props.valueLink!==undefined&&!didWarnValueLink){process.env.NODE_ENV!=="production"?warning(false,"`valueLink` prop on `input` is deprecated; set `value` and `onChange` instead."):void 0;didWarnValueLink=true}if(props.checkedLink!==undefined&&!didWarnCheckedLink){process.env.NODE_ENV!=="production"?warning(false,"`checkedLink` prop on `input` is deprecated; set `value` and `onChange` instead."):void 0;didWarnCheckedLink=true}if(props.checked!==undefined&&props.defaultChecked!==undefined&&!didWarnCheckedDefaultChecked){process.env.NODE_ENV!=="production"?warning(false,"%s contains an input of type %s with both checked and defaultChecked props. "+"Input elements must be either controlled or uncontrolled "+"(specify either the checked prop, or the defaultChecked prop, but not "+"both). Decide between using a controlled or uncontrolled input "+"element and remove one of these props. More info: "+"https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnCheckedDefaultChecked=true}if(props.value!==undefined&&props.defaultValue!==undefined&&!didWarnValueDefaultValue){process.env.NODE_ENV!=="production"?warning(false,"%s contains an input of type %s with both value and defaultValue props. "+"Input elements must be either controlled or uncontrolled "+"(specify either the value prop, or the defaultValue prop, but not "+"both). Decide between using a controlled or uncontrolled input "+"element and remove one of these props. More info: "+"https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnValueDefaultValue=true}}var defaultValue=props.defaultValue;inst._wrapperState={initialChecked:props.checked!=null?props.checked:props.defaultChecked,initialValue:props.value!=null?props.value:defaultValue,listeners:null,onChange:_handleChange.bind(inst)};if(process.env.NODE_ENV!=="production"){inst._wrapperState.controlled=isControlled(props)}},updateWrapper:function(inst){var props=inst._currentElement.props;if(process.env.NODE_ENV!=="production"){var controlled=isControlled(props);var owner=inst._currentElement._owner;if(!inst._wrapperState.controlled&&controlled&&!didWarnUncontrolledToControlled){process.env.NODE_ENV!=="production"?warning(false,"%s is changing an uncontrolled input of type %s to be controlled. "+"Input elements should not switch from uncontrolled to controlled (or vice versa). "+"Decide between using a controlled or uncontrolled input "+"element for the lifetime of the component. More info: https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnUncontrolledToControlled=true}if(inst._wrapperState.controlled&&!controlled&&!didWarnControlledToUncontrolled){process.env.NODE_ENV!=="production"?warning(false,"%s is changing a controlled input of type %s to be uncontrolled. "+"Input elements should not switch from controlled to uncontrolled (or vice versa). "+"Decide between using a controlled or uncontrolled input "+"element for the lifetime of the component. More info: https://fb.me/react-controlled-components",owner&&owner.getName()||"A component",props.type):void 0;didWarnControlledToUncontrolled=true}}var checked=props.checked;if(checked!=null){DOMPropertyOperations.setValueForProperty(ReactDOMComponentTree.getNodeFromInstance(inst),"checked",checked||false)}var node=ReactDOMComponentTree.getNodeFromInstance(inst);var value=LinkedValueUtils.getValue(props);if(value!=null){var newValue=""+value;if(newValue!==node.value){node.value=newValue}}else{if(props.value==null&&props.defaultValue!=null){if(node.defaultValue!==""+props.defaultValue){node.defaultValue=""+props.defaultValue}}if(props.checked==null&&props.defaultChecked!=null){node.defaultChecked=!!props.defaultChecked}}},postMountWrapper:function(inst){var props=inst._currentElement.props;var node=ReactDOMComponentTree.getNodeFromInstance(inst);switch(props.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":node.value="";node.value=node.defaultValue;break;default:node.value=node.value;break}var name=node.name;if(name!==""){node.name=""}node.defaultChecked=!node.defaultChecked;node.defaultChecked=!node.defaultChecked;if(name!==""){node.name=name}}};function _handleChange(event){var props=this._currentElement.props;var returnValue=LinkedValueUtils.executeOnChange(props,event);ReactUpdates.asap(forceUpdateIfMounted,this);var name=props.name;if(props.type==="radio"&&name!=null){var rootNode=ReactDOMComponentTree.getNodeFromInstance(this);var queryRoot=rootNode;while(queryRoot.parentNode){queryRoot=queryRoot.parentNode}var group=queryRoot.querySelectorAll("input[name="+JSON.stringify(""+name)+'][type="radio"]');for(var i=0;i<group.length;i++){var otherNode=group[i];if(otherNode===rootNode||otherNode.form!==rootNode.form){continue}var otherInstance=ReactDOMComponentTree.getInstanceFromNode(otherNode);!otherInstance?process.env.NODE_ENV!=="production"?invariant(false,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."):_prodInvariant("90"):void 0;ReactUpdates.asap(forceUpdateIfMounted,otherInstance)}}return returnValue}module.exports=ReactDOMInput}).call(this)}).call(this,require("_process"))},{"./DOMPropertyOperations":547,"./LinkedValueUtils":558,"./ReactDOMComponentTree":568,"./ReactUpdates":612,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525,"object-assign":533}],574:[function(require,module,exports){(function(process){(function(){"use strict";var DOMProperty=require("./DOMProperty");var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var warning=require("fbjs/lib/warning");var warnedProperties={};var rARIA=new RegExp("^(aria)-["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$");function validateProperty(tagName,name,debugID){if(warnedProperties.hasOwnProperty(name)&&warnedProperties[name]){return true}if(rARIA.test(name)){var lowerCasedName=name.toLowerCase();var standardName=DOMProperty.getPossibleStandardName.hasOwnProperty(lowerCasedName)?DOMProperty.getPossibleStandardName[lowerCasedName]:null;if(standardName==null){warnedProperties[name]=true;return false}if(name!==standardName){process.env.NODE_ENV!=="production"?warning(false,"Unknown ARIA attribute %s. Did you mean %s?%s",name,standardName,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;warnedProperties[name]=true;return true}}return true}function warnInvalidARIAProps(debugID,element){var invalidProps=[];for(var key in element.props){var isValid=validateProperty(element.type,key,debugID);if(!isValid){invalidProps.push(key)}}var unknownPropString=invalidProps.map(function(prop){return"`"+prop+"`"}).join(", ");if(invalidProps.length===1){process.env.NODE_ENV!=="production"?warning(false,"Invalid aria prop %s on <%s> tag. "+"For details, see https://fb.me/invalid-aria-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}else if(invalidProps.length>1){process.env.NODE_ENV!=="production"?warning(false,"Invalid aria props %s on <%s> tag. "+"For details, see https://fb.me/invalid-aria-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}}function handleElement(debugID,element){if(element==null||typeof element.type!=="string"){return}if(element.type.indexOf("-")>=0||element.props.is){return}warnInvalidARIAProps(debugID,element)}var ReactDOMInvalidARIAHook={onBeforeMountComponent:function(debugID,element){if(process.env.NODE_ENV!=="production"){handleElement(debugID,element)}},onBeforeUpdateComponent:function(debugID,element){if(process.env.NODE_ENV!=="production"){handleElement(debugID,element)}}};module.exports=ReactDOMInvalidARIAHook}).call(this)}).call(this,require("_process"))},{"./DOMProperty":546,_process:25,"fbjs/lib/warning":525,"react/lib/ReactComponentTreeHook":668}],575:[function(require,module,exports){(function(process){(function(){"use strict";var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var warning=require("fbjs/lib/warning");var didWarnValueNull=false;function handleElement(debugID,element){if(element==null){return}if(element.type!=="input"&&element.type!=="textarea"&&element.type!=="select"){return}if(element.props!=null&&element.props.value===null&&!didWarnValueNull){process.env.NODE_ENV!=="production"?warning(false,"`value` prop on `%s` should not be null. "+"Consider using the empty string to clear the component or `undefined` "+"for uncontrolled components.%s",element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;didWarnValueNull=true}}var ReactDOMNullInputValuePropHook={onBeforeMountComponent:function(debugID,element){handleElement(debugID,element)},onBeforeUpdateComponent:function(debugID,element){handleElement(debugID,element)}};module.exports=ReactDOMNullInputValuePropHook}).call(this)}).call(this,require("_process"))},{_process:25,"fbjs/lib/warning":525,"react/lib/ReactComponentTreeHook":668}],576:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var React=require("react/lib/React");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMSelect=require("./ReactDOMSelect");var warning=require("fbjs/lib/warning");var didWarnInvalidOptionChildren=false;function flattenChildren(children){var content="";React.Children.forEach(children,function(child){if(child==null){return}if(typeof child==="string"||typeof child==="number"){content+=child}else if(!didWarnInvalidOptionChildren){didWarnInvalidOptionChildren=true;process.env.NODE_ENV!=="production"?warning(false,"Only strings and numbers are supported as <option> children."):void 0}});return content}var ReactDOMOption={mountWrapper:function(inst,props,hostParent){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(props.selected==null,"Use the `defaultValue` or `value` props on <select> instead of "+"setting `selected` on <option>."):void 0}var selectValue=null;if(hostParent!=null){var selectParent=hostParent;if(selectParent._tag==="optgroup"){selectParent=selectParent._hostParent}if(selectParent!=null&&selectParent._tag==="select"){selectValue=ReactDOMSelect.getSelectValueContext(selectParent)}}var selected=null;if(selectValue!=null){var value;if(props.value!=null){value=props.value+""}else{value=flattenChildren(props.children)}selected=false;if(Array.isArray(selectValue)){for(var i=0;i<selectValue.length;i++){if(""+selectValue[i]===value){selected=true;break}}}else{selected=""+selectValue===value}}inst._wrapperState={selected:selected}},postMountWrapper:function(inst){var props=inst._currentElement.props;if(props.value!=null){var node=ReactDOMComponentTree.getNodeFromInstance(inst);node.setAttribute("value",props.value)}},getHostProps:function(inst,props){var hostProps=_assign({selected:undefined,children:undefined},props);if(inst._wrapperState.selected!=null){hostProps.selected=inst._wrapperState.selected}var content=flattenChildren(props.children);if(content){hostProps.children=content}return hostProps}};module.exports=ReactDOMOption}).call(this)}).call(this,require("_process"))},{"./ReactDOMComponentTree":568,"./ReactDOMSelect":577,_process:25,"fbjs/lib/warning":525,"object-assign":533,"react/lib/React":664}],577:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var LinkedValueUtils=require("./LinkedValueUtils");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var warning=require("fbjs/lib/warning");var didWarnValueLink=false;var didWarnValueDefaultValue=false;function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=false;var props=this._currentElement.props;var value=LinkedValueUtils.getValue(props);if(value!=null){updateOptions(this,Boolean(props.multiple),value)}}}function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""}var valuePropNames=["value","defaultValue"];function checkSelectPropTypes(inst,props){var owner=inst._currentElement._owner;LinkedValueUtils.checkPropTypes("select",props,owner);if(props.valueLink!==undefined&&!didWarnValueLink){process.env.NODE_ENV!=="production"?warning(false,"`valueLink` prop on `select` is deprecated; set `value` and `onChange` instead."):void 0;didWarnValueLink=true}for(var i=0;i<valuePropNames.length;i++){var propName=valuePropNames[i];if(props[propName]==null){continue}var isArray=Array.isArray(props[propName]);if(props.multiple&&!isArray){process.env.NODE_ENV!=="production"?warning(false,"The `%s` prop supplied to <select> must be an array if "+"`multiple` is true.%s",propName,getDeclarationErrorAddendum(owner)):void 0}else if(!props.multiple&&isArray){process.env.NODE_ENV!=="production"?warning(false,"The `%s` prop supplied to <select> must be a scalar "+"value if `multiple` is false.%s",propName,getDeclarationErrorAddendum(owner)):void 0}}}function updateOptions(inst,multiple,propValue){var selectedValue,i;var options=ReactDOMComponentTree.getNodeFromInstance(inst).options;if(multiple){selectedValue={};for(i=0;i<propValue.length;i++){selectedValue[""+propValue[i]]=true}for(i=0;i<options.length;i++){var selected=selectedValue.hasOwnProperty(options[i].value);if(options[i].selected!==selected){options[i].selected=selected}}}else{selectedValue=""+propValue;for(i=0;i<options.length;i++){if(options[i].value===selectedValue){options[i].selected=true;return}}if(options.length){options[0].selected=true}}}var ReactDOMSelect={getHostProps:function(inst,props){return _assign({},props,{onChange:inst._wrapperState.onChange,value:undefined})},mountWrapper:function(inst,props){if(process.env.NODE_ENV!=="production"){checkSelectPropTypes(inst,props)}var value=LinkedValueUtils.getValue(props);inst._wrapperState={pendingUpdate:false,initialValue:value!=null?value:props.defaultValue,listeners:null,onChange:_handleChange.bind(inst),wasMultiple:Boolean(props.multiple)};if(props.value!==undefined&&props.defaultValue!==undefined&&!didWarnValueDefaultValue){process.env.NODE_ENV!=="production"?warning(false,"Select elements must be either controlled or uncontrolled "+"(specify either the value prop, or the defaultValue prop, but not "+"both). Decide between using a controlled or uncontrolled select "+"element and remove one of these props. More info: "+"https://fb.me/react-controlled-components"):void 0;didWarnValueDefaultValue=true}},getSelectValueContext:function(inst){return inst._wrapperState.initialValue},postUpdateWrapper:function(inst){var props=inst._currentElement.props;inst._wrapperState.initialValue=undefined;var wasMultiple=inst._wrapperState.wasMultiple;inst._wrapperState.wasMultiple=Boolean(props.multiple);var value=LinkedValueUtils.getValue(props);if(value!=null){inst._wrapperState.pendingUpdate=false;updateOptions(inst,Boolean(props.multiple),value)}else if(wasMultiple!==Boolean(props.multiple)){if(props.defaultValue!=null){updateOptions(inst,Boolean(props.multiple),props.defaultValue)}else{updateOptions(inst,Boolean(props.multiple),props.multiple?[]:"")}}}};function _handleChange(event){var props=this._currentElement.props;var returnValue=LinkedValueUtils.executeOnChange(props,event);if(this._rootNodeID){this._wrapperState.pendingUpdate=true}ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this);return returnValue}module.exports=ReactDOMSelect}).call(this)}).call(this,require("_process"))},{"./LinkedValueUtils":558,"./ReactDOMComponentTree":568,"./ReactUpdates":612,_process:25,"fbjs/lib/warning":525,"object-assign":533}],578:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var getNodeForCharacterOffset=require("./getNodeForCharacterOffset");var getTextContentAccessor=require("./getTextContentAccessor");function isCollapsed(anchorNode,anchorOffset,focusNode,focusOffset){return anchorNode===focusNode&&anchorOffset===focusOffset}function getIEOffsets(node){var selection=document.selection;var selectedRange=selection.createRange();var selectedLength=selectedRange.text.length;var fromStart=selectedRange.duplicate();fromStart.moveToElementText(node);fromStart.setEndPoint("EndToStart",selectedRange);var startOffset=fromStart.text.length;var endOffset=startOffset+selectedLength;return{start:startOffset,end:endOffset}}function getModernOffsets(node){var selection=window.getSelection&&window.getSelection();if(!selection||selection.rangeCount===0){return null}var anchorNode=selection.anchorNode;var anchorOffset=selection.anchorOffset;var focusNode=selection.focusNode;var focusOffset=selection.focusOffset;var currentRange=selection.getRangeAt(0);try{currentRange.startContainer.nodeType;currentRange.endContainer.nodeType}catch(e){return null}var isSelectionCollapsed=isCollapsed(selection.anchorNode,selection.anchorOffset,selection.focusNode,selection.focusOffset);var rangeLength=isSelectionCollapsed?0:currentRange.toString().length;var tempRange=currentRange.cloneRange();tempRange.selectNodeContents(node);tempRange.setEnd(currentRange.startContainer,currentRange.startOffset);var isTempRangeCollapsed=isCollapsed(tempRange.startContainer,tempRange.startOffset,tempRange.endContainer,tempRange.endOffset);var start=isTempRangeCollapsed?0:tempRange.toString().length;var end=start+rangeLength;var detectionRange=document.createRange();detectionRange.setStart(anchorNode,anchorOffset);detectionRange.setEnd(focusNode,focusOffset);var isBackward=detectionRange.collapsed;return{start:isBackward?end:start,end:isBackward?start:end}}function setIEOffsets(node,offsets){var range=document.selection.createRange().duplicate();var start,end;if(offsets.end===undefined){start=offsets.start;end=start}else if(offsets.start>offsets.end){start=offsets.end;end=offsets.start}else{start=offsets.start;end=offsets.end}range.moveToElementText(node);range.moveStart("character",start);range.setEndPoint("EndToStart",range);range.moveEnd("character",end-start);range.select()}function setModernOffsets(node,offsets){if(!window.getSelection){return}var selection=window.getSelection();var length=node[getTextContentAccessor()].length;var start=Math.min(offsets.start,length);var end=offsets.end===undefined?start:Math.min(offsets.end,length);if(!selection.extend&&start>end){var temp=end;end=start;start=temp}var startMarker=getNodeForCharacterOffset(node,start);var endMarker=getNodeForCharacterOffset(node,end);if(startMarker&&endMarker){var range=document.createRange();range.setStart(startMarker.node,startMarker.offset);selection.removeAllRanges();if(start>end){selection.addRange(range);selection.extend(endMarker.node,endMarker.offset)}else{range.setEnd(endMarker.node,endMarker.offset);selection.addRange(range)}}}var useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window);var ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection},{"./getNodeForCharacterOffset":648,"./getTextContentAccessor":649,"fbjs/lib/ExecutionEnvironment":504}],579:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var DOMChildrenOperations=require("./DOMChildrenOperations");var DOMLazyTree=require("./DOMLazyTree");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var invariant=require("fbjs/lib/invariant");var validateDOMNesting=require("./validateDOMNesting");var ReactDOMTextComponent=function(text){this._currentElement=text;this._stringText=""+text;this._hostNode=null;this._hostParent=null;this._domID=0;this._mountIndex=0;this._closingComment=null;this._commentNodes=null};_assign(ReactDOMTextComponent.prototype,{mountComponent:function(transaction,hostParent,hostContainerInfo,context){if(process.env.NODE_ENV!=="production"){var parentInfo;if(hostParent!=null){parentInfo=hostParent._ancestorInfo}else if(hostContainerInfo!=null){parentInfo=hostContainerInfo._ancestorInfo}if(parentInfo){validateDOMNesting(null,this._stringText,this,parentInfo)}}var domID=hostContainerInfo._idCounter++;var openingValue=" react-text: "+domID+" ";var closingValue=" /react-text ";this._domID=domID;this._hostParent=hostParent;if(transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument;var openingComment=ownerDocument.createComment(openingValue);var closingComment=ownerDocument.createComment(closingValue);var lazyTree=DOMLazyTree(ownerDocument.createDocumentFragment());DOMLazyTree.queueChild(lazyTree,DOMLazyTree(openingComment));if(this._stringText){DOMLazyTree.queueChild(lazyTree,DOMLazyTree(ownerDocument.createTextNode(this._stringText)))}DOMLazyTree.queueChild(lazyTree,DOMLazyTree(closingComment));ReactDOMComponentTree.precacheNode(this,openingComment);this._closingComment=closingComment;return lazyTree}else{var escapedText=escapeTextContentForBrowser(this._stringText);if(transaction.renderToStaticMarkup){return escapedText}return"\x3c!--"+openingValue+"--\x3e"+escapedText+"\x3c!--"+closingValue+"--\x3e"}},receiveComponent:function(nextText,transaction){if(nextText!==this._currentElement){this._currentElement=nextText;var nextStringText=""+nextText;if(nextStringText!==this._stringText){this._stringText=nextStringText;var commentNodes=this.getHostNode();DOMChildrenOperations.replaceDelimitedText(commentNodes[0],commentNodes[1],nextStringText)}}},getHostNode:function(){var hostNode=this._commentNodes;if(hostNode){return hostNode}if(!this._closingComment){var openingComment=ReactDOMComponentTree.getNodeFromInstance(this);var node=openingComment.nextSibling;while(true){!(node!=null)?process.env.NODE_ENV!=="production"?invariant(false,"Missing closing comment for text component %s",this._domID):_prodInvariant("67",this._domID):void 0;if(node.nodeType===8&&node.nodeValue===" /react-text "){this._closingComment=node;break}node=node.nextSibling}}hostNode=[this._hostNode,this._closingComment];this._commentNodes=hostNode;return hostNode},unmountComponent:function(){this._closingComment=null;this._commentNodes=null;ReactDOMComponentTree.uncacheNode(this)}});module.exports=ReactDOMTextComponent}).call(this)}).call(this,require("_process"))},{"./DOMChildrenOperations":543,"./DOMLazyTree":544,"./ReactDOMComponentTree":568,"./escapeTextContentForBrowser":637,"./reactProdInvariant":655,"./validateDOMNesting":661,_process:25,"fbjs/lib/invariant":518,"object-assign":533}],580:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var LinkedValueUtils=require("./LinkedValueUtils");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var didWarnValueLink=false;var didWarnValDefaultVal=false;function forceUpdateIfMounted(){if(this._rootNodeID){ReactDOMTextarea.updateWrapper(this)}}var ReactDOMTextarea={getHostProps:function(inst,props){!(props.dangerouslySetInnerHTML==null)?process.env.NODE_ENV!=="production"?invariant(false,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):_prodInvariant("91"):void 0;var hostProps=_assign({},props,{value:undefined,defaultValue:undefined,children:""+inst._wrapperState.initialValue,onChange:inst._wrapperState.onChange});return hostProps},mountWrapper:function(inst,props){if(process.env.NODE_ENV!=="production"){LinkedValueUtils.checkPropTypes("textarea",props,inst._currentElement._owner);if(props.valueLink!==undefined&&!didWarnValueLink){process.env.NODE_ENV!=="production"?warning(false,"`valueLink` prop on `textarea` is deprecated; set `value` and `onChange` instead."):void 0;didWarnValueLink=true}if(props.value!==undefined&&props.defaultValue!==undefined&&!didWarnValDefaultVal){process.env.NODE_ENV!=="production"?warning(false,"Textarea elements must be either controlled or uncontrolled "+"(specify either the value prop, or the defaultValue prop, but not "+"both). Decide between using a controlled or uncontrolled textarea "+"and remove one of these props. More info: "+"https://fb.me/react-controlled-components"):void 0;didWarnValDefaultVal=true}}var value=LinkedValueUtils.getValue(props);var initialValue=value;if(value==null){var defaultValue=props.defaultValue;var children=props.children;if(children!=null){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(false,"Use the `defaultValue` or `value` props instead of setting "+"children on <textarea>."):void 0}!(defaultValue==null)?process.env.NODE_ENV!=="production"?invariant(false,"If you supply `defaultValue` on a <textarea>, do not pass children."):_prodInvariant("92"):void 0;if(Array.isArray(children)){!(children.length<=1)?process.env.NODE_ENV!=="production"?invariant(false,"<textarea> can only have at most one child."):_prodInvariant("93"):void 0;children=children[0]}defaultValue=""+children}if(defaultValue==null){defaultValue=""}initialValue=defaultValue}inst._wrapperState={initialValue:""+initialValue,listeners:null,onChange:_handleChange.bind(inst)}},updateWrapper:function(inst){var props=inst._currentElement.props;var node=ReactDOMComponentTree.getNodeFromInstance(inst);var value=LinkedValueUtils.getValue(props);if(value!=null){var newValue=""+value;if(newValue!==node.value){node.value=newValue}if(props.defaultValue==null){node.defaultValue=newValue}}if(props.defaultValue!=null){node.defaultValue=props.defaultValue}},postMountWrapper:function(inst){var node=ReactDOMComponentTree.getNodeFromInstance(inst);var textContent=node.textContent;if(textContent===inst._wrapperState.initialValue){node.value=textContent}}};function _handleChange(event){var props=this._currentElement.props;var returnValue=LinkedValueUtils.executeOnChange(props,event);ReactUpdates.asap(forceUpdateIfMounted,this);return returnValue}module.exports=ReactDOMTextarea}).call(this)}).call(this,require("_process"))},{"./LinkedValueUtils":558,"./ReactDOMComponentTree":568,"./ReactUpdates":612,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525,"object-assign":533}],581:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function getLowestCommonAncestor(instA,instB){!("_hostNode"in instA)?process.env.NODE_ENV!=="production"?invariant(false,"getNodeFromInstance: Invalid argument."):_prodInvariant("33"):void 0;!("_hostNode"in instB)?process.env.NODE_ENV!=="production"?invariant(false,"getNodeFromInstance: Invalid argument."):_prodInvariant("33"):void 0;var depthA=0;for(var tempA=instA;tempA;tempA=tempA._hostParent){depthA++}var depthB=0;for(var tempB=instB;tempB;tempB=tempB._hostParent){depthB++}while(depthA-depthB>0){instA=instA._hostParent;depthA--}while(depthB-depthA>0){instB=instB._hostParent;depthB--}var depth=depthA;while(depth--){if(instA===instB){return instA}instA=instA._hostParent;instB=instB._hostParent}return null}function isAncestor(instA,instB){!("_hostNode"in instA)?process.env.NODE_ENV!=="production"?invariant(false,"isAncestor: Invalid argument."):_prodInvariant("35"):void 0;!("_hostNode"in instB)?process.env.NODE_ENV!=="production"?invariant(false,"isAncestor: Invalid argument."):_prodInvariant("35"):void 0;while(instB){if(instB===instA){return true}instB=instB._hostParent}return false}function getParentInstance(inst){!("_hostNode"in inst)?process.env.NODE_ENV!=="production"?invariant(false,"getParentInstance: Invalid argument."):_prodInvariant("36"):void 0;return inst._hostParent}function traverseTwoPhase(inst,fn,arg){var path=[];while(inst){path.push(inst);inst=inst._hostParent}var i;for(i=path.length;i-- >0;){fn(path[i],"captured",arg)}for(i=0;i<path.length;i++){fn(path[i],"bubbled",arg)}}function traverseEnterLeave(from,to,fn,argFrom,argTo){var common=from&&to?getLowestCommonAncestor(from,to):null;var pathFrom=[];while(from&&from!==common){pathFrom.push(from);from=from._hostParent}var pathTo=[];while(to&&to!==common){pathTo.push(to);to=to._hostParent}var i;for(i=0;i<pathFrom.length;i++){fn(pathFrom[i],"bubbled",argFrom)}for(i=pathTo.length;i-- >0;){fn(pathTo[i],"captured",argTo)}}module.exports={isAncestor:isAncestor,getLowestCommonAncestor:getLowestCommonAncestor,getParentInstance:getParentInstance,traverseTwoPhase:traverseTwoPhase,traverseEnterLeave:traverseEnterLeave}}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],582:[function(require,module,exports){(function(process){(function(){"use strict";var DOMProperty=require("./DOMProperty");var EventPluginRegistry=require("./EventPluginRegistry");var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var warning=require("fbjs/lib/warning");if(process.env.NODE_ENV!=="production"){var reactProps={children:true,dangerouslySetInnerHTML:true,key:true,ref:true,autoFocus:true,defaultValue:true,valueLink:true,defaultChecked:true,checkedLink:true,innerHTML:true,suppressContentEditableWarning:true,onFocusIn:true,onFocusOut:true};var warnedProperties={};var validateProperty=function(tagName,name,debugID){if(DOMProperty.properties.hasOwnProperty(name)||DOMProperty.isCustomAttribute(name)){return true}if(reactProps.hasOwnProperty(name)&&reactProps[name]||warnedProperties.hasOwnProperty(name)&&warnedProperties[name]){return true}if(EventPluginRegistry.registrationNameModules.hasOwnProperty(name)){return true}warnedProperties[name]=true;var lowerCasedName=name.toLowerCase();var standardName=DOMProperty.isCustomAttribute(lowerCasedName)?lowerCasedName:DOMProperty.getPossibleStandardName.hasOwnProperty(lowerCasedName)?DOMProperty.getPossibleStandardName[lowerCasedName]:null;var registrationName=EventPluginRegistry.possibleRegistrationNames.hasOwnProperty(lowerCasedName)?EventPluginRegistry.possibleRegistrationNames[lowerCasedName]:null;if(standardName!=null){process.env.NODE_ENV!=="production"?warning(false,"Unknown DOM property %s. Did you mean %s?%s",name,standardName,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;return true}else if(registrationName!=null){process.env.NODE_ENV!=="production"?warning(false,"Unknown event handler property %s. Did you mean `%s`?%s",name,registrationName,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0;return true}else{return false}}}var warnUnknownProperties=function(debugID,element){var unknownProps=[];for(var key in element.props){var isValid=validateProperty(element.type,key,debugID);if(!isValid){unknownProps.push(key)}}var unknownPropString=unknownProps.map(function(prop){return"`"+prop+"`"}).join(", ");if(unknownProps.length===1){process.env.NODE_ENV!=="production"?warning(false,"Unknown prop %s on <%s> tag. Remove this prop from the element. "+"For details, see https://fb.me/react-unknown-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}else if(unknownProps.length>1){process.env.NODE_ENV!=="production"?warning(false,"Unknown props %s on <%s> tag. Remove these props from the element. "+"For details, see https://fb.me/react-unknown-prop%s",unknownPropString,element.type,ReactComponentTreeHook.getStackAddendumByID(debugID)):void 0}};function handleElement(debugID,element){if(element==null||typeof element.type!=="string"){return}if(element.type.indexOf("-")>=0||element.props.is){return}warnUnknownProperties(debugID,element)}var ReactDOMUnknownPropertyHook={onBeforeMountComponent:function(debugID,element){handleElement(debugID,element)},onBeforeUpdateComponent:function(debugID,element){handleElement(debugID,element)}};module.exports=ReactDOMUnknownPropertyHook}).call(this)}).call(this,require("_process"))},{"./DOMProperty":546,"./EventPluginRegistry":552,_process:25,"fbjs/lib/warning":525,"react/lib/ReactComponentTreeHook":668}],583:[function(require,module,exports){(function(process){(function(){"use strict";var ReactInvalidSetStateWarningHook=require("./ReactInvalidSetStateWarningHook");var ReactHostOperationHistoryHook=require("./ReactHostOperationHistoryHook");var ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var performanceNow=require("fbjs/lib/performanceNow");var warning=require("fbjs/lib/warning");var hooks=[];var didHookThrowForEvent={};function callHook(event,fn,context,arg1,arg2,arg3,arg4,arg5){try{fn.call(context,arg1,arg2,arg3,arg4,arg5)}catch(e){process.env.NODE_ENV!=="production"?warning(didHookThrowForEvent[event],"Exception thrown by hook while handling %s: %s",event,e+"\n"+e.stack):void 0;didHookThrowForEvent[event]=true}}function emitEvent(event,arg1,arg2,arg3,arg4,arg5){for(var i=0;i<hooks.length;i++){var hook=hooks[i];var fn=hook[event];if(fn){callHook(event,fn,hook,arg1,arg2,arg3,arg4,arg5)}}}var isProfiling=false;var flushHistory=[];var lifeCycleTimerStack=[];var currentFlushNesting=0;var currentFlushMeasurements=[];var currentFlushStartTime=0;var currentTimerDebugID=null;var currentTimerStartTime=0;var currentTimerNestedFlushDuration=0;var currentTimerType=null;var lifeCycleTimerHasWarned=false;function clearHistory(){ReactComponentTreeHook.purgeUnmountedComponents();ReactHostOperationHistoryHook.clearHistory()}function getTreeSnapshot(registeredIDs){return registeredIDs.reduce(function(tree,id){var ownerID=ReactComponentTreeHook.getOwnerID(id);var parentID=ReactComponentTreeHook.getParentID(id);tree[id]={displayName:ReactComponentTreeHook.getDisplayName(id),text:ReactComponentTreeHook.getText(id),updateCount:ReactComponentTreeHook.getUpdateCount(id),childIDs:ReactComponentTreeHook.getChildIDs(id),ownerID:ownerID||parentID&&ReactComponentTreeHook.getOwnerID(parentID)||0,parentID:parentID};return tree},{})}function resetMeasurements(){var previousStartTime=currentFlushStartTime;var previousMeasurements=currentFlushMeasurements;var previousOperations=ReactHostOperationHistoryHook.getHistory();if(currentFlushNesting===0){currentFlushStartTime=0;currentFlushMeasurements=[];clearHistory();return}if(previousMeasurements.length||previousOperations.length){var registeredIDs=ReactComponentTreeHook.getRegisteredIDs();flushHistory.push({duration:performanceNow()-previousStartTime,measurements:previousMeasurements||[],operations:previousOperations||[],treeSnapshot:getTreeSnapshot(registeredIDs)})}clearHistory();currentFlushStartTime=performanceNow();currentFlushMeasurements=[]}function checkDebugID(debugID){var allowRoot=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(allowRoot&&debugID===0){return}if(!debugID){process.env.NODE_ENV!=="production"?warning(false,"ReactDebugTool: debugID may not be empty."):void 0}}function beginLifeCycleTimer(debugID,timerType){if(currentFlushNesting===0){return}if(currentTimerType&&!lifeCycleTimerHasWarned){process.env.NODE_ENV!=="production"?warning(false,"There is an internal error in the React performance measurement code. "+"Did not expect %s timer to start while %s timer is still in "+"progress for %s instance.",timerType,currentTimerType||"no",debugID===currentTimerDebugID?"the same":"another"):void 0;lifeCycleTimerHasWarned=true}currentTimerStartTime=performanceNow();currentTimerNestedFlushDuration=0;currentTimerDebugID=debugID;currentTimerType=timerType}function endLifeCycleTimer(debugID,timerType){if(currentFlushNesting===0){return}if(currentTimerType!==timerType&&!lifeCycleTimerHasWarned){process.env.NODE_ENV!=="production"?warning(false,"There is an internal error in the React performance measurement code. "+"We did not expect %s timer to stop while %s timer is still in "+"progress for %s instance. Please report this as a bug in React.",timerType,currentTimerType||"no",debugID===currentTimerDebugID?"the same":"another"):void 0;lifeCycleTimerHasWarned=true}if(isProfiling){currentFlushMeasurements.push({timerType:timerType,instanceID:debugID,duration:performanceNow()-currentTimerStartTime-currentTimerNestedFlushDuration})}currentTimerStartTime=0;currentTimerNestedFlushDuration=0;currentTimerDebugID=null;currentTimerType=null}function pauseCurrentLifeCycleTimer(){var currentTimer={startTime:currentTimerStartTime,nestedFlushStartTime:performanceNow(),debugID:currentTimerDebugID,timerType:currentTimerType};lifeCycleTimerStack.push(currentTimer);currentTimerStartTime=0;currentTimerNestedFlushDuration=0;currentTimerDebugID=null;currentTimerType=null}function resumeCurrentLifeCycleTimer(){var _lifeCycleTimerStack$=lifeCycleTimerStack.pop(),startTime=_lifeCycleTimerStack$.startTime,nestedFlushStartTime=_lifeCycleTimerStack$.nestedFlushStartTime,debugID=_lifeCycleTimerStack$.debugID,timerType=_lifeCycleTimerStack$.timerType;var nestedFlushDuration=performanceNow()-nestedFlushStartTime;currentTimerStartTime=startTime;currentTimerNestedFlushDuration+=nestedFlushDuration;currentTimerDebugID=debugID;currentTimerType=timerType}var lastMarkTimeStamp=0;var canUsePerformanceMeasure=typeof performance!=="undefined"&&typeof performance.mark==="function"&&typeof performance.clearMarks==="function"&&typeof performance.measure==="function"&&typeof performance.clearMeasures==="function";function shouldMark(debugID){if(!isProfiling||!canUsePerformanceMeasure){return false}var element=ReactComponentTreeHook.getElement(debugID);if(element==null||typeof element!=="object"){return false}var isHostElement=typeof element.type==="string";if(isHostElement){return false}return true}function markBegin(debugID,markType){if(!shouldMark(debugID)){return}var markName=debugID+"::"+markType;lastMarkTimeStamp=performanceNow();performance.mark(markName)}function markEnd(debugID,markType){if(!shouldMark(debugID)){return}var markName=debugID+"::"+markType;var displayName=ReactComponentTreeHook.getDisplayName(debugID)||"Unknown";var timeStamp=performanceNow();if(timeStamp-lastMarkTimeStamp>.1){var measurementName=displayName+" ["+markType+"]";performance.measure(measurementName,markName)}performance.clearMarks(markName);performance.clearMeasures(measurementName)}var ReactDebugTool={addHook:function(hook){hooks.push(hook)},removeHook:function(hook){for(var i=0;i<hooks.length;i++){if(hooks[i]===hook){hooks.splice(i,1);i--}}},isProfiling:function(){return isProfiling},beginProfiling:function(){if(isProfiling){return}isProfiling=true;flushHistory.length=0;resetMeasurements();ReactDebugTool.addHook(ReactHostOperationHistoryHook)},endProfiling:function(){if(!isProfiling){return}isProfiling=false;resetMeasurements();ReactDebugTool.removeHook(ReactHostOperationHistoryHook)},getFlushHistory:function(){return flushHistory},onBeginFlush:function(){currentFlushNesting++;resetMeasurements();pauseCurrentLifeCycleTimer();emitEvent("onBeginFlush")},onEndFlush:function(){resetMeasurements();currentFlushNesting--;resumeCurrentLifeCycleTimer();emitEvent("onEndFlush")},onBeginLifeCycleTimer:function(debugID,timerType){checkDebugID(debugID);emitEvent("onBeginLifeCycleTimer",debugID,timerType);markBegin(debugID,timerType);beginLifeCycleTimer(debugID,timerType)},onEndLifeCycleTimer:function(debugID,timerType){checkDebugID(debugID);endLifeCycleTimer(debugID,timerType);markEnd(debugID,timerType);emitEvent("onEndLifeCycleTimer",debugID,timerType)},onBeginProcessingChildContext:function(){emitEvent("onBeginProcessingChildContext")},onEndProcessingChildContext:function(){emitEvent("onEndProcessingChildContext")},onHostOperation:function(operation){checkDebugID(operation.instanceID);emitEvent("onHostOperation",operation)},onSetState:function(){emitEvent("onSetState")},onSetChildren:function(debugID,childDebugIDs){checkDebugID(debugID);childDebugIDs.forEach(checkDebugID);emitEvent("onSetChildren",debugID,childDebugIDs)},onBeforeMountComponent:function(debugID,element,parentDebugID){checkDebugID(debugID);checkDebugID(parentDebugID,true);emitEvent("onBeforeMountComponent",debugID,element,parentDebugID);markBegin(debugID,"mount")},onMountComponent:function(debugID){checkDebugID(debugID);markEnd(debugID,"mount");emitEvent("onMountComponent",debugID)},onBeforeUpdateComponent:function(debugID,element){checkDebugID(debugID);emitEvent("onBeforeUpdateComponent",debugID,element);markBegin(debugID,"update")},onUpdateComponent:function(debugID){checkDebugID(debugID);markEnd(debugID,"update");emitEvent("onUpdateComponent",debugID)},onBeforeUnmountComponent:function(debugID){checkDebugID(debugID);emitEvent("onBeforeUnmountComponent",debugID);markBegin(debugID,"unmount")},onUnmountComponent:function(debugID){checkDebugID(debugID);markEnd(debugID,"unmount");emitEvent("onUnmountComponent",debugID)},onTestEvent:function(){emitEvent("onTestEvent")}};ReactDebugTool.addDevtool=ReactDebugTool.addHook;ReactDebugTool.removeDevtool=ReactDebugTool.removeHook;ReactDebugTool.addHook(ReactInvalidSetStateWarningHook);ReactDebugTool.addHook(ReactComponentTreeHook);var url=ExecutionEnvironment.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(url)){ReactDebugTool.beginProfiling()}module.exports=ReactDebugTool}).call(this)}).call(this,require("_process"))},{"./ReactHostOperationHistoryHook":593,"./ReactInvalidSetStateWarningHook":598,_process:25,"fbjs/lib/ExecutionEnvironment":504,"fbjs/lib/performanceNow":523,"fbjs/lib/warning":525,"react/lib/ReactComponentTreeHook":668}],584:[function(require,module,exports){"use strict";var _assign=require("object-assign");var ReactUpdates=require("./ReactUpdates");var Transaction=require("./Transaction");var emptyFunction=require("fbjs/lib/emptyFunction");var RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=false}};var FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)};var TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}_assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction;var ReactDefaultBatchingStrategy={isBatchingUpdates:false,batchedUpdates:function(callback,a,b,c,d,e){var alreadyBatchingUpdates=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=true;if(alreadyBatchingUpdates){return callback(a,b,c,d,e)}else{return transaction.perform(callback,null,a,b,c,d,e)}}};module.exports=ReactDefaultBatchingStrategy},{"./ReactUpdates":612,"./Transaction":630,"fbjs/lib/emptyFunction":510,"object-assign":533}],585:[function(require,module,exports){"use strict";var ARIADOMPropertyConfig=require("./ARIADOMPropertyConfig");var BeforeInputEventPlugin=require("./BeforeInputEventPlugin");var ChangeEventPlugin=require("./ChangeEventPlugin");var DefaultEventPluginOrder=require("./DefaultEventPluginOrder");var EnterLeaveEventPlugin=require("./EnterLeaveEventPlugin");var HTMLDOMPropertyConfig=require("./HTMLDOMPropertyConfig");var ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment");var ReactDOMComponent=require("./ReactDOMComponent");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMEmptyComponent=require("./ReactDOMEmptyComponent");var ReactDOMTreeTraversal=require("./ReactDOMTreeTraversal");var ReactDOMTextComponent=require("./ReactDOMTextComponent");var ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy");var ReactEventListener=require("./ReactEventListener");var ReactInjection=require("./ReactInjection");var ReactReconcileTransaction=require("./ReactReconcileTransaction");var SVGDOMPropertyConfig=require("./SVGDOMPropertyConfig");var SelectEventPlugin=require("./SelectEventPlugin");var SimpleEventPlugin=require("./SimpleEventPlugin");var alreadyInjected=false;function inject(){if(alreadyInjected){return}alreadyInjected=true;ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener);ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder);ReactInjection.EventPluginUtils.injectComponentTree(ReactDOMComponentTree);ReactInjection.EventPluginUtils.injectTreeTraversal(ReactDOMTreeTraversal);ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin});ReactInjection.HostComponent.injectGenericComponentClass(ReactDOMComponent);ReactInjection.HostComponent.injectTextComponentClass(ReactDOMTextComponent);ReactInjection.DOMProperty.injectDOMPropertyConfig(ARIADOMPropertyConfig);ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig);ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig);ReactInjection.EmptyComponent.injectEmptyComponentFactory(function(instantiate){return new ReactDOMEmptyComponent(instantiate)});ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction);ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy);ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment)}module.exports={inject:inject}},{"./ARIADOMPropertyConfig":536,"./BeforeInputEventPlugin":538,"./ChangeEventPlugin":542,"./DefaultEventPluginOrder":549,"./EnterLeaveEventPlugin":550,"./HTMLDOMPropertyConfig":556,"./ReactComponentBrowserEnvironment":562,"./ReactDOMComponent":566,"./ReactDOMComponentTree":568,"./ReactDOMEmptyComponent":570,"./ReactDOMTextComponent":579,"./ReactDOMTreeTraversal":581,"./ReactDefaultBatchingStrategy":584,"./ReactEventListener":590,"./ReactInjection":594,"./ReactReconcileTransaction":606,"./SVGDOMPropertyConfig":614,"./SelectEventPlugin":615,"./SimpleEventPlugin":616}],586:[function(require,module,exports){"use strict";var REACT_ELEMENT_TYPE=typeof Symbol==="function"&&Symbol["for"]&&Symbol["for"]("react.element")||60103;module.exports=REACT_ELEMENT_TYPE},{}],587:[function(require,module,exports){"use strict";var emptyComponentFactory;var ReactEmptyComponentInjection={injectEmptyComponentFactory:function(factory){emptyComponentFactory=factory}};var ReactEmptyComponent={create:function(instantiate){return emptyComponentFactory(instantiate)}};ReactEmptyComponent.injection=ReactEmptyComponentInjection;module.exports=ReactEmptyComponent},{}],588:[function(require,module,exports){(function(process){(function(){"use strict";var caughtError=null;function invokeGuardedCallback(name,func,a){try{func(a)}catch(x){if(caughtError===null){caughtError=x}}}var ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var error=caughtError;caughtError=null;throw error}}};if(process.env.NODE_ENV!=="production"){if(typeof window!=="undefined"&&typeof window.dispatchEvent==="function"&&typeof document!=="undefined"&&typeof document.createEvent==="function"){var fakeNode=document.createElement("react");ReactErrorUtils.invokeGuardedCallback=function(name,func,a){var boundFunc=func.bind(null,a);var evtType="react-"+name;fakeNode.addEventListener(evtType,boundFunc,false);var evt=document.createEvent("Event");evt.initEvent(evtType,false,false);fakeNode.dispatchEvent(evt);fakeNode.removeEventListener(evtType,boundFunc,false)}}}module.exports=ReactErrorUtils}).call(this)}).call(this,require("_process"))},{_process:25}],589:[function(require,module,exports){"use strict";var EventPluginHub=require("./EventPluginHub");function runEventQueueInBatch(events){EventPluginHub.enqueueEvents(events);EventPluginHub.processEventQueue(false)}var ReactEventEmitterMixin={handleTopLevel:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var events=EventPluginHub.extractEvents(topLevelType,targetInst,nativeEvent,nativeEventTarget);runEventQueueInBatch(events)}};module.exports=ReactEventEmitterMixin},{"./EventPluginHub":551}],590:[function(require,module,exports){"use strict";var _assign=require("object-assign");var EventListener=require("fbjs/lib/EventListener");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var PooledClass=require("./PooledClass");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactUpdates=require("./ReactUpdates");var getEventTarget=require("./getEventTarget");var getUnboundedScrollPosition=require("fbjs/lib/getUnboundedScrollPosition");function findParent(inst){while(inst._hostParent){inst=inst._hostParent}var rootNode=ReactDOMComponentTree.getNodeFromInstance(inst);var container=rootNode.parentNode;return ReactDOMComponentTree.getClosestInstanceFromNode(container)}function TopLevelCallbackBookKeeping(topLevelType,nativeEvent){this.topLevelType=topLevelType;this.nativeEvent=nativeEvent;this.ancestors=[]}_assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null;this.nativeEvent=null;this.ancestors.length=0}});PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);function handleTopLevelImpl(bookKeeping){var nativeEventTarget=getEventTarget(bookKeeping.nativeEvent);var targetInst=ReactDOMComponentTree.getClosestInstanceFromNode(nativeEventTarget);var ancestor=targetInst;do{bookKeeping.ancestors.push(ancestor);ancestor=ancestor&&findParent(ancestor)}while(ancestor);for(var i=0;i<bookKeeping.ancestors.length;i++){targetInst=bookKeeping.ancestors[i];ReactEventListener._handleTopLevel(bookKeeping.topLevelType,targetInst,bookKeeping.nativeEvent,getEventTarget(bookKeeping.nativeEvent))}}function scrollValueMonitor(cb){var scrollPosition=getUnboundedScrollPosition(window);cb(scrollPosition)}var ReactEventListener={_enabled:true,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(handleTopLevel){ReactEventListener._handleTopLevel=handleTopLevel},setEnabled:function(enabled){ReactEventListener._enabled=!!enabled},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(topLevelType,handlerBaseName,element){if(!element){return null}return EventListener.listen(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType))},trapCapturedEvent:function(topLevelType,handlerBaseName,element){if(!element){return null}return EventListener.capture(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType))},monitorScrollValue:function(refresh){var callback=scrollValueMonitor.bind(null,refresh);EventListener.listen(window,"scroll",callback)},dispatchEvent:function(topLevelType,nativeEvent){if(!ReactEventListener._enabled){return}var bookKeeping=TopLevelCallbackBookKeeping.getPooled(topLevelType,nativeEvent);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,bookKeeping)}finally{TopLevelCallbackBookKeeping.release(bookKeeping)}}};module.exports=ReactEventListener},{"./PooledClass":559,"./ReactDOMComponentTree":568,"./ReactUpdates":612,"./getEventTarget":644,"fbjs/lib/EventListener":503,"fbjs/lib/ExecutionEnvironment":504,"fbjs/lib/getUnboundedScrollPosition":515,"object-assign":533}],591:[function(require,module,exports){"use strict";var ReactFeatureFlags={logTopLevelRenders:false};module.exports=ReactFeatureFlags},{}],592:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var genericComponentClass=null;var textComponentClass=null;var ReactHostComponentInjection={injectGenericComponentClass:function(componentClass){genericComponentClass=componentClass},injectTextComponentClass:function(componentClass){textComponentClass=componentClass}};function createInternalComponent(element){!genericComponentClass?process.env.NODE_ENV!=="production"?invariant(false,"There is no registered component for the tag %s",element.type):_prodInvariant("111",element.type):void 0;return new genericComponentClass(element)}function createInstanceForText(text){return new textComponentClass(text)}function isTextComponent(component){return component instanceof textComponentClass}var ReactHostComponent={createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactHostComponentInjection};module.exports=ReactHostComponent}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],593:[function(require,module,exports){"use strict";var history=[];var ReactHostOperationHistoryHook={onHostOperation:function(operation){history.push(operation)},clearHistory:function(){if(ReactHostOperationHistoryHook._preventClearing){return}history=[]},getHistory:function(){return history}};module.exports=ReactHostOperationHistoryHook},{}],594:[function(require,module,exports){"use strict";var DOMProperty=require("./DOMProperty");var EventPluginHub=require("./EventPluginHub");var EventPluginUtils=require("./EventPluginUtils");var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactEmptyComponent=require("./ReactEmptyComponent");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactHostComponent=require("./ReactHostComponent");var ReactUpdates=require("./ReactUpdates");var ReactInjection={Component:ReactComponentEnvironment.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventPluginUtils:EventPluginUtils.injection,EventEmitter:ReactBrowserEventEmitter.injection,HostComponent:ReactHostComponent.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection},{"./DOMProperty":546,"./EventPluginHub":551,"./EventPluginUtils":553,"./ReactBrowserEventEmitter":560,"./ReactComponentEnvironment":563,"./ReactEmptyComponent":587,"./ReactHostComponent":592,"./ReactUpdates":612}],595:[function(require,module,exports){"use strict";var ReactDOMSelection=require("./ReactDOMSelection");var containsNode=require("fbjs/lib/containsNode");var focusNode=require("fbjs/lib/focusNode");var getActiveElement=require("fbjs/lib/getActiveElement");function isInDocument(node){return containsNode(document.documentElement,node)}var ReactInputSelection={hasSelectionCapabilities:function(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName&&(nodeName==="input"&&elem.type==="text"||nodeName==="textarea"||elem.contentEditable==="true")},getSelectionInformation:function(){var focusedElem=getActiveElement();return{focusedElem:focusedElem,selectionRange:ReactInputSelection.hasSelectionCapabilities(focusedElem)?ReactInputSelection.getSelection(focusedElem):null}},restoreSelection:function(priorSelectionInformation){var curFocusedElem=getActiveElement();var priorFocusedElem=priorSelectionInformation.focusedElem;var priorSelectionRange=priorSelectionInformation.selectionRange;if(curFocusedElem!==priorFocusedElem&&isInDocument(priorFocusedElem)){if(ReactInputSelection.hasSelectionCapabilities(priorFocusedElem)){ReactInputSelection.setSelection(priorFocusedElem,priorSelectionRange)}focusNode(priorFocusedElem)}},getSelection:function(input){var selection;if("selectionStart"in input){selection={start:input.selectionStart,end:input.selectionEnd}}else if(document.selection&&input.nodeName&&input.nodeName.toLowerCase()==="input"){var range=document.selection.createRange();if(range.parentElement()===input){selection={start:-range.moveStart("character",-input.value.length),end:-range.moveEnd("character",-input.value.length)}}}else{selection=ReactDOMSelection.getOffsets(input)}return selection||{start:0,end:0}},setSelection:function(input,offsets){var start=offsets.start;var end=offsets.end;if(end===undefined){end=start}if("selectionStart"in input){input.selectionStart=start;input.selectionEnd=Math.min(end,input.value.length)}else if(document.selection&&input.nodeName&&input.nodeName.toLowerCase()==="input"){var range=input.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",end-start);range.select()}else{ReactDOMSelection.setOffsets(input,offsets)}}};module.exports=ReactInputSelection},{"./ReactDOMSelection":578,"fbjs/lib/containsNode":507,"fbjs/lib/focusNode":512,"fbjs/lib/getActiveElement":513}],596:[function(require,module,exports){"use strict";var ReactInstanceMap={remove:function(key){key._reactInternalInstance=undefined},get:function(key){return key._reactInternalInstance},has:function(key){return key._reactInternalInstance!==undefined},set:function(key,value){key._reactInternalInstance=value}};module.exports=ReactInstanceMap},{}],597:[function(require,module,exports){(function(process){(function(){"use strict";var debugTool=null;if(process.env.NODE_ENV!=="production"){var ReactDebugTool=require("./ReactDebugTool");debugTool=ReactDebugTool}module.exports={debugTool:debugTool}}).call(this)}).call(this,require("_process"))},{"./ReactDebugTool":583,_process:25}],598:[function(require,module,exports){(function(process){(function(){"use strict";var warning=require("fbjs/lib/warning");if(process.env.NODE_ENV!=="production"){var processingChildContext=false;var warnInvalidSetState=function(){process.env.NODE_ENV!=="production"?warning(!processingChildContext,"setState(...): Cannot call setState() inside getChildContext()"):void 0}}var ReactInvalidSetStateWarningHook={onBeginProcessingChildContext:function(){processingChildContext=true},onEndProcessingChildContext:function(){processingChildContext=false},onSetState:function(){warnInvalidSetState()}};module.exports=ReactInvalidSetStateWarningHook}).call(this)}).call(this,require("_process"))},{_process:25,"fbjs/lib/warning":525}],599:[function(require,module,exports){"use strict";var adler32=require("./adler32");var TAG_END=/\/?>/;var COMMENT_START=/^<\!\-\-/;var ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(markup){var checksum=adler32(markup);if(COMMENT_START.test(markup)){return markup}else{return markup.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+checksum+'"$&')}},canReuseMarkup:function(markup,element){var existingChecksum=element.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);existingChecksum=existingChecksum&&parseInt(existingChecksum,10);var markupChecksum=adler32(markup);return markupChecksum===existingChecksum}};module.exports=ReactMarkupChecksum},{"./adler32":633}],600:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var DOMLazyTree=require("./DOMLazyTree");var DOMProperty=require("./DOMProperty");var React=require("react/lib/React");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactDOMContainerInfo=require("./ReactDOMContainerInfo");var ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags");var ReactFeatureFlags=require("./ReactFeatureFlags");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactMarkupChecksum=require("./ReactMarkupChecksum");var ReactReconciler=require("./ReactReconciler");var ReactUpdateQueue=require("./ReactUpdateQueue");var ReactUpdates=require("./ReactUpdates");var emptyObject=require("fbjs/lib/emptyObject");var instantiateReactComponent=require("./instantiateReactComponent");var invariant=require("fbjs/lib/invariant");var setInnerHTML=require("./setInnerHTML");var shouldUpdateReactComponent=require("./shouldUpdateReactComponent");var warning=require("fbjs/lib/warning");var ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME;var ROOT_ATTR_NAME=DOMProperty.ROOT_ATTRIBUTE_NAME;var ELEMENT_NODE_TYPE=1;var DOC_NODE_TYPE=9;var DOCUMENT_FRAGMENT_NODE_TYPE=11;var instancesByReactRootID={};function firstDifferenceIndex(string1,string2){var minLen=Math.min(string1.length,string2.length);for(var i=0;i<minLen;i++){if(string1.charAt(i)!==string2.charAt(i)){return i}}return string1.length===string2.length?-1:minLen}function getReactRootElementInContainer(container){if(!container){return null}if(container.nodeType===DOC_NODE_TYPE){return container.documentElement}else{return container.firstChild}}function internalGetID(node){return node.getAttribute&&node.getAttribute(ATTR_NAME)||""}function mountComponentIntoNode(wrapperInstance,container,transaction,shouldReuseMarkup,context){var markerName;if(ReactFeatureFlags.logTopLevelRenders){var wrappedElement=wrapperInstance._currentElement.props.child;var type=wrappedElement.type;markerName="React mount: "+(typeof type==="string"?type:type.displayName||type.name);console.time(markerName)}var markup=ReactReconciler.mountComponent(wrapperInstance,transaction,null,ReactDOMContainerInfo(wrapperInstance,container),context,0);if(markerName){console.timeEnd(markerName)}wrapperInstance._renderedComponent._topLevelWrapper=wrapperInstance;ReactMount._mountImageIntoNode(markup,container,wrapperInstance,shouldReuseMarkup,transaction)}function batchedMountComponentIntoNode(componentInstance,container,shouldReuseMarkup,context){var transaction=ReactUpdates.ReactReconcileTransaction.getPooled(!shouldReuseMarkup&&ReactDOMFeatureFlags.useCreateElement);transaction.perform(mountComponentIntoNode,null,componentInstance,container,transaction,shouldReuseMarkup,context);ReactUpdates.ReactReconcileTransaction.release(transaction)}function unmountComponentFromNode(instance,container,safely){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onBeginFlush()}ReactReconciler.unmountComponent(instance,safely);if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onEndFlush()}if(container.nodeType===DOC_NODE_TYPE){container=container.documentElement}while(container.lastChild){container.removeChild(container.lastChild)}}function hasNonRootReactChild(container){var rootEl=getReactRootElementInContainer(container);if(rootEl){var inst=ReactDOMComponentTree.getInstanceFromNode(rootEl);return!!(inst&&inst._hostParent)}}function nodeIsRenderedByOtherInstance(container){var rootEl=getReactRootElementInContainer(container);return!!(rootEl&&isReactNode(rootEl)&&!ReactDOMComponentTree.getInstanceFromNode(rootEl))}function isValidContainer(node){return!!(node&&(node.nodeType===ELEMENT_NODE_TYPE||node.nodeType===DOC_NODE_TYPE||node.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE))}function isReactNode(node){return isValidContainer(node)&&(node.hasAttribute(ROOT_ATTR_NAME)||node.hasAttribute(ATTR_NAME))}function getHostRootInstanceInContainer(container){var rootEl=getReactRootElementInContainer(container);var prevHostInstance=rootEl&&ReactDOMComponentTree.getInstanceFromNode(rootEl);return prevHostInstance&&!prevHostInstance._hostParent?prevHostInstance:null}function getTopLevelWrapperInContainer(container){var root=getHostRootInstanceInContainer(container);return root?root._hostContainerInfo._topLevelWrapper:null}var topLevelRootCounter=1;var TopLevelWrapper=function(){this.rootID=topLevelRootCounter++};TopLevelWrapper.prototype.isReactComponent={};if(process.env.NODE_ENV!=="production"){TopLevelWrapper.displayName="TopLevelWrapper"}TopLevelWrapper.prototype.render=function(){return this.props.child};TopLevelWrapper.isReactTopLevelWrapper=true;var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(container,renderCallback){renderCallback()},_updateRootComponent:function(prevComponent,nextElement,nextContext,container,callback){ReactMount.scrollMonitor(container,function(){ReactUpdateQueue.enqueueElementInternal(prevComponent,nextElement,nextContext);if(callback){ReactUpdateQueue.enqueueCallbackInternal(prevComponent,callback)}});return prevComponent},_renderNewRootComponent:function(nextElement,container,shouldReuseMarkup,context){process.env.NODE_ENV!=="production"?warning(ReactCurrentOwner.current==null,"_renderNewRootComponent(): Render methods should be a pure function "+"of props and state; triggering nested component updates from "+"render is not allowed. If necessary, trigger nested updates in "+"componentDidUpdate. Check the render method of %s.",ReactCurrentOwner.current&&ReactCurrentOwner.current.getName()||"ReactCompositeComponent"):void 0;!isValidContainer(container)?process.env.NODE_ENV!=="production"?invariant(false,"_registerComponent(...): Target container is not a DOM element."):_prodInvariant("37"):void 0;ReactBrowserEventEmitter.ensureScrollValueMonitoring();var componentInstance=instantiateReactComponent(nextElement,false);ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,componentInstance,container,shouldReuseMarkup,context);var wrapperID=componentInstance._instance.rootID;instancesByReactRootID[wrapperID]=componentInstance;return componentInstance},renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){!(parentComponent!=null&&ReactInstanceMap.has(parentComponent))?process.env.NODE_ENV!=="production"?invariant(false,"parentComponent must be a valid React Component"):_prodInvariant("38"):void 0;return ReactMount._renderSubtreeIntoContainer(parentComponent,nextElement,container,callback)},_renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){ReactUpdateQueue.validateCallback(callback,"ReactDOM.render");!React.isValidElement(nextElement)?process.env.NODE_ENV!=="production"?invariant(false,"ReactDOM.render(): Invalid component element.%s",typeof nextElement==="string"?" Instead of passing a string like 'div', pass "+"React.createElement('div') or <div />.":typeof nextElement==="function"?" Instead of passing a class like Foo, pass "+"React.createElement(Foo) or <Foo />.":nextElement!=null&&nextElement.props!==undefined?" This may be caused by unintentionally loading two independent "+"copies of React.":""):_prodInvariant("39",typeof nextElement==="string"?" Instead of passing a string like 'div', pass "+"React.createElement('div') or <div />.":typeof nextElement==="function"?" Instead of passing a class like Foo, pass "+"React.createElement(Foo) or <Foo />.":nextElement!=null&&nextElement.props!==undefined?" This may be caused by unintentionally loading two independent "+"copies of React.":""):void 0;process.env.NODE_ENV!=="production"?warning(!container||!container.tagName||container.tagName.toUpperCase()!=="BODY","render(): Rendering components directly into document.body is "+"discouraged, since its children are often manipulated by third-party "+"scripts and browser extensions. This may lead to subtle "+"reconciliation issues. Try rendering into a container element created "+"for your app."):void 0;var nextWrappedElement=React.createElement(TopLevelWrapper,{child:nextElement});var nextContext;if(parentComponent){var parentInst=ReactInstanceMap.get(parentComponent);nextContext=parentInst._processChildContext(parentInst._context)}else{nextContext=emptyObject}var prevComponent=getTopLevelWrapperInContainer(container);if(prevComponent){var prevWrappedElement=prevComponent._currentElement;var prevElement=prevWrappedElement.props.child;if(shouldUpdateReactComponent(prevElement,nextElement)){var publicInst=prevComponent._renderedComponent.getPublicInstance();var updatedCallback=callback&&function(){callback.call(publicInst)};ReactMount._updateRootComponent(prevComponent,nextWrappedElement,nextContext,container,updatedCallback);return publicInst}else{ReactMount.unmountComponentAtNode(container)}}var reactRootElement=getReactRootElementInContainer(container);var containerHasReactMarkup=reactRootElement&&!!internalGetID(reactRootElement);var containerHasNonRootReactChild=hasNonRootReactChild(container);if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!containerHasNonRootReactChild,"render(...): Replacing React-rendered children with a new root "+"component. If you intended to update the children of this node, "+"you should instead have the existing children update their state "+"and render the new components instead of calling ReactDOM.render."):void 0;if(!containerHasReactMarkup||reactRootElement.nextSibling){var rootElementSibling=reactRootElement;while(rootElementSibling){if(internalGetID(rootElementSibling)){process.env.NODE_ENV!=="production"?warning(false,"render(): Target node has markup rendered by React, but there "+"are unrelated nodes as well. This is most commonly caused by "+"white-space inserted around server-rendered markup."):void 0;break}rootElementSibling=rootElementSibling.nextSibling}}}var shouldReuseMarkup=containerHasReactMarkup&&!prevComponent&&!containerHasNonRootReactChild;var component=ReactMount._renderNewRootComponent(nextWrappedElement,container,shouldReuseMarkup,nextContext)._renderedComponent.getPublicInstance();if(callback){callback.call(component)}return component},render:function(nextElement,container,callback){return ReactMount._renderSubtreeIntoContainer(null,nextElement,container,callback)},unmountComponentAtNode:function(container){process.env.NODE_ENV!=="production"?warning(ReactCurrentOwner.current==null,"unmountComponentAtNode(): Render methods should be a pure function "+"of props and state; triggering nested component updates from render "+"is not allowed. If necessary, trigger nested updates in "+"componentDidUpdate. Check the render method of %s.",ReactCurrentOwner.current&&ReactCurrentOwner.current.getName()||"ReactCompositeComponent"):void 0;!isValidContainer(container)?process.env.NODE_ENV!=="production"?invariant(false,"unmountComponentAtNode(...): Target container is not a DOM element."):_prodInvariant("40"):void 0;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!nodeIsRenderedByOtherInstance(container),"unmountComponentAtNode(): The node you're attempting to unmount "+"was rendered by another copy of React."):void 0}var prevComponent=getTopLevelWrapperInContainer(container);if(!prevComponent){var containerHasNonRootReactChild=hasNonRootReactChild(container);var isContainerReactRoot=container.nodeType===1&&container.hasAttribute(ROOT_ATTR_NAME);if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!containerHasNonRootReactChild,"unmountComponentAtNode(): The node you're attempting to unmount "+"was rendered by React and is not a top-level container. %s",isContainerReactRoot?"You may have accidentally passed in a React root node instead "+"of its container.":"Instead, have the parent component update its state and "+"rerender in order to remove this component."):void 0}return false}delete instancesByReactRootID[prevComponent._instance.rootID];ReactUpdates.batchedUpdates(unmountComponentFromNode,prevComponent,container,false);return true},_mountImageIntoNode:function(markup,container,instance,shouldReuseMarkup,transaction){!isValidContainer(container)?process.env.NODE_ENV!=="production"?invariant(false,"mountComponentIntoNode(...): Target container is not valid."):_prodInvariant("41"):void 0;if(shouldReuseMarkup){var rootElement=getReactRootElementInContainer(container);if(ReactMarkupChecksum.canReuseMarkup(markup,rootElement)){ReactDOMComponentTree.precacheNode(instance,rootElement);return}else{var checksum=rootElement.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);rootElement.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var rootMarkup=rootElement.outerHTML;rootElement.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,checksum);var normalizedMarkup=markup;if(process.env.NODE_ENV!=="production"){var normalizer;if(container.nodeType===ELEMENT_NODE_TYPE){normalizer=document.createElement("div");normalizer.innerHTML=markup;normalizedMarkup=normalizer.innerHTML}else{normalizer=document.createElement("iframe");document.body.appendChild(normalizer);normalizer.contentDocument.write(markup);normalizedMarkup=normalizer.contentDocument.documentElement.outerHTML;document.body.removeChild(normalizer)}}var diffIndex=firstDifferenceIndex(normalizedMarkup,rootMarkup);var difference=" (client) "+normalizedMarkup.substring(diffIndex-20,diffIndex+20)+"\n (server) "+rootMarkup.substring(diffIndex-20,diffIndex+20);!(container.nodeType!==DOC_NODE_TYPE)?process.env.NODE_ENV!=="production"?invariant(false,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",difference):_prodInvariant("42",difference):void 0;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(false,"React attempted to reuse markup in a container but the "+"checksum was invalid. This generally means that you are "+"using server rendering and the markup generated on the "+"server was not what the client was expecting. React injected "+"new markup to compensate which works but you have lost many "+"of the benefits of server rendering. Instead, figure out "+"why the markup being generated is different on the client "+"or server:\n%s",difference):void 0}}}!(container.nodeType!==DOC_NODE_TYPE)?process.env.NODE_ENV!=="production"?invariant(false,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See ReactDOMServer.renderToString() for server rendering."):_prodInvariant("43"):void 0;if(transaction.useCreateElement){while(container.lastChild){container.removeChild(container.lastChild)}DOMLazyTree.insertTreeBefore(container,markup,null)}else{setInnerHTML(container,markup);ReactDOMComponentTree.precacheNode(instance,container.firstChild)}if(process.env.NODE_ENV!=="production"){var hostNode=ReactDOMComponentTree.getInstanceFromNode(container.firstChild);if(hostNode._debugID!==0){ReactInstrumentation.debugTool.onHostOperation({instanceID:hostNode._debugID,type:"mount",payload:markup.toString()})}}}};module.exports=ReactMount}).call(this)}).call(this,require("_process"))},{"./DOMLazyTree":544,"./DOMProperty":546,"./ReactBrowserEventEmitter":560,"./ReactDOMComponentTree":568,"./ReactDOMContainerInfo":569,"./ReactDOMFeatureFlags":571,"./ReactFeatureFlags":591,"./ReactInstanceMap":596,"./ReactInstrumentation":597,"./ReactMarkupChecksum":599,"./ReactReconciler":607,"./ReactUpdateQueue":611,"./ReactUpdates":612,"./instantiateReactComponent":651,"./reactProdInvariant":655,"./setInnerHTML":657,"./shouldUpdateReactComponent":659,_process:25,"fbjs/lib/emptyObject":511,"fbjs/lib/invariant":518,"fbjs/lib/warning":525,"react/lib/React":664,"react/lib/ReactCurrentOwner":669}],601:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactComponentEnvironment=require("./ReactComponentEnvironment");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactReconciler=require("./ReactReconciler");var ReactChildReconciler=require("./ReactChildReconciler");var emptyFunction=require("fbjs/lib/emptyFunction");var flattenChildren=require("./flattenChildren");var invariant=require("fbjs/lib/invariant");function makeInsertMarkup(markup,afterNode,toIndex){return{type:"INSERT_MARKUP",content:markup,fromIndex:null,fromNode:null,toIndex:toIndex,afterNode:afterNode}}function makeMove(child,afterNode,toIndex){return{type:"MOVE_EXISTING",content:null,fromIndex:child._mountIndex,fromNode:ReactReconciler.getHostNode(child),toIndex:toIndex,afterNode:afterNode}}function makeRemove(child,node){return{type:"REMOVE_NODE",content:null,fromIndex:child._mountIndex,fromNode:node,toIndex:null,afterNode:null}}function makeSetMarkup(markup){return{type:"SET_MARKUP",content:markup,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function makeTextContent(textContent){return{type:"TEXT_CONTENT",content:textContent,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function enqueue(queue,update){if(update){queue=queue||[];queue.push(update)}return queue}function processQueue(inst,updateQueue){ReactComponentEnvironment.processChildrenUpdates(inst,updateQueue)}var setChildrenForInstrumentation=emptyFunction;if(process.env.NODE_ENV!=="production"){var getDebugID=function(inst){if(!inst._debugID){var internal;if(internal=ReactInstanceMap.get(inst)){inst=internal}}return inst._debugID};setChildrenForInstrumentation=function(children){var debugID=getDebugID(this);if(debugID!==0){ReactInstrumentation.debugTool.onSetChildren(debugID,children?Object.keys(children).map(function(key){return children[key]._debugID}):[])}}}var ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(nestedChildren,transaction,context){if(process.env.NODE_ENV!=="production"){var selfDebugID=getDebugID(this);if(this._currentElement){try{ReactCurrentOwner.current=this._currentElement._owner;return ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context,selfDebugID)}finally{ReactCurrentOwner.current=null}}}return ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context)},_reconcilerUpdateChildren:function(prevChildren,nextNestedChildrenElements,mountImages,removedNodes,transaction,context){var nextChildren;var selfDebugID=0;if(process.env.NODE_ENV!=="production"){selfDebugID=getDebugID(this);if(this._currentElement){try{ReactCurrentOwner.current=this._currentElement._owner;nextChildren=flattenChildren(nextNestedChildrenElements,selfDebugID)}finally{ReactCurrentOwner.current=null}ReactChildReconciler.updateChildren(prevChildren,nextChildren,mountImages,removedNodes,transaction,this,this._hostContainerInfo,context,selfDebugID);return nextChildren}}nextChildren=flattenChildren(nextNestedChildrenElements,selfDebugID);ReactChildReconciler.updateChildren(prevChildren,nextChildren,mountImages,removedNodes,transaction,this,this._hostContainerInfo,context,selfDebugID);return nextChildren},mountChildren:function(nestedChildren,transaction,context){var children=this._reconcilerInstantiateChildren(nestedChildren,transaction,context);this._renderedChildren=children;var mountImages=[];var index=0;for(var name in children){if(children.hasOwnProperty(name)){var child=children[name];var selfDebugID=0;if(process.env.NODE_ENV!=="production"){selfDebugID=getDebugID(this)}var mountImage=ReactReconciler.mountComponent(child,transaction,this,this._hostContainerInfo,context,selfDebugID);child._mountIndex=index++;mountImages.push(mountImage)}}if(process.env.NODE_ENV!=="production"){setChildrenForInstrumentation.call(this,children)}return mountImages},updateTextContent:function(nextContent){var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren,false);for(var name in prevChildren){if(prevChildren.hasOwnProperty(name)){!false?process.env.NODE_ENV!=="production"?invariant(false,"updateTextContent called on non-empty component."):_prodInvariant("118"):void 0}}var updates=[makeTextContent(nextContent)];processQueue(this,updates)},updateMarkup:function(nextMarkup){var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren,false);for(var name in prevChildren){if(prevChildren.hasOwnProperty(name)){!false?process.env.NODE_ENV!=="production"?invariant(false,"updateTextContent called on non-empty component."):_prodInvariant("118"):void 0}}var updates=[makeSetMarkup(nextMarkup)];processQueue(this,updates)},updateChildren:function(nextNestedChildrenElements,transaction,context){this._updateChildren(nextNestedChildrenElements,transaction,context)},_updateChildren:function(nextNestedChildrenElements,transaction,context){var prevChildren=this._renderedChildren;var removedNodes={};var mountImages=[];var nextChildren=this._reconcilerUpdateChildren(prevChildren,nextNestedChildrenElements,mountImages,removedNodes,transaction,context);if(!nextChildren&&!prevChildren){return}var updates=null;var name;var nextIndex=0;var lastIndex=0;var nextMountIndex=0;var lastPlacedNode=null;for(name in nextChildren){if(!nextChildren.hasOwnProperty(name)){continue}var prevChild=prevChildren&&prevChildren[name];var nextChild=nextChildren[name];if(prevChild===nextChild){updates=enqueue(updates,this.moveChild(prevChild,lastPlacedNode,nextIndex,lastIndex));lastIndex=Math.max(prevChild._mountIndex,lastIndex);prevChild._mountIndex=nextIndex}else{if(prevChild){lastIndex=Math.max(prevChild._mountIndex,lastIndex)}updates=enqueue(updates,this._mountChildAtIndex(nextChild,mountImages[nextMountIndex],lastPlacedNode,nextIndex,transaction,context));nextMountIndex++}nextIndex++;lastPlacedNode=ReactReconciler.getHostNode(nextChild)}for(name in removedNodes){if(removedNodes.hasOwnProperty(name)){updates=enqueue(updates,this._unmountChild(prevChildren[name],removedNodes[name]))}}if(updates){processQueue(this,updates)}this._renderedChildren=nextChildren;if(process.env.NODE_ENV!=="production"){setChildrenForInstrumentation.call(this,nextChildren)}},unmountChildren:function(safely){var renderedChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(renderedChildren,safely);this._renderedChildren=null},moveChild:function(child,afterNode,toIndex,lastIndex){if(child._mountIndex<lastIndex){return makeMove(child,afterNode,toIndex)}},createChild:function(child,afterNode,mountImage){return makeInsertMarkup(mountImage,afterNode,child._mountIndex)},removeChild:function(child,node){return makeRemove(child,node)},_mountChildAtIndex:function(child,mountImage,afterNode,index,transaction,context){child._mountIndex=index;return this.createChild(child,afterNode,mountImage)},_unmountChild:function(child,node){var update=this.removeChild(child,node);child._mountIndex=null;return update}}};module.exports=ReactMultiChild}).call(this)}).call(this,require("_process"))},{"./ReactChildReconciler":561,"./ReactComponentEnvironment":563,"./ReactInstanceMap":596,"./ReactInstrumentation":597,"./ReactReconciler":607,"./flattenChildren":639,"./reactProdInvariant":655,_process:25,"fbjs/lib/emptyFunction":510,"fbjs/lib/invariant":518,"react/lib/ReactCurrentOwner":669}],602:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var React=require("react/lib/React");var invariant=require("fbjs/lib/invariant");var ReactNodeTypes={HOST:0,COMPOSITE:1,EMPTY:2,getType:function(node){if(node===null||node===false){return ReactNodeTypes.EMPTY}else if(React.isValidElement(node)){if(typeof node.type==="function"){return ReactNodeTypes.COMPOSITE}else{return ReactNodeTypes.HOST}}!false?process.env.NODE_ENV!=="production"?invariant(false,"Unexpected node: %s",node):_prodInvariant("26",node):void 0}};module.exports=ReactNodeTypes}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"react/lib/React":664}],603:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function isValidOwner(object){return!!(object&&typeof object.attachRef==="function"&&typeof object.detachRef==="function")}var ReactOwner={addComponentAsRefTo:function(component,ref,owner){!isValidOwner(owner)?process.env.NODE_ENV!=="production"?invariant(false,"addComponentAsRefTo(...): Only a ReactOwner can have refs. You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):_prodInvariant("119"):void 0;owner.attachRef(ref,component)},removeComponentAsRefFrom:function(component,ref,owner){!isValidOwner(owner)?process.env.NODE_ENV!=="production"?invariant(false,"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. You might be removing a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):_prodInvariant("120"):void 0;var ownerPublicInstance=owner.getPublicInstance();if(ownerPublicInstance&&ownerPublicInstance.refs[ref]===component.getPublicInstance()){owner.detachRef(ref)}}};module.exports=ReactOwner}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],604:[function(require,module,exports){(function(process){(function(){"use strict";var ReactPropTypeLocationNames={};if(process.env.NODE_ENV!=="production"){ReactPropTypeLocationNames={prop:"prop",context:"context",childContext:"child context"}}module.exports=ReactPropTypeLocationNames}).call(this)}).call(this,require("_process"))},{_process:25}],605:[function(require,module,exports){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},{}],606:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var CallbackQueue=require("./CallbackQueue");var PooledClass=require("./PooledClass");var ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter");var ReactInputSelection=require("./ReactInputSelection");var ReactInstrumentation=require("./ReactInstrumentation");var Transaction=require("./Transaction");var ReactUpdateQueue=require("./ReactUpdateQueue");var SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection};var EVENT_SUPPRESSION={initialize:function(){var currentlyEnabled=ReactBrowserEventEmitter.isEnabled();ReactBrowserEventEmitter.setEnabled(false);return currentlyEnabled},close:function(previouslyEnabled){ReactBrowserEventEmitter.setEnabled(previouslyEnabled)}};var ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}};var TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING];if(process.env.NODE_ENV!=="production"){TRANSACTION_WRAPPERS.push({initialize:ReactInstrumentation.debugTool.onBeginFlush,close:ReactInstrumentation.debugTool.onEndFlush})}function ReactReconcileTransaction(useCreateElement){this.reinitializeTransaction();this.renderToStaticMarkup=false;this.reactMountReady=CallbackQueue.getPooled(null);this.useCreateElement=useCreateElement}var Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return ReactUpdateQueue},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(checkpoint){this.reactMountReady.rollback(checkpoint)},destructor:function(){CallbackQueue.release(this.reactMountReady);this.reactMountReady=null}};_assign(ReactReconcileTransaction.prototype,Transaction,Mixin);PooledClass.addPoolingTo(ReactReconcileTransaction);module.exports=ReactReconcileTransaction}).call(this)}).call(this,require("_process"))},{"./CallbackQueue":541,"./PooledClass":559,"./ReactBrowserEventEmitter":560,"./ReactInputSelection":595,"./ReactInstrumentation":597,"./ReactUpdateQueue":611,"./Transaction":630,_process:25,"object-assign":533}],607:[function(require,module,exports){(function(process){(function(){"use strict";var ReactRef=require("./ReactRef");var ReactInstrumentation=require("./ReactInstrumentation");var warning=require("fbjs/lib/warning");function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactReconciler={mountComponent:function(internalInstance,transaction,hostParent,hostContainerInfo,context,parentDebugID){if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeMountComponent(internalInstance._debugID,internalInstance._currentElement,parentDebugID)}}var markup=internalInstance.mountComponent(transaction,hostParent,hostContainerInfo,context,parentDebugID);if(internalInstance._currentElement&&internalInstance._currentElement.ref!=null){transaction.getReactMountReady().enqueue(attachRefs,internalInstance)}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onMountComponent(internalInstance._debugID)}}return markup},getHostNode:function(internalInstance){return internalInstance.getHostNode()},unmountComponent:function(internalInstance,safely){if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeUnmountComponent(internalInstance._debugID)}}ReactRef.detachRefs(internalInstance,internalInstance._currentElement);internalInstance.unmountComponent(safely);if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onUnmountComponent(internalInstance._debugID)}}},receiveComponent:function(internalInstance,nextElement,transaction,context){var prevElement=internalInstance._currentElement;if(nextElement===prevElement&&context===internalInstance._context){return}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeUpdateComponent(internalInstance._debugID,nextElement)}}var refsChanged=ReactRef.shouldUpdateRefs(prevElement,nextElement);if(refsChanged){ReactRef.detachRefs(internalInstance,prevElement)}internalInstance.receiveComponent(nextElement,transaction,context);if(refsChanged&&internalInstance._currentElement&&internalInstance._currentElement.ref!=null){transaction.getReactMountReady().enqueue(attachRefs,internalInstance)}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onUpdateComponent(internalInstance._debugID)}}},performUpdateIfNecessary:function(internalInstance,transaction,updateBatchNumber){if(internalInstance._updateBatchNumber!==updateBatchNumber){process.env.NODE_ENV!=="production"?warning(internalInstance._updateBatchNumber==null||internalInstance._updateBatchNumber===updateBatchNumber+1,"performUpdateIfNecessary: Unexpected batch number (current %s, "+"pending %s)",updateBatchNumber,internalInstance._updateBatchNumber):void 0;return}if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onBeforeUpdateComponent(internalInstance._debugID,internalInstance._currentElement)}}internalInstance.performUpdateIfNecessary(transaction);if(process.env.NODE_ENV!=="production"){if(internalInstance._debugID!==0){ReactInstrumentation.debugTool.onUpdateComponent(internalInstance._debugID)}}}};module.exports=ReactReconciler}).call(this)}).call(this,require("_process"))},{"./ReactInstrumentation":597,"./ReactRef":608,_process:25,"fbjs/lib/warning":525}],608:[function(require,module,exports){"use strict";var ReactOwner=require("./ReactOwner");var ReactRef={};function attachRef(ref,component,owner){if(typeof ref==="function"){ref(component.getPublicInstance())}else{ReactOwner.addComponentAsRefTo(component,ref,owner)}}function detachRef(ref,component,owner){if(typeof ref==="function"){ref(null)}else{ReactOwner.removeComponentAsRefFrom(component,ref,owner)}}ReactRef.attachRefs=function(instance,element){if(element===null||typeof element!=="object"){return}var ref=element.ref;if(ref!=null){attachRef(ref,instance,element._owner)}};ReactRef.shouldUpdateRefs=function(prevElement,nextElement){var prevRef=null;var prevOwner=null;if(prevElement!==null&&typeof prevElement==="object"){prevRef=prevElement.ref;prevOwner=prevElement._owner}var nextRef=null;var nextOwner=null;if(nextElement!==null&&typeof nextElement==="object"){nextRef=nextElement.ref;nextOwner=nextElement._owner}return prevRef!==nextRef||typeof nextRef==="string"&&nextOwner!==prevOwner};ReactRef.detachRefs=function(instance,element){if(element===null||typeof element!=="object"){return}var ref=element.ref;if(ref!=null){detachRef(ref,instance,element._owner)}};module.exports=ReactRef},{"./ReactOwner":603}],609:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var PooledClass=require("./PooledClass");var Transaction=require("./Transaction");var ReactInstrumentation=require("./ReactInstrumentation");var ReactServerUpdateQueue=require("./ReactServerUpdateQueue");var TRANSACTION_WRAPPERS=[];if(process.env.NODE_ENV!=="production"){TRANSACTION_WRAPPERS.push({initialize:ReactInstrumentation.debugTool.onBeginFlush,close:ReactInstrumentation.debugTool.onEndFlush})}var noopCallbackQueue={enqueue:function(){}};function ReactServerRenderingTransaction(renderToStaticMarkup){this.reinitializeTransaction();this.renderToStaticMarkup=renderToStaticMarkup;this.useCreateElement=false;this.updateQueue=new ReactServerUpdateQueue(this)}var Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return noopCallbackQueue},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};_assign(ReactServerRenderingTransaction.prototype,Transaction,Mixin);PooledClass.addPoolingTo(ReactServerRenderingTransaction);module.exports=ReactServerRenderingTransaction}).call(this)}).call(this,require("_process"))},{"./PooledClass":559,"./ReactInstrumentation":597,"./ReactServerUpdateQueue":610,"./Transaction":630,_process:25,"object-assign":533}],610:[function(require,module,exports){(function(process){(function(){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ReactUpdateQueue=require("./ReactUpdateQueue");var warning=require("fbjs/lib/warning");function warnNoop(publicInstance,callerName){if(process.env.NODE_ENV!=="production"){var constructor=publicInstance.constructor;process.env.NODE_ENV!=="production"?warning(false,"%s(...): Can only update a mounting component. "+"This usually means you called %s() outside componentWillMount() on the server. "+"This is a no-op. Please check the code for the %s component.",callerName,callerName,constructor&&(constructor.displayName||constructor.name)||"ReactClass"):void 0}}var ReactServerUpdateQueue=function(){function ReactServerUpdateQueue(transaction){_classCallCheck(this,ReactServerUpdateQueue);this.transaction=transaction}ReactServerUpdateQueue.prototype.isMounted=function isMounted(publicInstance){return false};ReactServerUpdateQueue.prototype.enqueueCallback=function enqueueCallback(publicInstance,callback,callerName){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueCallback(publicInstance,callback,callerName)}};ReactServerUpdateQueue.prototype.enqueueForceUpdate=function enqueueForceUpdate(publicInstance){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueForceUpdate(publicInstance)}else{warnNoop(publicInstance,"forceUpdate")}};ReactServerUpdateQueue.prototype.enqueueReplaceState=function enqueueReplaceState(publicInstance,completeState){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueReplaceState(publicInstance,completeState)}else{warnNoop(publicInstance,"replaceState")}};ReactServerUpdateQueue.prototype.enqueueSetState=function enqueueSetState(publicInstance,partialState){if(this.transaction.isInTransaction()){ReactUpdateQueue.enqueueSetState(publicInstance,partialState)}else{warnNoop(publicInstance,"setState")}};return ReactServerUpdateQueue}();module.exports=ReactServerUpdateQueue}).call(this)}).call(this,require("_process"))},{"./ReactUpdateQueue":611,_process:25,"fbjs/lib/warning":525}],611:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactInstanceMap=require("./ReactInstanceMap");var ReactInstrumentation=require("./ReactInstrumentation");var ReactUpdates=require("./ReactUpdates");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");function enqueueUpdate(internalInstance){ReactUpdates.enqueueUpdate(internalInstance)}function formatUnexpectedArgument(arg){var type=typeof arg;if(type!=="object"){return type}var displayName=arg.constructor&&arg.constructor.name||type;var keys=Object.keys(arg);if(keys.length>0&&keys.length<20){return displayName+" (keys: "+keys.join(", ")+")"}return displayName}function getInternalInstanceReadyForUpdate(publicInstance,callerName){var internalInstance=ReactInstanceMap.get(publicInstance);if(!internalInstance){if(process.env.NODE_ENV!=="production"){var ctor=publicInstance.constructor;process.env.NODE_ENV!=="production"?warning(!callerName,"%s(...): Can only update a mounted or mounting component. "+"This usually means you called %s() on an unmounted component. "+"This is a no-op. Please check the code for the %s component.",callerName,callerName,ctor&&(ctor.displayName||ctor.name)||"ReactClass"):void 0}return null}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(ReactCurrentOwner.current==null,"%s(...): Cannot update during an existing state transition (such as "+"within `render` or another component's constructor). Render methods "+"should be a pure function of props and state; constructor "+"side-effects are an anti-pattern, but can be moved to "+"`componentWillMount`.",callerName):void 0}return internalInstance}var ReactUpdateQueue={isMounted:function(publicInstance){if(process.env.NODE_ENV!=="production"){var owner=ReactCurrentOwner.current;if(owner!==null){process.env.NODE_ENV!=="production"?warning(owner._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. "+"render() should be a pure function of props and state. It should "+"never access something that requires stale data from the previous "+"render, such as refs. Move this logic to componentDidMount and "+"componentDidUpdate instead.",owner.getName()||"A component"):void 0;owner._warnedAboutRefsInRender=true}}var internalInstance=ReactInstanceMap.get(publicInstance);if(internalInstance){return!!internalInstance._renderedComponent}else{return false}},enqueueCallback:function(publicInstance,callback,callerName){ReactUpdateQueue.validateCallback(callback,callerName);var internalInstance=getInternalInstanceReadyForUpdate(publicInstance);if(!internalInstance){return null}if(internalInstance._pendingCallbacks){internalInstance._pendingCallbacks.push(callback)}else{internalInstance._pendingCallbacks=[callback]}enqueueUpdate(internalInstance)},enqueueCallbackInternal:function(internalInstance,callback){if(internalInstance._pendingCallbacks){internalInstance._pendingCallbacks.push(callback)}else{internalInstance._pendingCallbacks=[callback]}enqueueUpdate(internalInstance)},enqueueForceUpdate:function(publicInstance){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"forceUpdate");if(!internalInstance){return}internalInstance._pendingForceUpdate=true;enqueueUpdate(internalInstance)},enqueueReplaceState:function(publicInstance,completeState){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"replaceState");if(!internalInstance){return}internalInstance._pendingStateQueue=[completeState];internalInstance._pendingReplaceState=true;enqueueUpdate(internalInstance)},enqueueSetState:function(publicInstance,partialState){if(process.env.NODE_ENV!=="production"){ReactInstrumentation.debugTool.onSetState();process.env.NODE_ENV!=="production"?warning(partialState!=null,"setState(...): You passed an undefined or null state object; "+"instead, use forceUpdate()."):void 0}var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"setState");if(!internalInstance){return}var queue=internalInstance._pendingStateQueue||(internalInstance._pendingStateQueue=[]);queue.push(partialState);enqueueUpdate(internalInstance)},enqueueElementInternal:function(internalInstance,nextElement,nextContext){internalInstance._pendingElement=nextElement;internalInstance._context=nextContext;enqueueUpdate(internalInstance)},validateCallback:function(callback,callerName){!(!callback||typeof callback==="function")?process.env.NODE_ENV!=="production"?invariant(false,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",callerName,formatUnexpectedArgument(callback)):_prodInvariant("122",callerName,formatUnexpectedArgument(callback)):void 0}};module.exports=ReactUpdateQueue}).call(this)}).call(this,require("_process"))},{"./ReactInstanceMap":596,"./ReactInstrumentation":597,"./ReactUpdates":612,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525,"react/lib/ReactCurrentOwner":669}],612:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var CallbackQueue=require("./CallbackQueue");var PooledClass=require("./PooledClass");var ReactFeatureFlags=require("./ReactFeatureFlags");var ReactReconciler=require("./ReactReconciler");var Transaction=require("./Transaction");var invariant=require("fbjs/lib/invariant");var dirtyComponents=[];var updateBatchNumber=0;var asapCallbackQueue=CallbackQueue.getPooled();var asapEnqueued=false;var batchingStrategy=null;function ensureInjected(){!(ReactUpdates.ReactReconcileTransaction&&batchingStrategy)?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must inject a reconcile transaction class and batching strategy"):_prodInvariant("123"):void 0}var NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){if(this.dirtyComponentsLength!==dirtyComponents.length){dirtyComponents.splice(0,this.dirtyComponentsLength);flushBatchedUpdates()}else{dirtyComponents.length=0}}};var UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}};var TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];function ReactUpdatesFlushTransaction(){this.reinitializeTransaction();this.dirtyComponentsLength=null;this.callbackQueue=CallbackQueue.getPooled();this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(true)}_assign(ReactUpdatesFlushTransaction.prototype,Transaction,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null;CallbackQueue.release(this.callbackQueue);this.callbackQueue=null;ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction);this.reconcileTransaction=null},perform:function(method,scope,a){return Transaction.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,method,scope,a)}});PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);function batchedUpdates(callback,a,b,c,d,e){ensureInjected();return batchingStrategy.batchedUpdates(callback,a,b,c,d,e)}function mountOrderComparator(c1,c2){return c1._mountOrder-c2._mountOrder}function runBatchedUpdates(transaction){var len=transaction.dirtyComponentsLength;!(len===dirtyComponents.length)?process.env.NODE_ENV!=="production"?invariant(false,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",len,dirtyComponents.length):_prodInvariant("124",len,dirtyComponents.length):void 0;dirtyComponents.sort(mountOrderComparator);updateBatchNumber++;for(var i=0;i<len;i++){var component=dirtyComponents[i];var callbacks=component._pendingCallbacks;component._pendingCallbacks=null;var markerName;if(ReactFeatureFlags.logTopLevelRenders){var namedComponent=component;if(component._currentElement.type.isReactTopLevelWrapper){namedComponent=component._renderedComponent}markerName="React update: "+namedComponent.getName();console.time(markerName)}ReactReconciler.performUpdateIfNecessary(component,transaction.reconcileTransaction,updateBatchNumber);if(markerName){console.timeEnd(markerName)}if(callbacks){for(var j=0;j<callbacks.length;j++){transaction.callbackQueue.enqueue(callbacks[j],component.getPublicInstance())}}}}var flushBatchedUpdates=function(){while(dirtyComponents.length||asapEnqueued){if(dirtyComponents.length){var transaction=ReactUpdatesFlushTransaction.getPooled();transaction.perform(runBatchedUpdates,null,transaction);ReactUpdatesFlushTransaction.release(transaction)}if(asapEnqueued){asapEnqueued=false;var queue=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled();queue.notifyAll();CallbackQueue.release(queue)}}};function enqueueUpdate(component){ensureInjected();if(!batchingStrategy.isBatchingUpdates){batchingStrategy.batchedUpdates(enqueueUpdate,component);return}dirtyComponents.push(component);if(component._updateBatchNumber==null){component._updateBatchNumber=updateBatchNumber+1}}function asap(callback,context){!batchingStrategy.isBatchingUpdates?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."):_prodInvariant("125"):void 0;asapCallbackQueue.enqueue(callback,context);asapEnqueued=true}var ReactUpdatesInjection={injectReconcileTransaction:function(ReconcileTransaction){!ReconcileTransaction?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide a reconcile transaction class"):_prodInvariant("126"):void 0;ReactUpdates.ReactReconcileTransaction=ReconcileTransaction},injectBatchingStrategy:function(_batchingStrategy){!_batchingStrategy?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide a batching strategy"):_prodInvariant("127"):void 0;!(typeof _batchingStrategy.batchedUpdates==="function")?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide a batchedUpdates() function"):_prodInvariant("128"):void 0;!(typeof _batchingStrategy.isBatchingUpdates==="boolean")?process.env.NODE_ENV!=="production"?invariant(false,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):_prodInvariant("129"):void 0;batchingStrategy=_batchingStrategy}};var ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates}).call(this)}).call(this,require("_process"))},{"./CallbackQueue":541,"./PooledClass":559,"./ReactFeatureFlags":591,"./ReactReconciler":607,"./Transaction":630,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"object-assign":533}],613:[function(require,module,exports){"use strict";module.exports="15.4.2"},{}],614:[function(require,module,exports){"use strict";var NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};var ATTRS={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"};var SVGDOMPropertyConfig={Properties:{},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{}};Object.keys(ATTRS).forEach(function(key){SVGDOMPropertyConfig.Properties[key]=0;if(ATTRS[key]){SVGDOMPropertyConfig.DOMAttributeNames[key]=ATTRS[key]}});module.exports=SVGDOMPropertyConfig},{}],615:[function(require,module,exports){"use strict";var EventPropagators=require("./EventPropagators");var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInputSelection=require("./ReactInputSelection");var SyntheticEvent=require("./SyntheticEvent");var getActiveElement=require("fbjs/lib/getActiveElement");var isTextInputElement=require("./isTextInputElement");var shallowEqual=require("fbjs/lib/shallowEqual");var skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11;var eventTypes={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}};var activeElement=null;var activeElementInst=null;var lastSelection=null;var mouseDown=false;var hasListener=false;function getSelection(node){if("selectionStart"in node&&ReactInputSelection.hasSelectionCapabilities(node)){return{start:node.selectionStart,end:node.selectionEnd}}else if(window.getSelection){var selection=window.getSelection();return{anchorNode:selection.anchorNode,anchorOffset:selection.anchorOffset,focusNode:selection.focusNode,focusOffset:selection.focusOffset}}else if(document.selection){var range=document.selection.createRange();return{parentElement:range.parentElement(),text:range.text,top:range.boundingTop,left:range.boundingLeft}}}function constructSelectEvent(nativeEvent,nativeEventTarget){if(mouseDown||activeElement==null||activeElement!==getActiveElement()){return null}var currentSelection=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,currentSelection)){lastSelection=currentSelection;var syntheticEvent=SyntheticEvent.getPooled(eventTypes.select,activeElementInst,nativeEvent,nativeEventTarget);syntheticEvent.type="select";syntheticEvent.target=activeElement;EventPropagators.accumulateTwoPhaseDispatches(syntheticEvent);return syntheticEvent}return null}var SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){if(!hasListener){return null}var targetNode=targetInst?ReactDOMComponentTree.getNodeFromInstance(targetInst):window;switch(topLevelType){case"topFocus":if(isTextInputElement(targetNode)||targetNode.contentEditable==="true"){activeElement=targetNode;activeElementInst=targetInst;lastSelection=null}break;case"topBlur":activeElement=null;activeElementInst=null;lastSelection=null;break;case"topMouseDown":mouseDown=true;break;case"topContextMenu":case"topMouseUp":mouseDown=false;return constructSelectEvent(nativeEvent,nativeEventTarget);case"topSelectionChange":if(skipSelectionChangeEvent){break}case"topKeyDown":case"topKeyUp":return constructSelectEvent(nativeEvent,nativeEventTarget)}return null},didPutListener:function(inst,registrationName,listener){if(registrationName==="onSelect"){hasListener=true}}};module.exports=SelectEventPlugin},{"./EventPropagators":554,"./ReactDOMComponentTree":568,"./ReactInputSelection":595,"./SyntheticEvent":621,"./isTextInputElement":653,"fbjs/lib/ExecutionEnvironment":504,"fbjs/lib/getActiveElement":513,"fbjs/lib/shallowEqual":524}],616:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var EventListener=require("fbjs/lib/EventListener");var EventPropagators=require("./EventPropagators");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var SyntheticAnimationEvent=require("./SyntheticAnimationEvent");var SyntheticClipboardEvent=require("./SyntheticClipboardEvent");var SyntheticEvent=require("./SyntheticEvent");var SyntheticFocusEvent=require("./SyntheticFocusEvent");var SyntheticKeyboardEvent=require("./SyntheticKeyboardEvent");var SyntheticMouseEvent=require("./SyntheticMouseEvent");var SyntheticDragEvent=require("./SyntheticDragEvent");var SyntheticTouchEvent=require("./SyntheticTouchEvent");var SyntheticTransitionEvent=require("./SyntheticTransitionEvent");var SyntheticUIEvent=require("./SyntheticUIEvent");var SyntheticWheelEvent=require("./SyntheticWheelEvent");var emptyFunction=require("fbjs/lib/emptyFunction");var getEventCharCode=require("./getEventCharCode");var invariant=require("fbjs/lib/invariant");var eventTypes={};var topLevelEventsToDispatchConfig={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(event){var capitalizedEvent=event[0].toUpperCase()+event.slice(1);var onEvent="on"+capitalizedEvent;var topEvent="top"+capitalizedEvent;var type={phasedRegistrationNames:{bubbled:onEvent,captured:onEvent+"Capture"},dependencies:[topEvent]};eventTypes[event]=type;topLevelEventsToDispatchConfig[topEvent]=type});var onClickListeners={};function getDictionaryKey(inst){return"."+inst._rootNodeID}function isInteractive(tag){return tag==="button"||tag==="input"||tag==="select"||tag==="textarea"}var SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var dispatchConfig=topLevelEventsToDispatchConfig[topLevelType];if(!dispatchConfig){return null}var EventConstructor;switch(topLevelType){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":EventConstructor=SyntheticEvent;break;case"topKeyPress":if(getEventCharCode(nativeEvent)===0){return null}case"topKeyDown":case"topKeyUp":EventConstructor=SyntheticKeyboardEvent;break;case"topBlur":case"topFocus":EventConstructor=SyntheticFocusEvent;break;case"topClick":if(nativeEvent.button===2){return null}case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":EventConstructor=SyntheticMouseEvent;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":EventConstructor=SyntheticDragEvent;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":EventConstructor=SyntheticTouchEvent;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":EventConstructor=SyntheticAnimationEvent;break;case"topTransitionEnd":EventConstructor=SyntheticTransitionEvent;break;case"topScroll":EventConstructor=SyntheticUIEvent;break;case"topWheel":EventConstructor=SyntheticWheelEvent;break;case"topCopy":case"topCut":case"topPaste":EventConstructor=SyntheticClipboardEvent;break}!EventConstructor?process.env.NODE_ENV!=="production"?invariant(false,"SimpleEventPlugin: Unhandled event type, `%s`.",topLevelType):_prodInvariant("86",topLevelType):void 0;var event=EventConstructor.getPooled(dispatchConfig,targetInst,nativeEvent,nativeEventTarget);EventPropagators.accumulateTwoPhaseDispatches(event);return event},didPutListener:function(inst,registrationName,listener){if(registrationName==="onClick"&&!isInteractive(inst._tag)){var key=getDictionaryKey(inst);var node=ReactDOMComponentTree.getNodeFromInstance(inst);if(!onClickListeners[key]){onClickListeners[key]=EventListener.listen(node,"click",emptyFunction)}}},willDeleteListener:function(inst,registrationName){if(registrationName==="onClick"&&!isInteractive(inst._tag)){var key=getDictionaryKey(inst);onClickListeners[key].remove();delete onClickListeners[key]}}};module.exports=SimpleEventPlugin}).call(this)}).call(this,require("_process"))},{"./EventPropagators":554,"./ReactDOMComponentTree":568,"./SyntheticAnimationEvent":617,"./SyntheticClipboardEvent":618,"./SyntheticDragEvent":620,"./SyntheticEvent":621,"./SyntheticFocusEvent":622,"./SyntheticKeyboardEvent":624,"./SyntheticMouseEvent":625,"./SyntheticTouchEvent":626,"./SyntheticTransitionEvent":627,"./SyntheticUIEvent":628,"./SyntheticWheelEvent":629,"./getEventCharCode":641,"./reactProdInvariant":655,_process:25,"fbjs/lib/EventListener":503,"fbjs/lib/emptyFunction":510,"fbjs/lib/invariant":518}],617:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var AnimationEventInterface={animationName:null,elapsedTime:null,pseudoElement:null};function SyntheticAnimationEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticAnimationEvent,AnimationEventInterface);module.exports=SyntheticAnimationEvent},{"./SyntheticEvent":621}],618:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var ClipboardEventInterface={clipboardData:function(event){return"clipboardData"in event?event.clipboardData:window.clipboardData}};function SyntheticClipboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface);module.exports=SyntheticClipboardEvent},{"./SyntheticEvent":621}],619:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var CompositionEventInterface={data:null};function SyntheticCompositionEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface);module.exports=SyntheticCompositionEvent},{"./SyntheticEvent":621}],620:[function(require,module,exports){"use strict";var SyntheticMouseEvent=require("./SyntheticMouseEvent");var DragEventInterface={dataTransfer:null};function SyntheticDragEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface);module.exports=SyntheticDragEvent},{"./SyntheticMouseEvent":625}],621:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var PooledClass=require("./PooledClass");var emptyFunction=require("fbjs/lib/emptyFunction");var warning=require("fbjs/lib/warning");var didWarnForAddedNewProperty=false;var isProxySupported=typeof Proxy==="function";var shouldBeReleasedProperties=["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"];var EventInterface={type:null,target:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(event){return event.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function SyntheticEvent(dispatchConfig,targetInst,nativeEvent,nativeEventTarget){if(process.env.NODE_ENV!=="production"){delete this.nativeEvent;delete this.preventDefault;delete this.stopPropagation}this.dispatchConfig=dispatchConfig;this._targetInst=targetInst;this.nativeEvent=nativeEvent;var Interface=this.constructor.Interface;for(var propName in Interface){if(!Interface.hasOwnProperty(propName)){continue}if(process.env.NODE_ENV!=="production"){delete this[propName]}var normalize=Interface[propName];if(normalize){this[propName]=normalize(nativeEvent)}else{if(propName==="target"){this.target=nativeEventTarget}else{this[propName]=nativeEvent[propName]}}}var defaultPrevented=nativeEvent.defaultPrevented!=null?nativeEvent.defaultPrevented:nativeEvent.returnValue===false;if(defaultPrevented){this.isDefaultPrevented=emptyFunction.thatReturnsTrue}else{this.isDefaultPrevented=emptyFunction.thatReturnsFalse}this.isPropagationStopped=emptyFunction.thatReturnsFalse;return this}_assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=true;var event=this.nativeEvent;if(!event){return}if(event.preventDefault){event.preventDefault()}else if(typeof event.returnValue!=="unknown"){event.returnValue=false}this.isDefaultPrevented=emptyFunction.thatReturnsTrue},stopPropagation:function(){var event=this.nativeEvent;if(!event){return}if(event.stopPropagation){event.stopPropagation()}else if(typeof event.cancelBubble!=="unknown"){event.cancelBubble=true}this.isPropagationStopped=emptyFunction.thatReturnsTrue},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var Interface=this.constructor.Interface;for(var propName in Interface){if(process.env.NODE_ENV!=="production"){Object.defineProperty(this,propName,getPooledWarningPropertyDefinition(propName,Interface[propName]))}else{this[propName]=null}}for(var i=0;i<shouldBeReleasedProperties.length;i++){this[shouldBeReleasedProperties[i]]=null}if(process.env.NODE_ENV!=="production"){Object.defineProperty(this,"nativeEvent",getPooledWarningPropertyDefinition("nativeEvent",null));Object.defineProperty(this,"preventDefault",getPooledWarningPropertyDefinition("preventDefault",emptyFunction));Object.defineProperty(this,"stopPropagation",getPooledWarningPropertyDefinition("stopPropagation",emptyFunction))}}});SyntheticEvent.Interface=EventInterface;if(process.env.NODE_ENV!=="production"){if(isProxySupported){SyntheticEvent=new Proxy(SyntheticEvent,{construct:function(target,args){return this.apply(target,Object.create(target.prototype),args)},apply:function(constructor,that,args){return new Proxy(constructor.apply(that,args),{set:function(target,prop,value){if(prop!=="isPersistent"&&!target.constructor.Interface.hasOwnProperty(prop)&&shouldBeReleasedProperties.indexOf(prop)===-1){process.env.NODE_ENV!=="production"?warning(didWarnForAddedNewProperty||target.isPersistent(),"This synthetic event is reused for performance reasons. If you're "+"seeing this, you're adding a new property in the synthetic event object. "+"The property is never released. See "+"https://fb.me/react-event-pooling for more information."):void 0;didWarnForAddedNewProperty=true}target[prop]=value;return true}})}})}}SyntheticEvent.augmentClass=function(Class,Interface){var Super=this;var E=function(){};E.prototype=Super.prototype;var prototype=new E;_assign(prototype,Class.prototype);Class.prototype=prototype;Class.prototype.constructor=Class;Class.Interface=_assign({},Super.Interface,Interface);Class.augmentClass=Super.augmentClass;PooledClass.addPoolingTo(Class,PooledClass.fourArgumentPooler)};PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler);module.exports=SyntheticEvent;function getPooledWarningPropertyDefinition(propName,getVal){var isFunction=typeof getVal==="function";return{configurable:true,set:set,get:get};function set(val){var action=isFunction?"setting the method":"setting the property";warn(action,"This is effectively a no-op");return val}function get(){var action=isFunction?"accessing the method":"accessing the property";var result=isFunction?"This is a no-op function":"This is set to null";warn(action,result);return getVal}function warn(action,result){var warningCondition=false;process.env.NODE_ENV!=="production"?warning(warningCondition,"This synthetic event is reused for performance reasons. If you're seeing this, "+"you're %s `%s` on a released/nullified synthetic event. %s. "+"If you must keep the original synthetic event around, use event.persist(). "+"See https://fb.me/react-event-pooling for more information.",action,propName,result):void 0}}}).call(this)}).call(this,require("_process"))},{"./PooledClass":559,_process:25,"fbjs/lib/emptyFunction":510,"fbjs/lib/warning":525,"object-assign":533}],622:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var FocusEventInterface={relatedTarget:null};function SyntheticFocusEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface);module.exports=SyntheticFocusEvent},{"./SyntheticUIEvent":628}],623:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var InputEventInterface={data:null};function SyntheticInputEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface);module.exports=SyntheticInputEvent},{"./SyntheticEvent":621}],624:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var getEventCharCode=require("./getEventCharCode");var getEventKey=require("./getEventKey");var getEventModifierState=require("./getEventModifierState");var KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(event){if(event.type==="keypress"){return getEventCharCode(event)}return 0},keyCode:function(event){if(event.type==="keydown"||event.type==="keyup"){return event.keyCode}return 0},which:function(event){if(event.type==="keypress"){return getEventCharCode(event)}if(event.type==="keydown"||event.type==="keyup"){return event.keyCode}return 0}};function SyntheticKeyboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface);module.exports=SyntheticKeyboardEvent},{"./SyntheticUIEvent":628,"./getEventCharCode":641,"./getEventKey":642,"./getEventModifierState":643}],625:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var ViewportMetrics=require("./ViewportMetrics");var getEventModifierState=require("./getEventModifierState");var MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(event){var button=event.button;if("which"in event){return button}return button===2?2:button===4?1:0},buttons:null,relatedTarget:function(event){return event.relatedTarget||(event.fromElement===event.srcElement?event.toElement:event.fromElement)},pageX:function(event){return"pageX"in event?event.pageX:event.clientX+ViewportMetrics.currentScrollLeft},pageY:function(event){return"pageY"in event?event.pageY:event.clientY+ViewportMetrics.currentScrollTop}};function SyntheticMouseEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface);module.exports=SyntheticMouseEvent},{"./SyntheticUIEvent":628,"./ViewportMetrics":631,"./getEventModifierState":643}],626:[function(require,module,exports){"use strict";var SyntheticUIEvent=require("./SyntheticUIEvent");var getEventModifierState=require("./getEventModifierState");var TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};function SyntheticTouchEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface);module.exports=SyntheticTouchEvent},{"./SyntheticUIEvent":628,"./getEventModifierState":643}],627:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var TransitionEventInterface={propertyName:null,elapsedTime:null,pseudoElement:null};function SyntheticTransitionEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticTransitionEvent,TransitionEventInterface);module.exports=SyntheticTransitionEvent},{"./SyntheticEvent":621}],628:[function(require,module,exports){"use strict";var SyntheticEvent=require("./SyntheticEvent");var getEventTarget=require("./getEventTarget");var UIEventInterface={view:function(event){if(event.view){return event.view}var target=getEventTarget(event);if(target.window===target){return target}var doc=target.ownerDocument;if(doc){return doc.defaultView||doc.parentWindow}else{return window}},detail:function(event){return event.detail||0}};function SyntheticUIEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface);module.exports=SyntheticUIEvent},{"./SyntheticEvent":621,"./getEventTarget":644}],629:[function(require,module,exports){"use strict";var SyntheticMouseEvent=require("./SyntheticMouseEvent");var WheelEventInterface={deltaX:function(event){return"deltaX"in event?event.deltaX:"wheelDeltaX"in event?-event.wheelDeltaX:0},deltaY:function(event){return"deltaY"in event?event.deltaY:"wheelDeltaY"in event?-event.wheelDeltaY:"wheelDelta"in event?-event.wheelDelta:0},deltaZ:null,deltaMode:null};function SyntheticWheelEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface);module.exports=SyntheticWheelEvent},{"./SyntheticMouseEvent":625}],630:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");var OBSERVED_ERROR={};var TransactionImpl={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers();if(this.wrapperInitData){this.wrapperInitData.length=0}else{this.wrapperInitData=[]}this._isInTransaction=false},_isInTransaction:false,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(method,scope,a,b,c,d,e,f){!!this.isInTransaction()?process.env.NODE_ENV!=="production"?invariant(false,"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):_prodInvariant("27"):void 0;var errorThrown;var ret;try{this._isInTransaction=true;errorThrown=true;this.initializeAll(0);ret=method.call(scope,a,b,c,d,e,f);errorThrown=false}finally{try{if(errorThrown){try{this.closeAll(0)}catch(err){}}else{this.closeAll(0)}}finally{this._isInTransaction=false}}return ret},initializeAll:function(startIndex){var transactionWrappers=this.transactionWrappers;for(var i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];try{this.wrapperInitData[i]=OBSERVED_ERROR;this.wrapperInitData[i]=wrapper.initialize?wrapper.initialize.call(this):null}finally{if(this.wrapperInitData[i]===OBSERVED_ERROR){try{this.initializeAll(i+1)}catch(err){}}}}},closeAll:function(startIndex){!this.isInTransaction()?process.env.NODE_ENV!=="production"?invariant(false,"Transaction.closeAll(): Cannot close transaction when none are open."):_prodInvariant("28"):void 0;var transactionWrappers=this.transactionWrappers;for(var i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];var initData=this.wrapperInitData[i];var errorThrown;try{errorThrown=true;if(initData!==OBSERVED_ERROR&&wrapper.close){wrapper.close.call(this,initData)}errorThrown=false}finally{if(errorThrown){try{this.closeAll(i+1)}catch(e){}}}}this.wrapperInitData.length=0}};module.exports=TransactionImpl}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],631:[function(require,module,exports){"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(scrollPosition){ViewportMetrics.currentScrollLeft=scrollPosition.x;ViewportMetrics.currentScrollTop=scrollPosition.y}};module.exports=ViewportMetrics},{}],632:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var invariant=require("fbjs/lib/invariant");function accumulateInto(current,next){!(next!=null)?process.env.NODE_ENV!=="production"?invariant(false,"accumulateInto(...): Accumulated items must not be null or undefined."):_prodInvariant("30"):void 0;if(current==null){return next}if(Array.isArray(current)){if(Array.isArray(next)){current.push.apply(current,next);return current}current.push(next);return current}if(Array.isArray(next)){return[current].concat(next)}return[current,next]}module.exports=accumulateInto}).call(this)}).call(this,require("_process"))},{"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518}],633:[function(require,module,exports){"use strict";var MOD=65521;function adler32(data){var a=1;var b=0;var i=0;var l=data.length;var m=l&~3;while(i<m){var n=Math.min(i+4096,m);for(;i<n;i+=4){b+=(a+=data.charCodeAt(i))+(a+=data.charCodeAt(i+1))+(a+=data.charCodeAt(i+2))+(a+=data.charCodeAt(i+3))}a%=MOD;b%=MOD}for(;i<l;i++){b+=a+=data.charCodeAt(i)}a%=MOD;b%=MOD;return a|b<<16}module.exports=adler32},{}],634:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactPropTypesSecret=require("./ReactPropTypesSecret");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}var loggedTypeFailures={};function checkReactTypeSpec(typeSpecs,values,location,componentName,element,debugID){for(var typeSpecName in typeSpecs){if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{!(typeof typeSpecs[typeSpecName]==="function")?process.env.NODE_ENV!=="production"?invariant(false,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):_prodInvariant("84",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):void 0;error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}process.env.NODE_ENV!=="production"?warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName,typeof error):void 0;if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var componentStackInfo="";if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}if(debugID!==null){componentStackInfo=ReactComponentTreeHook.getStackAddendumByID(debugID)}else if(element!==null){componentStackInfo=ReactComponentTreeHook.getCurrentStackAddendum(element)}}process.env.NODE_ENV!=="production"?warning(false,"Failed %s type: %s%s",location,error.message,componentStackInfo):void 0}}}}module.exports=checkReactTypeSpec}).call(this)}).call(this,require("_process"))},{"./ReactPropTypeLocationNames":604,"./ReactPropTypesSecret":605,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525,"react/lib/ReactComponentTreeHook":668}],635:[function(require,module,exports){"use strict";var createMicrosoftUnsafeLocalFunction=function(func){if(typeof MSApp!=="undefined"&&MSApp.execUnsafeLocalFunction){return function(arg0,arg1,arg2,arg3){MSApp.execUnsafeLocalFunction(function(){return func(arg0,arg1,arg2,arg3)})}}else{return func}};module.exports=createMicrosoftUnsafeLocalFunction},{}],636:[function(require,module,exports){(function(process){(function(){"use strict";var CSSProperty=require("./CSSProperty");var warning=require("fbjs/lib/warning");var isUnitlessNumber=CSSProperty.isUnitlessNumber;var styleWarnings={};function dangerousStyleValue(name,value,component){var isEmpty=value==null||typeof value==="boolean"||value==="";if(isEmpty){return""}var isNonNumeric=isNaN(value);if(isNonNumeric||value===0||isUnitlessNumber.hasOwnProperty(name)&&isUnitlessNumber[name]){return""+value}if(typeof value==="string"){if(process.env.NODE_ENV!=="production"){if(component&&value!=="0"){var owner=component._currentElement._owner;var ownerName=owner?owner.getName():null;if(ownerName&&!styleWarnings[ownerName]){styleWarnings[ownerName]={}}var warned=false;if(ownerName){var warnings=styleWarnings[ownerName];warned=warnings[name];if(!warned){warnings[name]=true}}if(!warned){process.env.NODE_ENV!=="production"?warning(false,"a `%s` tag (owner: `%s`) was passed a numeric string value "+"for CSS property `%s` (value: `%s`) which will be treated "+"as a unitless number in a future version of React.",component._currentElement.type,ownerName||"unknown",name,value):void 0}}}value=value.trim()}return value+"px"}module.exports=dangerousStyleValue}).call(this)}).call(this,require("_process"))},{"./CSSProperty":539,_process:25,"fbjs/lib/warning":525}],637:[function(require,module,exports){"use strict";var matchHtmlRegExp=/["'&<>]/;function escapeHtml(string){var str=""+string;var match=matchHtmlRegExp.exec(str);if(!match){return str}var escape;var html="";var index=0;var lastIndex=0;for(index=match.index;index<str.length;index++){switch(str.charCodeAt(index)){case 34:escape="&quot;";break;case 38:escape="&amp;";break;case 39:escape="&#x27;";break;case 60:escape="&lt;";break;case 62:escape="&gt;";break;default:continue}if(lastIndex!==index){html+=str.substring(lastIndex,index)}lastIndex=index+1;html+=escape}return lastIndex!==index?html+str.substring(lastIndex,index):html}function escapeTextContentForBrowser(text){if(typeof text==="boolean"||typeof text==="number"){return""+text}return escapeHtml(text)}module.exports=escapeTextContentForBrowser},{}],638:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var ReactDOMComponentTree=require("./ReactDOMComponentTree");var ReactInstanceMap=require("./ReactInstanceMap");var getHostComponentFromComposite=require("./getHostComponentFromComposite");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");function findDOMNode(componentOrElement){if(process.env.NODE_ENV!=="production"){var owner=ReactCurrentOwner.current;if(owner!==null){process.env.NODE_ENV!=="production"?warning(owner._warnedAboutRefsInRender,"%s is accessing findDOMNode inside its render(). "+"render() should be a pure function of props and state. It should "+"never access something that requires stale data from the previous "+"render, such as refs. Move this logic to componentDidMount and "+"componentDidUpdate instead.",owner.getName()||"A component"):void 0;owner._warnedAboutRefsInRender=true}}if(componentOrElement==null){return null}if(componentOrElement.nodeType===1){return componentOrElement}var inst=ReactInstanceMap.get(componentOrElement);if(inst){inst=getHostComponentFromComposite(inst);return inst?ReactDOMComponentTree.getNodeFromInstance(inst):null}if(typeof componentOrElement.render==="function"){!false?process.env.NODE_ENV!=="production"?invariant(false,"findDOMNode was called on an unmounted component."):_prodInvariant("44"):void 0}else{!false?process.env.NODE_ENV!=="production"?invariant(false,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(componentOrElement)):_prodInvariant("45",Object.keys(componentOrElement)):void 0}}module.exports=findDOMNode}).call(this)}).call(this,require("_process"))},{"./ReactDOMComponentTree":568,"./ReactInstanceMap":596,"./getHostComponentFromComposite":645,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525,"react/lib/ReactCurrentOwner":669}],639:[function(require,module,exports){(function(process){(function(){"use strict";var KeyEscapeUtils=require("./KeyEscapeUtils");var traverseAllChildren=require("./traverseAllChildren");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}function flattenSingleChildIntoContext(traverseContext,child,name,selfDebugID){if(traverseContext&&typeof traverseContext==="object"){var result=traverseContext;var keyUnique=result[name]===undefined;if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("react/lib/ReactComponentTreeHook")}if(!keyUnique){process.env.NODE_ENV!=="production"?warning(false,"flattenChildren(...): Encountered two children with the same key, "+"`%s`. Child keys must be unique; when two children share a key, only "+"the first child will be used.%s",KeyEscapeUtils.unescape(name),ReactComponentTreeHook.getStackAddendumByID(selfDebugID)):void 0}}if(keyUnique&&child!=null){result[name]=child}}}function flattenChildren(children,selfDebugID){if(children==null){return children}var result={};if(process.env.NODE_ENV!=="production"){traverseAllChildren(children,function(traverseContext,child,name){return flattenSingleChildIntoContext(traverseContext,child,name,selfDebugID)},result)}else{traverseAllChildren(children,flattenSingleChildIntoContext,result)}return result}module.exports=flattenChildren}).call(this)}).call(this,require("_process"))},{"./KeyEscapeUtils":557,"./traverseAllChildren":660,_process:25,"fbjs/lib/warning":525,"react/lib/ReactComponentTreeHook":668}],640:[function(require,module,exports){"use strict";function forEachAccumulated(arr,cb,scope){if(Array.isArray(arr)){arr.forEach(cb,scope)}else if(arr){cb.call(scope,arr)}}module.exports=forEachAccumulated},{}],641:[function(require,module,exports){"use strict";function getEventCharCode(nativeEvent){var charCode;var keyCode=nativeEvent.keyCode;if("charCode"in nativeEvent){charCode=nativeEvent.charCode;if(charCode===0&&keyCode===13){charCode=13}}else{charCode=keyCode}if(charCode>=32||charCode===13){return charCode}return 0}module.exports=getEventCharCode},{}],642:[function(require,module,exports){"use strict";var getEventCharCode=require("./getEventCharCode");var normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"};var translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function getEventKey(nativeEvent){if(nativeEvent.key){var key=normalizeKey[nativeEvent.key]||nativeEvent.key;if(key!=="Unidentified"){return key}}if(nativeEvent.type==="keypress"){var charCode=getEventCharCode(nativeEvent);return charCode===13?"Enter":String.fromCharCode(charCode)}if(nativeEvent.type==="keydown"||nativeEvent.type==="keyup"){return translateToKey[nativeEvent.keyCode]||"Unidentified"}return""}module.exports=getEventKey},{"./getEventCharCode":641}],643:[function(require,module,exports){"use strict";var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function modifierStateGetter(keyArg){var syntheticEvent=this;var nativeEvent=syntheticEvent.nativeEvent;if(nativeEvent.getModifierState){return nativeEvent.getModifierState(keyArg)}var keyProp=modifierKeyToProp[keyArg];return keyProp?!!nativeEvent[keyProp]:false}function getEventModifierState(nativeEvent){return modifierStateGetter}module.exports=getEventModifierState},{}],644:[function(require,module,exports){"use strict";function getEventTarget(nativeEvent){var target=nativeEvent.target||nativeEvent.srcElement||window;if(target.correspondingUseElement){target=target.correspondingUseElement}return target.nodeType===3?target.parentNode:target}module.exports=getEventTarget},{}],645:[function(require,module,exports){"use strict";var ReactNodeTypes=require("./ReactNodeTypes");function getHostComponentFromComposite(inst){var type;while((type=inst._renderedNodeType)===ReactNodeTypes.COMPOSITE){inst=inst._renderedComponent}if(type===ReactNodeTypes.HOST){return inst._renderedComponent}else if(type===ReactNodeTypes.EMPTY){return null}}module.exports=getHostComponentFromComposite},{"./ReactNodeTypes":602}],646:[function(require,module,exports){"use strict";var ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}module.exports=getIteratorFn},{}],647:[function(require,module,exports){"use strict";var nextDebugID=1;function getNextDebugID(){return nextDebugID++}module.exports=getNextDebugID},{}],648:[function(require,module,exports){"use strict";function getLeafNode(node){while(node&&node.firstChild){node=node.firstChild}return node}function getSiblingNode(node){while(node){if(node.nextSibling){return node.nextSibling}node=node.parentNode}}function getNodeForCharacterOffset(root,offset){var node=getLeafNode(root);var nodeStart=0;var nodeEnd=0;while(node){if(node.nodeType===3){nodeEnd=nodeStart+node.textContent.length;if(nodeStart<=offset&&nodeEnd>=offset){return{node:node,offset:offset-nodeStart}}nodeStart=nodeEnd}node=getLeafNode(getSiblingNode(node))}}module.exports=getNodeForCharacterOffset},{}],649:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var contentKey=null;function getTextContentAccessor(){if(!contentKey&&ExecutionEnvironment.canUseDOM){contentKey="textContent"in document.documentElement?"textContent":"innerText"}return contentKey}module.exports=getTextContentAccessor},{"fbjs/lib/ExecutionEnvironment":504}],650:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");function makePrefixMap(styleProp,eventName){var prefixes={};prefixes[styleProp.toLowerCase()]=eventName.toLowerCase();prefixes["Webkit"+styleProp]="webkit"+eventName;prefixes["Moz"+styleProp]="moz"+eventName;prefixes["ms"+styleProp]="MS"+eventName;prefixes["O"+styleProp]="o"+eventName.toLowerCase();return prefixes}var vendorPrefixes={animationend:makePrefixMap("Animation","AnimationEnd"),animationiteration:makePrefixMap("Animation","AnimationIteration"),animationstart:makePrefixMap("Animation","AnimationStart"),transitionend:makePrefixMap("Transition","TransitionEnd")};var prefixedEventNames={};var style={};if(ExecutionEnvironment.canUseDOM){style=document.createElement("div").style;if(!("AnimationEvent"in window)){delete vendorPrefixes.animationend.animation;delete vendorPrefixes.animationiteration.animation;delete vendorPrefixes.animationstart.animation}if(!("TransitionEvent"in window)){delete vendorPrefixes.transitionend.transition}}function getVendorPrefixedEventName(eventName){if(prefixedEventNames[eventName]){return prefixedEventNames[eventName]}else if(!vendorPrefixes[eventName]){return eventName}var prefixMap=vendorPrefixes[eventName];for(var styleProp in prefixMap){if(prefixMap.hasOwnProperty(styleProp)&&styleProp in style){return prefixedEventNames[eventName]=prefixMap[styleProp]}}return""}module.exports=getVendorPrefixedEventName},{"fbjs/lib/ExecutionEnvironment":504}],651:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var ReactCompositeComponent=require("./ReactCompositeComponent");var ReactEmptyComponent=require("./ReactEmptyComponent");var ReactHostComponent=require("./ReactHostComponent");var getNextDebugID=require("./getNextDebugID");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactCompositeComponentWrapper=function(element){this.construct(element)};_assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent,{_instantiateReactComponent:instantiateReactComponent});function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name){return" Check the render method of `"+name+"`."}}return""}function isInternalComponentType(type){return typeof type==="function"&&typeof type.prototype!=="undefined"&&typeof type.prototype.mountComponent==="function"&&typeof type.prototype.receiveComponent==="function"}function instantiateReactComponent(node,shouldHaveDebugID){var instance;if(node===null||node===false){instance=ReactEmptyComponent.create(instantiateReactComponent)}else if(typeof node==="object"){var element=node;var type=element.type;if(typeof type!=="function"&&typeof type!=="string"){var info="";if(process.env.NODE_ENV!=="production"){if(type===undefined||typeof type==="object"&&type!==null&&Object.keys(type).length===0){info+=" You likely forgot to export your component from the file "+"it's defined in."}}info+=getDeclarationErrorAddendum(element._owner);!false?process.env.NODE_ENV!=="production"?invariant(false,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",type==null?type:typeof type,info):_prodInvariant("130",type==null?type:typeof type,info):void 0}if(typeof element.type==="string"){instance=ReactHostComponent.createInternalComponent(element)}else if(isInternalComponentType(element.type)){instance=new element.type(element);if(!instance.getHostNode){instance.getHostNode=instance.getNativeNode}}else{instance=new ReactCompositeComponentWrapper(element)}}else if(typeof node==="string"||typeof node==="number"){instance=ReactHostComponent.createInstanceForText(node)}else{!false?process.env.NODE_ENV!=="production"?invariant(false,"Encountered invalid React node of type %s",typeof node):_prodInvariant("131",typeof node):void 0}if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(typeof instance.mountComponent==="function"&&typeof instance.receiveComponent==="function"&&typeof instance.getHostNode==="function"&&typeof instance.unmountComponent==="function","Only React Components can be mounted."):void 0}instance._mountIndex=0;instance._mountImage=null;if(process.env.NODE_ENV!=="production"){instance._debugID=shouldHaveDebugID?getNextDebugID():0}if(process.env.NODE_ENV!=="production"){if(Object.preventExtensions){Object.preventExtensions(instance)}}return instance}module.exports=instantiateReactComponent}).call(this)}).call(this,require("_process"))},{"./ReactCompositeComponent":564,"./ReactEmptyComponent":587,"./ReactHostComponent":592,"./getNextDebugID":647,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525,"object-assign":533}],652:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var useHasFeature;if(ExecutionEnvironment.canUseDOM){useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==true}function isEventSupported(eventNameSuffix,capture){if(!ExecutionEnvironment.canUseDOM||capture&&!("addEventListener"in document)){return false}var eventName="on"+eventNameSuffix;var isSupported=eventName in document;if(!isSupported){var element=document.createElement("div");element.setAttribute(eventName,"return;");isSupported=typeof element[eventName]==="function"}if(!isSupported&&useHasFeature&&eventNameSuffix==="wheel"){isSupported=document.implementation.hasFeature("Events.wheel","3.0")}return isSupported}module.exports=isEventSupported},{"fbjs/lib/ExecutionEnvironment":504}],653:[function(require,module,exports){"use strict";var supportedInputTypes={color:true,date:true,datetime:true,"datetime-local":true,email:true,month:true,number:true,password:true,range:true,search:true,tel:true,text:true,time:true,url:true,week:true};function isTextInputElement(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();if(nodeName==="input"){return!!supportedInputTypes[elem.type]}if(nodeName==="textarea"){return true}return false}module.exports=isTextInputElement},{}],654:[function(require,module,exports){"use strict";var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");function quoteAttributeValueForBrowser(value){return'"'+escapeTextContentForBrowser(value)+'"'}module.exports=quoteAttributeValueForBrowser},{"./escapeTextContentForBrowser":637}],655:[function(require,module,exports){"use strict";function reactProdInvariant(code){var argCount=arguments.length-1;var message="Minified React error #"+code+"; visit "+"http://facebook.github.io/react/docs/error-decoder.html?invariant="+code;for(var argIdx=0;argIdx<argCount;argIdx++){message+="&args[]="+encodeURIComponent(arguments[argIdx+1])}message+=" for the full message or use the non-minified dev environment"+" for full errors and additional helpful warnings.";var error=new Error(message);error.name="Invariant Violation";error.framesToPop=1;throw error}module.exports=reactProdInvariant},{}],656:[function(require,module,exports){"use strict";var ReactMount=require("./ReactMount");module.exports=ReactMount.renderSubtreeIntoContainer},{"./ReactMount":600}],657:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var DOMNamespaces=require("./DOMNamespaces");var WHITESPACE_TEST=/^[ \r\n\t\f]/;var NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/;var createMicrosoftUnsafeLocalFunction=require("./createMicrosoftUnsafeLocalFunction");var reusableSVGContainer;var setInnerHTML=createMicrosoftUnsafeLocalFunction(function(node,html){if(node.namespaceURI===DOMNamespaces.svg&&!("innerHTML"in node)){reusableSVGContainer=reusableSVGContainer||document.createElement("div");reusableSVGContainer.innerHTML="<svg>"+html+"</svg>";var svgNode=reusableSVGContainer.firstChild;while(svgNode.firstChild){node.appendChild(svgNode.firstChild)}}else{node.innerHTML=html}});if(ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ";if(testElement.innerHTML===""){setInnerHTML=function(node,html){if(node.parentNode){node.parentNode.replaceChild(node,node)}if(WHITESPACE_TEST.test(html)||html[0]==="<"&&NONVISIBLE_TEST.test(html)){node.innerHTML=String.fromCharCode(65279)+html;var textNode=node.firstChild;if(textNode.data.length===1){node.removeChild(textNode)}else{textNode.deleteData(0,1)}}else{node.innerHTML=html}}}testElement=null}module.exports=setInnerHTML},{"./DOMNamespaces":545,"./createMicrosoftUnsafeLocalFunction":635,"fbjs/lib/ExecutionEnvironment":504}],658:[function(require,module,exports){"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment");var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");var setInnerHTML=require("./setInnerHTML");var setTextContent=function(node,text){if(text){var firstChild=node.firstChild;if(firstChild&&firstChild===node.lastChild&&firstChild.nodeType===3){firstChild.nodeValue=text;return}}node.textContent=text};if(ExecutionEnvironment.canUseDOM){if(!("textContent"in document.documentElement)){setTextContent=function(node,text){if(node.nodeType===3){node.nodeValue=text;return}setInnerHTML(node,escapeTextContentForBrowser(text))}}}module.exports=setTextContent},{"./escapeTextContentForBrowser":637,"./setInnerHTML":657,"fbjs/lib/ExecutionEnvironment":504}],659:[function(require,module,exports){"use strict";function shouldUpdateReactComponent(prevElement,nextElement){var prevEmpty=prevElement===null||prevElement===false;var nextEmpty=nextElement===null||nextElement===false;if(prevEmpty||nextEmpty){return prevEmpty===nextEmpty}var prevType=typeof prevElement;var nextType=typeof nextElement;if(prevType==="string"||prevType==="number"){return nextType==="string"||nextType==="number"}else{return nextType==="object"&&prevElement.type===nextElement.type&&prevElement.key===nextElement.key}}module.exports=shouldUpdateReactComponent},{}],660:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("react/lib/ReactCurrentOwner");var REACT_ELEMENT_TYPE=require("./ReactElementSymbol");var getIteratorFn=require("./getIteratorFn");var invariant=require("fbjs/lib/invariant");var KeyEscapeUtils=require("./KeyEscapeUtils");var warning=require("fbjs/lib/warning");var SEPARATOR=".";var SUBSEPARATOR=":";var didWarnAboutMaps=false;function getComponentKey(component,index){if(component&&typeof component==="object"&&component.key!=null){return KeyEscapeUtils.escape(component.key)}return index.toString(36)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if(type==="undefined"||type==="boolean"){children=null}if(children===null||type==="string"||type==="number"||type==="object"&&children.$$typeof===REACT_ELEMENT_TYPE){callback(traverseContext,children,nameSoFar===""?SEPARATOR+getComponentKey(children,0):nameSoFar);return 1}var child;var nextName;var subtreeCount=0;var nextNamePrefix=nameSoFar===""?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children)){for(var i=0;i<children.length;i++){child=children[i];nextName=nextNamePrefix+getComponentKey(child,i);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var iterator=iteratorFn.call(children);var step;if(iteratorFn!==children.entries){var ii=0;while(!(step=iterator.next()).done){child=step.value;nextName=nextNamePrefix+getComponentKey(child,ii++);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{if(process.env.NODE_ENV!=="production"){var mapsAsChildrenAddendum="";if(ReactCurrentOwner.current){var mapsAsChildrenOwnerName=ReactCurrentOwner.current.getName();if(mapsAsChildrenOwnerName){mapsAsChildrenAddendum=" Check the render method of `"+mapsAsChildrenOwnerName+"`."}}process.env.NODE_ENV!=="production"?warning(didWarnAboutMaps,"Using Maps as children is not yet fully supported. It is an "+"experimental feature that might be removed. Convert it to a "+"sequence / iterable of keyed ReactElements instead.%s",mapsAsChildrenAddendum):void 0;didWarnAboutMaps=true}while(!(step=iterator.next()).done){var entry=step.value;if(entry){child=entry[1];nextName=nextNamePrefix+KeyEscapeUtils.escape(entry[0])+SUBSEPARATOR+getComponentKey(child,0);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}}}else if(type==="object"){var addendum="";if(process.env.NODE_ENV!=="production"){addendum=" If you meant to render a collection of children, use an array "+"instead or wrap the object using createFragment(object) from the "+"React add-ons.";if(children._isReactElement){addendum=" It looks like you're using an element created by a different "+"version of React. Make sure to use only one copy of React."}if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name){addendum+=" Check the render method of `"+name+"`."}}}var childrenString=String(children);!false?process.env.NODE_ENV!=="production"?invariant(false,"Objects are not valid as a React child (found: %s).%s",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):_prodInvariant("31",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):void 0}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){if(children==null){return 0}return traverseAllChildrenImpl(children,"",callback,traverseContext)}module.exports=traverseAllChildren}).call(this)}).call(this,require("_process"))},{"./KeyEscapeUtils":557,"./ReactElementSymbol":586,"./getIteratorFn":646,"./reactProdInvariant":655,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525,"react/lib/ReactCurrentOwner":669}],661:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var emptyFunction=require("fbjs/lib/emptyFunction");var warning=require("fbjs/lib/warning");var validateDOMNesting=emptyFunction;if(process.env.NODE_ENV!=="production"){var specialTags=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"];var inScopeTags=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"];var buttonScopeTags=inScopeTags.concat(["button"]);var impliedEndTags=["dd","dt","li","option","optgroup","p","rp","rt"];var emptyAncestorInfo={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};var updatedAncestorInfo=function(oldInfo,tag,instance){var ancestorInfo=_assign({},oldInfo||emptyAncestorInfo);var info={tag:tag,instance:instance};if(inScopeTags.indexOf(tag)!==-1){ancestorInfo.aTagInScope=null;ancestorInfo.buttonTagInScope=null;ancestorInfo.nobrTagInScope=null}if(buttonScopeTags.indexOf(tag)!==-1){ancestorInfo.pTagInButtonScope=null}if(specialTags.indexOf(tag)!==-1&&tag!=="address"&&tag!=="div"&&tag!=="p"){ancestorInfo.listItemTagAutoclosing=null;ancestorInfo.dlItemTagAutoclosing=null}ancestorInfo.current=info;if(tag==="form"){ancestorInfo.formTag=info}if(tag==="a"){ancestorInfo.aTagInScope=info}if(tag==="button"){ancestorInfo.buttonTagInScope=info}if(tag==="nobr"){ancestorInfo.nobrTagInScope=info}if(tag==="p"){ancestorInfo.pTagInButtonScope=info}if(tag==="li"){ancestorInfo.listItemTagAutoclosing=info}if(tag==="dd"||tag==="dt"){ancestorInfo.dlItemTagAutoclosing=info}return ancestorInfo};var isTagValidWithParent=function(tag,parentTag){switch(parentTag){case"select":return tag==="option"||tag==="optgroup"||tag==="#text";case"optgroup":return tag==="option"||tag==="#text";case"option":return tag==="#text";case"tr":return tag==="th"||tag==="td"||tag==="style"||tag==="script"||tag==="template";case"tbody":case"thead":case"tfoot":return tag==="tr"||tag==="style"||tag==="script"||tag==="template";case"colgroup":return tag==="col"||tag==="template";case"table":return tag==="caption"||tag==="colgroup"||tag==="tbody"||tag==="tfoot"||tag==="thead"||tag==="style"||tag==="script"||tag==="template";case"head":return tag==="base"||tag==="basefont"||tag==="bgsound"||tag==="link"||tag==="meta"||tag==="title"||tag==="noscript"||tag==="noframes"||tag==="style"||tag==="script"||tag==="template";case"html":return tag==="head"||tag==="body";case"#document":return tag==="html"}switch(tag){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return parentTag!=="h1"&&parentTag!=="h2"&&parentTag!=="h3"&&parentTag!=="h4"&&parentTag!=="h5"&&parentTag!=="h6";case"rp":case"rt":return impliedEndTags.indexOf(parentTag)===-1;case"body":case"caption":case"col":case"colgroup":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return parentTag==null}return true};var findInvalidAncestorForTag=function(tag,ancestorInfo){switch(tag){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return ancestorInfo.pTagInButtonScope;case"form":return ancestorInfo.formTag||ancestorInfo.pTagInButtonScope;case"li":return ancestorInfo.listItemTagAutoclosing;case"dd":case"dt":return ancestorInfo.dlItemTagAutoclosing;case"button":return ancestorInfo.buttonTagInScope;case"a":return ancestorInfo.aTagInScope;case"nobr":return ancestorInfo.nobrTagInScope}return null};var findOwnerStack=function(instance){if(!instance){return[]}var stack=[];do{stack.push(instance)}while(instance=instance._currentElement._owner);stack.reverse();return stack};var didWarn={};validateDOMNesting=function(childTag,childText,childInstance,ancestorInfo){ancestorInfo=ancestorInfo||emptyAncestorInfo;var parentInfo=ancestorInfo.current;var parentTag=parentInfo&&parentInfo.tag;if(childText!=null){process.env.NODE_ENV!=="production"?warning(childTag==null,"validateDOMNesting: when childText is passed, childTag should be null"):void 0;childTag="#text"}var invalidParent=isTagValidWithParent(childTag,parentTag)?null:parentInfo;var invalidAncestor=invalidParent?null:findInvalidAncestorForTag(childTag,ancestorInfo);var problematic=invalidParent||invalidAncestor;if(problematic){var ancestorTag=problematic.tag;var ancestorInstance=problematic.instance;var childOwner=childInstance&&childInstance._currentElement._owner;var ancestorOwner=ancestorInstance&&ancestorInstance._currentElement._owner;var childOwners=findOwnerStack(childOwner);var ancestorOwners=findOwnerStack(ancestorOwner);var minStackLen=Math.min(childOwners.length,ancestorOwners.length);var i;var deepestCommon=-1;for(i=0;i<minStackLen;i++){if(childOwners[i]===ancestorOwners[i]){deepestCommon=i}else{break}}var UNKNOWN="(unknown)";var childOwnerNames=childOwners.slice(deepestCommon+1).map(function(inst){return inst.getName()||UNKNOWN});var ancestorOwnerNames=ancestorOwners.slice(deepestCommon+1).map(function(inst){return inst.getName()||UNKNOWN});var ownerInfo=[].concat(deepestCommon!==-1?childOwners[deepestCommon].getName()||UNKNOWN:[],ancestorOwnerNames,ancestorTag,invalidAncestor?["..."]:[],childOwnerNames,childTag).join(" > ");var warnKey=!!invalidParent+"|"+childTag+"|"+ancestorTag+"|"+ownerInfo;if(didWarn[warnKey]){return}didWarn[warnKey]=true;var tagDisplayName=childTag;var whitespaceInfo="";if(childTag==="#text"){if(/\S/.test(childText)){tagDisplayName="Text nodes"}else{tagDisplayName="Whitespace text nodes";whitespaceInfo=" Make sure you don't have any extra whitespace between tags on "+"each line of your source code."}}else{tagDisplayName="<"+childTag+">"}if(invalidParent){var info="";if(ancestorTag==="table"&&childTag==="tr"){info+=" Add a <tbody> to your code to match the DOM tree generated by "+"the browser."}process.env.NODE_ENV!=="production"?warning(false,"validateDOMNesting(...): %s cannot appear as a child of <%s>.%s "+"See %s.%s",tagDisplayName,ancestorTag,whitespaceInfo,ownerInfo,info):void 0}else{process.env.NODE_ENV!=="production"?warning(false,"validateDOMNesting(...): %s cannot appear as a descendant of "+"<%s>. See %s.",tagDisplayName,ancestorTag,ownerInfo):void 0}}};validateDOMNesting.updatedAncestorInfo=updatedAncestorInfo;validateDOMNesting.isTagValidInContext=function(tag,ancestorInfo){ancestorInfo=ancestorInfo||emptyAncestorInfo;var parentInfo=ancestorInfo.current;var parentTag=parentInfo&&parentInfo.tag;return isTagValidWithParent(tag,parentTag)&&!findInvalidAncestorForTag(tag,ancestorInfo)}}module.exports=validateDOMNesting}).call(this)}).call(this,require("_process"))},{_process:25,"fbjs/lib/emptyFunction":510,"fbjs/lib/warning":525,"object-assign":533}],662:[function(require,module,exports){arguments[4][557][0].apply(exports,arguments)},{dup:557}],663:[function(require,module,exports){arguments[4][559][0].apply(exports,arguments)},{"./reactProdInvariant":684,_process:25,dup:559,"fbjs/lib/invariant":518}],664:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var ReactChildren=require("./ReactChildren");var ReactComponent=require("./ReactComponent");var ReactPureComponent=require("./ReactPureComponent");var ReactClass=require("./ReactClass");var ReactDOMFactories=require("./ReactDOMFactories");var ReactElement=require("./ReactElement");var ReactPropTypes=require("./ReactPropTypes");var ReactVersion=require("./ReactVersion");var onlyChild=require("./onlyChild");var warning=require("fbjs/lib/warning");var createElement=ReactElement.createElement;var createFactory=ReactElement.createFactory;var cloneElement=ReactElement.cloneElement;if(process.env.NODE_ENV!=="production"){var ReactElementValidator=require("./ReactElementValidator");createElement=ReactElementValidator.createElement;createFactory=ReactElementValidator.createFactory;cloneElement=ReactElementValidator.cloneElement}var __spread=_assign;if(process.env.NODE_ENV!=="production"){var warned=false;__spread=function(){process.env.NODE_ENV!=="production"?warning(warned,"React.__spread is deprecated and should not be used. Use "+"Object.assign directly or another helper function with similar "+"semantics. You may be seeing this warning due to your compiler. "+"See https://fb.me/react-spread-deprecation for more details."):void 0;warned=true;return _assign.apply(null,arguments)}}var React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactComponent,PureComponent:ReactPureComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:ReactClass.createClass,createFactory:createFactory,createMixin:function(mixin){return mixin},DOM:ReactDOMFactories,version:ReactVersion,__spread:__spread};module.exports=React}).call(this)}).call(this,require("_process"))},{"./ReactChildren":665,"./ReactClass":666,"./ReactComponent":667,"./ReactDOMFactories":670,"./ReactElement":671,"./ReactElementValidator":673,"./ReactPropTypes":676,"./ReactPureComponent":678,"./ReactVersion":679,"./onlyChild":683,_process:25,"fbjs/lib/warning":525,"object-assign":533}],665:[function(require,module,exports){"use strict";var PooledClass=require("./PooledClass");var ReactElement=require("./ReactElement");var emptyFunction=require("fbjs/lib/emptyFunction");var traverseAllChildren=require("./traverseAllChildren");var twoArgumentPooler=PooledClass.twoArgumentPooler;var fourArgumentPooler=PooledClass.fourArgumentPooler;var userProvidedKeyEscapeRegex=/\/+/g;function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,"$&/")}function ForEachBookKeeping(forEachFunction,forEachContext){this.func=forEachFunction;this.context=forEachContext;this.count=0}ForEachBookKeeping.prototype.destructor=function(){this.func=null;this.context=null;this.count=0};PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler);function forEachSingleChild(bookKeeping,child,name){var func=bookKeeping.func,context=bookKeeping.context;func.call(context,child,bookKeeping.count++)}function forEachChildren(children,forEachFunc,forEachContext){if(children==null){return children}var traverseContext=ForEachBookKeeping.getPooled(forEachFunc,forEachContext);traverseAllChildren(children,forEachSingleChild,traverseContext);ForEachBookKeeping.release(traverseContext)}function MapBookKeeping(mapResult,keyPrefix,mapFunction,mapContext){this.result=mapResult;this.keyPrefix=keyPrefix;this.func=mapFunction;this.context=mapContext;this.count=0}MapBookKeeping.prototype.destructor=function(){this.result=null;this.keyPrefix=null;this.func=null;this.context=null;this.count=0};PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);function mapSingleChildIntoContext(bookKeeping,child,childKey){var result=bookKeeping.result,keyPrefix=bookKeeping.keyPrefix,func=bookKeeping.func,context=bookKeeping.context;var mappedChild=func.call(context,child,bookKeeping.count++);if(Array.isArray(mappedChild)){mapIntoWithKeyPrefixInternal(mappedChild,result,childKey,emptyFunction.thatReturnsArgument)}else if(mappedChild!=null){if(ReactElement.isValidElement(mappedChild)){mappedChild=ReactElement.cloneAndReplaceKey(mappedChild,keyPrefix+(mappedChild.key&&(!child||child.key!==mappedChild.key)?escapeUserProvidedKey(mappedChild.key)+"/":"")+childKey)}result.push(mappedChild)}}function mapIntoWithKeyPrefixInternal(children,array,prefix,func,context){var escapedPrefix="";if(prefix!=null){escapedPrefix=escapeUserProvidedKey(prefix)+"/"}var traverseContext=MapBookKeeping.getPooled(array,escapedPrefix,func,context);traverseAllChildren(children,mapSingleChildIntoContext,traverseContext);MapBookKeeping.release(traverseContext)}function mapChildren(children,func,context){if(children==null){return children}var result=[];mapIntoWithKeyPrefixInternal(children,result,null,func,context);return result}function forEachSingleChildDummy(traverseContext,child,name){return null}function countChildren(children,context){return traverseAllChildren(children,forEachSingleChildDummy,null)}function toArray(children){var result=[];mapIntoWithKeyPrefixInternal(children,result,null,emptyFunction.thatReturnsArgument);return result}var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren},{"./PooledClass":663,"./ReactElement":671,"./traverseAllChildren":685,"fbjs/lib/emptyFunction":510}],666:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign");var ReactComponent=require("./ReactComponent");var ReactElement=require("./ReactElement");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue");var emptyObject=require("fbjs/lib/emptyObject");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var MIXINS_KEY="mixins";function identity(fn){return fn}var injectedMixins=[];var ReactClassInterface={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"};var RESERVED_SPEC_KEYS={displayName:function(Constructor,displayName){Constructor.displayName=displayName},mixins:function(Constructor,mixins){if(mixins){for(var i=0;i<mixins.length;i++){mixSpecIntoComponent(Constructor,mixins[i])}}},childContextTypes:function(Constructor,childContextTypes){if(process.env.NODE_ENV!=="production"){validateTypeDef(Constructor,childContextTypes,"childContext")}Constructor.childContextTypes=_assign({},Constructor.childContextTypes,childContextTypes)},contextTypes:function(Constructor,contextTypes){if(process.env.NODE_ENV!=="production"){validateTypeDef(Constructor,contextTypes,"context")}Constructor.contextTypes=_assign({},Constructor.contextTypes,contextTypes)},getDefaultProps:function(Constructor,getDefaultProps){if(Constructor.getDefaultProps){Constructor.getDefaultProps=createMergedResultFunction(Constructor.getDefaultProps,getDefaultProps)}else{Constructor.getDefaultProps=getDefaultProps}},propTypes:function(Constructor,propTypes){if(process.env.NODE_ENV!=="production"){validateTypeDef(Constructor,propTypes,"prop")}Constructor.propTypes=_assign({},Constructor.propTypes,propTypes)},statics:function(Constructor,statics){mixStaticSpecIntoComponent(Constructor,statics)},autobind:function(){}};function validateTypeDef(Constructor,typeDef,location){for(var propName in typeDef){if(typeDef.hasOwnProperty(propName)){process.env.NODE_ENV!=="production"?warning(typeof typeDef[propName]==="function","%s: %s type `%s` is invalid; it must be a function, usually from "+"React.PropTypes.",Constructor.displayName||"ReactClass",ReactPropTypeLocationNames[location],propName):void 0}}}function validateMethodOverride(isAlreadyDefined,name){var specPolicy=ReactClassInterface.hasOwnProperty(name)?ReactClassInterface[name]:null;if(ReactClassMixin.hasOwnProperty(name)){!(specPolicy==="OVERRIDE_BASE")?process.env.NODE_ENV!=="production"?invariant(false,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",name):_prodInvariant("73",name):void 0}if(isAlreadyDefined){!(specPolicy==="DEFINE_MANY"||specPolicy==="DEFINE_MANY_MERGED")?process.env.NODE_ENV!=="production"?invariant(false,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",name):_prodInvariant("74",name):void 0}}function mixSpecIntoComponent(Constructor,spec){if(!spec){if(process.env.NODE_ENV!=="production"){var typeofSpec=typeof spec;var isMixinValid=typeofSpec==="object"&&spec!==null;process.env.NODE_ENV!=="production"?warning(isMixinValid,"%s: You're attempting to include a mixin that is either null "+"or not an object. Check the mixins included by the component, "+"as well as any mixins they include themselves. "+"Expected object but got %s.",Constructor.displayName||"ReactClass",spec===null?null:typeofSpec):void 0}return}!(typeof spec!=="function")?process.env.NODE_ENV!=="production"?invariant(false,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."):_prodInvariant("75"):void 0;!!ReactElement.isValidElement(spec)?process.env.NODE_ENV!=="production"?invariant(false,"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object."):_prodInvariant("76"):void 0;var proto=Constructor.prototype;var autoBindPairs=proto.__reactAutoBindPairs;if(spec.hasOwnProperty(MIXINS_KEY)){RESERVED_SPEC_KEYS.mixins(Constructor,spec.mixins)}for(var name in spec){if(!spec.hasOwnProperty(name)){continue}if(name===MIXINS_KEY){continue}var property=spec[name];var isAlreadyDefined=proto.hasOwnProperty(name);validateMethodOverride(isAlreadyDefined,name);if(RESERVED_SPEC_KEYS.hasOwnProperty(name)){RESERVED_SPEC_KEYS[name](Constructor,property)}else{var isReactClassMethod=ReactClassInterface.hasOwnProperty(name);var isFunction=typeof property==="function";var shouldAutoBind=isFunction&&!isReactClassMethod&&!isAlreadyDefined&&spec.autobind!==false;if(shouldAutoBind){autoBindPairs.push(name,property);proto[name]=property}else{if(isAlreadyDefined){var specPolicy=ReactClassInterface[name];!(isReactClassMethod&&(specPolicy==="DEFINE_MANY_MERGED"||specPolicy==="DEFINE_MANY"))?process.env.NODE_ENV!=="production"?invariant(false,"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",specPolicy,name):_prodInvariant("77",specPolicy,name):void 0;if(specPolicy==="DEFINE_MANY_MERGED"){proto[name]=createMergedResultFunction(proto[name],property)}else if(specPolicy==="DEFINE_MANY"){proto[name]=createChainedFunction(proto[name],property)}}else{proto[name]=property;if(process.env.NODE_ENV!=="production"){if(typeof property==="function"&&spec.displayName){proto[name].displayName=spec.displayName+"_"+name}}}}}}}function mixStaticSpecIntoComponent(Constructor,statics){if(!statics){return}for(var name in statics){var property=statics[name];if(!statics.hasOwnProperty(name)){continue}var isReserved=name in RESERVED_SPEC_KEYS;!!isReserved?process.env.NODE_ENV!=="production"?invariant(false,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',name):_prodInvariant("78",name):void 0;var isInherited=name in Constructor;!!isInherited?process.env.NODE_ENV!=="production"?invariant(false,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",name):_prodInvariant("79",name):void 0;Constructor[name]=property}}function mergeIntoWithNoDuplicateKeys(one,two){!(one&&two&&typeof one==="object"&&typeof two==="object")?process.env.NODE_ENV!=="production"?invariant(false,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."):_prodInvariant("80"):void 0;for(var key in two){if(two.hasOwnProperty(key)){!(one[key]===undefined)?process.env.NODE_ENV!=="production"?invariant(false,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",key):_prodInvariant("81",key):void 0;one[key]=two[key]}}return one}function createMergedResultFunction(one,two){return function mergedResult(){var a=one.apply(this,arguments);var b=two.apply(this,arguments);if(a==null){return b}else if(b==null){return a}var c={};mergeIntoWithNoDuplicateKeys(c,a);mergeIntoWithNoDuplicateKeys(c,b);return c}}function createChainedFunction(one,two){return function chainedFunction(){one.apply(this,arguments);two.apply(this,arguments)}}function bindAutoBindMethod(component,method){var boundMethod=method.bind(component);if(process.env.NODE_ENV!=="production"){boundMethod.__reactBoundContext=component;boundMethod.__reactBoundMethod=method;boundMethod.__reactBoundArguments=null;var componentName=component.constructor.displayName;var _bind=boundMethod.bind;boundMethod.bind=function(newThis){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}if(newThis!==component&&newThis!==null){process.env.NODE_ENV!=="production"?warning(false,"bind(): React component methods may only be bound to the "+"component instance. See %s",componentName):void 0}else if(!args.length){process.env.NODE_ENV!=="production"?warning(false,"bind(): You are binding a component method to the component. "+"React does this for you automatically in a high-performance "+"way, so you can safely remove this call. See %s",componentName):void 0;return boundMethod}var reboundMethod=_bind.apply(boundMethod,arguments);reboundMethod.__reactBoundContext=component;reboundMethod.__reactBoundMethod=method;reboundMethod.__reactBoundArguments=args;return reboundMethod}}return boundMethod}function bindAutoBindMethods(component){var pairs=component.__reactAutoBindPairs;for(var i=0;i<pairs.length;i+=2){var autoBindKey=pairs[i];var method=pairs[i+1];component[autoBindKey]=bindAutoBindMethod(component,method)}}var ReactClassMixin={replaceState:function(newState,callback){this.updater.enqueueReplaceState(this,newState);if(callback){this.updater.enqueueCallback(this,callback,"replaceState")}},isMounted:function(){return this.updater.isMounted(this)}};var ReactClassComponent=function(){};_assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(spec){var Constructor=identity(function(props,context,updater){if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(this instanceof Constructor,"Something is calling a React component directly. Use a factory or "+"JSX instead. See: https://fb.me/react-legacyfactory"):void 0}if(this.__reactAutoBindPairs.length){bindAutoBindMethods(this)}this.props=props;this.context=context;this.refs=emptyObject;this.updater=updater||ReactNoopUpdateQueue;this.state=null;var initialState=this.getInitialState?this.getInitialState():null;if(process.env.NODE_ENV!=="production"){if(initialState===undefined&&this.getInitialState._isMockFunction){initialState=null}}!(typeof initialState==="object"&&!Array.isArray(initialState))?process.env.NODE_ENV!=="production"?invariant(false,"%s.getInitialState(): must return an object or null",Constructor.displayName||"ReactCompositeComponent"):_prodInvariant("82",Constructor.displayName||"ReactCompositeComponent"):void 0;this.state=initialState});Constructor.prototype=new ReactClassComponent;Constructor.prototype.constructor=Constructor;Constructor.prototype.__reactAutoBindPairs=[];injectedMixins.forEach(mixSpecIntoComponent.bind(null,Constructor));mixSpecIntoComponent(Constructor,spec);if(Constructor.getDefaultProps){Constructor.defaultProps=Constructor.getDefaultProps()}if(process.env.NODE_ENV!=="production"){if(Constructor.getDefaultProps){Constructor.getDefaultProps.isReactClassApproved={}}if(Constructor.prototype.getInitialState){Constructor.prototype.getInitialState.isReactClassApproved={}}}!Constructor.prototype.render?process.env.NODE_ENV!=="production"?invariant(false,"createClass(...): Class specification must implement a `render` method."):_prodInvariant("83"):void 0;if(process.env.NODE_ENV!=="production"){process.env.NODE_ENV!=="production"?warning(!Constructor.prototype.componentShouldUpdate,"%s has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value.",spec.displayName||"A component"):void 0;process.env.NODE_ENV!=="production"?warning(!Constructor.prototype.componentWillRecieveProps,"%s has a method called "+"componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",spec.displayName||"A component"):void 0}for(var methodName in ReactClassInterface){if(!Constructor.prototype[methodName]){Constructor.prototype[methodName]=null}}return Constructor},injection:{injectMixin:function(mixin){injectedMixins.push(mixin)}}};module.exports=ReactClass}).call(this)}).call(this,require("_process"))},{"./ReactComponent":667,"./ReactElement":671,"./ReactNoopUpdateQueue":674,"./ReactPropTypeLocationNames":675,"./reactProdInvariant":684,_process:25,"fbjs/lib/emptyObject":511,"fbjs/lib/invariant":518,"fbjs/lib/warning":525,"object-assign":533}],667:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue");var canDefineProperty=require("./canDefineProperty");var emptyObject=require("fbjs/lib/emptyObject");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");function ReactComponent(props,context,updater){this.props=props;this.context=context;this.refs=emptyObject;this.updater=updater||ReactNoopUpdateQueue}ReactComponent.prototype.isReactComponent={};ReactComponent.prototype.setState=function(partialState,callback){!(typeof partialState==="object"||typeof partialState==="function"||partialState==null)?process.env.NODE_ENV!=="production"?invariant(false,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):_prodInvariant("85"):void 0;this.updater.enqueueSetState(this,partialState);if(callback){this.updater.enqueueCallback(this,callback,"setState")}};ReactComponent.prototype.forceUpdate=function(callback){this.updater.enqueueForceUpdate(this);if(callback){this.updater.enqueueCallback(this,callback,"forceUpdate")}};if(process.env.NODE_ENV!=="production"){var deprecatedAPIs={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in "+"componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see "+"https://github.com/facebook/react/issues/3236)."]};var defineDeprecationWarning=function(methodName,info){if(canDefineProperty){Object.defineProperty(ReactComponent.prototype,methodName,{get:function(){process.env.NODE_ENV!=="production"?warning(false,"%s(...) is deprecated in plain JavaScript React classes. %s",info[0],info[1]):void 0;return undefined}})}};for(var fnName in deprecatedAPIs){if(deprecatedAPIs.hasOwnProperty(fnName)){defineDeprecationWarning(fnName,deprecatedAPIs[fnName])}}}module.exports=ReactComponent}).call(this)}).call(this,require("_process"))},{"./ReactNoopUpdateQueue":674,"./canDefineProperty":680,"./reactProdInvariant":684,_process:25,"fbjs/lib/emptyObject":511,"fbjs/lib/invariant":518,"fbjs/lib/warning":525}],668:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("./ReactCurrentOwner");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");function isNative(fn){var funcToString=Function.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var source=funcToString.call(fn);return reIsNative.test(source)}catch(err){return false}}var canUseCollections=typeof Array.from==="function"&&typeof Map==="function"&&isNative(Map)&&Map.prototype!=null&&typeof Map.prototype.keys==="function"&&isNative(Map.prototype.keys)&&typeof Set==="function"&&isNative(Set)&&Set.prototype!=null&&typeof Set.prototype.keys==="function"&&isNative(Set.prototype.keys);var setItem;var getItem;var removeItem;var getItemIDs;var addRoot;var removeRoot;var getRootIDs;if(canUseCollections){var itemMap=new Map;var rootIDSet=new Set;setItem=function(id,item){itemMap.set(id,item)};getItem=function(id){return itemMap.get(id)};removeItem=function(id){itemMap["delete"](id)};getItemIDs=function(){return Array.from(itemMap.keys())};addRoot=function(id){rootIDSet.add(id)};removeRoot=function(id){rootIDSet["delete"](id)};getRootIDs=function(){return Array.from(rootIDSet.keys())}}else{var itemByKey={};var rootByKey={};var getKeyFromID=function(id){return"."+id};var getIDFromKey=function(key){return parseInt(key.substr(1),10)};setItem=function(id,item){var key=getKeyFromID(id);itemByKey[key]=item};getItem=function(id){var key=getKeyFromID(id);return itemByKey[key]};removeItem=function(id){var key=getKeyFromID(id);delete itemByKey[key]};getItemIDs=function(){return Object.keys(itemByKey).map(getIDFromKey)};addRoot=function(id){var key=getKeyFromID(id);rootByKey[key]=true};removeRoot=function(id){var key=getKeyFromID(id);delete rootByKey[key]};getRootIDs=function(){return Object.keys(rootByKey).map(getIDFromKey)}}var unmountedIDs=[];function purgeDeep(id){var item=getItem(id);if(item){var childIDs=item.childIDs;removeItem(id);childIDs.forEach(purgeDeep)}}function describeComponentFrame(name,source,ownerName){return"\n    in "+(name||"Unknown")+(source?" (at "+source.fileName.replace(/^.*[\\\/]/,"")+":"+source.lineNumber+")":ownerName?" (created by "+ownerName+")":"")}function getDisplayName(element){if(element==null){return"#empty"}else if(typeof element==="string"||typeof element==="number"){return"#text"}else if(typeof element.type==="string"){return element.type}else{return element.type.displayName||element.type.name||"Unknown"}}function describeID(id){var name=ReactComponentTreeHook.getDisplayName(id);var element=ReactComponentTreeHook.getElement(id);var ownerID=ReactComponentTreeHook.getOwnerID(id);var ownerName;if(ownerID){ownerName=ReactComponentTreeHook.getDisplayName(ownerID)}process.env.NODE_ENV!=="production"?warning(element,"ReactComponentTreeHook: Missing React element for debugID %s when "+"building stack",id):void 0;return describeComponentFrame(name,element&&element._source,ownerName)}var ReactComponentTreeHook={onSetChildren:function(id,nextChildIDs){var item=getItem(id);!item?process.env.NODE_ENV!=="production"?invariant(false,"Item must have been set"):_prodInvariant("144"):void 0;item.childIDs=nextChildIDs;for(var i=0;i<nextChildIDs.length;i++){var nextChildID=nextChildIDs[i];var nextChild=getItem(nextChildID);!nextChild?process.env.NODE_ENV!=="production"?invariant(false,"Expected hook events to fire for the child before its parent includes it in onSetChildren()."):_prodInvariant("140"):void 0;!(nextChild.childIDs!=null||typeof nextChild.element!=="object"||nextChild.element==null)?process.env.NODE_ENV!=="production"?invariant(false,"Expected onSetChildren() to fire for a container child before its parent includes it in onSetChildren()."):_prodInvariant("141"):void 0;!nextChild.isMounted?process.env.NODE_ENV!=="production"?invariant(false,"Expected onMountComponent() to fire for the child before its parent includes it in onSetChildren()."):_prodInvariant("71"):void 0;if(nextChild.parentID==null){nextChild.parentID=id}!(nextChild.parentID===id)?process.env.NODE_ENV!=="production"?invariant(false,"Expected onBeforeMountComponent() parent and onSetChildren() to be consistent (%s has parents %s and %s).",nextChildID,nextChild.parentID,id):_prodInvariant("142",nextChildID,nextChild.parentID,id):void 0}},onBeforeMountComponent:function(id,element,parentID){var item={element:element,parentID:parentID,text:null,childIDs:[],isMounted:false,updateCount:0};setItem(id,item)},onBeforeUpdateComponent:function(id,element){var item=getItem(id);if(!item||!item.isMounted){return}item.element=element},onMountComponent:function(id){var item=getItem(id);!item?process.env.NODE_ENV!=="production"?invariant(false,"Item must have been set"):_prodInvariant("144"):void 0;item.isMounted=true;var isRoot=item.parentID===0;if(isRoot){addRoot(id)}},onUpdateComponent:function(id){var item=getItem(id);if(!item||!item.isMounted){return}item.updateCount++},onUnmountComponent:function(id){var item=getItem(id);if(item){item.isMounted=false;var isRoot=item.parentID===0;if(isRoot){removeRoot(id)}}unmountedIDs.push(id)},purgeUnmountedComponents:function(){if(ReactComponentTreeHook._preventPurging){return}for(var i=0;i<unmountedIDs.length;i++){var id=unmountedIDs[i];purgeDeep(id)}unmountedIDs.length=0},isMounted:function(id){var item=getItem(id);return item?item.isMounted:false},getCurrentStackAddendum:function(topElement){var info="";if(topElement){var name=getDisplayName(topElement);var owner=topElement._owner;info+=describeComponentFrame(name,topElement._source,owner&&owner.getName())}var currentOwner=ReactCurrentOwner.current;var id=currentOwner&&currentOwner._debugID;info+=ReactComponentTreeHook.getStackAddendumByID(id);return info},getStackAddendumByID:function(id){var info="";while(id){info+=describeID(id);id=ReactComponentTreeHook.getParentID(id)}return info},getChildIDs:function(id){var item=getItem(id);return item?item.childIDs:[]},getDisplayName:function(id){var element=ReactComponentTreeHook.getElement(id);if(!element){return null}return getDisplayName(element)},getElement:function(id){var item=getItem(id);return item?item.element:null},getOwnerID:function(id){var element=ReactComponentTreeHook.getElement(id);if(!element||!element._owner){return null}return element._owner._debugID},getParentID:function(id){var item=getItem(id);return item?item.parentID:null},getSource:function(id){var item=getItem(id);var element=item?item.element:null;var source=element!=null?element._source:null;return source},getText:function(id){var element=ReactComponentTreeHook.getElement(id);if(typeof element==="string"){return element}else if(typeof element==="number"){return""+element}else{return null}},getUpdateCount:function(id){var item=getItem(id);return item?item.updateCount:0},getRootIDs:getRootIDs,getRegisteredIDs:getItemIDs};module.exports=ReactComponentTreeHook}).call(this)}).call(this,require("_process"))},{"./ReactCurrentOwner":669,"./reactProdInvariant":684,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525}],669:[function(require,module,exports){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},{}],670:[function(require,module,exports){(function(process){(function(){"use strict";var ReactElement=require("./ReactElement");var createDOMFactory=ReactElement.createFactory;if(process.env.NODE_ENV!=="production"){var ReactElementValidator=require("./ReactElementValidator");createDOMFactory=ReactElementValidator.createFactory}var ReactDOMFactories={a:createDOMFactory("a"),abbr:createDOMFactory("abbr"),address:createDOMFactory("address"),area:createDOMFactory("area"),article:createDOMFactory("article"),aside:createDOMFactory("aside"),audio:createDOMFactory("audio"),b:createDOMFactory("b"),base:createDOMFactory("base"),bdi:createDOMFactory("bdi"),bdo:createDOMFactory("bdo"),big:createDOMFactory("big"),blockquote:createDOMFactory("blockquote"),body:createDOMFactory("body"),br:createDOMFactory("br"),button:createDOMFactory("button"),canvas:createDOMFactory("canvas"),caption:createDOMFactory("caption"),cite:createDOMFactory("cite"),code:createDOMFactory("code"),col:createDOMFactory("col"),colgroup:createDOMFactory("colgroup"),data:createDOMFactory("data"),datalist:createDOMFactory("datalist"),dd:createDOMFactory("dd"),del:createDOMFactory("del"),details:createDOMFactory("details"),dfn:createDOMFactory("dfn"),dialog:createDOMFactory("dialog"),div:createDOMFactory("div"),dl:createDOMFactory("dl"),dt:createDOMFactory("dt"),em:createDOMFactory("em"),embed:createDOMFactory("embed"),fieldset:createDOMFactory("fieldset"),figcaption:createDOMFactory("figcaption"),figure:createDOMFactory("figure"),footer:createDOMFactory("footer"),form:createDOMFactory("form"),h1:createDOMFactory("h1"),h2:createDOMFactory("h2"),h3:createDOMFactory("h3"),h4:createDOMFactory("h4"),h5:createDOMFactory("h5"),h6:createDOMFactory("h6"),head:createDOMFactory("head"),header:createDOMFactory("header"),hgroup:createDOMFactory("hgroup"),hr:createDOMFactory("hr"),html:createDOMFactory("html"),i:createDOMFactory("i"),iframe:createDOMFactory("iframe"),img:createDOMFactory("img"),input:createDOMFactory("input"),ins:createDOMFactory("ins"),kbd:createDOMFactory("kbd"),keygen:createDOMFactory("keygen"),label:createDOMFactory("label"),legend:createDOMFactory("legend"),li:createDOMFactory("li"),link:createDOMFactory("link"),main:createDOMFactory("main"),map:createDOMFactory("map"),mark:createDOMFactory("mark"),menu:createDOMFactory("menu"),menuitem:createDOMFactory("menuitem"),meta:createDOMFactory("meta"),meter:createDOMFactory("meter"),nav:createDOMFactory("nav"),noscript:createDOMFactory("noscript"),object:createDOMFactory("object"),ol:createDOMFactory("ol"),optgroup:createDOMFactory("optgroup"),option:createDOMFactory("option"),output:createDOMFactory("output"),p:createDOMFactory("p"),param:createDOMFactory("param"),picture:createDOMFactory("picture"),pre:createDOMFactory("pre"),progress:createDOMFactory("progress"),q:createDOMFactory("q"),rp:createDOMFactory("rp"),rt:createDOMFactory("rt"),ruby:createDOMFactory("ruby"),s:createDOMFactory("s"),samp:createDOMFactory("samp"),script:createDOMFactory("script"),section:createDOMFactory("section"),select:createDOMFactory("select"),small:createDOMFactory("small"),source:createDOMFactory("source"),span:createDOMFactory("span"),strong:createDOMFactory("strong"),style:createDOMFactory("style"),sub:createDOMFactory("sub"),summary:createDOMFactory("summary"),sup:createDOMFactory("sup"),table:createDOMFactory("table"),tbody:createDOMFactory("tbody"),td:createDOMFactory("td"),textarea:createDOMFactory("textarea"),tfoot:createDOMFactory("tfoot"),th:createDOMFactory("th"),thead:createDOMFactory("thead"),time:createDOMFactory("time"),title:createDOMFactory("title"),tr:createDOMFactory("tr"),track:createDOMFactory("track"),u:createDOMFactory("u"),ul:createDOMFactory("ul"),var:createDOMFactory("var"),video:createDOMFactory("video"),wbr:createDOMFactory("wbr"),circle:createDOMFactory("circle"),clipPath:createDOMFactory("clipPath"),defs:createDOMFactory("defs"),ellipse:createDOMFactory("ellipse"),g:createDOMFactory("g"),image:createDOMFactory("image"),line:createDOMFactory("line"),linearGradient:createDOMFactory("linearGradient"),mask:createDOMFactory("mask"),path:createDOMFactory("path"),pattern:createDOMFactory("pattern"),polygon:createDOMFactory("polygon"),polyline:createDOMFactory("polyline"),radialGradient:createDOMFactory("radialGradient"),rect:createDOMFactory("rect"),stop:createDOMFactory("stop"),svg:createDOMFactory("svg"),text:createDOMFactory("text"),tspan:createDOMFactory("tspan")};module.exports=ReactDOMFactories}).call(this)}).call(this,require("_process"))},{"./ReactElement":671,"./ReactElementValidator":673,_process:25}],671:[function(require,module,exports){(function(process){(function(){"use strict";var _assign=require("object-assign");var ReactCurrentOwner=require("./ReactCurrentOwner");var warning=require("fbjs/lib/warning");var canDefineProperty=require("./canDefineProperty");var hasOwnProperty=Object.prototype.hasOwnProperty;var REACT_ELEMENT_TYPE=require("./ReactElementSymbol");var RESERVED_PROPS={key:true,ref:true,__self:true,__source:true};var specialPropKeyWarningShown,specialPropRefWarningShown;function hasValidRef(config){if(process.env.NODE_ENV!=="production"){if(hasOwnProperty.call(config,"ref")){var getter=Object.getOwnPropertyDescriptor(config,"ref").get;if(getter&&getter.isReactWarning){return false}}}return config.ref!==undefined}function hasValidKey(config){if(process.env.NODE_ENV!=="production"){if(hasOwnProperty.call(config,"key")){var getter=Object.getOwnPropertyDescriptor(config,"key").get;if(getter&&getter.isReactWarning){return false}}}return config.key!==undefined}function defineKeyPropWarningGetter(props,displayName){var warnAboutAccessingKey=function(){if(!specialPropKeyWarningShown){specialPropKeyWarningShown=true;process.env.NODE_ENV!=="production"?warning(false,"%s: `key` is not a prop. Trying to access it will result "+"in `undefined` being returned. If you need to access the same "+"value within the child component, you should pass it as a different "+"prop. (https://fb.me/react-special-props)",displayName):void 0}};warnAboutAccessingKey.isReactWarning=true;Object.defineProperty(props,"key",{get:warnAboutAccessingKey,configurable:true})}function defineRefPropWarningGetter(props,displayName){var warnAboutAccessingRef=function(){if(!specialPropRefWarningShown){specialPropRefWarningShown=true;process.env.NODE_ENV!=="production"?warning(false,"%s: `ref` is not a prop. Trying to access it will result "+"in `undefined` being returned. If you need to access the same "+"value within the child component, you should pass it as a different "+"prop. (https://fb.me/react-special-props)",displayName):void 0}};warnAboutAccessingRef.isReactWarning=true;Object.defineProperty(props,"ref",{get:warnAboutAccessingRef,configurable:true})}var ReactElement=function(type,key,ref,self,source,owner,props){var element={$$typeof:REACT_ELEMENT_TYPE,type:type,key:key,ref:ref,props:props,_owner:owner};if(process.env.NODE_ENV!=="production"){element._store={};if(canDefineProperty){Object.defineProperty(element._store,"validated",{configurable:false,enumerable:false,writable:true,value:false});Object.defineProperty(element,"_self",{configurable:false,enumerable:false,writable:false,value:self});Object.defineProperty(element,"_source",{configurable:false,enumerable:false,writable:false,value:source})}else{element._store.validated=false;element._self=self;element._source=source}if(Object.freeze){Object.freeze(element.props);Object.freeze(element)}}return element};ReactElement.createElement=function(type,config,children){var propName;var props={};var key=null;var ref=null;var self=null;var source=null;if(config!=null){if(hasValidRef(config)){ref=config.ref}if(hasValidKey(config)){key=""+config.key}self=config.__self===undefined?null:config.__self;source=config.__source===undefined?null:config.__source;for(propName in config){if(hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)){props[propName]=config[propName]}}}var childrenLength=arguments.length-2;if(childrenLength===1){props.children=children}else if(childrenLength>1){var childArray=Array(childrenLength);for(var i=0;i<childrenLength;i++){childArray[i]=arguments[i+2]}if(process.env.NODE_ENV!=="production"){if(Object.freeze){Object.freeze(childArray)}}props.children=childArray}if(type&&type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps){if(props[propName]===undefined){props[propName]=defaultProps[propName]}}}if(process.env.NODE_ENV!=="production"){if(key||ref){if(typeof props.$$typeof==="undefined"||props.$$typeof!==REACT_ELEMENT_TYPE){var displayName=typeof type==="function"?type.displayName||type.name||"Unknown":type;if(key){defineKeyPropWarningGetter(props,displayName)}if(ref){defineRefPropWarningGetter(props,displayName)}}}}return ReactElement(type,key,ref,self,source,ReactCurrentOwner.current,props)};ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);factory.type=type;return factory};ReactElement.cloneAndReplaceKey=function(oldElement,newKey){var newElement=ReactElement(oldElement.type,newKey,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,oldElement.props);return newElement};ReactElement.cloneElement=function(element,config,children){var propName;var props=_assign({},element.props);var key=element.key;var ref=element.ref;var self=element._self;var source=element._source;var owner=element._owner;if(config!=null){if(hasValidRef(config)){ref=config.ref;owner=ReactCurrentOwner.current}if(hasValidKey(config)){key=""+config.key}var defaultProps;if(element.type&&element.type.defaultProps){defaultProps=element.type.defaultProps}for(propName in config){if(hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)){if(config[propName]===undefined&&defaultProps!==undefined){props[propName]=defaultProps[propName]}else{props[propName]=config[propName]}}}}var childrenLength=arguments.length-2;if(childrenLength===1){props.children=children}else if(childrenLength>1){var childArray=Array(childrenLength);for(var i=0;i<childrenLength;i++){childArray[i]=arguments[i+2]}props.children=childArray}return ReactElement(element.type,key,ref,self,source,owner,props)};ReactElement.isValidElement=function(object){return typeof object==="object"&&object!==null&&object.$$typeof===REACT_ELEMENT_TYPE};module.exports=ReactElement}).call(this)}).call(this,require("_process"))},{"./ReactCurrentOwner":669,"./ReactElementSymbol":672,"./canDefineProperty":680,_process:25,"fbjs/lib/warning":525,"object-assign":533}],672:[function(require,module,exports){arguments[4][586][0].apply(exports,arguments)},{dup:586}],673:[function(require,module,exports){(function(process){(function(){"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner");var ReactComponentTreeHook=require("./ReactComponentTreeHook");var ReactElement=require("./ReactElement");var checkReactTypeSpec=require("./checkReactTypeSpec");var canDefineProperty=require("./canDefineProperty");var getIteratorFn=require("./getIteratorFn");var warning=require("fbjs/lib/warning");function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name){return" Check the render method of `"+name+"`."}}return""}var ownerHasKeyUseWarning={};function getCurrentComponentErrorInfo(parentType){var info=getDeclarationErrorAddendum();if(!info){var parentName=typeof parentType==="string"?parentType:parentType.displayName||parentType.name;if(parentName){info=" Check the top-level render call using <"+parentName+">."}}return info}function validateExplicitKey(element,parentType){if(!element._store||element._store.validated||element.key!=null){return}element._store.validated=true;var memoizer=ownerHasKeyUseWarning.uniqueKey||(ownerHasKeyUseWarning.uniqueKey={});var currentComponentErrorInfo=getCurrentComponentErrorInfo(parentType);if(memoizer[currentComponentErrorInfo]){return}memoizer[currentComponentErrorInfo]=true;var childOwner="";if(element&&element._owner&&element._owner!==ReactCurrentOwner.current){childOwner=" It was passed a child from "+element._owner.getName()+"."}process.env.NODE_ENV!=="production"?warning(false,'Each child in an array or iterator should have a unique "key" prop.'+"%s%s See https://fb.me/react-warning-keys for more information.%s",currentComponentErrorInfo,childOwner,ReactComponentTreeHook.getCurrentStackAddendum(element)):void 0}function validateChildKeys(node,parentType){if(typeof node!=="object"){return}if(Array.isArray(node)){for(var i=0;i<node.length;i++){var child=node[i];if(ReactElement.isValidElement(child)){validateExplicitKey(child,parentType)}}}else if(ReactElement.isValidElement(node)){if(node._store){node._store.validated=true}}else if(node){var iteratorFn=getIteratorFn(node);if(iteratorFn){if(iteratorFn!==node.entries){var iterator=iteratorFn.call(node);var step;while(!(step=iterator.next()).done){if(ReactElement.isValidElement(step.value)){validateExplicitKey(step.value,parentType)}}}}}}function validatePropTypes(element){var componentClass=element.type;if(typeof componentClass!=="function"){return}var name=componentClass.displayName||componentClass.name;if(componentClass.propTypes){checkReactTypeSpec(componentClass.propTypes,element.props,"prop",name,element,null)}if(typeof componentClass.getDefaultProps==="function"){process.env.NODE_ENV!=="production"?warning(componentClass.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass "+"definitions. Use a static property named `defaultProps` instead."):void 0}}var ReactElementValidator={createElement:function(type,props,children){var validType=typeof type==="string"||typeof type==="function";if(!validType){if(typeof type!=="function"&&typeof type!=="string"){var info="";if(type===undefined||typeof type==="object"&&type!==null&&Object.keys(type).length===0){info+=" You likely forgot to export your component from the file "+"it's defined in."}info+=getDeclarationErrorAddendum();process.env.NODE_ENV!=="production"?warning(false,"React.createElement: type is invalid -- expected a string (for "+"built-in components) or a class/function (for composite "+"components) but got: %s.%s",type==null?type:typeof type,info):void 0}}var element=ReactElement.createElement.apply(this,arguments);if(element==null){return element}if(validType){for(var i=2;i<arguments.length;i++){validateChildKeys(arguments[i],type)}}validatePropTypes(element);return element},createFactory:function(type){var validatedFactory=ReactElementValidator.createElement.bind(null,type);validatedFactory.type=type;if(process.env.NODE_ENV!=="production"){if(canDefineProperty){Object.defineProperty(validatedFactory,"type",{enumerable:false,get:function(){process.env.NODE_ENV!=="production"?warning(false,"Factory.type is deprecated. Access the class directly "+"before passing it to createFactory."):void 0;Object.defineProperty(this,"type",{value:type});return type}})}}return validatedFactory},cloneElement:function(element,props,children){var newElement=ReactElement.cloneElement.apply(this,arguments);for(var i=2;i<arguments.length;i++){validateChildKeys(arguments[i],newElement.type)}validatePropTypes(newElement);return newElement}};module.exports=ReactElementValidator}).call(this)}).call(this,require("_process"))},{"./ReactComponentTreeHook":668,"./ReactCurrentOwner":669,"./ReactElement":671,"./canDefineProperty":680,"./checkReactTypeSpec":681,"./getIteratorFn":682,_process:25,"fbjs/lib/warning":525}],674:[function(require,module,exports){(function(process){(function(){"use strict";var warning=require("fbjs/lib/warning");function warnNoop(publicInstance,callerName){if(process.env.NODE_ENV!=="production"){var constructor=publicInstance.constructor;process.env.NODE_ENV!=="production"?warning(false,"%s(...): Can only update a mounted or mounting component. "+"This usually means you called %s() on an unmounted component. "+"This is a no-op. Please check the code for the %s component.",callerName,callerName,constructor&&(constructor.displayName||constructor.name)||"ReactClass"):void 0}}var ReactNoopUpdateQueue={isMounted:function(publicInstance){return false},enqueueCallback:function(publicInstance,callback){},enqueueForceUpdate:function(publicInstance){warnNoop(publicInstance,"forceUpdate")},enqueueReplaceState:function(publicInstance,completeState){warnNoop(publicInstance,"replaceState")},enqueueSetState:function(publicInstance,partialState){warnNoop(publicInstance,"setState")}};module.exports=ReactNoopUpdateQueue}).call(this)}).call(this,require("_process"))},{_process:25,"fbjs/lib/warning":525}],675:[function(require,module,exports){arguments[4][604][0].apply(exports,arguments)},{_process:25,dup:604}],676:[function(require,module,exports){(function(process){(function(){"use strict";var ReactElement=require("./ReactElement");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactPropTypesSecret=require("./ReactPropTypesSecret");var emptyFunction=require("fbjs/lib/emptyFunction");var getIteratorFn=require("./getIteratorFn");var warning=require("fbjs/lib/warning");var ANONYMOUS="<<anonymous>>";var ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};function is(x,y){if(x===y){return x!==0||1/x===1/y}else{return x!==x&&y!==y}}function PropTypeError(message){this.message=message;this.stack=""}PropTypeError.prototype=Error.prototype;function createChainableTypeChecker(validate){if(process.env.NODE_ENV!=="production"){var manualPropTypeCallCache={}}function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS;propFullName=propFullName||propName;if(process.env.NODE_ENV!=="production"){if(secret!==ReactPropTypesSecret&&typeof console!=="undefined"){var cacheKey=componentName+":"+propName;if(!manualPropTypeCallCache[cacheKey]){process.env.NODE_ENV!=="production"?warning(false,"You are manually calling a React.PropTypes validation "+"function for the `%s` prop on `%s`. This is deprecated "+"and will not work in production with the next major version. "+"You may be seeing this warning due to a third-party PropTypes "+"library. See https://fb.me/react-warning-dont-call-proptypes "+"for details.",propFullName,componentName):void 0;manualPropTypeCallCache[cacheKey]=true}}}if(props[propName]==null){var locationName=ReactPropTypeLocationNames[location];if(isRequired){if(props[propName]===null){return new PropTypeError("The "+locationName+" `"+propFullName+"` is marked as required "+("in `"+componentName+"`, but its value is `null`."))}return new PropTypeError("The "+locationName+" `"+propFullName+"` is marked as required in "+("`"+componentName+"`, but its value is `undefined`."))}return null}else{return validate(props,propName,componentName,location,propFullName)}}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];var propType=getPropType(propValue);if(propType!==expectedType){var locationName=ReactPropTypeLocationNames[location];var preciseType=getPreciseType(propValue);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.")}var propValue=props[propName];if(!Array.isArray(propValue)){var locationName=ReactPropTypeLocationNames[location];var propType=getPropType(propValue);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error){return error}}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!ReactElement.isValidElement(propValue)){var locationName=ReactPropTypeLocationNames[location];var propType=getPropType(propValue);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var locationName=ReactPropTypeLocationNames[location];var expectedClassName=expectedClass.name||ANONYMOUS;var actualClassName=getClassName(props[propName]);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues)){process.env.NODE_ENV!=="production"?warning(false,"Invalid argument supplied to oneOf, expected an instance of array."):void 0;return emptyFunction.thatReturnsNull}function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];for(var i=0;i<expectedValues.length;i++){if(is(propValue,expectedValues[i])){return null}}var locationName=ReactPropTypeLocationNames[location];var valuesString=JSON.stringify(expectedValues);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(validate)}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.")}var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue){if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error){return error}}}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers)){process.env.NODE_ENV!=="production"?warning(false,"Invalid argument supplied to oneOfType, expected an instance of array."):void 0;return emptyFunction.thatReturnsNull}function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret)==null){return null}}var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(validate)}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue}var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error){return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return true;case"boolean":return!propValue;case"object":if(Array.isArray(propValue)){return propValue.every(isNode)}if(propValue===null||ReactElement.isValidElement(propValue)){return true}var iteratorFn=getIteratorFn(propValue);if(iteratorFn){var iterator=iteratorFn.call(propValue);var step;if(iteratorFn!==propValue.entries){while(!(step=iterator.next()).done){if(!isNode(step.value)){return false}}}else{while(!(step=iterator.next()).done){var entry=step.value;if(entry){if(!isNode(entry[1])){return false}}}}}else{return false}return true;default:return false}}function isSymbol(propType,propValue){if(propType==="symbol"){return true}if(propValue["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&propValue instanceof Symbol){return true}return false}function getPropType(propValue){var propType=typeof propValue;if(Array.isArray(propValue)){return"array"}if(propValue instanceof RegExp){return"object"}if(isSymbol(propType,propValue)){return"symbol"}return propType}function getPreciseType(propValue){var propType=getPropType(propValue);if(propType==="object"){if(propValue instanceof Date){return"date"}else if(propValue instanceof RegExp){return"regexp"}}return propType}function getClassName(propValue){if(!propValue.constructor||!propValue.constructor.name){return ANONYMOUS}return propValue.constructor.name}module.exports=ReactPropTypes}).call(this)}).call(this,require("_process"))},{"./ReactElement":671,"./ReactPropTypeLocationNames":675,"./ReactPropTypesSecret":677,"./getIteratorFn":682,_process:25,"fbjs/lib/emptyFunction":510,"fbjs/lib/warning":525}],677:[function(require,module,exports){arguments[4][605][0].apply(exports,arguments)},{dup:605}],678:[function(require,module,exports){"use strict";var _assign=require("object-assign");var ReactComponent=require("./ReactComponent");var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue");var emptyObject=require("fbjs/lib/emptyObject");function ReactPureComponent(props,context,updater){this.props=props;this.context=context;this.refs=emptyObject;this.updater=updater||ReactNoopUpdateQueue}function ComponentDummy(){}ComponentDummy.prototype=ReactComponent.prototype;ReactPureComponent.prototype=new ComponentDummy;ReactPureComponent.prototype.constructor=ReactPureComponent;_assign(ReactPureComponent.prototype,ReactComponent.prototype);ReactPureComponent.prototype.isPureReactComponent=true;module.exports=ReactPureComponent},{"./ReactComponent":667,"./ReactNoopUpdateQueue":674,"fbjs/lib/emptyObject":511,"object-assign":533}],679:[function(require,module,exports){arguments[4][613][0].apply(exports,arguments)},{dup:613}],680:[function(require,module,exports){(function(process){(function(){"use strict";var canDefineProperty=false;if(process.env.NODE_ENV!=="production"){try{Object.defineProperty({},"x",{get:function(){}});canDefineProperty=true}catch(x){}}module.exports=canDefineProperty}).call(this)}).call(this,require("_process"))},{_process:25}],681:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames");var ReactPropTypesSecret=require("./ReactPropTypesSecret");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactComponentTreeHook;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV==="test"){ReactComponentTreeHook=require("./ReactComponentTreeHook")}var loggedTypeFailures={};function checkReactTypeSpec(typeSpecs,values,location,componentName,element,debugID){for(var typeSpecName in typeSpecs){if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{!(typeof typeSpecs[typeSpecName]==="function")?process.env.NODE_ENV!=="production"?invariant(false,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):_prodInvariant("84",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):void 0;error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}process.env.NODE_ENV!=="production"?warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName,typeof error):void 0;if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var componentStackInfo="";if(process.env.NODE_ENV!=="production"){if(!ReactComponentTreeHook){ReactComponentTreeHook=require("./ReactComponentTreeHook")}if(debugID!==null){componentStackInfo=ReactComponentTreeHook.getStackAddendumByID(debugID)}else if(element!==null){componentStackInfo=ReactComponentTreeHook.getCurrentStackAddendum(element)}}process.env.NODE_ENV!=="production"?warning(false,"Failed %s type: %s%s",location,error.message,componentStackInfo):void 0}}}}module.exports=checkReactTypeSpec}).call(this)}).call(this,require("_process"))},{"./ReactComponentTreeHook":668,"./ReactPropTypeLocationNames":675,"./ReactPropTypesSecret":677,"./reactProdInvariant":684,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525}],682:[function(require,module,exports){arguments[4][646][0].apply(exports,arguments)},{dup:646}],683:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactElement=require("./ReactElement");var invariant=require("fbjs/lib/invariant");function onlyChild(children){!ReactElement.isValidElement(children)?process.env.NODE_ENV!=="production"?invariant(false,"React.Children.only expected to receive a single React element child."):_prodInvariant("143"):void 0;return children}module.exports=onlyChild}).call(this)}).call(this,require("_process"))},{"./ReactElement":671,"./reactProdInvariant":684,_process:25,"fbjs/lib/invariant":518}],684:[function(require,module,exports){arguments[4][655][0].apply(exports,arguments)},{dup:655}],685:[function(require,module,exports){(function(process){(function(){"use strict";var _prodInvariant=require("./reactProdInvariant");var ReactCurrentOwner=require("./ReactCurrentOwner");var REACT_ELEMENT_TYPE=require("./ReactElementSymbol");var getIteratorFn=require("./getIteratorFn");var invariant=require("fbjs/lib/invariant");var KeyEscapeUtils=require("./KeyEscapeUtils");var warning=require("fbjs/lib/warning");var SEPARATOR=".";var SUBSEPARATOR=":";var didWarnAboutMaps=false;function getComponentKey(component,index){if(component&&typeof component==="object"&&component.key!=null){return KeyEscapeUtils.escape(component.key)}return index.toString(36)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if(type==="undefined"||type==="boolean"){children=null}if(children===null||type==="string"||type==="number"||type==="object"&&children.$$typeof===REACT_ELEMENT_TYPE){callback(traverseContext,children,nameSoFar===""?SEPARATOR+getComponentKey(children,0):nameSoFar);return 1}var child;var nextName;var subtreeCount=0;var nextNamePrefix=nameSoFar===""?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children)){for(var i=0;i<children.length;i++){child=children[i];nextName=nextNamePrefix+getComponentKey(child,i);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var iterator=iteratorFn.call(children);var step;if(iteratorFn!==children.entries){var ii=0;while(!(step=iterator.next()).done){child=step.value;nextName=nextNamePrefix+getComponentKey(child,ii++);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}else{if(process.env.NODE_ENV!=="production"){var mapsAsChildrenAddendum="";if(ReactCurrentOwner.current){var mapsAsChildrenOwnerName=ReactCurrentOwner.current.getName();if(mapsAsChildrenOwnerName){mapsAsChildrenAddendum=" Check the render method of `"+mapsAsChildrenOwnerName+"`."}}process.env.NODE_ENV!=="production"?warning(didWarnAboutMaps,"Using Maps as children is not yet fully supported. It is an "+"experimental feature that might be removed. Convert it to a "+"sequence / iterable of keyed ReactElements instead.%s",mapsAsChildrenAddendum):void 0;didWarnAboutMaps=true}while(!(step=iterator.next()).done){var entry=step.value;if(entry){child=entry[1];nextName=nextNamePrefix+KeyEscapeUtils.escape(entry[0])+SUBSEPARATOR+getComponentKey(child,0);subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext)}}}}else if(type==="object"){var addendum="";if(process.env.NODE_ENV!=="production"){addendum=" If you meant to render a collection of children, use an array "+"instead or wrap the object using createFragment(object) from the "+"React add-ons.";if(children._isReactElement){addendum=" It looks like you're using an element created by a different "+"version of React. Make sure to use only one copy of React."}if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name){addendum+=" Check the render method of `"+name+"`."}}}var childrenString=String(children);!false?process.env.NODE_ENV!=="production"?invariant(false,"Objects are not valid as a React child (found: %s).%s",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):_prodInvariant("31",childrenString==="[object Object]"?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum):void 0}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){if(children==null){return 0}return traverseAllChildrenImpl(children,"",callback,traverseContext)}module.exports=traverseAllChildren}).call(this)}).call(this,require("_process"))},{"./KeyEscapeUtils":662,"./ReactCurrentOwner":669,"./ReactElementSymbol":672,"./getIteratorFn":682,"./reactProdInvariant":684,_process:25,"fbjs/lib/invariant":518,"fbjs/lib/warning":525}],686:[function(require,module,exports){arguments[4][332][0].apply(exports,arguments)},{"./lib/React":664,dup:332}],687:[function(require,module,exports){(function(undefined){"use strict";var __instances={};var sigma=function(conf){var i,l,a,c,o,id;sigma.classes.dispatcher.extend(this);var _self=this,_conf=conf||{};if(typeof _conf==="string"||_conf instanceof HTMLElement)_conf={renderers:[_conf]};else if(Object.prototype.toString.call(_conf)==="[object Array]")_conf={renderers:_conf};o=_conf.renderers||_conf.renderer||_conf.container;if(!_conf.renderers||_conf.renderers.length===0)if(typeof o==="string"||o instanceof HTMLElement||typeof o==="object"&&"container"in o)_conf.renderers=[o];if(_conf.id){if(__instances[_conf.id])throw'sigma: Instance "'+_conf.id+'" already exists.';Object.defineProperty(this,"id",{value:_conf.id})}else{id=0;while(__instances[id])id++;Object.defineProperty(this,"id",{value:""+id})}__instances[this.id]=this;this.settings=new sigma.classes.configurable(sigma.settings,_conf.settings||{});Object.defineProperty(this,"graph",{value:new sigma.classes.graph(this.settings),configurable:true});Object.defineProperty(this,"middlewares",{value:[],configurable:true});Object.defineProperty(this,"cameras",{value:{},configurable:true});Object.defineProperty(this,"renderers",{value:{},configurable:true});Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:true});Object.defineProperty(this,"cameraFrames",{value:{},configurable:true});Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}});Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:true});this._handler=function(e){var k,data={};for(k in e.data)data[k]=e.data[k];data.renderer=e.target;this.dispatchEvent(e.type,data)}.bind(this);a=_conf.renderers||[];for(i=0,l=a.length;i<l;i++)this.addRenderer(a[i]);a=_conf.middlewares||[];for(i=0,l=a.length;i<l;i++)this.middlewares.push(typeof a[i]==="string"?sigma.middlewares[a[i]]:a[i]);if(typeof _conf.graph==="object"&&_conf.graph){this.graph.read(_conf.graph);this.refresh()}window.addEventListener("resize",function(){if(_self.settings)_self.refresh()})};sigma.prototype.addCamera=function(id){var self=this,camera;if(!arguments.length){id=0;while(this.cameras[""+id])id++;id=""+id}if(this.cameras[id])throw'sigma.addCamera: The camera "'+id+'" already exists.';camera=new sigma.classes.camera(id,this.graph,this.settings);this.cameras[id]=camera;camera.quadtree=new sigma.classes.quad;if(sigma.classes.edgequad!==undefined){camera.edgequadtree=new sigma.classes.edgequad}camera.bind("coordinatesUpdated",function(e){self.renderCamera(camera,camera.isAnimated)});this.renderersPerCamera[id]=[];return camera};sigma.prototype.killCamera=function(v){v=typeof v==="string"?this.cameras[v]:v;if(!v)throw"sigma.killCamera: The camera is undefined.";var i,l,a=this.renderersPerCamera[v.id];for(l=a.length,i=l-1;i>=0;i--)this.killRenderer(a[i]);delete this.renderersPerCamera[v.id];delete this.cameraFrames[v.id];delete this.cameras[v.id];if(v.kill)v.kill();return this};sigma.prototype.addRenderer=function(options){var id,fn,camera,renderer,o=options||{};if(typeof o==="string")o={container:document.getElementById(o)};else if(o instanceof HTMLElement)o={container:o};if(typeof o.container==="string")o.container=document.getElementById(o.container);if(!("id"in o)){id=0;while(this.renderers[""+id])id++;id=""+id}else id=o.id;if(this.renderers[id])throw'sigma.addRenderer: The renderer "'+id+'" already exists.';fn=typeof o.type==="function"?o.type:sigma.renderers[o.type];fn=fn||sigma.renderers.def;camera="camera"in o?o.camera instanceof sigma.classes.camera?o.camera:this.cameras[o.camera]||this.addCamera(o.camera):this.addCamera();if(this.cameras[camera.id]!==camera)throw"sigma.addRenderer: The camera is not properly referenced.";renderer=new fn(this.graph,camera,this.settings,o);this.renderers[id]=renderer;Object.defineProperty(renderer,"id",{value:id});if(renderer.bind)renderer.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler);this.renderersPerCamera[camera.id].push(renderer);return renderer};sigma.prototype.killRenderer=function(v){v=typeof v==="string"?this.renderers[v]:v;if(!v)throw"sigma.killRenderer: The renderer is undefined.";var a=this.renderersPerCamera[v.camera.id],i=a.indexOf(v);if(i>=0)a.splice(i,1);if(v.kill)v.kill();delete this.renderers[v.id];return this};sigma.prototype.refresh=function(options){var i,l,k,a,c,bounds,prefix=0;options=options||{};a=this.middlewares||[];for(i=0,l=a.length;i<l;i++)a[i].call(this,i===0?"":"tmp"+prefix+":",i===l-1?"ready:":"tmp"+ ++prefix+":");for(k in this.cameras){c=this.cameras[k];if(c.settings("autoRescale")&&this.renderersPerCamera[c.id]&&this.renderersPerCamera[c.id].length)sigma.middlewares.rescale.call(this,a.length?"ready:":"",c.readPrefix,{width:this.renderersPerCamera[c.id][0].width,height:this.renderersPerCamera[c.id][0].height});else sigma.middlewares.copy.call(this,a.length?"ready:":"",c.readPrefix);if(!options.skipIndexation){bounds=sigma.utils.getBoundaries(this.graph,c.readPrefix);c.quadtree.index(this.graph.nodes(),{prefix:c.readPrefix,bounds:{x:bounds.minX,y:bounds.minY,width:bounds.maxX-bounds.minX,height:bounds.maxY-bounds.minY}});if(c.edgequadtree!==undefined&&c.settings("drawEdges")&&c.settings("enableEdgeHovering")){c.edgequadtree.index(this.graph,{prefix:c.readPrefix,bounds:{x:bounds.minX,y:bounds.minY,width:bounds.maxX-bounds.minX,height:bounds.maxY-bounds.minY}})}}}a=Object.keys(this.renderers);for(i=0,l=a.length;i<l;i++)if(this.renderers[a[i]].process){if(this.settings("skipErrors"))try{this.renderers[a[i]].process()}catch(e){console.log('Warning: The renderer "'+a[i]+'" crashed on ".process()"')}else this.renderers[a[i]].process()}this.render();return this};sigma.prototype.render=function(){var i,l,a,prefix=0;a=Object.keys(this.renderers);for(i=0,l=a.length;i<l;i++)if(this.settings("skipErrors"))try{this.renderers[a[i]].render()}catch(e){if(this.settings("verbose"))console.log('Warning: The renderer "'+a[i]+'" crashed on ".render()"')}else this.renderers[a[i]].render();return this};sigma.prototype.renderCamera=function(camera,force){var i,l,a,self=this;if(force){a=this.renderersPerCamera[camera.id];for(i=0,l=a.length;i<l;i++)if(this.settings("skipErrors"))try{a[i].render()}catch(e){if(this.settings("verbose"))console.log('Warning: The renderer "'+a[i].id+'" crashed on ".render()"')}else a[i].render()}else{if(!this.cameraFrames[camera.id]){a=this.renderersPerCamera[camera.id];for(i=0,l=a.length;i<l;i++)if(this.settings("skipErrors"))try{a[i].render()}catch(e){if(this.settings("verbose"))console.log('Warning: The renderer "'+a[i].id+'" crashed on ".render()"')}else a[i].render();this.cameraFrames[camera.id]=requestAnimationFrame(function(){delete self.cameraFrames[camera.id]})}}return this};sigma.prototype.kill=function(){var k;this.dispatchEvent("kill");this.graph.kill();delete this.middlewares;for(k in this.renderers)this.killRenderer(this.renderers[k]);for(k in this.cameras)this.killCamera(this.cameras[k]);delete this.renderers;delete this.cameras;for(k in this)if(this.hasOwnProperty(k))delete this[k];delete __instances[this.id]};sigma.instances=function(id){return arguments.length?__instances[id]:sigma.utils.extend({},__instances)};sigma.version="1.2.0";if(typeof this.sigma!=="undefined")throw"An object called sigma is already in the global scope.";this.sigma=sigma}).call(this);(function(global){"use strict";if(global.conrad)throw new Error("conrad already exists");var _lastFrameTime;var _isRunning=false;var _jobs={};var _runningJobs={};var _sortedByPriorityJobs=[];var _waitingJobs={};var _doneJobs=[];var _noStart=false;var _parameters={frameDuration:20,history:true};var _handlers=Object.create(null);function _bind(events,handler){var i,i_end,event,eArray;if(!arguments.length)return;else if(arguments.length===1&&Object(arguments[0])===arguments[0])for(events in arguments[0])_bind(events,arguments[0][events]);else if(arguments.length>1){eArray=Array.isArray(events)?events:events.split(/ /);for(i=0,i_end=eArray.length;i!==i_end;i+=1){event=eArray[i];if(!_handlers[event])_handlers[event]=[];_handlers[event].push({handler:handler})}}}function _unbind(events,handler){var i,i_end,j,j_end,a,event,eArray=Array.isArray(events)?events:events.split(/ /);if(!arguments.length)_handlers=Object.create(null);else if(handler){for(i=0,i_end=eArray.length;i!==i_end;i+=1){event=eArray[i];if(_handlers[event]){a=[];for(j=0,j_end=_handlers[event].length;j!==j_end;j+=1)if(_handlers[event][j].handler!==handler)a.push(_handlers[event][j]);_handlers[event]=a}if(_handlers[event]&&_handlers[event].length===0)delete _handlers[event]}}else for(i=0,i_end=eArray.length;i!==i_end;i+=1)delete _handlers[eArray[i]]}function _dispatch(events,data){var i,j,i_end,j_end,event,eventName,eArray=Array.isArray(events)?events:events.split(/ /);data=data===undefined?{}:data;for(i=0,i_end=eArray.length;i!==i_end;i+=1){eventName=eArray[i];if(_handlers[eventName]){event={type:eventName,data:data||{}};for(j=0,j_end=_handlers[eventName].length;j!==j_end;j+=1)try{_handlers[eventName][j].handler(event)}catch(e){}}}}function _executeFirstJob(){var i,l,test,kill,pushed=false,time=__dateNow(),job=_sortedByPriorityJobs.shift();test=job.job();time=__dateNow()-time;job.done++;job.time+=time;job.currentTime+=time;job.weightTime=job.currentTime/(job.weight||1);job.averageTime=job.time/job.done;kill=job.count?job.count<=job.done:!test;if(!kill){for(i=0,l=_sortedByPriorityJobs.length;i<l;i++)if(_sortedByPriorityJobs[i].weightTime>job.weightTime){_sortedByPriorityJobs.splice(i,0,job);pushed=true;break}if(!pushed)_sortedByPriorityJobs.push(job)}return kill?job:null}function _activateJob(job){var l=_sortedByPriorityJobs.length;_runningJobs[job.id]=job;job.status="running";if(l){job.weightTime=_sortedByPriorityJobs[l-1].weightTime;job.currentTime=job.weightTime*(job.weight||1)}job.startTime=__dateNow();_dispatch("jobStarted",__clone(job));_sortedByPriorityJobs.push(job)}function _loop(){var k,o,l,job,time,deadJob;for(k in _jobs){job=_jobs[k];if(job.after)_waitingJobs[k]=job;else _activateJob(job);delete _jobs[k]}_isRunning=!!_sortedByPriorityJobs.length;while(_sortedByPriorityJobs.length&&__dateNow()-_lastFrameTime<_parameters.frameDuration){deadJob=_executeFirstJob();if(deadJob){_killJob(deadJob.id);for(k in _waitingJobs)if(_waitingJobs[k].after===deadJob.id){_activateJob(_waitingJobs[k]);delete _waitingJobs[k]}}}if(_isRunning){_lastFrameTime=__dateNow();_dispatch("enterFrame");setTimeout(_loop,0)}else _dispatch("stop")}function _addJob(v1,v2){var i,l,o;if(Array.isArray(v1)){_noStart=true;for(i=0,l=v1.length;i<l;i++)_addJob(v1[i].id,__extend(v1[i],v2));_noStart=false;if(!_isRunning){_lastFrameTime=__dateNow();_dispatch("start");_loop()}}else if(typeof v1==="object"){if(typeof v1.id==="string")_addJob(v1.id,v1);else{_noStart=true;for(i in v1)if(typeof v1[i]==="function")_addJob(i,__extend({job:v1[i]},v2));else _addJob(i,__extend(v1[i],v2));_noStart=false;if(!_isRunning){_lastFrameTime=__dateNow();_dispatch("start");_loop()}}}else if(typeof v1==="string"){if(_hasJob(v1))throw new Error('[conrad.addJob] Job with id "'+v1+'" already exists.');if(typeof v2==="function"){o={id:v1,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:v2}}else if(typeof v2==="object"){o=__extend({id:v1,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},v2)}else throw new Error("[conrad.addJob] Wrong arguments.");_jobs[v1]=o;_dispatch("jobAdded",__clone(o));if(!_isRunning&&!_noStart){_lastFrameTime=__dateNow();_dispatch("start");_loop()}}else throw new Error("[conrad.addJob] Wrong arguments.");return this}function _killJob(v1){var i,l,k,a,job,found=false;if(Array.isArray(v1))for(i=0,l=v1.length;i<l;i++)_killJob(v1[i]);else if(typeof v1==="string"){a=[_runningJobs,_waitingJobs,_jobs];for(i=0,l=a.length;i<l;i++)if(v1 in a[i]){job=a[i][v1];if(_parameters.history){job.status="done";_doneJobs.push(job)}_dispatch("jobEnded",__clone(job));delete a[i][v1];if(typeof job.end==="function")job.end();found=true}a=_sortedByPriorityJobs;for(i=0,l=a.length;i<l;i++)if(a[i].id===v1){a.splice(i,1);break}if(!found)throw new Error('[conrad.killJob] Job "'+v1+'" not found.')}else throw new Error("[conrad.killJob] Wrong arguments.");return this}function _killAll(){var k,jobs=__extend(_jobs,_runningJobs,_waitingJobs);if(_parameters.history)for(k in jobs){jobs[k].status="done";_doneJobs.push(jobs[k]);if(typeof jobs[k].end==="function")jobs[k].end()}_jobs={};_waitingJobs={};_runningJobs={};_sortedByPriorityJobs=[];_isRunning=false;return this}function _hasJob(id){var job=_jobs[id]||_runningJobs[id]||_waitingJobs[id];return job?__extend(job):null}function _settings(v1,v2){var o;if(typeof a1==="string"&&arguments.length===1)return _parameters[a1];else{o=typeof a1==="object"&&arguments.length===1?a1||{}:{};if(typeof a1==="string")o[a1]=a2;for(var k in o)if(o[k]!==undefined)_parameters[k]=o[k];else delete _parameters[k];return this}}function _getIsRunning(){return _isRunning}function _clearHistory(){_doneJobs=[];return this}function _getStats(v1,v2){var a,k,i,l,stats,pattern,isPatternString;if(!arguments.length){stats=[];for(k in _jobs)stats.push(_jobs[k]);for(k in _waitingJobs)stats.push(_waitingJobs[k]);for(k in _runningJobs)stats.push(_runningJobs[k]);stats=stats.concat(_doneJobs)}if(typeof v1==="string")switch(v1){case"waiting":stats=__objectValues(_waitingJobs);break;case"running":stats=__objectValues(_runningJobs);break;case"done":stats=_doneJobs;break;default:pattern=v1}if(v1 instanceof RegExp)pattern=v1;if(!pattern&&(typeof v2==="string"||v2 instanceof RegExp))pattern=v2;if(pattern){isPatternString=typeof pattern==="string";if(stats instanceof Array){a=stats}else if(typeof stats==="object"){a=[];for(k in stats)a=a.concat(stats[k])}else{a=[];for(k in _jobs)a.push(_jobs[k]);for(k in _waitingJobs)a.push(_waitingJobs[k]);for(k in _runningJobs)a.push(_runningJobs[k]);a=a.concat(_doneJobs)}stats=[];for(i=0,l=a.length;i<l;i++)if(isPatternString?a[i].id===pattern:a[i].id.match(pattern))stats.push(a[i])}return __clone(stats)}function __extend(){var i,k,res={},l=arguments.length;for(i=l-1;i>=0;i--)for(k in arguments[i])res[k]=arguments[i][k];return res}function __clone(item){var result,i,k,l;if(!item)return item;if(Array.isArray(item)){result=[];for(i=0,l=item.length;i<l;i++)result.push(__clone(item[i]))}else if(typeof item==="object"){result={};for(i in item)result[i]=__clone(item[i])}else result=item;return result}function __objectValues(o){var k,a=[];for(k in o)a.push(o[k]);return a}function __dateNow(){return Date.now?Date.now():(new Date).getTime()}if(!Array.isArray)Array.isArray=function(v){return Object.prototype.toString.call(v)==="[object Array]"};var conrad={hasJob:_hasJob,addJob:_addJob,killJob:_killJob,killAll:_killAll,settings:_settings,getStats:_getStats,isRunning:_getIsRunning,clearHistory:_clearHistory,bind:_bind,unbind:_unbind,version:"0.1.0"};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=conrad;exports.conrad=conrad}global.conrad=conrad})(this);var sigma=this.sigma,conrad=this.conrad;sigma.conrad=conrad;if(typeof HTMLElement==="undefined")HTMLElement=function(){};if(typeof window==="undefined")window={addEventListener:function(){}};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=sigma;exports.sigma=sigma}(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";var _root=this;sigma.utils=sigma.utils||{};sigma.utils.extend=function(){var i,k,res={},l=arguments.length;for(i=l-1;i>=0;i--)for(k in arguments[i])res[k]=arguments[i][k];return res};sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()};sigma.utils.pkg=function(pkgName){return(pkgName||"").split(".").reduce(function(context,objName){return objName in context?context[objName]:context[objName]={}},_root)};sigma.utils.id=function(){var i=0;return function(){return++i}}();var floatColorCache={};sigma.utils.floatColor=function(val){if(floatColorCache[val])return floatColorCache[val];var original=val,r=0,g=0,b=0;if(val[0]==="#"){val=val.slice(1);if(val.length===3){r=parseInt(val.charAt(0)+val.charAt(0),16);g=parseInt(val.charAt(1)+val.charAt(1),16);b=parseInt(val.charAt(2)+val.charAt(2),16)}else{r=parseInt(val.charAt(0)+val.charAt(1),16);g=parseInt(val.charAt(2)+val.charAt(3),16);b=parseInt(val.charAt(4)+val.charAt(5),16)}}else if(val.match(/^ *rgba? *\(/)){val=val.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/);r=+val[1];g=+val[2];b=+val[3]}var color=r*256*256+g*256+b;floatColorCache[original]=color;return color};sigma.utils.zoomTo=function(camera,x,y,ratio,animation){var settings=camera.settings,count,newRatio,animationSettings,coordinates;newRatio=Math.max(settings("zoomMin"),Math.min(settings("zoomMax"),camera.ratio*ratio));if(newRatio!==camera.ratio){ratio=newRatio/camera.ratio;coordinates={x:x*(1-ratio)+camera.x,y:y*(1-ratio)+camera.y,ratio:newRatio};if(animation&&animation.duration){count=sigma.misc.animation.killAll(camera);animation=sigma.utils.extend(animation,{easing:count?"quadraticOut":"quadraticInOut"});sigma.misc.animation.camera(camera,coordinates,animation)}else{camera.goTo(coordinates);if(animation&&animation.onComplete)animation.onComplete()}}};sigma.utils.getQuadraticControlPoint=function(x1,y1,x2,y2){return{x:(x1+x2)/2+(y2-y1)/4,y:(y1+y2)/2+(x1-x2)/4}};sigma.utils.getPointOnQuadraticCurve=function(t,x1,y1,x2,y2,xi,yi){return{x:Math.pow(1-t,2)*x1+2*(1-t)*t*xi+Math.pow(t,2)*x2,y:Math.pow(1-t,2)*y1+2*(1-t)*t*yi+Math.pow(t,2)*y2}};sigma.utils.getPointOnBezierCurve=function(t,x1,y1,x2,y2,cx,cy,dx,dy){var B0_t=Math.pow(1-t,3),B1_t=3*t*Math.pow(1-t,2),B2_t=3*Math.pow(t,2)*(1-t),B3_t=Math.pow(t,3);return{x:B0_t*x1+B1_t*cx+B2_t*dx+B3_t*x2,y:B0_t*y1+B1_t*cy+B2_t*dy+B3_t*y2}};sigma.utils.getSelfLoopControlPoints=function(x,y,size){return{x1:x-size*7,y1:y,x2:x,y2:y+size*7}};sigma.utils.getDistance=function(x0,y0,x1,y1){return Math.sqrt(Math.pow(x1-x0,2)+Math.pow(y1-y0,2))};sigma.utils.getCircleIntersection=function(x0,y0,r0,x1,y1,r1){var a,dx,dy,d,h,rx,ry,x2,y2;dx=x1-x0;dy=y1-y0;d=Math.sqrt(dy*dy+dx*dx);if(d>r0+r1){return false}if(d<Math.abs(r0-r1)){return false}a=(r0*r0-r1*r1+d*d)/(2*d);x2=x0+dx*a/d;y2=y0+dy*a/d;h=Math.sqrt(r0*r0-a*a);rx=-dy*(h/d);ry=dx*(h/d);var xi=x2+rx;var xi_prime=x2-rx;var yi=y2+ry;var yi_prime=y2-ry;return{xi:xi,xi_prime:xi_prime,yi:yi,yi_prime:yi_prime}};sigma.utils.isPointOnSegment=function(x,y,x1,y1,x2,y2,epsilon){var crossProduct=Math.abs((y-y1)*(x2-x1)-(x-x1)*(y2-y1)),d=sigma.utils.getDistance(x1,y1,x2,y2),nCrossProduct=crossProduct/d;return nCrossProduct<epsilon&&Math.min(x1,x2)<=x&&x<=Math.max(x1,x2)&&Math.min(y1,y2)<=y&&y<=Math.max(y1,y2)};sigma.utils.isPointOnQuadraticCurve=function(x,y,x1,y1,x2,y2,cpx,cpy,epsilon){var dP1P2=sigma.utils.getDistance(x1,y1,x2,y2);if(Math.abs(x-x1)>dP1P2||Math.abs(y-y1)>dP1P2){return false}var dP1=sigma.utils.getDistance(x,y,x1,y1),dP2=sigma.utils.getDistance(x,y,x2,y2),t=.5,r=dP1<dP2?-.01:.01,rThreshold=.001,i=100,pt=sigma.utils.getPointOnQuadraticCurve(t,x1,y1,x2,y2,cpx,cpy),dt=sigma.utils.getDistance(x,y,pt.x,pt.y),old_dt;while(i-- >0&&t>=0&&t<=1&&dt>epsilon&&(r>rThreshold||r<-rThreshold)){old_dt=dt;pt=sigma.utils.getPointOnQuadraticCurve(t,x1,y1,x2,y2,cpx,cpy);dt=sigma.utils.getDistance(x,y,pt.x,pt.y);if(dt>old_dt){r=-r/2;t+=r}else if(t+r<0||t+r>1){r=r/2;dt=old_dt}else{t+=r}}return dt<epsilon};sigma.utils.isPointOnBezierCurve=function(x,y,x1,y1,x2,y2,cpx1,cpy1,cpx2,cpy2,epsilon){var dP1CP1=sigma.utils.getDistance(x1,y1,cpx1,cpy1);if(Math.abs(x-x1)>dP1CP1||Math.abs(y-y1)>dP1CP1){return false}var dP1=sigma.utils.getDistance(x,y,x1,y1),dP2=sigma.utils.getDistance(x,y,x2,y2),t=.5,r=dP1<dP2?-.01:.01,rThreshold=.001,i=100,pt=sigma.utils.getPointOnBezierCurve(t,x1,y1,x2,y2,cpx1,cpy1,cpx2,cpy2),dt=sigma.utils.getDistance(x,y,pt.x,pt.y),old_dt;while(i-- >0&&t>=0&&t<=1&&dt>epsilon&&(r>rThreshold||r<-rThreshold)){old_dt=dt;pt=sigma.utils.getPointOnBezierCurve(t,x1,y1,x2,y2,cpx1,cpy1,cpx2,cpy2);dt=sigma.utils.getDistance(x,y,pt.x,pt.y);if(dt>old_dt){r=-r/2;t+=r}else if(t+r<0||t+r>1){r=r/2;dt=old_dt}else{t+=r}}return dt<epsilon};sigma.utils.getX=function(e){return e.offsetX!==undefined&&e.offsetX||e.layerX!==undefined&&e.layerX||e.clientX!==undefined&&e.clientX};sigma.utils.getY=function(e){return e.offsetY!==undefined&&e.offsetY||e.layerY!==undefined&&e.layerY||e.clientY!==undefined&&e.clientY};sigma.utils.getPixelRatio=function(){var ratio=1;if(window.screen.deviceXDPI!==undefined&&window.screen.logicalXDPI!==undefined&&window.screen.deviceXDPI>window.screen.logicalXDPI){ratio=window.screen.systemXDPI/window.screen.logicalXDPI}else if(window.devicePixelRatio!==undefined){ratio=window.devicePixelRatio}return ratio};sigma.utils.getWidth=function(e){var w=!e.target.ownerSVGElement?e.target.width:e.target.ownerSVGElement.width;return typeof w==="number"&&w||w!==undefined&&w.baseVal!==undefined&&w.baseVal.value};sigma.utils.getCenter=function(e){var ratio=e.target.namespaceURI.indexOf("svg")!==-1?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(e)/(2*ratio),y:sigma.utils.getHeight(e)/(2*ratio)}};sigma.utils.mouseCoords=function(e,x,y){x=x||sigma.utils.getX(e);y=y||sigma.utils.getY(e);return{x:x-sigma.utils.getCenter(e).x,y:y-sigma.utils.getCenter(e).y,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}};sigma.utils.getHeight=function(e){var h=!e.target.ownerSVGElement?e.target.height:e.target.ownerSVGElement.height;return typeof h==="number"&&h||h!==undefined&&h.baseVal!==undefined&&h.baseVal.value};sigma.utils.getDelta=function(e){return e.wheelDelta!==undefined&&e.wheelDelta||e.detail!==undefined&&-e.detail};sigma.utils.getOffset=function(dom){var left=0,top=0;while(dom){top=top+parseInt(dom.offsetTop);left=left+parseInt(dom.offsetLeft);dom=dom.offsetParent}return{top:top,left:left}};sigma.utils.doubleClick=function(target,type,callback){var clicks=0,self=this,handlers;target._doubleClickHandler=target._doubleClickHandler||{};target._doubleClickHandler[type]=target._doubleClickHandler[type]||[];handlers=target._doubleClickHandler[type];handlers.push(function(e){clicks++;if(clicks===2){clicks=0;return callback(e)}else if(clicks===1){setTimeout(function(){clicks=0},sigma.settings.doubleClickTimeout)}});target.addEventListener(type,handlers[handlers.length-1],false)};sigma.utils.unbindDoubleClick=function(target,type){var handler,handlers=(target._doubleClickHandler||{})[type]||[];while(handler=handlers.pop()){target.removeEventListener(type,handler)}delete(target._doubleClickHandler||{})[type]};sigma.utils.easings=sigma.utils.easings||{};sigma.utils.easings.linearNone=function(k){return k};sigma.utils.easings.quadraticIn=function(k){return k*k};sigma.utils.easings.quadraticOut=function(k){return k*(2-k)};sigma.utils.easings.quadraticInOut=function(k){if((k*=2)<1)return.5*k*k;return-.5*(--k*(k-2)-1)};sigma.utils.easings.cubicIn=function(k){return k*k*k};sigma.utils.easings.cubicOut=function(k){return--k*k*k+1};sigma.utils.easings.cubicInOut=function(k){if((k*=2)<1)return.5*k*k*k;return.5*((k-=2)*k*k+2)};sigma.utils.loadShader=function(gl,shaderSource,shaderType,error){var compiled,shader=gl.createShader(shaderType);gl.shaderSource(shader,shaderSource);gl.compileShader(shader);compiled=gl.getShaderParameter(shader,gl.COMPILE_STATUS);if(!compiled){if(error){error('Error compiling shader "'+shader+'":'+gl.getShaderInfoLog(shader))}gl.deleteShader(shader);return null}return shader};sigma.utils.loadProgram=function(gl,shaders,attribs,loc,error){var i,linked,program=gl.createProgram();for(i=0;i<shaders.length;++i)gl.attachShader(program,shaders[i]);if(attribs)for(i=0;i<attribs.length;++i)gl.bindAttribLocation(program,locations?locations[i]:i,opt_attribs[i]);gl.linkProgram(program);linked=gl.getProgramParameter(program,gl.LINK_STATUS);if(!linked){if(error)error("Error in program linking: "+gl.getProgramInfoLog(program));gl.deleteProgram(program);return null}return program};sigma.utils.pkg("sigma.utils.matrices");sigma.utils.matrices.translation=function(dx,dy){return[1,0,0,0,1,0,dx,dy,1]};sigma.utils.matrices.rotation=function(angle,m2){var cos=Math.cos(angle),sin=Math.sin(angle);return m2?[cos,-sin,sin,cos]:[cos,-sin,0,sin,cos,0,0,0,1]};sigma.utils.matrices.scale=function(ratio,m2){return m2?[ratio,0,0,ratio]:[ratio,0,0,0,ratio,0,0,0,1]};sigma.utils.matrices.multiply=function(a,b,m2){var l=m2?2:3,a00=a[0*l+0],a01=a[0*l+1],a02=a[0*l+2],a10=a[1*l+0],a11=a[1*l+1],a12=a[1*l+2],a20=a[2*l+0],a21=a[2*l+1],a22=a[2*l+2],b00=b[0*l+0],b01=b[0*l+1],b02=b[0*l+2],b10=b[1*l+0],b11=b[1*l+1],b12=b[1*l+2],b20=b[2*l+0],b21=b[2*l+1],b22=b[2*l+2];return m2?[a00*b00+a01*b10,a00*b01+a01*b11,a10*b00+a11*b10,a10*b01+a11*b11]:[a00*b00+a01*b10+a02*b20,a00*b01+a01*b11+a02*b21,a00*b02+a01*b12+a02*b22,a10*b00+a11*b10+a12*b20,a10*b01+a11*b11+a12*b21,a10*b02+a11*b12+a12*b22,a20*b00+a21*b10+a22*b20,a20*b01+a21*b11+a22*b21,a20*b02+a21*b12+a22*b22]}}).call(this);(function(global){"use strict";var x,lastTime=0,vendors=["ms","moz","webkit","o"];for(x=0;x<vendors.length&&!global.requestAnimationFrame;x++){global.requestAnimationFrame=global[vendors[x]+"RequestAnimationFrame"];global.cancelAnimationFrame=global[vendors[x]+"CancelAnimationFrame"]||global[vendors[x]+"CancelRequestAnimationFrame"]}if(!global.requestAnimationFrame)global.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=global.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id};if(!global.cancelAnimationFrame)global.cancelAnimationFrame=function(id){clearTimeout(id)};if(!Function.prototype.bind)Function.prototype.bind=function(oThis){if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP,fBound;fNOP=function(){};fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};fNOP.prototype=this.prototype;fBound.prototype=new fNOP;return fBound}})(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var settings={clone:true,immutable:true,verbose:false,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:true,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:false,drawEdges:true,drawNodes:true,drawLabels:true,drawEdgeLabels:false,batchEdgesDrawing:false,hideEdgesOnMove:false,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:true,mouseEnabled:true,mouseWheelEnabled:true,doubleClickEnabled:true,eventsEnabled:true,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:true,autoRescale:true,enableCamera:true,enableHovering:true,enableEdgeHovering:false,edgeHoverPrecision:5,rescaleIgnoreSize:false,skipErrors:false,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};sigma.settings=sigma.utils.extend(sigma.settings||{},settings)}).call(this);(function(){"use strict";var dispatcher=function(){Object.defineProperty(this,"_handlers",{value:{}})};dispatcher.prototype.bind=function(events,handler){var i,l,event,eArray;if(arguments.length===1&&typeof arguments[0]==="object")for(events in arguments[0])this.bind(events,arguments[0][events]);else if(arguments.length===2&&typeof arguments[1]==="function"){eArray=typeof events==="string"?events.split(" "):events;for(i=0,l=eArray.length;i!==l;i+=1){event=eArray[i];if(!event)continue;if(!this._handlers[event])this._handlers[event]=[];this._handlers[event].push({handler:handler})}}else throw"bind: Wrong arguments.";return this};dispatcher.prototype.unbind=function(events,handler){var i,n,j,m,k,a,event,eArray=typeof events==="string"?events.split(" "):events;if(!arguments.length){for(k in this._handlers)delete this._handlers[k];return this}if(handler){for(i=0,n=eArray.length;i!==n;i+=1){event=eArray[i];if(this._handlers[event]){a=[];for(j=0,m=this._handlers[event].length;j!==m;j+=1)if(this._handlers[event][j].handler!==handler)a.push(this._handlers[event][j]);this._handlers[event]=a}if(this._handlers[event]&&this._handlers[event].length===0)delete this._handlers[event]}}else for(i=0,n=eArray.length;i!==n;i+=1)delete this._handlers[eArray[i]];return this};dispatcher.prototype.dispatchEvent=function(events,data){var i,n,j,m,a,event,eventName,self=this,eArray=typeof events==="string"?events.split(" "):events;data=data===undefined?{}:data;for(i=0,n=eArray.length;i!==n;i+=1){eventName=eArray[i];if(this._handlers[eventName]){event=self.getEvent(eventName,data);a=[];for(j=0,m=this._handlers[eventName].length;j!==m;j+=1){this._handlers[eventName][j].handler(event);if(!this._handlers[eventName][j].one)a.push(this._handlers[eventName][j])}this._handlers[eventName]=a}}return this};dispatcher.prototype.getEvent=function(event,data){return{type:event,data:data||{},target:this}};dispatcher.extend=function(target,args){var k;for(k in dispatcher.prototype)if(dispatcher.prototype.hasOwnProperty(k))target[k]=dispatcher.prototype[k];dispatcher.apply(target,args)};if(typeof this.sigma!=="undefined"){this.sigma.classes=this.sigma.classes||{};this.sigma.classes.dispatcher=dispatcher}else if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=dispatcher;exports.dispatcher=dispatcher}else this.dispatcher=dispatcher}).call(this);(function(){"use strict";var configurable=function(){var i,l,data={},datas=Array.prototype.slice.call(arguments,0);var settings=function(a1,a2){var o,i,l,k;if(arguments.length===1&&typeof a1==="string"){if(data[a1]!==undefined)return data[a1];for(i=0,l=datas.length;i<l;i++)if(datas[i][a1]!==undefined)return datas[i][a1];return undefined}else if(typeof a1==="object"&&typeof a2==="string"){return(a1||{})[a2]!==undefined?a1[a2]:settings(a2)}else{o=typeof a1==="object"&&a2===undefined?a1:{};if(typeof a1==="string")o[a1]=a2;for(i=0,k=Object.keys(o),l=k.length;i<l;i++)data[k[i]]=o[k[i]];return this}};settings.embedObjects=function(){var args=datas.concat(data).concat(Array.prototype.splice.call(arguments,0));return configurable.apply({},args)};for(i=0,l=arguments.length;i<l;i++)settings(arguments[i]);return settings};if(typeof this.sigma!=="undefined"){this.sigma.classes=this.sigma.classes||{};this.sigma.classes.configurable=configurable}else if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=configurable;exports.configurable=configurable}else this.configurable=configurable}).call(this);(function(undefined){"use strict";var _methods=Object.create(null),_indexes=Object.create(null),_initBindings=Object.create(null),_methodBindings=Object.create(null),_methodBeforeBindings=Object.create(null),_defaultSettings={immutable:true,clone:true},_defaultSettingsFunction=function(key){return _defaultSettings[key]};var graph=function(settings){var k,fn,data;data={settings:settings||_defaultSettingsFunction,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(k in _initBindings)_initBindings[k].call(data);for(k in _methods){fn=__bindGraphMethod(k,data,_methods[k]);this[k]=fn;data[k]=fn}};function __bindGraphMethod(methodName,scope,fn){var result=function(){var k,res;for(k in _methodBeforeBindings[methodName])_methodBeforeBindings[methodName][k].apply(scope,arguments);res=fn.apply(scope,arguments);for(k in _methodBindings[methodName])_methodBindings[methodName][k].apply(scope,arguments);return res};return result}function __emptyObject(obj){var k;for(k in obj)if(!("hasOwnProperty"in obj)||obj.hasOwnProperty(k))delete obj[k];return obj}graph.addMethod=function(methodName,fn){if(typeof methodName!=="string"||typeof fn!=="function"||arguments.length!==2)throw"addMethod: Wrong arguments.";if(_methods[methodName]||graph[methodName])throw'The method "'+methodName+'" already exists.';_methods[methodName]=fn;_methodBindings[methodName]=Object.create(null);_methodBeforeBindings[methodName]=Object.create(null);return this};graph.hasMethod=function(methodName){return!!(_methods[methodName]||graph[methodName])};graph.attach=function(methodName,key,fn,before){if(typeof methodName!=="string"||typeof key!=="string"||typeof fn!=="function"||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var bindings;if(methodName==="constructor")bindings=_initBindings;else{if(before){if(!_methodBeforeBindings[methodName])throw'The method "'+methodName+'" does not exist.';bindings=_methodBeforeBindings[methodName]}else{if(!_methodBindings[methodName])throw'The method "'+methodName+'" does not exist.';bindings=_methodBindings[methodName]}}if(bindings[key])throw'A function "'+key+'" is already attached '+'to the method "'+methodName+'".';bindings[key]=fn;return this};graph.attachBefore=function(methodName,key,fn){return this.attach(methodName,key,fn,true)};graph.addIndex=function(name,bindings){if(typeof name!=="string"||Object(bindings)!==bindings||arguments.length!==2)throw"addIndex: Wrong arguments.";if(_indexes[name])throw'The index "'+name+'" already exists.';var k;_indexes[name]=bindings;for(k in bindings)if(typeof bindings[k]!=="function")throw"The bindings must be functions.";else graph.attach(k,name,bindings[k]);return this};graph.addMethod("addNode",function(node){if(Object(node)!==node||arguments.length!==1)throw"addNode: Wrong arguments.";if(typeof node.id!=="string"&&typeof node.id!=="number")throw"The node must have a string or number id.";if(this.nodesIndex[node.id])throw'The node "'+node.id+'" already exists.';var k,id=node.id,validNode=Object.create(null);if(this.settings("clone")){for(k in node)if(k!=="id")validNode[k]=node[k]}else validNode=node;if(this.settings("immutable"))Object.defineProperty(validNode,"id",{value:id,enumerable:true});else validNode.id=id;this.inNeighborsIndex[id]=Object.create(null);this.outNeighborsIndex[id]=Object.create(null);this.allNeighborsIndex[id]=Object.create(null);this.inNeighborsCount[id]=0;this.outNeighborsCount[id]=0;this.allNeighborsCount[id]=0;this.nodesArray.push(validNode);this.nodesIndex[validNode.id]=validNode;return this});graph.addMethod("addEdge",function(edge){if(Object(edge)!==edge||arguments.length!==1)throw"addEdge: Wrong arguments.";if(typeof edge.id!=="string"&&typeof edge.id!=="number")throw"The edge must have a string or number id.";if(typeof edge.source!=="string"&&typeof edge.source!=="number"||!this.nodesIndex[edge.source])throw"The edge source must have an existing node id.";if(typeof edge.target!=="string"&&typeof edge.target!=="number"||!this.nodesIndex[edge.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[edge.id])throw'The edge "'+edge.id+'" already exists.';var k,validEdge=Object.create(null);if(this.settings("clone")){for(k in edge)if(k!=="id"&&k!=="source"&&k!=="target")validEdge[k]=edge[k]}else validEdge=edge;if(this.settings("immutable")){Object.defineProperty(validEdge,"id",{value:edge.id,enumerable:true});Object.defineProperty(validEdge,"source",{value:edge.source,enumerable:true});Object.defineProperty(validEdge,"target",{value:edge.target,enumerable:true})}else{validEdge.id=edge.id;validEdge.source=edge.source;validEdge.target=edge.target}this.edgesArray.push(validEdge);this.edgesIndex[validEdge.id]=validEdge;if(!this.inNeighborsIndex[validEdge.target][validEdge.source])this.inNeighborsIndex[validEdge.target][validEdge.source]=Object.create(null);this.inNeighborsIndex[validEdge.target][validEdge.source][validEdge.id]=validEdge;if(!this.outNeighborsIndex[validEdge.source][validEdge.target])this.outNeighborsIndex[validEdge.source][validEdge.target]=Object.create(null);this.outNeighborsIndex[validEdge.source][validEdge.target][validEdge.id]=validEdge;if(!this.allNeighborsIndex[validEdge.source][validEdge.target])this.allNeighborsIndex[validEdge.source][validEdge.target]=Object.create(null);this.allNeighborsIndex[validEdge.source][validEdge.target][validEdge.id]=validEdge;if(validEdge.target!==validEdge.source){if(!this.allNeighborsIndex[validEdge.target][validEdge.source])this.allNeighborsIndex[validEdge.target][validEdge.source]=Object.create(null);this.allNeighborsIndex[validEdge.target][validEdge.source][validEdge.id]=validEdge}this.inNeighborsCount[validEdge.target]++;this.outNeighborsCount[validEdge.source]++;this.allNeighborsCount[validEdge.target]++;this.allNeighborsCount[validEdge.source]++;return this});graph.addMethod("dropNode",function(id){if(typeof id!=="string"&&typeof id!=="number"||arguments.length!==1)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[id])throw'The node "'+id+'" does not exist.';var i,k,l;delete this.nodesIndex[id];for(i=0,l=this.nodesArray.length;i<l;i++)if(this.nodesArray[i].id===id){this.nodesArray.splice(i,1);break}for(i=this.edgesArray.length-1;i>=0;i--)if(this.edgesArray[i].source===id||this.edgesArray[i].target===id)this.dropEdge(this.edgesArray[i].id);delete this.inNeighborsIndex[id];delete this.outNeighborsIndex[id];delete this.allNeighborsIndex[id];delete this.inNeighborsCount[id];delete this.outNeighborsCount[id];delete this.allNeighborsCount[id];for(k in this.nodesIndex){delete this.inNeighborsIndex[k][id];delete this.outNeighborsIndex[k][id];delete this.allNeighborsIndex[k][id]}return this});graph.addMethod("dropEdge",function(id){if(typeof id!=="string"&&typeof id!=="number"||arguments.length!==1)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[id])throw'The edge "'+id+'" does not exist.';var i,l,edge;edge=this.edgesIndex[id];delete this.edgesIndex[id];for(i=0,l=this.edgesArray.length;i<l;i++)if(this.edgesArray[i].id===id){this.edgesArray.splice(i,1);break}delete this.inNeighborsIndex[edge.target][edge.source][edge.id];if(!Object.keys(this.inNeighborsIndex[edge.target][edge.source]).length)delete this.inNeighborsIndex[edge.target][edge.source];delete this.outNeighborsIndex[edge.source][edge.target][edge.id];if(!Object.keys(this.outNeighborsIndex[edge.source][edge.target]).length)delete this.outNeighborsIndex[edge.source][edge.target];delete this.allNeighborsIndex[edge.source][edge.target][edge.id];if(!Object.keys(this.allNeighborsIndex[edge.source][edge.target]).length)delete this.allNeighborsIndex[edge.source][edge.target];if(edge.target!==edge.source){delete this.allNeighborsIndex[edge.target][edge.source][edge.id];if(!Object.keys(this.allNeighborsIndex[edge.target][edge.source]).length)delete this.allNeighborsIndex[edge.target][edge.source]}this.inNeighborsCount[edge.target]--;this.outNeighborsCount[edge.source]--;this.allNeighborsCount[edge.source]--;this.allNeighborsCount[edge.target]--;return this});graph.addMethod("kill",function(){this.nodesArray.length=0;this.edgesArray.length=0;delete this.nodesArray;delete this.edgesArray;delete this.nodesIndex;delete this.edgesIndex;delete this.inNeighborsIndex;delete this.outNeighborsIndex;delete this.allNeighborsIndex;delete this.inNeighborsCount;delete this.outNeighborsCount;delete this.allNeighborsCount});graph.addMethod("clear",function(){this.nodesArray.length=0;this.edgesArray.length=0;__emptyObject(this.nodesIndex);__emptyObject(this.edgesIndex);__emptyObject(this.nodesIndex);__emptyObject(this.inNeighborsIndex);__emptyObject(this.outNeighborsIndex);__emptyObject(this.allNeighborsIndex);__emptyObject(this.inNeighborsCount);__emptyObject(this.outNeighborsCount);__emptyObject(this.allNeighborsCount);return this});graph.addMethod("read",function(g){var i,a,l;a=g.nodes||[];for(i=0,l=a.length;i<l;i++)this.addNode(a[i]);a=g.edges||[];for(i=0,l=a.length;i<l;i++)this.addEdge(a[i]);return this});graph.addMethod("nodes",function(v){if(!arguments.length)return this.nodesArray.slice(0);if(arguments.length===1&&(typeof v==="string"||typeof v==="number"))return this.nodesIndex[v];if(arguments.length===1&&Object.prototype.toString.call(v)==="[object Array]"){var i,l,a=[];for(i=0,l=v.length;i<l;i++)if(typeof v[i]==="string"||typeof v[i]==="number")a.push(this.nodesIndex[v[i]]);else throw"nodes: Wrong arguments.";return a}throw"nodes: Wrong arguments."});graph.addMethod("degree",function(v,which){which={in:this.inNeighborsCount,out:this.outNeighborsCount}[which||""]||this.allNeighborsCount;if(typeof v==="string"||typeof v==="number")return which[v];if(Object.prototype.toString.call(v)==="[object Array]"){var i,l,a=[];for(i=0,l=v.length;i<l;i++)if(typeof v[i]==="string"||typeof v[i]==="number")a.push(which[v[i]]);else throw"degree: Wrong arguments.";return a}throw"degree: Wrong arguments."});graph.addMethod("edges",function(v){if(!arguments.length)return this.edgesArray.slice(0);if(arguments.length===1&&(typeof v==="string"||typeof v==="number"))return this.edgesIndex[v];if(arguments.length===1&&Object.prototype.toString.call(v)==="[object Array]"){var i,l,a=[];for(i=0,l=v.length;i<l;i++)if(typeof v[i]==="string"||typeof v[i]==="number")a.push(this.edgesIndex[v[i]]);else throw"edges: Wrong arguments.";return a}throw"edges: Wrong arguments."});if(typeof sigma!=="undefined"){sigma.classes=sigma.classes||Object.create(null);sigma.classes.graph=graph}else if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=graph;exports.graph=graph}else this.graph=graph}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.classes");sigma.classes.camera=function(id,graph,settings,options){sigma.classes.dispatcher.extend(this);Object.defineProperty(this,"graph",{value:graph});Object.defineProperty(this,"id",{value:id});Object.defineProperty(this,"readPrefix",{value:"read_cam"+id+":"});Object.defineProperty(this,"prefix",{value:"cam"+id+":"});this.x=0;this.y=0;this.ratio=1;this.angle=0;this.isAnimated=false;this.settings=typeof options==="object"&&options?settings.embedObject(options):settings};sigma.classes.camera.prototype.goTo=function(coordinates){if(!this.settings("enableCamera"))return this;var i,l,c=coordinates||{},keys=["x","y","ratio","angle"];for(i=0,l=keys.length;i<l;i++)if(c[keys[i]]!==undefined){if(typeof c[keys[i]]==="number"&&!isNaN(c[keys[i]]))this[keys[i]]=c[keys[i]];else throw'Value for "'+keys[i]+'" is not a number.'}this.dispatchEvent("coordinatesUpdated");return this};sigma.classes.camera.prototype.applyView=function(read,write,options){options=options||{};write=write!==undefined?write:this.prefix;read=read!==undefined?read:this.readPrefix;var nodes=options.nodes||this.graph.nodes(),edges=options.edges||this.graph.edges();var i,l,node,relCos=Math.cos(this.angle)/this.ratio,relSin=Math.sin(this.angle)/this.ratio,nodeRatio=Math.pow(this.ratio,this.settings("nodesPowRatio")),edgeRatio=Math.pow(this.ratio,this.settings("edgesPowRatio")),xOffset=(options.width||0)/2-this.x*relCos-this.y*relSin,yOffset=(options.height||0)/2-this.y*relCos+this.x*relSin;for(i=0,l=nodes.length;i<l;i++){node=nodes[i];node[write+"x"]=(node[read+"x"]||0)*relCos+(node[read+"y"]||0)*relSin+xOffset;node[write+"y"]=(node[read+"y"]||0)*relCos-(node[read+"x"]||0)*relSin+yOffset;node[write+"size"]=(node[read+"size"]||0)/nodeRatio}for(i=0,l=edges.length;i<l;i++){edges[i][write+"size"]=(edges[i][read+"size"]||0)/edgeRatio}return this};sigma.classes.camera.prototype.graphPosition=function(x,y,vector){var X=0,Y=0,cos=Math.cos(this.angle),sin=Math.sin(this.angle);if(!vector){X=-(this.x*cos+this.y*sin)/this.ratio;Y=-(this.y*cos-this.x*sin)/this.ratio}return{x:(x*cos+y*sin)/this.ratio+X,y:(y*cos-x*sin)/this.ratio+Y}};sigma.classes.camera.prototype.cameraPosition=function(x,y,vector){var X=0,Y=0,cos=Math.cos(this.angle),sin=Math.sin(this.angle);if(!vector){X=-(this.x*cos+this.y*sin)/this.ratio;Y=-(this.y*cos-this.x*sin)/this.ratio}return{x:((x-X)*cos-(y-Y)*sin)*this.ratio,y:((y-Y)*cos+(x-X)*sin)*this.ratio}};sigma.classes.camera.prototype.getMatrix=function(){var scale=sigma.utils.matrices.scale(1/this.ratio),rotation=sigma.utils.matrices.rotation(this.angle),translation=sigma.utils.matrices.translation(-this.x,-this.y),matrix=sigma.utils.matrices.multiply(translation,sigma.utils.matrices.multiply(rotation,scale));return matrix};sigma.classes.camera.prototype.getRectangle=function(width,height){var widthVect=this.cameraPosition(width,0,true),heightVect=this.cameraPosition(0,height,true),centerVect=this.cameraPosition(width/2,height/2,true),marginX=this.cameraPosition(width/4,0,true).x,marginY=this.cameraPosition(0,height/4,true).y;return{x1:this.x-centerVect.x-marginX,y1:this.y-centerVect.y-marginY,x2:this.x-centerVect.x+marginX+widthVect.x,y2:this.y-centerVect.y-marginY+widthVect.y,height:Math.sqrt(Math.pow(heightVect.x,2)+Math.pow(heightVect.y+2*marginY,2))}}}).call(this);(function(undefined){"use strict";var _geom={pointToSquare:function(n){return{x1:n.x-n.size,y1:n.y-n.size,x2:n.x+n.size,y2:n.y-n.size,height:n.size*2}},isAxisAligned:function(r){return r.x1===r.x2||r.y1===r.y2},axisAlignedTopPoints:function(r){if(r.y1===r.y2&&r.x1<r.x2)return r;if(r.x1===r.x2&&r.y2>r.y1)return{x1:r.x1-r.height,y1:r.y1,x2:r.x1,y2:r.y1,height:r.height};if(r.x1===r.x2&&r.y2<r.y1)return{x1:r.x1,y1:r.y2,x2:r.x2+r.height,y2:r.y2,height:r.height};return{x1:r.x2,y1:r.y1-r.height,x2:r.x1,y2:r.y1-r.height,height:r.height}},lowerLeftCoor:function(r){var width=Math.sqrt(Math.pow(r.x2-r.x1,2)+Math.pow(r.y2-r.y1,2));return{x:r.x1-(r.y2-r.y1)*r.height/width,y:r.y1+(r.x2-r.x1)*r.height/width}},lowerRightCoor:function(r,llc){return{x:llc.x-r.x1+r.x2,y:llc.y-r.y1+r.y2}},rectangleCorners:function(r){var llc=this.lowerLeftCoor(r),lrc=this.lowerRightCoor(r,llc);return[{x:r.x1,y:r.y1},{x:r.x2,y:r.y2},{x:llc.x,y:llc.y},{x:lrc.x,y:lrc.y}]},splitSquare:function(b){return[[{x:b.x,y:b.y},{x:b.x+b.width/2,y:b.y},{x:b.x,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height/2}],[{x:b.x+b.width/2,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x+b.width,y:b.y+b.height/2}],[{x:b.x,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x,y:b.y+b.height},{x:b.x+b.width/2,y:b.y+b.height}],[{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x+b.width,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height},{x:b.x+b.width,y:b.y+b.height}]]},axis:function(c1,c2){return[{x:c1[1].x-c1[0].x,y:c1[1].y-c1[0].y},{x:c1[1].x-c1[3].x,y:c1[1].y-c1[3].y},{x:c2[0].x-c2[2].x,y:c2[0].y-c2[2].y},{x:c2[0].x-c2[1].x,y:c2[0].y-c2[1].y}]},projection:function(c,a){var l=(c.x*a.x+c.y*a.y)/(Math.pow(a.x,2)+Math.pow(a.y,2));return{x:l*a.x,y:l*a.y}},axisCollision:function(a,c1,c2){var sc1=[],sc2=[];for(var ci=0;ci<4;ci++){var p1=this.projection(c1[ci],a),p2=this.projection(c2[ci],a);sc1.push(p1.x*a.x+p1.y*a.y);sc2.push(p2.x*a.x+p2.y*a.y)}var maxc1=Math.max.apply(Math,sc1),maxc2=Math.max.apply(Math,sc2),minc1=Math.min.apply(Math,sc1),minc2=Math.min.apply(Math,sc2);return minc2<=maxc1&&maxc2>=minc1},collision:function(c1,c2){var axis=this.axis(c1,c2),col=true;for(var i=0;i<4;i++)col=col&&this.axisCollision(axis[i],c1,c2);return col}};function _quadIndex(point,quadBounds){var xmp=quadBounds.x+quadBounds.width/2,ymp=quadBounds.y+quadBounds.height/2,top=point.y<ymp,left=point.x<xmp;if(top){if(left)return 0;else return 1}else{if(left)return 2;else return 3}}function _quadIndexes(rectangle,quadCorners){var indexes=[];for(var i=0;i<4;i++)if(rectangle.x2>=quadCorners[i][0].x&&rectangle.x1<=quadCorners[i][1].x&&rectangle.y1+rectangle.height>=quadCorners[i][0].y&&rectangle.y1<=quadCorners[i][2].y)indexes.push(i);return indexes}function _quadCollision(corners,quadCorners){var indexes=[];for(var i=0;i<4;i++)if(_geom.collision(corners,quadCorners[i]))indexes.push(i);return indexes}function _quadSubdivide(index,quad){var next=quad.level+1,subw=Math.round(quad.bounds.width/2),subh=Math.round(quad.bounds.height/2),qx=Math.round(quad.bounds.x),qy=Math.round(quad.bounds.y),x,y;switch(index){case 0:x=qx;y=qy;break;case 1:x=qx+subw;y=qy;break;case 2:x=qx;y=qy+subh;break;case 3:x=qx+subw;y=qy+subh;break}return _quadTree({x:x,y:y,width:subw,height:subh},next,quad.maxElements,quad.maxLevel)}function _quadInsert(el,sizedPoint,quad){if(quad.level<quad.maxLevel){var indexes=_quadIndexes(sizedPoint,quad.corners);for(var i=0,l=indexes.length;i<l;i++){if(quad.nodes[indexes[i]]===undefined)quad.nodes[indexes[i]]=_quadSubdivide(indexes[i],quad);_quadInsert(el,sizedPoint,quad.nodes[indexes[i]])}}else{quad.elements.push(el)}}function _quadRetrievePoint(point,quad){if(quad.level<quad.maxLevel){var index=_quadIndex(point,quad.bounds);if(quad.nodes[index]!==undefined){return _quadRetrievePoint(point,quad.nodes[index])}else{return[]}}else{return quad.elements}}function _quadRetrieveArea(rectData,quad,collisionFunc,els){els=els||{};if(quad.level<quad.maxLevel){var indexes=collisionFunc(rectData,quad.corners);for(var i=0,l=indexes.length;i<l;i++)if(quad.nodes[indexes[i]]!==undefined)_quadRetrieveArea(rectData,quad.nodes[indexes[i]],collisionFunc,els)}else for(var j=0,m=quad.elements.length;j<m;j++)if(els[quad.elements[j].id]===undefined)els[quad.elements[j].id]=quad.elements[j];return els}function _quadTree(bounds,level,maxElements,maxLevel){return{level:level||0,bounds:bounds,corners:_geom.splitSquare(bounds),maxElements:maxElements||20,maxLevel:maxLevel||4,elements:[],nodes:[]}}var quad=function(){this._geom=_geom;this._tree=null;this._cache={query:false,result:false}};quad.prototype.index=function(nodes,params){if(!params.bounds)throw"sigma.classes.quad.index: bounds information not given.";var prefix=params.prefix||"";this._tree=_quadTree(params.bounds,0,params.maxElements,params.maxLevel);for(var i=0,l=nodes.length;i<l;i++){_quadInsert(nodes[i],_geom.pointToSquare({x:nodes[i][prefix+"x"],y:nodes[i][prefix+"y"],size:nodes[i][prefix+"size"]}),this._tree)}this._cache={query:false,result:false};return this._tree};quad.prototype.point=function(x,y){return this._tree?_quadRetrievePoint({x:x,y:y},this._tree)||[]:[]};quad.prototype.area=function(rect){var serialized=JSON.stringify(rect),collisionFunc,rectData;if(this._cache.query===serialized)return this._cache.result;if(_geom.isAxisAligned(rect)){collisionFunc=_quadIndexes;rectData=_geom.axisAlignedTopPoints(rect)}else{collisionFunc=_quadCollision;rectData=_geom.rectangleCorners(rect)}var nodes=this._tree?_quadRetrieveArea(rectData,this._tree,collisionFunc):[];var nodesArray=[];for(var i in nodes)nodesArray.push(nodes[i]);this._cache.query=serialized;this._cache.result=nodesArray;return nodesArray};if(typeof this.sigma!=="undefined"){this.sigma.classes=this.sigma.classes||{};this.sigma.classes.quad=quad}else if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=quad;exports.quad=quad}else this.quad=quad}).call(this);(function(undefined){"use strict";var _geom={pointToSquare:function(n){return{x1:n.x-n.size,y1:n.y-n.size,x2:n.x+n.size,y2:n.y-n.size,height:n.size*2}},lineToSquare:function(e){if(e.y1<e.y2){if(e.x1<e.x2){return{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+e.size*2}}return{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+e.size*2}}if(e.x1<e.x2){return{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+e.size*2}}return{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+e.size*2}},quadraticCurveToSquare:function(e,cp){var pt=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,cp.x,cp.y);var minX=Math.min(e.x1,e.x2,pt.x),maxX=Math.max(e.x1,e.x2,pt.x),minY=Math.min(e.y1,e.y2,pt.y),maxY=Math.max(e.y1,e.y2,pt.y);return{x1:minX-e.size,y1:minY-e.size,x2:maxX+e.size,y2:minY-e.size,height:maxY-minY+e.size*2}},selfLoopToSquare:function(n){var cp=sigma.utils.getSelfLoopControlPoints(n.x,n.y,n.size);var minX=Math.min(n.x,cp.x1,cp.x2),maxX=Math.max(n.x,cp.x1,cp.x2),minY=Math.min(n.y,cp.y1,cp.y2),maxY=Math.max(n.y,cp.y1,cp.y2);return{x1:minX-n.size,y1:minY-n.size,x2:maxX+n.size,y2:minY-n.size,height:maxY-minY+n.size*2}},isAxisAligned:function(r){return r.x1===r.x2||r.y1===r.y2},axisAlignedTopPoints:function(r){if(r.y1===r.y2&&r.x1<r.x2)return r;if(r.x1===r.x2&&r.y2>r.y1)return{x1:r.x1-r.height,y1:r.y1,x2:r.x1,y2:r.y1,height:r.height};if(r.x1===r.x2&&r.y2<r.y1)return{x1:r.x1,y1:r.y2,x2:r.x2+r.height,y2:r.y2,height:r.height};return{x1:r.x2,y1:r.y1-r.height,x2:r.x1,y2:r.y1-r.height,height:r.height}},lowerLeftCoor:function(r){var width=Math.sqrt(Math.pow(r.x2-r.x1,2)+Math.pow(r.y2-r.y1,2));return{x:r.x1-(r.y2-r.y1)*r.height/width,y:r.y1+(r.x2-r.x1)*r.height/width}},lowerRightCoor:function(r,llc){return{x:llc.x-r.x1+r.x2,y:llc.y-r.y1+r.y2}},rectangleCorners:function(r){var llc=this.lowerLeftCoor(r),lrc=this.lowerRightCoor(r,llc);return[{x:r.x1,y:r.y1},{x:r.x2,y:r.y2},{x:llc.x,y:llc.y},{x:lrc.x,y:lrc.y}]},splitSquare:function(b){return[[{x:b.x,y:b.y},{x:b.x+b.width/2,y:b.y},{x:b.x,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height/2}],[{x:b.x+b.width/2,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x+b.width,y:b.y+b.height/2}],[{x:b.x,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x,y:b.y+b.height},{x:b.x+b.width/2,y:b.y+b.height}],[{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x+b.width,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height},{x:b.x+b.width,y:b.y+b.height}]]},axis:function(c1,c2){return[{x:c1[1].x-c1[0].x,y:c1[1].y-c1[0].y},{x:c1[1].x-c1[3].x,y:c1[1].y-c1[3].y},{x:c2[0].x-c2[2].x,y:c2[0].y-c2[2].y},{x:c2[0].x-c2[1].x,y:c2[0].y-c2[1].y}]},projection:function(c,a){var l=(c.x*a.x+c.y*a.y)/(Math.pow(a.x,2)+Math.pow(a.y,2));return{x:l*a.x,y:l*a.y}},axisCollision:function(a,c1,c2){var sc1=[],sc2=[];for(var ci=0;ci<4;ci++){var p1=this.projection(c1[ci],a),p2=this.projection(c2[ci],a);sc1.push(p1.x*a.x+p1.y*a.y);sc2.push(p2.x*a.x+p2.y*a.y)}var maxc1=Math.max.apply(Math,sc1),maxc2=Math.max.apply(Math,sc2),minc1=Math.min.apply(Math,sc1),minc2=Math.min.apply(Math,sc2);return minc2<=maxc1&&maxc2>=minc1},collision:function(c1,c2){var axis=this.axis(c1,c2),col=true;for(var i=0;i<4;i++)col=col&&this.axisCollision(axis[i],c1,c2);return col}};function _quadIndex(point,quadBounds){var xmp=quadBounds.x+quadBounds.width/2,ymp=quadBounds.y+quadBounds.height/2,top=point.y<ymp,left=point.x<xmp;if(top){if(left)return 0;else return 1}else{if(left)return 2;else return 3}}function _quadIndexes(rectangle,quadCorners){var indexes=[];for(var i=0;i<4;i++)if(rectangle.x2>=quadCorners[i][0].x&&rectangle.x1<=quadCorners[i][1].x&&rectangle.y1+rectangle.height>=quadCorners[i][0].y&&rectangle.y1<=quadCorners[i][2].y)indexes.push(i);return indexes}function _quadCollision(corners,quadCorners){var indexes=[];for(var i=0;i<4;i++)if(_geom.collision(corners,quadCorners[i]))indexes.push(i);return indexes}function _quadSubdivide(index,quad){var next=quad.level+1,subw=Math.round(quad.bounds.width/2),subh=Math.round(quad.bounds.height/2),qx=Math.round(quad.bounds.x),qy=Math.round(quad.bounds.y),x,y;switch(index){case 0:x=qx;y=qy;break;case 1:x=qx+subw;y=qy;break;case 2:x=qx;y=qy+subh;break;case 3:x=qx+subw;y=qy+subh;break}return _quadTree({x:x,y:y,width:subw,height:subh},next,quad.maxElements,quad.maxLevel)}function _quadInsert(el,sizedPoint,quad){if(quad.level<quad.maxLevel){var indexes=_quadIndexes(sizedPoint,quad.corners);for(var i=0,l=indexes.length;i<l;i++){if(quad.nodes[indexes[i]]===undefined)quad.nodes[indexes[i]]=_quadSubdivide(indexes[i],quad);_quadInsert(el,sizedPoint,quad.nodes[indexes[i]])}}else{quad.elements.push(el)}}function _quadRetrievePoint(point,quad){if(quad.level<quad.maxLevel){var index=_quadIndex(point,quad.bounds);if(quad.nodes[index]!==undefined){return _quadRetrievePoint(point,quad.nodes[index])}else{return[]}}else{return quad.elements}}function _quadRetrieveArea(rectData,quad,collisionFunc,els){els=els||{};if(quad.level<quad.maxLevel){var indexes=collisionFunc(rectData,quad.corners);for(var i=0,l=indexes.length;i<l;i++)if(quad.nodes[indexes[i]]!==undefined)_quadRetrieveArea(rectData,quad.nodes[indexes[i]],collisionFunc,els)}else for(var j=0,m=quad.elements.length;j<m;j++)if(els[quad.elements[j].id]===undefined)els[quad.elements[j].id]=quad.elements[j];return els}function _quadTree(bounds,level,maxElements,maxLevel){return{level:level||0,bounds:bounds,corners:_geom.splitSquare(bounds),maxElements:maxElements||40,maxLevel:maxLevel||8,elements:[],nodes:[]}}var edgequad=function(){this._geom=_geom;this._tree=null;this._cache={query:false,result:false};this._enabled=true};edgequad.prototype.index=function(graph,params){if(!this._enabled)return this._tree;if(!params.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var prefix=params.prefix||"",cp,source,target,n,e;this._tree=_quadTree(params.bounds,0,params.maxElements,params.maxLevel);var edges=graph.edges();for(var i=0,l=edges.length;i<l;i++){source=graph.nodes(edges[i].source);target=graph.nodes(edges[i].target);e={x1:source[prefix+"x"],y1:source[prefix+"y"],x2:target[prefix+"x"],y2:target[prefix+"y"],size:edges[i][prefix+"size"]||0};if(edges[i].type==="curve"||edges[i].type==="curvedArrow"){if(source.id===target.id){n={x:source[prefix+"x"],y:source[prefix+"y"],size:source[prefix+"size"]||0};_quadInsert(edges[i],_geom.selfLoopToSquare(n),this._tree)}else{cp=sigma.utils.getQuadraticControlPoint(e.x1,e.y1,e.x2,e.y2);_quadInsert(edges[i],_geom.quadraticCurveToSquare(e,cp),this._tree)}}else{_quadInsert(edges[i],_geom.lineToSquare(e),this._tree)}}this._cache={query:false,result:false};return this._tree};edgequad.prototype.point=function(x,y){if(!this._enabled)return[];return this._tree?_quadRetrievePoint({x:x,y:y},this._tree)||[]:[]};edgequad.prototype.area=function(rect){if(!this._enabled)return[];var serialized=JSON.stringify(rect),collisionFunc,rectData;if(this._cache.query===serialized)return this._cache.result;if(_geom.isAxisAligned(rect)){collisionFunc=_quadIndexes;rectData=_geom.axisAlignedTopPoints(rect)}else{collisionFunc=_quadCollision;rectData=_geom.rectangleCorners(rect)}var edges=this._tree?_quadRetrieveArea(rectData,this._tree,collisionFunc):[];var edgesArray=[];for(var i in edges)edgesArray.push(edges[i]);this._cache.query=serialized;this._cache.result=edgesArray;return edgesArray};if(typeof this.sigma!=="undefined"){this.sigma.classes=this.sigma.classes||{};this.sigma.classes.edgequad=edgequad}else if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=edgequad;exports.edgequad=edgequad}else this.edgequad=edgequad}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.captors");sigma.captors.mouse=function(target,camera,settings){var _self=this,_target=target,_camera=camera,_settings=settings,_startCameraX,_startCameraY,_startCameraAngle,_lastCameraX,_lastCameraY,_lastCameraAngle,_lastCameraRatio,_startMouseX,_startMouseY,_isMouseDown,_isMoving,_hasDragged,_downStartTime,_movingTimeoutId;sigma.classes.dispatcher.extend(this);sigma.utils.doubleClick(_target,"click",_doubleClickHandler);_target.addEventListener("DOMMouseScroll",_wheelHandler,false);_target.addEventListener("mousewheel",_wheelHandler,false);_target.addEventListener("mousemove",_moveHandler,false);_target.addEventListener("mousedown",_downHandler,false);_target.addEventListener("click",_clickHandler,false);_target.addEventListener("mouseout",_outHandler,false);document.addEventListener("mouseup",_upHandler,false);this.kill=function(){sigma.utils.unbindDoubleClick(_target,"click");_target.removeEventListener("DOMMouseScroll",_wheelHandler);_target.removeEventListener("mousewheel",_wheelHandler);_target.removeEventListener("mousemove",_moveHandler);_target.removeEventListener("mousedown",_downHandler);_target.removeEventListener("click",_clickHandler);_target.removeEventListener("mouseout",_outHandler);document.removeEventListener("mouseup",_upHandler)};function _moveHandler(e){var x,y,pos;if(_settings("mouseEnabled")){_self.dispatchEvent("mousemove",sigma.utils.mouseCoords(e));if(_isMouseDown){_isMoving=true;_hasDragged=true;if(_movingTimeoutId)clearTimeout(_movingTimeoutId);_movingTimeoutId=setTimeout(function(){_isMoving=false},_settings("dragTimeout"));sigma.misc.animation.killAll(_camera);_camera.isMoving=true;pos=_camera.cameraPosition(sigma.utils.getX(e)-_startMouseX,sigma.utils.getY(e)-_startMouseY,true);x=_startCameraX-pos.x;y=_startCameraY-pos.y;if(x!==_camera.x||y!==_camera.y){_lastCameraX=_camera.x;_lastCameraY=_camera.y;_camera.goTo({x:x,y:y})}if(e.preventDefault)e.preventDefault();else e.returnValue=false;e.stopPropagation();return false}}}function _upHandler(e){if(_settings("mouseEnabled")&&_isMouseDown){_isMouseDown=false;if(_movingTimeoutId)clearTimeout(_movingTimeoutId);_camera.isMoving=false;var x=sigma.utils.getX(e),y=sigma.utils.getY(e);if(_isMoving){sigma.misc.animation.killAll(_camera);sigma.misc.animation.camera(_camera,{x:_camera.x+_settings("mouseInertiaRatio")*(_camera.x-_lastCameraX),y:_camera.y+_settings("mouseInertiaRatio")*(_camera.y-_lastCameraY)},{easing:"quadraticOut",duration:_settings("mouseInertiaDuration")})}else if(_startMouseX!==x||_startMouseY!==y)_camera.goTo({x:_camera.x,y:_camera.y});_self.dispatchEvent("mouseup",sigma.utils.mouseCoords(e));_isMoving=false}}function _downHandler(e){if(_settings("mouseEnabled")){_startCameraX=_camera.x;_startCameraY=_camera.y;_lastCameraX=_camera.x;_lastCameraY=_camera.y;_startMouseX=sigma.utils.getX(e);_startMouseY=sigma.utils.getY(e);_hasDragged=false;_downStartTime=(new Date).getTime();switch(e.which){case 2:break;case 3:_self.dispatchEvent("rightclick",sigma.utils.mouseCoords(e,_startMouseX,_startMouseY));break;default:_isMouseDown=true;_self.dispatchEvent("mousedown",sigma.utils.mouseCoords(e,_startMouseX,_startMouseY))}}}function _outHandler(e){if(_settings("mouseEnabled"))_self.dispatchEvent("mouseout")}function _clickHandler(e){if(_settings("mouseEnabled")){var event=sigma.utils.mouseCoords(e);event.isDragging=(new Date).getTime()-_downStartTime>100&&_hasDragged;_self.dispatchEvent("click",event)}if(e.preventDefault)e.preventDefault();else e.returnValue=false;e.stopPropagation();return false}function _doubleClickHandler(e){var pos,ratio,animation;if(_settings("mouseEnabled")){ratio=1/_settings("doubleClickZoomingRatio");_self.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,_startMouseX,_startMouseY));if(_settings("doubleClickEnabled")){pos=_camera.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,true);animation={duration:_settings("doubleClickZoomDuration")};sigma.utils.zoomTo(_camera,pos.x,pos.y,ratio,animation)}if(e.preventDefault)e.preventDefault();else e.returnValue=false;e.stopPropagation();return false}}function _wheelHandler(e){var pos,ratio,animation,wheelDelta=sigma.utils.getDelta(e);if(_settings("mouseEnabled")&&_settings("mouseWheelEnabled")&&wheelDelta!==0){ratio=wheelDelta>0?1/_settings("zoomingRatio"):_settings("zoomingRatio");pos=_camera.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,true);animation={duration:_settings("mouseZoomDuration")};sigma.utils.zoomTo(_camera,pos.x,pos.y,ratio,animation);if(e.preventDefault)e.preventDefault();else e.returnValue=false;e.stopPropagation();return false}}}}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.captors");sigma.captors.touch=function(target,camera,settings){var _self=this,_target=target,_camera=camera,_settings=settings,_startCameraX,_startCameraY,_startCameraAngle,_startCameraRatio,_lastCameraX,_lastCameraY,_lastCameraAngle,_lastCameraRatio,_downTouches=[],_startTouchX0,_startTouchY0,_startTouchX1,_startTouchY1,_startTouchAngle,_startTouchDistance,_touchMode,_isMoving,_doubleTap,_movingTimeoutId;sigma.classes.dispatcher.extend(this);sigma.utils.doubleClick(_target,"touchstart",_doubleTapHandler);_target.addEventListener("touchstart",_handleStart,false);_target.addEventListener("touchend",_handleLeave,false);_target.addEventListener("touchcancel",_handleLeave,false);_target.addEventListener("touchleave",_handleLeave,false);_target.addEventListener("touchmove",_handleMove,false);function position(e){var offset=sigma.utils.getOffset(_target);return{x:e.pageX-offset.left,y:e.pageY-offset.top}}this.kill=function(){sigma.utils.unbindDoubleClick(_target,"touchstart");_target.addEventListener("touchstart",_handleStart);_target.addEventListener("touchend",_handleLeave);_target.addEventListener("touchcancel",_handleLeave);_target.addEventListener("touchleave",_handleLeave);_target.addEventListener("touchmove",_handleMove)};function _handleStart(e){if(_settings("touchEnabled")){var x0,x1,y0,y1,pos0,pos1;_downTouches=e.touches;switch(_downTouches.length){case 1:_camera.isMoving=true;_touchMode=1;_startCameraX=_camera.x;_startCameraY=_camera.y;_lastCameraX=_camera.x;_lastCameraY=_camera.y;pos0=position(_downTouches[0]);_startTouchX0=pos0.x;_startTouchY0=pos0.y;break;case 2:_camera.isMoving=true;_touchMode=2;pos0=position(_downTouches[0]);pos1=position(_downTouches[1]);x0=pos0.x;y0=pos0.y;x1=pos1.x;y1=pos1.y;_lastCameraX=_camera.x;_lastCameraY=_camera.y;_startCameraAngle=_camera.angle;_startCameraRatio=_camera.ratio;_startCameraX=_camera.x;_startCameraY=_camera.y;_startTouchX0=x0;_startTouchY0=y0;_startTouchX1=x1;_startTouchY1=y1;_startTouchAngle=Math.atan2(_startTouchY1-_startTouchY0,_startTouchX1-_startTouchX0);_startTouchDistance=Math.sqrt((_startTouchY1-_startTouchY0)*(_startTouchY1-_startTouchY0)+(_startTouchX1-_startTouchX0)*(_startTouchX1-_startTouchX0));e.preventDefault();return false}}}function _handleLeave(e){if(_settings("touchEnabled")){_downTouches=e.touches;var inertiaRatio=_settings("touchInertiaRatio");if(_movingTimeoutId){_isMoving=false;clearTimeout(_movingTimeoutId)}switch(_touchMode){case 2:if(e.touches.length===1){_handleStart(e);e.preventDefault();break}case 1:_camera.isMoving=false;_self.dispatchEvent("stopDrag");if(_isMoving){_doubleTap=false;sigma.misc.animation.camera(_camera,{x:_camera.x+inertiaRatio*(_camera.x-_lastCameraX),y:_camera.y+inertiaRatio*(_camera.y-_lastCameraY)},{easing:"quadraticOut",duration:_settings("touchInertiaDuration")})}_isMoving=false;_touchMode=0;break}}}function _handleMove(e){if(!_doubleTap&&_settings("touchEnabled")){var x0,x1,y0,y1,cos,sin,end,pos0,pos1,diff,start,dAngle,dRatio,newStageX,newStageY,newStageRatio,newStageAngle;_downTouches=e.touches;_isMoving=true;if(_movingTimeoutId)clearTimeout(_movingTimeoutId);_movingTimeoutId=setTimeout(function(){_isMoving=false},_settings("dragTimeout"));switch(_touchMode){case 1:pos0=position(_downTouches[0]);x0=pos0.x;y0=pos0.y;diff=_camera.cameraPosition(x0-_startTouchX0,y0-_startTouchY0,true);newStageX=_startCameraX-diff.x;newStageY=_startCameraY-diff.y;if(newStageX!==_camera.x||newStageY!==_camera.y){_lastCameraX=_camera.x;_lastCameraY=_camera.y;_camera.goTo({x:newStageX,y:newStageY});_self.dispatchEvent("mousemove",sigma.utils.mouseCoords(e,pos0.x,pos0.y));_self.dispatchEvent("drag")}break;case 2:pos0=position(_downTouches[0]);pos1=position(_downTouches[1]);x0=pos0.x;y0=pos0.y;x1=pos1.x;y1=pos1.y;start=_camera.cameraPosition((_startTouchX0+_startTouchX1)/2-sigma.utils.getCenter(e).x,(_startTouchY0+_startTouchY1)/2-sigma.utils.getCenter(e).y,true);end=_camera.cameraPosition((x0+x1)/2-sigma.utils.getCenter(e).x,(y0+y1)/2-sigma.utils.getCenter(e).y,true);dAngle=Math.atan2(y1-y0,x1-x0)-_startTouchAngle;dRatio=Math.sqrt((y1-y0)*(y1-y0)+(x1-x0)*(x1-x0))/_startTouchDistance;x0=start.x;y0=start.y;newStageRatio=_startCameraRatio/dRatio;x0=x0*dRatio;y0=y0*dRatio;newStageAngle=_startCameraAngle-dAngle;cos=Math.cos(-dAngle);sin=Math.sin(-dAngle);x1=x0*cos+y0*sin;y1=y0*cos-x0*sin;x0=x1;y0=y1;newStageX=x0-end.x+_startCameraX;newStageY=y0-end.y+_startCameraY;if(newStageRatio!==_camera.ratio||newStageAngle!==_camera.angle||newStageX!==_camera.x||newStageY!==_camera.y){_lastCameraX=_camera.x;_lastCameraY=_camera.y;_lastCameraAngle=_camera.angle;_lastCameraRatio=_camera.ratio;_camera.goTo({x:newStageX,y:newStageY,angle:newStageAngle,ratio:newStageRatio});_self.dispatchEvent("drag")}break}e.preventDefault();return false}}function _doubleTapHandler(e){var pos,ratio,animation;if(e.touches&&e.touches.length===1&&_settings("touchEnabled")){_doubleTap=true;ratio=1/_settings("doubleClickZoomingRatio");pos=position(e.touches[0]);_self.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,pos.x,pos.y));if(_settings("doubleClickEnabled")){pos=_camera.cameraPosition(pos.x-sigma.utils.getCenter(e).x,pos.y-sigma.utils.getCenter(e).y,true);animation={duration:_settings("doubleClickZoomDuration"),onComplete:function(){_doubleTap=false}};sigma.utils.zoomTo(_camera,pos.x,pos.y,ratio,animation)}if(e.preventDefault)e.preventDefault();else e.returnValue=false;e.stopPropagation();return false}}}}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";if(typeof conrad==="undefined")throw"conrad is not declared";sigma.utils.pkg("sigma.renderers");sigma.renderers.canvas=function(graph,camera,settings,options){if(typeof options!=="object")throw"sigma.renderers.canvas: Wrong arguments.";if(!(options.container instanceof HTMLElement))throw"Container not found.";var k,i,l,a,fn,self=this;sigma.classes.dispatcher.extend(this);Object.defineProperty(this,"conradId",{value:sigma.utils.id()});this.graph=graph;this.camera=camera;this.contexts={};this.domElements={};this.options=options;this.container=this.options.container;this.settings=typeof options.settings==="object"&&options.settings?settings.embedObjects(options.settings):settings;this.nodesOnScreen=[];this.edgesOnScreen=[];this.jobs={};this.options.prefix="renderer"+this.conradId+":";if(!this.settings("batchEdgesDrawing")){this.initDOM("canvas","scene");this.contexts.edges=this.contexts.scene;this.contexts.nodes=this.contexts.scene;this.contexts.labels=this.contexts.scene}else{this.initDOM("canvas","edges");this.initDOM("canvas","scene");this.contexts.nodes=this.contexts.scene;this.contexts.labels=this.contexts.scene}this.initDOM("canvas","mouse");this.contexts.hover=this.contexts.mouse;this.captors=[];a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch];for(i=0,l=a.length;i<l;i++){fn=typeof a[i]==="function"?a[i]:sigma.captors[a[i]];this.captors.push(new fn(this.domElements.mouse,this.camera,this.settings))}sigma.misc.bindEvents.call(this,this.options.prefix);sigma.misc.drawHovers.call(this,this.options.prefix);this.resize(false)};sigma.renderers.canvas.prototype.render=function(options){options=options||{};var a,i,k,l,o,id,end,job,start,edges,renderers,rendererType,batchSize,tempGCO,index={},graph=this.graph,nodes=this.graph.nodes,prefix=this.options.prefix||"",drawEdges=this.settings(options,"drawEdges"),drawNodes=this.settings(options,"drawNodes"),drawLabels=this.settings(options,"drawLabels"),drawEdgeLabels=this.settings(options,"drawEdgeLabels"),embedSettings=this.settings.embedObjects(options,{prefix:this.options.prefix});this.resize(false);if(this.settings(options,"hideEdgesOnMove"))if(this.camera.isAnimated||this.camera.isMoving)drawEdges=false;this.camera.applyView(undefined,this.options.prefix,{width:this.width,height:this.height});this.clear();for(k in this.jobs)if(conrad.hasJob(k))conrad.killJob(k);this.edgesOnScreen=[];this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height));for(a=this.nodesOnScreen,i=0,l=a.length;i<l;i++)index[a[i].id]=a[i];if(drawEdges){for(a=graph.edges(),i=0,l=a.length;i<l;i++){o=a[i];if((index[o.source]||index[o.target])&&(!o.hidden&&!nodes(o.source).hidden&&!nodes(o.target).hidden))this.edgesOnScreen.push(o)}if(this.settings(options,"batchEdgesDrawing")){id="edges_"+this.conradId;batchSize=embedSettings("canvasEdgesBatchSize");edges=this.edgesOnScreen;l=edges.length;start=0;end=Math.min(edges.length,start+batchSize);job=function(){tempGCO=this.contexts.edges.globalCompositeOperation;this.contexts.edges.globalCompositeOperation="destination-over";renderers=sigma.canvas.edges;for(i=start;i<end;i++){o=edges[i];(renderers[o.type||this.settings(options,"defaultEdgeType")]||renderers.def)(o,graph.nodes(o.source),graph.nodes(o.target),this.contexts.edges,embedSettings)}if(drawEdgeLabels){renderers=sigma.canvas.edges.labels;for(i=start;i<end;i++){o=edges[i];if(!o.hidden)(renderers[o.type||this.settings(options,"defaultEdgeType")]||renderers.def)(o,graph.nodes(o.source),graph.nodes(o.target),this.contexts.labels,embedSettings)}}this.contexts.edges.globalCompositeOperation=tempGCO;if(end===edges.length){delete this.jobs[id];return false}start=end+1;end=Math.min(edges.length,start+batchSize);return true};this.jobs[id]=job;conrad.addJob(id,job.bind(this))}else{renderers=sigma.canvas.edges;for(a=this.edgesOnScreen,i=0,l=a.length;i<l;i++){o=a[i];(renderers[o.type||this.settings(options,"defaultEdgeType")]||renderers.def)(o,graph.nodes(o.source),graph.nodes(o.target),this.contexts.edges,embedSettings)}if(drawEdgeLabels){renderers=sigma.canvas.edges.labels;for(a=this.edgesOnScreen,i=0,l=a.length;i<l;i++)if(!a[i].hidden)(renderers[a[i].type||this.settings(options,"defaultEdgeType")]||renderers.def)(a[i],graph.nodes(a[i].source),graph.nodes(a[i].target),this.contexts.labels,embedSettings)}}}if(drawNodes){renderers=sigma.canvas.nodes;for(a=this.nodesOnScreen,i=0,l=a.length;i<l;i++)if(!a[i].hidden)(renderers[a[i].type||this.settings(options,"defaultNodeType")]||renderers.def)(a[i],this.contexts.nodes,embedSettings)}if(drawLabels){renderers=sigma.canvas.labels;for(a=this.nodesOnScreen,i=0,l=a.length;i<l;i++)if(!a[i].hidden)(renderers[a[i].type||this.settings(options,"defaultNodeType")]||renderers.def)(a[i],this.contexts.labels,embedSettings)}this.dispatchEvent("render");return this};sigma.renderers.canvas.prototype.initDOM=function(tag,id){var dom=document.createElement(tag);dom.style.position="absolute";dom.setAttribute("class","sigma-"+id);this.domElements[id]=dom;this.container.appendChild(dom);if(tag.toLowerCase()==="canvas")this.contexts[id]=dom.getContext("2d")};sigma.renderers.canvas.prototype.resize=function(w,h){var k,oldWidth=this.width,oldHeight=this.height,pixelRatio=sigma.utils.getPixelRatio();if(w!==undefined&&h!==undefined){this.width=w;this.height=h}else{this.width=this.container.offsetWidth;this.height=this.container.offsetHeight;w=this.width;h=this.height}if(oldWidth!==this.width||oldHeight!==this.height){for(k in this.domElements){this.domElements[k].style.width=w+"px";this.domElements[k].style.height=h+"px";if(this.domElements[k].tagName.toLowerCase()==="canvas"){this.domElements[k].setAttribute("width",w*pixelRatio+"px");this.domElements[k].setAttribute("height",h*pixelRatio+"px");if(pixelRatio!==1)this.contexts[k].scale(pixelRatio,pixelRatio)}}}return this};sigma.renderers.canvas.prototype.clear=function(){for(var k in this.contexts){this.contexts[k].clearRect(0,0,this.width,this.height)}return this};sigma.renderers.canvas.prototype.kill=function(){var k,captor;while(captor=this.captors.pop())captor.kill();delete this.captors;for(k in this.domElements){this.domElements[k].parentNode.removeChild(this.domElements[k]);delete this.domElements[k];delete this.contexts[k]}delete this.domElements;delete this.contexts};sigma.utils.pkg("sigma.canvas.nodes");sigma.utils.pkg("sigma.canvas.edges");sigma.utils.pkg("sigma.canvas.labels")}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");sigma.renderers.webgl=function(graph,camera,settings,options){if(typeof options!=="object")throw"sigma.renderers.webgl: Wrong arguments.";if(!(options.container instanceof HTMLElement))throw"Container not found.";var k,i,l,a,fn,_self=this;sigma.classes.dispatcher.extend(this);this.jobs={};Object.defineProperty(this,"conradId",{value:sigma.utils.id()});this.graph=graph;this.camera=camera;this.contexts={};this.domElements={};this.options=options;this.container=this.options.container;this.settings=typeof options.settings==="object"&&options.settings?settings.embedObjects(options.settings):settings;this.options.prefix=this.camera.readPrefix;Object.defineProperty(this,"nodePrograms",{value:{}});Object.defineProperty(this,"edgePrograms",{value:{}});Object.defineProperty(this,"nodeFloatArrays",{value:{}});Object.defineProperty(this,"edgeFloatArrays",{value:{}});Object.defineProperty(this,"edgeIndicesArrays",{value:{}});if(this.settings(options,"batchEdgesDrawing")){this.initDOM("canvas","edges",true);this.initDOM("canvas","nodes",true)}else{this.initDOM("canvas","scene",true);this.contexts.nodes=this.contexts.scene;this.contexts.edges=this.contexts.scene}this.initDOM("canvas","labels");this.initDOM("canvas","mouse");this.contexts.hover=this.contexts.mouse;this.captors=[];a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch];for(i=0,l=a.length;i<l;i++){fn=typeof a[i]==="function"?a[i]:sigma.captors[a[i]];this.captors.push(new fn(this.domElements.mouse,this.camera,this.settings))}sigma.misc.bindEvents.call(this,this.camera.prefix);sigma.misc.drawHovers.call(this,this.camera.prefix);this.resize()};sigma.renderers.webgl.prototype.process=function(){var a,i,l,k,type,renderer,graph=this.graph,options=sigma.utils.extend(options,this.options),defaultEdgeType=this.settings(options,"defaultEdgeType"),defaultNodeType=this.settings(options,"defaultNodeType");for(k in this.nodeFloatArrays)delete this.nodeFloatArrays[k];for(k in this.edgeFloatArrays)delete this.edgeFloatArrays[k];for(k in this.edgeIndicesArrays)delete this.edgeIndicesArrays[k];for(a=graph.edges(),i=0,l=a.length;i<l;i++){type=a[i].type||defaultEdgeType;k=type&&sigma.webgl.edges[type]?type:"def";if(!this.edgeFloatArrays[k])this.edgeFloatArrays[k]={edges:[]};this.edgeFloatArrays[k].edges.push(a[i])}for(a=graph.nodes(),i=0,l=a.length;i<l;i++){type=a[i].type||defaultNodeType;k=type&&sigma.webgl.nodes[type]?type:"def";if(!this.nodeFloatArrays[k])this.nodeFloatArrays[k]={nodes:[]};this.nodeFloatArrays[k].nodes.push(a[i])}for(k in this.edgeFloatArrays){renderer=sigma.webgl.edges[k];a=this.edgeFloatArrays[k].edges;this.edgeFloatArrays[k].array=new Float32Array(a.length*renderer.POINTS*renderer.ATTRIBUTES);for(i=0,l=a.length;i<l;i++){if(!a[i].hidden&&!graph.nodes(a[i].source).hidden&&!graph.nodes(a[i].target).hidden)renderer.addEdge(a[i],graph.nodes(a[i].source),graph.nodes(a[i].target),this.edgeFloatArrays[k].array,i*renderer.POINTS*renderer.ATTRIBUTES,options.prefix,this.settings)}if(typeof renderer.computeIndices==="function")this.edgeIndicesArrays[k]=renderer.computeIndices(this.edgeFloatArrays[k].array)}for(k in this.nodeFloatArrays){renderer=sigma.webgl.nodes[k];a=this.nodeFloatArrays[k].nodes;this.nodeFloatArrays[k].array=new Float32Array(a.length*renderer.POINTS*renderer.ATTRIBUTES);for(i=0,l=a.length;i<l;i++){if(!this.nodeFloatArrays[k].array)this.nodeFloatArrays[k].array=new Float32Array(a.length*renderer.POINTS*renderer.ATTRIBUTES);if(!a[i].hidden)renderer.addNode(a[i],this.nodeFloatArrays[k].array,i*renderer.POINTS*renderer.ATTRIBUTES,options.prefix,this.settings)}}return this};sigma.renderers.webgl.prototype.render=function(params){var a,i,l,k,o,program,renderer,self=this,graph=this.graph,nodesGl=this.contexts.nodes,edgesGl=this.contexts.edges,matrix=this.camera.getMatrix(),options=sigma.utils.extend(params,this.options),drawLabels=this.settings(options,"drawLabels"),drawEdges=this.settings(options,"drawEdges"),drawNodes=this.settings(options,"drawNodes");this.resize(false);if(this.settings(options,"hideEdgesOnMove"))if(this.camera.isAnimated||this.camera.isMoving)drawEdges=false;this.clear();matrix=sigma.utils.matrices.multiply(matrix,sigma.utils.matrices.translation(this.width/2,this.height/2));for(k in this.jobs)if(conrad.hasJob(k))conrad.killJob(k);if(drawEdges){if(this.settings(options,"batchEdgesDrawing"))(function(){var a,k,i,id,job,arr,end,start,indices,renderer,batchSize,currentProgram;id="edges_"+this.conradId;batchSize=this.settings(options,"webglEdgesBatchSize");a=Object.keys(this.edgeFloatArrays);if(!a.length)return;i=0;renderer=sigma.webgl.edges[a[i]];arr=this.edgeFloatArrays[a[i]].array;indices=this.edgeIndicesArrays[a[i]];start=0;end=Math.min(start+batchSize*renderer.POINTS,arr.length/renderer.ATTRIBUTES);job=function(){if(!this.edgePrograms[a[i]])this.edgePrograms[a[i]]=renderer.initProgram(edgesGl);if(start<end){edgesGl.useProgram(this.edgePrograms[a[i]]);renderer.render(edgesGl,this.edgePrograms[a[i]],arr,{settings:this.settings,matrix:matrix,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(options,"webglOversamplingRatio"),start:start,count:end-start,indicesData:indices})}if(end>=arr.length/renderer.ATTRIBUTES&&i===a.length-1){delete this.jobs[id];return false}if(end>=arr.length/renderer.ATTRIBUTES){i++;arr=this.edgeFloatArrays[a[i]].array;renderer=sigma.webgl.edges[a[i]];start=0;end=Math.min(start+batchSize*renderer.POINTS,arr.length/renderer.ATTRIBUTES)}else{start=end;end=Math.min(start+batchSize*renderer.POINTS,arr.length/renderer.ATTRIBUTES)}return true};this.jobs[id]=job;conrad.addJob(id,job.bind(this))}).call(this);else{for(k in this.edgeFloatArrays){renderer=sigma.webgl.edges[k];if(!this.edgePrograms[k])this.edgePrograms[k]=renderer.initProgram(edgesGl);if(this.edgeFloatArrays[k]){edgesGl.useProgram(this.edgePrograms[k]);renderer.render(edgesGl,this.edgePrograms[k],this.edgeFloatArrays[k].array,{settings:this.settings,matrix:matrix,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(options,"webglOversamplingRatio"),indicesData:this.edgeIndicesArrays[k]})}}}}if(drawNodes){nodesGl.blendFunc(nodesGl.SRC_ALPHA,nodesGl.ONE_MINUS_SRC_ALPHA);nodesGl.enable(nodesGl.BLEND);for(k in this.nodeFloatArrays){renderer=sigma.webgl.nodes[k];if(!this.nodePrograms[k])this.nodePrograms[k]=renderer.initProgram(nodesGl);if(this.nodeFloatArrays[k]){nodesGl.useProgram(this.nodePrograms[k]);renderer.render(nodesGl,this.nodePrograms[k],this.nodeFloatArrays[k].array,{settings:this.settings,matrix:matrix,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(options,"webglOversamplingRatio")})}}}if(drawLabels){a=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height));this.camera.applyView(undefined,undefined,{nodes:a,edges:[],width:this.width,height:this.height});o=function(key){return self.settings({prefix:self.camera.prefix},key)};for(i=0,l=a.length;i<l;i++)if(!a[i].hidden)(sigma.canvas.labels[a[i].type||this.settings(options,"defaultNodeType")]||sigma.canvas.labels.def)(a[i],this.contexts.labels,o)}this.dispatchEvent("render");return this};sigma.renderers.webgl.prototype.initDOM=function(tag,id,webgl){var gl,dom=document.createElement(tag),self=this;dom.style.position="absolute";dom.setAttribute("class","sigma-"+id);this.domElements[id]=dom;this.container.appendChild(dom);if(tag.toLowerCase()==="canvas"){this.contexts[id]=dom.getContext(webgl?"experimental-webgl":"2d",{preserveDrawingBuffer:true});if(webgl){dom.addEventListener("webglcontextlost",function(e){e.preventDefault()},false);dom.addEventListener("webglcontextrestored",function(e){self.render()},false)}}};sigma.renderers.webgl.prototype.resize=function(w,h){var k,oldWidth=this.width,oldHeight=this.height,pixelRatio=sigma.utils.getPixelRatio();if(w!==undefined&&h!==undefined){this.width=w;this.height=h}else{this.width=this.container.offsetWidth;this.height=this.container.offsetHeight;w=this.width;h=this.height}if(oldWidth!==this.width||oldHeight!==this.height){for(k in this.domElements){this.domElements[k].style.width=w+"px";this.domElements[k].style.height=h+"px";if(this.domElements[k].tagName.toLowerCase()==="canvas"){if(this.contexts[k]&&this.contexts[k].scale){this.domElements[k].setAttribute("width",w*pixelRatio+"px");this.domElements[k].setAttribute("height",h*pixelRatio+"px");if(pixelRatio!==1)this.contexts[k].scale(pixelRatio,pixelRatio)}else{this.domElements[k].setAttribute("width",w*this.settings("webglOversamplingRatio")+"px");this.domElements[k].setAttribute("height",h*this.settings("webglOversamplingRatio")+"px")}}}}for(k in this.contexts)if(this.contexts[k]&&this.contexts[k].viewport)this.contexts[k].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this};sigma.renderers.webgl.prototype.clear=function(){this.contexts.labels.clearRect(0,0,this.width,this.height);this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT);this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT);return this};sigma.renderers.webgl.prototype.kill=function(){var k,captor;while(captor=this.captors.pop())captor.kill();delete this.captors;for(k in this.domElements){this.domElements[k].parentNode.removeChild(this.domElements[k]);delete this.domElements[k];delete this.contexts[k]}delete this.domElements;delete this.contexts};sigma.utils.pkg("sigma.webgl.nodes");sigma.utils.pkg("sigma.webgl.edges");sigma.utils.pkg("sigma.canvas.labels")}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";if(typeof conrad==="undefined")throw"conrad is not declared";sigma.utils.pkg("sigma.renderers");sigma.renderers.svg=function(graph,camera,settings,options){if(typeof options!=="object")throw"sigma.renderers.svg: Wrong arguments.";if(!(options.container instanceof HTMLElement))throw"Container not found.";var i,l,a,fn,self=this;sigma.classes.dispatcher.extend(this);this.graph=graph;this.camera=camera;this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}};this.measurementCanvas=null;this.options=options;this.container=this.options.container;this.settings=typeof options.settings==="object"&&options.settings?settings.embedObjects(options.settings):settings;this.settings("freeStyle",!!this.options.freeStyle);this.settings("xmlns","http://www.w3.org/2000/svg");this.nodesOnScreen=[];this.edgesOnScreen=[];this.options.prefix="renderer"+sigma.utils.id()+":";this.initDOM("svg");this.captors=[];a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch];for(i=0,l=a.length;i<l;i++){fn=typeof a[i]==="function"?a[i]:sigma.captors[a[i]];this.captors.push(new fn(this.domElements.graph,this.camera,this.settings))}window.addEventListener("resize",function(){self.resize()});sigma.misc.bindDOMEvents.call(this,this.domElements.graph);this.bindHovers(this.options.prefix);this.resize(false)};sigma.renderers.svg.prototype.render=function(options){options=options||{};var a,i,k,e,l,o,source,target,start,edges,renderers,subrenderers,index={},graph=this.graph,nodes=this.graph.nodes,prefix=this.options.prefix||"",drawEdges=this.settings(options,"drawEdges"),drawNodes=this.settings(options,"drawNodes"),drawLabels=this.settings(options,"drawLabels"),embedSettings=this.settings.embedObjects(options,{prefix:this.options.prefix,forceLabels:this.options.forceLabels});if(this.settings(options,"hideEdgesOnMove"))if(this.camera.isAnimated||this.camera.isMoving)drawEdges=false;this.camera.applyView(undefined,this.options.prefix,{width:this.width,height:this.height});this.hideDOMElements(this.domElements.nodes);this.hideDOMElements(this.domElements.edges);this.hideDOMElements(this.domElements.labels);this.edgesOnScreen=[];this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height));for(a=this.nodesOnScreen,i=0,l=a.length;i<l;i++)index[a[i].id]=a[i];for(a=graph.edges(),i=0,l=a.length;i<l;i++){o=a[i];if((index[o.source]||index[o.target])&&(!o.hidden&&!nodes(o.source).hidden&&!nodes(o.target).hidden))this.edgesOnScreen.push(o)}renderers=sigma.svg.nodes;subrenderers=sigma.svg.labels;if(drawNodes)for(a=this.nodesOnScreen,i=0,l=a.length;i<l;i++){if(!a[i].hidden&&!this.domElements.nodes[a[i].id]){e=(renderers[a[i].type]||renderers.def).create(a[i],embedSettings);this.domElements.nodes[a[i].id]=e;this.domElements.groups.nodes.appendChild(e);e=(subrenderers[a[i].type]||subrenderers.def).create(a[i],embedSettings);this.domElements.labels[a[i].id]=e;this.domElements.groups.labels.appendChild(e)}}if(drawNodes)for(a=this.nodesOnScreen,i=0,l=a.length;i<l;i++){if(a[i].hidden)continue;(renderers[a[i].type]||renderers.def).update(a[i],this.domElements.nodes[a[i].id],embedSettings);(subrenderers[a[i].type]||subrenderers.def).update(a[i],this.domElements.labels[a[i].id],embedSettings)}renderers=sigma.svg.edges;if(drawEdges)for(a=this.edgesOnScreen,i=0,l=a.length;i<l;i++){if(!this.domElements.edges[a[i].id]){source=nodes(a[i].source);target=nodes(a[i].target);e=(renderers[a[i].type]||renderers.def).create(a[i],source,target,embedSettings);this.domElements.edges[a[i].id]=e;this.domElements.groups.edges.appendChild(e)}}if(drawEdges)for(a=this.edgesOnScreen,i=0,l=a.length;i<l;i++){source=nodes(a[i].source);target=nodes(a[i].target);(renderers[a[i].type]||renderers.def).update(a[i],this.domElements.edges[a[i].id],source,target,embedSettings)}this.dispatchEvent("render");return this};sigma.renderers.svg.prototype.initDOM=function(tag){var dom=document.createElementNS(this.settings("xmlns"),tag),c=this.settings("classPrefix"),g,l,i;dom.style.position="absolute";dom.setAttribute("class",c+"-svg");dom.setAttribute("xmlns",this.settings("xmlns"));dom.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");dom.setAttribute("version","1.1");var canvas=document.createElement("canvas");canvas.setAttribute("class",c+"-measurement-canvas");this.domElements.graph=this.container.appendChild(dom);var groups=["edges","nodes","labels","hovers"];for(i=0,l=groups.length;i<l;i++){g=document.createElementNS(this.settings("xmlns"),"g");g.setAttributeNS(null,"id",c+"-group-"+groups[i]);g.setAttributeNS(null,"class",c+"-group");this.domElements.groups[groups[i]]=this.domElements.graph.appendChild(g)}this.container.appendChild(canvas);this.measurementCanvas=canvas.getContext("2d")};sigma.renderers.svg.prototype.hideDOMElements=function(elements){var o,i;for(i in elements){o=elements[i];sigma.svg.utils.hide(o)}return this};sigma.renderers.svg.prototype.bindHovers=function(prefix){var renderers=sigma.svg.hovers,self=this,hoveredNode;function overNode(e){var node=e.data.node,embedSettings=self.settings.embedObjects({prefix:prefix});if(!embedSettings("enableHovering"))return;var hover=(renderers[node.type]||renderers.def).create(node,self.domElements.nodes[node.id],self.measurementCanvas,embedSettings);self.domElements.hovers[node.id]=hover;self.domElements.groups.hovers.appendChild(hover);hoveredNode=node}function outNode(e){var node=e.data.node,embedSettings=self.settings.embedObjects({prefix:prefix});if(!embedSettings("enableHovering"))return;self.domElements.groups.hovers.removeChild(self.domElements.hovers[node.id]);hoveredNode=null;delete self.domElements.hovers[node.id];self.domElements.groups.nodes.appendChild(self.domElements.nodes[node.id])}function update(){if(!hoveredNode)return;var embedSettings=self.settings.embedObjects({prefix:prefix});self.domElements.groups.hovers.removeChild(self.domElements.hovers[hoveredNode.id]);delete self.domElements.hovers[hoveredNode.id];var hover=(renderers[hoveredNode.type]||renderers.def).create(hoveredNode,self.domElements.nodes[hoveredNode.id],self.measurementCanvas,embedSettings);self.domElements.hovers[hoveredNode.id]=hover;self.domElements.groups.hovers.appendChild(hover)}this.bind("overNode",overNode);this.bind("outNode",outNode);this.bind("render",update)};sigma.renderers.svg.prototype.resize=function(w,h){var oldWidth=this.width,oldHeight=this.height,pixelRatio=1;if(w!==undefined&&h!==undefined){this.width=w;this.height=h}else{this.width=this.container.offsetWidth;this.height=this.container.offsetHeight;w=this.width;h=this.height}if(oldWidth!==this.width||oldHeight!==this.height){this.domElements.graph.style.width=w+"px";this.domElements.graph.style.height=h+"px";if(this.domElements.graph.tagName.toLowerCase()==="svg"){this.domElements.graph.setAttribute("width",w*pixelRatio);this.domElements.graph.setAttribute("height",h*pixelRatio)}}return this};sigma.utils.pkg("sigma.svg.nodes");sigma.utils.pkg("sigma.svg.edges");sigma.utils.pkg("sigma.svg.labels")}).call(this);(function(global){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var canvas,webgl=!!global.WebGLRenderingContext;if(webgl){canvas=document.createElement("canvas");try{webgl=!!(canvas.getContext("webgl")||canvas.getContext("experimental-webgl"))}catch(e){webgl=false}}sigma.renderers.def=webgl?sigma.renderers.webgl:sigma.renderers.canvas})(this);(function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes");sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(node,data,i,prefix,settings){var color=sigma.utils.floatColor(node.color||settings("defaultNodeColor"));data[i++]=node[prefix+"x"];data[i++]=node[prefix+"y"];data[i++]=node[prefix+"size"];data[i++]=color;data[i++]=0;data[i++]=node[prefix+"x"];data[i++]=node[prefix+"y"];data[i++]=node[prefix+"size"];data[i++]=color;data[i++]=2*Math.PI/3;data[i++]=node[prefix+"x"];data[i++]=node[prefix+"y"];data[i++]=node[prefix+"size"];data[i++]=color;data[i++]=4*Math.PI/3},render:function(gl,program,data,params){var buffer;var positionLocation=gl.getAttribLocation(program,"a_position"),sizeLocation=gl.getAttribLocation(program,"a_size"),colorLocation=gl.getAttribLocation(program,"a_color"),angleLocation=gl.getAttribLocation(program,"a_angle"),resolutionLocation=gl.getUniformLocation(program,"u_resolution"),matrixLocation=gl.getUniformLocation(program,"u_matrix"),ratioLocation=gl.getUniformLocation(program,"u_ratio"),scaleLocation=gl.getUniformLocation(program,"u_scale");buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buffer);gl.bufferData(gl.ARRAY_BUFFER,data,gl.DYNAMIC_DRAW);gl.uniform2f(resolutionLocation,params.width,params.height);gl.uniform1f(ratioLocation,1/Math.pow(params.ratio,params.settings("nodesPowRatio")));gl.uniform1f(scaleLocation,params.scalingRatio);gl.uniformMatrix3fv(matrixLocation,false,params.matrix);gl.enableVertexAttribArray(positionLocation);gl.enableVertexAttribArray(sizeLocation);gl.enableVertexAttribArray(colorLocation);gl.enableVertexAttribArray(angleLocation);gl.vertexAttribPointer(positionLocation,2,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);gl.vertexAttribPointer(sizeLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);gl.vertexAttribPointer(colorLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12);gl.vertexAttribPointer(angleLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16);gl.drawArrays(gl.TRIANGLES,params.start||0,params.count||data.length/this.ATTRIBUTES)},initProgram:function(gl){var vertexShader,fragmentShader,program;vertexShader=sigma.utils.loadShader(gl,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),gl.VERTEX_SHADER);fragmentShader=sigma.utils.loadShader(gl,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),gl.FRAGMENT_SHADER);program=sigma.utils.loadProgram(gl,[vertexShader,fragmentShader]);return program}}})();(function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes");sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(node,data,i,prefix,settings){data[i++]=node[prefix+"x"];data[i++]=node[prefix+"y"];data[i++]=node[prefix+"size"];data[i++]=sigma.utils.floatColor(node.color||settings("defaultNodeColor"))},render:function(gl,program,data,params){var buffer;var positionLocation=gl.getAttribLocation(program,"a_position"),sizeLocation=gl.getAttribLocation(program,"a_size"),colorLocation=gl.getAttribLocation(program,"a_color"),resolutionLocation=gl.getUniformLocation(program,"u_resolution"),matrixLocation=gl.getUniformLocation(program,"u_matrix"),ratioLocation=gl.getUniformLocation(program,"u_ratio"),scaleLocation=gl.getUniformLocation(program,"u_scale");buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buffer);gl.bufferData(gl.ARRAY_BUFFER,data,gl.DYNAMIC_DRAW);gl.uniform2f(resolutionLocation,params.width,params.height);gl.uniform1f(ratioLocation,1/Math.pow(params.ratio,params.settings("nodesPowRatio")));gl.uniform1f(scaleLocation,params.scalingRatio);gl.uniformMatrix3fv(matrixLocation,false,params.matrix);gl.enableVertexAttribArray(positionLocation);gl.enableVertexAttribArray(sizeLocation);gl.enableVertexAttribArray(colorLocation);gl.vertexAttribPointer(positionLocation,2,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);gl.vertexAttribPointer(sizeLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);gl.vertexAttribPointer(colorLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12);gl.drawArrays(gl.POINTS,params.start||0,params.count||data.length/this.ATTRIBUTES)},initProgram:function(gl){var vertexShader,fragmentShader,program;vertexShader=sigma.utils.loadShader(gl,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),gl.VERTEX_SHADER);fragmentShader=sigma.utils.loadShader(gl,["precision mediump float;","varying vec4 color;","void main(void) {","float border = 0.01;","float radius = 0.5;","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_PointCoord - vec2(0.5, 0.5);","float dist = radius - sqrt(m.x * m.x + m.y * m.y);","float t = 0.0;","if (dist > border)","t = 1.0;","else if (dist > 0.0)","t = dist / border;","gl_FragColor = mix(color0, color, t);","}"].join("\n"),gl.FRAGMENT_SHADER);program=sigma.utils.loadProgram(gl,[vertexShader,fragmentShader]);return program}}})();(function(){"use strict";sigma.utils.pkg("sigma.webgl.edges");sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(edge,source,target,data,i,prefix,settings){var w=(edge[prefix+"size"]||1)/2,x1=source[prefix+"x"],y1=source[prefix+"y"],x2=target[prefix+"x"],y2=target[prefix+"y"],color=edge.color;if(!color)switch(settings("edgeColor")){case"source":color=source.color||settings("defaultNodeColor");break;case"target":color=target.color||settings("defaultNodeColor");break;default:color=settings("defaultEdgeColor");break}color=sigma.utils.floatColor(color);data[i++]=x1;data[i++]=y1;data[i++]=x2;data[i++]=y2;data[i++]=w;data[i++]=0;data[i++]=color;data[i++]=x2;data[i++]=y2;data[i++]=x1;data[i++]=y1;data[i++]=w;data[i++]=1;data[i++]=color;data[i++]=x2;data[i++]=y2;data[i++]=x1;data[i++]=y1;data[i++]=w;data[i++]=0;data[i++]=color;data[i++]=x2;data[i++]=y2;data[i++]=x1;data[i++]=y1;data[i++]=w;data[i++]=0;data[i++]=color;data[i++]=x1;data[i++]=y1;data[i++]=x2;data[i++]=y2;data[i++]=w;data[i++]=1;data[i++]=color;data[i++]=x1;data[i++]=y1;data[i++]=x2;data[i++]=y2;data[i++]=w;data[i++]=0;data[i++]=color},render:function(gl,program,data,params){var buffer;var colorLocation=gl.getAttribLocation(program,"a_color"),positionLocation1=gl.getAttribLocation(program,"a_position1"),positionLocation2=gl.getAttribLocation(program,"a_position2"),thicknessLocation=gl.getAttribLocation(program,"a_thickness"),minusLocation=gl.getAttribLocation(program,"a_minus"),resolutionLocation=gl.getUniformLocation(program,"u_resolution"),matrixLocation=gl.getUniformLocation(program,"u_matrix"),matrixHalfPiLocation=gl.getUniformLocation(program,"u_matrixHalfPi"),matrixHalfPiMinusLocation=gl.getUniformLocation(program,"u_matrixHalfPiMinus"),ratioLocation=gl.getUniformLocation(program,"u_ratio"),scaleLocation=gl.getUniformLocation(program,"u_scale");buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buffer);gl.bufferData(gl.ARRAY_BUFFER,data,gl.STATIC_DRAW);gl.uniform2f(resolutionLocation,params.width,params.height);gl.uniform1f(ratioLocation,params.ratio/Math.pow(params.ratio,params.settings("edgesPowRatio")));gl.uniform1f(scaleLocation,params.scalingRatio);gl.uniformMatrix3fv(matrixLocation,false,params.matrix);gl.uniformMatrix2fv(matrixHalfPiLocation,false,sigma.utils.matrices.rotation(Math.PI/2,true));gl.uniformMatrix2fv(matrixHalfPiMinusLocation,false,sigma.utils.matrices.rotation(-Math.PI/2,true));gl.enableVertexAttribArray(colorLocation);gl.enableVertexAttribArray(positionLocation1);gl.enableVertexAttribArray(positionLocation2);gl.enableVertexAttribArray(thicknessLocation);gl.enableVertexAttribArray(minusLocation);gl.vertexAttribPointer(positionLocation1,2,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);gl.vertexAttribPointer(positionLocation2,2,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);gl.vertexAttribPointer(thicknessLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16);gl.vertexAttribPointer(minusLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20);gl.vertexAttribPointer(colorLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24);gl.drawArrays(gl.TRIANGLES,params.start||0,params.count||data.length/this.ATTRIBUTES)},initProgram:function(gl){var vertexShader,fragmentShader,program;vertexShader=sigma.utils.loadShader(gl,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),gl.VERTEX_SHADER);fragmentShader=sigma.utils.loadShader(gl,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),gl.FRAGMENT_SHADER);program=sigma.utils.loadProgram(gl,[vertexShader,fragmentShader]);return program}}})();(function(){"use strict";sigma.utils.pkg("sigma.webgl.edges");sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(edge,source,target,data,i,prefix,settings){var w=(edge[prefix+"size"]||1)/2,x1=source[prefix+"x"],y1=source[prefix+"y"],x2=target[prefix+"x"],y2=target[prefix+"y"],color=edge.color;if(!color)switch(settings("edgeColor")){case"source":color=source.color||settings("defaultNodeColor");break;case"target":color=target.color||settings("defaultNodeColor");break;default:color=settings("defaultEdgeColor");break}color=sigma.utils.floatColor(color);data[i++]=x1;data[i++]=y1;data[i++]=color;data[i++]=x2;data[i++]=y2;data[i++]=color},render:function(gl,program,data,params){var buffer;var colorLocation=gl.getAttribLocation(program,"a_color"),positionLocation=gl.getAttribLocation(program,"a_position"),resolutionLocation=gl.getUniformLocation(program,"u_resolution"),matrixLocation=gl.getUniformLocation(program,"u_matrix");buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buffer);gl.bufferData(gl.ARRAY_BUFFER,data,gl.DYNAMIC_DRAW);gl.uniform2f(resolutionLocation,params.width,params.height);gl.uniformMatrix3fv(matrixLocation,false,params.matrix);gl.enableVertexAttribArray(positionLocation);gl.enableVertexAttribArray(colorLocation);gl.vertexAttribPointer(positionLocation,2,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);gl.vertexAttribPointer(colorLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);gl.lineWidth(3);gl.drawArrays(gl.LINES,params.start||0,params.count||data.length/this.ATTRIBUTES)},initProgram:function(gl){var vertexShader,fragmentShader,program;vertexShader=sigma.utils.loadShader(gl,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),gl.VERTEX_SHADER);fragmentShader=sigma.utils.loadShader(gl,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),gl.FRAGMENT_SHADER);program=sigma.utils.loadProgram(gl,[vertexShader,fragmentShader]);return program}}})();(function(){"use strict";sigma.utils.pkg("sigma.webgl.edges");sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(edge,source,target,data,i,prefix,settings){var w=(edge[prefix+"size"]||1)/2,x1=source[prefix+"x"],y1=source[prefix+"y"],x2=target[prefix+"x"],y2=target[prefix+"y"],targetSize=target[prefix+"size"],color=edge.color;if(!color)switch(settings("edgeColor")){case"source":color=source.color||settings("defaultNodeColor");break;case"target":color=target.color||settings("defaultNodeColor");break;default:color=settings("defaultEdgeColor");break}color=sigma.utils.floatColor(color);data[i++]=x1;data[i++]=y1;data[i++]=x2;data[i++]=y2;data[i++]=w;data[i++]=targetSize;data[i++]=0;data[i++]=0;data[i++]=0;data[i++]=0;data[i++]=color;data[i++]=x2;data[i++]=y2;data[i++]=x1;data[i++]=y1;data[i++]=w;data[i++]=targetSize;data[i++]=1;data[i++]=1;data[i++]=0;data[i++]=0;data[i++]=color;data[i++]=x2;data[i++]=y2;data[i++]=x1;data[i++]=y1;data[i++]=w;data[i++]=targetSize;data[i++]=1;data[i++]=0;data[i++]=0;data[i++]=0;data[i++]=color;data[i++]=x2;data[i++]=y2;data[i++]=x1;data[i++]=y1;data[i++]=w;data[i++]=targetSize;data[i++]=1;data[i++]=0;data[i++]=0;data[i++]=0;data[i++]=color;data[i++]=x1;data[i++]=y1;data[i++]=x2;data[i++]=y2;data[i++]=w;data[i++]=targetSize;data[i++]=0;data[i++]=1;data[i++]=0;data[i++]=0;data[i++]=color;data[i++]=x1;data[i++]=y1;data[i++]=x2;data[i++]=y2;data[i++]=w;data[i++]=targetSize;data[i++]=0;data[i++]=0;data[i++]=0;data[i++]=0;data[i++]=color;data[i++]=x2;data[i++]=y2;data[i++]=x1;data[i++]=y1;data[i++]=w;data[i++]=targetSize;data[i++]=1;data[i++]=0;data[i++]=1;data[i++]=-1;data[i++]=color;data[i++]=x2;data[i++]=y2;data[i++]=x1;data[i++]=y1;data[i++]=w;data[i++]=targetSize;data[i++]=1;data[i++]=0;data[i++]=1;data[i++]=0;data[i++]=color;data[i++]=x2;data[i++]=y2;data[i++]=x1;data[i++]=y1;data[i++]=w;data[i++]=targetSize;data[i++]=1;data[i++]=0;data[i++]=1;data[i++]=1;data[i++]=color},render:function(gl,program,data,params){var buffer;var positionLocation1=gl.getAttribLocation(program,"a_pos1"),positionLocation2=gl.getAttribLocation(program,"a_pos2"),thicknessLocation=gl.getAttribLocation(program,"a_thickness"),targetSizeLocation=gl.getAttribLocation(program,"a_tSize"),delayLocation=gl.getAttribLocation(program,"a_delay"),minusLocation=gl.getAttribLocation(program,"a_minus"),headLocation=gl.getAttribLocation(program,"a_head"),headPositionLocation=gl.getAttribLocation(program,"a_headPosition"),colorLocation=gl.getAttribLocation(program,"a_color"),resolutionLocation=gl.getUniformLocation(program,"u_resolution"),matrixLocation=gl.getUniformLocation(program,"u_matrix"),matrixHalfPiLocation=gl.getUniformLocation(program,"u_matrixHalfPi"),matrixHalfPiMinusLocation=gl.getUniformLocation(program,"u_matrixHalfPiMinus"),ratioLocation=gl.getUniformLocation(program,"u_ratio"),nodeRatioLocation=gl.getUniformLocation(program,"u_nodeRatio"),arrowHeadLocation=gl.getUniformLocation(program,"u_arrowHead"),scaleLocation=gl.getUniformLocation(program,"u_scale");buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buffer);gl.bufferData(gl.ARRAY_BUFFER,data,gl.STATIC_DRAW);gl.uniform2f(resolutionLocation,params.width,params.height);gl.uniform1f(ratioLocation,params.ratio/Math.pow(params.ratio,params.settings("edgesPowRatio")));gl.uniform1f(nodeRatioLocation,Math.pow(params.ratio,params.settings("nodesPowRatio"))/params.ratio);gl.uniform1f(arrowHeadLocation,5);gl.uniform1f(scaleLocation,params.scalingRatio);gl.uniformMatrix3fv(matrixLocation,false,params.matrix);gl.uniformMatrix2fv(matrixHalfPiLocation,false,sigma.utils.matrices.rotation(Math.PI/2,true));gl.uniformMatrix2fv(matrixHalfPiMinusLocation,false,sigma.utils.matrices.rotation(-Math.PI/2,true));gl.enableVertexAttribArray(positionLocation1);gl.enableVertexAttribArray(positionLocation2);gl.enableVertexAttribArray(thicknessLocation);gl.enableVertexAttribArray(targetSizeLocation);gl.enableVertexAttribArray(delayLocation);gl.enableVertexAttribArray(minusLocation);gl.enableVertexAttribArray(headLocation);gl.enableVertexAttribArray(headPositionLocation);gl.enableVertexAttribArray(colorLocation);gl.vertexAttribPointer(positionLocation1,2,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);gl.vertexAttribPointer(positionLocation2,2,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);gl.vertexAttribPointer(thicknessLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16);gl.vertexAttribPointer(targetSizeLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20);gl.vertexAttribPointer(delayLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24);gl.vertexAttribPointer(minusLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28);gl.vertexAttribPointer(headLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32);gl.vertexAttribPointer(headPositionLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36);gl.vertexAttribPointer(colorLocation,1,gl.FLOAT,false,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40);gl.drawArrays(gl.TRIANGLES,params.start||0,params.count||data.length/this.ATTRIBUTES)},initProgram:function(gl){var vertexShader,fragmentShader,program;vertexShader=sigma.utils.loadShader(gl,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),gl.VERTEX_SHADER);fragmentShader=sigma.utils.loadShader(gl,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),gl.FRAGMENT_SHADER);program=sigma.utils.loadProgram(gl,[vertexShader,fragmentShader]);return program}}})();(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels");sigma.canvas.labels.def=function(node,context,settings){var fontSize,prefix=settings("prefix")||"",size=node[prefix+"size"];if(size<settings("labelThreshold"))return;if(!node.label||typeof node.label!=="string")return;fontSize=settings("labelSize")==="fixed"?settings("defaultLabelSize"):settings("labelSizeRatio")*size;context.font=(settings("fontStyle")?settings("fontStyle")+" ":"")+fontSize+"px "+settings("font");context.fillStyle=settings("labelColor")==="node"?node.color||settings("defaultNodeColor"):settings("defaultLabelColor");context.fillText(node.label,Math.round(node[prefix+"x"]+size+3),Math.round(node[prefix+"y"]+fontSize/3))}}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers");sigma.canvas.hovers.def=function(node,context,settings){var x,y,w,h,e,fontStyle=settings("hoverFontStyle")||settings("fontStyle"),prefix=settings("prefix")||"",size=node[prefix+"size"],fontSize=settings("labelSize")==="fixed"?settings("defaultLabelSize"):settings("labelSizeRatio")*size;context.font=(fontStyle?fontStyle+" ":"")+fontSize+"px "+(settings("hoverFont")||settings("font"));context.beginPath();context.fillStyle=settings("labelHoverBGColor")==="node"?node.color||settings("defaultNodeColor"):settings("defaultHoverLabelBGColor");if(node.label&&settings("labelHoverShadow")){context.shadowOffsetX=0;context.shadowOffsetY=0;context.shadowBlur=8;context.shadowColor=settings("labelHoverShadowColor")}if(node.label&&typeof node.label==="string"){x=Math.round(node[prefix+"x"]-fontSize/2-2);y=Math.round(node[prefix+"y"]-fontSize/2-2);w=Math.round(context.measureText(node.label).width+fontSize/2+size+7);h=Math.round(fontSize+4);e=Math.round(fontSize/2+2);context.moveTo(x,y+e);context.arcTo(x,y,x+e,y,e);context.lineTo(x+w,y);context.lineTo(x+w,y+h);context.lineTo(x+e,y+h);context.arcTo(x,y+h,x,y+h-e,e);context.lineTo(x,y+e);context.closePath();context.fill();context.shadowOffsetX=0;context.shadowOffsetY=0;context.shadowBlur=0}if(settings("borderSize")>0){context.beginPath();context.fillStyle=settings("nodeBorderColor")==="node"?node.color||settings("defaultNodeColor"):settings("defaultNodeBorderColor");context.arc(node[prefix+"x"],node[prefix+"y"],size+settings("borderSize"),0,Math.PI*2,true);context.closePath();context.fill()}var nodeRenderer=sigma.canvas.nodes[node.type]||sigma.canvas.nodes.def;nodeRenderer(node,context,settings);if(node.label&&typeof node.label==="string"){context.fillStyle=settings("labelHoverColor")==="node"?node.color||settings("defaultNodeColor"):settings("defaultLabelHoverColor");context.fillText(node.label,Math.round(node[prefix+"x"]+size+3),Math.round(node[prefix+"y"]+fontSize/3))}}}).call(this);(function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");sigma.canvas.nodes.def=function(node,context,settings){var prefix=settings("prefix")||"";context.fillStyle=node.color||settings("defaultNodeColor");context.beginPath();context.arc(node[prefix+"x"],node[prefix+"y"],node[prefix+"size"],0,Math.PI*2,true);context.closePath();context.fill()}})();(function(){"use strict";sigma.utils.pkg("sigma.canvas.edges");sigma.canvas.edges.def=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",size=edge[prefix+"size"]||1,edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor");if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor;break}context.strokeStyle=color;context.lineWidth=size;context.beginPath();context.moveTo(source[prefix+"x"],source[prefix+"y"]);context.lineTo(target[prefix+"x"],target[prefix+"y"]);context.stroke()}})();(function(){"use strict";sigma.utils.pkg("sigma.canvas.edges");sigma.canvas.edges.arrow=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor"),size=edge[prefix+"size"]||1,tSize=target[prefix+"size"],sX=source[prefix+"x"],sY=source[prefix+"y"],tX=target[prefix+"x"],tY=target[prefix+"y"],aSize=Math.max(size*2.5,settings("minArrowSize")),d=Math.sqrt(Math.pow(tX-sX,2)+Math.pow(tY-sY,2)),aX=sX+(tX-sX)*(d-aSize-tSize)/d,aY=sY+(tY-sY)*(d-aSize-tSize)/d,vX=(tX-sX)*aSize/d,vY=(tY-sY)*aSize/d;if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor;break}context.strokeStyle=color;context.lineWidth=size;context.beginPath();context.moveTo(sX,sY);context.lineTo(aX,aY);context.stroke();context.fillStyle=color;context.beginPath();context.moveTo(aX+vX,aY+vY);context.lineTo(aX+vY*.6,aY-vX*.6);context.lineTo(aX-vY*.6,aY+vX*.6);context.lineTo(aX+vX,aY+vY);context.closePath();context.fill()}})();(function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers");sigma.canvas.edgehovers.def=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",size=edge[prefix+"size"]||1,edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor");if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor;break}if(settings("edgeHoverColor")==="edge"){color=edge.hover_color||color}else{color=edge.hover_color||settings("defaultEdgeHoverColor")||color}size*=settings("edgeHoverSizeRatio");context.strokeStyle=color;context.lineWidth=size;context.beginPath();context.moveTo(source[prefix+"x"],source[prefix+"y"]);context.lineTo(target[prefix+"x"],target[prefix+"y"]);context.stroke()}})();(function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers");sigma.canvas.edgehovers.curve=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",size=settings("edgeHoverSizeRatio")*(edge[prefix+"size"]||1),edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor"),cp={},sSize=source[prefix+"size"],sX=source[prefix+"x"],sY=source[prefix+"y"],tX=target[prefix+"x"],tY=target[prefix+"y"];cp=source.id===target.id?sigma.utils.getSelfLoopControlPoints(sX,sY,sSize):sigma.utils.getQuadraticControlPoint(sX,sY,tX,tY);if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor;break}if(settings("edgeHoverColor")==="edge"){color=edge.hover_color||color}else{color=edge.hover_color||settings("defaultEdgeHoverColor")||color}context.strokeStyle=color;context.lineWidth=size;context.beginPath();context.moveTo(sX,sY);if(source.id===target.id){context.bezierCurveTo(cp.x1,cp.y1,cp.x2,cp.y2,tX,tY)}else{context.quadraticCurveTo(cp.x,cp.y,tX,tY)}context.stroke()}})();(function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers");sigma.canvas.edgehovers.arrow=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor"),size=edge[prefix+"size"]||1,tSize=target[prefix+"size"],sX=source[prefix+"x"],sY=source[prefix+"y"],tX=target[prefix+"x"],tY=target[prefix+"y"];size=edge.hover?settings("edgeHoverSizeRatio")*size:size;var aSize=size*2.5,d=Math.sqrt(Math.pow(tX-sX,2)+Math.pow(tY-sY,2)),aX=sX+(tX-sX)*(d-aSize-tSize)/d,aY=sY+(tY-sY)*(d-aSize-tSize)/d,vX=(tX-sX)*aSize/d,vY=(tY-sY)*aSize/d;if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor;break}if(settings("edgeHoverColor")==="edge"){color=edge.hover_color||color}else{color=edge.hover_color||settings("defaultEdgeHoverColor")||color}context.strokeStyle=color;context.lineWidth=size;context.beginPath();context.moveTo(sX,sY);context.lineTo(aX,aY);context.stroke();context.fillStyle=color;context.beginPath();context.moveTo(aX+vX,aY+vY);context.lineTo(aX+vY*.6,aY-vX*.6);context.lineTo(aX-vY*.6,aY+vX*.6);context.lineTo(aX+vX,aY+vY);context.closePath();context.fill()}})();(function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers");sigma.canvas.edgehovers.curvedArrow=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor"),cp={},size=settings("edgeHoverSizeRatio")*(edge[prefix+"size"]||1),tSize=target[prefix+"size"],sX=source[prefix+"x"],sY=source[prefix+"y"],tX=target[prefix+"x"],tY=target[prefix+"y"],d,aSize,aX,aY,vX,vY;cp=source.id===target.id?sigma.utils.getSelfLoopControlPoints(sX,sY,tSize):sigma.utils.getQuadraticControlPoint(sX,sY,tX,tY);if(source.id===target.id){d=Math.sqrt(Math.pow(tX-cp.x1,2)+Math.pow(tY-cp.y1,2));aSize=size*2.5;aX=cp.x1+(tX-cp.x1)*(d-aSize-tSize)/d;aY=cp.y1+(tY-cp.y1)*(d-aSize-tSize)/d;vX=(tX-cp.x1)*aSize/d;vY=(tY-cp.y1)*aSize/d}else{d=Math.sqrt(Math.pow(tX-cp.x,2)+Math.pow(tY-cp.y,2));aSize=size*2.5;aX=cp.x+(tX-cp.x)*(d-aSize-tSize)/d;aY=cp.y+(tY-cp.y)*(d-aSize-tSize)/d;vX=(tX-cp.x)*aSize/d;vY=(tY-cp.y)*aSize/d}if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor;break}if(settings("edgeHoverColor")==="edge"){color=edge.hover_color||color}else{color=edge.hover_color||settings("defaultEdgeHoverColor")||color}context.strokeStyle=color;context.lineWidth=size;context.beginPath();context.moveTo(sX,sY);if(source.id===target.id){context.bezierCurveTo(cp.x2,cp.y2,cp.x1,cp.y1,aX,aY)}else{context.quadraticCurveTo(cp.x,cp.y,aX,aY)}context.stroke();context.fillStyle=color;context.beginPath();context.moveTo(aX+vX,aY+vY);context.lineTo(aX+vY*.6,aY-vX*.6);context.lineTo(aX-vY*.6,aY+vX*.6);context.lineTo(aX+vX,aY+vY);context.closePath();context.fill()}})();(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities");sigma.canvas.extremities.def=function(edge,source,target,context,settings){(sigma.canvas.hovers[source.type]||sigma.canvas.hovers.def)(source,context,settings);(sigma.canvas.hovers[target.type]||sigma.canvas.hovers.def)(target,context,settings)}}).call(this);(function(){"use strict";sigma.utils.pkg("sigma.svg.utils");sigma.svg.utils={show:function(element){element.style.display="";return this},hide:function(element){element.style.display="none";return this}}})();(function(){"use strict";sigma.utils.pkg("sigma.svg.nodes");sigma.svg.nodes.def={create:function(node,settings){var prefix=settings("prefix")||"",circle=document.createElementNS(settings("xmlns"),"circle");circle.setAttributeNS(null,"data-node-id",node.id);circle.setAttributeNS(null,"class",settings("classPrefix")+"-node");circle.setAttributeNS(null,"fill",node.color||settings("defaultNodeColor"));return circle},update:function(node,circle,settings){var prefix=settings("prefix")||"";circle.setAttributeNS(null,"cx",node[prefix+"x"]);circle.setAttributeNS(null,"cy",node[prefix+"y"]);circle.setAttributeNS(null,"r",node[prefix+"size"]);if(!settings("freeStyle"))circle.setAttributeNS(null,"fill",node.color||settings("defaultNodeColor"));circle.style.display="";return this}}})();(function(){"use strict";sigma.utils.pkg("sigma.svg.edges");sigma.svg.edges.def={create:function(edge,source,target,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor");if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor;break}var line=document.createElementNS(settings("xmlns"),"line");line.setAttributeNS(null,"data-edge-id",edge.id);line.setAttributeNS(null,"class",settings("classPrefix")+"-edge");line.setAttributeNS(null,"stroke",color);return line},update:function(edge,line,source,target,settings){var prefix=settings("prefix")||"";line.setAttributeNS(null,"stroke-width",edge[prefix+"size"]||1);line.setAttributeNS(null,"x1",source[prefix+"x"]);line.setAttributeNS(null,"y1",source[prefix+"y"]);line.setAttributeNS(null,"x2",target[prefix+"x"]);line.setAttributeNS(null,"y2",target[prefix+"y"]);line.style.display="";return this}}})();(function(){"use strict";sigma.utils.pkg("sigma.svg.edges");sigma.svg.edges.curve={create:function(edge,source,target,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor");if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor;break}var path=document.createElementNS(settings("xmlns"),"path");path.setAttributeNS(null,"data-edge-id",edge.id);path.setAttributeNS(null,"class",settings("classPrefix")+"-edge");path.setAttributeNS(null,"stroke",color);return path},update:function(edge,path,source,target,settings){var prefix=settings("prefix")||"";path.setAttributeNS(null,"stroke-width",edge[prefix+"size"]||1);var cx=(source[prefix+"x"]+target[prefix+"x"])/2+(target[prefix+"y"]-source[prefix+"y"])/4,cy=(source[prefix+"y"]+target[prefix+"y"])/2+(source[prefix+"x"]-target[prefix+"x"])/4;var p="M"+source[prefix+"x"]+","+source[prefix+"y"]+" "+"Q"+cx+","+cy+" "+target[prefix+"x"]+","+target[prefix+"y"];path.setAttributeNS(null,"d",p);path.setAttributeNS(null,"fill","none");path.style.display="";return this}}})();(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels");sigma.svg.labels.def={create:function(node,settings){var prefix=settings("prefix")||"",size=node[prefix+"size"],text=document.createElementNS(settings("xmlns"),"text");var fontSize=settings("labelSize")==="fixed"?settings("defaultLabelSize"):settings("labelSizeRatio")*size;var fontColor=settings("labelColor")==="node"?node.color||settings("defaultNodeColor"):settings("defaultLabelColor");text.setAttributeNS(null,"data-label-target",node.id);text.setAttributeNS(null,"class",settings("classPrefix")+"-label");text.setAttributeNS(null,"font-size",fontSize);text.setAttributeNS(null,"font-family",settings("font"));text.setAttributeNS(null,"fill",fontColor);text.innerHTML=node.label;text.textContent=node.label;return text},update:function(node,text,settings){var prefix=settings("prefix")||"",size=node[prefix+"size"];var fontSize=settings("labelSize")==="fixed"?settings("defaultLabelSize"):settings("labelSizeRatio")*size;if(!settings("forceLabels")&&size<settings("labelThreshold"))return;if(typeof node.label!=="string")return;text.setAttributeNS(null,"x",Math.round(node[prefix+"x"]+size+3));text.setAttributeNS(null,"y",Math.round(node[prefix+"y"]+fontSize/3));text.style.display="";return this}}}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers");sigma.svg.hovers.def={create:function(node,nodeCircle,measurementCanvas,settings){var x,y,w,h,e,d,fontStyle=settings("hoverFontStyle")||settings("fontStyle"),prefix=settings("prefix")||"",size=node[prefix+"size"],fontSize=settings("labelSize")==="fixed"?settings("defaultLabelSize"):settings("labelSizeRatio")*size,fontColor=settings("labelHoverColor")==="node"?node.color||settings("defaultNodeColor"):settings("defaultLabelHoverColor");var group=document.createElementNS(settings("xmlns"),"g"),rectangle=document.createElementNS(settings("xmlns"),"rect"),circle=document.createElementNS(settings("xmlns"),"circle"),text=document.createElementNS(settings("xmlns"),"text");group.setAttributeNS(null,"class",settings("classPrefix")+"-hover");group.setAttributeNS(null,"data-node-id",node.id);if(typeof node.label==="string"){text.innerHTML=node.label;text.textContent=node.label;text.setAttributeNS(null,"class",settings("classPrefix")+"-hover-label");text.setAttributeNS(null,"font-size",fontSize);text.setAttributeNS(null,"font-family",settings("font"));text.setAttributeNS(null,"fill",fontColor);text.setAttributeNS(null,"x",Math.round(node[prefix+"x"]+size+3));text.setAttributeNS(null,"y",Math.round(node[prefix+"y"]+fontSize/3));x=Math.round(node[prefix+"x"]-fontSize/2-2);y=Math.round(node[prefix+"y"]-fontSize/2-2);w=Math.round(measurementCanvas.measureText(node.label).width+fontSize/2+size+9);h=Math.round(fontSize+4);e=Math.round(fontSize/2+2);circle.setAttributeNS(null,"class",settings("classPrefix")+"-hover-area");circle.setAttributeNS(null,"fill","#fff");circle.setAttributeNS(null,"cx",node[prefix+"x"]);circle.setAttributeNS(null,"cy",node[prefix+"y"]);circle.setAttributeNS(null,"r",e);rectangle.setAttributeNS(null,"class",settings("classPrefix")+"-hover-area");rectangle.setAttributeNS(null,"fill","#fff");rectangle.setAttributeNS(null,"x",node[prefix+"x"]+e/4);rectangle.setAttributeNS(null,"y",node[prefix+"y"]-e);rectangle.setAttributeNS(null,"width",w);rectangle.setAttributeNS(null,"height",h)}group.appendChild(circle);group.appendChild(rectangle);group.appendChild(text);group.appendChild(nodeCircle);return group}}}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares");sigma.utils.pkg("sigma.utils");sigma.middlewares.rescale=function(readPrefix,writePrefix,options){var i,l,a,b,c,d,scale,margin,n=this.graph.nodes(),e=this.graph.edges(),settings=this.settings.embedObjects(options||{}),bounds=settings("bounds")||sigma.utils.getBoundaries(this.graph,readPrefix,true),minX=bounds.minX,minY=bounds.minY,maxX=bounds.maxX,maxY=bounds.maxY,sizeMax=bounds.sizeMax,weightMax=bounds.weightMax,w=settings("width")||1,h=settings("height")||1,rescaleSettings=settings("autoRescale"),validSettings={nodePosition:1,nodeSize:1,edgeSize:1};if(!(rescaleSettings instanceof Array))rescaleSettings=["nodePosition","nodeSize","edgeSize"];for(i=0,l=rescaleSettings.length;i<l;i++)if(!validSettings[rescaleSettings[i]])throw new Error('The rescale setting "'+rescaleSettings[i]+'" is not recognized.');var np=~rescaleSettings.indexOf("nodePosition"),ns=~rescaleSettings.indexOf("nodeSize"),es=~rescaleSettings.indexOf("edgeSize");scale=settings("scalingMode")==="outside"?Math.max(w/Math.max(maxX-minX,1),h/Math.max(maxY-minY,1)):Math.min(w/Math.max(maxX-minX,1),h/Math.max(maxY-minY,1));margin=(settings("rescaleIgnoreSize")?0:(settings("maxNodeSize")||sizeMax)/scale)+(settings("sideMargin")||0);maxX+=margin;minX-=margin;maxY+=margin;minY-=margin;scale=settings("scalingMode")==="outside"?Math.max(w/Math.max(maxX-minX,1),h/Math.max(maxY-minY,1)):Math.min(w/Math.max(maxX-minX,1),h/Math.max(maxY-minY,1));if(!settings("maxNodeSize")&&!settings("minNodeSize")){a=1;b=0}else if(settings("maxNodeSize")===settings("minNodeSize")){a=0;b=+settings("maxNodeSize")}else{a=(settings("maxNodeSize")-settings("minNodeSize"))/sizeMax;b=+settings("minNodeSize")}if(!settings("maxEdgeSize")&&!settings("minEdgeSize")){c=1;d=0}else if(settings("maxEdgeSize")===settings("minEdgeSize")){c=0;d=+settings("minEdgeSize")}else{c=(settings("maxEdgeSize")-settings("minEdgeSize"))/weightMax;d=+settings("minEdgeSize")}for(i=0,l=e.length;i<l;i++)e[i][writePrefix+"size"]=e[i][readPrefix+"size"]*(es?c:1)+(es?d:0);for(i=0,l=n.length;i<l;i++){n[i][writePrefix+"size"]=n[i][readPrefix+"size"]*(ns?a:1)+(ns?b:0);n[i][writePrefix+"x"]=(n[i][readPrefix+"x"]-(maxX+minX)/2)*(np?scale:1);n[i][writePrefix+"y"]=(n[i][readPrefix+"y"]-(maxY+minY)/2)*(np?scale:1)}};sigma.utils.getBoundaries=function(graph,prefix,doEdges){var i,l,e=graph.edges(),n=graph.nodes(),weightMax=-Infinity,sizeMax=-Infinity,minX=Infinity,minY=Infinity,maxX=-Infinity,maxY=-Infinity;if(doEdges)for(i=0,l=e.length;i<l;i++)weightMax=Math.max(e[i][prefix+"size"],weightMax);for(i=0,l=n.length;i<l;i++){sizeMax=Math.max(n[i][prefix+"size"],sizeMax);maxX=Math.max(n[i][prefix+"x"],maxX);minX=Math.min(n[i][prefix+"x"],minX);maxY=Math.max(n[i][prefix+"y"],maxY);minY=Math.min(n[i][prefix+"y"],minY)}weightMax=weightMax||1;sizeMax=sizeMax||1;return{weightMax:weightMax,sizeMax:sizeMax,minX:minX,minY:minY,maxX:maxX,maxY:maxY}}}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares");sigma.middlewares.copy=function(readPrefix,writePrefix){var i,l,a;if(writePrefix+""===readPrefix+"")return;a=this.graph.nodes();for(i=0,l=a.length;i<l;i++){a[i][writePrefix+"x"]=a[i][readPrefix+"x"];a[i][writePrefix+"y"]=a[i][readPrefix+"y"];a[i][writePrefix+"size"]=a[i][readPrefix+"size"]}a=this.graph.edges();for(i=0,l=a.length;i<l;i++)a[i][writePrefix+"size"]=a[i][readPrefix+"size"]}}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var _getID=function(){var id=0;return function(){return""+ ++id}}();sigma.misc.animation.camera=function(camera,val,options){if(!(camera instanceof sigma.classes.camera)||typeof val!=="object"||!val)throw"animation.camera: Wrong arguments.";if(typeof val.x!=="number"&&typeof val.y!=="number"&&typeof val.ratio!=="number"&&typeof val.angle!=="number")throw"There must be at least one valid coordinate in the given val.";var fn,id,anim,easing,duration,initialVal,o=options||{},start=sigma.utils.dateNow();initialVal={x:camera.x,y:camera.y,ratio:camera.ratio,angle:camera.angle};duration=o.duration;easing=typeof o.easing!=="function"?sigma.utils.easings[o.easing||"quadraticInOut"]:o.easing;fn=function(){var coef,t=o.duration?(sigma.utils.dateNow()-start)/o.duration:1;if(t>=1){camera.isAnimated=false;camera.goTo({x:val.x!==undefined?val.x:initialVal.x,y:val.y!==undefined?val.y:initialVal.y,ratio:val.ratio!==undefined?val.ratio:initialVal.ratio,angle:val.angle!==undefined?val.angle:initialVal.angle});cancelAnimationFrame(id);delete sigma.misc.animation.running[id];if(typeof o.onComplete==="function")o.onComplete()}else{coef=easing(t);camera.isAnimated=true;camera.goTo({x:val.x!==undefined?initialVal.x+(val.x-initialVal.x)*coef:initialVal.x,y:val.y!==undefined?initialVal.y+(val.y-initialVal.y)*coef:initialVal.y,ratio:val.ratio!==undefined?initialVal.ratio+(val.ratio-initialVal.ratio)*coef:initialVal.ratio,angle:val.angle!==undefined?initialVal.angle+(val.angle-initialVal.angle)*coef:initialVal.angle});if(typeof o.onNewFrame==="function")o.onNewFrame();anim.frameId=requestAnimationFrame(fn)}};id=_getID();anim={frameId:requestAnimationFrame(fn),target:camera,type:"camera",options:o,fn:fn};sigma.misc.animation.running[id]=anim;return id};sigma.misc.animation.kill=function(id){if(arguments.length!==1||typeof id!=="number")throw"animation.kill: Wrong arguments.";var o=sigma.misc.animation.running[id];if(o){cancelAnimationFrame(id);delete sigma.misc.animation.running[o.frameId];if(o.type==="camera")o.target.isAnimated=false;if(typeof(o.options||{}).onComplete==="function")o.options.onComplete()}return this};sigma.misc.animation.killAll=function(filter){var o,id,count=0,type=typeof filter==="string"?filter:null,target=typeof filter==="object"?filter:null,running=sigma.misc.animation.running;for(id in running)if((!type||running[id].type===type)&&(!target||running[id].target===target)){o=sigma.misc.animation.running[id];cancelAnimationFrame(o.frameId);delete sigma.misc.animation.running[id];if(o.type==="camera")o.target.isAnimated=false;count++;if(typeof(o.options||{}).onComplete==="function")o.options.onComplete()}return count};sigma.misc.animation.has=function(filter){var id,type=typeof filter==="string"?filter:null,target=typeof filter==="object"?filter:null,running=sigma.misc.animation.running;for(id in running)if((!type||running[id].type===type)&&(!target||running[id].target===target))return true;return false}}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.misc");sigma.misc.bindEvents=function(prefix){var i,l,mX,mY,captor,self=this;function getNodes(e){if(e){mX="x"in e.data?e.data.x:mX;mY="y"in e.data?e.data.y:mY}var i,j,l,n,x,y,s,inserted,selected=[],modifiedX=mX+self.width/2,modifiedY=mY+self.height/2,point=self.camera.cameraPosition(mX,mY),nodes=self.camera.quadtree.point(point.x,point.y);if(nodes.length)for(i=0,l=nodes.length;i<l;i++){n=nodes[i];x=n[prefix+"x"];y=n[prefix+"y"];s=n[prefix+"size"];if(!n.hidden&&modifiedX>x-s&&modifiedX<x+s&&modifiedY>y-s&&modifiedY<y+s&&Math.sqrt(Math.pow(modifiedX-x,2)+Math.pow(modifiedY-y,2))<s){inserted=false;for(j=0;j<selected.length;j++)if(n.size>selected[j].size){selected.splice(j,0,n);inserted=true;break}if(!inserted)selected.push(n)}}return selected}function getEdges(e){if(!self.settings("enableEdgeHovering")){return[]}var isCanvas=sigma.renderers.canvas&&self instanceof sigma.renderers.canvas;if(!isCanvas){throw new Error("The edge events feature is not compatible with the WebGL renderer")}if(e){mX="x"in e.data?e.data.x:mX;mY="y"in e.data?e.data.y:mY}var i,j,l,a,edge,s,maxEpsilon=self.settings("edgeHoverPrecision"),source,target,cp,nodeIndex={},inserted,selected=[],modifiedX=mX+self.width/2,modifiedY=mY+self.height/2,point=self.camera.cameraPosition(mX,mY),edges=[];if(isCanvas){var nodesOnScreen=self.camera.quadtree.area(self.camera.getRectangle(self.width,self.height));for(a=nodesOnScreen,i=0,l=a.length;i<l;i++)nodeIndex[a[i].id]=a[i]}if(self.camera.edgequadtree!==undefined){edges=self.camera.edgequadtree.point(point.x,point.y)}function insertEdge(selected,edge){inserted=false;for(j=0;j<selected.length;j++)if(edge.size>selected[j].size){selected.splice(j,0,edge);inserted=true;break}if(!inserted)selected.push(edge)}if(edges.length)for(i=0,l=edges.length;i<l;i++){edge=edges[i];source=self.graph.nodes(edge.source);target=self.graph.nodes(edge.target);s=edge[prefix+"size"]||edge["read_"+prefix+"size"];if(!edge.hidden&&!source.hidden&&!target.hidden&&(!isCanvas||(nodeIndex[edge.source]||nodeIndex[edge.target]))&&sigma.utils.getDistance(source[prefix+"x"],source[prefix+"y"],modifiedX,modifiedY)>source[prefix+"size"]&&sigma.utils.getDistance(target[prefix+"x"],target[prefix+"y"],modifiedX,modifiedY)>target[prefix+"size"]){if(edge.type=="curve"||edge.type=="curvedArrow"){if(source.id===target.id){cp=sigma.utils.getSelfLoopControlPoints(source[prefix+"x"],source[prefix+"y"],source[prefix+"size"]);if(sigma.utils.isPointOnBezierCurve(modifiedX,modifiedY,source[prefix+"x"],source[prefix+"y"],target[prefix+"x"],target[prefix+"y"],cp.x1,cp.y1,cp.x2,cp.y2,Math.max(s,maxEpsilon))){insertEdge(selected,edge)}}else{cp=sigma.utils.getQuadraticControlPoint(source[prefix+"x"],source[prefix+"y"],target[prefix+"x"],target[prefix+"y"]);if(sigma.utils.isPointOnQuadraticCurve(modifiedX,modifiedY,source[prefix+"x"],source[prefix+"y"],target[prefix+"x"],target[prefix+"y"],cp.x,cp.y,Math.max(s,maxEpsilon))){insertEdge(selected,edge)}}}else if(sigma.utils.isPointOnSegment(modifiedX,modifiedY,source[prefix+"x"],source[prefix+"y"],target[prefix+"x"],target[prefix+"y"],Math.max(s,maxEpsilon))){insertEdge(selected,edge)}}}return selected}function bindCaptor(captor){var nodes,edges,overNodes={},overEdges={};function onClick(e){if(!self.settings("eventsEnabled"))return;self.dispatchEvent("click",e.data);nodes=getNodes(e);edges=getEdges(e);if(nodes.length){self.dispatchEvent("clickNode",{node:nodes[0],captor:e.data});self.dispatchEvent("clickNodes",{node:nodes,captor:e.data})}else if(edges.length){self.dispatchEvent("clickEdge",{edge:edges[0],captor:e.data});self.dispatchEvent("clickEdges",{edge:edges,captor:e.data})}else self.dispatchEvent("clickStage",{captor:e.data})}function onDoubleClick(e){if(!self.settings("eventsEnabled"))return;self.dispatchEvent("doubleClick",e.data);nodes=getNodes(e);edges=getEdges(e);if(nodes.length){self.dispatchEvent("doubleClickNode",{node:nodes[0],captor:e.data});self.dispatchEvent("doubleClickNodes",{node:nodes,captor:e.data})}else if(edges.length){self.dispatchEvent("doubleClickEdge",{edge:edges[0],captor:e.data});self.dispatchEvent("doubleClickEdges",{edge:edges,captor:e.data})}else self.dispatchEvent("doubleClickStage",{captor:e.data})}function onRightClick(e){if(!self.settings("eventsEnabled"))return;self.dispatchEvent("rightClick",e.data);nodes=getNodes(e);edges=getEdges(e);if(nodes.length){self.dispatchEvent("rightClickNode",{node:nodes[0],captor:e.data});self.dispatchEvent("rightClickNodes",{node:nodes,captor:e.data})}else if(edges.length){self.dispatchEvent("rightClickEdge",{edge:edges[0],captor:e.data});self.dispatchEvent("rightClickEdges",{edge:edges,captor:e.data})}else self.dispatchEvent("rightClickStage",{captor:e.data})}function onOut(e){if(!self.settings("eventsEnabled"))return;var k,i,l,le,outNodes=[],outEdges=[];for(k in overNodes)outNodes.push(overNodes[k]);overNodes={};for(i=0,l=outNodes.length;i<l;i++)self.dispatchEvent("outNode",{node:outNodes[i],captor:e.data});if(outNodes.length)self.dispatchEvent("outNodes",{nodes:outNodes,captor:e.data});overEdges={};for(i=0,le=outEdges.length;i<le;i++)self.dispatchEvent("outEdge",{edge:outEdges[i],captor:e.data});if(outEdges.length)self.dispatchEvent("outEdges",{edges:outEdges,captor:e.data})}function onMove(e){if(!self.settings("eventsEnabled"))return;nodes=getNodes(e);edges=getEdges(e);var i,k,node,edge,newOutNodes=[],newOverNodes=[],currentOverNodes={},l=nodes.length,newOutEdges=[],newOverEdges=[],currentOverEdges={},le=edges.length;for(i=0;i<l;i++){node=nodes[i];currentOverNodes[node.id]=node;if(!overNodes[node.id]){newOverNodes.push(node);overNodes[node.id]=node}}for(k in overNodes)if(!currentOverNodes[k]){newOutNodes.push(overNodes[k]);delete overNodes[k]}for(i=0,l=newOverNodes.length;i<l;i++)self.dispatchEvent("overNode",{node:newOverNodes[i],captor:e.data});for(i=0,l=newOutNodes.length;i<l;i++)self.dispatchEvent("outNode",{node:newOutNodes[i],captor:e.data});if(newOverNodes.length)self.dispatchEvent("overNodes",{nodes:newOverNodes,captor:e.data});if(newOutNodes.length)self.dispatchEvent("outNodes",{nodes:newOutNodes,captor:e.data});for(i=0;i<le;i++){edge=edges[i];currentOverEdges[edge.id]=edge;if(!overEdges[edge.id]){newOverEdges.push(edge);overEdges[edge.id]=edge}}for(k in overEdges)if(!currentOverEdges[k]){newOutEdges.push(overEdges[k]);delete overEdges[k]}for(i=0,le=newOverEdges.length;i<le;i++)self.dispatchEvent("overEdge",{edge:newOverEdges[i],captor:e.data});for(i=0,le=newOutEdges.length;i<le;i++)self.dispatchEvent("outEdge",{edge:newOutEdges[i],captor:e.data});if(newOverEdges.length)self.dispatchEvent("overEdges",{edges:newOverEdges,captor:e.data});if(newOutEdges.length)self.dispatchEvent("outEdges",{edges:newOutEdges,captor:e.data})}captor.bind("click",onClick);captor.bind("mousedown",onMove);captor.bind("mouseup",onMove);captor.bind("mousemove",onMove);captor.bind("mouseout",onOut);captor.bind("doubleclick",onDoubleClick);captor.bind("rightclick",onRightClick);self.bind("render",onMove)}for(i=0,l=this.captors.length;i<l;i++)bindCaptor(this.captors[i])}}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.misc");sigma.misc.bindDOMEvents=function(container){var self=this,graph=this.graph;function Element(domElement){this.attr=function(attrName){return domElement.getAttributeNS(null,attrName)};this.tag=domElement.tagName;this.class=this.attr("class");this.id=this.attr("id");this.isNode=function(){return!!~this.class.indexOf(self.settings("classPrefix")+"-node")};this.isEdge=function(){return!!~this.class.indexOf(self.settings("classPrefix")+"-edge")};this.isHover=function(){return!!~this.class.indexOf(self.settings("classPrefix")+"-hover")}}function click(e){if(!self.settings("eventsEnabled"))return;self.dispatchEvent("click",e);var element=new Element(e.target);if(element.isNode())self.dispatchEvent("clickNode",{node:graph.nodes(element.attr("data-node-id"))});else self.dispatchEvent("clickStage");e.preventDefault();e.stopPropagation()}function doubleClick(e){if(!self.settings("eventsEnabled"))return;self.dispatchEvent("doubleClick",e);var element=new Element(e.target);if(element.isNode())self.dispatchEvent("doubleClickNode",{node:graph.nodes(element.attr("data-node-id"))});else self.dispatchEvent("doubleClickStage");e.preventDefault();e.stopPropagation()}function onOver(e){var target=e.toElement||e.target;if(!self.settings("eventsEnabled")||!target)return;var el=new Element(target);if(el.isNode()){self.dispatchEvent("overNode",{node:graph.nodes(el.attr("data-node-id"))})}else if(el.isEdge()){var edge=graph.edges(el.attr("data-edge-id"));self.dispatchEvent("overEdge",{edge:edge,source:graph.nodes(edge.source),target:graph.nodes(edge.target)})}}function onOut(e){var target=e.fromElement||e.originalTarget;if(!self.settings("eventsEnabled"))return;var el=new Element(target);if(el.isNode()){self.dispatchEvent("outNode",{node:graph.nodes(el.attr("data-node-id"))})}else if(el.isEdge()){var edge=graph.edges(el.attr("data-edge-id"));self.dispatchEvent("outEdge",{edge:edge,source:graph.nodes(edge.source),target:graph.nodes(edge.target)})}}container.addEventListener("click",click,false);sigma.utils.doubleClick(container,"click",doubleClick);container.addEventListener("touchstart",click,false);sigma.utils.doubleClick(container,"touchstart",doubleClick);container.addEventListener("mouseover",onOver,true);container.addEventListener("mouseout",onOut,true)}}).call(this);(function(undefined){"use strict";if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.misc");sigma.misc.drawHovers=function(prefix){var self=this,hoveredNodes={},hoveredEdges={};this.bind("overNode",function(event){var node=event.data.node;if(!node.hidden){hoveredNodes[node.id]=node;draw()}});this.bind("outNode",function(event){delete hoveredNodes[event.data.node.id];draw()});this.bind("overEdge",function(event){var edge=event.data.edge;if(!edge.hidden){hoveredEdges[edge.id]=edge;draw()}});this.bind("outEdge",function(event){delete hoveredEdges[event.data.edge.id];draw()});this.bind("render",function(event){draw()});function draw(){var k,source,target,hoveredNode,hoveredEdge,c=self.contexts.hover.canvas,defaultNodeType=self.settings("defaultNodeType"),defaultEdgeType=self.settings("defaultEdgeType"),nodeRenderers=sigma.canvas.hovers,edgeRenderers=sigma.canvas.edgehovers,extremitiesRenderers=sigma.canvas.extremities,embedSettings=self.settings.embedObjects({prefix:prefix});self.contexts.hover.clearRect(0,0,c.width,c.height);if(embedSettings("enableHovering")&&embedSettings("singleHover")&&Object.keys(hoveredNodes).length){hoveredNode=hoveredNodes[Object.keys(hoveredNodes)[0]];(nodeRenderers[hoveredNode.type]||nodeRenderers[defaultNodeType]||nodeRenderers.def)(hoveredNode,self.contexts.hover,embedSettings)}if(embedSettings("enableHovering")&&!embedSettings("singleHover"))for(k in hoveredNodes)(nodeRenderers[hoveredNodes[k].type]||nodeRenderers[defaultNodeType]||nodeRenderers.def)(hoveredNodes[k],self.contexts.hover,embedSettings);if(embedSettings("enableEdgeHovering")&&embedSettings("singleHover")&&Object.keys(hoveredEdges).length){hoveredEdge=hoveredEdges[Object.keys(hoveredEdges)[0]];source=self.graph.nodes(hoveredEdge.source);target=self.graph.nodes(hoveredEdge.target);if(!hoveredEdge.hidden){(edgeRenderers[hoveredEdge.type]||edgeRenderers[defaultEdgeType]||edgeRenderers.def)(hoveredEdge,source,target,self.contexts.hover,embedSettings);if(embedSettings("edgeHoverExtremities")){(extremitiesRenderers[hoveredEdge.type]||extremitiesRenderers.def)(hoveredEdge,source,target,self.contexts.hover,embedSettings)}else{(sigma.canvas.nodes[source.type]||sigma.canvas.nodes.def)(source,self.contexts.hover,embedSettings);(sigma.canvas.nodes[target.type]||sigma.canvas.nodes.def)(target,self.contexts.hover,embedSettings)}}}if(embedSettings("enableEdgeHovering")&&!embedSettings("singleHover")){for(k in hoveredEdges){hoveredEdge=hoveredEdges[k];source=self.graph.nodes(hoveredEdge.source);target=self.graph.nodes(hoveredEdge.target);if(!hoveredEdge.hidden){(edgeRenderers[hoveredEdge.type]||edgeRenderers[defaultEdgeType]||edgeRenderers.def)(hoveredEdge,source,target,self.contexts.hover,embedSettings);if(embedSettings("edgeHoverExtremities")){(extremitiesRenderers[hoveredEdge.type]||extremitiesRenderers.def)(hoveredEdge,source,target,self.contexts.hover,embedSettings)}else{(sigma.canvas.nodes[source.type]||sigma.canvas.nodes.def)(source,self.contexts.hover,embedSettings);(sigma.canvas.nodes[target.type]||sigma.canvas.nodes.def)(target,self.contexts.hover,embedSettings)}}}}}}}).call(this)},{}],688:[function(require,module,exports){var util=require("./util");var has=Object.prototype.hasOwnProperty;function ArraySet(){this._array=[];this._set=Object.create(null)}ArraySet.fromArray=function ArraySet_fromArray(aArray,aAllowDuplicates){var set=new ArraySet;for(var i=0,len=aArray.length;i<len;i++){set.add(aArray[i],aAllowDuplicates)}return set};ArraySet.prototype.size=function ArraySet_size(){return Object.getOwnPropertyNames(this._set).length};ArraySet.prototype.add=function ArraySet_add(aStr,aAllowDuplicates){var sStr=util.toSetString(aStr);var isDuplicate=has.call(this._set,sStr);var idx=this._array.length;if(!isDuplicate||aAllowDuplicates){this._array.push(aStr)}if(!isDuplicate){this._set[sStr]=idx}};ArraySet.prototype.has=function ArraySet_has(aStr){var sStr=util.toSetString(aStr);return has.call(this._set,sStr)};ArraySet.prototype.indexOf=function ArraySet_indexOf(aStr){var sStr=util.toSetString(aStr);if(has.call(this._set,sStr)){return this._set[sStr]}throw new Error('"'+aStr+'" is not in the set.')};ArraySet.prototype.at=function ArraySet_at(aIdx){if(aIdx>=0&&aIdx<this._array.length){return this._array[aIdx]}throw new Error("No element indexed by "+aIdx)};ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()};exports.ArraySet=ArraySet},{"./util":697}],689:[function(require,module,exports){arguments[4][342][0].apply(exports,arguments)},{"./base64":690,dup:342}],690:[function(require,module,exports){arguments[4][343][0].apply(exports,arguments)},{dup:343}],691:[function(require,module,exports){arguments[4][344][0].apply(exports,arguments)},{dup:344}],692:[function(require,module,exports){arguments[4][345][0].apply(exports,arguments)},{"./util":697,dup:345}],693:[function(require,module,exports){arguments[4][346][0].apply(exports,arguments)},{dup:346}],694:[function(require,module,exports){arguments[4][347][0].apply(exports,arguments)},{"./array-set":688,"./base64-vlq":689,"./binary-search":691,"./quick-sort":693,"./util":697,dup:347}],695:[function(require,module,exports){var base64VLQ=require("./base64-vlq");var util=require("./util");var ArraySet=require("./array-set").ArraySet;var MappingList=require("./mapping-list").MappingList;function SourceMapGenerator(aArgs){if(!aArgs){aArgs={}}this._file=util.getArg(aArgs,"file",null);this._sourceRoot=util.getArg(aArgs,"sourceRoot",null);this._skipValidation=util.getArg(aArgs,"skipValidation",false);this._sources=new ArraySet;this._names=new ArraySet;this._mappings=new MappingList;this._sourcesContents=null}SourceMapGenerator.prototype._version=3;SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot;var generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};if(mapping.source!=null){newMapping.source=mapping.source;if(sourceRoot!=null){newMapping.source=util.relative(sourceRoot,newMapping.source)}newMapping.original={line:mapping.originalLine,column:mapping.originalColumn};if(mapping.name!=null){newMapping.name=mapping.name}}generator.addMapping(newMapping)});aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){generator.setSourceContent(sourceFile,content)}});return generator};SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(aArgs){var generated=util.getArg(aArgs,"generated");var original=util.getArg(aArgs,"original",null);var source=util.getArg(aArgs,"source",null);var name=util.getArg(aArgs,"name",null);if(!this._skipValidation){this._validateMapping(generated,original,source,name)}if(source!=null){source=String(source);if(!this._sources.has(source)){this._sources.add(source)}}if(name!=null){name=String(name);if(!this._names.has(name)){this._names.add(name)}}this._mappings.add({generatedLine:generated.line,generatedColumn:generated.column,originalLine:original!=null&&original.line,originalColumn:original!=null&&original.column,source:source,name:name})};SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(aSourceFile,aSourceContent){var source=aSourceFile;if(this._sourceRoot!=null){source=util.relative(this._sourceRoot,source)}if(aSourceContent!=null){if(!this._sourcesContents){this._sourcesContents=Object.create(null)}this._sourcesContents[util.toSetString(source)]=aSourceContent}else if(this._sourcesContents){delete this._sourcesContents[util.toSetString(source)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(aSourceMapConsumer,aSourceFile,aSourceMapPath){var sourceFile=aSourceFile;if(aSourceFile==null){if(aSourceMapConsumer.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}sourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}var newSources=new ArraySet;var newNames=new ArraySet;this._mappings.unsortedForEach(function(mapping){if(mapping.source===sourceFile&&mapping.originalLine!=null){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});if(original.source!=null){mapping.source=original.source;if(aSourceMapPath!=null){mapping.source=util.join(aSourceMapPath,mapping.source)}if(sourceRoot!=null){mapping.source=util.relative(sourceRoot,mapping.source)}mapping.originalLine=original.line;mapping.originalColumn=original.column;if(original.name!=null){mapping.name=original.name}}}var source=mapping.source;if(source!=null&&!newSources.has(source)){newSources.add(source)}var name=mapping.name;if(name!=null&&!newNames.has(name)){newNames.add(name)}},this);this._sources=newSources;this._names=newNames;aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aSourceMapPath!=null){sourceFile=util.join(aSourceMapPath,sourceFile)}if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}this.setSourceContent(sourceFile,content)}},this)};SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(aGenerated,aOriginal,aSource,aName){if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName){return}else if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))}};SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){var previousGeneratedColumn=0;var previousGeneratedLine=1;var previousOriginalColumn=0;var previousOriginalLine=0;var previousName=0;var previousSource=0;var result="";var next;var mapping;var nameIdx;var sourceIdx;var mappings=this._mappings.toArray();for(var i=0,len=mappings.length;i<len;i++){mapping=mappings[i];next="";if(mapping.generatedLine!==previousGeneratedLine){previousGeneratedColumn=0;while(mapping.generatedLine!==previousGeneratedLine){next+=";";previousGeneratedLine++}}else{if(i>0){if(!util.compareByGeneratedPositionsInflated(mapping,mappings[i-1])){continue}next+=","}}next+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn);previousGeneratedColumn=mapping.generatedColumn;if(mapping.source!=null){sourceIdx=this._sources.indexOf(mapping.source);next+=base64VLQ.encode(sourceIdx-previousSource);previousSource=sourceIdx;next+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine);previousOriginalLine=mapping.originalLine-1;next+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn);previousOriginalColumn=mapping.originalColumn;if(mapping.name!=null){nameIdx=this._names.indexOf(mapping.name);next+=base64VLQ.encode(nameIdx-previousName);previousName=nameIdx}}result+=next}return result};SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents){return null}if(aSourceRoot!=null){source=util.relative(aSourceRoot,source)}var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)};SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){map.file=this._file}if(this._sourceRoot!=null){map.sourceRoot=this._sourceRoot}if(this._sourcesContents){map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)}return map};SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this.toJSON())};exports.SourceMapGenerator=SourceMapGenerator},{"./array-set":688,"./base64-vlq":689,"./mapping-list":692,"./util":697}],696:[function(require,module,exports){var SourceMapGenerator=require("./source-map-generator").SourceMapGenerator;var util=require("./util");var REGEX_NEWLINE=/(\r?\n)/;var NEWLINE_CODE=10;var isSourceNode="$$$isSourceNode$$$";function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[];this.sourceContents={};this.line=aLine==null?null:aLine;this.column=aColumn==null?null:aColumn;this.source=aSource==null?null:aSource;this.name=aName==null?null:aName;this[isSourceNode]=true;if(aChunks!=null)this.add(aChunks)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(aGeneratedCode,aSourceMapConsumer,aRelativePath){var node=new SourceNode;var remainingLines=aGeneratedCode.split(REGEX_NEWLINE);var shiftNextLine=function(){var lineContents=remainingLines.shift();var newLine=remainingLines.shift()||"";return lineContents+newLine};var lastGeneratedLine=1,lastGeneratedColumn=0;var lastMapping=null;aSourceMapConsumer.eachMapping(function(mapping){if(lastMapping!==null){if(lastGeneratedLine<mapping.generatedLine){addMappingWithCode(lastMapping,shiftNextLine());lastGeneratedLine++;lastGeneratedColumn=0}else{var nextLine=remainingLines[0];var code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[0]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn);lastGeneratedColumn=mapping.generatedColumn;addMappingWithCode(lastMapping,code);lastMapping=mapping;return}}while(lastGeneratedLine<mapping.generatedLine){node.add(shiftNextLine());lastGeneratedLine++}if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];node.add(nextLine.substr(0,mapping.generatedColumn));remainingLines[0]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping},this);if(remainingLines.length>0){if(lastMapping){addMappingWithCode(lastMapping,shiftNextLine())}node.add(remainingLines.join(""))}aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aRelativePath!=null){sourceFile=util.join(aRelativePath,sourceFile)}node.setSourceContent(sourceFile,content)}});return node;function addMappingWithCode(mapping,code){if(mapping===null||mapping.source===undefined){node.add(code)}else{var source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}};SourceNode.prototype.add=function SourceNode_add(aChunk){if(Array.isArray(aChunk)){aChunk.forEach(function(chunk){this.add(chunk)},this)}else if(aChunk[isSourceNode]||typeof aChunk==="string"){if(aChunk){this.children.push(aChunk)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.prepend=function SourceNode_prepend(aChunk){if(Array.isArray(aChunk)){for(var i=aChunk.length-1;i>=0;i--){this.prepend(aChunk[i])}}else if(aChunk[isSourceNode]||typeof aChunk==="string"){this.children.unshift(aChunk)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.walk=function SourceNode_walk(aFn){var chunk;for(var i=0,len=this.children.length;i<len;i++){chunk=this.children[i];if(chunk[isSourceNode]){chunk.walk(aFn)}else{if(chunk!==""){aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};SourceNode.prototype.join=function SourceNode_join(aSep){var newChildren;var i;var len=this.children.length;if(len>0){newChildren=[];for(i=0;i<len-1;i++){newChildren.push(this.children[i]);newChildren.push(aSep)}newChildren.push(this.children[i]);this.children=newChildren}return this};SourceNode.prototype.replaceRight=function SourceNode_replaceRight(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];if(lastChild[isSourceNode]){lastChild.replaceRight(aPattern,aReplacement)}else if(typeof lastChild==="string"){this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement)}else{this.children.push("".replace(aPattern,aReplacement))}return this};SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent};SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(aFn){for(var i=0,len=this.children.length;i<len;i++){if(this.children[i][isSourceNode]){this.children[i].walkSourceContents(aFn)}}var sources=Object.keys(this.sourceContents);for(var i=0,len=sources.length;i<len;i++){aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])}};SourceNode.prototype.toString=function SourceNode_toString(){var str="";this.walk(function(chunk){str+=chunk});return str};SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(aArgs){var generated={code:"",line:1,column:0};var map=new SourceMapGenerator(aArgs);var sourceMappingActive=false;var lastOriginalSource=null;var lastOriginalLine=null;var lastOriginalColumn=null;var lastOriginalName=null;this.walk(function(chunk,original){generated.code+=chunk;if(original.source!==null&&original.line!==null&&original.column!==null){if(lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}lastOriginalSource=original.source;lastOriginalLine=original.line;lastOriginalColumn=original.column;lastOriginalName=original.name;sourceMappingActive=true}else if(sourceMappingActive){map.addMapping({generated:{line:generated.line,column:generated.column}});lastOriginalSource=null;sourceMappingActive=false}for(var idx=0,length=chunk.length;idx<length;idx++){if(chunk.charCodeAt(idx)===NEWLINE_CODE){generated.line++;generated.column=0;if(idx+1===length){lastOriginalSource=null;sourceMappingActive=false}else if(sourceMappingActive){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}}else{generated.column++}}});this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)});return{code:generated.code,map:map}};exports.SourceNode=SourceNode},{"./source-map-generator":695,"./util":697}],697:[function(require,module,exports){arguments[4][350][0].apply(exports,arguments)},{dup:350}],698:[function(require,module,exports){arguments[4][351][0].apply(exports,arguments)},{"./lib/source-map-consumer":694,"./lib/source-map-generator":695,"./lib/source-node":696,dup:351}],699:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global.topojson=global.topojson||{})})(this,function(exports){"use strict";function noop(){}function transformAbsolute(transform){if(!transform)return noop;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(point,i){if(!i)x0=y0=0;point[0]=(x0+=point[0])*kx+dx;point[1]=(y0+=point[1])*ky+dy}}function transformRelative(transform){if(!transform)return noop;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(point,i){if(!i)x0=y0=0;var x1=Math.round((point[0]-dx)/kx),y1=Math.round((point[1]-dy)/ky);point[0]=x1-x0;point[1]=y1-y0;x0=x1;y0=y1}}function reverse(array,n){var t,j=array.length,i=j-n;while(i<--j)t=array[i],array[i++]=array[j],array[j]=t}function bisect(a,x){var lo=0,hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(a[mid]<x)lo=mid+1;else hi=mid}return lo}function feature(topology,o){return o.type==="GeometryCollection"?{type:"FeatureCollection",features:o.geometries.map(function(o){return feature$1(topology,o)})}:feature$1(topology,o)}function feature$1(topology,o){var f={type:"Feature",id:o.id,properties:o.properties||{},geometry:object(topology,o)};if(o.id==null)delete f.id;return f}function object(topology,o){var absolute=transformAbsolute(topology.transform),arcs=topology.arcs;function arc(i,points){if(points.length)points.pop();for(var a=arcs[i<0?~i:i],k=0,n=a.length,p;k<n;++k){points.push(p=a[k].slice());absolute(p,k)}if(i<0)reverse(points,n)}function point(p){p=p.slice();absolute(p,0);return p}function line(arcs){var points=[];for(var i=0,n=arcs.length;i<n;++i)arc(arcs[i],points);if(points.length<2)points.push(points[0].slice());return points}function ring(arcs){var points=line(arcs);while(points.length<4)points.push(points[0].slice());return points}function polygon(arcs){return arcs.map(ring)}function geometry(o){var t=o.type;return t==="GeometryCollection"?{type:t,geometries:o.geometries.map(geometry)}:t in geometryType?{type:t,coordinates:geometryType[t](o)}:null}var geometryType={Point:function(o){return point(o.coordinates)},MultiPoint:function(o){return o.coordinates.map(point)},LineString:function(o){return line(o.arcs)},MultiLineString:function(o){return o.arcs.map(line)},Polygon:function(o){return polygon(o.arcs)},MultiPolygon:function(o){return o.arcs.map(polygon)}};return geometry(o)}function stitchArcs(topology,arcs){var stitchedArcs={},fragmentByStart={},fragmentByEnd={},fragments=[],emptyIndex=-1;arcs.forEach(function(i,j){var arc=topology.arcs[i<0?~i:i],t;if(arc.length<3&&!arc[1][0]&&!arc[1][1]){t=arcs[++emptyIndex],arcs[emptyIndex]=i,arcs[j]=t}});arcs.forEach(function(i){var e=ends(i),start=e[0],end=e[1],f,g;if(f=fragmentByEnd[start]){delete fragmentByEnd[f.end];f.push(i);f.end=end;if(g=fragmentByStart[end]){delete fragmentByStart[g.start];var fg=g===f?f:f.concat(g);fragmentByStart[fg.start=f.start]=fragmentByEnd[fg.end=g.end]=fg}else{fragmentByStart[f.start]=fragmentByEnd[f.end]=f}}else if(f=fragmentByStart[end]){delete fragmentByStart[f.start];f.unshift(i);f.start=start;if(g=fragmentByEnd[start]){delete fragmentByEnd[g.end];var gf=g===f?f:g.concat(f);fragmentByStart[gf.start=g.start]=fragmentByEnd[gf.end=f.end]=gf}else{fragmentByStart[f.start]=fragmentByEnd[f.end]=f}}else{f=[i];fragmentByStart[f.start=start]=fragmentByEnd[f.end=end]=f}});function ends(i){var arc=topology.arcs[i<0?~i:i],p0=arc[0],p1;if(topology.transform)p1=[0,0],arc.forEach(function(dp){p1[0]+=dp[0],p1[1]+=dp[1]});else p1=arc[arc.length-1];return i<0?[p1,p0]:[p0,p1]}function flush(fragmentByEnd,fragmentByStart){for(var k in fragmentByEnd){var f=fragmentByEnd[k];delete fragmentByStart[f.start];delete f.start;delete f.end;f.forEach(function(i){stitchedArcs[i<0?~i:i]=1});fragments.push(f)}}flush(fragmentByEnd,fragmentByStart);flush(fragmentByStart,fragmentByEnd);arcs.forEach(function(i){if(!stitchedArcs[i<0?~i:i])fragments.push([i])});return fragments}function mesh(topology){return object(topology,meshArcs.apply(this,arguments))}function meshArcs(topology,o,filter){var arcs=[];function arc(i){var j=i<0?~i:i;(geomsByArc[j]||(geomsByArc[j]=[])).push({i:i,g:geom})}function line(arcs){arcs.forEach(arc)}function polygon(arcs){arcs.forEach(line)}function geometry(o){if(o.type==="GeometryCollection")o.geometries.forEach(geometry);else if(o.type in geometryType)geom=o,geometryType[o.type](o.arcs)}if(arguments.length>1){var geomsByArc=[],geom;var geometryType={LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(arcs){arcs.forEach(polygon)}};geometry(o);geomsByArc.forEach(arguments.length<3?function(geoms){arcs.push(geoms[0].i)}:function(geoms){if(filter(geoms[0].g,geoms[geoms.length-1].g))arcs.push(geoms[0].i)})}else{for(var i=0,n=topology.arcs.length;i<n;++i)arcs.push(i)}return{type:"MultiLineString",arcs:stitchArcs(topology,arcs)}}function cartesianTriangleArea(triangle){var a=triangle[0],b=triangle[1],c=triangle[2];return Math.abs((a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1]))}function ring(ring){var i=-1,n=ring.length,a,b=ring[n-1],area=0;while(++i<n){a=b;b=ring[i];area+=a[0]*b[1]-a[1]*b[0]}return area/2}function merge(topology){return object(topology,mergeArcs.apply(this,arguments))}function mergeArcs(topology,objects){var polygonsByArc={},polygons=[],components=[];objects.forEach(function(o){if(o.type==="Polygon")register(o.arcs);else if(o.type==="MultiPolygon")o.arcs.forEach(register)});function register(polygon){polygon.forEach(function(ring$$){ring$$.forEach(function(arc){(polygonsByArc[arc=arc<0?~arc:arc]||(polygonsByArc[arc]=[])).push(polygon)})});polygons.push(polygon)}function area(ring$$){return Math.abs(ring(object(topology,{type:"Polygon",arcs:[ring$$]}).coordinates[0]))}polygons.forEach(function(polygon){if(!polygon._){var component=[],neighbors=[polygon];polygon._=1;components.push(component);while(polygon=neighbors.pop()){component.push(polygon);polygon.forEach(function(ring$$){ring$$.forEach(function(arc){polygonsByArc[arc<0?~arc:arc].forEach(function(polygon){if(!polygon._){polygon._=1;neighbors.push(polygon)}})})})}}});polygons.forEach(function(polygon){delete polygon._});return{type:"MultiPolygon",arcs:components.map(function(polygons){var arcs=[],n;polygons.forEach(function(polygon){polygon.forEach(function(ring$$){ring$$.forEach(function(arc){if(polygonsByArc[arc<0?~arc:arc].length<2){arcs.push(arc)}})})});arcs=stitchArcs(topology,arcs);if((n=arcs.length)>1){for(var i=1,k=area(arcs[0]),ki,t;i<n;++i){if((ki=area(arcs[i]))>k){t=arcs[0],arcs[0]=arcs[i],arcs[i]=t,k=ki}}}return arcs})}}function neighbors(objects){var indexesByArc={},neighbors=objects.map(function(){return[]});function line(arcs,i){arcs.forEach(function(a){if(a<0)a=~a;var o=indexesByArc[a];if(o)o.push(i);else indexesByArc[a]=[i]})}function polygon(arcs,i){arcs.forEach(function(arc){line(arc,i)})}function geometry(o,i){if(o.type==="GeometryCollection")o.geometries.forEach(function(o){geometry(o,i)});else if(o.type in geometryType)geometryType[o.type](o.arcs,i)}var geometryType={LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(arcs,i){arcs.forEach(function(arc){polygon(arc,i)})}};objects.forEach(geometry);for(var i in indexesByArc){for(var indexes=indexesByArc[i],m=indexes.length,j=0;j<m;++j){for(var k=j+1;k<m;++k){var ij=indexes[j],ik=indexes[k],n;if((n=neighbors[ij])[i=bisect(n,ik)]!==ik)n.splice(i,0,ik);if((n=neighbors[ik])[i=bisect(n,ij)]!==ij)n.splice(i,0,ij)}}}return neighbors}function compareArea(a,b){return a[1][2]-b[1][2]}function minAreaHeap(){var heap={},array=[],size=0;heap.push=function(object){up(array[object._=size]=object,size++);return size};heap.pop=function(){if(size<=0)return;var removed=array[0],object;if(--size>0)object=array[size],down(array[object._=0]=object,0);return removed};heap.remove=function(removed){var i=removed._,object;if(array[i]!==removed)return;if(i!==--size)object=array[size],(compareArea(object,removed)<0?up:down)(array[object._=i]=object,i);return i};function up(object,i){while(i>0){var j=(i+1>>1)-1,parent=array[j];if(compareArea(object,parent)>=0)break;array[parent._=i]=parent;array[object._=i=j]=object}}function down(object,i){while(true){var r=i+1<<1,l=r-1,j=i,child=array[j];if(l<size&&compareArea(array[l],child)<0)child=array[j=l];if(r<size&&compareArea(array[r],child)<0)child=array[j=r];if(j===i)break;array[child._=i]=child;array[object._=i=j]=object}}return heap}function presimplify(topology,triangleArea){var absolute=transformAbsolute(topology.transform),relative=transformRelative(topology.transform),heap=minAreaHeap();if(!triangleArea)triangleArea=cartesianTriangleArea;topology.arcs.forEach(function(arc){var triangles=[],maxArea=0,triangle,i,n,p;for(i=0,n=arc.length;i<n;++i){p=arc[i];absolute(arc[i]=[p[0],p[1],Infinity],i)}for(i=1,n=arc.length-1;i<n;++i){triangle=arc.slice(i-1,i+2);triangle[1][2]=triangleArea(triangle);triangles.push(triangle);heap.push(triangle)}for(i=0,n=triangles.length;i<n;++i){triangle=triangles[i];triangle.previous=triangles[i-1];triangle.next=triangles[i+1]}while(triangle=heap.pop()){var previous=triangle.previous,next=triangle.next;if(triangle[1][2]<maxArea)triangle[1][2]=maxArea;else maxArea=triangle[1][2];if(previous){previous.next=next;previous[2]=triangle[2];update(previous)}if(next){next.previous=previous;next[0]=triangle[0];update(next)}}arc.forEach(relative)});function update(triangle){heap.remove(triangle);triangle[1][2]=triangleArea(triangle);heap.push(triangle)}return topology}var version="1.6.27";exports.version=version;exports.mesh=mesh;exports.meshArcs=meshArcs;exports.merge=merge;exports.mergeArcs=mergeArcs;exports.feature=feature;exports.neighbors=neighbors;exports.presimplify=presimplify;Object.defineProperty(exports,"__esModule",{value:true})})},{}],700:[function(require,module,exports){(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create;var Ctor=function(){};var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.8.3";var optimizeCb=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}};var cb=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return optimizeCb(value,context,argCount);if(_.isObject(value))return _.matcher(value);return _.property(value)};_.iteratee=function(value,context){return cb(value,context,Infinity)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!undefinedOnly||obj[key]===void 0)obj[key]=source[key]}}return obj}};var baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;Ctor.prototype=null;return result};var property=function(key){return function(obj){return obj==null?void 0:obj[key]}};var MAX_ARRAY_INDEX=Math.pow(2,53)-1;var getLength=property("length");var isArrayLike=function(collection){var length=getLength(collection);return typeof length=="number"&&length>=0&&length<=MAX_ARRAY_INDEX};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj)}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj)}}return obj};_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results};function createReduce(dir){function iterator(obj,iteratee,memo,keys,index,length){for(;index>=0&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;if(arguments.length<3){memo=obj[keys?keys[index]:index];index+=dir}return iterator(obj,iteratee,memo,keys,index,length)}}_.reduce=_.foldl=_.inject=createReduce(1);_.reduceRight=_.foldr=createReduce(-1);_.find=_.detect=function(obj,predicate,context){var key;if(isArrayLike(obj)){key=_.findIndex(obj,predicate,context)}else{key=_.findKey(obj,predicate,context)}if(key!==void 0&&key!==-1)return obj[key]};_.filter=_.select=function(obj,predicate,context){var results=[];predicate=cb(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value)});return results};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)};_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false}return true};_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true}return false};_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){if(!isArrayLike(obj))obj=_.values(obj);if(typeof fromIndex!="number"||guard)fromIndex=0;return _.indexOf(obj,item,fromIndex)>=0};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return func==null?func:func.apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,_.property(key))};_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))};_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed}})}return result};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed}})}return result};_.shuffle=function(obj){var set=isArrayLike(obj)?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index]}return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};_.sortBy=function(obj,iteratee,context){iteratee=cb(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=cb(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)});return result}};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value]});_.indexBy=group(function(result,value,key){result[key]=value});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1});_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(isArrayLike(obj))return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:_.keys(obj).length};_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)});return[pass,fail]};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];return _.initial(array,array.length-n)};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return _.rest(array,Math.max(0,array.length-n))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){var output=[],idx=0;for(var i=startIndex||0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){if(!shallow)value=flatten(value,shallow,strict);var j=0,len=value.length;output.length+=len;while(j<len){output[idx++]=value[j++]}}else if(!strict){output[idx++]=value}}return output};_.flatten=function(array,shallow){return flatten(array,shallow,false)};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false}if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted){if(!i||seen!==computed)result.push(value);seen=computed}else if(iteratee){if(!_.contains(seen,computed)){seen.push(computed);result.push(value)}}else if(!_.contains(result,value)){result.push(value)}}return result};_.union=function(){return _.uniq(flatten(arguments,true,true))};_.intersection=function(array){var result=[];var argsLength=arguments.length;for(var i=0,length=getLength(array);i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break}if(j===argsLength)result.push(item)}return result};_.difference=function(array){var rest=flatten(arguments,true,true,1);return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){return _.unzip(arguments)};_.unzip=function(array){var length=array&&_.max(array,getLength).length||0;var result=Array(length);for(var index=0;index<length;index++){result[index]=_.pluck(array,index)}return result};_.object=function(list,values){var result={};for(var i=0,length=getLength(list);i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=getLength(array);var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index],index,array))return index}return-1}}_.findIndex=createPredicateIndexFinder(1);_.findLastIndex=createPredicateIndexFinder(-1);_.sortedIndex=function(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=getLength(array);while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid}return low};function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if(typeof idx=="number"){if(dir>0){i=idx>=0?idx:Math.max(idx+length,i)}else{length=idx>=0?Math.min(idx+1,length):idx+length+1}}else if(sortedIndex&&idx&&length){idx=sortedIndex(array,item);return array[idx]===item?idx:-1}if(item!==item){idx=predicateFind(slice.call(array,i,length),_.isNaN);return idx>=0?idx+i:-1}for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir){if(array[idx]===item)return idx}return-1}}_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex);_.lastIndexOf=createIndexFinder(-1,_.findLastIndex);_.range=function(start,stop,step){if(stop==null){stop=start||0;start=0}step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(_.isObject(result))return result;return self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2);var bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound};_.partial=function(func){var boundArgs=slice.call(arguments,1);var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++){args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i]}while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj)}return obj};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=""+(hasher?hasher.apply(this,arguments):key);if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address]};memoize.cache={};return memoize};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=_.partial(_.delay,_,1);_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}};_.wrap=function(func,wrapper){return _.partial(wrapper,func)};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments)}if(times<=1)func=null;return memo}};_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString");var nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=_.isFunction(constructor)&&constructor.prototype||ObjProto;var prop="constructor";if(_.has(obj,prop)&&!_.contains(keys,prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)){keys.push(prop)}}}_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=_.keys(obj),length=keys.length,results={},currentKey;for(var index=0;index<length;index++){currentKey=keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=createAssigner(_.allKeys);_.extendOwn=_.assign=createAssigner(_.keys);_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);var keys=_.keys(obj),key;for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(predicate(obj[key],key,obj))return key}};_.pick=function(object,oiteratee,context){var result={},obj=object,iteratee,keys;if(obj==null)return result;if(_.isFunction(oiteratee)){keys=_.allKeys(obj);iteratee=optimizeCb(oiteratee,context)}else{keys=flatten(arguments,false,false,1);iteratee=function(value,key,obj){return key in obj};obj=Object(obj)}for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value}return result};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee)}else{var keys=_.map(flatten(arguments,false,false,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)};_.defaults=createAssigner(_.allKeys,true);_.create=function(prototype,props){var result=baseCreate(prototype);if(props)_.extendOwn(result,props);return result};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(object==null)return!length;var obj=Object(object);for(var i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false}return true};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var areArrays=className==="[object Array]";if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var keys=_.keys(a),key;length=keys.length;if(_.keys(b).length!==length)return false;while(length--){key=keys[length];if(!(_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true};_.isEqual=function(a,b){return eq(a,b)};_.isEmpty=function(obj){if(obj==null)return true;if(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj)))return obj.length===0;return _.keys(obj).length===0};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==="[object Array]"};_.isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){_.isFunction=function(obj){return typeof obj=="function"||false}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.constant=function(value){return function(){return value}};_.noop=function(){};_.property=property;_.propertyOf=function(obj){return obj==null?function(){}:function(key){return obj[key]}};_.matcher=_.matches=function(attrs){attrs=_.extendOwn({},attrs);return function(obj){return _.isMatch(obj,attrs)}};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match]};var source="(?:"+_.keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string==null?"":""+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property,fallback){var value=object==null?void 0:object[property];if(value===void 0){value=fallback}return _.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}else if(evaluate){source+="';\n"+evaluate+"\n__p+='"}return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}var template=function(data){return render.call(this,data,_)};var argument=settings.variable||"obj";template.source="function("+argument+"){\n"+source+"}";return template};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result(this,func.apply(_,args))}})};_.mixin(_);_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==="shift"||name==="splice")&&obj.length===0)delete obj[0];return result(this,obj)}});_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}});_.prototype.value=function(){return this._wrapped};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return _})}}).call(this)},{}],701:[function(require,module,exports){var DEPS=require("./Dependencies").ALL;function create(cs,reflow){var out={};copy(cs,out);out.add=[];out.mod=[];out.rem=[];out.reflow=reflow;return out}function copy(a,b){b.stamp=a?a.stamp:0;b.sort=a?a.sort:null;b.facet=a?a.facet:null;b.trans=a?a.trans:null;b.dirty=a?a.dirty:[];b.request=a?a.request:null;for(var d,i=0,n=DEPS.length;i<n;++i){b[d=DEPS[i]]=a?a[d]:{}}}module.exports={create:create,copy:copy}},{"./Dependencies":704}],702:[function(require,module,exports){var log=require("vega-logging"),Tuple=require("./Tuple"),Base=require("./Node").prototype,ChangeSet=require("./ChangeSet");function Collector(graph){Base.init.call(this,graph);this._data=[];this.router(true).collector(true)}var prototype=Collector.prototype=Object.create(Base);prototype.constructor=Collector;prototype.data=function(){return this._data};prototype.evaluate=function(input){log.debug(input,["collecting"]);var output=ChangeSet.create(input);if(input.rem.length){this._data=Tuple.idFilter(this._data,input.rem);output.rem=input.rem.slice(0)}if(input.add.length){this._data=this._data.concat(input.add);output.add=input.add.slice(0)}if(input.mod.length){output.mod=input.mod.slice(0)}if(input.sort){this._data.sort(input.sort)}if(input.reflow){output.mod=output.mod.concat(Tuple.idFilter(this._data,output.add,output.mod,output.rem));output.reflow=false}return output};module.exports=Collector},{"./ChangeSet":701,"./Node":707,"./Tuple":709,"vega-logging":776}],703:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),ChangeSet=require("./ChangeSet"),Collector=require("./Collector"),Tuple=require("./Tuple"),Node=require("./Node");function DataSource(graph,name,facet){this._graph=graph;this._name=name;this._data=[];this._source=null;this._facet=facet;this._input=ChangeSet.create();this._output=null;this._indexes={};this._indexFields=[];this._inputNode=null;this._outputNode=null;this._pipeline=null;this._collector=null;this._mutates=false}var prototype=DataSource.prototype;prototype.name=function(name){if(!arguments.length)return this._name;return this._name=name,this};prototype.source=function(src){if(!arguments.length)return this._source;return this._source=this._graph.data(src)};prototype.insert=function(tuples){this._input.add=this._input.add.concat(tuples.map(Tuple.ingest));return this};prototype.remove=function(where){var remove=this._data.filter(where);this._input.rem=this._input.rem.concat(remove);return this};prototype.update=function(where,field,func){var mod=this._input.mod,ids=Tuple.idMap(mod);this._input.fields[field]=1;this._data.filter(where).forEach(function(x){var prev=x[field],next=func(x);if(prev!==next){Tuple.set(x,field,next);if(ids[x._id]!==1){mod.push(x);ids[x._id]=1}}});return this};prototype.values=function(data){if(!arguments.length)return this._collector.data();this._input.rem=this._data.slice();if(data){this.insert(data)}return this};prototype.mutates=function(m){if(!arguments.length)return this._mutates;this._mutates=this._mutates||m;return this};prototype.last=function(){return this._output};prototype.fire=function(input){if(input)this._input=input;this._graph.propagate(this._input,this._pipeline[0]);return this};prototype.pipeline=function(pipeline){if(!arguments.length)return this._pipeline;var graph=this._graph,status;pipeline.unshift(this._inputNode=DataSourceInput(this));status=graph.preprocess(pipeline);if(status.router){pipeline.push(status.collector=new Collector(graph))}pipeline.push(this._outputNode=DataSourceOutput(this));this._collector=status.collector;this._mutates=!!status.mutates;graph.connect(this._pipeline=pipeline);return this};prototype.synchronize=function(){this._graph.synchronize(this._pipeline);return this};prototype.getIndex=function(field){var data=this.values(),indexes=this._indexes,fields=this._indexFields,f=dl.$(field),index,i,len,value;if(!indexes[field]){indexes[field]=index={};fields.push(field);for(i=0,len=data.length;i<len;++i){value=f(data[i]);index[value]=(index[value]||0)+1;Tuple.prev_init(data[i])}}return indexes[field]};prototype.listener=function(){return DataSourceListener(this).addListener(this._inputNode)};prototype.addListener=function(l){if(l instanceof DataSource){this._collector.addListener(l.listener())}else{this._outputNode.addListener(l)}return this};prototype.removeListener=function(l){this._outputNode.removeListener(l)};prototype.listeners=function(ds){return(ds?this._collector:this._outputNode).listeners()};function DataSourceInput(ds){var input=new Node(ds._graph).router(true).collector(true);input.data=function(){return ds._data};input.evaluate=function(input){log.debug(input,["input",ds._name]);var delta=ds._input,out=ChangeSet.create(input),f;for(f in delta.fields){out.fields[f]=1}if(delta.rem.length){ds._data=Tuple.idFilter(ds._data,delta.rem)}if(delta.add.length){ds._data=ds._data.concat(delta.add)}if(delta.sort){ds._data.sort(delta.sort)}if(input.reflow){delta.mod=delta.mod.concat(Tuple.idFilter(ds._data,delta.add,delta.mod,delta.rem))}ds._input=ChangeSet.create();out.add=delta.add;out.mod=delta.mod;out.rem=delta.rem;out.facet=ds._facet;return out};return input}function DataSourceOutput(ds){var output=new Node(ds._graph).router(true).reflows(true).collector(true);function updateIndices(pulse){var fields=ds._indexFields,i,j,f,key,index,value;for(i=0;i<fields.length;++i){key=fields[i];index=ds._indexes[key];f=dl.$(key);for(j=0;j<pulse.add.length;++j){value=f(pulse.add[j]);Tuple.prev_init(pulse.add[j]);index[value]=(index[value]||0)+1}for(j=0;j<pulse.rem.length;++j){value=f(pulse.rem[j]);index[value]=(index[value]||0)-1}for(j=0;j<pulse.mod.length;++j){value=f(pulse.mod[j]._prev);index[value]=(index[value]||0)-1;value=f(pulse.mod[j]);index[value]=(index[value]||0)+1}}}output.data=function(){return ds._collector?ds._collector.data():ds._data};output.evaluate=function(input){log.debug(input,["output",ds._name]);updateIndices(input);var out=ChangeSet.create(input,true);if(ds._facet){ds._facet.values=ds.values();input.facet=null}ds._output=input;out.data[ds._name]=1;return out};return output}function DataSourceListener(ds){var l=new Node(ds._graph).router(true);l.evaluate=function(input){if(ds.mutates()){var map=ds._srcMap||(ds._srcMap={}),output=ChangeSet.create(input);output.add=input.add.map(function(t){return map[t._id]=Tuple.derive(t)});output.mod=input.mod.map(function(t){return Tuple.rederive(t,map[t._id])});output.rem=input.rem.map(function(t){var o=map[t._id];return map[t._id]=null,o});return ds._input=output}else{return ds._input=input}};return l}module.exports=DataSource},{"./ChangeSet":701,"./Collector":702,"./Node":707,"./Tuple":709,datalib:406,"vega-logging":776}],704:[function(require,module,exports){var deps=module.exports={ALL:["data","fields","scales","signals"]};deps.ALL.forEach(function(k){deps[k.toUpperCase()]=k})},{}],705:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),Heap=require("./Heap"),ChangeSet=require("./ChangeSet"),DataSource=require("./DataSource"),Collector=require("./Collector"),Tuple=require("./Tuple"),Signal=require("./Signal"),Deps=require("./Dependencies");function Graph(){}var prototype=Graph.prototype;prototype.init=function(){this._stamp=0;this._rank=0;this._data={};this._signals={};this._requestedIndexes={};this.doNotPropagate={}};prototype.rank=function(){return++this._rank};prototype.values=function(type,names,hash){var data=type===Deps.SIGNALS?this._signals:this._data,n=names!==undefined?names:dl.keys(data),vals,i;if(Array.isArray(n)){vals=hash||{};for(i=0;i<n.length;++i){vals[n[i]]=data[n[i]].values()}return vals}else{return data[n].values()}};prototype.dataValues=function(names){return this.values(Deps.DATA,names)};prototype.signalValues=function(names){return this.values(Deps.SIGNALS,names)};prototype.data=function(name,pipeline,facet){var db=this._data;if(!arguments.length){var all=[],key;for(key in db){all.push(db[key])}return all}else if(arguments.length===1){return db[name]}else{return db[name]=new DataSource(this,name,facet).pipeline(pipeline)}};prototype.signal=function(name,init){if(arguments.length===1){var m=this;return Array.isArray(name)?name.map(function(n){return m._signals[n]}):this._signals[name]}else{return this._signals[name]=new Signal(this,name,init)}};prototype.signalRef=function(ref){if(!Array.isArray(ref)){ref=dl.field(ref)}var value=this.signal(ref[0]).value();if(ref.length>1){for(var i=1,n=ref.length;i<n;++i){value=value[ref[i]]}}return value};prototype.requestIndex=function(data,field){var ri=this._requestedIndexes,reg=ri[data]||(ri[data]={});return reg[field]=true,this};prototype.buildIndexes=function(){var ri=this._requestedIndexes,data=dl.keys(ri),i,len,j,jlen,d,src,fields,f;for(i=0,len=data.length;i<len;++i){src=this.data(d=data[i]);if(!src)throw Error("Data source "+dl.str(d)+" does not exist.");fields=dl.keys(ri[d]);for(j=0,jlen=fields.length;j<jlen;++j){if((f=fields[j])===null)continue;src.getIndex(f);ri[d][f]=null}}return this};prototype.propagate=function(pulse,node,stamp,skipSignals){var pulses={},listeners,next,nplse,tpls,ntpls,i,len,isSg;var pq=new Heap(function(a,b){return a._qrank-b._qrank});if(pulse.stamp)throw Error("Pulse already has a non-zero stamp.");pulse.stamp=stamp||++this._stamp;pulses[node._id]=pulse;pq.push(node.qrank(true));while(pq.size()>0){node=pq.peek();isSg=node instanceof Signal;pulse=pulses[node._id];if(node.rank()!==node.qrank()){pq.replace(node.qrank(true))}else{pq.pop();pulses[node._id]=null;listeners=node._listeners;if(!isSg||isSg&&!skipSignals){pulse=this.evaluate(pulse,node)}if(pulse!==this.doNotPropagate){if(!pulse.reflow&&node.reflows()){pulse=ChangeSet.create(pulse,true)}for(i=0,len=listeners.length;i<len;++i){next=listeners[i];if((nplse=pulses[next._id])!==undefined){if(nplse===null)throw Error("Already propagated to node.");if(nplse===pulse)continue;tpls=pulse.add.length||pulse.mod.length||pulse.rem.length;ntpls=nplse.add.length||nplse.mod.length||nplse.rem.length;if(tpls&&ntpls)throw Error("Multiple changeset pulses to same node");pulses[next._id]=tpls?pulse:nplse;pulses[next._id].reflow=pulse.reflow||nplse.reflow}else{pq.push(next.qrank(true));pulses[next._id]=pulse}}}}}return this.done(pulse)};prototype.done=function(pulse){log.debug(pulse,["bookkeeping"]);for(var d in pulse.data){this.data(d).synchronize()}return this};prototype.preprocess=function(branch){var graph=this,mutates=0,node,router,collector,collects;for(var i=0;i<branch.length;++i){node=branch[i];if(node.batch()&&!node._collector){if(router||!collector){node=new Collector(graph);branch.splice(i,0,node);router=false}else{node._collector=collector}}if(collects=node.collector())collector=node;router=router||node.router()&&!collects;mutates=mutates||node.mutates();if(node.produces()){branch.splice(i+1,0,new Collector(graph));router=false}}return{router:router,collector:collector,mutates:mutates}};prototype.connect=function(branch){var collector,node,data,signals,i,n,j,m,x,y;for(i=0,n=branch.length;i<n;++i){node=branch[i];if(node.collector())collector=node;data=node.dependency(Deps.DATA);for(j=0,m=data.length;j<m;++j){if(!(x=this.data(y=data[j]))){throw new Error("Unknown data source "+dl.str(y))}x.addListener(collector)}signals=node.dependency(Deps.SIGNALS);for(j=0,m=signals.length;j<m;++j){if(!(x=this.signal(y=signals[j]))){throw new Error("Unknown signal "+dl.str(y))}x.addListener(collector)}if(i>0)branch[i-1].addListener(node)}return branch};prototype.disconnect=function(branch){var collector,node,data,signals,i,n,j,m;for(i=0,n=branch.length;i<n;++i){node=branch[i];if(node.collector())collector=node;data=node.dependency(Deps.DATA);for(j=0,m=data.length;j<m;++j){this.data(data[j]).removeListener(collector)}signals=node.dependency(Deps.SIGNALS);for(j=0,m=signals.length;j<m;++j){this.signal(signals[j]).removeListener(collector)}node.disconnect()}return branch};prototype.synchronize=function(branch){var ids={},node,data,i,n,j,m,d,id;for(i=0,n=branch.length;i<n;++i){node=branch[i];if(!node.collector())continue;for(j=0,data=node.data(),m=data.length;j<m;++j){id=(d=data[j])._id;if(ids[id])continue;Tuple.prev_update(d);ids[id]=1}}return this};prototype.reevaluate=function(pulse,node){var reflowed=pulse.reflow&&node.last()>=pulse.stamp,run=node.router()||pulse.add.length||pulse.rem.length;return run||!reflowed||node.reevaluate(pulse)};prototype.evaluate=function(pulse,node){if(!this.reevaluate(pulse,node))return pulse;pulse=node.evaluate(pulse);node.last(pulse.stamp);return pulse};module.exports=Graph},{"./ChangeSet":701,"./Collector":702,"./DataSource":703,"./Dependencies":704,"./Heap":706,"./Signal":708,"./Tuple":709,datalib:406,"vega-logging":776}],706:[function(require,module,exports){function Heap(comparator){this.cmp=comparator;this.nodes=[]}var prototype=Heap.prototype;prototype.size=function(){return this.nodes.length};prototype.clear=function(){return this.nodes=[],this};prototype.peek=function(){return this.nodes[0]};prototype.push=function(x){var array=this.nodes;array.push(x);return _siftdown(array,0,array.length-1,this.cmp)};prototype.pop=function(){var array=this.nodes,last=array.pop(),item;if(array.length){item=array[0];array[0]=last;_siftup(array,0,this.cmp)}else{item=last}return item};prototype.replace=function(item){var array=this.nodes,retval=array[0];array[0]=item;_siftup(array,0,this.cmp);return retval};prototype.pushpop=function(item){var array=this.nodes,ref=array[0];if(array.length&&this.cmp(ref,item)<0){array[0]=item;item=ref;_siftup(array,0,this.cmp)}return item};function _siftdown(array,start,idx,cmp){var item,parent,pidx;item=array[idx];while(idx>start){pidx=idx-1>>1;parent=array[pidx];if(cmp(item,parent)<0){array[idx]=parent;idx=pidx;continue}break}return array[idx]=item}function _siftup(array,idx,cmp){var start=idx,end=array.length,item=array[idx],cidx=2*idx+1,ridx;while(cidx<end){ridx=cidx+1;if(ridx<end&&cmp(array[cidx],array[ridx])>=0){cidx=ridx}array[idx]=array[cidx];idx=cidx;cidx=2*idx+1}array[idx]=item;return _siftdown(array,start,idx,cmp)}module.exports=Heap},{}],707:[function(require,module,exports){var DEPS=require("./Dependencies").ALL,nodeID=0;function Node(graph){if(graph)this.init(graph)}var Flags=Node.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32};var prototype=Node.prototype;prototype.init=function(graph){this._id=++nodeID;this._graph=graph;this._rank=graph.rank();this._qrank=null;this._stamp=0;this._listeners=[];this._listeners._ids={};this._deps={};for(var i=0,n=DEPS.length;i<n;++i){this._deps[DEPS[i]]=[]}this._flags=0;return this};prototype.rank=function(){return this._rank};prototype.rerank=function(){var g=this._graph,q=[this],cur;while(q.length){cur=q.shift();cur._rank=g.rank();q.unshift.apply(q,cur.listeners())}return this};prototype.qrank=function(){if(!arguments.length)return this._qrank;return this._qrank=this._rank,this};prototype.last=function(stamp){if(!arguments.length)return this._stamp;return this._stamp=stamp,this};prototype._setf=function(v,b){if(b){this._flags|=v}else{this._flags&=~v}return this};prototype.router=function(state){if(!arguments.length)return this._flags&Flags.Router;return this._setf(Flags.Router,state)};prototype.collector=function(state){if(!arguments.length)return this._flags&Flags.Collector;return this._setf(Flags.Collector,state)};prototype.produces=function(state){if(!arguments.length)return this._flags&Flags.Produces;return this._setf(Flags.Produces,state)};prototype.mutates=function(state){if(!arguments.length)return this._flags&Flags.Mutates;return this._setf(Flags.Mutates,state)};prototype.reflows=function(state){if(!arguments.length)return this._flags&Flags.Reflows;return this._setf(Flags.Reflows,state)};prototype.batch=function(state){if(!arguments.length)return this._flags&Flags.Batch;return this._setf(Flags.Batch,state)};prototype.dependency=function(type,deps){var d=this._deps[type],n=d._names||(d._names={});if(arguments.length===1){return d}if(deps===null){d.splice(0,d.length);d._names={}}else if(!Array.isArray(deps)){if(n[deps])return this;d.push(deps);n[deps]=1}else{for(var i=0,len=deps.length,dep;i<len;++i){dep=deps[i];if(n[dep])continue;d.push(dep);n[dep]=1}}return this};prototype.listeners=function(){return this._listeners};prototype.addListener=function(l){if(!(l instanceof Node)){throw Error("Listener is not a Node")}if(this._listeners._ids[l._id])return this;this._listeners.push(l);this._listeners._ids[l._id]=1;if(this._rank>l._rank){l.rerank()}return this};prototype.removeListener=function(l){if(!this._listeners._ids[l._id])return false;var idx=this._listeners.indexOf(l),b=idx>=0;if(b){this._listeners.splice(idx,1);this._listeners._ids[l._id]=null}return b};prototype.disconnect=function(){this._listeners=[];this._listeners._ids={}};prototype.evaluate=function(pulse){return pulse};prototype.reevaluate=function(pulse){var prop,dep,i,n,j,m;for(i=0,n=DEPS.length;i<n;++i){prop=DEPS[i];dep=this._deps[prop];for(j=0,m=dep.length;j<m;++j){if(pulse[prop][dep[j]])return true}}return false};Node.reset=function(){nodeID=0};module.exports=Node},{"./Dependencies":704}],708:[function(require,module,exports){var ChangeSet=require("./ChangeSet"),Node=require("./Node"),Base=Node.prototype;function Signal(graph,name,initialValue){Base.init.call(this,graph);this._name=name;this._value=initialValue;this._verbose=false;this._handlers=[];return this}var prototype=Signal.prototype=Object.create(Base);prototype.constructor=Signal;prototype.name=function(){return this._name};prototype.value=function(val){if(!arguments.length)return this._value;return this._value=val,this};prototype.values=prototype.value;prototype.verbose=function(v){if(!arguments.length)return this._verbose;return this._verbose=!!v,this};prototype.evaluate=function(input){return input.signals[this._name]?input:this._graph.doNotPropagate};prototype.fire=function(cs){if(!cs)cs=ChangeSet.create(null,true);cs.signals[this._name]=1;this._graph.propagate(cs,this)};prototype.on=function(handler){var signal=this,node=new Node(this._graph);node.evaluate=function(input){handler(signal.name(),signal.value());return input};this._handlers.push({handler:handler,node:node});return this.addListener(node)};prototype.off=function(handler){var h=this._handlers,i,x;for(i=h.length;--i>=0;){if(!handler||h[i].handler===handler){x=h.splice(i,1)[0];this.removeListener(x.node)}}return this};module.exports=Signal},{"./ChangeSet":701,"./Node":707}],709:[function(require,module,exports){var tupleID=0;function ingest(datum){datum=datum===Object(datum)?datum:{data:datum};datum._id=++tupleID;if(datum._prev)datum._prev=null;return datum}function idMap(a,ids){ids=ids||{};for(var i=0,n=a.length;i<n;++i){ids[a[i]._id]=1}return ids}function copy(t,c){c=c||{};for(var k in t){if(k!=="_prev"&&k!=="_id")c[k]=t[k]}return c}module.exports={ingest:ingest,idMap:idMap,derive:function(d){return ingest(copy(d))},rederive:function(d,t){return copy(d,t)},set:function(t,k,v){return t[k]===v?0:(t[k]=v,1)},prev:function(t){return t._prev||t},prev_init:function(t){if(!t._prev){t._prev={_id:t._id}}},prev_update:function(t){var p=t._prev,k,v;if(p)for(k in t){if(k!=="_prev"&&k!=="_id"){p[k]=(v=t[k])instanceof Object&&v._prev?v._prev:v}}},reset:function(){tupleID=0},idFilter:function(data){var ids={};for(var i=arguments.length;--i>0;){idMap(arguments[i],ids)}return data.filter(function(x){return!ids[x._id]})}}},{}],710:[function(require,module,exports){module.exports={ChangeSet:require("./ChangeSet"),Collector:require("./Collector"),DataSource:require("./DataSource"),Dependencies:require("./Dependencies"),Graph:require("./Graph"),Node:require("./Node"),Signal:require("./Signal"),Tuple:require("./Tuple"),debug:require("vega-logging").debug}},{"./ChangeSet":701,"./Collector":702,"./DataSource":703,"./Dependencies":704,"./Graph":705,"./Node":707,"./Signal":708,"./Tuple":709,"vega-logging":776}],711:[function(require,module,exports){module.exports=function(){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);function peg$parse(input){var options=arguments.length>1?arguments[1]:{},parser=this,peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=",",peg$c1={type:"literal",value:",",description:'","'},peg$c2=function(o,m){return[o].concat(m)},peg$c3=function(o){return[o]},peg$c4="[",peg$c5={type:"literal",value:"[",description:'"["'},peg$c6="]",peg$c7={type:"literal",value:"]",description:'"]"'},peg$c8=">",peg$c9={type:"literal",value:">",description:'">"'},peg$c10=function(f1,f2,o){return{start:f1,middle:o,end:f2,str:"["+f1.str+", "+f2.str+"] > "+o.str}},peg$c11=function(s,f){s.filters=f;s.str+=f.map(function(x){return"["+x+"]"}).join("");return s},peg$c12=function(s){return s},peg$c13="(",peg$c14={type:"literal",value:"(",description:'"("'},peg$c15=")",peg$c16={type:"literal",value:")",description:'")"'},peg$c17=function(m){return{stream:m,str:"("+m.map(function(m){return m.str}).join(", ")+")"}},peg$c18="@",peg$c19={type:"literal",value:"@",description:'"@"'},peg$c20=":",peg$c21={type:"literal",value:":",description:'":"'},peg$c22=function(n,e){return{event:e,name:n,str:"@"+n+":"+e}},peg$c23=function(m,e){return{event:e,mark:m,str:m+":"+e}},peg$c24=function(t,e){return{event:e,target:t,str:t+":"+e}},peg$c25=function(e){return{event:e,str:e}},peg$c26=function(s){return{signal:s,str:s}},peg$c27="rect",peg$c28={type:"literal",value:"rect",description:'"rect"'},peg$c29="symbol",peg$c30={type:"literal",value:"symbol",description:'"symbol"'},peg$c31="path",peg$c32={type:"literal",value:"path",description:'"path"'},peg$c33="arc",peg$c34={type:"literal",value:"arc",description:'"arc"'},peg$c35="area",peg$c36={type:"literal",value:"area",description:'"area"'},peg$c37="line",peg$c38={type:"literal",value:"line",description:'"line"'},peg$c39="rule",peg$c40={type:"literal",value:"rule",description:'"rule"'},peg$c41="image",peg$c42={type:"literal",value:"image",description:'"image"'},peg$c43="text",peg$c44={type:"literal",value:"text",description:'"text"'},peg$c45="group",peg$c46={type:"literal",value:"group",description:'"group"'},peg$c47="mousedown",peg$c48={type:"literal",value:"mousedown",description:'"mousedown"'},peg$c49="mouseup",peg$c50={type:"literal",value:"mouseup",description:'"mouseup"'},peg$c51="click",peg$c52={type:"literal",value:"click",description:'"click"'},peg$c53="dblclick",peg$c54={type:"literal",value:"dblclick",description:'"dblclick"'},peg$c55="wheel",peg$c56={type:"literal",value:"wheel",description:'"wheel"'},peg$c57="keydown",peg$c58={type:"literal",value:"keydown",description:'"keydown"'},peg$c59="keypress",peg$c60={type:"literal",value:"keypress",description:'"keypress"'},peg$c61="keyup",peg$c62={type:"literal",value:"keyup",description:'"keyup"'},peg$c63="mousewheel",peg$c64={type:"literal",value:"mousewheel",description:'"mousewheel"'},peg$c65="mousemove",peg$c66={type:"literal",value:"mousemove",description:'"mousemove"'},peg$c67="mouseout",peg$c68={type:"literal",value:"mouseout",description:'"mouseout"'},peg$c69="mouseover",peg$c70={type:"literal",value:"mouseover",description:'"mouseover"'},peg$c71="mouseenter",peg$c72={type:"literal",value:"mouseenter",description:'"mouseenter"'},peg$c73="touchstart",peg$c74={type:"literal",value:"touchstart",description:'"touchstart"'},peg$c75="touchmove",peg$c76={type:"literal",value:"touchmove",description:'"touchmove"'},peg$c77="touchend",peg$c78={type:"literal",value:"touchend",description:'"touchend"'},peg$c79="dragenter",peg$c80={type:"literal",value:"dragenter",description:'"dragenter"'},peg$c81="dragover",peg$c82={type:"literal",value:"dragover",description:'"dragover"'},peg$c83="dragleave",peg$c84={type:"literal",value:"dragleave",description:'"dragleave"'},peg$c85=function(e){return e},peg$c86=/^[a-zA-Z0-9_\-]/,peg$c87={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},peg$c88=function(n){return n.join("")},peg$c89=/^[a-zA-Z0-9\-_  #.>+~[\]=|\^$*]/,peg$c90={type:"class",value:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]",description:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]"},peg$c91=function(c){return c.join("")},peg$c92=/^['"a-zA-Z0-9_().><=! \t-&|~]/,peg$c93={type:"class",value:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]",description:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]"},peg$c94=function(v){return v.join("")},peg$c95=/^[ \t\r\n]/,peg$c96={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:false}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function error(message){throw peg$buildException(message,null,input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p,ch;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column,seenCR:details.seenCR};while(p<pos){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++}details.column=1;details.seenCR=false}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,found,location){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){if(a.description<b.description){return-1}else if(a.description>b.description){return 1}else{return 0}});while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1)}else{i++}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return"\\x"+hex(ch)}).replace(/[\u0100-\u0FFF]/g,function(ch){return"\\u0"+hex(ch)}).replace(/[\u1000-\uFFFF]/g,function(ch){return"\\u"+hex(ch)})}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}if(expected!==null){cleanupExpected(expected)}return new peg$SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0;s0=peg$parsemerged();return s0}function peg$parsemerged(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseordered();if(s1!==peg$FAILED){s2=peg$parsesep();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s3=peg$c0;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}if(s3!==peg$FAILED){s4=peg$parsesep();if(s4!==peg$FAILED){s5=peg$parsemerged();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c2(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseordered();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1)}s0=s1}return s0}function peg$parseordered(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===91){s1=peg$c4;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5)}}if(s1!==peg$FAILED){s2=peg$parsesep();if(s2!==peg$FAILED){s3=peg$parsefiltered();if(s3!==peg$FAILED){s4=peg$parsesep();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s5=peg$c0;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}if(s5!==peg$FAILED){s6=peg$parsesep();if(s6!==peg$FAILED){s7=peg$parsefiltered();if(s7!==peg$FAILED){s8=peg$parsesep();if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s9=peg$c6;peg$currPos++}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s9!==peg$FAILED){s10=peg$parsesep();if(s10!==peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s11=peg$c8;peg$currPos++}else{s11=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c9)}}if(s11!==peg$FAILED){s12=peg$parsesep();if(s12!==peg$FAILED){s13=peg$parseordered();if(s13!==peg$FAILED){peg$savedPos=s0;s1=peg$c10(s3,s7,s13);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parsefiltered()}return s0}function peg$parsefiltered(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parsestream();if(s1!==peg$FAILED){s2=[];s3=peg$parsefilter();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsefilter()}}else{s2=peg$FAILED}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c11(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsestream();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c12(s1)}s0=s1}return s0}function peg$parsestream(){var s0,s1,s2,s3,s4;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c13;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s1!==peg$FAILED){s2=peg$parsemerged();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s3=peg$c15;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c16)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c17(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===64){s1=peg$c18;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c19)}}if(s1!==peg$FAILED){s2=peg$parsename();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c20;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21)}}if(s3!==peg$FAILED){s4=peg$parseeventType();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c22(s2,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsemarkType();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s2=peg$c20;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21)}}if(s2!==peg$FAILED){s3=peg$parseeventType();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c23(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsecss();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s2=peg$c20;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21)}}if(s2!==peg$FAILED){s3=peg$parseeventType();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c24(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseeventType();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c25(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsename();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c26(s1)}s0=s1}}}}}return s0}function peg$parsemarkType(){var s0;if(input.substr(peg$currPos,4)===peg$c27){s0=peg$c27;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,6)===peg$c29){s0=peg$c29;peg$currPos+=6}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c31){s0=peg$c31;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c32)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,3)===peg$c33){s0=peg$c33;peg$currPos+=3}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c34)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c35){s0=peg$c35;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c36)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c37){s0=peg$c37;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c38)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c39){s0=peg$c39;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c40)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,5)===peg$c41){s0=peg$c41;peg$currPos+=5}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c42)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c43){s0=peg$c43;peg$currPos+=4}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c44)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,5)===peg$c45){s0=peg$c45;peg$currPos+=5}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c46)}}}}}}}}}}}return s0}function peg$parseeventType(){var s0;if(input.substr(peg$currPos,9)===peg$c47){s0=peg$c47;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,7)===peg$c49){s0=peg$c49;peg$currPos+=7}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,5)===peg$c51){s0=peg$c51;peg$currPos+=5}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,8)===peg$c53){s0=peg$c53;peg$currPos+=8}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c54)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,5)===peg$c55){s0=peg$c55;peg$currPos+=5}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c56)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,7)===peg$c57){s0=peg$c57;peg$currPos+=7}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c58)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,8)===peg$c59){s0=peg$c59;peg$currPos+=8}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c60)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,5)===peg$c61){s0=peg$c61;peg$currPos+=5}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c62)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,10)===peg$c63){s0=peg$c63;peg$currPos+=10}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c64)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,9)===peg$c65){s0=peg$c65;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c66)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,8)===peg$c67){s0=peg$c67;peg$currPos+=8}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c68)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,9)===peg$c69){s0=peg$c69;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,10)===peg$c71){s0=peg$c71;peg$currPos+=10}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c72)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,10)===peg$c73){s0=peg$c73;peg$currPos+=10}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c74)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,9)===peg$c75){s0=peg$c75;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,8)===peg$c77){s0=peg$c77;peg$currPos+=8}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,9)===peg$c79){s0=peg$c79;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,8)===peg$c81){s0=peg$c81;peg$currPos+=8}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c82)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,9)===peg$c83){s0=peg$c83;peg$currPos+=9}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c84)}}}}}}}}}}}}}}}}}}}}return s0}function peg$parsefilter(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===91){s1=peg$c4;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5)}}if(s1!==peg$FAILED){s2=peg$parseexpr();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s3=peg$c6;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c85(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsename(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c86.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c87)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c86.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c87)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c88(s1)}s0=s1;return s0}function peg$parsecss(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c89.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c90)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c89.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c90)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c91(s1)}s0=s1;return s0}function peg$parseexpr(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c92.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c93)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c92.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c93)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c94(s1)}s0=s1;return s0}function peg$parsesep(){var s0,s1;s0=[];if(peg$c95.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c96)}}while(s1!==peg$FAILED){s0.push(s1);if(peg$c95.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c96)}}}return s0}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"})}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}()},{}],712:[function(require,module,exports){function toMap(list){var map={},i,n;for(i=0,n=list.length;i<n;++i)map[list[i]]=1;return map}function keys(object){var list=[],k;for(k in object)list.push(k);return list}module.exports=function(opt){opt=opt||{};var constants=opt.constants||require("./constants"),functions=(opt.functions||require("./functions"))(codegen),functionDefs=opt.functionDefs?opt.functionDefs(codegen):{},idWhiteList=opt.idWhiteList?toMap(opt.idWhiteList):null,idBlackList=opt.idBlackList?toMap(opt.idBlackList):null,memberDepth=0,FIELD_VAR=opt.fieldVar||"datum",GLOBAL_VAR=opt.globalVar||"signals",globals={},fields={},dataSources={};function codegen_wrap(ast){var retval={code:codegen(ast),globals:keys(globals),fields:keys(fields),dataSources:keys(dataSources),defs:functionDefs};globals={};fields={};dataSources={};return retval}var lookupGlobal=typeof GLOBAL_VAR==="function"?GLOBAL_VAR:function(id){return GLOBAL_VAR+'["'+id+'"]'};function codegen(ast){if(typeof ast==="string")return ast;var generator=CODEGEN_TYPES[ast.type];if(generator==null){throw new Error("Unsupported type: "+ast.type)}return generator(ast)}var CODEGEN_TYPES={Literal:function(n){return n.raw},Identifier:function(n){var id=n.name;if(memberDepth>0){return id}if(constants.hasOwnProperty(id)){return constants[id]}if(idWhiteList){if(idWhiteList.hasOwnProperty(id)){return id}else{globals[id]=1;return lookupGlobal(id)}}if(idBlackList&&idBlackList.hasOwnProperty(id)){throw new Error("Illegal identifier: "+id)}return id},Program:function(n){return n.body.map(codegen).join("\n")},MemberExpression:function(n){var d=!n.computed;var o=codegen(n.object);if(d)memberDepth+=1;var p=codegen(n.property);if(o===FIELD_VAR){fields[p]=1}if(d)memberDepth-=1;return o+(d?"."+p:"["+p+"]")},CallExpression:function(n){if(n.callee.type!=="Identifier"){throw new Error("Illegal callee type: "+n.callee.type)}var callee=n.callee.name;var args=n.arguments;var fn=functions.hasOwnProperty(callee)&&functions[callee];if(!fn)throw new Error("Unrecognized function: "+callee);return fn instanceof Function?fn(args,globals,fields,dataSources):fn+"("+args.map(codegen).join(",")+")"},ArrayExpression:function(n){return"["+n.elements.map(codegen).join(",")+"]"},BinaryExpression:function(n){return"("+codegen(n.left)+n.operator+codegen(n.right)+")"},UnaryExpression:function(n){return"("+n.operator+codegen(n.argument)+")"},ConditionalExpression:function(n){return"("+codegen(n.test)+"?"+codegen(n.consequent)+":"+codegen(n.alternate)+")"},LogicalExpression:function(n){return"("+codegen(n.left)+n.operator+codegen(n.right)+")"},ObjectExpression:function(n){return"{"+n.properties.map(codegen).join(",")+"}"},Property:function(n){memberDepth+=1;var k=codegen(n.key);memberDepth-=1;return k+":"+codegen(n.value)},ExpressionStatement:function(n){return codegen(n.expression)}};codegen_wrap.functions=functions;codegen_wrap.functionDefs=functionDefs;codegen_wrap.constants=constants;return codegen_wrap}},{"./constants":713,"./functions":714}],713:[function(require,module,exports){module.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},{}],714:[function(require,module,exports){module.exports=function(codegen){function fncall(name,args,cast,type){var obj=codegen(args[0]);if(cast){obj=cast+"("+obj+")";if(cast.lastIndexOf("new ",0)===0)obj="("+obj+")"}return obj+"."+name+(type<0?"":type===0?"()":"("+args.slice(1).map(codegen).join(",")+")")}function fn(name,cast,type){return function(args){return fncall(name,args,cast,type)}}var DATE="new Date",STRING="String",REGEXP="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(args){if(args.length<3)throw new Error("Missing arguments to clamp function.");if(args.length>3)throw new Error("Too many arguments to clamp function.");var a=args.map(codegen);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:DATE,date:fn("getDate",DATE,0),day:fn("getDay",DATE,0),year:fn("getFullYear",DATE,0),month:fn("getMonth",DATE,0),hours:fn("getHours",DATE,0),minutes:fn("getMinutes",DATE,0),seconds:fn("getSeconds",DATE,0),milliseconds:fn("getMilliseconds",DATE,0),time:fn("getTime",DATE,0),timezoneoffset:fn("getTimezoneOffset",DATE,0),utcdate:fn("getUTCDate",DATE,0),utcday:fn("getUTCDay",DATE,0),utcyear:fn("getUTCFullYear",DATE,0),utcmonth:fn("getUTCMonth",DATE,0),utchours:fn("getUTCHours",DATE,0),utcminutes:fn("getUTCMinutes",DATE,0),utcseconds:fn("getUTCSeconds",DATE,0),utcmilliseconds:fn("getUTCMilliseconds",DATE,0),length:fn("length",null,-1),indexof:fn("indexOf",null),lastindexof:fn("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:fn("toUpperCase",STRING,0),lower:fn("toLowerCase",STRING,0),slice:fn("slice",STRING),substring:fn("substring",STRING),replace:fn("replace",STRING),regexp:REGEXP,test:fn("test",REGEXP),if:function(args){if(args.length<3)throw new Error("Missing arguments to if function.");if(args.length>3)throw new Error("Too many arguments to if function.");var a=args.map(codegen);return a[0]+"?"+a[1]+":"+a[2]}}}},{}],715:[function(require,module,exports){var parser=require("./parser"),codegen=require("./codegen");var expr=module.exports={parse:function(input,opt){return parser.parse("("+input+")",opt)},code:function(opt){return codegen(opt)},compiler:function(args,opt){args=args.slice();var generator=codegen(opt),len=args.length,compile=function(str){var value=generator(expr.parse(str));args[len]='"use strict"; return ('+value.code+");";var fn=Function.apply(null,args);value.fn=args.length>8?function(){return fn.apply(value,arguments)}:function(a,b,c,d,e,f,g){return fn.call(value,a,b,c,d,e,f,g)};return value};compile.codegen=generator;return compile},functions:require("./functions"),constants:require("./constants")}},{"./codegen":712,"./constants":713,"./functions":714,"./parser":716}],716:[function(require,module,exports){module.exports=function(){"use strict";var Token,TokenName,Syntax,PropertyKind,Messages,Regex,source,strict,index,lineNumber,lineStart,length,lookahead,state,extra;Token={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};TokenName={};TokenName[Token.BooleanLiteral]="Boolean";TokenName[Token.EOF]="<end>";TokenName[Token.Identifier]="Identifier";TokenName[Token.Keyword]="Keyword";TokenName[Token.NullLiteral]="Null";TokenName[Token.NumericLiteral]="Numeric";TokenName[Token.Punctuator]="Punctuator";TokenName[Token.StringLiteral]="String";TokenName[Token.RegularExpression]="RegularExpression";Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"};PropertyKind={Data:1,Get:2,Set:4};Messages={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Regex={NonAsciiIdentifierStart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),NonAsciiIdentifierPart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};function assert(condition,message){if(!condition){throw new Error("ASSERT: "+message)}}function isDecimalDigit(ch){return ch>=48&&ch<=57}function isHexDigit(ch){return"0123456789abcdefABCDEF".indexOf(ch)>=0}function isOctalDigit(ch){return"01234567".indexOf(ch)>=0}function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)>=0}function isLineTerminator(ch){return ch===10||ch===13||ch===8232||ch===8233}function isIdentifierStart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch===92||ch>=128&&Regex.NonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=48&&ch<=57||ch===92||ch>=128&&Regex.NonAsciiIdentifierPart.test(String.fromCharCode(ch))}function isFutureReservedWord(id){switch(id){case"class":case"enum":case"export":case"extends":case"import":case"super":return true;default:return false}}function isStrictModeReservedWord(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true;default:return false}}function isKeyword(id){if(strict&&isStrictModeReservedWord(id)){return true}switch(id.length){case 2:return id==="if"||id==="in"||id==="do";case 3:return id==="var"||id==="for"||id==="new"||id==="try"||id==="let";case 4:return id==="this"||id==="else"||id==="case"||id==="void"||id==="with"||id==="enum";case 5:return id==="while"||id==="break"||id==="catch"||id==="throw"||id==="const"||id==="yield"||id==="class"||id==="super";case 6:return id==="return"||id==="typeof"||id==="delete"||id==="switch"||id==="export"||id==="import";case 7:return id==="default"||id==="finally"||id==="extends";case 8:return id==="function"||id==="continue"||id==="debugger";case 10:return id==="instanceof";default:return false}}function skipComment(){var ch,start;start=index===0;while(index<length){ch=source.charCodeAt(index);if(isWhiteSpace(ch)){++index}else if(isLineTerminator(ch)){++index;if(ch===13&&source.charCodeAt(index)===10){++index}++lineNumber;lineStart=index;start=true}else{break}}}function scanHexEscape(prefix){var i,len,ch,code=0;len=prefix==="u"?4:2;for(i=0;i<len;++i){if(index<length&&isHexDigit(source[index])){ch=source[index++];code=code*16+"0123456789abcdef".indexOf(ch.toLowerCase())}else{return""}}return String.fromCharCode(code)}function scanUnicodeCodePointEscape(){var ch,code,cu1,cu2;ch=source[index];code=0;if(ch==="}"){throwError({},Messages.UnexpectedToken,"ILLEGAL")}while(index<length){ch=source[index++];if(!isHexDigit(ch)){break}code=code*16+"0123456789abcdef".indexOf(ch.toLowerCase())}if(code>1114111||ch!=="}"){throwError({},Messages.UnexpectedToken,"ILLEGAL")}if(code<=65535){return String.fromCharCode(code)}cu1=(code-65536>>10)+55296;cu2=(code-65536&1023)+56320;return String.fromCharCode(cu1,cu2)}function getEscapedIdentifier(){var ch,id;ch=source.charCodeAt(index++);id=String.fromCharCode(ch);if(ch===92){if(source.charCodeAt(index)!==117){throwError({},Messages.UnexpectedToken,"ILLEGAL")}++index;ch=scanHexEscape("u");if(!ch||ch==="\\"||!isIdentifierStart(ch.charCodeAt(0))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}id=ch}while(index<length){ch=source.charCodeAt(index);if(!isIdentifierPart(ch)){break}++index;id+=String.fromCharCode(ch);if(ch===92){id=id.substr(0,id.length-1);if(source.charCodeAt(index)!==117){throwError({},Messages.UnexpectedToken,"ILLEGAL")}++index;ch=scanHexEscape("u");if(!ch||ch==="\\"||!isIdentifierPart(ch.charCodeAt(0))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}id+=ch}}return id}function getIdentifier(){var start,ch;start=index++;while(index<length){ch=source.charCodeAt(index);if(ch===92){index=start;return getEscapedIdentifier()}if(isIdentifierPart(ch)){++index}else{break}}return source.slice(start,index)}function scanIdentifier(){var start,id,type;start=index;id=source.charCodeAt(index)===92?getEscapedIdentifier():getIdentifier();if(id.length===1){type=Token.Identifier}else if(isKeyword(id)){type=Token.Keyword}else if(id==="null"){type=Token.NullLiteral}else if(id==="true"||id==="false"){type=Token.BooleanLiteral}else{type=Token.Identifier}return{type:type,value:id,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanPunctuator(){var start=index,code=source.charCodeAt(index),code2,ch1=source[index],ch2,ch3,ch4;switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:++index;if(extra.tokenize){if(code===40){extra.openParenToken=extra.tokens.length}else if(code===123){extra.openCurlyToken=extra.tokens.length}}return{type:Token.Punctuator,value:String.fromCharCode(code),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index};default:code2=source.charCodeAt(index+1);if(code2===61){switch(code){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:index+=2;return{type:Token.Punctuator,value:String.fromCharCode(code)+String.fromCharCode(code2),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index};case 33:case 61:index+=2;if(source.charCodeAt(index)===61){++index}return{type:Token.Punctuator,value:source.slice(start,index),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}}}ch4=source.substr(index,4);if(ch4===">>>="){index+=4;return{type:Token.Punctuator,value:ch4,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}ch3=ch4.substr(0,3);if(ch3===">>>"||ch3==="<<="||ch3===">>="){index+=3;return{type:Token.Punctuator,value:ch3,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}ch2=ch3.substr(0,2);if(ch1===ch2[1]&&"+-<>&|".indexOf(ch1)>=0||ch2==="=>"){index+=2;return{type:Token.Punctuator,value:ch2,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}if("<>=!+-*%&|^/".indexOf(ch1)>=0){++index;return{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}throwError({},Messages.UnexpectedToken,"ILLEGAL")}function scanHexLiteral(start){var number="";while(index<length){if(!isHexDigit(source[index])){break}number+=source[index++]}if(number.length===0){throwError({},Messages.UnexpectedToken,"ILLEGAL")}if(isIdentifierStart(source.charCodeAt(index))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.NumericLiteral,value:parseInt("0x"+number,16),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanOctalLiteral(start){var number="0"+source[index++];while(index<length){if(!isOctalDigit(source[index])){break}number+=source[index++]}if(isIdentifierStart(source.charCodeAt(index))||isDecimalDigit(source.charCodeAt(index))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.NumericLiteral,value:parseInt(number,8),octal:true,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanNumericLiteral(){var number,start,ch;ch=source[index];assert(isDecimalDigit(ch.charCodeAt(0))||ch===".","Numeric literal must start with a decimal digit or a decimal point");start=index;number="";if(ch!=="."){number=source[index++];ch=source[index];if(number==="0"){if(ch==="x"||ch==="X"){++index;return scanHexLiteral(start)}if(isOctalDigit(ch)){return scanOctalLiteral(start)}if(ch&&isDecimalDigit(ch.charCodeAt(0))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}ch=source[index]}if(ch==="."){number+=source[index++];while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}ch=source[index]}if(ch==="e"||ch==="E"){number+=source[index++];ch=source[index];if(ch==="+"||ch==="-"){number+=source[index++]}if(isDecimalDigit(source.charCodeAt(index))){while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}}else{throwError({},Messages.UnexpectedToken,"ILLEGAL")}}if(isIdentifierStart(source.charCodeAt(index))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.NumericLiteral,value:parseFloat(number),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanStringLiteral(){var str="",quote,start,ch,code,unescaped,restore,octal=false,startLineNumber,startLineStart;startLineNumber=lineNumber;startLineStart=lineStart;quote=source[index];assert(quote==="'"||quote==='"',"String literal must starts with a quote");start=index;++index;while(index<length){ch=source[index++];if(ch===quote){quote="";break}else if(ch==="\\"){ch=source[index++];if(!ch||!isLineTerminator(ch.charCodeAt(0))){switch(ch){case"u":case"x":if(source[index]==="{"){++index;str+=scanUnicodeCodePointEscape()}else{restore=index;unescaped=scanHexEscape(ch);if(unescaped){str+=unescaped}else{index=restore;str+=ch}}break;case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="\t";break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="\v";break;default:if(isOctalDigit(ch)){code="01234567".indexOf(ch);if(code!==0){octal=true}if(index<length&&isOctalDigit(source[index])){octal=true;code=code*8+"01234567".indexOf(source[index++]);if("0123".indexOf(ch)>=0&&index<length&&isOctalDigit(source[index])){code=code*8+"01234567".indexOf(source[index++])}}str+=String.fromCharCode(code)}else{str+=ch}break}}else{++lineNumber;if(ch==="\r"&&source[index]==="\n"){++index}lineStart=index}}else if(isLineTerminator(ch.charCodeAt(0))){break}else{str+=ch}}if(quote!==""){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.StringLiteral,value:str,octal:octal,startLineNumber:startLineNumber,startLineStart:startLineStart,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function testRegExp(pattern,flags){var tmp=pattern,value;if(flags.indexOf("u")>=0){tmp=tmp.replace(/\\u\{([0-9a-fA-F]+)\}/g,function($0,$1){if(parseInt($1,16)<=1114111){return"x"}throwError({},Messages.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x")}try{value=new RegExp(tmp)}catch(e){throwError({},Messages.InvalidRegExp)}try{return new RegExp(pattern,flags)}catch(exception){return null}}function scanRegExpBody(){var ch,str,classMarker,terminated,body;ch=source[index];assert(ch==="/","Regular expression literal must start with a slash");str=source[index++];classMarker=false;terminated=false;while(index<length){ch=source[index++];str+=ch;if(ch==="\\"){ch=source[index++];if(isLineTerminator(ch.charCodeAt(0))){throwError({},Messages.UnterminatedRegExp)}str+=ch}else if(isLineTerminator(ch.charCodeAt(0))){throwError({},Messages.UnterminatedRegExp)}else if(classMarker){if(ch==="]"){classMarker=false}}else{if(ch==="/"){terminated=true;break}else if(ch==="["){classMarker=true}}}if(!terminated){throwError({},Messages.UnterminatedRegExp)}body=str.substr(1,str.length-2);return{value:body,literal:str}}function scanRegExpFlags(){var ch,str,flags,restore;str="";flags="";while(index<length){ch=source[index];if(!isIdentifierPart(ch.charCodeAt(0))){break}++index;if(ch==="\\"&&index<length){ch=source[index];if(ch==="u"){++index;restore=index;ch=scanHexEscape("u");if(ch){flags+=ch;for(str+="\\u";restore<index;++restore){str+=source[restore]}}else{index=restore;flags+="u";str+="\\u"}throwErrorTolerant({},Messages.UnexpectedToken,"ILLEGAL")}else{str+="\\";throwErrorTolerant({},Messages.UnexpectedToken,"ILLEGAL")}}else{flags+=ch;str+=ch}}return{value:flags,literal:str}}function scanRegExp(){var start,body,flags,value;lookahead=null;skipComment();start=index;body=scanRegExpBody();flags=scanRegExpFlags();value=testRegExp(body.value,flags.value);if(extra.tokenize){return{type:Token.RegularExpression,value:value,regex:{pattern:body.value,flags:flags.value},lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}return{literal:body.literal+flags.literal,value:value,regex:{pattern:body.value,flags:flags.value},start:start,end:index}}function collectRegex(){var pos,loc,regex,token;skipComment();pos=index;loc={start:{line:lineNumber,column:index-lineStart}};regex=scanRegExp();loc.end={line:lineNumber,column:index-lineStart};if(!extra.tokenize){if(extra.tokens.length>0){token=extra.tokens[extra.tokens.length-1];if(token.range[0]===pos&&token.type==="Punctuator"){if(token.value==="/"||token.value==="/="){extra.tokens.pop()}}}extra.tokens.push({type:"RegularExpression",value:regex.literal,regex:regex.regex,range:[pos,index],loc:loc})}return regex}function isIdentifierName(token){return token.type===Token.Identifier||token.type===Token.Keyword||token.type===Token.BooleanLiteral||token.type===Token.NullLiteral}function advanceSlash(){var prevToken,checkToken;prevToken=extra.tokens[extra.tokens.length-1];if(!prevToken){return collectRegex()}if(prevToken.type==="Punctuator"){if(prevToken.value==="]"){return scanPunctuator()}if(prevToken.value===")"){checkToken=extra.tokens[extra.openParenToken-1];if(checkToken&&checkToken.type==="Keyword"&&(checkToken.value==="if"||checkToken.value==="while"||checkToken.value==="for"||checkToken.value==="with")){return collectRegex()}return scanPunctuator()}if(prevToken.value==="}"){if(extra.tokens[extra.openCurlyToken-3]&&extra.tokens[extra.openCurlyToken-3].type==="Keyword"){checkToken=extra.tokens[extra.openCurlyToken-4];if(!checkToken){return scanPunctuator()}}else if(extra.tokens[extra.openCurlyToken-4]&&extra.tokens[extra.openCurlyToken-4].type==="Keyword"){checkToken=extra.tokens[extra.openCurlyToken-5];if(!checkToken){return collectRegex()}}else{return scanPunctuator()}return scanPunctuator()}return collectRegex()}if(prevToken.type==="Keyword"&&prevToken.value!=="this"){return collectRegex()}return scanPunctuator()}function advance(){var ch;skipComment();if(index>=length){return{type:Token.EOF,lineNumber:lineNumber,lineStart:lineStart,start:index,end:index}}ch=source.charCodeAt(index);if(isIdentifierStart(ch)){return scanIdentifier()}if(ch===40||ch===41||ch===59){return scanPunctuator()}if(ch===39||ch===34){return scanStringLiteral()}if(ch===46){if(isDecimalDigit(source.charCodeAt(index+1))){return scanNumericLiteral()}return scanPunctuator()}if(isDecimalDigit(ch)){return scanNumericLiteral()}if(extra.tokenize&&ch===47){return advanceSlash()}return scanPunctuator()}function collectToken(){var loc,token,value,entry;skipComment();loc={start:{line:lineNumber,column:index-lineStart}};token=advance();loc.end={line:lineNumber,column:index-lineStart};if(token.type!==Token.EOF){value=source.slice(token.start,token.end);entry={type:TokenName[token.type],value:value,range:[token.start,token.end],loc:loc};if(token.regex){entry.regex={pattern:token.regex.pattern,flags:token.regex.flags}}extra.tokens.push(entry)}return token}function lex(){var token;token=lookahead;index=token.end;lineNumber=token.lineNumber;lineStart=token.lineStart;lookahead=typeof extra.tokens!=="undefined"?collectToken():advance();index=token.end;lineNumber=token.lineNumber;lineStart=token.lineStart;return token}function peek(){var pos,line,start;pos=index;line=lineNumber;start=lineStart;lookahead=typeof extra.tokens!=="undefined"?collectToken():advance();index=pos;lineNumber=line;lineStart=start}function Position(){this.line=lineNumber;this.column=index-lineStart}function SourceLocation(){this.start=new Position;this.end=null}function WrappingSourceLocation(startToken){if(startToken.type===Token.StringLiteral){this.start={line:startToken.startLineNumber,column:startToken.start-startToken.startLineStart}}else{this.start={line:startToken.lineNumber,column:startToken.start-startToken.lineStart}}this.end=null}function Node(){index=lookahead.start;if(lookahead.type===Token.StringLiteral){lineNumber=lookahead.startLineNumber;lineStart=lookahead.startLineStart}else{lineNumber=lookahead.lineNumber;lineStart=lookahead.lineStart}if(extra.range){this.range=[index,0]}if(extra.loc){this.loc=new SourceLocation}}function WrappingNode(startToken){if(extra.range){this.range=[startToken.start,0]}if(extra.loc){this.loc=new WrappingSourceLocation(startToken)}}WrappingNode.prototype=Node.prototype={finish:function(){if(extra.range){this.range[1]=index}if(extra.loc){this.loc.end=new Position;if(extra.source){this.loc.source=extra.source}}},finishArrayExpression:function(elements){this.type=Syntax.ArrayExpression;this.elements=elements;this.finish();return this},finishAssignmentExpression:function(operator,left,right){this.type=Syntax.AssignmentExpression;this.operator=operator;this.left=left;this.right=right;this.finish();return this},finishBinaryExpression:function(operator,left,right){this.type=operator==="||"||operator==="&&"?Syntax.LogicalExpression:Syntax.BinaryExpression;this.operator=operator;this.left=left;this.right=right;this.finish();return this},finishCallExpression:function(callee,args){this.type=Syntax.CallExpression;this.callee=callee;this.arguments=args;this.finish();return this},finishConditionalExpression:function(test,consequent,alternate){this.type=Syntax.ConditionalExpression;this.test=test;this.consequent=consequent;this.alternate=alternate;this.finish();return this},finishExpressionStatement:function(expression){this.type=Syntax.ExpressionStatement;this.expression=expression;this.finish();return this},finishIdentifier:function(name){this.type=Syntax.Identifier;this.name=name;this.finish();return this},finishLiteral:function(token){this.type=Syntax.Literal;this.value=token.value;this.raw=source.slice(token.start,token.end);if(token.regex){if(this.raw=="//"){this.raw="/(?:)/"}this.regex=token.regex}this.finish();return this},finishMemberExpression:function(accessor,object,property){this.type=Syntax.MemberExpression;this.computed=accessor==="[";this.object=object;this.property=property;this.finish();return this},finishObjectExpression:function(properties){this.type=Syntax.ObjectExpression;this.properties=properties;this.finish();return this},finishProgram:function(body){this.type=Syntax.Program;this.body=body;this.finish();return this},finishProperty:function(kind,key,value){this.type=Syntax.Property;this.key=key;this.value=value;this.kind=kind;this.finish();return this},finishUnaryExpression:function(operator,argument){this.type=Syntax.UnaryExpression;this.operator=operator;this.argument=argument;this.prefix=true;this.finish();return this}};function peekLineTerminator(){var pos,line,start,found;pos=index;line=lineNumber;start=lineStart;skipComment();found=lineNumber!==line;index=pos;lineNumber=line;lineStart=start;return found}function throwError(token,messageFormat){var error,args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,function(whole,index){assert(index<args.length,"Message reference must be in range");return args[index]});if(typeof token.lineNumber==="number"){error=new Error("Line "+token.lineNumber+": "+msg);error.index=token.start;error.lineNumber=token.lineNumber;error.column=token.start-lineStart+1}else{error=new Error("Line "+lineNumber+": "+msg);error.index=index;error.lineNumber=lineNumber;error.column=index-lineStart+1}error.description=msg;throw error}function throwErrorTolerant(){try{throwError.apply(null,arguments)}catch(e){if(extra.errors){extra.errors.push(e)}else{throw e}}}function throwUnexpected(token){if(token.type===Token.EOF){throwError(token,Messages.UnexpectedEOS)}if(token.type===Token.NumericLiteral){throwError(token,Messages.UnexpectedNumber)}if(token.type===Token.StringLiteral){throwError(token,Messages.UnexpectedString)}if(token.type===Token.Identifier){throwError(token,Messages.UnexpectedIdentifier)}if(token.type===Token.Keyword){if(isFutureReservedWord(token.value)){throwError(token,Messages.UnexpectedReserved)}else if(strict&&isStrictModeReservedWord(token.value)){throwErrorTolerant(token,Messages.StrictReservedWord);return}throwError(token,Messages.UnexpectedToken,token.value)}throwError(token,Messages.UnexpectedToken,token.value)}function expect(value){var token=lex();if(token.type!==Token.Punctuator||token.value!==value){throwUnexpected(token)}}function expectTolerant(value){if(extra.errors){var token=lookahead;if(token.type!==Token.Punctuator&&token.value!==value){throwErrorTolerant(token,Messages.UnexpectedToken,token.value)}else{lex()}}else{expect(value)}}function match(value){return lookahead.type===Token.Punctuator&&lookahead.value===value}function matchKeyword(keyword){return lookahead.type===Token.Keyword&&lookahead.value===keyword}function consumeSemicolon(){var line;if(source.charCodeAt(index)===59||match(";")){lex();return}line=lineNumber;skipComment();if(lineNumber!==line){return}if(lookahead.type!==Token.EOF&&!match("}")){throwUnexpected(lookahead)}}function parseArrayInitialiser(){var elements=[],node=new Node;expect("[");while(!match("]")){if(match(",")){lex();elements.push(null)}else{elements.push(parseAssignmentExpression());if(!match("]")){expect(",")}}}lex();return node.finishArrayExpression(elements)}function parseObjectPropertyKey(){var token,node=new Node;token=lex();if(token.type===Token.StringLiteral||token.type===Token.NumericLiteral){if(strict&&token.octal){throwErrorTolerant(token,Messages.StrictOctalLiteral)}return node.finishLiteral(token)}return node.finishIdentifier(token.value)}function parseObjectProperty(){var token,key,id,value,node=new Node;token=lookahead;if(token.type===Token.Identifier){id=parseObjectPropertyKey();expect(":");value=parseAssignmentExpression();return node.finishProperty("init",id,value)}if(token.type===Token.EOF||token.type===Token.Punctuator){throwUnexpected(token)}else{key=parseObjectPropertyKey();expect(":");value=parseAssignmentExpression();return node.finishProperty("init",key,value)}}function parseObjectInitialiser(){var properties=[],property,name,key,kind,map={},toString=String,node=new Node;expect("{");while(!match("}")){property=parseObjectProperty();if(property.key.type===Syntax.Identifier){name=property.key.name}else{name=toString(property.key.value)}kind=property.kind==="init"?PropertyKind.Data:property.kind==="get"?PropertyKind.Get:PropertyKind.Set;key="$"+name;if(Object.prototype.hasOwnProperty.call(map,key)){if(map[key]===PropertyKind.Data){if(strict&&kind===PropertyKind.Data){throwErrorTolerant({},Messages.StrictDuplicateProperty)}else if(kind!==PropertyKind.Data){throwErrorTolerant({},Messages.AccessorDataProperty)}}else{if(kind===PropertyKind.Data){throwErrorTolerant({},Messages.AccessorDataProperty)}else if(map[key]&kind){throwErrorTolerant({},Messages.AccessorGetSet)}}map[key]|=kind}else{map[key]=kind}properties.push(property);if(!match("}")){expectTolerant(",")}}expect("}");return node.finishObjectExpression(properties)}function parseGroupExpression(){var expr;expect("(");++state.parenthesisCount;expr=parseExpression();expect(")");return expr}var legalKeywords={if:1,this:1};function parsePrimaryExpression(){var type,token,expr,node;if(match("(")){return parseGroupExpression()}if(match("[")){return parseArrayInitialiser()}if(match("{")){return parseObjectInitialiser()}type=lookahead.type;node=new Node;if(type===Token.Identifier||legalKeywords[lookahead.value]){expr=node.finishIdentifier(lex().value)}else if(type===Token.StringLiteral||type===Token.NumericLiteral){if(strict&&lookahead.octal){throwErrorTolerant(lookahead,Messages.StrictOctalLiteral)}expr=node.finishLiteral(lex())}else if(type===Token.Keyword){throw new Error("Disabled.")}else if(type===Token.BooleanLiteral){token=lex();token.value=token.value==="true";expr=node.finishLiteral(token)}else if(type===Token.NullLiteral){token=lex();token.value=null;expr=node.finishLiteral(token)}else if(match("/")||match("/=")){if(typeof extra.tokens!=="undefined"){expr=node.finishLiteral(collectRegex())}else{expr=node.finishLiteral(scanRegExp())}peek()}else{throwUnexpected(lex())}return expr}function parseArguments(){var args=[];expect("(");if(!match(")")){while(index<length){args.push(parseAssignmentExpression());if(match(")")){break}expectTolerant(",")}}expect(")");return args}function parseNonComputedProperty(){var token,node=new Node;token=lex();if(!isIdentifierName(token)){throwUnexpected(token)}return node.finishIdentifier(token.value)}function parseNonComputedMember(){expect(".");return parseNonComputedProperty()}function parseComputedMember(){var expr;expect("[");expr=parseExpression();expect("]");return expr}function parseLeftHandSideExpressionAllowCall(){var expr,args,property,startToken,previousAllowIn=state.allowIn;startToken=lookahead;state.allowIn=true;expr=parsePrimaryExpression();for(;;){if(match(".")){property=parseNonComputedMember();expr=new WrappingNode(startToken).finishMemberExpression(".",expr,property)}else if(match("(")){args=parseArguments();expr=new WrappingNode(startToken).finishCallExpression(expr,args)}else if(match("[")){property=parseComputedMember();expr=new WrappingNode(startToken).finishMemberExpression("[",expr,property)}else{break}}state.allowIn=previousAllowIn;return expr}function parsePostfixExpression(){var expr=parseLeftHandSideExpressionAllowCall();if(lookahead.type===Token.Punctuator){if((match("++")||match("--"))&&!peekLineTerminator()){throw new Error("Disabled.")}}return expr}function parseUnaryExpression(){var token,expr,startToken;if(lookahead.type!==Token.Punctuator&&lookahead.type!==Token.Keyword){expr=parsePostfixExpression()}else if(match("++")||match("--")){throw new Error("Disabled.")}else if(match("+")||match("-")||match("~")||match("!")){startToken=lookahead;token=lex();expr=parseUnaryExpression();expr=new WrappingNode(startToken).finishUnaryExpression(token.value,expr)}else if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof")){throw new Error("Disabled.")}else{expr=parsePostfixExpression()}return expr}function binaryPrecedence(token,allowIn){var prec=0;if(token.type!==Token.Punctuator&&token.type!==Token.Keyword){return 0}switch(token.value){case"||":prec=1;break;case"&&":prec=2;break;case"|":prec=3;break;case"^":prec=4;break;case"&":prec=5;break;case"==":case"!=":case"===":case"!==":prec=6;break;case"<":case">":case"<=":case">=":case"instanceof":prec=7;break;case"in":prec=allowIn?7:0;break;case"<<":case">>":case">>>":prec=8;break;case"+":case"-":prec=9;break;case"*":case"/":case"%":prec=11;break;default:break}return prec}function parseBinaryExpression(){var marker,markers,expr,token,prec,stack,right,operator,left,i;marker=lookahead;left=parseUnaryExpression();token=lookahead;prec=binaryPrecedence(token,state.allowIn);if(prec===0){return left}token.prec=prec;lex();markers=[marker,lookahead];right=parseUnaryExpression();stack=[left,token,right];while((prec=binaryPrecedence(lookahead,state.allowIn))>0){while(stack.length>2&&prec<=stack[stack.length-2].prec){right=stack.pop();operator=stack.pop().value;left=stack.pop();markers.pop();expr=new WrappingNode(markers[markers.length-1]).finishBinaryExpression(operator,left,right);stack.push(expr)}token=lex();token.prec=prec;stack.push(token);markers.push(lookahead);expr=parseUnaryExpression();stack.push(expr)}i=stack.length-1;expr=stack[i];markers.pop();while(i>1){expr=new WrappingNode(markers.pop()).finishBinaryExpression(stack[i-1].value,stack[i-2],expr);i-=2}return expr}function parseConditionalExpression(){var expr,previousAllowIn,consequent,alternate,startToken;startToken=lookahead;expr=parseBinaryExpression();if(match("?")){lex();previousAllowIn=state.allowIn;state.allowIn=true;consequent=parseAssignmentExpression();state.allowIn=previousAllowIn;expect(":");alternate=parseAssignmentExpression();expr=new WrappingNode(startToken).finishConditionalExpression(expr,consequent,alternate)}return expr}function parseAssignmentExpression(){var oldParenthesisCount,token,expr,startToken;oldParenthesisCount=state.parenthesisCount;startToken=lookahead;token=lookahead;expr=parseConditionalExpression();return expr}function parseExpression(){var expr=parseAssignmentExpression();if(match(",")){throw new Error("Disabled.")}return expr}function parseExpressionStatement(node){var expr=parseExpression();consumeSemicolon();return node.finishExpressionStatement(expr)}function parseStatement(){var type=lookahead.type,expr,node;if(type===Token.EOF){throwUnexpected(lookahead)}if(type===Token.Punctuator&&lookahead.value==="{"){throw new Error("Disabled.")}node=new Node;if(type===Token.Punctuator){switch(lookahead.value){case";":throw new Error("Disabled.");case"(":return parseExpressionStatement(node);default:break}}else if(type===Token.Keyword){throw new Error("Disabled.")}expr=parseExpression();consumeSemicolon();return node.finishExpressionStatement(expr)}function parseSourceElement(){if(lookahead.type===Token.Keyword){switch(lookahead.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return parseStatement()}}if(lookahead.type!==Token.EOF){return parseStatement()}}function parseSourceElements(){var sourceElement,sourceElements=[],token,directive,firstRestricted;while(index<length){token=lookahead;if(token.type!==Token.StringLiteral){break}sourceElement=parseSourceElement();sourceElements.push(sourceElement);if(sourceElement.expression.type!==Syntax.Literal){break}directive=source.slice(token.start+1,token.end-1);if(directive==="use strict"){strict=true;if(firstRestricted){throwErrorTolerant(firstRestricted,Messages.StrictOctalLiteral)}}else{if(!firstRestricted&&token.octal){firstRestricted=token}}}while(index<length){sourceElement=parseSourceElement();if(typeof sourceElement==="undefined"){break}sourceElements.push(sourceElement)}return sourceElements}function parseProgram(){var body,node;skipComment();peek();node=new Node;strict=true;body=parseSourceElements();return node.finishProgram(body)}function filterTokenLocation(){var i,entry,token,tokens=[];for(i=0;i<extra.tokens.length;++i){entry=extra.tokens[i];token={type:entry.type,value:entry.value};if(entry.regex){token.regex={pattern:entry.regex.pattern,flags:entry.regex.flags}}if(extra.range){token.range=entry.range}if(extra.loc){token.loc=entry.loc}tokens.push(token)}extra.tokens=tokens}function tokenize(code,options){var toString,tokens;toString=String;if(typeof code!=="string"&&!(code instanceof String)){code=toString(code)}source=code;index=0;lineNumber=source.length>0?1:0;lineStart=0;length=source.length;lookahead=null;state={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1};extra={};options=options||{};options.tokens=true;extra.tokens=[];extra.tokenize=true;extra.openParenToken=-1;extra.openCurlyToken=-1;extra.range=typeof options.range==="boolean"&&options.range;extra.loc=typeof options.loc==="boolean"&&options.loc;if(typeof options.tolerant==="boolean"&&options.tolerant){extra.errors=[]}try{peek();if(lookahead.type===Token.EOF){return extra.tokens}lex();while(lookahead.type!==Token.EOF){try{lex()}catch(lexError){if(extra.errors){extra.errors.push(lexError);break}else{throw lexError}}}filterTokenLocation();tokens=extra.tokens;if(typeof extra.errors!=="undefined"){tokens.errors=extra.errors}}catch(e){throw e}finally{extra={}}return tokens}function parse(code,options){var program,toString;toString=String;if(typeof code!=="string"&&!(code instanceof String)){code=toString(code)}source=code;index=0;lineNumber=source.length>0?1:0;lineStart=0;length=source.length;lookahead=null;state={allowIn:true,labelSet:{},parenthesisCount:0,inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1};extra={};if(typeof options!=="undefined"){extra.range=typeof options.range==="boolean"&&options.range;extra.loc=typeof options.loc==="boolean"&&options.loc;if(extra.loc&&options.source!==null&&options.source!==undefined){extra.source=toString(options.source)}if(typeof options.tokens==="boolean"&&options.tokens){extra.tokens=[]}if(typeof options.tolerant==="boolean"&&options.tolerant){extra.errors=[]}}try{program=parseProgram();if(typeof extra.tokens!=="undefined"){filterTokenLocation();program.tokens=extra.tokens}if(typeof extra.errors!=="undefined"){program.errors=extra.errors}}catch(e){throw e}finally{extra={}}return program}return{tokenize:tokenize,parse:parse}}()},{}],717:[function(require,module,exports){var json=typeof JSON!=="undefined"?JSON:require("jsonify");module.exports=function(obj,opts){if(!opts)opts={};if(typeof opts==="function")opts={cmp:opts};var space=opts.space||"";if(typeof space==="number")space=Array(space+1).join(" ");var cycles=typeof opts.cycles==="boolean"?opts.cycles:false;var replacer=opts.replacer||function(key,value){return value};var cmp=opts.cmp&&function(f){return function(node){return function(a,b){var aobj={key:a,value:node[a]};var bobj={key:b,value:node[b]};return f(aobj,bobj)}}}(opts.cmp);var seen=[];return function stringify(parent,key,node,level){var indent=space?"\n"+new Array(level+1).join(space):"";var colonSeparator=space?": ":":";if(node&&node.toJSON&&typeof node.toJSON==="function"){node=node.toJSON()}node=replacer.call(parent,key,node);if(node===undefined){return}if(typeof node!=="object"||node===null){return json.stringify(node)}if(isArray(node)){var out=[];for(var i=0;i<node.length;i++){var item=stringify(node,i,node[i],level+1)||json.stringify(null);out.push(indent+space+item)}return"["+out.join(",")+indent+"]"}else{if(seen.indexOf(node)!==-1){if(cycles)return json.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else seen.push(node);var keys=objectKeys(node).sort(cmp&&cmp(node));var out=[];for(var i=0;i<keys.length;i++){var key=keys[i];var value=stringify(node,key,node[key],level+1);if(!value)continue;var keyValue=json.stringify(key)+colonSeparator+value;out.push(indent+space+keyValue)}seen.splice(seen.indexOf(node),1);return"{"+out.join(",")+indent+"}"}}({"":obj},"",obj,0)};var isArray=Array.isArray||function(x){return{}.toString.call(x)==="[object Array]"};var objectKeys=Object.keys||function(obj){var has=Object.prototype.hasOwnProperty||function(){return true};var keys=[];for(var key in obj){if(has.call(obj,key))keys.push(key)}return keys}},{jsonify:528}],718:[function(require,module,exports){module.exports={_from:"vega-lite@>=1.2.0 <2.0.0",_id:"vega-lite@1.3.1",_inBundle:false,_integrity:"sha1-SLASl1UiE3knCGrjpGdVt+0uiYk=",_location:"/webppl-viz/vega-lite",_phantomChildren:{cliui:"3.2.0",decamelize:"1.2.0","get-caller-file":"1.0.2",jsonify:"0.0.0","os-locale":"1.4.0","read-pkg-up":"1.0.1","require-directory":"2.1.1","require-main-filename":"1.0.1","set-blocking":"2.0.0","string-width":"1.0.2","which-module":"1.0.0",y18n:"3.2.1","yargs-parser":"4.2.1"},_requested:{type:"version",registry:true,raw:"vega-lite@1.3.1",name:"vega-lite",escapedName:"vega-lite",rawSpec:"1.3.1",saveSpec:null,fetchSpec:"1.3.1"},_requiredBy:["/webppl-viz"],_resolved:"https://registry.npmjs.org/vega-lite/-/vega-lite-1.3.1.tgz",_shasum:"48b012975522137927086ae3a46755b7ed2e8989",_spec:"vega-lite@1.3.1",_where:"/Users/lestera/Documents/git/webppl/node_modules/webppl-viz",author:{name:'Jeffrey Heer, Dominik Moritz, Kanit "Ham" Wongsuphasawat'},bin:{vl2png:"bin/vl2png",vl2svg:"bin/vl2svg",vl2vg:"bin/vl2vg"},bugs:{url:"https://github.com/vega/vega-lite/issues"},bundleDependencies:false,collaborators:["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (http://www.domoritz.de)","Jeffrey Heer <jheer@uw.edu> (http://jheer.org)"],dependencies:{datalib:"~1.7.2","json-stable-stringify":"~1.0.1",yargs:"~6.3.0"},deprecated:false,description:"Vega-lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications.",devDependencies:{"@types/chai":"^3.4.34","@types/d3":"^3.5.36","@types/json-stable-stringify":"^1.0.29","@types/mocha":"^2.2.32","@types/node":"^6.0.45","browser-sync":"~2.17.3",browserify:"~13.1.0",chai:"~3.5.0",cheerio:"~0.22.0",exorcist:"~0.4.0",istanbul:"~0.4.5",mocha:"~3.1.2",nodemon:"~1.11.0","source-map-support":"~0.4.2",tsify:"~2.0.2",tslint:"~3.15.1",typescript:"^2.0.3","typescript-json-schema":"~0.2.0","uglify-js":"~2.7.3",vega:"~2.6.3","vega-datasets":"github:vega/vega-datasets#gh-pages",watchify:"~3.7.0","yaml-front-matter":"~3.4.0","z-schema":"~3.18.0"},directories:{test:"test"},homepage:"https://github.com/vega/vega-lite",license:"BSD-3-Clause",main:"src/vl.js",name:"vega-lite",repository:{type:"git",url:"git+https://github.com/vega/vega-lite.git"},scripts:{build:"browserify src/vl.ts -p tsify -d -s vl | exorcist vega-lite.js.map > vega-lite.js ","build:all":"npm run clean && npm run data && npm run build && npm test && npm run lint && npm run build:images","build:images":"npm run data && scripts/generate-images.sh","build:toc":"bundle exec jekyll build --incremental -q && scripts/generate-toc",clean:"rm -f vega-lite.* vega-lite-schema.json & find -E src test site -regex '.*\\.(js|js.map|d.ts)' -delete & rm -rf examples/_diff examples/_original examples/_output examples/images && rm -rf data",cover:"npm run pretest && istanbul cover node_modules/.bin/_mocha -- --recursive",data:"rsync -r node_modules/vega-datasets/data/* data",deploy:"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh",lint:"tslint -c tslint.json 'src/**/*.ts' 'test/**/*.ts' --exclude '**/*.d.ts'",postbuild:"uglifyjs vega-lite.js -cm --source-map vega-lite.min.js.map > vega-lite.min.js && npm run schema",poststart:"rm examples/all-examples.json",presite:"tsc && npm run build && bower install && npm run data && npm run build:toc",prestart:"npm run build && npm run data && scripts/index-examples",pretest:"tsc && npm run data",schema:"typescript-json-schema --required true src/spec.ts ExtendedSpec > vega-lite-schema.json",site:"bundle exec jekyll serve --incremental",start:"npm run watch & browser-sync start --server --files 'vega-lite.js' --index 'test-gallery.html'",test:"npm run schema && mocha --recursive --require source-map-support/register test examples","test:debug":"npm run schema && mocha --debug-brk --recursive --require source-map-support/register test examples",watch:"nodemon -x 'npm run build && npm test && npm run lint'","watch:build":"watchify src/vl.ts -p tsify -v -d -s vl -o 'exorcist vega-lite.js.map > vega-lite.js'","watch:test":"nodemon -x 'npm test && npm run lint'","x-compile":"./scripts/examples-compile.sh","x-diff":"./scripts/examples-diff.sh"},types:"src/vl.d.ts",version:"1.3.1"}},{}],719:[function(require,module,exports){"use strict";(function(AggregateOp){AggregateOp[AggregateOp["VALUES"]="values"]="VALUES";AggregateOp[AggregateOp["COUNT"]="count"]="COUNT";AggregateOp[AggregateOp["VALID"]="valid"]="VALID";AggregateOp[AggregateOp["MISSING"]="missing"]="MISSING";AggregateOp[AggregateOp["DISTINCT"]="distinct"]="DISTINCT";AggregateOp[AggregateOp["SUM"]="sum"]="SUM";AggregateOp[AggregateOp["MEAN"]="mean"]="MEAN";AggregateOp[AggregateOp["AVERAGE"]="average"]="AVERAGE";AggregateOp[AggregateOp["VARIANCE"]="variance"]="VARIANCE";AggregateOp[AggregateOp["VARIANCEP"]="variancep"]="VARIANCEP";AggregateOp[AggregateOp["STDEV"]="stdev"]="STDEV";AggregateOp[AggregateOp["STDEVP"]="stdevp"]="STDEVP";AggregateOp[AggregateOp["MEDIAN"]="median"]="MEDIAN";AggregateOp[AggregateOp["Q1"]="q1"]="Q1";AggregateOp[AggregateOp["Q3"]="q3"]="Q3";AggregateOp[AggregateOp["MODESKEW"]="modeskew"]="MODESKEW";AggregateOp[AggregateOp["MIN"]="min"]="MIN";AggregateOp[AggregateOp["MAX"]="max"]="MAX";AggregateOp[AggregateOp["ARGMIN"]="argmin"]="ARGMIN";AggregateOp[AggregateOp["ARGMAX"]="argmax"]="ARGMAX"})(exports.AggregateOp||(exports.AggregateOp={}));var AggregateOp=exports.AggregateOp;exports.AGGREGATE_OPS=[AggregateOp.VALUES,AggregateOp.COUNT,AggregateOp.VALID,AggregateOp.MISSING,AggregateOp.DISTINCT,AggregateOp.SUM,AggregateOp.MEAN,AggregateOp.AVERAGE,AggregateOp.VARIANCE,AggregateOp.VARIANCEP,AggregateOp.STDEV,AggregateOp.STDEVP,AggregateOp.MEDIAN,AggregateOp.Q1,AggregateOp.Q3,AggregateOp.MODESKEW,AggregateOp.MIN,AggregateOp.MAX,AggregateOp.ARGMIN,AggregateOp.ARGMAX];exports.SUM_OPS=[AggregateOp.COUNT,AggregateOp.SUM,AggregateOp.DISTINCT,AggregateOp.VALID,AggregateOp.MISSING];exports.SHARED_DOMAIN_OPS=[AggregateOp.MEAN,AggregateOp.AVERAGE,AggregateOp.STDEV,AggregateOp.STDEVP,AggregateOp.MEDIAN,AggregateOp.Q1,AggregateOp.Q3,AggregateOp.MIN,AggregateOp.MAX]},{}],720:[function(require,module,exports){"use strict";(function(AxisOrient){AxisOrient[AxisOrient["TOP"]="top"]="TOP";AxisOrient[AxisOrient["RIGHT"]="right"]="RIGHT";AxisOrient[AxisOrient["LEFT"]="left"]="LEFT";AxisOrient[AxisOrient["BOTTOM"]="bottom"]="BOTTOM"})(exports.AxisOrient||(exports.AxisOrient={}));var AxisOrient=exports.AxisOrient;exports.defaultAxisConfig={offset:undefined,grid:undefined,labels:true,labelMaxLength:25,tickSize:undefined,characterWidth:6};exports.defaultFacetAxisConfig={axisWidth:0,labels:true,grid:false,tickSize:0}},{}],721:[function(require,module,exports){"use strict";var channel_1=require("./channel");function autoMaxBins(channel){switch(channel){case channel_1.ROW:case channel_1.COLUMN:case channel_1.SIZE:case channel_1.SHAPE:return 6;default:return 10}}exports.autoMaxBins=autoMaxBins},{"./channel":722}],722:[function(require,module,exports){"use strict";var util_1=require("./util");(function(Channel){Channel[Channel["X"]="x"]="X";Channel[Channel["Y"]="y"]="Y";Channel[Channel["X2"]="x2"]="X2";Channel[Channel["Y2"]="y2"]="Y2";Channel[Channel["ROW"]="row"]="ROW";Channel[Channel["COLUMN"]="column"]="COLUMN";Channel[Channel["SHAPE"]="shape"]="SHAPE";Channel[Channel["SIZE"]="size"]="SIZE";Channel[Channel["COLOR"]="color"]="COLOR";Channel[Channel["TEXT"]="text"]="TEXT";Channel[Channel["DETAIL"]="detail"]="DETAIL";Channel[Channel["LABEL"]="label"]="LABEL";Channel[Channel["PATH"]="path"]="PATH";Channel[Channel["ORDER"]="order"]="ORDER";Channel[Channel["OPACITY"]="opacity"]="OPACITY"})(exports.Channel||(exports.Channel={}));var Channel=exports.Channel;exports.X=Channel.X;exports.Y=Channel.Y;exports.X2=Channel.X2;exports.Y2=Channel.Y2;exports.ROW=Channel.ROW;exports.COLUMN=Channel.COLUMN;exports.SHAPE=Channel.SHAPE;exports.SIZE=Channel.SIZE;exports.COLOR=Channel.COLOR;exports.TEXT=Channel.TEXT;exports.DETAIL=Channel.DETAIL;exports.LABEL=Channel.LABEL;exports.PATH=Channel.PATH;exports.ORDER=Channel.ORDER;exports.OPACITY=Channel.OPACITY;exports.CHANNELS=[exports.X,exports.Y,exports.X2,exports.Y2,exports.ROW,exports.COLUMN,exports.SIZE,exports.SHAPE,exports.COLOR,exports.PATH,exports.ORDER,exports.OPACITY,exports.TEXT,exports.DETAIL,exports.LABEL];exports.UNIT_CHANNELS=util_1.without(exports.CHANNELS,[exports.ROW,exports.COLUMN]);exports.UNIT_SCALE_CHANNELS=util_1.without(exports.UNIT_CHANNELS,[exports.PATH,exports.ORDER,exports.DETAIL,exports.TEXT,exports.LABEL,exports.X2,exports.Y2]);exports.NONSPATIAL_CHANNELS=util_1.without(exports.UNIT_CHANNELS,[exports.X,exports.Y,exports.X2,exports.Y2]);exports.NONSPATIAL_SCALE_CHANNELS=util_1.without(exports.UNIT_SCALE_CHANNELS,[exports.X,exports.Y,exports.X2,exports.Y2]);exports.STACK_GROUP_CHANNELS=[exports.COLOR,exports.DETAIL,exports.ORDER,exports.OPACITY,exports.SIZE];function supportMark(channel,mark){return!!getSupportedMark(channel)[mark]}exports.supportMark=supportMark;function getSupportedMark(channel){switch(channel){case exports.X:case exports.Y:case exports.COLOR:case exports.DETAIL:case exports.ORDER:case exports.OPACITY:case exports.ROW:case exports.COLUMN:return{point:true,tick:true,rule:true,circle:true,square:true,bar:true,line:true,area:true,text:true};case exports.X2:case exports.Y2:return{rule:true,bar:true,area:true};case exports.SIZE:return{point:true,tick:true,rule:true,circle:true,square:true,bar:true,text:true};case exports.SHAPE:return{point:true};case exports.TEXT:return{text:true};case exports.PATH:return{line:true}}return{}}exports.getSupportedMark=getSupportedMark;function getSupportedRole(channel){switch(channel){case exports.X:case exports.Y:case exports.COLOR:case exports.OPACITY:case exports.LABEL:case exports.DETAIL:return{measure:true,dimension:true};case exports.ROW:case exports.COLUMN:case exports.SHAPE:return{measure:false,dimension:true};case exports.X2:case exports.Y2:case exports.SIZE:case exports.TEXT:return{measure:true,dimension:false};case exports.PATH:return{measure:false,dimension:true}}throw new Error("Invalid encoding channel"+channel)}exports.getSupportedRole=getSupportedRole;function hasScale(channel){return!util_1.contains([exports.DETAIL,exports.PATH,exports.TEXT,exports.LABEL,exports.ORDER],channel)}exports.hasScale=hasScale},{"./util":772}],723:[function(require,module,exports){"use strict";var axis_1=require("../axis");var channel_1=require("../channel");var datetime_1=require("../datetime");var fielddef_1=require("../fielddef");var type_1=require("../type");var util_1=require("../util");var common_1=require("./common");function parseAxisComponent(model,axisChannels){return axisChannels.reduce(function(axis,channel){if(model.axis(channel)){axis[channel]=parseAxis(channel,model)}return axis},{})}exports.parseAxisComponent=parseAxisComponent;function parseInnerAxis(channel,model){var isCol=channel===channel_1.COLUMN,isRow=channel===channel_1.ROW,type=isCol?"x":isRow?"y":channel;var def={type:type,scale:model.scaleName(channel),grid:true,tickSize:0,properties:{labels:{text:{value:""}},axis:{stroke:{value:"transparent"}}}};var axis=model.axis(channel);["layer","ticks","values","subdivide"].forEach(function(property){var method;var value=(method=exports[property])?method(model,channel,def):axis[property];if(value!==undefined){def[property]=value}});var props=model.axis(channel).properties||{};["grid"].forEach(function(group){var value=properties[group]?properties[group](model,channel,props[group]||{},def):props[group];if(value!==undefined&&util_1.keys(value).length>0){def.properties=def.properties||{};def.properties[group]=value}});return def}exports.parseInnerAxis=parseInnerAxis;function parseAxis(channel,model){var isCol=channel===channel_1.COLUMN,isRow=channel===channel_1.ROW,type=isCol?"x":isRow?"y":channel;var axis=model.axis(channel);var def={type:type,scale:model.scaleName(channel)};["format","grid","layer","offset","orient","tickSize","ticks","tickSizeEnd","title","titleOffset","values","tickPadding","tickSize","tickSizeMajor","tickSizeMinor","subdivide"].forEach(function(property){var method;var value=(method=exports[property])?method(model,channel,def):axis[property];if(value!==undefined){def[property]=value}});var props=model.axis(channel).properties||{};["axis","labels","grid","title","ticks","majorTicks","minorTicks"].forEach(function(group){var value=properties[group]?properties[group](model,channel,props[group]||{},def):props[group];if(value!==undefined&&util_1.keys(value).length>0){def.properties=def.properties||{};def.properties[group]=value}});return def}exports.parseAxis=parseAxis;function format(model,channel){return common_1.numberFormat(model.fieldDef(channel),model.axis(channel).format,model.config(),channel)}exports.format=format;function offset(model,channel){return model.axis(channel).offset}exports.offset=offset;function gridShow(model,channel){var grid=model.axis(channel).grid;if(grid!==undefined){return grid}return!model.isOrdinalScale(channel)&&!model.fieldDef(channel).bin}exports.gridShow=gridShow;function grid(model,channel){if(channel===channel_1.ROW||channel===channel_1.COLUMN){return undefined}return gridShow(model,channel)&&((channel===channel_1.Y||channel===channel_1.X)&&!(model.parent()&&model.parent().isFacet()))}exports.grid=grid;function layer(model,channel,def){var layer=model.axis(channel).layer;if(layer!==undefined){return layer}if(def.grid){return"back"}return undefined}exports.layer=layer;function orient(model,channel){var orient=model.axis(channel).orient;if(orient){return orient}else if(channel===channel_1.COLUMN){return axis_1.AxisOrient.TOP}return undefined}exports.orient=orient;function ticks(model,channel){var ticks=model.axis(channel).ticks;if(ticks!==undefined){return ticks}if(channel===channel_1.X&&!model.fieldDef(channel).bin){return 5}return undefined}exports.ticks=ticks;function tickSize(model,channel){var tickSize=model.axis(channel).tickSize;if(tickSize!==undefined){return tickSize}return undefined}exports.tickSize=tickSize;function tickSizeEnd(model,channel){var tickSizeEnd=model.axis(channel).tickSizeEnd;if(tickSizeEnd!==undefined){return tickSizeEnd}return undefined}exports.tickSizeEnd=tickSizeEnd;function title(model,channel){var axis=model.axis(channel);if(axis.title!==undefined){return axis.title}var fieldTitle=fielddef_1.title(model.fieldDef(channel),model.config());var maxLength;if(axis.titleMaxLength){maxLength=axis.titleMaxLength}else if(channel===channel_1.X&&!model.isOrdinalScale(channel_1.X)){var unitModel=model;maxLength=unitModel.width/model.axis(channel_1.X).characterWidth}else if(channel===channel_1.Y&&!model.isOrdinalScale(channel_1.Y)){var unitModel=model;maxLength=unitModel.height/model.axis(channel_1.Y).characterWidth}return maxLength?util_1.truncate(fieldTitle,maxLength):fieldTitle}exports.title=title;function titleOffset(model,channel){var titleOffset=model.axis(channel).titleOffset;if(titleOffset!==undefined){return titleOffset}return undefined}exports.titleOffset=titleOffset;function values(model,channel){var vals=model.axis(channel).values;if(vals&&datetime_1.isDateTime(vals[0])){return vals.map(function(dt){return datetime_1.timestamp(dt,true)})}return vals}exports.values=values;var properties;(function(properties){function axis(model,channel,axisPropsSpec){var axis=model.axis(channel);return util_1.extend(axis.axisColor!==undefined?{stroke:{value:axis.axisColor}}:{},axis.axisWidth!==undefined?{strokeWidth:{value:axis.axisWidth}}:{},axisPropsSpec||{})}properties.axis=axis;function grid(model,channel,gridPropsSpec){var axis=model.axis(channel);return util_1.extend(axis.gridColor!==undefined?{stroke:{value:axis.gridColor}}:{},axis.gridOpacity!==undefined?{strokeOpacity:{value:axis.gridOpacity}}:{},axis.gridWidth!==undefined?{strokeWidth:{value:axis.gridWidth}}:{},axis.gridDash!==undefined?{strokeDashOffset:{value:axis.gridDash}}:{},gridPropsSpec||{})}properties.grid=grid;function labels(model,channel,labelsSpec,def){var fieldDef=model.fieldDef(channel);var axis=model.axis(channel);var config=model.config();if(!axis.labels){return util_1.extend({text:""},labelsSpec)}if(util_1.contains([type_1.NOMINAL,type_1.ORDINAL],fieldDef.type)&&axis.labelMaxLength){labelsSpec=util_1.extend({text:{template:'{{ datum["data"] | truncate:'+axis.labelMaxLength+" }}"}},labelsSpec||{})}else if(fieldDef.type===type_1.TEMPORAL){labelsSpec=util_1.extend({text:{template:common_1.timeTemplate('datum["data"]',fieldDef.timeUnit,axis.format,axis.shortTimeLabels,config)}},labelsSpec)}if(axis.labelAngle!==undefined){labelsSpec.angle={value:axis.labelAngle}}else{if(channel===channel_1.X&&(util_1.contains([type_1.NOMINAL,type_1.ORDINAL],fieldDef.type)||!!fieldDef.bin||fieldDef.type===type_1.TEMPORAL)){labelsSpec.angle={value:270}}}if(axis.labelAlign!==undefined){labelsSpec.align={value:axis.labelAlign}}else{if(labelsSpec.angle){if(labelsSpec.angle.value===270){labelsSpec.align={value:def.orient==="top"?"left":def.type==="x"?"right":"center"}}else if(labelsSpec.angle.value===90){labelsSpec.align={value:"center"}}}}if(axis.labelBaseline!==undefined){labelsSpec.baseline={value:axis.labelBaseline}}else{if(labelsSpec.angle){if(labelsSpec.angle.value===270){labelsSpec.baseline={value:def.type==="x"?"middle":"bottom"}}else if(labelsSpec.angle.value===90){labelsSpec.baseline={value:"bottom"}}}}if(axis.tickLabelColor!==undefined){labelsSpec.fill={value:axis.tickLabelColor}}if(axis.tickLabelFont!==undefined){labelsSpec.font={value:axis.tickLabelFont}}if(axis.tickLabelFontSize!==undefined){labelsSpec.fontSize={value:axis.tickLabelFontSize}}return util_1.keys(labelsSpec).length===0?undefined:labelsSpec}properties.labels=labels;function ticks(model,channel,ticksPropsSpec){var axis=model.axis(channel);return util_1.extend(axis.tickColor!==undefined?{stroke:{value:axis.tickColor}}:{},axis.tickWidth!==undefined?{strokeWidth:{value:axis.tickWidth}}:{},ticksPropsSpec||{})}properties.ticks=ticks;function title(model,channel,titlePropsSpec){var axis=model.axis(channel);return util_1.extend(axis.titleColor!==undefined?{fill:{value:axis.titleColor}}:{},axis.titleFont!==undefined?{font:{value:axis.titleFont}}:{},axis.titleFontSize!==undefined?{fontSize:{value:axis.titleFontSize}}:{},axis.titleFontWeight!==undefined?{fontWeight:{value:axis.titleFontWeight}}:{},titlePropsSpec||{})}properties.title=title})(properties=exports.properties||(exports.properties={}))},{"../axis":720,"../channel":722,"../datetime":757,"../fielddef":760,"../type":771,"../util":772,"./common":724}],724:[function(require,module,exports){"use strict";var mark_1=require("../mark");var aggregate_1=require("../aggregate");var channel_1=require("../channel");var fielddef_1=require("../fielddef");var sort_1=require("../sort");var type_1=require("../type");var util_1=require("../util");var facet_1=require("./facet");var layer_1=require("./layer");var timeunit_1=require("../timeunit");var unit_1=require("./unit");var spec_1=require("../spec");function buildModel(spec,parent,parentGivenName){if(spec_1.isSomeFacetSpec(spec)){return new facet_1.FacetModel(spec,parent,parentGivenName)}if(spec_1.isLayerSpec(spec)){return new layer_1.LayerModel(spec,parent,parentGivenName)}if(spec_1.isUnitSpec(spec)){return new unit_1.UnitModel(spec,parent,parentGivenName)}console.error("Invalid spec.");return null}exports.buildModel=buildModel;exports.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","opacity"];exports.FILL_CONFIG=["fill","fillOpacity","opacity"];exports.FILL_STROKE_CONFIG=util_1.union(exports.STROKE_CONFIG,exports.FILL_CONFIG);function applyColorAndOpacity(p,model){var filled=model.config().mark.filled;var colorFieldDef=model.encoding().color;var opacityFieldDef=model.encoding().opacity;if(filled){applyMarkConfig(p,model,exports.FILL_CONFIG)}else{applyMarkConfig(p,model,exports.STROKE_CONFIG)}var colorValue;var opacityValue;if(model.has(channel_1.COLOR)){colorValue={scale:model.scaleName(channel_1.COLOR),field:model.field(channel_1.COLOR,colorFieldDef.type===type_1.ORDINAL?{prefix:"rank"}:{})}}else if(colorFieldDef&&colorFieldDef.value){colorValue={value:colorFieldDef.value}}if(model.has(channel_1.OPACITY)){opacityValue={scale:model.scaleName(channel_1.OPACITY),field:model.field(channel_1.OPACITY,opacityFieldDef.type===type_1.ORDINAL?{prefix:"rank"}:{})}}else if(opacityFieldDef&&opacityFieldDef.value){opacityValue={value:opacityFieldDef.value}}if(colorValue!==undefined){if(filled){p.fill=colorValue}else{p.stroke=colorValue}}else{p[filled?"fill":"stroke"]=p[filled?"fill":"stroke"]||{value:model.config().mark.color}}if(!p.fill&&util_1.contains([mark_1.BAR,mark_1.POINT,mark_1.CIRCLE,mark_1.SQUARE],model.mark())){p.fill={value:"transparent"}}if(opacityValue!==undefined){p.opacity=opacityValue}}exports.applyColorAndOpacity=applyColorAndOpacity;function applyConfig(properties,config,propsList){propsList.forEach(function(property){var value=config[property];if(value!==undefined){properties[property]={value:value}}});return properties}exports.applyConfig=applyConfig;function applyMarkConfig(marksProperties,model,propsList){return applyConfig(marksProperties,model.config().mark,propsList)}exports.applyMarkConfig=applyMarkConfig;function numberFormat(fieldDef,format,config,channel){if(fieldDef.type===type_1.QUANTITATIVE&&!fieldDef.bin){if(format){return format}else if(fieldDef.aggregate===aggregate_1.AggregateOp.COUNT&&channel===channel_1.TEXT){return"d"}return config.numberFormat}return undefined}exports.numberFormat=numberFormat;function sortField(orderChannelDef){return(orderChannelDef.sort===sort_1.SortOrder.DESCENDING?"-":"")+fielddef_1.field(orderChannelDef,{binSuffix:"mid"})}exports.sortField=sortField;function timeTemplate(templateField,timeUnit,format,shortTimeLabels,config){if(!timeUnit||format){var _format=format||config.timeFormat;return"{{"+templateField+" | time:'"+_format+"'}}"}else{return timeunit_1.template(timeUnit,templateField,shortTimeLabels)}}exports.timeTemplate=timeTemplate},{"../aggregate":719,"../channel":722,"../fielddef":760,"../mark":763,"../sort":766,"../spec":767,"../timeunit":769,"../type":771,"../util":772,"./facet":740,"./layer":741,"./unit":754}],725:[function(require,module,exports){"use strict";var data_1=require("../data");var spec_1=require("../spec");var util_1=require("../util");var common_1=require("./common");function compile(inputSpec){var spec=spec_1.normalize(inputSpec);var model=common_1.buildModel(spec,null,"");model.parse();return assemble(model)}exports.compile=compile;function assemble(model){var config=model.config();var output=util_1.extend({width:1,height:1,padding:"auto"},config.viewport?{viewport:config.viewport}:{},config.background?{background:config.background}:{},{data:[].concat(model.assembleData([]),model.assembleLayout([])),marks:[assembleRootGroup(model)]});return{spec:output}}function assembleRootGroup(model){var rootGroup=util_1.extend({name:model.name("root"),type:"group"},model.description()?{description:model.description()}:{},{from:{data:model.name(data_1.LAYOUT+"")},properties:{update:util_1.extend({width:{field:model.name("width")},height:{field:model.name("height")}},model.assembleParentGroupProperties(model.config().cell))}});return util_1.extend(rootGroup,model.assembleGroup())}exports.assembleRootGroup=assembleRootGroup},{"../data":756,"../spec":767,"../util":772,"./common":724}],726:[function(require,module,exports){"use strict";var channel_1=require("../channel");var config_1=require("../config");var encoding_1=require("../encoding");var fielddef_1=require("../fielddef");var mark_1=require("../mark");var scale_1=require("../scale");var type_1=require("../type");var util_1=require("../util");var scale_2=require("../compile/scale");function initMarkConfig(mark,encoding,stacked,config){return util_1.extend(["filled","opacity","orient","align"].reduce(function(cfg,property){var value=config.mark[property];switch(property){case"filled":if(value===undefined){cfg[property]=mark!==mark_1.POINT&&mark!==mark_1.LINE&&mark!==mark_1.RULE}break;case"opacity":if(value===undefined){if(util_1.contains([mark_1.POINT,mark_1.TICK,mark_1.CIRCLE,mark_1.SQUARE],mark)){if(!encoding_1.isAggregate(encoding)||encoding_1.has(encoding,channel_1.DETAIL)){cfg[property]=.7}}if(mark===mark_1.BAR&&!stacked){if(encoding_1.has(encoding,channel_1.COLOR)||encoding_1.has(encoding,channel_1.DETAIL)||encoding_1.has(encoding,channel_1.SIZE)){cfg[property]=.7}}if(mark===mark_1.AREA){cfg[property]=.7}}break;case"orient":cfg[property]=orient(mark,encoding,config.mark);break;case"align":if(value===undefined){cfg[property]=encoding_1.has(encoding,channel_1.X)?"center":"right"}}return cfg},{}),config.mark)}exports.initMarkConfig=initMarkConfig;function orient(mark,encoding,markConfig){if(markConfig===void 0){markConfig={}}switch(mark){case mark_1.POINT:case mark_1.CIRCLE:case mark_1.SQUARE:case mark_1.TEXT:return undefined}var yIsRange=encoding.y&&encoding.y2;var xIsRange=encoding.x&&encoding.x2;switch(mark){case mark_1.TICK:var xScaleType=encoding.x?scale_2.scaleType(encoding.x.scale||{},encoding.x,channel_1.X,mark):null;var yScaleType=encoding.y?scale_2.scaleType(encoding.y.scale||{},encoding.y,channel_1.Y,mark):null;if(xScaleType!==scale_1.ScaleType.ORDINAL&&(!encoding.y||yScaleType===scale_1.ScaleType.ORDINAL)||encoding.y.bin){return config_1.Orient.VERTICAL}return config_1.Orient.HORIZONTAL;case mark_1.RULE:if(xIsRange){return config_1.Orient.HORIZONTAL}if(yIsRange){return config_1.Orient.VERTICAL}if(encoding.y){return config_1.Orient.HORIZONTAL}if(encoding.x){return config_1.Orient.VERTICAL}return undefined;case mark_1.BAR:case mark_1.AREA:if(yIsRange){return config_1.Orient.VERTICAL}if(xIsRange){return config_1.Orient.HORIZONTAL}case mark_1.LINE:var xIsMeasure=fielddef_1.isMeasure(encoding.x)||fielddef_1.isMeasure(encoding.x2);var yIsMeasure=fielddef_1.isMeasure(encoding.y)||fielddef_1.isMeasure(encoding.y2);if(xIsMeasure&&!yIsMeasure){return config_1.Orient.HORIZONTAL}else if(!xIsMeasure&&yIsMeasure){return config_1.Orient.VERTICAL}else if(xIsMeasure&&yIsMeasure){if(encoding.x.type===type_1.TEMPORAL){return config_1.Orient.VERTICAL}else if(encoding.y.type===type_1.TEMPORAL){return config_1.Orient.HORIZONTAL}}return config_1.Orient.VERTICAL}console.warn("orient unimplemented for mark",mark);return config_1.Orient.VERTICAL}exports.orient=orient},{"../channel":722,"../compile/scale":753,"../config":755,"../encoding":758,"../fielddef":760,"../mark":763,"../scale":764,"../type":771,"../util":772}],727:[function(require,module,exports){"use strict";var bin_1=require("../../bin");var channel_1=require("../../channel");var fielddef_1=require("../../fielddef");var util_1=require("../../util");var bin;(function(bin_2){function numberFormatExpr(format,expr){return"format('"+format+"', "+expr+")"}function parse(model){return model.reduce(function(binComponent,fieldDef,channel){var bin=model.fieldDef(channel).bin;if(bin){var binTrans=util_1.extend({type:"bin",field:fieldDef.field,output:{start:fielddef_1.field(fieldDef,{binSuffix:"start"}),mid:fielddef_1.field(fieldDef,{binSuffix:"mid"}),end:fielddef_1.field(fieldDef,{binSuffix:"end"})}},typeof bin==="boolean"?{}:bin);if(!binTrans.maxbins&&!binTrans.step){binTrans.maxbins=bin_1.autoMaxBins(channel)}var transform=[binTrans];var isOrdinalColor=model.isOrdinalScale(channel)||channel===channel_1.COLOR;if(isOrdinalColor){var format=(model.axis(channel)||model.legend(channel)||{}).format||model.config().numberFormat;var startField=fielddef_1.field(fieldDef,{datum:true,binSuffix:"start"});var endField=fielddef_1.field(fieldDef,{datum:true,binSuffix:"end"});transform.push({type:"formula",field:fielddef_1.field(fieldDef,{binSuffix:"range"}),expr:numberFormatExpr(format,startField)+" + '-' + "+numberFormatExpr(format,endField)})}var key=util_1.hash(bin)+"_"+fieldDef.field+"oc:"+isOrdinalColor;binComponent[key]=transform}return binComponent},{})}bin_2.parseUnit=parse;function parseFacet(model){var binComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source){util_1.extend(binComponent,childDataComponent.bin);delete childDataComponent.bin}return binComponent}bin_2.parseFacet=parseFacet;function parseLayer(model){var binComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(!childDataComponent.source){util_1.extend(binComponent,childDataComponent.bin);delete childDataComponent.bin}});return binComponent}bin_2.parseLayer=parseLayer;function assemble(component){return util_1.flatten(util_1.vals(component.bin))}bin_2.assemble=assemble})(bin=exports.bin||(exports.bin={}))},{"../../bin":721,"../../channel":722,"../../fielddef":760,"../../util":772}],728:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var type_1=require("../../type");var util_1=require("../../util");var colorRank;(function(colorRank){function parseUnit(model){var colorRankComponent={};if(model.has(channel_1.COLOR)&&model.encoding().color.type===type_1.ORDINAL){colorRankComponent[model.field(channel_1.COLOR)]=[{type:"sort",by:model.field(channel_1.COLOR)},{type:"rank",field:model.field(channel_1.COLOR),output:{rank:model.field(channel_1.COLOR,{prefix:"rank"})}}]}return colorRankComponent}colorRank.parseUnit=parseUnit;function parseFacet(model){var childDataComponent=model.child().component.data;if(!childDataComponent.source){var colorRankComponent=childDataComponent.colorRank;delete childDataComponent.colorRank;return colorRankComponent}return{}}colorRank.parseFacet=parseFacet;function parseLayer(model){var colorRankComponent={};model.children().forEach(function(child){var childDataComponent=child.component.data;if(!childDataComponent.source){util_1.extend(colorRankComponent,childDataComponent.colorRank);delete childDataComponent.colorRank}});return colorRankComponent}colorRank.parseLayer=parseLayer;function assemble(component){return util_1.flatten(util_1.vals(component.colorRank))}colorRank.assemble=assemble})(colorRank=exports.colorRank||(exports.colorRank={}))},{"../../channel":722,"../../type":771,"../../util":772}],729:[function(require,module,exports){"use strict";var util_1=require("../../util");var source_1=require("./source");var formatparse_1=require("./formatparse");var nullfilter_1=require("./nullfilter");var filter_1=require("./filter");var bin_1=require("./bin");var formula_1=require("./formula");var nonpositivenullfilter_1=require("./nonpositivenullfilter");var summary_1=require("./summary");var stackscale_1=require("./stackscale");var timeunit_1=require("./timeunit");var timeunitdomain_1=require("./timeunitdomain");var colorrank_1=require("./colorrank");function parseUnitData(model){return{formatParse:formatparse_1.formatParse.parseUnit(model),nullFilter:nullfilter_1.nullFilter.parseUnit(model),filter:filter_1.filter.parseUnit(model),nonPositiveFilter:nonpositivenullfilter_1.nonPositiveFilter.parseUnit(model),source:source_1.source.parseUnit(model),bin:bin_1.bin.parseUnit(model),calculate:formula_1.formula.parseUnit(model),timeUnit:timeunit_1.timeUnit.parseUnit(model),timeUnitDomain:timeunitdomain_1.timeUnitDomain.parseUnit(model),summary:summary_1.summary.parseUnit(model),stackScale:stackscale_1.stackScale.parseUnit(model),colorRank:colorrank_1.colorRank.parseUnit(model)}}exports.parseUnitData=parseUnitData;function parseFacetData(model){return{formatParse:formatparse_1.formatParse.parseFacet(model),nullFilter:nullfilter_1.nullFilter.parseFacet(model),filter:filter_1.filter.parseFacet(model),nonPositiveFilter:nonpositivenullfilter_1.nonPositiveFilter.parseFacet(model),source:source_1.source.parseFacet(model),bin:bin_1.bin.parseFacet(model),calculate:formula_1.formula.parseFacet(model),timeUnit:timeunit_1.timeUnit.parseFacet(model),timeUnitDomain:timeunitdomain_1.timeUnitDomain.parseFacet(model),summary:summary_1.summary.parseFacet(model),stackScale:stackscale_1.stackScale.parseFacet(model),colorRank:colorrank_1.colorRank.parseFacet(model)}}exports.parseFacetData=parseFacetData;function parseLayerData(model){return{filter:filter_1.filter.parseLayer(model),formatParse:formatparse_1.formatParse.parseLayer(model),nullFilter:nullfilter_1.nullFilter.parseLayer(model),nonPositiveFilter:nonpositivenullfilter_1.nonPositiveFilter.parseLayer(model),source:source_1.source.parseLayer(model),bin:bin_1.bin.parseLayer(model),calculate:formula_1.formula.parseLayer(model),timeUnit:timeunit_1.timeUnit.parseLayer(model),timeUnitDomain:timeunitdomain_1.timeUnitDomain.parseLayer(model),summary:summary_1.summary.parseLayer(model),stackScale:stackscale_1.stackScale.parseLayer(model),colorRank:colorrank_1.colorRank.parseLayer(model)}}exports.parseLayerData=parseLayerData;function assembleData(model,data){var component=model.component.data;var sourceData=source_1.source.assemble(model,component);if(sourceData){data.push(sourceData)}summary_1.summary.assemble(component,model).forEach(function(summaryData){data.push(summaryData)});if(data.length>0){var dataTable=data[data.length-1];var colorRankTransform=colorrank_1.colorRank.assemble(component);if(colorRankTransform.length>0){dataTable.transform=(dataTable.transform||[]).concat(colorRankTransform)}var nonPositiveFilterTransform=nonpositivenullfilter_1.nonPositiveFilter.assemble(component);if(nonPositiveFilterTransform.length>0){dataTable.transform=(dataTable.transform||[]).concat(nonPositiveFilterTransform)}}else{if(util_1.keys(component.colorRank).length>0){throw new Error("Invalid colorRank not merged")}else if(util_1.keys(component.nonPositiveFilter).length>0){throw new Error("Invalid nonPositiveFilter not merged")}}var stackData=stackscale_1.stackScale.assemble(component);if(stackData){data.push(stackData)}timeunitdomain_1.timeUnitDomain.assemble(component).forEach(function(timeUnitDomainData){data.push(timeUnitDomainData)});return data}exports.assembleData=assembleData},{"../../util":772,"./bin":727,"./colorrank":728,"./filter":730,"./formatparse":731,"./formula":732,"./nonpositivenullfilter":733,"./nullfilter":734,"./source":735,"./stackscale":736,"./summary":737,"./timeunit":738,"./timeunitdomain":739}],730:[function(require,module,exports){"use strict";var filter_1=require("../../filter");var util_1=require("../../util");var filter;(function(filter_2){function parse(model){var filter=model.filter();if(util_1.isArray(filter)){return"("+filter.map(function(f){return filter_1.expression(f)}).filter(function(f){return f!==undefined}).join(") && (")+")"}else if(filter){return filter_1.expression(filter)}return undefined}filter_2.parse=parse;filter_2.parseUnit=parse;function parseFacet(model){var filterComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source&&childDataComponent.filter){filterComponent=(filterComponent?filterComponent+" && ":"")+childDataComponent.filter;delete childDataComponent.filter}return filterComponent}filter_2.parseFacet=parseFacet;function parseLayer(model){var filterComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(model.compatibleSource(child)&&childDataComponent.filter&&childDataComponent.filter===filterComponent){delete childDataComponent.filter}});return filterComponent}filter_2.parseLayer=parseLayer;function assemble(component){var filter=component.filter;return filter?[{type:"filter",test:filter}]:[]}filter_2.assemble=assemble})(filter=exports.filter||(exports.filter={}))},{"../../filter":761,"../../util":772}],731:[function(require,module,exports){"use strict";var datetime_1=require("../../datetime");var fielddef_1=require("../../fielddef");var filter_1=require("../../filter");var type_1=require("../../type");var util_1=require("../../util");var formatParse;(function(formatParse){function parse(model){var calcFieldMap=(model.calculate()||[]).reduce(function(fieldMap,formula){fieldMap[formula.field]=true;return fieldMap},{});var parseComponent={};var filter=model.filter();if(!util_1.isArray(filter)){filter=[filter]}filter.forEach(function(f){var val=null;if(filter_1.isEqualFilter(f)){val=f.equal}else if(filter_1.isRangeFilter(f)){val=f.range[0]}else if(filter_1.isOneOfFilter(f)){val=(f.oneOf||f["in"])[0]}if(!!val){if(datetime_1.isDateTime(val)){parseComponent[f["field"]]="date"}else if(util_1.isNumber(val)){parseComponent[f["field"]]="number"}else if(util_1.isString(val)){parseComponent[f["field"]]="string"}}});model.forEach(function(fieldDef){if(fieldDef.type===type_1.TEMPORAL){parseComponent[fieldDef.field]="date"}else if(fieldDef.type===type_1.QUANTITATIVE){if(fielddef_1.isCount(fieldDef)||calcFieldMap[fieldDef.field]){return}parseComponent[fieldDef.field]="number"}});var data=model.data();if(data&&data.format&&data.format.parse){var parse_1=data.format.parse;util_1.keys(parse_1).forEach(function(field){parseComponent[field]=parse_1[field]})}return parseComponent}formatParse.parseUnit=parse;function parseFacet(model){var parseComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source&&childDataComponent.formatParse){util_1.extend(parseComponent,childDataComponent.formatParse);delete childDataComponent.formatParse}return parseComponent}formatParse.parseFacet=parseFacet;function parseLayer(model){var parseComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(model.compatibleSource(child)&&!util_1.differ(childDataComponent.formatParse,parseComponent)){util_1.extend(parseComponent,childDataComponent.formatParse);delete childDataComponent.formatParse}});return parseComponent}formatParse.parseLayer=parseLayer})(formatParse=exports.formatParse||(exports.formatParse={}))},{"../../datetime":757,"../../fielddef":760,"../../filter":761,"../../type":771,"../../util":772}],732:[function(require,module,exports){"use strict";var util_1=require("../../util");var formula;(function(formula_1){function parse(model){return(model.calculate()||[]).reduce(function(formulaComponent,formula){formulaComponent[util_1.hash(formula)]=formula;return formulaComponent},{})}formula_1.parseUnit=parse;function parseFacet(model){var formulaComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source){util_1.extend(formulaComponent,childDataComponent.calculate);delete childDataComponent.calculate}return formulaComponent}formula_1.parseFacet=parseFacet;function parseLayer(model){var formulaComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(!childDataComponent.source&&childDataComponent.calculate){util_1.extend(formulaComponent||{},childDataComponent.calculate);delete childDataComponent.calculate}});return formulaComponent}formula_1.parseLayer=parseLayer;function assemble(component){return util_1.vals(component.calculate).reduce(function(transform,formula){transform.push(util_1.extend({type:"formula"},formula));return transform},[])}formula_1.assemble=assemble})(formula=exports.formula||(exports.formula={}))},{"../../util":772}],733:[function(require,module,exports){"use strict";var scale_1=require("../../scale");var util_1=require("../../util");var nonPositiveFilter;(function(nonPositiveFilter_1){function parseUnit(model){return model.channels().reduce(function(nonPositiveComponent,channel){var scale=model.scale(channel);if(!model.field(channel)||!scale){return nonPositiveComponent}nonPositiveComponent[model.field(channel)]=scale.type===scale_1.ScaleType.LOG;return nonPositiveComponent},{})}nonPositiveFilter_1.parseUnit=parseUnit;function parseFacet(model){var childDataComponent=model.child().component.data;if(!childDataComponent.source){var nonPositiveFilterComponent=childDataComponent.nonPositiveFilter;delete childDataComponent.nonPositiveFilter;return nonPositiveFilterComponent}return{}}nonPositiveFilter_1.parseFacet=parseFacet;function parseLayer(model){var nonPositiveFilter={};model.children().forEach(function(child){var childDataComponent=child.component.data;if(model.compatibleSource(child)&&!util_1.differ(childDataComponent.nonPositiveFilter,nonPositiveFilter)){util_1.extend(nonPositiveFilter,childDataComponent.nonPositiveFilter);delete childDataComponent.nonPositiveFilter}});return nonPositiveFilter}nonPositiveFilter_1.parseLayer=parseLayer;function assemble(component){return util_1.keys(component.nonPositiveFilter).filter(function(field){return component.nonPositiveFilter[field]}).map(function(field){return{type:"filter",test:'datum["'+field+'"] > 0'}})}nonPositiveFilter_1.assemble=assemble})(nonPositiveFilter=exports.nonPositiveFilter||(exports.nonPositiveFilter={}))},{"../../scale":764,"../../util":772}],734:[function(require,module,exports){"use strict";var type_1=require("../../type");var util_1=require("../../util");var DEFAULT_NULL_FILTERS={nominal:false,ordinal:false,quantitative:true,temporal:true};var nullFilter;(function(nullFilter){function parse(model){var filterInvalid=model.filterInvalid();return model.reduce(function(aggregator,fieldDef){if(fieldDef.field!=="*"){if(filterInvalid||filterInvalid===undefined&&fieldDef.field&&DEFAULT_NULL_FILTERS[fieldDef.type]){aggregator[fieldDef.field]=fieldDef}else{aggregator[fieldDef.field]=null}}return aggregator},{})}nullFilter.parseUnit=parse;function parseFacet(model){var nullFilterComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source){util_1.extend(nullFilterComponent,childDataComponent.nullFilter);delete childDataComponent.nullFilter}return nullFilterComponent}nullFilter.parseFacet=parseFacet;function parseLayer(model){var nullFilterComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(model.compatibleSource(child)&&!util_1.differ(childDataComponent.nullFilter,nullFilterComponent)){util_1.extend(nullFilterComponent,childDataComponent.nullFilter);delete childDataComponent.nullFilter}});return nullFilterComponent}nullFilter.parseLayer=parseLayer;function assemble(component){var filters=util_1.keys(component.nullFilter).reduce(function(_filters,field){var fieldDef=component.nullFilter[field];if(fieldDef!==null){_filters.push('datum["'+fieldDef.field+'"] !== null');if(util_1.contains([type_1.QUANTITATIVE,type_1.TEMPORAL],fieldDef.type)){_filters.push('!isNaN(datum["'+fieldDef.field+'"])')}}return _filters},[]);return filters.length>0?[{type:"filter",test:filters.join(" && ")}]:[]}nullFilter.assemble=assemble})(nullFilter=exports.nullFilter||(exports.nullFilter={}))},{"../../type":771,"../../util":772}],735:[function(require,module,exports){"use strict";var data_1=require("../../data");var util_1=require("../../util");var nullfilter_1=require("./nullfilter");var filter_1=require("./filter");var bin_1=require("./bin");var formula_1=require("./formula");var timeunit_1=require("./timeunit");var source;(function(source){function parse(model){var data=model.data();if(data){var sourceData={name:model.dataName(data_1.SOURCE)};if(data.values&&data.values.length>0){sourceData.values=data.values;sourceData.format={type:"json"}}else if(data.url){sourceData.url=data.url;var defaultExtension=/(?:\.([^.]+))?$/.exec(sourceData.url)[1];if(!util_1.contains(["json","csv","tsv","topojson"],defaultExtension)){defaultExtension="json"}var dataFormat=data.format||{};var formatType=dataFormat.type||data["formatType"];sourceData.format=util_1.extend({type:formatType?formatType:defaultExtension},dataFormat.property?{property:dataFormat.property}:{},dataFormat.feature?{feature:dataFormat.feature}:dataFormat.mesh?{mesh:dataFormat.mesh}:{})}return sourceData}else if(!model.parent()){return{name:model.dataName(data_1.SOURCE)}}return undefined}source.parseUnit=parse;function parseFacet(model){var sourceData=parse(model);if(!model.child().component.data.source){model.child().renameData(model.child().dataName(data_1.SOURCE),model.dataName(data_1.SOURCE))}return sourceData}source.parseFacet=parseFacet;function parseLayer(model){var sourceData=parse(model);model.children().forEach(function(child){var childData=child.component.data;if(model.compatibleSource(child)){var canMerge=!childData.filter&&!childData.formatParse&&!childData.nullFilter;if(canMerge){child.renameData(child.dataName(data_1.SOURCE),model.dataName(data_1.SOURCE));delete childData.source}else{childData.source={name:child.dataName(data_1.SOURCE),source:model.dataName(data_1.SOURCE)}}}});return sourceData}source.parseLayer=parseLayer;function assemble(model,component){if(component.source){var sourceData=component.source;if(component.formatParse){component.source.format=component.source.format||{};component.source.format.parse=component.formatParse}sourceData.transform=[].concat(formula_1.formula.assemble(component),nullfilter_1.nullFilter.assemble(component),filter_1.filter.assemble(component),bin_1.bin.assemble(component),timeunit_1.timeUnit.assemble(component));return sourceData}return null}source.assemble=assemble})(source=exports.source||(exports.source={}))},{"../../data":756,"../../util":772,"./bin":727,"./filter":730,"./formula":732,"./nullfilter":734,"./timeunit":738}],736:[function(require,module,exports){"use strict";var data_1=require("../../data");var fielddef_1=require("../../fielddef");var util_1=require("../../util");var stackScale;(function(stackScale){function parseUnit(model){var stackProps=model.stack();if(stackProps){var groupbyChannel=stackProps.groupbyChannel;var fieldChannel=stackProps.fieldChannel;var fields=[];var field_1=model.field(groupbyChannel);if(field_1){fields.push(field_1)}return{name:model.dataName(data_1.STACKED_SCALE),source:model.dataName(data_1.SUMMARY),transform:[util_1.extend({type:"aggregate",summarize:[{ops:["sum"],field:model.field(fieldChannel)}]},fields.length>0?{groupby:fields}:{})]}}return null}stackScale.parseUnit=parseUnit;function parseFacet(model){var child=model.child();var childDataComponent=child.component.data;if(!childDataComponent.source&&childDataComponent.stackScale){var stackComponent=childDataComponent.stackScale;var newName=model.dataName(data_1.STACKED_SCALE);child.renameData(stackComponent.name,newName);stackComponent.name=newName;stackComponent.source=model.dataName(data_1.SUMMARY);stackComponent.transform[0].groupby=model.reduce(function(groupby,fieldDef){groupby.push(fielddef_1.field(fieldDef));return groupby},stackComponent.transform[0].groupby);delete childDataComponent.stackScale;return stackComponent}return null}stackScale.parseFacet=parseFacet;function parseLayer(model){return null}stackScale.parseLayer=parseLayer;function assemble(component){return component.stackScale}stackScale.assemble=assemble})(stackScale=exports.stackScale||(exports.stackScale={}))},{"../../data":756,"../../fielddef":760,"../../util":772}],737:[function(require,module,exports){"use strict";var aggregate_1=require("../../aggregate");var data_1=require("../../data");var fielddef_1=require("../../fielddef");var util_1=require("../../util");var summary;(function(summary){function addDimension(dims,fieldDef){if(fieldDef.bin){dims[fielddef_1.field(fieldDef,{binSuffix:"start"})]=true;dims[fielddef_1.field(fieldDef,{binSuffix:"mid"})]=true;dims[fielddef_1.field(fieldDef,{binSuffix:"end"})]=true;dims[fielddef_1.field(fieldDef,{binSuffix:"range"})]=true}else{dims[fielddef_1.field(fieldDef)]=true}return dims}function parseUnit(model){var dims={};var meas={};model.forEach(function(fieldDef,channel){if(fieldDef.aggregate){if(fieldDef.aggregate===aggregate_1.AggregateOp.COUNT){meas["*"]=meas["*"]||{};meas["*"]["count"]=true}else{meas[fieldDef.field]=meas[fieldDef.field]||{};meas[fieldDef.field][fieldDef.aggregate]=true}}else{addDimension(dims,fieldDef)}});return[{name:model.dataName(data_1.SUMMARY),dimensions:dims,measures:meas}]}summary.parseUnit=parseUnit;function parseFacet(model){var childDataComponent=model.child().component.data;if(!childDataComponent.source&&childDataComponent.summary){var summaryComponents=childDataComponent.summary.map(function(summaryComponent){summaryComponent.dimensions=model.reduce(addDimension,summaryComponent.dimensions);var summaryNameWithoutPrefix=summaryComponent.name.substr(model.child().name("").length);model.child().renameData(summaryComponent.name,summaryNameWithoutPrefix);summaryComponent.name=summaryNameWithoutPrefix;return summaryComponent});delete childDataComponent.summary;return summaryComponents}return[]}summary.parseFacet=parseFacet;function mergeMeasures(parentMeasures,childMeasures){for(var field_1 in childMeasures){if(childMeasures.hasOwnProperty(field_1)){var ops=childMeasures[field_1];for(var op in ops){if(ops.hasOwnProperty(op)){if(field_1 in parentMeasures){parentMeasures[field_1][op]=true}else{parentMeasures[field_1]={op:true}}}}}}}function parseLayer(model){var summaries={};model.children().forEach(function(child){var childDataComponent=child.component.data;if(!childDataComponent.source&&childDataComponent.summary){childDataComponent.summary.forEach(function(childSummary){var key=util_1.hash(childSummary.dimensions);if(key in summaries){mergeMeasures(summaries[key].measures,childSummary.measures)}else{childSummary.name=model.dataName(data_1.SUMMARY)+"_"+util_1.keys(summaries).length;summaries[key]=childSummary}child.renameData(child.dataName(data_1.SUMMARY),summaries[key].name);delete childDataComponent.summary})}});return util_1.vals(summaries)}summary.parseLayer=parseLayer;function assemble(component,model){if(!component.summary){return[]}return component.summary.reduce(function(summaryData,summaryComponent){var dims=summaryComponent.dimensions;var meas=summaryComponent.measures;var groupby=util_1.keys(dims);var summarize=util_1.reduce(meas,function(aggregator,fnDictSet,field){aggregator[field]=util_1.keys(fnDictSet);return aggregator},{});if(util_1.keys(meas).length>0){summaryData.push({name:summaryComponent.name,source:model.dataName(data_1.SOURCE),transform:[{type:"aggregate",groupby:groupby,summarize:summarize}]})}return summaryData},[])}summary.assemble=assemble})(summary=exports.summary||(exports.summary={}))},{"../../aggregate":719,"../../data":756,"../../fielddef":760,"../../util":772}],738:[function(require,module,exports){"use strict";var fielddef_1=require("../../fielddef");var timeunit_1=require("../../timeunit");var type_1=require("../../type");var util_1=require("../../util");var timeUnit;(function(timeUnit){function parse(model){return model.reduce(function(timeUnitComponent,fieldDef,channel){if(fieldDef.type===type_1.TEMPORAL&&fieldDef.timeUnit){var hash=fielddef_1.field(fieldDef);timeUnitComponent[hash]={type:"formula",field:fielddef_1.field(fieldDef),expr:timeunit_1.fieldExpr(fieldDef.timeUnit,fieldDef.field)}}return timeUnitComponent},{})}timeUnit.parseUnit=parse;function parseFacet(model){var timeUnitComponent=parse(model);var childDataComponent=model.child().component.data;if(!childDataComponent.source){util_1.extend(timeUnitComponent,childDataComponent.timeUnit);delete childDataComponent.timeUnit}return timeUnitComponent}timeUnit.parseFacet=parseFacet;function parseLayer(model){var timeUnitComponent=parse(model);model.children().forEach(function(child){var childDataComponent=child.component.data;if(!childDataComponent.source){util_1.extend(timeUnitComponent,childDataComponent.timeUnit);delete childDataComponent.timeUnit}});return timeUnitComponent}timeUnit.parseLayer=parseLayer;function assemble(component){return util_1.vals(component.timeUnit)}timeUnit.assemble=assemble})(timeUnit=exports.timeUnit||(exports.timeUnit={}))},{"../../fielddef":760,"../../timeunit":769,"../../type":771,"../../util":772}],739:[function(require,module,exports){"use strict";var datetime_1=require("../../datetime");var timeunit_1=require("../../timeunit");var util_1=require("../../util");var timeUnitDomain;(function(timeUnitDomain){function parse(model){return model.reduce(function(timeUnitDomainMap,fieldDef,channel){if(fieldDef.timeUnit){var domain=timeunit_1.imputedDomain(fieldDef.timeUnit,channel);if(domain){timeUnitDomainMap[fieldDef.timeUnit]=true}}return timeUnitDomainMap},{})}timeUnitDomain.parseUnit=parse;function parseFacet(model){return util_1.extend(parse(model),model.child().component.data.timeUnitDomain)}timeUnitDomain.parseFacet=parseFacet;function parseLayer(model){return util_1.extend(parse(model),model.children().forEach(function(child){return child.component.data.timeUnitDomain}))}timeUnitDomain.parseLayer=parseLayer;function assemble(component){return util_1.keys(component.timeUnitDomain).reduce(function(timeUnitData,tu){var timeUnit=tu;var domain=timeunit_1.imputedDomain(timeUnit,null);if(domain){var datetime={};datetime[timeUnit]='datum["data"]';timeUnitData.push({name:timeUnit,values:domain,transform:[{type:"formula",field:"date",expr:datetime_1.dateTimeExpr(datetime)}]})}return timeUnitData},[])}timeUnitDomain.assemble=assemble})(timeUnitDomain=exports.timeUnitDomain||(exports.timeUnitDomain={}))},{"../../datetime":757,"../../timeunit":769,"../../util":772}],740:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var axis_1=require("../axis");var channel_1=require("../channel");var config_1=require("../config");var data_1=require("../data");var encoding_1=require("../encoding");var fielddef_1=require("../fielddef");var scale_1=require("../scale");var type_1=require("../type");var util_1=require("../util");var axis_2=require("./axis");var common_1=require("./common");var data_2=require("./data/data");var layout_1=require("./layout");var model_1=require("./model");var scale_2=require("./scale");var FacetModel=function(_super){__extends(FacetModel,_super);function FacetModel(spec,parent,parentGivenName){_super.call(this,spec,parent,parentGivenName);var config=this._config=this._initConfig(spec.config,parent);var child=this._child=common_1.buildModel(spec.spec,this,this.name("child"));var facet=this._facet=this._initFacet(spec.facet);this._scale=this._initScale(facet,config,child);this._axis=this._initAxis(facet,config,child)}FacetModel.prototype._initConfig=function(specConfig,parent){return util_1.mergeDeep(util_1.duplicate(config_1.defaultConfig),parent?parent.config():{},specConfig)};FacetModel.prototype._initFacet=function(facet){facet=util_1.duplicate(facet);var model=this;encoding_1.channelMappingForEach(this.channels(),facet,function(fieldDef,channel){if(fieldDef.type){fieldDef.type=type_1.getFullName(fieldDef.type)}if(!fielddef_1.isDimension(fieldDef)){model.addWarning(channel+" encoding should be ordinal.")}});return facet};FacetModel.prototype._initScale=function(facet,config,child){return[channel_1.ROW,channel_1.COLUMN].reduce(function(_scale,channel){if(facet[channel]){var scaleSpec=facet[channel].scale||{};_scale[channel]=util_1.extend({type:scale_1.ScaleType.ORDINAL,round:config.facet.scale.round,padding:channel===channel_1.ROW&&child.has(channel_1.Y)||channel===channel_1.COLUMN&&child.has(channel_1.X)?config.facet.scale.padding:0},scaleSpec)}return _scale},{})};FacetModel.prototype._initAxis=function(facet,config,child){return[channel_1.ROW,channel_1.COLUMN].reduce(function(_axis,channel){if(facet[channel]){var axisSpec=facet[channel].axis;if(axisSpec!==false){var modelAxis=_axis[channel]=util_1.extend({},config.facet.axis,axisSpec===true?{}:axisSpec||{});if(channel===channel_1.ROW){var yAxis=child.axis(channel_1.Y);if(yAxis&&yAxis.orient!==axis_1.AxisOrient.RIGHT&&!modelAxis.orient){modelAxis.orient=axis_1.AxisOrient.RIGHT}if(child.has(channel_1.X)&&!modelAxis.labelAngle){modelAxis.labelAngle=modelAxis.orient===axis_1.AxisOrient.RIGHT?90:270}}}}return _axis},{})};FacetModel.prototype.facet=function(){return this._facet};FacetModel.prototype.has=function(channel){return!!this._facet[channel]};FacetModel.prototype.child=function(){return this._child};FacetModel.prototype.hasSummary=function(){var summary=this.component.data.summary;for(var i=0;i<summary.length;i++){if(util_1.keys(summary[i].measures).length>0){return true}}return false};FacetModel.prototype.dataTable=function(){return(this.hasSummary()?data_1.SUMMARY:data_1.SOURCE)+""};FacetModel.prototype.fieldDef=function(channel){return this.facet()[channel]};FacetModel.prototype.stack=function(){return null};FacetModel.prototype.parseData=function(){this.child().parseData();this.component.data=data_2.parseFacetData(this)};FacetModel.prototype.parseSelectionData=function(){};FacetModel.prototype.parseLayoutData=function(){this.child().parseLayoutData();this.component.layout=layout_1.parseFacetLayout(this)};FacetModel.prototype.parseScale=function(){var child=this.child();var model=this;child.parseScale();var scaleComponent=this.component.scale=scale_2.parseScaleComponent(this);util_1.keys(child.component.scale).forEach(function(channel){if(true){scaleComponent[channel]=child.component.scale[channel];util_1.vals(scaleComponent[channel]).forEach(function(scale){var scaleNameWithoutPrefix=scale.name.substr(child.name("").length);var newName=model.scaleName(scaleNameWithoutPrefix,true);child.renameScale(scale.name,newName);scale.name=newName});delete child.component.scale[channel]}})};FacetModel.prototype.parseMark=function(){this.child().parseMark();this.component.mark=util_1.extend({name:this.name("cell"),type:"group",from:util_1.extend(this.dataTable()?{data:this.dataTable()}:{},{transform:[{type:"facet",groupby:[].concat(this.has(channel_1.ROW)?[this.field(channel_1.ROW)]:[],this.has(channel_1.COLUMN)?[this.field(channel_1.COLUMN)]:[])}]}),properties:{update:getFacetGroupProperties(this)}},this.child().assembleGroup())};FacetModel.prototype.parseAxis=function(){this.child().parseAxis();this.component.axis=axis_2.parseAxisComponent(this,[channel_1.ROW,channel_1.COLUMN])};FacetModel.prototype.parseAxisGroup=function(){var xAxisGroup=parseAxisGroup(this,channel_1.X);var yAxisGroup=parseAxisGroup(this,channel_1.Y);this.component.axisGroup=util_1.extend(xAxisGroup?{x:xAxisGroup}:{},yAxisGroup?{y:yAxisGroup}:{})};FacetModel.prototype.parseGridGroup=function(){var child=this.child();this.component.gridGroup=util_1.extend(!child.has(channel_1.X)&&this.has(channel_1.COLUMN)?{column:getColumnGridGroups(this)}:{},!child.has(channel_1.Y)&&this.has(channel_1.ROW)?{row:getRowGridGroups(this)}:{})};FacetModel.prototype.parseLegend=function(){this.child().parseLegend();this.component.legend=this._child.component.legend;this._child.component.legend={}};FacetModel.prototype.assembleParentGroupProperties=function(){return null};FacetModel.prototype.assembleData=function(data){data_2.assembleData(this,data);return this._child.assembleData(data)};FacetModel.prototype.assembleLayout=function(layoutData){this._child.assembleLayout(layoutData);return layout_1.assembleLayout(this,layoutData)};FacetModel.prototype.assembleMarks=function(){return[].concat(util_1.vals(this.component.axisGroup),util_1.flatten(util_1.vals(this.component.gridGroup)),this.component.mark)};FacetModel.prototype.channels=function(){return[channel_1.ROW,channel_1.COLUMN]};FacetModel.prototype.mapping=function(){return this.facet()};FacetModel.prototype.isFacet=function(){return true};return FacetModel}(model_1.Model);exports.FacetModel=FacetModel;function getFacetGroupProperties(model){var child=model.child();var mergedCellConfig=util_1.extend({},child.config().cell,child.config().facet.cell);return util_1.extend({x:model.has(channel_1.COLUMN)?{scale:model.scaleName(channel_1.COLUMN),field:model.field(channel_1.COLUMN),offset:model.scale(channel_1.COLUMN).padding/2}:{value:model.config().facet.scale.padding/2},y:model.has(channel_1.ROW)?{scale:model.scaleName(channel_1.ROW),field:model.field(channel_1.ROW),offset:model.scale(channel_1.ROW).padding/2}:{value:model.config().facet.scale.padding/2},width:{field:{parent:model.child().sizeName("width")}},height:{field:{parent:model.child().sizeName("height")}}},child.assembleParentGroupProperties(mergedCellConfig))}function parseAxisGroup(model,channel){var axisGroup=null;var child=model.child();if(child.has(channel)){if(child.axis(channel)){if(true){axisGroup=channel===channel_1.X?getXAxesGroup(model):getYAxesGroup(model);if(child.axis(channel)&&axis_2.gridShow(child,channel)){child.component.axis[channel]=axis_2.parseInnerAxis(channel,child)}else{delete child.component.axis[channel]}}else{}}}return axisGroup}function getXAxesGroup(model){var hasCol=model.has(channel_1.COLUMN);return util_1.extend({name:model.name("x-axes"),type:"group"},hasCol?{from:{data:model.dataTable(),transform:[{type:"aggregate",groupby:[model.field(channel_1.COLUMN)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{parent:model.child().sizeName("width")}},height:{field:{group:"height"}},x:hasCol?{scale:model.scaleName(channel_1.COLUMN),field:model.field(channel_1.COLUMN),offset:model.scale(channel_1.COLUMN).padding/2}:{value:model.config().facet.scale.padding/2}}},axes:[axis_2.parseAxis(channel_1.X,model.child())]})}function getYAxesGroup(model){var hasRow=model.has(channel_1.ROW);return util_1.extend({name:model.name("y-axes"),type:"group"},hasRow?{from:{data:model.dataTable(),transform:[{type:"aggregate",groupby:[model.field(channel_1.ROW)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{group:"width"}},height:{field:{parent:model.child().sizeName("height")}},y:hasRow?{scale:model.scaleName(channel_1.ROW),field:model.field(channel_1.ROW),offset:model.scale(channel_1.ROW).padding/2}:{value:model.config().facet.scale.padding/2}}},axes:[axis_2.parseAxis(channel_1.Y,model.child())]})}function getRowGridGroups(model){var facetGridConfig=model.config().facet.grid;var rowGrid={name:model.name("row-grid"),type:"rule",from:{data:model.dataTable(),transform:[{type:"facet",groupby:[model.field(channel_1.ROW)]}]},properties:{update:{y:{scale:model.scaleName(channel_1.ROW),field:model.field(channel_1.ROW)},x:{value:0,offset:-facetGridConfig.offset},x2:{field:{group:"width"},offset:facetGridConfig.offset},stroke:{value:facetGridConfig.color},strokeOpacity:{value:facetGridConfig.opacity},strokeWidth:{value:.5}}}};return[rowGrid,{name:model.name("row-grid-end"),type:"rule",properties:{update:{y:{field:{group:"height"}},x:{value:0,offset:-facetGridConfig.offset},x2:{field:{group:"width"},offset:facetGridConfig.offset},stroke:{value:facetGridConfig.color},strokeOpacity:{value:facetGridConfig.opacity},strokeWidth:{value:.5}}}}]}function getColumnGridGroups(model){var facetGridConfig=model.config().facet.grid;var columnGrid={name:model.name("column-grid"),type:"rule",from:{data:model.dataTable(),transform:[{type:"facet",groupby:[model.field(channel_1.COLUMN)]}]},properties:{update:{x:{scale:model.scaleName(channel_1.COLUMN),field:model.field(channel_1.COLUMN)},y:{value:0,offset:-facetGridConfig.offset},y2:{field:{group:"height"},offset:facetGridConfig.offset},stroke:{value:facetGridConfig.color},strokeOpacity:{value:facetGridConfig.opacity},strokeWidth:{value:.5}}}};return[columnGrid,{name:model.name("column-grid-end"),type:"rule",properties:{update:{x:{field:{group:"width"}},y:{value:0,offset:-facetGridConfig.offset},y2:{field:{group:"height"},offset:facetGridConfig.offset},stroke:{value:facetGridConfig.color},strokeOpacity:{value:facetGridConfig.opacity},strokeWidth:{value:.5}}}}]}},{"../axis":720,"../channel":722,"../config":755,"../data":756,"../encoding":758,"../fielddef":760,"../scale":764,"../type":771,"../util":772,"./axis":723,"./common":724,"./data/data":729,"./layout":742,"./model":752,"./scale":753}],741:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var util_1=require("../util");var config_1=require("../config");var data_1=require("./data/data");var layout_1=require("./layout");var model_1=require("./model");var common_1=require("./common");var vega_schema_1=require("../vega.schema");var LayerModel=function(_super){__extends(LayerModel,_super);function LayerModel(spec,parent,parentGivenName){var _this=this;_super.call(this,spec,parent,parentGivenName);this._width=spec.width;this._height=spec.height;this._config=this._initConfig(spec.config,parent);this._children=spec.layers.map(function(layer,i){return common_1.buildModel(layer,_this,_this.name("layer_"+i))})}LayerModel.prototype._initConfig=function(specConfig,parent){return util_1.mergeDeep(util_1.duplicate(config_1.defaultConfig),specConfig,parent?parent.config():{})};Object.defineProperty(LayerModel.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(LayerModel.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});LayerModel.prototype.has=function(channel){return false};LayerModel.prototype.children=function(){return this._children};LayerModel.prototype.isOrdinalScale=function(channel){return this._children[0].isOrdinalScale(channel)};LayerModel.prototype.dataTable=function(){return this._children[0].dataTable()};LayerModel.prototype.fieldDef=function(channel){return null};LayerModel.prototype.stack=function(){return null};LayerModel.prototype.parseData=function(){this._children.forEach(function(child){child.parseData()});this.component.data=data_1.parseLayerData(this)};LayerModel.prototype.parseSelectionData=function(){};LayerModel.prototype.parseLayoutData=function(){this._children.forEach(function(child,i){child.parseLayoutData()});this.component.layout=layout_1.parseLayerLayout(this)};LayerModel.prototype.parseScale=function(){var model=this;var scaleComponent=this.component.scale={};this._children.forEach(function(child){child.parseScale();if(true){util_1.keys(child.component.scale).forEach(function(channel){var childScales=child.component.scale[channel];if(!childScales){return}var modelScales=scaleComponent[channel];if(modelScales&&modelScales.main){var modelDomain=modelScales.main.domain;var childDomain=childScales.main.domain;if(util_1.isArray(modelDomain)){if(util_1.isArray(childScales.main.domain)){modelScales.main.domain=modelDomain.concat(childDomain)}else{model.addWarning("custom domain scale cannot be unioned with default field-based domain")}}else{var unionedFields=vega_schema_1.isUnionedDomain(modelDomain)?modelDomain.fields:[modelDomain];if(util_1.isArray(childDomain)){model.addWarning("custom domain scale cannot be unioned with default field-based domain")}var fields=vega_schema_1.isDataRefDomain(childDomain)?unionedFields.concat([childDomain]):vega_schema_1.isUnionedDomain(childDomain)?unionedFields.concat(childDomain.fields):unionedFields;fields=util_1.unique(fields,util_1.hash);if(fields.length>1){modelScales.main.domain={fields:fields}}else{modelScales.main.domain=fields[0]}}modelScales.colorLegend=modelScales.colorLegend?modelScales.colorLegend:childScales.colorLegend;modelScales.binColorLegend=modelScales.binColorLegend?modelScales.binColorLegend:childScales.binColorLegend}else{scaleComponent[channel]=childScales}util_1.vals(childScales).forEach(function(scale){var scaleNameWithoutPrefix=scale.name.substr(child.name("").length);var newName=model.scaleName(scaleNameWithoutPrefix,true);child.renameScale(scale.name,newName);scale.name=newName});delete childScales[channel]})}})};LayerModel.prototype.parseMark=function(){this._children.forEach(function(child){child.parseMark()})};LayerModel.prototype.parseAxis=function(){var axisComponent=this.component.axis={};this._children.forEach(function(child){child.parseAxis();if(true){util_1.keys(child.component.axis).forEach(function(channel){if(!axisComponent[channel]){axisComponent[channel]=child.component.axis[channel]}})}})};LayerModel.prototype.parseAxisGroup=function(){return null};LayerModel.prototype.parseGridGroup=function(){return null};LayerModel.prototype.parseLegend=function(){var legendComponent=this.component.legend={};this._children.forEach(function(child){child.parseLegend();if(true){util_1.keys(child.component.legend).forEach(function(channel){if(!legendComponent[channel]){legendComponent[channel]=child.component.legend[channel]}})}})};LayerModel.prototype.assembleParentGroupProperties=function(){return null};LayerModel.prototype.assembleData=function(data){data_1.assembleData(this,data);this._children.forEach(function(child){child.assembleData(data)});return data};LayerModel.prototype.assembleLayout=function(layoutData){this._children.forEach(function(child){child.assembleLayout(layoutData)});return layout_1.assembleLayout(this,layoutData)};LayerModel.prototype.assembleMarks=function(){return util_1.flatten(this._children.map(function(child){return child.assembleMarks()}))};LayerModel.prototype.channels=function(){return[]};LayerModel.prototype.mapping=function(){return null};LayerModel.prototype.isLayer=function(){return true};LayerModel.prototype.compatibleSource=function(child){var data=this.data();var childData=child.component.data;var compatible=!childData.source||data&&data.url===childData.source.url;return compatible};return LayerModel}(model_1.Model);exports.LayerModel=LayerModel},{"../config":755,"../util":772,"../vega.schema":774,"./common":724,"./data/data":729,"./layout":742,"./model":752}],742:[function(require,module,exports){"use strict";var channel_1=require("../channel");var data_1=require("../data");var scale_1=require("../scale");var util_1=require("../util");var timeunit_1=require("../timeunit");function assembleLayout(model,layoutData){var layoutComponent=model.component.layout;if(!layoutComponent.width&&!layoutComponent.height){return layoutData}if(true){var distinctFields=util_1.keys(util_1.extend(layoutComponent.width.distinct,layoutComponent.height.distinct));var formula=layoutComponent.width.formula.concat(layoutComponent.height.formula).map(function(formula){return util_1.extend({type:"formula"},formula)});return[distinctFields.length>0?{name:model.dataName(data_1.LAYOUT),source:model.dataTable(),transform:[{type:"aggregate",summarize:distinctFields.map(function(field){return{field:field,ops:["distinct"]}})}].concat(formula)}:{name:model.dataName(data_1.LAYOUT),values:[{}],transform:formula}]}}exports.assembleLayout=assembleLayout;function parseUnitLayout(model){return{width:parseUnitSizeLayout(model,channel_1.X),height:parseUnitSizeLayout(model,channel_1.Y)}}exports.parseUnitLayout=parseUnitLayout;function parseUnitSizeLayout(model,channel){return{distinct:getDistinct(model,channel),formula:[{field:model.channelSizeName(channel),expr:unitSizeExpr(model,channel)}]}}function unitSizeExpr(model,channel){var scale=model.scale(channel);if(scale){if(scale.type===scale_1.ScaleType.ORDINAL&&scale.bandSize!==scale_1.BANDSIZE_FIT){return"("+cardinalityExpr(model,channel)+" + "+1+") * "+scale.bandSize}}return(channel===channel_1.X?model.width:model.height)+""}exports.unitSizeExpr=unitSizeExpr;function parseFacetLayout(model){return{width:parseFacetSizeLayout(model,channel_1.COLUMN),height:parseFacetSizeLayout(model,channel_1.ROW)}}exports.parseFacetLayout=parseFacetLayout;function parseFacetSizeLayout(model,channel){var childLayoutComponent=model.child().component.layout;var sizeType=channel===channel_1.ROW?"height":"width";var childSizeComponent=childLayoutComponent[sizeType];if(true){var distinct=util_1.extend(getDistinct(model,channel),childSizeComponent.distinct);var formula=childSizeComponent.formula.concat([{field:model.channelSizeName(channel),expr:facetSizeFormula(model,channel,model.child().channelSizeName(channel))}]);delete childLayoutComponent[sizeType];return{distinct:distinct,formula:formula}}}function facetSizeFormula(model,channel,innerSize){var scale=model.scale(channel);if(model.has(channel)){return'(datum["'+innerSize+'"] + '+scale.padding+")"+" * "+cardinalityExpr(model,channel)}else{return'datum["'+innerSize+'"] + '+model.config().facet.scale.padding}}function parseLayerLayout(model){return{width:parseLayerSizeLayout(model,channel_1.X),height:parseLayerSizeLayout(model,channel_1.Y)}}exports.parseLayerLayout=parseLayerLayout;function parseLayerSizeLayout(model,channel){if(true){var childLayoutComponent=model.children()[0].component.layout;var sizeType_1=channel===channel_1.Y?"height":"width";var childSizeComponent=childLayoutComponent[sizeType_1];var distinct=childSizeComponent.distinct;var formula=[{field:model.channelSizeName(channel),expr:childSizeComponent.formula[0].expr}];model.children().forEach(function(child){delete child.component.layout[sizeType_1]});return{distinct:distinct,formula:formula}}}function getDistinct(model,channel){if(model.has(channel)&&model.isOrdinalScale(channel)){var scale=model.scale(channel);if(scale.type===scale_1.ScaleType.ORDINAL&&!(scale.domain instanceof Array)){var distinctField=model.field(channel);var distinct={};distinct[distinctField]=true;return distinct}}return{}}function cardinalityExpr(model,channel){var scale=model.scale(channel);if(scale.domain instanceof Array){return scale.domain.length}var timeUnit=model.fieldDef(channel).timeUnit;var timeUnitDomain=timeUnit?timeunit_1.imputedDomain(timeUnit,channel):null;return timeUnitDomain!==null?timeUnitDomain.length:model.field(channel,{datum:true,prefix:"distinct"})}exports.cardinalityExpr=cardinalityExpr},{"../channel":722,"../data":756,"../scale":764,"../timeunit":769,"../util":772}],743:[function(require,module,exports){"use strict";var channel_1=require("../channel");var datetime_1=require("../datetime");var fielddef_1=require("../fielddef");var mark_1=require("../mark");var type_1=require("../type");var util_1=require("../util");var common_1=require("./common");var scale_1=require("./scale");function parseLegendComponent(model){return[channel_1.COLOR,channel_1.SIZE,channel_1.SHAPE,channel_1.OPACITY].reduce(function(legendComponent,channel){if(model.legend(channel)){legendComponent[channel]=parseLegend(model,channel)}return legendComponent},{})}exports.parseLegendComponent=parseLegendComponent;function getLegendDefWithScale(model,channel){switch(channel){case channel_1.COLOR:var fieldDef=model.encoding().color;var scale=model.scaleName(useColorLegendScale(fieldDef)?scale_1.COLOR_LEGEND:channel_1.COLOR);return model.config().mark.filled?{fill:scale}:{stroke:scale};case channel_1.SIZE:return{size:model.scaleName(channel_1.SIZE)};case channel_1.SHAPE:return{shape:model.scaleName(channel_1.SHAPE)};case channel_1.OPACITY:return{opacity:model.scaleName(channel_1.OPACITY)}}return null}function parseLegend(model,channel){var fieldDef=model.fieldDef(channel);var legend=model.legend(channel);var config=model.config();var def=getLegendDefWithScale(model,channel);def.title=title(legend,fieldDef,config);var format=common_1.numberFormat(fieldDef,legend.format,config,channel);if(format){def.format=format}var vals=values(legend);if(vals){def.values=vals}["offset","orient"].forEach(function(property){var value=legend[property];if(value!==undefined){def[property]=value}});var props=typeof legend!=="boolean"&&legend.properties||{};["title","symbols","legend","labels"].forEach(function(group){var value=properties[group]?properties[group](fieldDef,props[group],model,channel):props[group];if(value!==undefined&&util_1.keys(value).length>0){def.properties=def.properties||{};def.properties[group]=value}});return def}exports.parseLegend=parseLegend;function title(legend,fieldDef,config){if(legend.title!==undefined){return legend.title}return fielddef_1.title(fieldDef,config)}exports.title=title;function values(legend){var vals=legend.values;if(vals&&datetime_1.isDateTime(vals[0])){return vals.map(function(dt){return datetime_1.timestamp(dt,true)})}return vals}exports.values=values;function useColorLegendScale(fieldDef){return fieldDef.type===type_1.ORDINAL||fieldDef.bin||fieldDef.timeUnit}exports.useColorLegendScale=useColorLegendScale;var properties;(function(properties){function symbols(fieldDef,symbolsSpec,model,channel){var symbols={};var mark=model.mark();var legend=model.legend(channel);switch(mark){case mark_1.BAR:case mark_1.TICK:case mark_1.TEXT:symbols.shape={value:"square"};break;case mark_1.CIRCLE:case mark_1.SQUARE:symbols.shape={value:mark};break;case mark_1.POINT:case mark_1.LINE:case mark_1.AREA:break}var cfg=model.config();var filled=cfg.mark.filled;var config=channel===channel_1.COLOR?util_1.without(common_1.FILL_STROKE_CONFIG,[filled?"fill":"stroke","strokeDash","strokeDashOffset"]):util_1.without(common_1.FILL_STROKE_CONFIG,["strokeDash","strokeDashOffset"]);config=util_1.without(config,["strokeDash","strokeDashOffset"]);common_1.applyMarkConfig(symbols,model,config);if(filled){symbols.strokeWidth={value:0}}if(channel===channel_1.OPACITY){delete symbols.opacity}var value;if(model.has(channel_1.COLOR)&&channel===channel_1.COLOR){if(useColorLegendScale(fieldDef)){value={scale:model.scaleName(channel_1.COLOR),field:"data"}}}else if(model.encoding().color&&model.encoding().color.value){value={value:model.encoding().color.value}}if(value!==undefined){if(filled){symbols.fill=value}else{symbols.stroke=value}}else if(channel!==channel_1.COLOR){symbols[filled?"fill":"stroke"]=symbols[filled?"fill":"stroke"]||{value:cfg.mark.color}}if(legend.symbolColor!==undefined){symbols.fill={value:legend.symbolColor}}else if(symbols.fill===undefined){if(cfg.mark.fill!==undefined){symbols.fill={value:cfg.mark.fill}}else if(cfg.mark.stroke!==undefined){symbols.stroke={value:cfg.mark.stroke}}}if(channel!==channel_1.SHAPE){if(legend.symbolShape!==undefined){symbols.shape={value:legend.symbolShape}}else if(cfg.mark.shape!==undefined){symbols.shape={value:cfg.mark.shape}}}if(channel!==channel_1.SIZE){if(legend.symbolSize!==undefined){symbols.size={value:legend.symbolSize}}}if(legend.symbolStrokeWidth!==undefined){symbols.strokeWidth={value:legend.symbolStrokeWidth}}symbols=util_1.extend(symbols,symbolsSpec||{});return util_1.keys(symbols).length>0?symbols:undefined}properties.symbols=symbols;function labels(fieldDef,labelsSpec,model,channel){var legend=model.legend(channel);var config=model.config();var labels={};if(channel===channel_1.COLOR){if(fieldDef.type===type_1.ORDINAL){labelsSpec=util_1.extend({text:{scale:model.scaleName(scale_1.COLOR_LEGEND),field:"data"}},labelsSpec||{})}else if(fieldDef.bin){labelsSpec=util_1.extend({text:{scale:model.scaleName(scale_1.COLOR_LEGEND_LABEL),field:"data"}},labelsSpec||{})}else if(fieldDef.type===type_1.TEMPORAL){labelsSpec=util_1.extend({text:{template:common_1.timeTemplate('datum["data"]',fieldDef.timeUnit,legend.format,legend.shortTimeLabels,config)}},labelsSpec||{})}}if(legend.labelAlign!==undefined){labels.align={value:legend.labelAlign}}if(legend.labelColor!==undefined){labels.fill={value:legend.labelColor}}if(legend.labelFont!==undefined){labels.font={value:legend.labelFont}}if(legend.labelFontSize!==undefined){labels.fontSize={value:legend.labelFontSize}}if(legend.labelBaseline!==undefined){labels.baseline={value:legend.labelBaseline}}labels=util_1.extend(labels,labelsSpec||{});return util_1.keys(labels).length>0?labels:undefined}properties.labels=labels;function title(fieldDef,titleSpec,model,channel){var legend=model.legend(channel);var titles={};if(legend.titleColor!==undefined){titles.fill={value:legend.titleColor}}if(legend.titleFont!==undefined){titles.font={value:legend.titleFont}}if(legend.titleFontSize!==undefined){titles.fontSize={value:legend.titleFontSize}}if(legend.titleFontWeight!==undefined){titles.fontWeight={value:legend.titleFontWeight}}titles=util_1.extend(titles,titleSpec||{});return util_1.keys(titles).length>0?titles:undefined}properties.title=title})(properties=exports.properties||(exports.properties={}))},{"../channel":722,"../datetime":757,"../fielddef":760,"../mark":763,"../type":771,"../util":772,"./common":724,"./scale":753}],744:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var config_1=require("../../config");var fielddef_1=require("../../fielddef");var scale_1=require("../../scale");var util_1=require("../../util");var common_1=require("../common");var area;(function(area){function markType(){return"area"}area.markType=markType;function properties(model){var p={};var config=model.config();var orient=config.mark.orient;p.orient={value:orient};var stack=model.stack();p.x=x(model.encoding().x,model.scaleName(channel_1.X),model.scale(channel_1.X),orient,stack);p.y=y(model.encoding().y,model.scaleName(channel_1.Y),model.scale(channel_1.Y),orient,stack);var _x2=x2(model.encoding().x,model.encoding().x2,model.scaleName(channel_1.X),model.scale(channel_1.X),orient,stack);if(_x2){p.x2=_x2}var _y2=y2(model.encoding().y,model.encoding().y2,model.scaleName(channel_1.Y),model.scale(channel_1.Y),orient,stack);if(_y2){p.y2=_y2}common_1.applyColorAndOpacity(p,model);common_1.applyMarkConfig(p,model,["interpolate","tension"]);return p}area.properties=properties;function x(fieldDef,scaleName,scale,orient,stack){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"start"})}}else if(fieldDef){if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}else if(fieldDef.value){return{scale:scaleName,value:fieldDef.value}}}return{value:0}}area.x=x;function x2(xFieldDef,x2FieldDef,scaleName,scale,orient,stack){if(orient===config_1.Orient.HORIZONTAL){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(xFieldDef,{suffix:"end"})}}else if(x2FieldDef){if(x2FieldDef.field){return{scale:scaleName,field:fielddef_1.field(x2FieldDef)}}else if(x2FieldDef.value){return{scale:scaleName,value:x2FieldDef.value}}}if(util_1.contains([scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],scale.type)||scale.zero===false){return{value:0}}return{scale:scaleName,value:0}}return undefined}area.x2=x2;function y(fieldDef,scaleName,scale,orient,stack){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"start"})}}else if(fieldDef){if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}else if(fieldDef.value){return{scale:scaleName,value:fieldDef.value}}}return{value:0}}area.y=y;function y2(yFieldDef,y2FieldDef,scaleName,scale,orient,stack){if(orient!==config_1.Orient.HORIZONTAL){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(yFieldDef,{suffix:"end"})}}else if(y2FieldDef){if(y2FieldDef.field){return{scale:scaleName,field:fielddef_1.field(y2FieldDef)}}else if(y2FieldDef.value){return{scale:scaleName,value:y2FieldDef.value}}}if(util_1.contains([scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],scale.type)||scale.zero===false){return{field:{group:"height"}}}return{scale:scaleName,value:0}}return undefined}area.y2=y2})(area=exports.area||(exports.area={}))},{"../../channel":722,"../../config":755,"../../fielddef":760,"../../scale":764,"../../util":772,"../common":724}],745:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var config_1=require("../../config");var fielddef_1=require("../../fielddef");var scale_1=require("../../scale");var util_1=require("../../util");var common_1=require("../common");var bar;(function(bar){function markType(){return"rect"}bar.markType=markType;function properties(model){var p={};var orient=model.config().mark.orient;var stack=model.stack();var xFieldDef=model.encoding().x;var x2FieldDef=model.encoding().x2;var xIsMeasure=fielddef_1.isMeasure(xFieldDef)||fielddef_1.isMeasure(x2FieldDef);if(stack&&channel_1.X===stack.fieldChannel){p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{suffix:"start"})};p.x2={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{suffix:"end"})}}else if(xIsMeasure){if(orient===config_1.Orient.HORIZONTAL){if(model.has(channel_1.X)){p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X)}}else{p.x={scale:model.scaleName(channel_1.X),value:0}}if(model.has(channel_1.X2)){p.x2={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X2)}}else{if(util_1.contains([scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],model.scale(channel_1.X).type)||model.scale(channel_1.X).zero===false){p.x2={value:0}}else{p.x2={scale:model.scaleName(channel_1.X),value:0}}}}else{p.xc={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X)};p.width={value:sizeValue(model,channel_1.X)}}}else{if(model.has(channel_1.X)){if(model.encoding().x.bin){if(model.has(channel_1.SIZE)&&orient!==config_1.Orient.HORIZONTAL){p.xc={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{binSuffix:"mid"})};p.width={scale:model.scaleName(channel_1.SIZE),field:model.field(channel_1.SIZE)}}else{p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{binSuffix:"start"}),offset:1};p.x2={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{binSuffix:"end"})}}}else if(model.scale(channel_1.X).bandSize===scale_1.BANDSIZE_FIT){p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X),offset:.5}}else{p.xc={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X)}}}else{p.x={value:0,offset:2}}p.width=model.has(channel_1.X)&&model.scale(channel_1.X).bandSize===scale_1.BANDSIZE_FIT?{scale:model.scaleName(channel_1.X),band:true,offset:-.5}:model.has(channel_1.SIZE)&&orient!==config_1.Orient.HORIZONTAL?{scale:model.scaleName(channel_1.SIZE),field:model.field(channel_1.SIZE)}:{value:sizeValue(model,channel_1.X)}}var yFieldDef=model.encoding().y;var y2FieldDef=model.encoding().y2;var yIsMeasure=fielddef_1.isMeasure(yFieldDef)||fielddef_1.isMeasure(y2FieldDef);if(stack&&channel_1.Y===stack.fieldChannel){p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{suffix:"start"})};p.y2={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{suffix:"end"})}}else if(yIsMeasure){if(orient!==config_1.Orient.HORIZONTAL){if(model.has(channel_1.Y)){p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y)}}else{p.y={scale:model.scaleName(channel_1.Y),value:0}}if(model.has(channel_1.Y2)){p.y2={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y2)}}else{if(util_1.contains([scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],model.scale(channel_1.Y).type)||model.scale(channel_1.Y).zero===false){p.y2={field:{group:"height"}}}else{p.y2={scale:model.scaleName(channel_1.Y),value:0}}}}else{p.yc={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y)};p.height={value:sizeValue(model,channel_1.Y)}}}else{if(model.has(channel_1.Y)){if(model.encoding().y.bin){if(model.has(channel_1.SIZE)&&orient===config_1.Orient.HORIZONTAL){p.yc={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{binSuffix:"mid"})};p.height={scale:model.scaleName(channel_1.SIZE),field:model.field(channel_1.SIZE)}}else{p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{binSuffix:"start"})};p.y2={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{binSuffix:"end"}),offset:1}}}else if(model.scale(channel_1.Y).bandSize===scale_1.BANDSIZE_FIT){p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y),offset:.5}}else{p.yc={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y)}}}else{p.y2={field:{group:"height"},offset:-1}}p.height=model.has(channel_1.Y)&&model.scale(channel_1.Y).bandSize===scale_1.BANDSIZE_FIT?{scale:model.scaleName(channel_1.Y),band:true,offset:-.5}:model.has(channel_1.SIZE)&&orient===config_1.Orient.HORIZONTAL?{scale:model.scaleName(channel_1.SIZE),field:model.field(channel_1.SIZE)}:{value:sizeValue(model,channel_1.Y)}}common_1.applyColorAndOpacity(p,model);return p}bar.properties=properties;function sizeValue(model,channel){var fieldDef=model.encoding().size;if(fieldDef&&fieldDef.value!==undefined){return fieldDef.value}var markConfig=model.config().mark;if(markConfig.barSize){return markConfig.barSize}return model.isOrdinalScale(channel)?model.scale(channel).bandSize-1:!model.has(channel)?model.config().scale.bandSize-1:markConfig.barThinSize}})(bar=exports.bar||(exports.bar={}))},{"../../channel":722,"../../config":755,"../../fielddef":760,"../../scale":764,"../../util":772,"../common":724}],746:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var fielddef_1=require("../../fielddef");var common_1=require("../common");var line;(function(line){function markType(){return"line"}line.markType=markType;function properties(model){var p={};var config=model.config();var stack=model.stack();p.x=x(model.encoding().x,model.scaleName(channel_1.X),stack,config);p.y=y(model.encoding().y,model.scaleName(channel_1.Y),stack,config);var _size=size(model.encoding().size,config);if(_size){p.strokeWidth=_size}common_1.applyColorAndOpacity(p,model);common_1.applyMarkConfig(p,model,["interpolate","tension"]);return p}line.properties=properties;function x(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}return{value:0}}function y(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}return{field:{group:"height"}}}function size(fieldDef,config){if(fieldDef&&fieldDef.value!==undefined){return{value:fieldDef.value}}return{value:config.mark.lineSize}}})(line=exports.line||(exports.line={}))},{"../../channel":722,"../../fielddef":760,"../common":724}],747:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var config_1=require("../../config");var encoding_1=require("../../encoding");var fielddef_1=require("../../fielddef");var mark_1=require("../../mark");var scale_1=require("../../scale");var sort_1=require("../../sort");var util_1=require("../../util");var area_1=require("./area");var bar_1=require("./bar");var common_1=require("../common");var line_1=require("./line");var point_1=require("./point");var rule_1=require("./rule");var text_1=require("./text");var tick_1=require("./tick");var markCompiler={area:area_1.area,bar:bar_1.bar,line:line_1.line,point:point_1.point,text:text_1.text,tick:tick_1.tick,rule:rule_1.rule,circle:point_1.circle,square:point_1.square};function parseMark(model){if(util_1.contains([mark_1.LINE,mark_1.AREA],model.mark())){return parsePathMark(model)}else{return parseNonPathMark(model)}}exports.parseMark=parseMark;function parsePathMark(model){var mark=model.mark();var isFaceted=model.parent()&&model.parent().isFacet();var dataFrom={data:model.dataTable()};var details=detailFields(model);var pathMarks=[{name:model.name("marks"),type:markCompiler[mark].markType(),from:util_1.extend(isFaceted||details.length>0?{}:dataFrom,{transform:[{type:"sort",by:sortPathBy(model)}]}),properties:{update:markCompiler[mark].properties(model)}}];if(details.length>0){var facetTransform={type:"facet",groupby:details};var transform=model.stack()?stackTransforms(model,true).concat(facetTransform):[].concat(facetTransform,model.has(channel_1.ORDER)?[{type:"sort",by:sortBy(model)}]:[]);return[{name:model.name("pathgroup"),type:"group",from:util_1.extend(isFaceted?{}:dataFrom,{transform:transform}),properties:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:pathMarks}]}else{return pathMarks}}function parseNonPathMark(model){var mark=model.mark();var isFaceted=model.parent()&&model.parent().isFacet();var dataFrom={data:model.dataTable()};var marks=[];if(mark===mark_1.TEXT&&model.has(channel_1.COLOR)&&model.config().mark.applyColorToBackground&&!model.has(channel_1.X)&&!model.has(channel_1.Y)){marks.push(util_1.extend({name:model.name("background"),type:"rect"},isFaceted?{}:{from:dataFrom},{properties:{update:text_1.text.background(model)}}))}marks.push(util_1.extend({name:model.name("marks"),type:markCompiler[mark].markType()},!isFaceted||model.stack()||model.has(channel_1.ORDER)?{from:util_1.extend(isFaceted?{}:dataFrom,model.stack()?{transform:stackTransforms(model,false)}:model.has(channel_1.ORDER)?{transform:[{type:"sort",by:sortBy(model)}]}:{})}:{},{properties:{update:markCompiler[mark].properties(model)}}));return marks}function sortBy(model){if(model.has(channel_1.ORDER)){var channelDef=model.encoding().order;if(channelDef instanceof Array){return channelDef.map(common_1.sortField)}else{return common_1.sortField(channelDef)}}return null}function sortPathBy(model){if(model.mark()===mark_1.LINE&&model.has(channel_1.PATH)){var channelDef=model.encoding().path;if(channelDef instanceof Array){return channelDef.map(common_1.sortField)}else{return common_1.sortField(channelDef)}}else{var dimensionChannel=model.config().mark.orient===config_1.Orient.HORIZONTAL?channel_1.Y:channel_1.X;var sort=model.sort(dimensionChannel);if(sort_1.isSortField(sort)){return"-"+fielddef_1.field({aggregate:encoding_1.isAggregate(model.encoding())?sort.op:undefined,field:sort.field})}else{return"-"+model.field(dimensionChannel,{binSuffix:"mid"})}}}function detailFields(model){return[channel_1.COLOR,channel_1.DETAIL,channel_1.OPACITY,channel_1.SHAPE].reduce(function(details,channel){if(model.has(channel)&&!model.fieldDef(channel).aggregate){details.push(model.field(channel))}return details},[])}function stackTransforms(model,impute){var stackByFields=getStackByFields(model);if(impute){return[imputeTransform(model,stackByFields),stackTransform(model,stackByFields)]}return[stackTransform(model,stackByFields)]}function getStackByFields(model){var encoding=model.encoding();return channel_1.STACK_GROUP_CHANNELS.reduce(function(fields,channel){var channelEncoding=encoding[channel];if(encoding_1.has(encoding,channel)){if(util_1.isArray(channelEncoding)){channelEncoding.forEach(function(fieldDef){fields.push(fielddef_1.field(fieldDef))})}else{var fieldDef=channelEncoding;var scale=model.scale(channel);var _field=fielddef_1.field(fieldDef,{binSuffix:scale&&scale.type===scale_1.ScaleType.ORDINAL?"range":"start"});if(!!_field){fields.push(_field)}}}return fields},[])}function imputeTransform(model,stackFields){var stack=model.stack();return{type:"impute",field:model.field(stack.fieldChannel),groupby:stackFields,orderby:[model.field(stack.groupbyChannel,{binSuffix:"mid"})],method:"value",value:0}}function stackTransform(model,stackFields){var stack=model.stack();var encoding=model.encoding();var sortby=model.has(channel_1.ORDER)?(util_1.isArray(encoding[channel_1.ORDER])?encoding[channel_1.ORDER]:[encoding[channel_1.ORDER]]).map(common_1.sortField):stackFields.map(function(field){return"-"+field});var valName=model.field(stack.fieldChannel);var transform={type:"stack",groupby:[model.field(stack.groupbyChannel,{binSuffix:"mid"})||"undefined"],field:model.field(stack.fieldChannel),sortby:sortby,output:{start:valName+"_start",end:valName+"_end"}};if(stack.offset){transform.offset=stack.offset}return transform}},{"../../channel":722,"../../config":755,"../../encoding":758,"../../fielddef":760,"../../mark":763,"../../scale":764,"../../sort":766,"../../util":772,"../common":724,"./area":744,"./bar":745,"./line":746,"./point":748,"./rule":749,"./text":750,"./tick":751}],748:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var fielddef_1=require("../../fielddef");var common_1=require("../common");var point;(function(point){function markType(){return"symbol"}point.markType=markType;function properties(model,fixedShape){var p={};var config=model.config();var stack=model.stack();p.x=x(model.encoding().x,model.scaleName(channel_1.X),stack,config);p.y=y(model.encoding().y,model.scaleName(channel_1.Y),stack,config);p.size=size(model.encoding().size,model.scaleName(channel_1.SIZE),model.scale(channel_1.SIZE),config);p.shape=shape(model.encoding().shape,model.scaleName(channel_1.SHAPE),model.scale(channel_1.SHAPE),config,fixedShape);common_1.applyColorAndOpacity(p,model);return p}point.properties=properties;function x(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}return{value:config.scale.bandSize/2}}function y(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}return{value:config.scale.bandSize/2}}function size(fieldDef,scaleName,scale,config){if(fieldDef){if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{scaleType:scale.type})}}else if(fieldDef.value!==undefined){return{value:fieldDef.value}}}return{value:config.mark.size}}function shape(fieldDef,scaleName,scale,config,fixedShape){if(fixedShape){return{value:fixedShape}}else if(fieldDef){if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{scaleType:scale.type})}}else if(fieldDef.value){return{value:fieldDef.value}}}return{value:config.mark.shape}}})(point=exports.point||(exports.point={}));var circle;(function(circle){function markType(){return"symbol"}circle.markType=markType;function properties(model){return point.properties(model,"circle")}circle.properties=properties})(circle=exports.circle||(exports.circle={}));var square;(function(square){function markType(){return"symbol"}square.markType=markType;function properties(model){return point.properties(model,"square")}square.properties=properties})(square=exports.square||(exports.square={}))},{"../../channel":722,"../../fielddef":760,"../common":724}],749:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var config_1=require("../../config");var common_1=require("../common");var rule;(function(rule){function markType(){return"rule"}rule.markType=markType;function properties(model){var p={};if(model.config().mark.orient===config_1.Orient.VERTICAL){if(model.has(channel_1.X)){p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{binSuffix:"mid"})}}else{p.x={value:0}}if(model.has(channel_1.Y)){p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{binSuffix:"mid"})}}else{p.y={field:{group:"height"}}}if(model.has(channel_1.Y2)){p.y2={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y2,{binSuffix:"mid"})}}else{p.y2={value:0}}}else{if(model.has(channel_1.Y)){p.y={scale:model.scaleName(channel_1.Y),field:model.field(channel_1.Y,{binSuffix:"mid"})}}else{p.y={value:0}}if(model.has(channel_1.X)){p.x={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X,{binSuffix:"mid"})}}else{p.x={value:0}}if(model.has(channel_1.X2)){p.x2={scale:model.scaleName(channel_1.X),field:model.field(channel_1.X2,{binSuffix:"mid"})}}else{p.x2={field:{group:"width"}}}}common_1.applyColorAndOpacity(p,model);if(model.has(channel_1.SIZE)){p.strokeWidth={scale:model.scaleName(channel_1.SIZE),field:model.field(channel_1.SIZE)}}else{p.strokeWidth={value:sizeValue(model)}}return p}rule.properties=properties;function sizeValue(model){var fieldDef=model.encoding().size;if(fieldDef&&fieldDef.value!==undefined){return fieldDef.value}return model.config().mark.ruleSize}})(rule=exports.rule||(exports.rule={}))},{"../../channel":722,"../../config":755,"../common":724}],750:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var common_1=require("../common");var fielddef_1=require("../../fielddef");var type_1=require("../../type");var text;(function(text_1){function markType(){return"text"}text_1.markType=markType;function background(model){return{x:{value:0},y:{value:0},width:{field:{group:"width"}},height:{field:{group:"height"}},fill:{scale:model.scaleName(channel_1.COLOR),field:model.field(channel_1.COLOR,model.encoding().color.type===type_1.ORDINAL?{prefix:"rank"}:{})}}}text_1.background=background;function properties(model){var p={};common_1.applyMarkConfig(p,model,["angle","align","baseline","dx","dy","font","fontWeight","fontStyle","radius","theta","text"]);var config=model.config();var stack=model.stack();var textFieldDef=model.encoding().text;p.x=x(model.encoding().x,model.scaleName(channel_1.X),stack,config,textFieldDef);p.y=y(model.encoding().y,model.scaleName(channel_1.Y),stack,config);p.fontSize=size(model.encoding().size,model.scaleName(channel_1.SIZE),config);p.text=text(textFieldDef,model.scaleName(channel_1.TEXT),config);if(model.config().mark.applyColorToBackground&&!model.has(channel_1.X)&&!model.has(channel_1.Y)){p.fill={value:"black"};var opacity=model.config().mark.opacity;if(opacity){p.opacity={value:opacity}}}else{common_1.applyColorAndOpacity(p,model)}return p}text_1.properties=properties;function x(fieldDef,scaleName,stack,config,textFieldDef){if(fieldDef){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}if(textFieldDef&&textFieldDef.type===type_1.QUANTITATIVE){return{field:{group:"width"},offset:-5}}else{return{value:config.scale.textBandWidth/2}}}function y(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}}return{value:config.scale.bandSize/2}}function size(sizeFieldDef,scaleName,config){if(sizeFieldDef){if(sizeFieldDef.field){return{scale:scaleName,field:fielddef_1.field(sizeFieldDef)}}if(sizeFieldDef.value){return{value:sizeFieldDef.value}}}return{value:config.mark.fontSize}}function text(textFieldDef,scaleName,config){if(textFieldDef){if(textFieldDef.field){if(type_1.QUANTITATIVE===textFieldDef.type){var format=common_1.numberFormat(textFieldDef,config.mark.format,config,channel_1.TEXT);var filter="number"+(format?":'"+format+"'":"");return{template:"{{"+fielddef_1.field(textFieldDef,{datum:true})+" | "+filter+"}}"}}else if(type_1.TEMPORAL===textFieldDef.type){return{template:common_1.timeTemplate(fielddef_1.field(textFieldDef,{datum:true}),textFieldDef.timeUnit,config.mark.format,config.mark.shortTimeLabels,config)}}else{return{field:textFieldDef.field}}}else if(textFieldDef.value){return{value:textFieldDef.value}}}return{value:config.mark.text}}})(text=exports.text||(exports.text={}))},{"../../channel":722,"../../fielddef":760,"../../type":771,"../common":724}],751:[function(require,module,exports){"use strict";var channel_1=require("../../channel");var config_1=require("../../config");var fielddef_1=require("../../fielddef");var common_1=require("../common");var tick;(function(tick){function markType(){return"rect"}tick.markType=markType;function properties(model){var p={};var config=model.config();var stack=model.stack();p.xc=x(model.encoding().x,model.scaleName(channel_1.X),stack,config);p.yc=y(model.encoding().y,model.scaleName(channel_1.Y),stack,config);if(config.mark.orient===config_1.Orient.HORIZONTAL){p.width=size(model.encoding().size,model.scaleName(channel_1.SIZE),config,(model.scale(channel_1.X)||{}).bandSize);p.height={value:config.mark.tickThickness}}else{p.width={value:config.mark.tickThickness};p.height=size(model.encoding().size,model.scaleName(channel_1.SIZE),config,(model.scale(channel_1.Y)||{}).bandSize)}common_1.applyColorAndOpacity(p,model);return p}tick.properties=properties;function x(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.X===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}else if(fieldDef.value){return{value:fieldDef.value}}}return{value:config.scale.bandSize/2}}function y(fieldDef,scaleName,stack,config){if(fieldDef){if(stack&&channel_1.Y===stack.fieldChannel){return{scale:scaleName,field:fielddef_1.field(fieldDef,{suffix:"end"})}}else if(fieldDef.field){return{scale:scaleName,field:fielddef_1.field(fieldDef,{binSuffix:"mid"})}}else if(fieldDef.value){return{value:fieldDef.value}}}return{value:config.scale.bandSize/2}}function size(fieldDef,scaleName,config,scaleBandSize){if(fieldDef){if(fieldDef.field){return{scale:scaleName,field:fieldDef.field}}else if(fieldDef.value!==undefined){return{value:fieldDef.value}}}if(config.mark.tickSize){return{value:config.mark.tickSize}}var bandSize=scaleBandSize!==undefined?scaleBandSize:config.scale.bandSize;return{value:bandSize/1.5}}})(tick=exports.tick||(exports.tick={}))},{"../../channel":722,"../../config":755,"../../fielddef":760,"../common":724}],752:[function(require,module,exports){"use strict";var channel_1=require("../channel");var encoding_1=require("../encoding");var fielddef_1=require("../fielddef");var scale_1=require("../scale");var util_1=require("../util");var scale_2=require("./scale");var NameMap=function(){function NameMap(){this._nameMap={}}NameMap.prototype.rename=function(oldName,newName){this._nameMap[oldName]=newName};NameMap.prototype.has=function(name){return this._nameMap[name]!==undefined};NameMap.prototype.get=function(name){while(this._nameMap[name]){name=this._nameMap[name]}return name};return NameMap}();var Model=function(){function Model(spec,parent,parentGivenName){this._warnings=[];this._parent=parent;this._name=spec.name||parentGivenName;this._dataNameMap=parent?parent._dataNameMap:new NameMap;this._scaleNameMap=parent?parent._scaleNameMap:new NameMap;this._sizeNameMap=parent?parent._sizeNameMap:new NameMap;this._data=spec.data;this._description=spec.description;this._transform=spec.transform;if(spec.transform){if(spec.transform.filterInvalid===undefined&&spec.transform["filterNull"]!==undefined){spec.transform.filterInvalid=spec.transform["filterNull"];console.warn("filterNull is deprecated. Please use filterInvalid instead.")}}this.component={data:null,layout:null,mark:null,scale:null,axis:null,axisGroup:null,gridGroup:null,legend:null}}Model.prototype.parse=function(){this.parseData();this.parseSelectionData();this.parseLayoutData();this.parseScale();this.parseAxis();this.parseLegend();this.parseAxisGroup();this.parseGridGroup();this.parseMark()};Model.prototype.assembleScales=function(){return util_1.flatten(util_1.vals(this.component.scale).map(function(scales){var arr=[scales.main];if(scales.colorLegend){arr.push(scales.colorLegend)}if(scales.binColorLegend){arr.push(scales.binColorLegend)}return arr}))};Model.prototype.assembleAxes=function(){return util_1.vals(this.component.axis)};Model.prototype.assembleLegends=function(){return util_1.vals(this.component.legend)};Model.prototype.assembleGroup=function(){var group={};group.marks=this.assembleMarks();var scales=this.assembleScales();if(scales.length>0){group.scales=scales}var axes=this.assembleAxes();if(axes.length>0){group.axes=axes}var legends=this.assembleLegends();if(legends.length>0){group.legends=legends}return group};Model.prototype.reduce=function(f,init,t){return encoding_1.channelMappingReduce(this.channels(),this.mapping(),f,init,t)};Model.prototype.forEach=function(f,t){encoding_1.channelMappingForEach(this.channels(),this.mapping(),f,t)};Model.prototype.parent=function(){return this._parent};Model.prototype.name=function(text,delimiter){if(delimiter===void 0){delimiter="_"}return(this._name?this._name+delimiter:"")+text};Model.prototype.description=function(){return this._description};Model.prototype.data=function(){return this._data};Model.prototype.renameData=function(oldName,newName){this._dataNameMap.rename(oldName,newName)};Model.prototype.dataName=function(dataSourceType){return this._dataNameMap.get(this.name(String(dataSourceType)))};Model.prototype.renameSize=function(oldName,newName){this._sizeNameMap.rename(oldName,newName)};Model.prototype.channelSizeName=function(channel){return this.sizeName(channel===channel_1.X||channel===channel_1.COLUMN?"width":"height")};Model.prototype.sizeName=function(size){return this._sizeNameMap.get(this.name(size,"_"))};Model.prototype.calculate=function(){return this._transform?this._transform.calculate:undefined};Model.prototype.filterInvalid=function(){var transform=this._transform||{};if(transform.filterInvalid===undefined){return this.parent()?this.parent().filterInvalid():undefined}return transform.filterInvalid};Model.prototype.filter=function(){return this._transform?this._transform.filter:undefined};Model.prototype.field=function(channel,opt){if(opt===void 0){opt={}}var fieldDef=this.fieldDef(channel);if(fieldDef.bin){opt=util_1.extend({binSuffix:this.scale(channel).type===scale_1.ScaleType.ORDINAL?"range":"start"},opt)}return fielddef_1.field(fieldDef,opt)};Model.prototype.scale=function(channel){return this._scale[channel]};Model.prototype.isOrdinalScale=function(channel){var scale=this.scale(channel);return scale&&scale.type===scale_1.ScaleType.ORDINAL};Model.prototype.renameScale=function(oldName,newName){this._scaleNameMap.rename(oldName,newName)};Model.prototype.scaleName=function(originalScaleName,parse){var channel=util_1.contains([scale_2.COLOR_LEGEND,scale_2.COLOR_LEGEND_LABEL],originalScaleName)?"color":originalScaleName;if(parse){return this.name(originalScaleName+"")}if(this._scale&&this._scale[channel]||this._scaleNameMap.has(this.name(originalScaleName+""))){return this._scaleNameMap.get(this.name(originalScaleName+""))}return undefined};Model.prototype.sort=function(channel){return(this.mapping()[channel]||{}).sort};Model.prototype.axis=function(channel){return this._axis[channel]};Model.prototype.legend=function(channel){return this._legend[channel]};Model.prototype.config=function(){return this._config};Model.prototype.addWarning=function(message){util_1.warning(message);this._warnings.push(message)};Model.prototype.warnings=function(){return this._warnings};Model.prototype.isUnit=function(){return false};Model.prototype.isFacet=function(){return false};Model.prototype.isLayer=function(){return false};return Model}();exports.Model=Model},{"../channel":722,"../encoding":758,"../fielddef":760,"../scale":764,"../util":772,"./scale":753}],753:[function(require,module,exports){"use strict";var aggregate_1=require("../aggregate");var channel_1=require("../channel");var config_1=require("../config");var data_1=require("../data");var datetime_1=require("../datetime");var fielddef_1=require("../fielddef");var mark_1=require("../mark");var scale_1=require("../scale");var sort_1=require("../sort");var stack_1=require("../stack");var type_1=require("../type");var util_1=require("../util");var timeunit_1=require("../timeunit");exports.COLOR_LEGEND="color_legend";exports.COLOR_LEGEND_LABEL="color_legend_label";function parseScaleComponent(model){return model.channels().reduce(function(scale,channel){if(model.scale(channel)){var fieldDef=model.fieldDef(channel);var scales={main:parseMainScale(model,fieldDef,channel)};if(channel===channel_1.COLOR&&model.legend(channel_1.COLOR)&&(fieldDef.type===type_1.ORDINAL||fieldDef.bin||fieldDef.timeUnit)){scales.colorLegend=parseColorLegendScale(model,fieldDef);if(fieldDef.bin){scales.binColorLegend=parseBinColorLegendLabel(model,fieldDef)}}scale[channel]=scales}return scale},{})}exports.parseScaleComponent=parseScaleComponent;function parseMainScale(model,fieldDef,channel){var scale=model.scale(channel);var sort=model.sort(channel);var scaleDef={name:model.scaleName(channel+"",true),type:scale.type};if(channel===channel_1.X&&model.has(channel_1.X2)){if(model.has(channel_1.X)){scaleDef.domain={fields:[domain(scale,model,channel_1.X),domain(scale,model,channel_1.X2)]}}else{scaleDef.domain=domain(scale,model,channel_1.X2)}}else if(channel===channel_1.Y&&model.has(channel_1.Y2)){if(model.has(channel_1.Y)){scaleDef.domain={fields:[domain(scale,model,channel_1.Y),domain(scale,model,channel_1.Y2)]}}else{scaleDef.domain=domain(scale,model,channel_1.Y2)}}else{scaleDef.domain=domain(scale,model,channel)}util_1.extend(scaleDef,rangeMixins(scale,model,channel));if(sort&&(sort_1.isSortField(sort)?sort.order:sort)===sort_1.SortOrder.DESCENDING){scaleDef.reverse=true}["round","clamp","nice","exponent","zero","points","padding"].forEach(function(property){var value=exports[property](scale,channel,fieldDef,model,scaleDef);if(value!==undefined){scaleDef[property]=value}});return scaleDef}function parseColorLegendScale(model,fieldDef){return{name:model.scaleName(exports.COLOR_LEGEND,true),type:scale_1.ScaleType.ORDINAL,domain:{data:model.dataTable(),field:model.field(channel_1.COLOR,fieldDef.bin||fieldDef.timeUnit?{}:{prefix:"rank"}),sort:true},range:{data:model.dataTable(),field:model.field(channel_1.COLOR),sort:true}}}function parseBinColorLegendLabel(model,fieldDef){return{name:model.scaleName(exports.COLOR_LEGEND_LABEL,true),type:scale_1.ScaleType.ORDINAL,domain:{data:model.dataTable(),field:model.field(channel_1.COLOR),sort:true},range:{data:model.dataTable(),field:fielddef_1.field(fieldDef,{binSuffix:"range"}),sort:{field:model.field(channel_1.COLOR,{binSuffix:"start"}),op:"min"}}}}function scaleType(scale,fieldDef,channel,mark){if(!channel_1.hasScale(channel)){return null}if(util_1.contains([channel_1.ROW,channel_1.COLUMN,channel_1.SHAPE],channel)){if(scale&&scale.type!==undefined&&scale.type!==scale_1.ScaleType.ORDINAL){console.warn("Channel",channel,"does not work with scale type =",scale.type)}return scale_1.ScaleType.ORDINAL}if(scale.type!==undefined){return scale.type}switch(fieldDef.type){case type_1.NOMINAL:return scale_1.ScaleType.ORDINAL;case type_1.ORDINAL:if(channel===channel_1.COLOR){return scale_1.ScaleType.LINEAR}return scale_1.ScaleType.ORDINAL;case type_1.TEMPORAL:if(channel===channel_1.COLOR){return scale_1.ScaleType.TIME}if(fieldDef.timeUnit){return timeunit_1.defaultScaleType(fieldDef.timeUnit)}return scale_1.ScaleType.TIME;case type_1.QUANTITATIVE:if(fieldDef.bin){return util_1.contains([channel_1.X,channel_1.Y,channel_1.COLOR],channel)?scale_1.ScaleType.LINEAR:scale_1.ScaleType.ORDINAL}return scale_1.ScaleType.LINEAR}return null}exports.scaleType=scaleType;function scaleBandSize(scaleType,bandSize,scaleConfig,topLevelSize,mark,channel){if(scaleType===scale_1.ScaleType.ORDINAL){if(topLevelSize===undefined){if(bandSize){return bandSize}else if(channel===channel_1.X&&mark===mark_1.TEXT){return scaleConfig.textBandWidth}else{return scaleConfig.bandSize}}else{if(bandSize){console.warn("bandSize for",channel,"overridden as top-level",channel===channel_1.X?"width":"height","is provided.")}return scale_1.BANDSIZE_FIT}}else{return undefined}}exports.scaleBandSize=scaleBandSize;function domain(scale,model,channel){var fieldDef=model.fieldDef(channel);if(scale.domain){if(datetime_1.isDateTime(scale.domain[0])){return scale.domain.map(function(dt){return datetime_1.timestamp(dt,true)})}return scale.domain}if(fieldDef.type===type_1.TEMPORAL){if(timeunit_1.imputedDomain(fieldDef.timeUnit,channel)){return{data:fieldDef.timeUnit,field:"date"}}return{data:model.dataTable(),field:model.field(channel),sort:{field:model.field(channel),op:"min"}}}var stack=model.stack();if(stack&&channel===stack.fieldChannel){if(stack.offset===stack_1.StackOffset.NORMALIZE){return[0,1]}return{data:model.dataName(data_1.STACKED_SCALE),field:model.field(channel,{prefix:"sum"})}}var useRawDomain=_useRawDomain(scale,model,channel),sort=domainSort(model,channel,scale.type);if(useRawDomain){return{data:data_1.SOURCE,field:model.field(channel,{noAggregate:true})}}else if(fieldDef.bin){if(scale.type===scale_1.ScaleType.ORDINAL){return{data:model.dataTable(),field:model.field(channel,{binSuffix:"range"}),sort:{field:model.field(channel,{binSuffix:"start"}),op:"min"}}}else if(channel===channel_1.COLOR){return{data:model.dataTable(),field:model.field(channel,{binSuffix:"start"})}}else{return{data:model.dataTable(),field:[model.field(channel,{binSuffix:"start"}),model.field(channel,{binSuffix:"end"})]}}}else if(sort){return{data:sort.op?data_1.SOURCE:model.dataTable(),field:fieldDef.type===type_1.ORDINAL&&channel===channel_1.COLOR?model.field(channel,{prefix:"rank"}):model.field(channel),sort:sort}}else{return{data:model.dataTable(),field:fieldDef.type===type_1.ORDINAL&&channel===channel_1.COLOR?model.field(channel,{prefix:"rank"}):model.field(channel)}}}exports.domain=domain;function domainSort(model,channel,scaleType){if(scaleType!==scale_1.ScaleType.ORDINAL){return undefined}var sort=model.sort(channel);if(sort_1.isSortField(sort)){return{op:sort.op,field:sort.field}}if(util_1.contains([sort_1.SortOrder.ASCENDING,sort_1.SortOrder.DESCENDING,undefined],sort)){return true}return undefined}exports.domainSort=domainSort;function _useRawDomain(scale,model,channel){var fieldDef=model.fieldDef(channel);return scale.useRawDomain&&fieldDef.aggregate&&aggregate_1.SHARED_DOMAIN_OPS.indexOf(fieldDef.aggregate)>=0&&(fieldDef.type===type_1.QUANTITATIVE&&!fieldDef.bin&&scale.type!==scale_1.ScaleType.LOG||fieldDef.type===type_1.TEMPORAL&&util_1.contains([scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],scale.type))}function rangeMixins(scale,model,channel){var fieldDef=model.fieldDef(channel);var scaleConfig=model.config().scale;if(scale.type===scale_1.ScaleType.ORDINAL&&scale.bandSize&&scale.bandSize!==scale_1.BANDSIZE_FIT&&util_1.contains([channel_1.X,channel_1.Y],channel)){return{bandSize:scale.bandSize}}if(scale.range&&!util_1.contains([channel_1.X,channel_1.Y,channel_1.ROW,channel_1.COLUMN],channel)){return{range:scale.range}}switch(channel){case channel_1.ROW:return{range:"height"};case channel_1.COLUMN:return{range:"width"}}var unitModel=model;switch(channel){case channel_1.X:return{rangeMin:0,rangeMax:unitModel.width};case channel_1.Y:return{rangeMin:unitModel.height,rangeMax:0};case channel_1.SIZE:if(unitModel.mark()===mark_1.BAR){if(scaleConfig.barSizeRange!==undefined){return{range:scaleConfig.barSizeRange}}var dimension=model.config().mark.orient===config_1.Orient.HORIZONTAL?channel_1.Y:channel_1.X;return{range:[model.config().mark.barThinSize,model.scale(dimension).bandSize]}}else if(unitModel.mark()===mark_1.TEXT){return{range:scaleConfig.fontSizeRange}}else if(unitModel.mark()===mark_1.RULE){return{range:scaleConfig.ruleSizeRange}}else if(unitModel.mark()===mark_1.TICK){return{range:scaleConfig.tickSizeRange}}if(scaleConfig.pointSizeRange!==undefined){return{range:scaleConfig.pointSizeRange}}var bandSize=pointBandSize(unitModel);return{range:[9,(bandSize-2)*(bandSize-2)]};case channel_1.SHAPE:return{range:scaleConfig.shapeRange};case channel_1.COLOR:if(fieldDef.type===type_1.NOMINAL){return{range:scaleConfig.nominalColorRange}}return{range:scaleConfig.sequentialColorRange};case channel_1.OPACITY:return{range:scaleConfig.opacity}}return{}}exports.rangeMixins=rangeMixins;function pointBandSize(model){var scaleConfig=model.config().scale;var hasX=model.has(channel_1.X);var hasY=model.has(channel_1.Y);var xIsMeasure=fielddef_1.isMeasure(model.encoding().x);var yIsMeasure=fielddef_1.isMeasure(model.encoding().y);if(hasX&&hasY){return xIsMeasure!==yIsMeasure?model.scale(xIsMeasure?channel_1.Y:channel_1.X).bandSize:Math.min(model.scale(channel_1.X).bandSize||scaleConfig.bandSize,model.scale(channel_1.Y).bandSize||scaleConfig.bandSize)}else if(hasY){return yIsMeasure?model.config().scale.bandSize:model.scale(channel_1.Y).bandSize}else if(hasX){return xIsMeasure?model.config().scale.bandSize:model.scale(channel_1.X).bandSize}return model.config().scale.bandSize}function clamp(scale){if(util_1.contains([scale_1.ScaleType.LINEAR,scale_1.ScaleType.POW,scale_1.ScaleType.SQRT,scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],scale.type)){return scale.clamp}return undefined}exports.clamp=clamp;function exponent(scale){if(scale.type===scale_1.ScaleType.POW){return scale.exponent}return undefined}exports.exponent=exponent;function nice(scale,channel,fieldDef){if(util_1.contains([scale_1.ScaleType.LINEAR,scale_1.ScaleType.POW,scale_1.ScaleType.SQRT,scale_1.ScaleType.LOG,scale_1.ScaleType.TIME,scale_1.ScaleType.UTC,scale_1.ScaleType.QUANTIZE],scale.type)){if(scale.nice!==undefined){return scale.nice}if(util_1.contains([scale_1.ScaleType.TIME,scale_1.ScaleType.UTC],scale.type)){return timeunit_1.smallestUnit(fieldDef.timeUnit)}return util_1.contains([channel_1.X,channel_1.Y],channel)}return undefined}exports.nice=nice;function padding(scale,channel,__,___,scaleDef){if(scale.type===scale_1.ScaleType.ORDINAL&&util_1.contains([channel_1.X,channel_1.Y],channel)){return scaleDef.points?1:scale.padding}return undefined}exports.padding=padding;function points(scale,channel,__,model){if(scale.type===scale_1.ScaleType.ORDINAL&&util_1.contains([channel_1.X,channel_1.Y],channel)){return model.mark()===mark_1.BAR&&scale.bandSize===scale_1.BANDSIZE_FIT?undefined:true}return undefined}exports.points=points;function round(scale,channel){if(util_1.contains([channel_1.X,channel_1.Y,channel_1.ROW,channel_1.COLUMN,channel_1.SIZE],channel)&&scale.round!==undefined){return scale.round}return undefined}exports.round=round;function zero(scale,channel,fieldDef){if(!util_1.contains([scale_1.ScaleType.TIME,scale_1.ScaleType.UTC,scale_1.ScaleType.ORDINAL],scale.type)){if(scale.zero!==undefined){return scale.zero}return!scale.domain&&!fieldDef.bin&&util_1.contains([channel_1.X,channel_1.Y],channel)}return undefined}exports.zero=zero},{"../aggregate":719,"../channel":722,"../config":755,"../data":756,"../datetime":757,"../fielddef":760,"../mark":763,"../scale":764,"../sort":766,"../stack":768,"../timeunit":769,"../type":771,"../util":772}],754:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var aggregate_1=require("../aggregate");var channel_1=require("../channel");var config_1=require("../config");var data_1=require("../data");var vlEncoding=require("../encoding");var fielddef_1=require("../fielddef");var mark_1=require("../mark");var scale_1=require("../scale");var type_1=require("../type");var util_1=require("../util");var axis_1=require("./axis");var common_1=require("./common");var config_2=require("./config");var data_2=require("./data/data");var legend_1=require("./legend");var layout_1=require("./layout");var model_1=require("./model");var mark_2=require("./mark/mark");var scale_2=require("./scale");var stack_1=require("../stack");var UnitModel=function(_super){__extends(UnitModel,_super);function UnitModel(spec,parent,parentGivenName){_super.call(this,spec,parent,parentGivenName);var providedWidth=spec.width!==undefined?spec.width:parent?parent["width"]:undefined;var providedHeight=spec.height!==undefined?spec.height:parent?parent["height"]:undefined;var mark=this._mark=spec.mark;var encoding=this._encoding=this._initEncoding(mark,spec.encoding||{});this._stack=stack_1.stack(mark,encoding,((spec.config||{}).mark||{}).stacked);var config=this._config=this._initConfig(spec.config,parent,mark,encoding,this._stack);this._scale=this._initScale(mark,encoding,config,providedWidth,providedHeight);this._axis=this._initAxis(encoding,config);this._legend=this._initLegend(encoding,config);this._initSize(mark,this._scale,providedWidth,providedHeight,config.cell,config.scale)}UnitModel.prototype._initEncoding=function(mark,encoding){encoding=util_1.duplicate(encoding);vlEncoding.forEach(encoding,function(fieldDef,channel){if(!channel_1.supportMark(channel,mark)){console.warn(channel,"dropped as it is incompatible with",mark);delete fieldDef.field;return}if(fieldDef.type){fieldDef.type=type_1.getFullName(fieldDef.type)}if((channel===channel_1.PATH||channel===channel_1.ORDER)&&!fieldDef.aggregate&&fieldDef.type===type_1.QUANTITATIVE){fieldDef.aggregate=aggregate_1.AggregateOp.MIN}});return encoding};UnitModel.prototype._initConfig=function(specConfig,parent,mark,encoding,stack){var config=util_1.mergeDeep(util_1.duplicate(config_1.defaultConfig),parent?parent.config():{},specConfig);var hasFacetParent=false;while(parent!==null){if(parent.isFacet()){hasFacetParent=true;break}parent=parent.parent()}if(hasFacetParent){config.cell=util_1.extend({},config.cell,config.facet.cell)}config.mark=config_2.initMarkConfig(mark,encoding,stack,config);return config};UnitModel.prototype._initScale=function(mark,encoding,config,topLevelWidth,topLevelHeight){return channel_1.UNIT_SCALE_CHANNELS.reduce(function(_scale,channel){if(vlEncoding.has(encoding,channel)||channel===channel_1.X&&vlEncoding.has(encoding,channel_1.X2)||channel===channel_1.Y&&vlEncoding.has(encoding,channel_1.Y2)){var channelDef=encoding[channel];var scaleSpec=(channelDef||{}).scale||{};var _scaleType=scale_2.scaleType(scaleSpec,channelDef,channel,mark);var scale=_scale[channel]=util_1.extend({type:_scaleType,round:config.scale.round,padding:config.scale.padding,useRawDomain:config.scale.useRawDomain},scaleSpec);scale.bandSize=scale_2.scaleBandSize(scale.type,scale.bandSize,config.scale,channel===channel_1.X?topLevelWidth:topLevelHeight,mark,channel)}return _scale},{})};UnitModel.prototype._initSize=function(mark,scale,width,height,cellConfig,scaleConfig){if(width!==undefined){this._width=width}else if(scale[channel_1.X]){if(scale[channel_1.X].type!==scale_1.ScaleType.ORDINAL||scale[channel_1.X].bandSize===scale_1.BANDSIZE_FIT){this._width=cellConfig.width}}else{if(mark===mark_1.TEXT){this._width=scaleConfig.textBandWidth}else{this._width=scaleConfig.bandSize}}if(height!==undefined){this._height=height}else if(scale[channel_1.Y]){if(scale[channel_1.Y].type!==scale_1.ScaleType.ORDINAL||scale[channel_1.Y].bandSize===scale_1.BANDSIZE_FIT){this._height=cellConfig.height}}else{this._height=scaleConfig.bandSize}};UnitModel.prototype._initAxis=function(encoding,config){return[channel_1.X,channel_1.Y].reduce(function(_axis,channel){if(vlEncoding.has(encoding,channel)||channel===channel_1.X&&vlEncoding.has(encoding,channel_1.X2)||channel===channel_1.Y&&vlEncoding.has(encoding,channel_1.Y2)){var axisSpec=(encoding[channel]||{}).axis;if(axisSpec!==null&&axisSpec!==false){_axis[channel]=util_1.extend({},config.axis,axisSpec===true?{}:axisSpec||{})}}return _axis},{})};UnitModel.prototype._initLegend=function(encoding,config){return channel_1.NONSPATIAL_SCALE_CHANNELS.reduce(function(_legend,channel){if(vlEncoding.has(encoding,channel)){var legendSpec=encoding[channel].legend;if(legendSpec!==null&&legendSpec!==false){_legend[channel]=util_1.extend({},config.legend,legendSpec===true?{}:legendSpec||{})}}return _legend},{})};Object.defineProperty(UnitModel.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(UnitModel.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});UnitModel.prototype.parseData=function(){this.component.data=data_2.parseUnitData(this)};UnitModel.prototype.parseSelectionData=function(){};UnitModel.prototype.parseLayoutData=function(){this.component.layout=layout_1.parseUnitLayout(this)};UnitModel.prototype.parseScale=function(){this.component.scale=scale_2.parseScaleComponent(this)};UnitModel.prototype.parseMark=function(){this.component.mark=mark_2.parseMark(this)};UnitModel.prototype.parseAxis=function(){this.component.axis=axis_1.parseAxisComponent(this,[channel_1.X,channel_1.Y])};UnitModel.prototype.parseAxisGroup=function(){return null};UnitModel.prototype.parseGridGroup=function(){return null};UnitModel.prototype.parseLegend=function(){this.component.legend=legend_1.parseLegendComponent(this)};UnitModel.prototype.assembleData=function(data){return data_2.assembleData(this,data)};UnitModel.prototype.assembleLayout=function(layoutData){return layout_1.assembleLayout(this,layoutData)};UnitModel.prototype.assembleMarks=function(){return this.component.mark};UnitModel.prototype.assembleParentGroupProperties=function(cellConfig){return common_1.applyConfig({},cellConfig,common_1.FILL_STROKE_CONFIG.concat(["clip"]))};UnitModel.prototype.channels=function(){return channel_1.UNIT_CHANNELS};UnitModel.prototype.mapping=function(){return this.encoding()};UnitModel.prototype.stack=function(){return this._stack};UnitModel.prototype.toSpec=function(excludeConfig,excludeData){var encoding=util_1.duplicate(this._encoding);var spec;spec={mark:this._mark,encoding:encoding};if(!excludeConfig){spec.config=util_1.duplicate(this._config)}if(!excludeData){spec.data=util_1.duplicate(this._data)}return spec};UnitModel.prototype.mark=function(){return this._mark};UnitModel.prototype.has=function(channel){return vlEncoding.has(this._encoding,channel)};UnitModel.prototype.encoding=function(){return this._encoding};UnitModel.prototype.fieldDef=function(channel){return this._encoding[channel]||{}};UnitModel.prototype.field=function(channel,opt){if(opt===void 0){opt={}}var fieldDef=this.fieldDef(channel);if(fieldDef.bin){opt=util_1.extend({binSuffix:this.scale(channel).type===scale_1.ScaleType.ORDINAL?"range":"start"},opt)}return fielddef_1.field(fieldDef,opt)};UnitModel.prototype.dataTable=function(){return this.dataName(vlEncoding.isAggregate(this._encoding)?data_1.SUMMARY:data_1.SOURCE)};UnitModel.prototype.isUnit=function(){return true};return UnitModel}(model_1.Model);exports.UnitModel=UnitModel},{"../aggregate":719,"../channel":722,"../config":755,"../data":756,"../encoding":758,"../fielddef":760,"../mark":763,"../scale":764,"../stack":768,"../type":771,"../util":772,"./axis":723,"./common":724,"./config":726,"./data/data":729,"./layout":742,"./legend":743,"./mark/mark":747,"./model":752,"./scale":753}],755:[function(require,module,exports){"use strict";var scale_1=require("./scale");var axis_1=require("./axis");var legend_1=require("./legend");exports.defaultCellConfig={width:200,height:200};exports.defaultFacetCellConfig={stroke:"#ccc",strokeWidth:1};var defaultFacetGridConfig={color:"#000000",opacity:.4,offset:0};exports.defaultFacetConfig={scale:scale_1.defaultFacetScaleConfig,axis:axis_1.defaultFacetAxisConfig,grid:defaultFacetGridConfig,cell:exports.defaultFacetCellConfig};(function(FontWeight){FontWeight[FontWeight["NORMAL"]="normal"]="NORMAL";FontWeight[FontWeight["BOLD"]="bold"]="BOLD"})(exports.FontWeight||(exports.FontWeight={}));var FontWeight=exports.FontWeight;(function(Shape){Shape[Shape["CIRCLE"]="circle"]="CIRCLE";Shape[Shape["SQUARE"]="square"]="SQUARE";Shape[Shape["CROSS"]="cross"]="CROSS";Shape[Shape["DIAMOND"]="diamond"]="DIAMOND";Shape[Shape["TRIANGLEUP"]="triangle-up"]="TRIANGLEUP";Shape[Shape["TRIANGLEDOWN"]="triangle-down"]="TRIANGLEDOWN"})(exports.Shape||(exports.Shape={}));var Shape=exports.Shape;(function(Orient){Orient[Orient["HORIZONTAL"]="horizontal"]="HORIZONTAL";Orient[Orient["VERTICAL"]="vertical"]="VERTICAL"})(exports.Orient||(exports.Orient={}));var Orient=exports.Orient;(function(HorizontalAlign){HorizontalAlign[HorizontalAlign["LEFT"]="left"]="LEFT";HorizontalAlign[HorizontalAlign["RIGHT"]="right"]="RIGHT";HorizontalAlign[HorizontalAlign["CENTER"]="center"]="CENTER"})(exports.HorizontalAlign||(exports.HorizontalAlign={}));var HorizontalAlign=exports.HorizontalAlign;(function(VerticalAlign){VerticalAlign[VerticalAlign["TOP"]="top"]="TOP";VerticalAlign[VerticalAlign["MIDDLE"]="middle"]="MIDDLE";VerticalAlign[VerticalAlign["BOTTOM"]="bottom"]="BOTTOM"})(exports.VerticalAlign||(exports.VerticalAlign={}));var VerticalAlign=exports.VerticalAlign;(function(FontStyle){FontStyle[FontStyle["NORMAL"]="normal"]="NORMAL";FontStyle[FontStyle["ITALIC"]="italic"]="ITALIC"})(exports.FontStyle||(exports.FontStyle={}));var FontStyle=exports.FontStyle;(function(Interpolate){Interpolate[Interpolate["LINEAR"]="linear"]="LINEAR";Interpolate[Interpolate["LINEAR_CLOSED"]="linear-closed"]="LINEAR_CLOSED";Interpolate[Interpolate["STEP"]="step"]="STEP";Interpolate[Interpolate["STEP_BEFORE"]="step-before"]="STEP_BEFORE";Interpolate[Interpolate["STEP_AFTER"]="step-after"]="STEP_AFTER";Interpolate[Interpolate["BASIS"]="basis"]="BASIS";Interpolate[Interpolate["BASIS_OPEN"]="basis-open"]="BASIS_OPEN";Interpolate[Interpolate["BASIS_CLOSED"]="basis-closed"]="BASIS_CLOSED";Interpolate[Interpolate["CARDINAL"]="cardinal"]="CARDINAL";Interpolate[Interpolate["CARDINAL_OPEN"]="cardinal-open"]="CARDINAL_OPEN";Interpolate[Interpolate["CARDINAL_CLOSED"]="cardinal-closed"]="CARDINAL_CLOSED";Interpolate[Interpolate["BUNDLE"]="bundle"]="BUNDLE";Interpolate[Interpolate["MONOTONE"]="monotone"]="MONOTONE"})(exports.Interpolate||(exports.Interpolate={}));var Interpolate=exports.Interpolate;(function(AreaOverlay){AreaOverlay[AreaOverlay["LINE"]="line"]="LINE";AreaOverlay[AreaOverlay["LINEPOINT"]="linepoint"]="LINEPOINT";AreaOverlay[AreaOverlay["NONE"]="none"]="NONE"})(exports.AreaOverlay||(exports.AreaOverlay={}));var AreaOverlay=exports.AreaOverlay;exports.defaultOverlayConfig={line:false,pointStyle:{filled:true},lineStyle:{}};exports.defaultMarkConfig={color:"#4682b4",shape:Shape.CIRCLE,strokeWidth:2,size:30,barThinSize:2,ruleSize:1,tickThickness:1,fontSize:10,baseline:VerticalAlign.MIDDLE,text:"Abc",applyColorToBackground:false};exports.defaultConfig={numberFormat:"s",timeFormat:"%b %d, %Y",countTitle:"Number of Records",cell:exports.defaultCellConfig,mark:exports.defaultMarkConfig,overlay:exports.defaultOverlayConfig,scale:scale_1.defaultScaleConfig,axis:axis_1.defaultAxisConfig,legend:legend_1.defaultLegendConfig,facet:exports.defaultFacetConfig}},{"./axis":720,"./legend":762,"./scale":764}],756:[function(require,module,exports){"use strict";var type_1=require("./type");(function(DataFormatType){DataFormatType[DataFormatType["JSON"]="json"]="JSON";DataFormatType[DataFormatType["CSV"]="csv"]="CSV";DataFormatType[DataFormatType["TSV"]="tsv"]="TSV";DataFormatType[DataFormatType["TOPOJSON"]="topojson"]="TOPOJSON"})(exports.DataFormatType||(exports.DataFormatType={}));var DataFormatType=exports.DataFormatType;(function(DataTable){DataTable[DataTable["SOURCE"]="source"]="SOURCE";DataTable[DataTable["SUMMARY"]="summary"]="SUMMARY";DataTable[DataTable["STACKED_SCALE"]="stacked_scale"]="STACKED_SCALE";DataTable[DataTable["LAYOUT"]="layout"]="LAYOUT"})(exports.DataTable||(exports.DataTable={}));var DataTable=exports.DataTable;exports.SUMMARY=DataTable.SUMMARY;exports.SOURCE=DataTable.SOURCE;exports.STACKED_SCALE=DataTable.STACKED_SCALE;exports.LAYOUT=DataTable.LAYOUT;exports.types={boolean:type_1.Type.NOMINAL,number:type_1.Type.QUANTITATIVE,integer:type_1.Type.QUANTITATIVE,date:type_1.Type.TEMPORAL,string:type_1.Type.NOMINAL}},{"./type":771}],757:[function(require,module,exports){"use strict";var util_1=require("./util");var SUNDAY_YEAR=2006;function isDateTime(o){return!!o&&(!!o.year||!!o.quarter||!!o.month||!!o.date||!!o.day||!!o.hours||!!o.minutes||!!o.seconds||!!o.milliseconds)}exports.isDateTime=isDateTime;exports.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"];exports.SHORT_MONTHS=exports.MONTHS.map(function(m){return m.substr(0,3)});exports.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];exports.SHORT_DAYS=exports.DAYS.map(function(d){return d.substr(0,3)});function normalizeQuarter(q){if(util_1.isNumber(q)){return q-1+""}else{console.warn("Potentially invalid quarter",q);return q}}function normalizeMonth(m){if(util_1.isNumber(m)){return m-1+""}else{var lowerM=m.toLowerCase();var monthIndex=exports.MONTHS.indexOf(lowerM);if(monthIndex!==-1){return monthIndex+""}var shortM=lowerM.substr(0,3);var shortMonthIndex=exports.SHORT_MONTHS.indexOf(shortM);if(shortMonthIndex!==-1){return shortMonthIndex+""}console.warn("Potentially invalid month",m);return m}}function normalizeDay(d){if(util_1.isNumber(d)){return d%7+""}else{var lowerD=d.toLowerCase();var dayIndex=exports.DAYS.indexOf(lowerD);if(dayIndex!==-1){return dayIndex+""}var shortD=lowerD.substr(0,3);var shortDayIndex=exports.SHORT_DAYS.indexOf(shortD);if(shortDayIndex!==-1){return shortDayIndex+""}console.warn("Potentially invalid day",d);return d}}function timestamp(d,normalize){var date=new Date(0,0,1,0,0,0,0);if(d.day!==undefined){if(util_1.keys(d).length>1){console.warn("Dropping day from datetime",JSON.stringify(d),"as day cannot be combined with other units.");d=util_1.duplicate(d);delete d.day}else{date.setFullYear(SUNDAY_YEAR);var day=normalize?normalizeDay(d.day):d.day;date.setDate(+day+1)}}if(d.year!==undefined){date.setFullYear(d.year)}if(d.quarter!==undefined){var quarter=normalize?normalizeQuarter(d.quarter):d.quarter;date.setMonth(+quarter*3)}if(d.month!==undefined){var month=normalize?normalizeMonth(d.month):d.month;date.setMonth(+month)}if(d.date!==undefined){date.setDate(d.date)}if(d.hours!==undefined){date.setHours(d.hours)}if(d.minutes!==undefined){date.setMinutes(d.minutes)}if(d.seconds!==undefined){date.setSeconds(d.seconds)}if(d.milliseconds!==undefined){date.setMilliseconds(d.milliseconds)}return date.getTime()}exports.timestamp=timestamp;function dateTimeExpr(d,normalize){if(normalize===void 0){normalize=false}var units=[];if(normalize&&d.day!==undefined){if(util_1.keys(d).length>1){console.warn("Dropping day from datetime",JSON.stringify(d),"as day cannot be combined with other units.");d=util_1.duplicate(d);delete d.day}}if(d.year!==undefined){units.push(d.year)}else if(d.day!==undefined){units.push(SUNDAY_YEAR)}else{units.push(0)}if(d.month!==undefined){var month=normalize?normalizeMonth(d.month):d.month;units.push(month)}else if(d.quarter!==undefined){var quarter=normalize?normalizeQuarter(d.quarter):d.quarter;units.push(quarter+"*3")}else{units.push(0)}if(d.date!==undefined){units.push(d.date)}else if(d.day!==undefined){var day=normalize?normalizeDay(d.day):d.day;units.push(day+"+1")}else{units.push(1)}for(var _i=0,_a=["hours","minutes","seconds","milliseconds"];_i<_a.length;_i++){var timeUnit=_a[_i];if(d[timeUnit]!==undefined){units.push(d[timeUnit])}else{units.push(0)}}return"datetime("+units.join(", ")+")"}exports.dateTimeExpr=dateTimeExpr},{"./util":772}],758:[function(require,module,exports){"use strict";var channel_1=require("./channel");var util_1=require("./util");function countRetinal(encoding){var count=0;if(encoding.color){count++}if(encoding.opacity){count++}if(encoding.size){count++}if(encoding.shape){count++}return count}exports.countRetinal=countRetinal;function channels(encoding){return channel_1.CHANNELS.filter(function(channel){return has(encoding,channel)})}exports.channels=channels;function has(encoding,channel){var channelEncoding=encoding&&encoding[channel];return channelEncoding&&(channelEncoding.field!==undefined||util_1.isArray(channelEncoding)&&channelEncoding.length>0)}exports.has=has;function isAggregate(encoding){return util_1.some(channel_1.CHANNELS,function(channel){if(has(encoding,channel)&&encoding[channel].aggregate){return true}return false})}exports.isAggregate=isAggregate;function isRanged(encoding){return encoding&&(!!encoding.x&&!!encoding.x2||!!encoding.y&&!!encoding.y2)}exports.isRanged=isRanged;function fieldDefs(encoding){var arr=[];channel_1.CHANNELS.forEach(function(channel){if(has(encoding,channel)){if(util_1.isArray(encoding[channel])){encoding[channel].forEach(function(fieldDef){arr.push(fieldDef)})}else{arr.push(encoding[channel])}}});return arr}exports.fieldDefs=fieldDefs;function forEach(encoding,f,thisArg){channelMappingForEach(channel_1.CHANNELS,encoding,f,thisArg)}exports.forEach=forEach;function channelMappingForEach(channels,mapping,f,thisArg){var i=0;channels.forEach(function(channel){if(has(mapping,channel)){if(util_1.isArray(mapping[channel])){mapping[channel].forEach(function(fieldDef){f.call(thisArg,fieldDef,channel,i++)})}else{f.call(thisArg,mapping[channel],channel,i++)}}})}exports.channelMappingForEach=channelMappingForEach;function map(encoding,f,thisArg){return channelMappingMap(channel_1.CHANNELS,encoding,f,thisArg)}exports.map=map;function channelMappingMap(channels,mapping,f,thisArg){var arr=[];channels.forEach(function(channel){if(has(mapping,channel)){if(util_1.isArray(mapping[channel])){mapping[channel].forEach(function(fieldDef){arr.push(f.call(thisArg,fieldDef,channel))})}else{arr.push(f.call(thisArg,mapping[channel],channel))}}});return arr}exports.channelMappingMap=channelMappingMap;function reduce(encoding,f,init,thisArg){return channelMappingReduce(channel_1.CHANNELS,encoding,f,init,thisArg)}exports.reduce=reduce;function channelMappingReduce(channels,mapping,f,init,thisArg){var r=init;channel_1.CHANNELS.forEach(function(channel){if(has(mapping,channel)){if(util_1.isArray(mapping[channel])){mapping[channel].forEach(function(fieldDef){r=f.call(thisArg,r,fieldDef,channel)})}else{r=f.call(thisArg,r,mapping[channel],channel)}}});return r}exports.channelMappingReduce=channelMappingReduce},{"./channel":722,"./util":772}],759:[function(require,module,exports){"use strict"},{}],760:[function(require,module,exports){"use strict";var aggregate_1=require("./aggregate");var scale_1=require("./scale");var type_1=require("./type");var util_1=require("./util");function field(fieldDef,opt){if(opt===void 0){opt={}}var field=fieldDef.field;var prefix=opt.prefix;var suffix=opt.suffix;if(isCount(fieldDef)){field="count"}else{var fn=opt.fn;if(!opt.nofn){if(fieldDef.bin){fn="bin";suffix=opt.binSuffix||(opt.scaleType===scale_1.ScaleType.ORDINAL?"range":"start")}else if(!opt.noAggregate&&fieldDef.aggregate){fn=String(fieldDef.aggregate)}else if(fieldDef.timeUnit){fn=String(fieldDef.timeUnit)}}if(!!fn){field=fn+"_"+field}}if(!!suffix){field=field+"_"+suffix}if(!!prefix){field=prefix+"_"+field}if(opt.datum){field='datum["'+field+'"]'}return field}exports.field=field;function _isFieldDimension(fieldDef){if(util_1.contains([type_1.NOMINAL,type_1.ORDINAL],fieldDef.type)){return true}else if(!!fieldDef.bin){return true}else if(fieldDef.type===type_1.TEMPORAL){return!!fieldDef.timeUnit}return false}function isDimension(fieldDef){return fieldDef&&fieldDef.field&&_isFieldDimension(fieldDef)}exports.isDimension=isDimension;function isMeasure(fieldDef){return fieldDef&&fieldDef.field&&!_isFieldDimension(fieldDef)}exports.isMeasure=isMeasure;function count(){return{field:"*",aggregate:aggregate_1.AggregateOp.COUNT,type:type_1.QUANTITATIVE}}exports.count=count;function isCount(fieldDef){return fieldDef.aggregate===aggregate_1.AggregateOp.COUNT}exports.isCount=isCount;function title(fieldDef,config){if(fieldDef.title!=null){return fieldDef.title}if(isCount(fieldDef)){return config.countTitle}var fn=fieldDef.aggregate||fieldDef.timeUnit||fieldDef.bin&&"bin";if(fn){return fn.toString().toUpperCase()+"("+fieldDef.field+")"}else{return fieldDef.field}}exports.title=title},{"./aggregate":719,"./scale":764,"./type":771,"./util":772}],761:[function(require,module,exports){"use strict";var datetime_1=require("./datetime");var fielddef_1=require("./fielddef");var timeunit_1=require("./timeunit");var util_1=require("./util");function isEqualFilter(filter){return filter&&!!filter.field&&filter.equal!==undefined}exports.isEqualFilter=isEqualFilter;function isRangeFilter(filter){if(filter&&!!filter.field){if(util_1.isArray(filter.range)&&filter.range.length===2){return true}}return false}exports.isRangeFilter=isRangeFilter;function isOneOfFilter(filter){return filter&&!!filter.field&&(util_1.isArray(filter.oneOf)||util_1.isArray(filter.in))}exports.isOneOfFilter=isOneOfFilter;function expression(filter){if(util_1.isString(filter)){return filter}else{var fieldExpr=filter.timeUnit?"time("+timeunit_1.fieldExpr(filter.timeUnit,filter.field)+")":fielddef_1.field(filter,{datum:true});if(isEqualFilter(filter)){return fieldExpr+"==="+valueExpr(filter.equal,filter.timeUnit)}else if(isOneOfFilter(filter)){var oneOf=filter.oneOf||filter["in"];return"indexof(["+oneOf.map(function(v){return valueExpr(v,filter.timeUnit)}).join(",")+"], "+fieldExpr+") !== -1"}else if(isRangeFilter(filter)){var lower=filter.range[0];var upper=filter.range[1];if(lower!==null&&upper!==null){return"inrange("+fieldExpr+", "+valueExpr(lower,filter.timeUnit)+", "+valueExpr(upper,filter.timeUnit)+")"}else if(lower!==null){return fieldExpr+" >= "+lower}else if(upper!==null){return fieldExpr+" <= "+upper}}}return undefined}exports.expression=expression;function valueExpr(v,timeUnit){if(datetime_1.isDateTime(v)){var expr=datetime_1.dateTimeExpr(v,true);return"time("+expr+")"}if(timeunit_1.isSingleTimeUnit(timeUnit)){var datetime={};datetime[timeUnit]=v;var expr=datetime_1.dateTimeExpr(datetime,true);return"time("+expr+")"}return JSON.stringify(v)}},{"./datetime":757,"./fielddef":760,"./timeunit":769,"./util":772}],762:[function(require,module,exports){"use strict";exports.defaultLegendConfig={orient:undefined}},{}],763:[function(require,module,exports){"use strict";(function(Mark){Mark[Mark["AREA"]="area"]="AREA";Mark[Mark["BAR"]="bar"]="BAR";Mark[Mark["LINE"]="line"]="LINE";Mark[Mark["POINT"]="point"]="POINT";Mark[Mark["TEXT"]="text"]="TEXT";Mark[Mark["TICK"]="tick"]="TICK";Mark[Mark["RULE"]="rule"]="RULE";Mark[Mark["CIRCLE"]="circle"]="CIRCLE";Mark[Mark["SQUARE"]="square"]="SQUARE";Mark[Mark["ERRORBAR"]="errorBar"]="ERRORBAR"})(exports.Mark||(exports.Mark={}));var Mark=exports.Mark;exports.AREA=Mark.AREA;exports.BAR=Mark.BAR;exports.LINE=Mark.LINE;exports.POINT=Mark.POINT;exports.TEXT=Mark.TEXT;exports.TICK=Mark.TICK;exports.RULE=Mark.RULE;exports.CIRCLE=Mark.CIRCLE;exports.SQUARE=Mark.SQUARE;exports.ERRORBAR=Mark.ERRORBAR;exports.PRIMITIVE_MARKS=[exports.AREA,exports.BAR,exports.LINE,exports.POINT,exports.TEXT,exports.TICK,exports.RULE,exports.CIRCLE,exports.SQUARE]},{}],764:[function(require,module,exports){"use strict";(function(ScaleType){ScaleType[ScaleType["LINEAR"]="linear"]="LINEAR";ScaleType[ScaleType["LOG"]="log"]="LOG";ScaleType[ScaleType["POW"]="pow"]="POW";ScaleType[ScaleType["SQRT"]="sqrt"]="SQRT";ScaleType[ScaleType["QUANTILE"]="quantile"]="QUANTILE";ScaleType[ScaleType["QUANTIZE"]="quantize"]="QUANTIZE";ScaleType[ScaleType["ORDINAL"]="ordinal"]="ORDINAL";ScaleType[ScaleType["TIME"]="time"]="TIME";ScaleType[ScaleType["UTC"]="utc"]="UTC"})(exports.ScaleType||(exports.ScaleType={}));var ScaleType=exports.ScaleType;(function(NiceTime){NiceTime[NiceTime["SECOND"]="second"]="SECOND";NiceTime[NiceTime["MINUTE"]="minute"]="MINUTE";NiceTime[NiceTime["HOUR"]="hour"]="HOUR";NiceTime[NiceTime["DAY"]="day"]="DAY";NiceTime[NiceTime["WEEK"]="week"]="WEEK";NiceTime[NiceTime["MONTH"]="month"]="MONTH";NiceTime[NiceTime["YEAR"]="year"]="YEAR"})(exports.NiceTime||(exports.NiceTime={}));var NiceTime=exports.NiceTime;(function(BandSize){BandSize[BandSize["FIT"]="fit"]="FIT"})(exports.BandSize||(exports.BandSize={}));var BandSize=exports.BandSize;exports.BANDSIZE_FIT=BandSize.FIT;exports.defaultScaleConfig={round:true,textBandWidth:90,bandSize:21,padding:.1,useRawDomain:false,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]};exports.defaultFacetScaleConfig={round:true,padding:16}},{}],765:[function(require,module,exports){"use strict";var aggregate_1=require("./aggregate");var timeunit_1=require("./timeunit");var type_1=require("./type");var vlEncoding=require("./encoding");var mark_1=require("./mark");exports.DELIM="|";exports.ASSIGN="=";exports.TYPE=",";exports.FUNC="_";function shorten(spec){return"mark"+exports.ASSIGN+spec.mark+exports.DELIM+shortenEncoding(spec.encoding)}exports.shorten=shorten;function parse(shorthand,data,config){var split=shorthand.split(exports.DELIM),mark=split.shift().split(exports.ASSIGN)[1].trim(),encoding=parseEncoding(split.join(exports.DELIM));var spec={mark:mark_1.Mark[mark],encoding:encoding};if(data!==undefined){spec.data=data}if(config!==undefined){spec.config=config}return spec}exports.parse=parse;function shortenEncoding(encoding){return vlEncoding.map(encoding,function(fieldDef,channel){return channel+exports.ASSIGN+shortenFieldDef(fieldDef)}).join(exports.DELIM)}exports.shortenEncoding=shortenEncoding;function parseEncoding(encodingShorthand){return encodingShorthand.split(exports.DELIM).reduce(function(m,e){var split=e.split(exports.ASSIGN),enctype=split[0].trim(),fieldDefShorthand=split[1];m[enctype]=parseFieldDef(fieldDefShorthand);return m},{})}exports.parseEncoding=parseEncoding;function shortenFieldDef(fieldDef){return(fieldDef.aggregate?fieldDef.aggregate+exports.FUNC:"")+(fieldDef.timeUnit?fieldDef.timeUnit+exports.FUNC:"")+(fieldDef.bin?"bin"+exports.FUNC:"")+(fieldDef.field||"")+exports.TYPE+type_1.SHORT_TYPE[fieldDef.type]}exports.shortenFieldDef=shortenFieldDef;function shortenFieldDefs(fieldDefs,delim){if(delim===void 0){delim=exports.DELIM}return fieldDefs.map(shortenFieldDef).join(delim)}exports.shortenFieldDefs=shortenFieldDefs;function parseFieldDef(fieldDefShorthand){var split=fieldDefShorthand.split(exports.TYPE);var fieldDef={field:split[0].trim(),type:type_1.TYPE_FROM_SHORT_TYPE[split[1].trim()]};for(var i=0;i<aggregate_1.AGGREGATE_OPS.length;i++){var a=aggregate_1.AGGREGATE_OPS[i];if(fieldDef.field.indexOf(a+"_")===0){fieldDef.field=fieldDef.field.substr(a.toString().length+1);if(a===aggregate_1.AggregateOp.COUNT&&fieldDef.field.length===0){fieldDef.field="*"}fieldDef.aggregate=a;break}}for(var i=0;i<timeunit_1.TIMEUNITS.length;i++){var tu=timeunit_1.TIMEUNITS[i];if(fieldDef.field&&fieldDef.field.indexOf(tu+"_")===0){fieldDef.field=fieldDef.field.substr(fieldDef.field.length+1);fieldDef.timeUnit=tu;break}}if(fieldDef.field&&fieldDef.field.indexOf("bin_")===0){fieldDef.field=fieldDef.field.substr(4);fieldDef.bin=true}return fieldDef}exports.parseFieldDef=parseFieldDef},{"./aggregate":719,"./encoding":758,"./mark":763,"./timeunit":769,"./type":771}],766:[function(require,module,exports){"use strict";(function(SortOrder){SortOrder[SortOrder["ASCENDING"]="ascending"]="ASCENDING";SortOrder[SortOrder["DESCENDING"]="descending"]="DESCENDING";SortOrder[SortOrder["NONE"]="none"]="NONE"})(exports.SortOrder||(exports.SortOrder={}));var SortOrder=exports.SortOrder;function isSortField(sort){return!!sort&&!!sort["field"]&&!!sort["op"]}exports.isSortField=isSortField},{}],767:[function(require,module,exports){"use strict";var config_1=require("./config");var encoding_1=require("./encoding");var mark_1=require("./mark");var stack_1=require("./stack");var channel_1=require("./channel");var vlEncoding=require("./encoding");var util_1=require("./util");function isSomeFacetSpec(spec){return spec["facet"]!==undefined}exports.isSomeFacetSpec=isSomeFacetSpec;function isExtendedUnitSpec(spec){if(isSomeUnitSpec(spec)){var hasRow=encoding_1.has(spec.encoding,channel_1.ROW);var hasColumn=encoding_1.has(spec.encoding,channel_1.COLUMN);return hasRow||hasColumn}return false}exports.isExtendedUnitSpec=isExtendedUnitSpec;function isUnitSpec(spec){if(isSomeUnitSpec(spec)){return!isExtendedUnitSpec(spec)}return false}exports.isUnitSpec=isUnitSpec;function isSomeUnitSpec(spec){return spec["mark"]!==undefined}exports.isSomeUnitSpec=isSomeUnitSpec;function isLayerSpec(spec){return spec["layers"]!==undefined}exports.isLayerSpec=isLayerSpec;function normalize(spec){if(isExtendedUnitSpec(spec)){return normalizeExtendedUnitSpec(spec)}if(isUnitSpec(spec)){return normalizeUnitSpec(spec)}return spec}exports.normalize=normalize;function normalizeExtendedUnitSpec(spec){var hasRow=encoding_1.has(spec.encoding,channel_1.ROW);var hasColumn=encoding_1.has(spec.encoding,channel_1.COLUMN);var encoding=util_1.duplicate(spec.encoding);delete encoding.column;delete encoding.row;return util_1.extend(spec.name?{name:spec.name}:{},spec.description?{description:spec.description}:{},{data:spec.data},spec.transform?{transform:spec.transform}:{},{facet:util_1.extend(hasRow?{row:spec.encoding.row}:{},hasColumn?{column:spec.encoding.column}:{}),spec:normalizeUnitSpec(util_1.extend(spec.width?{width:spec.width}:{},spec.height?{height:spec.height}:{},{mark:spec.mark,encoding:encoding},spec.config?{config:spec.config}:{}))},spec.config?{config:spec.config}:{})}exports.normalizeExtendedUnitSpec=normalizeExtendedUnitSpec;function normalizeUnitSpec(spec){var config=spec.config;var overlayConfig=config&&config.overlay;var overlayWithLine=overlayConfig&&spec.mark===mark_1.AREA&&util_1.contains([config_1.AreaOverlay.LINEPOINT,config_1.AreaOverlay.LINE],overlayConfig.area);var overlayWithPoint=overlayConfig&&(overlayConfig.line&&spec.mark===mark_1.LINE||overlayConfig.area===config_1.AreaOverlay.LINEPOINT&&spec.mark===mark_1.AREA);if(spec.mark===mark_1.ERRORBAR){return normalizeErrorBarUnitSpec(spec)}if(encoding_1.isRanged(spec.encoding)){return normalizeRangedUnitSpec(spec)}if(overlayWithPoint||overlayWithLine){return normalizeOverlay(spec,overlayWithPoint,overlayWithLine)}return spec}exports.normalizeUnitSpec=normalizeUnitSpec;function normalizeRangedUnitSpec(spec){if(spec.encoding){var hasX=encoding_1.has(spec.encoding,channel_1.X);var hasY=encoding_1.has(spec.encoding,channel_1.Y);var hasX2=encoding_1.has(spec.encoding,channel_1.X2);var hasY2=encoding_1.has(spec.encoding,channel_1.Y2);if(hasX2&&!hasX||hasY2&&!hasY){var normalizedSpec=util_1.duplicate(spec);if(hasX2&&!hasX){normalizedSpec.encoding.x=normalizedSpec.encoding.x2;delete normalizedSpec.encoding.x2}if(hasY2&&!hasY){normalizedSpec.encoding.y=normalizedSpec.encoding.y2;delete normalizedSpec.encoding.y2}return normalizedSpec}}return spec}exports.normalizeRangedUnitSpec=normalizeRangedUnitSpec;function normalizeErrorBarUnitSpec(spec){var layerSpec=util_1.extend(spec.name?{name:spec.name}:{},spec.description?{description:spec.description}:{},spec.data?{data:spec.data}:{},spec.transform?{transform:spec.transform}:{},spec.config?{config:spec.config}:{},{layers:[]});if(!spec.encoding){return layerSpec}if(spec.mark===mark_1.ERRORBAR){var ruleSpec={mark:mark_1.RULE,encoding:util_1.extend(spec.encoding.x?{x:util_1.duplicate(spec.encoding.x)}:{},spec.encoding.y?{y:util_1.duplicate(spec.encoding.y)}:{},spec.encoding.x2?{x2:util_1.duplicate(spec.encoding.x2)}:{},spec.encoding.y2?{y2:util_1.duplicate(spec.encoding.y2)}:{},{})};var lowerTickSpec={mark:mark_1.TICK,encoding:util_1.extend(spec.encoding.x?{x:util_1.duplicate(spec.encoding.x)}:{},spec.encoding.y?{y:util_1.duplicate(spec.encoding.y)}:{},spec.encoding.size?{size:util_1.duplicate(spec.encoding.size)}:{},{})};var upperTickSpec={mark:mark_1.TICK,encoding:util_1.extend({x:spec.encoding.x2?util_1.duplicate(spec.encoding.x2):util_1.duplicate(spec.encoding.x),y:spec.encoding.y2?util_1.duplicate(spec.encoding.y2):util_1.duplicate(spec.encoding.y)},spec.encoding.size?{size:util_1.duplicate(spec.encoding.size)}:{})};layerSpec.layers.push(normalizeUnitSpec(ruleSpec));layerSpec.layers.push(normalizeUnitSpec(lowerTickSpec));layerSpec.layers.push(normalizeUnitSpec(upperTickSpec))}return layerSpec}exports.normalizeErrorBarUnitSpec=normalizeErrorBarUnitSpec;function normalizeOverlay(spec,overlayWithPoint,overlayWithLine){var outerProps=["name","description","data","transform"];var baseSpec=util_1.omit(spec,outerProps.concat("config"));var baseConfig=util_1.duplicate(spec.config);delete baseConfig.overlay;var stacked=stack_1.stack(spec.mark,spec.encoding,spec.config&&spec.config.mark?spec.config.mark.stacked:undefined);var layerSpec=util_1.extend(util_1.pick(spec,outerProps),{layers:[baseSpec]},util_1.keys(baseConfig).length>0?{config:baseConfig}:{});if(overlayWithLine){var lineSpec=util_1.duplicate(baseSpec);lineSpec.mark=mark_1.LINE;var markConfig=util_1.extend({},config_1.defaultOverlayConfig.lineStyle,spec.config.overlay.lineStyle,stacked?{stacked:stacked.offset}:null);if(util_1.keys(markConfig).length>0){lineSpec.config={mark:markConfig}}layerSpec.layers.push(lineSpec)}if(overlayWithPoint){var pointSpec=util_1.duplicate(baseSpec);pointSpec.mark=mark_1.POINT;var markConfig=util_1.extend({},config_1.defaultOverlayConfig.pointStyle,spec.config.overlay.pointStyle,stacked?{stacked:stacked.offset}:null);if(util_1.keys(markConfig).length>0){pointSpec.config={mark:markConfig}}layerSpec.layers.push(pointSpec)}return layerSpec}exports.normalizeOverlay=normalizeOverlay;function accumulate(dict,fieldDefs){fieldDefs.forEach(function(fieldDef){var pureFieldDef=["field","type","value","timeUnit","bin","aggregate"].reduce(function(f,key){if(fieldDef[key]!==undefined){f[key]=fieldDef[key]}return f},{});var key=util_1.hash(pureFieldDef);dict[key]=dict[key]||fieldDef});return dict}function fieldDefIndex(spec,dict){if(dict===void 0){dict={}}if(isLayerSpec(spec)){spec.layers.forEach(function(layer){accumulate(dict,vlEncoding.fieldDefs(layer.encoding))})}else if(isSomeFacetSpec(spec)){accumulate(dict,vlEncoding.fieldDefs(spec.facet));fieldDefIndex(spec.spec,dict)}else{accumulate(dict,vlEncoding.fieldDefs(spec.encoding))}return dict}function fieldDefs(spec){return util_1.vals(fieldDefIndex(spec))}exports.fieldDefs=fieldDefs;function isStacked(spec){return stack_1.stack(spec.mark,spec.encoding,spec.config&&spec.config.mark?spec.config.mark.stacked:undefined)!==null}exports.isStacked=isStacked},{"./channel":722,"./config":755,"./encoding":758,"./mark":763,"./stack":768,"./util":772}],768:[function(require,module,exports){"use strict";var aggregate_1=require("./aggregate");var channel_1=require("./channel");var encoding_1=require("./encoding");var mark_1=require("./mark");var scale_1=require("./scale");var util_1=require("./util");(function(StackOffset){StackOffset[StackOffset["ZERO"]="zero"]="ZERO";StackOffset[StackOffset["CENTER"]="center"]="CENTER";StackOffset[StackOffset["NORMALIZE"]="normalize"]="NORMALIZE";StackOffset[StackOffset["NONE"]="none"]="NONE"})(exports.StackOffset||(exports.StackOffset={}));var StackOffset=exports.StackOffset;function stack(mark,encoding,stacked){if(util_1.contains([StackOffset.NONE,null,false],stacked)){return null}if(!util_1.contains([mark_1.BAR,mark_1.AREA,mark_1.POINT,mark_1.CIRCLE,mark_1.SQUARE,mark_1.LINE,mark_1.TEXT,mark_1.TICK],mark)){return null}if(!encoding_1.isAggregate(encoding)){return null}var stackByChannels=channel_1.STACK_GROUP_CHANNELS.reduce(function(sc,channel){if(encoding_1.has(encoding,channel)&&!encoding[channel].aggregate){sc.push(channel)}return sc},[]);if(stackByChannels.length===0){return null}var hasXField=encoding_1.has(encoding,channel_1.X);var hasYField=encoding_1.has(encoding,channel_1.Y);var xIsAggregate=hasXField&&!!encoding.x.aggregate;var yIsAggregate=hasYField&&!!encoding.y.aggregate;if(xIsAggregate!==yIsAggregate){var fieldChannel=xIsAggregate?channel_1.X:channel_1.Y;var fieldChannelAggregate=encoding[fieldChannel].aggregate;var fieldChannelScale=encoding[fieldChannel].scale;if(fieldChannelScale&&fieldChannelScale.type&&fieldChannelScale.type!==scale_1.ScaleType.LINEAR){console.warn("Cannot stack non-linear ("+fieldChannelScale.type+") scale");return null}if(util_1.contains(aggregate_1.SUM_OPS,fieldChannelAggregate)){if(util_1.contains([mark_1.BAR,mark_1.AREA],mark)){stacked=stacked===undefined?StackOffset.ZERO:stacked}}else{console.warn("Cannot stack when the aggregate function is "+fieldChannelAggregate+"(non-summative).");return null}if(!stacked){return null}return{groupbyChannel:xIsAggregate?hasYField?channel_1.Y:null:hasXField?channel_1.X:null,fieldChannel:fieldChannel,stackByChannels:stackByChannels,offset:stacked}}return null}exports.stack=stack},{"./aggregate":719,"./channel":722,"./encoding":758,"./mark":763,"./scale":764,"./util":772}],769:[function(require,module,exports){"use strict";var channel_1=require("./channel");var datetime_1=require("./datetime");var scale_1=require("./scale");var util_1=require("./util");(function(TimeUnit){TimeUnit[TimeUnit["YEAR"]="year"]="YEAR";TimeUnit[TimeUnit["MONTH"]="month"]="MONTH";TimeUnit[TimeUnit["DAY"]="day"]="DAY";TimeUnit[TimeUnit["DATE"]="date"]="DATE";TimeUnit[TimeUnit["HOURS"]="hours"]="HOURS";TimeUnit[TimeUnit["MINUTES"]="minutes"]="MINUTES";TimeUnit[TimeUnit["SECONDS"]="seconds"]="SECONDS";TimeUnit[TimeUnit["MILLISECONDS"]="milliseconds"]="MILLISECONDS";TimeUnit[TimeUnit["YEARMONTH"]="yearmonth"]="YEARMONTH";TimeUnit[TimeUnit["YEARMONTHDATE"]="yearmonthdate"]="YEARMONTHDATE";TimeUnit[TimeUnit["YEARMONTHDATEHOURS"]="yearmonthdatehours"]="YEARMONTHDATEHOURS";TimeUnit[TimeUnit["YEARMONTHDATEHOURSMINUTES"]="yearmonthdatehoursminutes"]="YEARMONTHDATEHOURSMINUTES";TimeUnit[TimeUnit["YEARMONTHDATEHOURSMINUTESSECONDS"]="yearmonthdatehoursminutesseconds"]="YEARMONTHDATEHOURSMINUTESSECONDS";TimeUnit[TimeUnit["MONTHDATE"]="monthdate"]="MONTHDATE";TimeUnit[TimeUnit["HOURSMINUTES"]="hoursminutes"]="HOURSMINUTES";TimeUnit[TimeUnit["HOURSMINUTESSECONDS"]="hoursminutesseconds"]="HOURSMINUTESSECONDS";TimeUnit[TimeUnit["MINUTESSECONDS"]="minutesseconds"]="MINUTESSECONDS";TimeUnit[TimeUnit["SECONDSMILLISECONDS"]="secondsmilliseconds"]="SECONDSMILLISECONDS";TimeUnit[TimeUnit["QUARTER"]="quarter"]="QUARTER";TimeUnit[TimeUnit["YEARQUARTER"]="yearquarter"]="YEARQUARTER";TimeUnit[TimeUnit["QUARTERMONTH"]="quartermonth"]="QUARTERMONTH";TimeUnit[TimeUnit["YEARQUARTERMONTH"]="yearquartermonth"]="YEARQUARTERMONTH"})(exports.TimeUnit||(exports.TimeUnit={}));var TimeUnit=exports.TimeUnit;exports.SINGLE_TIMEUNITS=[TimeUnit.YEAR,TimeUnit.QUARTER,TimeUnit.MONTH,TimeUnit.DAY,TimeUnit.DATE,TimeUnit.HOURS,TimeUnit.MINUTES,TimeUnit.SECONDS,TimeUnit.MILLISECONDS];var SINGLE_TIMEUNIT_INDEX=exports.SINGLE_TIMEUNITS.reduce(function(d,timeUnit){d[timeUnit]=true;return d},{});function isSingleTimeUnit(timeUnit){return!!SINGLE_TIMEUNIT_INDEX[timeUnit]}exports.isSingleTimeUnit=isSingleTimeUnit;function convert(unit,date){var result=new Date(0,0,1,0,0,0,0);exports.SINGLE_TIMEUNITS.forEach(function(singleUnit){if(containsTimeUnit(unit,singleUnit)){switch(singleUnit){case TimeUnit.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case TimeUnit.YEAR:result.setFullYear(date.getFullYear());break;case TimeUnit.QUARTER:result.setMonth(Math.floor(date.getMonth()/3)*3);break;case TimeUnit.MONTH:result.setMonth(date.getMonth());break;case TimeUnit.DATE:result.setDate(date.getDate());break;case TimeUnit.HOURS:result.setHours(date.getHours());break;case TimeUnit.MINUTES:result.setMinutes(date.getMinutes());break;case TimeUnit.SECONDS:result.setSeconds(date.getSeconds());break;case TimeUnit.MILLISECONDS:result.setMilliseconds(date.getMilliseconds());break}}});return result}exports.convert=convert;exports.MULTI_TIMEUNITS=[TimeUnit.YEARQUARTER,TimeUnit.YEARQUARTERMONTH,TimeUnit.YEARMONTH,TimeUnit.YEARMONTHDATE,TimeUnit.YEARMONTHDATEHOURS,TimeUnit.YEARMONTHDATEHOURSMINUTES,TimeUnit.YEARMONTHDATEHOURSMINUTESSECONDS,TimeUnit.QUARTERMONTH,TimeUnit.HOURSMINUTES,TimeUnit.HOURSMINUTESSECONDS,TimeUnit.MINUTESSECONDS,TimeUnit.SECONDSMILLISECONDS];var MULTI_TIMEUNIT_INDEX=exports.MULTI_TIMEUNITS.reduce(function(d,timeUnit){d[timeUnit]=true;return d},{});function isMultiTimeUnit(timeUnit){return!!MULTI_TIMEUNIT_INDEX[timeUnit]}exports.isMultiTimeUnit=isMultiTimeUnit;exports.TIMEUNITS=exports.SINGLE_TIMEUNITS.concat(exports.MULTI_TIMEUNITS);function containsTimeUnit(fullTimeUnit,timeUnit){var fullTimeUnitStr=fullTimeUnit.toString();var timeUnitStr=timeUnit.toString();var index=fullTimeUnitStr.indexOf(timeUnitStr);return index>-1&&(timeUnit!==TimeUnit.SECONDS||index===0||fullTimeUnitStr.charAt(index-1)!=="i")}exports.containsTimeUnit=containsTimeUnit;function defaultScaleType(timeUnit){switch(timeUnit){case TimeUnit.HOURS:case TimeUnit.DAY:case TimeUnit.MONTH:case TimeUnit.QUARTER:return scale_1.ScaleType.ORDINAL}return scale_1.ScaleType.TIME}exports.defaultScaleType=defaultScaleType;function fieldExpr(fullTimeUnit,field){var fieldRef='datum["'+field+'"]';function func(timeUnit){if(timeUnit===TimeUnit.QUARTER){return"floor(month("+fieldRef+")"+"/3)"}else{return timeUnit+"("+fieldRef+")"}}var d=exports.SINGLE_TIMEUNITS.reduce(function(_d,tu){if(containsTimeUnit(fullTimeUnit,tu)){_d[tu]=func(tu)}return _d},{});if(d.day&&util_1.keys(d).length>1){console.warn('Time unit "'+fullTimeUnit+'" is not supported. We are replacing it with ',(fullTimeUnit+"").replace("day","date")+".");delete d.day;d.date=func(TimeUnit.DATE)}return datetime_1.dateTimeExpr(d)}exports.fieldExpr=fieldExpr;function imputedDomain(timeUnit,channel){if(util_1.contains([channel_1.ROW,channel_1.COLUMN,channel_1.SHAPE,channel_1.COLOR],channel)){return null}switch(timeUnit){case TimeUnit.SECONDS:return util_1.range(0,60);case TimeUnit.MINUTES:return util_1.range(0,60);case TimeUnit.HOURS:return util_1.range(0,24);case TimeUnit.DAY:return util_1.range(0,7);case TimeUnit.DATE:return util_1.range(1,32);case TimeUnit.MONTH:return util_1.range(0,12);case TimeUnit.QUARTER:return[0,1,2,3]}return null}exports.imputedDomain=imputedDomain;function smallestUnit(timeUnit){if(!timeUnit){return undefined}if(containsTimeUnit(timeUnit,TimeUnit.SECONDS)){return"second"}if(containsTimeUnit(timeUnit,TimeUnit.MINUTES)){return"minute"}if(containsTimeUnit(timeUnit,TimeUnit.HOURS)){return"hour"}if(containsTimeUnit(timeUnit,TimeUnit.DAY)||containsTimeUnit(timeUnit,TimeUnit.DATE)){return"day"}if(containsTimeUnit(timeUnit,TimeUnit.MONTH)){return"month"}if(containsTimeUnit(timeUnit,TimeUnit.YEAR)){return"year"}return undefined}exports.smallestUnit=smallestUnit;function template(timeUnit,field,shortTimeLabels){if(!timeUnit){return undefined}var dateComponents=[];var template="";var hasYear=containsTimeUnit(timeUnit,TimeUnit.YEAR);if(containsTimeUnit(timeUnit,TimeUnit.QUARTER)){template="Q{{"+field+" | quarter}}"}if(containsTimeUnit(timeUnit,TimeUnit.MONTH)){dateComponents.push(shortTimeLabels!==false?"%b":"%B")}if(containsTimeUnit(timeUnit,TimeUnit.DAY)){dateComponents.push(shortTimeLabels?"%a":"%A")}else if(containsTimeUnit(timeUnit,TimeUnit.DATE)){dateComponents.push("%d"+(hasYear?",":""))}if(hasYear){dateComponents.push(shortTimeLabels?"%y":"%Y")}var timeComponents=[];if(containsTimeUnit(timeUnit,TimeUnit.HOURS)){timeComponents.push("%H")}if(containsTimeUnit(timeUnit,TimeUnit.MINUTES)){timeComponents.push("%M")}if(containsTimeUnit(timeUnit,TimeUnit.SECONDS)){timeComponents.push("%S")}if(containsTimeUnit(timeUnit,TimeUnit.MILLISECONDS)){timeComponents.push("%L")}var dateTimeComponents=[];if(dateComponents.length>0){dateTimeComponents.push(dateComponents.join(" "))}if(timeComponents.length>0){dateTimeComponents.push(timeComponents.join(":"))}if(dateTimeComponents.length>0){if(template){template+=" "}template+="{{"+field+" | time:'"+dateTimeComponents.join(" ")+"'}}"}return template||undefined}exports.template=template},{"./channel":722,"./datetime":757,"./scale":764,"./util":772}],770:[function(require,module,exports){"use strict"},{}],771:[function(require,module,exports){"use strict";(function(Type){Type[Type["QUANTITATIVE"]="quantitative"]="QUANTITATIVE";Type[Type["ORDINAL"]="ordinal"]="ORDINAL";Type[Type["TEMPORAL"]="temporal"]="TEMPORAL";Type[Type["NOMINAL"]="nominal"]="NOMINAL"})(exports.Type||(exports.Type={}));var Type=exports.Type;exports.QUANTITATIVE=Type.QUANTITATIVE;exports.ORDINAL=Type.ORDINAL;exports.TEMPORAL=Type.TEMPORAL;exports.NOMINAL=Type.NOMINAL;exports.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"};exports.TYPE_FROM_SHORT_TYPE={Q:exports.QUANTITATIVE,T:exports.TEMPORAL,O:exports.ORDINAL,N:exports.NOMINAL};function getFullName(type){var typeString=type;return exports.TYPE_FROM_SHORT_TYPE[typeString.toUpperCase()]||typeString.toLowerCase()}exports.getFullName=getFullName},{}],772:[function(require,module,exports){"use strict";var stringify=require("json-stable-stringify");var util_1=require("datalib/src/util");exports.keys=util_1.keys;exports.extend=util_1.extend;exports.duplicate=util_1.duplicate;exports.isArray=util_1.isArray;exports.vals=util_1.vals;exports.truncate=util_1.truncate;exports.toMap=util_1.toMap;exports.isObject=util_1.isObject;exports.isString=util_1.isString;exports.isNumber=util_1.isNumber;exports.isBoolean=util_1.isBoolean;var util_2=require("datalib/src/util");var util_3=require("datalib/src/util");function pick(obj,props){var copy={};props.forEach(function(prop){if(obj.hasOwnProperty(prop)){copy[prop]=obj[prop]}});return copy}exports.pick=pick;function range(start,stop,step){if(arguments.length<3){step=1;if(arguments.length<2){stop=start;start=0}}if((stop-start)/step===Infinity){throw new Error("Infinite range")}var range=[],i=-1,j;if(step<0){while((j=start+step*++i)>stop){range.push(j)}}else{while((j=start+step*++i)<stop){range.push(j)}}return range}exports.range=range;function omit(obj,props){var copy=util_2.duplicate(obj);props.forEach(function(prop){delete copy[prop]});return copy}exports.omit=omit;function hash(a){if(util_3.isString(a)||util_3.isNumber(a)||util_3.isBoolean(a)){return String(a)}return stringify(a)}exports.hash=hash;function contains(array,item){return array.indexOf(item)>-1}exports.contains=contains;function without(array,excludedItems){return array.filter(function(item){return!contains(excludedItems,item)})}exports.without=without;function union(array,other){return array.concat(without(other,array))}exports.union=union;function forEach(obj,f,thisArg){if(obj.forEach){obj.forEach.call(thisArg,f)}else{for(var k in obj){if(obj.hasOwnProperty(k)){f.call(thisArg,obj[k],k,obj)}}}}exports.forEach=forEach;function reduce(obj,f,init,thisArg){if(obj.reduce){return obj.reduce.call(thisArg,f,init)}else{for(var k in obj){if(obj.hasOwnProperty(k)){init=f.call(thisArg,init,obj[k],k,obj)}}return init}}exports.reduce=reduce;function map(obj,f,thisArg){if(obj.map){return obj.map.call(thisArg,f)}else{var output=[];for(var k in obj){if(obj.hasOwnProperty(k)){output.push(f.call(thisArg,obj[k],k,obj))}}return output}}exports.map=map;function some(arr,f){var i=0;for(var k=0;k<arr.length;k++){if(f(arr[k],k,i++)){return true}}return false}exports.some=some;function every(arr,f){var i=0;for(var k=0;k<arr.length;k++){if(!f(arr[k],k,i++)){return false}}return true}exports.every=every;function flatten(arrays){return[].concat.apply([],arrays)}exports.flatten=flatten;function mergeDeep(dest){var src=[];for(var _i=1;_i<arguments.length;_i++){src[_i-1]=arguments[_i]}for(var i=0;i<src.length;i++){dest=deepMerge_(dest,src[i])}return dest}exports.mergeDeep=mergeDeep;function deepMerge_(dest,src){if(typeof src!=="object"||src===null){return dest}for(var p in src){if(!src.hasOwnProperty(p)){continue}if(src[p]===undefined){continue}if(typeof src[p]!=="object"||src[p]===null){dest[p]=src[p]}else if(typeof dest[p]!=="object"||dest[p]===null){dest[p]=mergeDeep(src[p].constructor===Array?[]:{},src[p])}else{mergeDeep(dest[p],src[p])}}return dest}function unique(values,f){var results=[];var u={},v,i,n;for(i=0,n=values.length;i<n;++i){v=f?f(values[i]):values[i];if(v in u){continue}u[v]=1;results.push(values[i])}return results}exports.unique=unique;function warning(message){console.warn("[VL Warning]",message)}exports.warning=warning;function error(message){console.error("[VL Error]",message)}exports.error=error;function differ(dict,other){for(var key in dict){if(dict.hasOwnProperty(key)){if(other[key]&&dict[key]&&other[key]!==dict[key]){return true}}}return false}exports.differ=differ},{"datalib/src/util":410,"json-stable-stringify":717}],773:[function(require,module,exports){"use strict";var util_1=require("./util");var mark_1=require("./mark");exports.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]};exports.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:util_1.toMap(["row","column","x","y","size","color","detail"]),line:util_1.toMap(["row","column","x","y","color","detail"]),area:util_1.toMap(["row","column","x","y","color","detail"]),tick:util_1.toMap(["row","column","x","y","color","detail"]),circle:util_1.toMap(["row","column","x","y","color","size","detail"]),square:util_1.toMap(["row","column","x","y","color","size","detail"]),point:util_1.toMap(["row","column","x","y","color","size","detail","shape"]),text:util_1.toMap(["row","column","size","color","text"])};function getEncodingMappingError(spec,requiredChannelMap,supportedChannelMap){if(requiredChannelMap===void 0){requiredChannelMap=exports.DEFAULT_REQUIRED_CHANNEL_MAP}if(supportedChannelMap===void 0){supportedChannelMap=exports.DEFAULT_SUPPORTED_CHANNEL_TYPE}var mark=spec.mark;var encoding=spec.encoding;var requiredChannels=requiredChannelMap[mark];var supportedChannels=supportedChannelMap[mark];for(var i in requiredChannels){if(!(requiredChannels[i]in encoding)){return'Missing encoding channel "'+requiredChannels[i]+'" for mark "'+mark+'"'}}for(var channel in encoding){if(!supportedChannels[channel]){return'Encoding channel "'+channel+'" is not supported by mark type "'+mark+'"'}}if(mark===mark_1.BAR&&!encoding.x&&!encoding.y){return"Missing both x and y for bar"}return null}exports.getEncodingMappingError=getEncodingMappingError},{"./mark":763,"./util":772}],774:[function(require,module,exports){"use strict";var util_1=require("./util");function isUnionedDomain(domain){if(!util_1.isArray(domain)){return"fields"in domain}return false}exports.isUnionedDomain=isUnionedDomain;function isDataRefDomain(domain){if(!util_1.isArray(domain)){return"data"in domain}return false}exports.isDataRefDomain=isDataRefDomain},{"./util":772}],775:[function(require,module,exports){"use strict";exports.axis=require("./axis");exports.aggregate=require("./aggregate");exports.bin=require("./bin");exports.channel=require("./channel");exports.compile=require("./compile/compile").compile;exports.config=require("./config");exports.data=require("./data");exports.datetime=require("./datetime");exports.encoding=require("./encoding");exports.facet=require("./facet");exports.fieldDef=require("./fielddef");exports.legend=require("./legend");exports.mark=require("./mark");exports.scale=require("./scale");exports.shorthand=require("./shorthand");exports.sort=require("./sort");exports.spec=require("./spec");exports.stack=require("./stack");exports.timeUnit=require("./timeunit");exports.transform=require("./transform");exports.type=require("./type");exports.util=require("./util");exports.validate=require("./validate");exports.version=require("../package.json").version},{"../package.json":718,"./aggregate":719,"./axis":720,"./bin":721,"./channel":722,"./compile/compile":725,"./config":755,"./data":756,"./datetime":757,"./encoding":758,"./facet":759,"./fielddef":760,"./legend":762,"./mark":763,"./scale":764,"./shorthand":765,"./sort":766,"./spec":767,"./stack":768,"./timeunit":769,"./transform":770,"./type":771,"./util":772,"./validate":773}],776:[function(require,module,exports){var ts=Date.now();function write(msg){console.log("[Vega Log]",msg)}function error(msg){console.error("[Vega Err]",msg)}function debug(input,args){if(!debug.enable)return;var log=Function.prototype.bind.call(console.log,console);var state={prevTime:Date.now()-ts,stamp:input.stamp};if(input.add){state.add=input.add.length;state.mod=input.mod.length;state.rem=input.rem.length;state.reflow=!!input.reflow}log.apply(console,(args.push(JSON.stringify(state)),args));ts=Date.now()}module.exports={log:write,error:error,debug:(debug.enable=false,debug)}},{}],777:[function(require,module,exports){module.exports={path:require("./path"),render:require("./render"),Item:require("./util/Item"),bound:require("./util/bound"),Bounds:require("./util/Bounds"),canvas:require("./util/canvas"),Gradient:require("./util/Gradient"),toJSON:require("./util/scene").toJSON,fromJSON:require("./util/scene").fromJSON}},{"./path":779,"./render":799,"./util/Bounds":805,"./util/Gradient":807,"./util/Item":809,"./util/bound":810,"./util/canvas":811,"./util/scene":813}],778:[function(require,module,exports){var segmentCache={},bezierCache={},join=[].join;function segments(x,y,rx,ry,large,sweep,rotateX,ox,oy){var key=join.call(arguments);if(segmentCache[key]){return segmentCache[key]}var th=rotateX*(Math.PI/180);var sin_th=Math.sin(th);var cos_th=Math.cos(th);rx=Math.abs(rx);ry=Math.abs(ry);var px=cos_th*(ox-x)*.5+sin_th*(oy-y)*.5;var py=cos_th*(oy-y)*.5-sin_th*(ox-x)*.5;var pl=px*px/(rx*rx)+py*py/(ry*ry);if(pl>1){pl=Math.sqrt(pl);rx*=pl;ry*=pl}var a00=cos_th/rx;var a01=sin_th/rx;var a10=-sin_th/ry;var a11=cos_th/ry;var x0=a00*ox+a01*oy;var y0=a10*ox+a11*oy;var x1=a00*x+a01*y;var y1=a10*x+a11*y;var d=(x1-x0)*(x1-x0)+(y1-y0)*(y1-y0);var sfactor_sq=1/d-.25;if(sfactor_sq<0)sfactor_sq=0;var sfactor=Math.sqrt(sfactor_sq);if(sweep==large)sfactor=-sfactor;var xc=.5*(x0+x1)-sfactor*(y1-y0);var yc=.5*(y0+y1)+sfactor*(x1-x0);var th0=Math.atan2(y0-yc,x0-xc);var th1=Math.atan2(y1-yc,x1-xc);var th_arc=th1-th0;if(th_arc<0&&sweep===1){th_arc+=2*Math.PI}else if(th_arc>0&&sweep===0){th_arc-=2*Math.PI}var segs=Math.ceil(Math.abs(th_arc/(Math.PI*.5+.001)));var result=[];for(var i=0;i<segs;++i){var th2=th0+i*th_arc/segs;var th3=th0+(i+1)*th_arc/segs;result[i]=[xc,yc,th2,th3,rx,ry,sin_th,cos_th]}return segmentCache[key]=result}function bezier(params){var key=join.call(params);if(bezierCache[key]){return bezierCache[key]}var cx=params[0],cy=params[1],th0=params[2],th1=params[3],rx=params[4],ry=params[5],sin_th=params[6],cos_th=params[7];var a00=cos_th*rx;var a01=-sin_th*ry;var a10=sin_th*rx;var a11=cos_th*ry;var cos_th0=Math.cos(th0);var sin_th0=Math.sin(th0);var cos_th1=Math.cos(th1);var sin_th1=Math.sin(th1);var th_half=.5*(th1-th0);var sin_th_h2=Math.sin(th_half*.5);var t=8/3*sin_th_h2*sin_th_h2/Math.sin(th_half);var x1=cx+cos_th0-t*sin_th0;var y1=cy+sin_th0+t*cos_th0;var x3=cx+cos_th1;var y3=cy+sin_th1;var x2=x3+t*sin_th1;var y2=y3-t*cos_th1;return bezierCache[key]=[a00*x1+a01*y1,a10*x1+a11*y1,a00*x2+a01*y2,a10*x2+a11*y2,a00*x3+a01*y3,a10*x3+a11*y3]}module.exports={segments:segments,bezier:bezier,cache:{segments:segmentCache,bezier:bezierCache}}},{}],779:[function(require,module,exports){module.exports={parse:require("./parse"),render:require("./render")}},{"./parse":780,"./render":781}],780:[function(require,module,exports){var cmdlen={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},regexp=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];module.exports=function(pathstr){var result=[],path,curr,chunks,parsed,param,cmd,len,i,j,n,m;path=pathstr.slice().replace(regexp[0],"###$1").split(regexp[1]).slice(1);for(i=0,n=path.length;i<n;++i){curr=path[i];chunks=curr.slice(1).trim().replace(regexp[2],"$1###$2").split(regexp[3]);cmd=curr.charAt(0);parsed=[cmd];for(j=0,m=chunks.length;j<m;++j){if((param=+chunks[j])===param){parsed.push(param)}}len=cmdlen[cmd.toLowerCase()];if(parsed.length-1>len){for(j=1,m=parsed.length;j<m;j+=len){result.push([cmd].concat(parsed.slice(j,j+len)))}}else{result.push(parsed)}}return result}},{}],781:[function(require,module,exports){var arc=require("./arc");module.exports=function(g,path,l,t){var current,previous=null,x=0,y=0,controlX=0,controlY=0,tempX,tempY,tempControlX,tempControlY;if(l==null)l=0;if(t==null)t=0;g.beginPath();for(var i=0,len=path.length;i<len;++i){current=path[i];switch(current[0]){case"l":x+=current[1];y+=current[2];g.lineTo(x+l,y+t);break;case"L":x=current[1];y=current[2];g.lineTo(x+l,y+t);break;case"h":x+=current[1];g.lineTo(x+l,y+t);break;case"H":x=current[1];g.lineTo(x+l,y+t);break;case"v":y+=current[1];g.lineTo(x+l,y+t);break;case"V":y=current[1];g.lineTo(x+l,y+t);break;case"m":x+=current[1];y+=current[2];g.moveTo(x+l,y+t);break;case"M":x=current[1];y=current[2];g.moveTo(x+l,y+t);break;case"c":tempX=x+current[5];tempY=y+current[6];controlX=x+current[3];controlY=y+current[4];g.bezierCurveTo(x+current[1]+l,y+current[2]+t,controlX+l,controlY+t,tempX+l,tempY+t);x=tempX;y=tempY;break;case"C":x=current[5];y=current[6];controlX=current[3];controlY=current[4];g.bezierCurveTo(current[1]+l,current[2]+t,controlX+l,controlY+t,x+l,y+t);break;case"s":tempX=x+current[3];tempY=y+current[4];controlX=2*x-controlX;controlY=2*y-controlY;g.bezierCurveTo(controlX+l,controlY+t,x+current[1]+l,y+current[2]+t,tempX+l,tempY+t);controlX=x+current[1];controlY=y+current[2];x=tempX;y=tempY;break;case"S":tempX=current[3];tempY=current[4];controlX=2*x-controlX;controlY=2*y-controlY;g.bezierCurveTo(controlX+l,controlY+t,current[1]+l,current[2]+t,tempX+l,tempY+t);x=tempX;y=tempY;controlX=current[1];controlY=current[2];break;case"q":tempX=x+current[3];tempY=y+current[4];controlX=x+current[1];controlY=y+current[2];g.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x=tempX;y=tempY;break;case"Q":tempX=current[3];tempY=current[4];g.quadraticCurveTo(current[1]+l,current[2]+t,tempX+l,tempY+t);x=tempX;y=tempY;controlX=current[1];controlY=current[2];break;case"t":tempX=x+current[1];tempY=y+current[2];if(previous[0].match(/[QqTt]/)===null){controlX=x;controlY=y}else if(previous[0]==="t"){controlX=2*x-tempControlX;controlY=2*y-tempControlY}else if(previous[0]==="q"){controlX=2*x-controlX;controlY=2*y-controlY}tempControlX=controlX;tempControlY=controlY;g.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x=tempX;y=tempY;controlX=x+current[1];controlY=y+current[2];break;case"T":tempX=current[1];tempY=current[2];controlX=2*x-controlX;controlY=2*y-controlY;g.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x=tempX;y=tempY;break;case"a":drawArc(g,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+x+l,current[7]+y+t]);x+=current[6];y+=current[7];break;case"A":drawArc(g,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+l,current[7]+t]);x=current[6];y=current[7];break;case"z":case"Z":g.closePath();break}previous=current}};function drawArc(g,x,y,coords){var seg=arc.segments(coords[5],coords[6],coords[0],coords[1],coords[3],coords[4],coords[2],x,y);for(var i=0;i<seg.length;++i){var bez=arc.bezier(seg[i]);g.bezierCurveTo.apply(g,bez)}}},{"./arc":778}],782:[function(require,module,exports){function Handler(){this._active=null;this._handlers={}}var prototype=Handler.prototype;prototype.initialize=function(el,pad,obj){this._el=el;this._obj=obj||null;return this.padding(pad)};prototype.element=function(){return this._el};prototype.padding=function(pad){this._padding=pad||{top:0,left:0,bottom:0,right:0};return this};prototype.scene=function(scene){if(!arguments.length)return this._scene;this._scene=scene;return this};prototype.on=function(){};prototype.off=function(){};prototype.handlers=function(){var h=this._handlers,a=[],k;for(k in h){a.push.apply(a,h[k])}return a};prototype.eventName=function(name){var i=name.indexOf(".");return i<0?name:name.slice(0,i)};module.exports=Handler},{}],783:[function(require,module,exports){function Renderer(){this._el=null;this._bgcolor=null}var prototype=Renderer.prototype;prototype.initialize=function(el,width,height,padding){this._el=el;return this.resize(width,height,padding)};prototype.element=function(){return this._el};prototype.scene=function(){return this._el&&this._el.firstChild};prototype.background=function(bgcolor){if(arguments.length===0)return this._bgcolor;this._bgcolor=bgcolor;return this};prototype.resize=function(width,height,padding){this._width=width;this._height=height;this._padding=padding||{top:0,left:0,bottom:0,right:0};return this};prototype.render=function(){return this};module.exports=Renderer},{}],784:[function(require,module,exports){var DOM=require("../../util/dom"),Handler=require("../Handler"),marks=require("./marks");function CanvasHandler(){Handler.call(this);this._down=null;this._touch=null;this._first=true}var base=Handler.prototype;var prototype=CanvasHandler.prototype=Object.create(base);prototype.constructor=CanvasHandler;prototype.initialize=function(el,pad,obj){var canvas=this._canvas=DOM.find(el,"canvas");if(canvas){var that=this;this.events.forEach(function(type){canvas.addEventListener(type,function(evt){if(prototype[type]){prototype[type].call(that,evt)}else{that.fire(type,evt)}})})}return base.initialize.call(this,el,pad,obj)};prototype.canvas=function(){return this._canvas};prototype.context=function(){return this._canvas.getContext("2d")};prototype.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"];prototype.DOMMouseScroll=function(evt){this.fire("mousewheel",evt)};function move(moveEvent,overEvent,outEvent){return function(evt){var a=this._active,p=this.pickEvent(evt);if(p===a){this.fire(moveEvent,evt)}else{this.fire(outEvent,evt);this._active=p;this.fire(overEvent,evt);this.fire(moveEvent,evt)}}}function inactive(type){return function(evt){this.fire(type,evt);this._active=null}}prototype.mousemove=move("mousemove","mouseover","mouseout");prototype.dragover=move("dragover","dragenter","dragleave");prototype.mouseout=inactive("mouseout");prototype.dragleave=inactive("dragleave");prototype.mousedown=function(evt){this._down=this._active;this.fire("mousedown",evt)};prototype.click=function(evt){if(this._down===this._active){this.fire("click",evt);this._down=null}};prototype.touchstart=function(evt){this._touch=this.pickEvent(evt.changedTouches[0]);if(this._first){this._active=this._touch;this._first=false}this.fire("touchstart",evt,true)};prototype.touchmove=function(evt){this.fire("touchmove",evt,true)};prototype.touchend=function(evt){this.fire("touchend",evt,true);this._touch=null};prototype.fire=function(type,evt,touch){var a=touch?this._touch:this._active,h=this._handlers[type],i,len;if(h){evt.vegaType=type;for(i=0,len=h.length;i<len;++i){h[i].handler.call(this._obj,evt,a)}}};prototype.on=function(type,handler){var name=this.eventName(type),h=this._handlers;(h[name]||(h[name]=[])).push({type:type,handler:handler});return this};prototype.off=function(type,handler){var name=this.eventName(type),h=this._handlers[name],i;if(!h)return;for(i=h.length;--i>=0;){if(h[i].type!==type)continue;if(!handler||h[i].handler===handler)h.splice(i,1)}return this};prototype.pickEvent=function(evt){var rect=this._canvas.getBoundingClientRect(),pad=this._padding,x,y;return this.pick(this._scene,x=evt.clientX-rect.left,y=evt.clientY-rect.top,x-pad.left,y-pad.top)};prototype.pick=function(scene,x,y,gx,gy){var g=this.context(),mark=marks[scene.marktype];return mark.pick.call(this,g,scene,x,y,gx,gy)};module.exports=CanvasHandler},{"../../util/dom":812,"../Handler":782,"./marks":791}],785:[function(require,module,exports){var DOM=require("../../util/dom"),Bounds=require("../../util/Bounds"),ImageLoader=require("../../util/ImageLoader"),Canvas=require("../../util/canvas"),Renderer=require("../Renderer"),marks=require("./marks");function CanvasRenderer(loadConfig){Renderer.call(this);this._loader=new ImageLoader(loadConfig)}CanvasRenderer.RETINA=true;var base=Renderer.prototype;var prototype=CanvasRenderer.prototype=Object.create(base);prototype.constructor=CanvasRenderer;prototype.initialize=function(el,width,height,padding){this._canvas=Canvas.instance(width,height);if(el){DOM.clear(el,0).appendChild(this._canvas);this._canvas.setAttribute("class","marks")}return base.initialize.call(this,el,width,height,padding)};prototype.resize=function(width,height,padding){base.resize.call(this,width,height,padding);Canvas.resize(this._canvas,this._width,this._height,this._padding,CanvasRenderer.RETINA);return this};prototype.canvas=function(){return this._canvas};prototype.context=function(){return this._canvas?this._canvas.getContext("2d"):null};prototype.pendingImages=function(){return this._loader.pending()};function clipToBounds(g,items){if(!items)return null;var b=new Bounds,i,n,item,mark,group;for(i=0,n=items.length;i<n;++i){item=items[i];mark=item.mark;group=mark.group;item=marks[mark.marktype].nested?mark:item;b.union(translate(item.bounds,group));if(item["bounds:prev"]){b.union(translate(item["bounds:prev"],group))}}b.round();g.beginPath();g.rect(b.x1,b.y1,b.width(),b.height());g.clip();return b}function translate(bounds,group){if(group==null)return bounds;var b=bounds.clone();for(;group!=null;group=group.mark.group){b.translate(group.x||0,group.y||0)}return b}prototype.render=function(scene,items){var g=this.context(),p=this._padding,w=this._width+p.left+p.right,h=this._height+p.top+p.bottom,b;this._scene=scene;g.save();b=clipToBounds(g,items);this.clear(-p.left,-p.top,w,h);this.draw(g,scene,b);g.restore();this._scene=null;return this};prototype.draw=function(ctx,scene,bounds){var mark=marks[scene.marktype];mark.draw.call(this,ctx,scene,bounds)};prototype.clear=function(x,y,w,h){var g=this.context();g.clearRect(x,y,w,h);if(this._bgcolor!=null){g.fillStyle=this._bgcolor;g.fillRect(x,y,w,h)}};prototype.loadImage=function(uri){var renderer=this,scene=this._scene;return this._loader.loadImage(uri,function(){renderer.renderAsync(scene)})};prototype.renderAsync=function(scene){var renderer=this;if(renderer._async_id){clearTimeout(renderer._async_id)}renderer._async_id=setTimeout(function(){renderer.render(scene);delete renderer._async_id},10)};module.exports=CanvasRenderer},{"../../util/Bounds":805,"../../util/ImageLoader":808,"../../util/canvas":811,"../../util/dom":812,"../Renderer":783,"./marks":791}],786:[function(require,module,exports){module.exports={Handler:require("./CanvasHandler"),Renderer:require("./CanvasRenderer")}},{"./CanvasHandler":784,"./CanvasRenderer":785}],787:[function(require,module,exports){var util=require("./util");var halfpi=Math.PI/2;function path(g,o){var x=o.x||0,y=o.y||0,ir=o.innerRadius||0,or=o.outerRadius||0,sa=(o.startAngle||0)-halfpi,ea=(o.endAngle||0)-halfpi;g.beginPath();if(ir===0)g.moveTo(x,y);else g.arc(x,y,ir,sa,ea,0);g.arc(x,y,or,ea,sa,1);g.closePath()}module.exports={draw:util.drawAll(path),pick:util.pickPath(path)}},{"./util":798}],788:[function(require,module,exports){var util=require("./util"),parse=require("../../../path/parse"),render=require("../../../path/render"),areaPath=require("../../../util/svg").path.area;function path(g,items){var o=items[0],p=o.pathCache||(o.pathCache=parse(areaPath(items)));render(g,p)}function pick(g,scene,x,y,gx,gy){var items=scene.items,b=scene.bounds;if(!items||!items.length||b&&!b.contains(gx,gy)){return null}if(g.pixelratio!=null&&g.pixelratio!==1){x*=g.pixelratio;y*=g.pixelratio}return hit(g,items,x,y)?items[0]:null}var hit=util.testPath(path);module.exports={draw:util.drawOne(path),pick:pick,nested:true}},{"../../../path/parse":780,"../../../path/render":781,"../../../util/svg":814,"./util":798}],789:[function(require,module,exports){var util=require("./util"),EMPTY=[];function draw(g,scene,bounds){if(!scene.items||!scene.items.length)return;var groups=scene.items,renderer=this,group,items,axes,legends,gx,gy,w,h,opac,i,n,j,m;for(i=0,n=groups.length;i<n;++i){group=groups[i];axes=group.axisItems||EMPTY;items=group.items||EMPTY;legends=group.legendItems||EMPTY;gx=group.x||0;gy=group.y||0;w=group.width||0;h=group.height||0;if(group.stroke||group.fill){opac=group.opacity==null?1:group.opacity;if(opac>0){if(group.fill&&util.fill(g,group,opac)){g.fillRect(gx,gy,w,h)}if(group.stroke&&util.stroke(g,group,opac)){g.strokeRect(gx,gy,w,h)}}}g.save();g.translate(gx,gy);if(group.clip){g.beginPath();g.rect(0,0,w,h);g.clip()}if(bounds)bounds.translate(-gx,-gy);for(j=0,m=axes.length;j<m;++j){if(axes[j].layer==="back"){renderer.draw(g,axes[j],bounds)}}for(j=0,m=items.length;j<m;++j){renderer.draw(g,items[j],bounds)}for(j=0,m=axes.length;j<m;++j){if(axes[j].layer!=="back"){renderer.draw(g,axes[j],bounds)}}for(j=0,m=legends.length;j<m;++j){renderer.draw(g,legends[j],bounds)}if(bounds)bounds.translate(gx,gy);g.restore()}}function pick(g,scene,x,y,gx,gy){if(scene.bounds&&!scene.bounds.contains(gx,gy)){return null}var groups=scene.items||EMPTY,subscene,group,axes,items,legends,hits,dx,dy,i,j,b;for(i=groups.length;--i>=0;){group=groups[i];b=group.bounds;if(b&&!b.contains(gx,gy))continue;axes=group.axisItems||EMPTY;items=group.items||EMPTY;legends=group.legendItems||EMPTY;dx=group.x||0;dy=group.y||0;g.save();g.translate(dx,dy);dx=gx-dx;dy=gy-dy;for(j=legends.length;--j>=0;){subscene=legends[j];if(subscene.interactive!==false){hits=this.pick(subscene,x,y,dx,dy);if(hits){g.restore();return hits}}}for(j=axes.length;--j>=0;){subscene=axes[j];if(subscene.interactive!==false&&subscene.layer!=="back"){hits=this.pick(subscene,x,y,dx,dy);if(hits){g.restore();return hits}}}for(j=items.length;--j>=0;){subscene=items[j];if(subscene.interactive!==false){hits=this.pick(subscene,x,y,dx,dy);if(hits){g.restore();return hits}}}for(j=axes.length;--j>=0;){subscene=axes[j];if(subscene.interative!==false&&subscene.layer==="back"){hits=this.pick(subscene,x,y,dx,dy);if(hits){g.restore();return hits}}}g.restore();if(scene.interactive!==false&&(group.fill||group.stroke)&&dx>=0&&dx<=group.width&&dy>=0&&dy<=group.height){return group}}return null}module.exports={draw:draw,pick:pick}},{"./util":798}],790:[function(require,module,exports){var util=require("./util");function draw(g,scene,bounds){if(!scene.items||!scene.items.length)return;var renderer=this,items=scene.items,o;for(var i=0,len=items.length;i<len;++i){o=items[i];if(bounds&&!bounds.intersects(o.bounds))continue;if(!(o.image&&o.image.url===o.url)){o.image=renderer.loadImage(o.url);o.image.url=o.url}var x=o.x||0,y=o.y||0,w=o.width||o.image&&o.image.width||0,h=o.height||o.image&&o.image.height||0,opac;x=x-(o.align==="center"?w/2:o.align==="right"?w:0);y=y-(o.baseline==="middle"?h/2:o.baseline==="bottom"?h:0);if(o.image.loaded){g.globalAlpha=(opac=o.opacity)!=null?opac:1;g.drawImage(o.image,x,y,w,h)}}}module.exports={draw:draw,pick:util.pick()}},{"./util":798}],791:[function(require,module,exports){module.exports={arc:require("./arc"),area:require("./area"),group:require("./group"),image:require("./image"),line:require("./line"),path:require("./path"),rect:require("./rect"),rule:require("./rule"),symbol:require("./symbol"),text:require("./text")}},{"./arc":787,"./area":788,"./group":789,"./image":790,"./line":792,"./path":793,"./rect":794,"./rule":795,"./symbol":796,"./text":797}],792:[function(require,module,exports){var util=require("./util"),parse=require("../../../path/parse"),render=require("../../../path/render"),linePath=require("../../../util/svg").path.line;function path(g,items){var o=items[0],p=o.pathCache||(o.pathCache=parse(linePath(items)));render(g,p)}function pick(g,scene,x,y,gx,gy){var items=scene.items,b=scene.bounds;if(!items||!items.length||b&&!b.contains(gx,gy)){return null}if(g.pixelratio!=null&&g.pixelratio!==1){x*=g.pixelratio;y*=g.pixelratio}return hit(g,items,x,y)?items[0]:null}var hit=util.testPath(path,false);module.exports={draw:util.drawOne(path),pick:pick,nested:true}},{"../../../path/parse":780,"../../../path/render":781,"../../../util/svg":814,"./util":798}],793:[function(require,module,exports){var util=require("./util"),parse=require("../../../path/parse"),render=require("../../../path/render");function path(g,o){if(o.path==null)return true;var p=o.pathCache||(o.pathCache=parse(o.path));render(g,p,o.x,o.y)}module.exports={draw:util.drawAll(path),pick:util.pickPath(path)}},{"../../../path/parse":780,"../../../path/render":781,"./util":798}],794:[function(require,module,exports){var util=require("./util");function draw(g,scene,bounds){if(!scene.items||!scene.items.length)return;var items=scene.items,o,opac,x,y,w,h;for(var i=0,len=items.length;i<len;++i){o=items[i];if(bounds&&!bounds.intersects(o.bounds))continue;opac=o.opacity==null?1:o.opacity;if(opac===0)continue;x=o.x||0;y=o.y||0;w=o.width||0;h=o.height||0;if(o.fill&&util.fill(g,o,opac)){g.fillRect(x,y,w,h)}if(o.stroke&&util.stroke(g,o,opac)){g.strokeRect(x,y,w,h)}}}module.exports={draw:draw,pick:util.pick()}},{"./util":798}],795:[function(require,module,exports){var util=require("./util");function draw(g,scene,bounds){if(!scene.items||!scene.items.length)return;var items=scene.items,o,opac,x1,y1,x2,y2;for(var i=0,len=items.length;i<len;++i){o=items[i];if(bounds&&!bounds.intersects(o.bounds))continue;opac=o.opacity==null?1:o.opacity;if(opac===0)continue;x1=o.x||0;y1=o.y||0;x2=o.x2!=null?o.x2:x1;y2=o.y2!=null?o.y2:y1;if(o.stroke&&util.stroke(g,o,opac)){g.beginPath();g.moveTo(x1,y1);g.lineTo(x2,y2);g.stroke()}}}function stroke(g,o){var x1=o.x||0,y1=o.y||0,x2=o.x2!=null?o.x2:x1,y2=o.y2!=null?o.y2:y1,lw=o.strokeWidth,lc=o.strokeCap;g.lineWidth=lw!=null?lw:1;g.lineCap=lc!=null?lc:"butt";g.beginPath();g.moveTo(x1,y1);g.lineTo(x2,y2)}function hit(g,o,x,y){if(!g.isPointInStroke)return false;stroke(g,o);return g.isPointInStroke(x,y)}module.exports={draw:draw,pick:util.pick(hit)}},{"./util":798}],796:[function(require,module,exports){var util=require("./util"),parse=require("../../../path/parse"),render=require("../../../path/render");var sqrt3=Math.sqrt(3),tan30=Math.tan(30*Math.PI/180);function path(g,o){var size=o.size!=null?o.size:100,x=o.x,y=o.y,r,t,rx,ry;g.beginPath();if(o.shape==null||o.shape==="circle"){r=Math.sqrt(size/Math.PI);g.arc(x,y,r,0,2*Math.PI,0);g.closePath();return}switch(o.shape){case"cross":r=Math.sqrt(size/5)/2;t=3*r;g.moveTo(x-t,y-r);g.lineTo(x-r,y-r);g.lineTo(x-r,y-t);g.lineTo(x+r,y-t);g.lineTo(x+r,y-r);g.lineTo(x+t,y-r);g.lineTo(x+t,y+r);g.lineTo(x+r,y+r);g.lineTo(x+r,y+t);g.lineTo(x-r,y+t);g.lineTo(x-r,y+r);g.lineTo(x-t,y+r);break;case"diamond":ry=Math.sqrt(size/(2*tan30));rx=ry*tan30;g.moveTo(x,y-ry);g.lineTo(x+rx,y);g.lineTo(x,y+ry);g.lineTo(x-rx,y);break;case"square":t=Math.sqrt(size);r=t/2;g.rect(x-r,y-r,t,t);break;case"triangle-down":rx=Math.sqrt(size/sqrt3);ry=rx*sqrt3/2;g.moveTo(x,y+ry);g.lineTo(x+rx,y-ry);g.lineTo(x-rx,y-ry);break;case"triangle-up":rx=Math.sqrt(size/sqrt3);ry=rx*sqrt3/2;g.moveTo(x,y-ry);g.lineTo(x+rx,y+ry);g.lineTo(x-rx,y+ry);break;default:var pathArray=resize(parse(o.shape),size);render(g,pathArray,x,y)}g.closePath()}function resize(path,size){var sz=Math.sqrt(size),i,n,j,m,curr;for(i=0,n=path.length;i<n;++i){for(curr=path[i],j=1,m=curr.length;j<m;++j){curr[j]*=sz}}return path}module.exports={draw:util.drawAll(path),pick:util.pickPath(path)}},{"../../../path/parse":780,"../../../path/render":781,"./util":798}],797:[function(require,module,exports){var Bounds=require("../../../util/Bounds"),textBounds=require("../../../util/bound").text,text=require("../../../util/text"),util=require("./util"),tempBounds=new Bounds;function draw(g,scene,bounds){if(!scene.items||!scene.items.length)return;var items=scene.items,o,opac,x,y,r,t,str;for(var i=0,len=items.length;i<len;++i){o=items[i];if(bounds&&!bounds.intersects(o.bounds))continue;str=text.value(o.text);if(!str)continue;opac=o.opacity==null?1:o.opacity;if(opac===0)continue;g.font=text.font(o);g.textAlign=o.align||"left";x=o.x||0;y=o.y||0;if(r=o.radius){t=(o.theta||0)-Math.PI/2;x+=r*Math.cos(t);y+=r*Math.sin(t)}if(o.angle){g.save();g.translate(x,y);g.rotate(o.angle*Math.PI/180);x=y=0}x+=o.dx||0;y+=(o.dy||0)+text.offset(o);if(o.fill&&util.fill(g,o,opac)){g.fillText(str,x,y)}if(o.stroke&&util.stroke(g,o,opac)){g.strokeText(str,x,y)}if(o.angle)g.restore()}}function hit(g,o,x,y,gx,gy){if(o.fontSize<=0)return false;if(!o.angle)return true;var b=textBounds(o,tempBounds,true),a=-o.angle*Math.PI/180,cos=Math.cos(a),sin=Math.sin(a),ox=o.x,oy=o.y,px=cos*gx-sin*gy+(ox-ox*cos+oy*sin),py=sin*gx+cos*gy+(oy-ox*sin-oy*cos);return b.contains(px,py)}module.exports={draw:draw,pick:util.pick(hit)}},{"../../../util/Bounds":805,"../../../util/bound":810,"../../../util/text":815,"./util":798}],798:[function(require,module,exports){function drawPathOne(path,g,o,items){if(path(g,items))return;var opac=o.opacity==null?1:o.opacity;if(opac===0)return;if(o.fill&&fill(g,o,opac)){g.fill()}if(o.stroke&&stroke(g,o,opac)){g.stroke()}}function drawPathAll(path,g,scene,bounds){var i,len,item;for(i=0,len=scene.items.length;i<len;++i){item=scene.items[i];if(!bounds||bounds.intersects(item.bounds)){drawPathOne(path,g,item,item)}}}function drawAll(pathFunc){return function(g,scene,bounds){drawPathAll(pathFunc,g,scene,bounds)}}function drawOne(pathFunc){return function(g,scene,bounds){if(!scene.items.length)return;if(!bounds||bounds.intersects(scene.bounds)){drawPathOne(pathFunc,g,scene.items[0],scene.items)}}}var trueFunc=function(){return true};function pick(test){if(!test)test=trueFunc;return function(g,scene,x,y,gx,gy){if(!scene.items.length)return null;var o,b,i;if(g.pixelratio!=null&&g.pixelratio!==1){x*=g.pixelratio;y*=g.pixelratio}for(i=scene.items.length;--i>=0;){o=scene.items[i];b=o.bounds;if(b&&!b.contains(gx,gy)||!b)continue;if(test(g,o,x,y,gx,gy))return o}return null}}function testPath(path,filled){return function(g,o,x,y){var item=Array.isArray(o)?o[0]:o,fill=filled==null?item.fill:filled,stroke=item.stroke&&g.isPointInStroke,lw,lc;if(stroke){lw=item.strokeWidth;lc=item.strokeCap;g.lineWidth=lw!=null?lw:1;g.lineCap=lc!=null?lc:"butt"}return path(g,o)?false:fill&&g.isPointInPath(x,y)||stroke&&g.isPointInStroke(x,y)}}function pickPath(path){return pick(testPath(path))}function fill(g,o,opacity){opacity*=o.fillOpacity==null?1:o.fillOpacity;if(opacity>0){g.globalAlpha=opacity;g.fillStyle=color(g,o,o.fill);return true}else{return false}}function stroke(g,o,opacity){var lw=(lw=o.strokeWidth)!=null?lw:1,lc;if(lw<=0)return false;opacity*=o.strokeOpacity==null?1:o.strokeOpacity;if(opacity>0){g.globalAlpha=opacity;g.strokeStyle=color(g,o,o.stroke);g.lineWidth=lw;g.lineCap=(lc=o.strokeCap)!=null?lc:"butt";g.vgLineDash(o.strokeDash||null);g.vgLineDashOffset(o.strokeDashOffset||0);return true}else{return false}}function color(g,o,value){return value.id?gradient(g,value,o.bounds):value}function gradient(g,p,b){var w=b.width(),h=b.height(),x1=b.x1+p.x1*w,y1=b.y1+p.y1*h,x2=b.x1+p.x2*w,y2=b.y1+p.y2*h,grad=g.createLinearGradient(x1,y1,x2,y2),stop=p.stops,i,n;for(i=0,n=stop.length;i<n;++i){grad.addColorStop(stop[i].offset,stop[i].color)}return grad}module.exports={drawOne:drawOne,drawAll:drawAll,pick:pick,pickPath:pickPath,testPath:testPath,stroke:stroke,fill:fill,color:color,gradient:gradient}},{}],799:[function(require,module,exports){module.exports={canvas:require("./canvas"),svg:require("./svg")}},{"./canvas":786,"./svg":803}],800:[function(require,module,exports){var DOM=require("../../util/dom"),Handler=require("../Handler");function SVGHandler(){Handler.call(this)}var base=Handler.prototype;var prototype=SVGHandler.prototype=Object.create(base);prototype.constructor=SVGHandler;prototype.initialize=function(el,pad,obj){this._svg=DOM.find(el,"svg");return base.initialize.call(this,el,pad,obj)};prototype.svg=function(){return this._svg};prototype.listener=function(handler){var that=this;return function(evt){var target=evt.target,item=target.__data__;evt.vegaType=evt.type;item=Array.isArray(item)?item[0]:item;handler.call(that._obj,evt,item)}};prototype.on=function(type,handler){var name=this.eventName(type),svg=this._svg,h=this._handlers,x={type:type,handler:handler,listener:this.listener(handler)};(h[name]||(h[name]=[])).push(x);svg.addEventListener(name,x.listener);return this};prototype.off=function(type,handler){var name=this.eventName(type),svg=this._svg,h=this._handlers[name],i;if(!h)return;for(i=h.length;--i>=0;){if(h[i].type===type&&!handler||h[i].handler===handler){svg.removeEventListener(name,h[i].listener);h.splice(i,1)}}return this};module.exports=SVGHandler},{"../../util/dom":812,"../Handler":782}],801:[function(require,module,exports){var ImageLoader=require("../../util/ImageLoader"),Renderer=require("../Renderer"),text=require("../../util/text"),DOM=require("../../util/dom"),SVG=require("../../util/svg"),ns=SVG.metadata.xmlns,marks=require("./marks");function SVGRenderer(loadConfig){Renderer.call(this);this._loader=new ImageLoader(loadConfig);this._dirtyID=0}var base=Renderer.prototype;var prototype=SVGRenderer.prototype=Object.create(base);prototype.constructor=SVGRenderer;prototype.initialize=function(el,width,height,padding){if(el){this._svg=DOM.child(el,0,"svg",ns,"marks");DOM.clear(el,1);this._root=DOM.child(this._svg,0,"g",ns);DOM.clear(this._svg,1)}this._defs={clip_id:1,gradient:{},clipping:{}};this.background(this._bgcolor);return base.initialize.call(this,el,width,height,padding)};prototype.background=function(bgcolor){if(arguments.length&&this._svg){this._svg.style.setProperty("background-color",bgcolor)}return base.background.apply(this,arguments)};prototype.resize=function(width,height,padding){base.resize.call(this,width,height,padding);if(this._svg){var w=this._width,h=this._height,p=this._padding;this._svg.setAttribute("width",w+p.left+p.right);this._svg.setAttribute("height",h+p.top+p.bottom);this._root.setAttribute("transform","translate("+p.left+","+p.top+")")}return this};prototype.svg=function(){if(!this._svg)return null;var attr={class:"marks",width:this._width+this._padding.left+this._padding.right,height:this._height+this._padding.top+this._padding.bottom};for(var key in SVG.metadata){attr[key]=SVG.metadata[key]}return DOM.openTag("svg",attr)+this._svg.innerHTML+DOM.closeTag("svg")};prototype.imageURL=function(url){return this._loader.imageURL(url)};prototype.render=function(scene,items){if(this._dirtyCheck(items)){if(this._dirtyAll)this._resetDefs();this.draw(this._root,scene,-1);DOM.clear(this._root,1)}this.updateDefs();return this};prototype.draw=function(el,scene,index){this.drawMark(el,scene,index,marks[scene.marktype])};prototype.updateDefs=function(){var svg=this._svg,defs=this._defs,el=defs.el,index=0,id;for(id in defs.gradient){if(!el)el=defs.el=DOM.child(svg,0,"defs",ns);updateGradient(el,defs.gradient[id],index++)}for(id in defs.clipping){if(!el)el=defs.el=DOM.child(svg,0,"defs",ns);updateClipping(el,defs.clipping[id],index++)}if(el){if(index===0){svg.removeChild(el);defs.el=null}else{DOM.clear(el,index)}}};function updateGradient(el,grad,index){var i,n,stop;el=DOM.child(el,index,"linearGradient",ns);el.setAttribute("id",grad.id);el.setAttribute("x1",grad.x1);el.setAttribute("x2",grad.x2);el.setAttribute("y1",grad.y1);el.setAttribute("y2",grad.y2);for(i=0,n=grad.stops.length;i<n;++i){stop=DOM.child(el,i,"stop",ns);stop.setAttribute("offset",grad.stops[i].offset);stop.setAttribute("stop-color",grad.stops[i].color)}DOM.clear(el,i)}function updateClipping(el,clip,index){var rect;el=DOM.child(el,index,"clipPath",ns);el.setAttribute("id",clip.id);rect=DOM.child(el,0,"rect",ns);rect.setAttribute("x",0);rect.setAttribute("y",0);rect.setAttribute("width",clip.width);rect.setAttribute("height",clip.height)}prototype._resetDefs=function(){var def=this._defs;def.clip_id=1;def.gradient={};def.clipping={}};prototype.isDirty=function(item){return this._dirtyAll||item.dirty===this._dirtyID};prototype._dirtyCheck=function(items){this._dirtyAll=true;if(!items)return true;var id=++this._dirtyID,item,mark,type,mdef,i,n,o;for(i=0,n=items.length;i<n;++i){item=items[i];mark=item.mark;if(mark.marktype!==type){type=mark.marktype;mdef=marks[type]}if(item.status==="exit"){if(item._svg){if(mdef.nest&&item.mark.items.length){this._update(mdef,item._svg,item.mark.items[0]);o=item.mark.items[0];o._svg=item._svg;o._update=id}else{DOM.remove(item._svg)}item._svg=null}continue}item=mdef.nest?mark.items[0]:item;if(item._update===id){continue}else if(item._svg){this._update(mdef,item._svg,item)}else{this._dirtyAll=false;dirtyParents(item,id)}item._update=id}return!this._dirtyAll};function dirtyParents(item,id){for(;item&&item.dirty!==id;item=item.mark.group){item.dirty=id;if(item.mark&&item.mark.dirty!==id){item.mark.dirty=id}else return}}prototype.drawMark=function(el,scene,index,mdef){if(!this.isDirty(scene))return;var items=mdef.nest?scene.items&&scene.items.length?[scene.items[0]]:[]:scene.items||[],events=scene.interactive===false?"none":null,isGroup=mdef.tag==="g",className=DOM.cssClass(scene),p,i,n,c,d,insert;p=DOM.child(el,index+1,"g",ns,className);p.setAttribute("class",className);scene._svg=p;if(!isGroup&&events){p.style.setProperty("pointer-events",events)}for(i=0,n=items.length;i<n;++i){if(this.isDirty(d=items[i])){insert=!(this._dirtyAll||d._svg);c=bind(p,mdef,d,i,insert);this._update(mdef,c,d);if(isGroup){if(insert)this._dirtyAll=true;this._recurse(c,d);if(insert)this._dirtyAll=false}}}DOM.clear(p,i);return p};prototype._recurse=function(el,group){var items=group.items||[],legends=group.legendItems||[],axes=group.axisItems||[],idx=0,j,m;for(j=0,m=axes.length;j<m;++j){if(axes[j].layer==="back"){this.drawMark(el,axes[j],idx++,marks.group)}}for(j=0,m=items.length;j<m;++j){this.draw(el,items[j],idx++)}for(j=0,m=axes.length;j<m;++j){if(axes[j].layer!=="back"){this.drawMark(el,axes[j],idx++,marks.group)}}for(j=0,m=legends.length;j<m;++j){this.drawMark(el,legends[j],idx++,marks.group)}DOM.clear(el,1+idx)};function bind(el,mdef,item,index,insert){var node=DOM.child(el,index,mdef.tag,ns,null,insert);node.__data__=item;node.__values__={fill:"default"};if(mdef.tag==="g"){var bg=DOM.child(node,0,"rect",ns,"background");bg.__data__=item}return item._svg=node}var element=null,values=null;var mark_extras={group:function(mdef,el,item){element=el.childNodes[0];values=el.__values__;mdef.background(emit,item,this);var value=item.mark.interactive===false?"none":null;if(value!==values.events){element.style.setProperty("pointer-events",value);values.events=value}},text:function(mdef,el,item){var str=text.value(item.text);if(str!==values.text){el.textContent=str;values.text=str}str=text.font(item);if(str!==values.font){el.style.setProperty("font",str);values.font=str}}};prototype._update=function(mdef,el,item){element=el;values=el.__values__;mdef.attr(emit,item,this);var extra=mark_extras[mdef.type];if(extra)extra(mdef,el,item);this.style(element,item)};function emit(name,value,ns){if(value===values[name])return;if(value!=null){if(ns){element.setAttributeNS(ns,name,value)}else{element.setAttribute(name,value)}}else{if(ns){element.removeAttributeNS(ns,name)}else{element.removeAttribute(name)}}values[name]=value}prototype.style=function(el,o){if(o==null)return;var i,n,prop,name,value;for(i=0,n=SVG.styleProperties.length;i<n;++i){prop=SVG.styleProperties[i];value=o[prop];if(value===values[prop])continue;name=SVG.styles[prop];if(value==null){if(name==="fill"){el.style.setProperty(name,"none")}else{el.style.removeProperty(name)}}else{if(value.id){this._defs.gradient[value.id]=value;value="url("+href()+"#"+value.id+")"}el.style.setProperty(name,value+"")}values[prop]=value}};function href(){return typeof window!=="undefined"?window.location.href:""}module.exports=SVGRenderer},{"../../util/ImageLoader":808,"../../util/dom":812,"../../util/svg":814,"../../util/text":815,"../Renderer":783,"./marks":804}],802:[function(require,module,exports){var Renderer=require("../Renderer"),ImageLoader=require("../../util/ImageLoader"),SVG=require("../../util/svg"),text=require("../../util/text"),DOM=require("../../util/dom"),openTag=DOM.openTag,closeTag=DOM.closeTag,MARKS=require("./marks");function SVGStringRenderer(loadConfig){Renderer.call(this);this._loader=new ImageLoader(loadConfig);this._text={head:"",root:"",foot:"",defs:"",body:""};this._defs={clip_id:1,gradient:{},clipping:{}}}var base=Renderer.prototype;var prototype=SVGStringRenderer.prototype=Object.create(base);prototype.constructor=SVGStringRenderer;prototype.resize=function(width,height,padding){base.resize.call(this,width,height,padding);var p=this._padding,t=this._text;var attr={class:"marks",width:this._width+p.left+p.right,height:this._height+p.top+p.bottom};for(var key in SVG.metadata){attr[key]=SVG.metadata[key]}t.head=openTag("svg",attr);t.root=openTag("g",{transform:"translate("+p.left+","+p.top+")"});t.foot=closeTag("g")+closeTag("svg");return this};prototype.svg=function(){var t=this._text;return t.head+t.defs+t.root+t.body+t.foot};prototype.render=function(scene){this._text.body=this.mark(scene);this._text.defs=this.buildDefs();return this};prototype.reset=function(){this._defs.clip_id=0;return this};prototype.buildDefs=function(){var all=this._defs,defs="",i,id,def,stops;for(id in all.gradient){def=all.gradient[id];stops=def.stops;defs+=openTag("linearGradient",{id:id,x1:def.x1,x2:def.x2,y1:def.y1,y2:def.y2});for(i=0;i<stops.length;++i){defs+=openTag("stop",{offset:stops[i].offset,"stop-color":stops[i].color})+closeTag("stop")}defs+=closeTag("linearGradient")}for(id in all.clipping){def=all.clipping[id];defs+=openTag("clipPath",{id:id});defs+=openTag("rect",{x:0,y:0,width:def.width,height:def.height})+closeTag("rect");defs+=closeTag("clipPath")}return defs.length>0?openTag("defs")+defs+closeTag("defs"):""};prototype.imageURL=function(url){return this._loader.imageURL(url)};var object;function emit(name,value,ns,prefixed){object[prefixed||name]=value}prototype.attributes=function(attr,item){object={};attr(emit,item,this);return object};prototype.mark=function(scene){var mdef=MARKS[scene.marktype],tag=mdef.tag,attr=mdef.attr,nest=mdef.nest||false,data=nest?scene.items&&scene.items.length?[scene.items[0]]:[]:scene.items||[],defs=this._defs,str="",style,i,item;if(tag!=="g"&&scene.interactive===false){style='style="pointer-events: none;"'}str+=openTag("g",{class:DOM.cssClass(scene)},style);for(i=0;i<data.length;++i){item=data[i];style=tag!=="g"?styles(item,scene,tag,defs):null;str+=openTag(tag,this.attributes(attr,item),style);if(tag==="text"){str+=escape_text(text.value(item.text))}else if(tag==="g"){str+=openTag("rect",this.attributes(mdef.background,item),styles(item,scene,"bgrect",defs))+closeTag("rect");str+=this.markGroup(item)}str+=closeTag(tag)}return str+closeTag("g")};prototype.markGroup=function(scene){var str="",axes=scene.axisItems||[],items=scene.items||[],legends=scene.legendItems||[],j,m;for(j=0,m=axes.length;j<m;++j){if(axes[j].layer==="back"){str+=this.mark(axes[j])}}for(j=0,m=items.length;j<m;++j){str+=this.mark(items[j])}for(j=0,m=axes.length;j<m;++j){if(axes[j].layer!=="back"){str+=this.mark(axes[j])}}for(j=0,m=legends.length;j<m;++j){str+=this.mark(legends[j])}return str};function styles(o,mark,tag,defs){if(o==null)return"";var i,n,prop,name,value,s="";if(tag==="bgrect"&&mark.interactive===false){s+="pointer-events: none;"}if(tag==="text"){s+="font: "+text.font(o)+";"}for(i=0,n=SVG.styleProperties.length;i<n;++i){prop=SVG.styleProperties[i];name=SVG.styles[prop];value=o[prop];if(value==null){if(name==="fill"){s+=(s.length?" ":"")+"fill: none;"}}else{if(value.id){defs.gradient[value.id]=value;value="url(#"+value.id+")"}s+=(s.length?" ":"")+name+": "+value+";"}}return s?'style="'+s+'"':null}function escape_text(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}module.exports=SVGStringRenderer},{"../../util/ImageLoader":808,"../../util/dom":812,"../../util/svg":814,"../../util/text":815,"../Renderer":783,"./marks":804}],803:[function(require,module,exports){module.exports={Handler:require("./SVGHandler"),Renderer:require("./SVGRenderer"),string:{Renderer:require("./SVGStringRenderer")}}},{"./SVGHandler":800,"./SVGRenderer":801,"./SVGStringRenderer":802}],804:[function(require,module,exports){var text=require("../../util/text"),SVG=require("../../util/svg"),symbolTypes=SVG.symbolTypes,textAlign=SVG.textAlign,path=SVG.path;function translateItem(o){return translate(o.x||0,o.y||0)}function translate(x,y){return"translate("+x+","+y+")"}module.exports={arc:{tag:"path",type:"arc",attr:function(emit,o){emit("transform",translateItem(o));emit("d",path.arc(o))}},area:{tag:"path",type:"area",nest:true,attr:function(emit,o){var items=o.mark.items;if(items.length)emit("d",path.area(items))}},group:{tag:"g",type:"group",attr:function(emit,o,renderer){var id=null,defs,c;emit("transform",translateItem(o));if(o.clip){defs=renderer._defs;id=o.clip_id||(o.clip_id="clip"+defs.clip_id++);c=defs.clipping[id]||(defs.clipping[id]={id:id});c.width=o.width||0;c.height=o.height||0}emit("clip-path",id?"url(#"+id+")":null)},background:function(emit,o){emit("class","background");emit("width",o.width||0);emit("height",o.height||0)}},image:{tag:"image",type:"image",attr:function(emit,o,renderer){var x=o.x||0,y=o.y||0,w=o.width||0,h=o.height||0,url=renderer.imageURL(o.url);x=x-(o.align==="center"?w/2:o.align==="right"?w:0);y=y-(o.baseline==="middle"?h/2:o.baseline==="bottom"?h:0);emit("href",url,"http://www.w3.org/1999/xlink","xlink:href");emit("transform",translate(x,y));emit("width",w);emit("height",h)}},line:{tag:"path",type:"line",nest:true,attr:function(emit,o){var items=o.mark.items;if(items.length)emit("d",path.line(items))}},path:{tag:"path",type:"path",attr:function(emit,o){emit("transform",translateItem(o));emit("d",o.path)}},rect:{tag:"rect",type:"rect",nest:false,attr:function(emit,o){emit("transform",translateItem(o));emit("width",o.width||0);emit("height",o.height||0)}},rule:{tag:"line",type:"rule",attr:function(emit,o){emit("transform",translateItem(o));emit("x2",o.x2!=null?o.x2-(o.x||0):0);emit("y2",o.y2!=null?o.y2-(o.y||0):0)}},symbol:{tag:"path",type:"symbol",attr:function(emit,o){var pathStr=!o.shape||symbolTypes[o.shape]?path.symbol(o):path.resize(o.shape,o.size);emit("transform",translateItem(o));emit("d",pathStr)}},text:{tag:"text",type:"text",nest:false,attr:function(emit,o){var dx=o.dx||0,dy=(o.dy||0)+text.offset(o),x=o.x||0,y=o.y||0,a=o.angle||0,r=o.radius||0,t;if(r){t=(o.theta||0)-Math.PI/2;x+=r*Math.cos(t);y+=r*Math.sin(t)}emit("text-anchor",textAlign[o.align]||"start");if(a){t=translate(x,y)+" rotate("+a+")";if(dx||dy)t+=" "+translate(dx,dy)}else{t=translate(x+dx,y+dy)}emit("transform",t)}}}},{"../../util/svg":814,"../../util/text":815}],805:[function(require,module,exports){function Bounds(b){this.clear();if(b)this.union(b)}var prototype=Bounds.prototype;prototype.clone=function(){return new Bounds(this)};prototype.clear=function(){this.x1=+Number.MAX_VALUE;this.y1=+Number.MAX_VALUE;this.x2=-Number.MAX_VALUE;this.y2=-Number.MAX_VALUE;return this};prototype.set=function(x1,y1,x2,y2){this.x1=x1;this.y1=y1;this.x2=x2;this.y2=y2;return this};prototype.add=function(x,y){if(x<this.x1)this.x1=x;if(y<this.y1)this.y1=y;if(x>this.x2)this.x2=x;if(y>this.y2)this.y2=y;return this};prototype.expand=function(d){this.x1-=d;this.y1-=d;this.x2+=d;this.y2+=d;return this};prototype.round=function(){this.x1=Math.floor(this.x1);this.y1=Math.floor(this.y1);this.x2=Math.ceil(this.x2);this.y2=Math.ceil(this.y2);return this};prototype.translate=function(dx,dy){this.x1+=dx;this.x2+=dx;this.y1+=dy;this.y2+=dy;return this};prototype.rotate=function(angle,x,y){var cos=Math.cos(angle),sin=Math.sin(angle),cx=x-x*cos+y*sin,cy=y-x*sin-y*cos,x1=this.x1,x2=this.x2,y1=this.y1,y2=this.y2;return this.clear().add(cos*x1-sin*y1+cx,sin*x1+cos*y1+cy).add(cos*x1-sin*y2+cx,sin*x1+cos*y2+cy).add(cos*x2-sin*y1+cx,sin*x2+cos*y1+cy).add(cos*x2-sin*y2+cx,sin*x2+cos*y2+cy)};prototype.union=function(b){if(b.x1<this.x1)this.x1=b.x1;if(b.y1<this.y1)this.y1=b.y1;if(b.x2>this.x2)this.x2=b.x2;if(b.y2>this.y2)this.y2=b.y2;return this};prototype.encloses=function(b){return b&&(this.x1<=b.x1&&this.x2>=b.x2&&this.y1<=b.y1&&this.y2>=b.y2)};prototype.alignsWith=function(b){return b&&(this.x1==b.x1||this.x2==b.x2||this.y1==b.y1||this.y2==b.y2)};prototype.intersects=function(b){return b&&!(this.x2<b.x1||this.x1>b.x2||this.y2<b.y1||this.y1>b.y2)};prototype.contains=function(x,y){return!(x<this.x1||x>this.x2||y<this.y1||y>this.y2)};prototype.width=function(){return this.x2-this.x1};prototype.height=function(){return this.y2-this.y1};module.exports=Bounds},{}],806:[function(require,module,exports){module.exports=function(b){function noop(){}function add(x,y){b.add(x,y)}return{bounds:function(_){if(!arguments.length)return b;return b=_,this},beginPath:noop,closePath:noop,moveTo:add,lineTo:add,quadraticCurveTo:function(x1,y1,x2,y2){b.add(x1,y1);b.add(x2,y2)},bezierCurveTo:function(x1,y1,x2,y2,x3,y3){b.add(x1,y1);b.add(x2,y2);b.add(x3,y3)}}}},{}],807:[function(require,module,exports){var gradient_id=0;function Gradient(type){this.id="gradient_"+gradient_id++;this.type=type||"linear";this.stops=[];this.x1=0;this.x2=1;this.y1=0;this.y2=0}var prototype=Gradient.prototype;prototype.stop=function(offset,color){this.stops.push({offset:offset,color:color});return this};module.exports=Gradient},{}],808:[function(require,module,exports){(function(global){(function(){var load=require("datalib/src/import/load");function ImageLoader(loadConfig){this._pending=0;this._config=loadConfig||ImageLoader.Config}ImageLoader.Config=null;var prototype=ImageLoader.prototype;prototype.pending=function(){return this._pending};prototype.params=function(uri){var p={url:uri},k;for(k in this._config){p[k]=this._config[k]}return p};prototype.imageURL=function(uri){return load.sanitizeUrl(this.params(uri))};function browser(uri,callback){var url=load.sanitizeUrl(this.params(uri));if(!url){if(callback)callback(uri,null);return null}var loader=this,image=new Image;loader._pending+=1;image.onload=function(){loader._pending-=1;image.loaded=true;if(callback)callback(null,image)};image.src=url;return image}function server(uri,callback){var loader=this,image=new(typeof window!=="undefined"?window["canvas"]:typeof global!=="undefined"?global["canvas"]:null).Image;loader._pending+=1;load(this.params(uri),function(err,data){loader._pending-=1;if(err){if(callback)callback(err,null);return null}image.src=data;image.loaded=true;if(callback)callback(null,image)});return image}prototype.loadImage=function(uri,callback){return load.useXHR?browser.call(this,uri,callback):server.call(this,uri,callback)};module.exports=ImageLoader}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"datalib/src/import/load":402}],809:[function(require,module,exports){function Item(mark){this.mark=mark}var prototype=Item.prototype;prototype.hasPropertySet=function(name){var props=this.mark.def.properties;return props&&props[name]!=null};prototype.cousin=function(offset,index){if(offset===0)return this;offset=offset||-1;var mark=this.mark,group=mark.group,iidx=index==null?mark.items.indexOf(this):index,midx=group.items.indexOf(mark)+offset;return group.items[midx].items[iidx]};prototype.sibling=function(offset){if(offset===0)return this;offset=offset||-1;var mark=this.mark,iidx=mark.items.indexOf(this)+offset;return mark.items[iidx]};prototype.remove=function(){var item=this,list=item.mark.items,i=list.indexOf(item);if(i>=0){if(i===list.length-1){list.pop()}else{list.splice(i,1)}}return item};prototype.touch=function(){if(this.pathCache)this.pathCache=null};module.exports=Item},{}],810:[function(require,module,exports){var BoundsContext=require("./BoundsContext"),Bounds=require("./Bounds"),canvas=require("./canvas"),svg=require("./svg"),text=require("./text"),paths=require("../path"),parse=paths.parse,drawPath=paths.render,areaPath=svg.path.area,linePath=svg.path.line,halfpi=Math.PI/2,sqrt3=Math.sqrt(3),tan30=Math.tan(30*Math.PI/180),g2D=null,bc=BoundsContext();function context(){return g2D||(g2D=canvas.instance(1,1).getContext("2d"))}function strokeBounds(o,bounds){if(o.stroke&&o.opacity!==0&&o.stokeOpacity!==0){bounds.expand(o.strokeWidth!=null?o.strokeWidth:1)}return bounds}function pathBounds(o,path,bounds,x,y){if(path==null){bounds.set(0,0,0,0)}else{drawPath(bc.bounds(bounds),path,x,y);strokeBounds(o,bounds)}return bounds}function path(o,bounds){var p=o.path?o.pathCache||(o.pathCache=parse(o.path)):null;return pathBounds(o,p,bounds,o.x,o.y)}function area(mark,bounds){if(mark.items.length===0)return bounds;var items=mark.items,item=items[0],p=item.pathCache||(item.pathCache=parse(areaPath(items)));return pathBounds(item,p,bounds)}function line(mark,bounds){if(mark.items.length===0)return bounds;var items=mark.items,item=items[0],p=item.pathCache||(item.pathCache=parse(linePath(items)));return pathBounds(item,p,bounds)}function rect(o,bounds){var x,y;return strokeBounds(o,bounds.set(x=o.x||0,y=o.y||0,x+o.width||0,y+o.height||0))}function image(o,bounds){var x=o.x||0,y=o.y||0,w=o.width||0,h=o.height||0;x=x-(o.align==="center"?w/2:o.align==="right"?w:0);y=y-(o.baseline==="middle"?h/2:o.baseline==="bottom"?h:0);return bounds.set(x,y,x+w,y+h)}function rule(o,bounds){var x1,y1;return strokeBounds(o,bounds.set(x1=o.x||0,y1=o.y||0,o.x2!=null?o.x2:x1,o.y2!=null?o.y2:y1))}function arc(o,bounds){var cx=o.x||0,cy=o.y||0,ir=o.innerRadius||0,or=o.outerRadius||0,sa=(o.startAngle||0)-halfpi,ea=(o.endAngle||0)-halfpi,xmin=Infinity,xmax=-Infinity,ymin=Infinity,ymax=-Infinity,a,i,n,x,y,ix,iy,ox,oy;var angles=[sa,ea],s=sa-sa%halfpi;for(i=0;i<4&&s<ea;++i,s+=halfpi){angles.push(s)}for(i=0,n=angles.length;i<n;++i){a=angles[i];x=Math.cos(a);ix=ir*x;ox=or*x;y=Math.sin(a);iy=ir*y;oy=or*y;xmin=Math.min(xmin,ix,ox);xmax=Math.max(xmax,ix,ox);ymin=Math.min(ymin,iy,oy);ymax=Math.max(ymax,iy,oy)}return strokeBounds(o,bounds.set(cx+xmin,cy+ymin,cx+xmax,cy+ymax))}function symbol(o,bounds){var size=o.size!=null?o.size:100,x=o.x||0,y=o.y||0,r,t,rx,ry;switch(o.shape){case"cross":t=3*Math.sqrt(size/5)/2;bounds.set(x-t,y-t,x+t,y+t);break;case"diamond":ry=Math.sqrt(size/(2*tan30));rx=ry*tan30;bounds.set(x-rx,y-ry,x+rx,y+ry);break;case"square":t=Math.sqrt(size);r=t/2;bounds.set(x-r,y-r,x+r,y+r);break;case"triangle-down":rx=Math.sqrt(size/sqrt3);ry=rx*sqrt3/2;bounds.set(x-rx,y-ry,x+rx,y+ry);break;case"triangle-up":rx=Math.sqrt(size/sqrt3);ry=rx*sqrt3/2;bounds.set(x-rx,y-ry,x+rx,y+ry);break;default:r=Math.sqrt(size/Math.PI);bounds.set(x-r,y-r,x+r,y+r)}return strokeBounds(o,bounds)}function textMark(o,bounds,noRotate){var g=context(),h=text.size(o),a=o.align,r=o.radius||0,x=o.x||0,y=o.y||0,dx=o.dx||0,dy=(o.dy||0)+text.offset(o)-Math.round(.8*h),w,t;if(r){t=(o.theta||0)-Math.PI/2;x+=r*Math.cos(t);y+=r*Math.sin(t)}g.font=text.font(o);w=g.measureText(text.value(o.text)).width;if(a==="center"){dx-=w/2}else if(a==="right"){dx-=w}else{}bounds.set(dx+=x,dy+=y,dx+w,dy+h);if(o.angle&&!noRotate){bounds.rotate(o.angle*Math.PI/180,x,y)}return bounds.expand(noRotate?0:1)}function group(g,bounds,includeLegends){var axes=g.axisItems||[],items=g.items||[],legends=g.legendItems||[],j,m;if(!g.clip){for(j=0,m=axes.length;j<m;++j){bounds.union(axes[j].bounds)}for(j=0,m=items.length;j<m;++j){if(items[j].bounds)bounds.union(items[j].bounds)}if(includeLegends){for(j=0,m=legends.length;j<m;++j){bounds.union(legends[j].bounds)}}}if(g.clip||g.width||g.height){strokeBounds(g,bounds.add(0,0).add(g.width||0,g.height||0))}return bounds.translate(g.x||0,g.y||0)}var methods={group:group,symbol:symbol,image:image,rect:rect,rule:rule,arc:arc,text:textMark,path:path,area:area,line:line};methods.area.nest=true;methods.line.nest=true;function itemBounds(item,func,opt){var type=item.mark.marktype;func=func||methods[type];if(func.nest)item=item.mark;var curr=item.bounds,prev=item["bounds:prev"]||(item["bounds:prev"]=new Bounds);if(curr){prev.clear().union(curr);curr.clear()}else{item.bounds=new Bounds}func(item,item.bounds,opt);if(!curr)prev.clear().union(item.bounds);return item.bounds}var DUMMY_ITEM={mark:null};function markBounds(mark,bounds,opt){var type=mark.marktype,func=methods[type],items=mark.items,hasi=items&&items.length,i,n,o,b;if(func.nest){o=hasi?items[0]:(DUMMY_ITEM.mark=mark,DUMMY_ITEM);b=itemBounds(o,func,opt);bounds=bounds&&bounds.union(b)||b;return bounds}bounds=bounds||mark.bounds&&mark.bounds.clear()||new Bounds;if(hasi){for(i=0,n=items.length;i<n;++i){bounds.union(itemBounds(items[i],func,opt))}}return mark.bounds=bounds}module.exports={mark:markBounds,item:itemBounds,text:textMark,group:group}},{"../path":779,"./Bounds":805,"./BoundsContext":806,"./canvas":811,"./svg":814,"./text":815}],811:[function(require,module,exports){(function(global){(function(){function instance(w,h){w=w||1;h=h||1;var canvas;if(typeof document!=="undefined"&&document.createElement){canvas=document.createElement("canvas");canvas.width=w;canvas.height=h}else{var Canvas=typeof window!=="undefined"?window["canvas"]:typeof global!=="undefined"?global["canvas"]:null;if(!Canvas.prototype)return null;canvas=new Canvas(w,h)}return lineDash(canvas)}function resize(canvas,w,h,p,retina){var g=this._ctx=canvas.getContext("2d"),s=1;canvas.width=w+p.left+p.right;canvas.height=h+p.top+p.bottom;if(retina&&typeof HTMLElement!=="undefined"&&canvas instanceof HTMLElement){g.pixelratio=s=pixelRatio(canvas)||1}g.setTransform(s,0,0,s,s*p.left,s*p.top);return canvas}function pixelRatio(canvas){var g=canvas.getContext("2d");var devicePixelRatio=window&&window.devicePixelRatio||1,backingStoreRatio=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1,ratio=devicePixelRatio/backingStoreRatio;if(devicePixelRatio!==backingStoreRatio){var w=canvas.width,h=canvas.height;canvas.width=w*ratio;canvas.height=h*ratio;canvas.style.width=w+"px";canvas.style.height=h+"px"}return ratio}function lineDash(canvas){var g=canvas.getContext("2d");if(g.vgLineDash)return;var NOOP=function(){},NODASH=[];if(g.setLineDash){g.vgLineDash=function(dash){this.setLineDash(dash||NODASH)};g.vgLineDashOffset=function(off){this.lineDashOffset=off}}else if(g.webkitLineDash!==undefined){g.vgLineDash=function(dash){this.webkitLineDash=dash||NODASH};g.vgLineDashOffset=function(off){this.webkitLineDashOffset=off}}else if(g.mozDash!==undefined){g.vgLineDash=function(dash){this.mozDash=dash};g.vgLineDashOffset=NOOP}else{g.vgLineDash=NOOP;g.vgLineDashOffset=NOOP}return canvas}module.exports={instance:instance,resize:resize,lineDash:lineDash}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],812:[function(require,module,exports){function create(doc,tag,ns){return ns?doc.createElementNS(ns,tag):doc.createElement(tag)}function remove(el){if(!el)return;var p=el.parentNode;if(p){p.removeChild(el);if(!p.childNodes||!p.childNodes.length)remove(p)}}module.exports={find:function(el,tag){tag=tag.toLowerCase();for(var i=0,n=el.childNodes.length;i<n;++i){if(el.childNodes[i].tagName.toLowerCase()===tag){return el.childNodes[i]}}},child:function(el,index,tag,ns,className,insert){var a,b;a=b=el.childNodes[index];if(!a||insert||a.tagName.toLowerCase()!==tag.toLowerCase()||className&&a.getAttribute("class")!=className){a=create(el.ownerDocument,tag,ns);el.insertBefore(a,b||null);if(className)a.setAttribute("class",className)}return a},clear:function(el,index){var curr=el.childNodes.length;while(curr>index){el.removeChild(el.childNodes[--curr])}return el},remove:remove,cssClass:function(mark){return"mark-"+mark.marktype+(mark.name?" "+mark.name:"")},openTag:function(tag,attr,raw){var s="<"+tag,key,val;if(attr){for(key in attr){val=attr[key];if(val!=null){s+=" "+key+'="'+val+'"'}}}if(raw)s+=" "+raw;return s+">"},closeTag:function(tag){return"</"+tag+">"}}},{}],813:[function(require,module,exports){var bound=require("../util/bound");var sets=["items","axisItems","legendItems"];var keys=["marktype","name","interactive","clip","items","axisItems","legendItems","layer","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","interpolate","tension","orient","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function toJSON(scene,indent){return JSON.stringify(scene,keys,indent)}function fromJSON(json){var scene=typeof json==="string"?JSON.parse(json):json;return initialize(scene)}function initialize(scene){var type=scene.marktype,i,n,s,m,items;for(s=0,m=sets.length;s<m;++s){if(items=scene[sets[s]]){for(i=0,n=items.length;i<n;++i){items[i][type?"mark":"group"]=scene;if(!type||type==="group"){initialize(items[i])}}}}if(type)bound.mark(scene);return scene}module.exports={toJSON:toJSON,fromJSON:fromJSON}},{"../util/bound":810}],814:[function(require,module,exports){(function(global){(function(){var dl=require("datalib"),d3_svg=(typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null).svg,parse=require("../path/parse");function x(o){return o.x||0}function y(o){return o.y||0}function xw(o){return(o.x||0)+(o.width||0)}function yh(o){return(o.y||0)+(o.height||0)}function size(o){return o.size==null?100:o.size}function shape(o){return o.shape||"circle"}var areav=d3_svg.area().x(x).y1(y).y0(yh),areah=d3_svg.area().y(y).x1(x).x0(xw),line=d3_svg.line().x(x).y(y);module.exports={metadata:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},path:{arc:d3_svg.arc(),symbol:d3_svg.symbol().type(shape).size(size),area:function(items){var o=items[0];return(o.orient==="horizontal"?areah:areav).interpolate(o.interpolate||"linear").tension(o.tension||.7)(items)},line:function(items){var o=items[0];return line.interpolate(o.interpolate||"linear").tension(o.tension||.7)(items)},resize:function(pathStr,size){var path=parse(pathStr),newPath="",command,current,index,i,n,j,m;size=Math.sqrt(size);for(i=0,n=path.length;i<n;++i){for(command=path[i],j=0,m=command.length;j<m;++j){if(command[j]==="Z")break;if((current=+command[j])===current){index=pathStr.indexOf(current);newPath+=pathStr.substring(0,index)+current*size;pathStr=pathStr.substring(index+(current+"").length)}}}return newPath+"Z"}},symbolTypes:dl.toMap(d3_svg.symbolTypes),textAlign:{left:"start",center:"middle",right:"end"},textBaseline:{top:"before-edge",bottom:"after-edge",middle:"central"},styles:{fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",opacity:"opacity"},styleProperties:["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeCap","strokeDash","strokeDashOffset","opacity"]}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../path/parse":780,datalib:406}],815:[function(require,module,exports){function size(item){return item.fontSize!=null?item.fontSize:11}module.exports={size:size,value:function(s){return s!=null?String(s):""},font:function(item,quote){var font=item.font;if(quote&&font){font=String(font).replace(/\"/g,"'")}return""+(item.fontStyle?item.fontStyle+" ":"")+(item.fontVariant?item.fontVariant+" ":"")+(item.fontWeight?item.fontWeight+" ":"")+size(item)+"px "+(font||"sans-serif")},offset:function(item){var baseline=item.baseline,h=size(item);return Math.round(baseline==="top"?.93*h:baseline==="middle"?.3*h:baseline==="bottom"?-.21*h:0)}}},{}],816:[function(require,module,exports){module.exports={version:"2.6.5",dataflow:require("vega-dataflow"),parse:require("./src/parse/"),scene:{Bounder:require("./src/scene/Bounder"),Builder:require("./src/scene/Builder"),Encoder:require("./src/scene/Encoder"),GroupBuilder:require("./src/scene/GroupBuilder"),visit:require("./src/scene/visit")},transforms:require("./src/transforms"),Transform:require("./src/transforms/Transform"),BatchTransform:require("./src/transforms/BatchTransform"),Parameter:require("./src/transforms/Parameter"),schema:require("./src/core/schema"),config:require("./src/core/config"),util:require("./src/util"),logging:require("vega-logging"),debug:require("vega-logging").debug}},{"./src/core/config":820,"./src/core/schema":821,"./src/parse/":826,"./src/scene/Bounder":838,"./src/scene/Builder":839,"./src/scene/Encoder":840,"./src/scene/GroupBuilder":841,"./src/scene/visit":846,"./src/transforms":874,"./src/transforms/BatchTransform":848,"./src/transforms/Parameter":864,"./src/transforms/Transform":869,"./src/util":877,"vega-dataflow":710,"vega-logging":776}],817:[function(require,module,exports){var sg=require("vega-scenegraph").render,canvas=sg.canvas,svg=sg.svg.string,View=require("./View");function HeadlessView(width,height,model){View.call(this,width,height,model);this._type="canvas";this._renderers={canvas:canvas,svg:svg}}var prototype=HeadlessView.prototype=new View;prototype.renderer=function(type){if(type)this._type=type;return View.prototype.renderer.apply(this,arguments)};prototype.canvas=function(){return this._type==="canvas"?this._renderer.canvas():null};prototype.canvasAsync=function(callback){var r=this._renderer,view=this;function wait(){if(r.pendingImages()===0){view.render();callback(view.canvas())}else{setTimeout(wait,10)}}if(this._type!=="canvas")return null;if(r.pendingImages()>0){wait()}else{callback(this.canvas())}};prototype.svg=function(){return this._type==="svg"?this._renderer.svg():null};prototype.initialize=function(){var w=this._width,h=this._height,bg=this._bgcolor,pad=this._padding,config=this.model().config();if(this._viewport){w=this._viewport[0]-(pad?pad.left+pad.right:0);h=this._viewport[1]-(pad?pad.top+pad.bottom:0)}this._renderer=(this._renderer||new this._io.Renderer(config.load)).initialize(null,w,h,pad).background(bg);return this._repaint=true,this};module.exports=HeadlessView},{"./View":819,"vega-scenegraph":777}],818:[function(require,module,exports){var dl=require("datalib"),df=require("vega-dataflow"),ChangeSet=df.ChangeSet,Base=df.Graph.prototype,Node=df.Node,GroupBuilder=require("../scene/GroupBuilder"),visit=require("../scene/visit"),compiler=require("../parse/expr"),config=require("./config");function Model(cfg){this._defs={};this._predicates={};this._scene=null;this._groups=null;this._node=null;this._builder=null;this._reset={axes:false,legends:false};this.config(cfg);this.expr=compiler(this);Base.init.call(this)}var prototype=Model.prototype=Object.create(Base);prototype.constructor=Model;prototype.defs=function(defs){if(!arguments.length)return this._defs;this._defs=defs;return this};prototype.config=function(cfg){if(!arguments.length)return this._config;this._config=Object.create(config);for(var name in cfg){var x=cfg[name],y=this._config[name];if(dl.isObject(x)&&dl.isObject(y)){this._config[name]=dl.extend({},y,x)}else{this._config[name]=x}}return this};prototype.width=function(width){if(this._defs)this._defs.width=width;if(this._defs&&this._defs.marks)this._defs.marks.width=width;if(this._scene){this._scene.items[0].width=width;this._scene.items[0]._dirty=true}this._reset.axes=true;return this};prototype.height=function(height){if(this._defs)this._defs.height=height;if(this._defs&&this._defs.marks)this._defs.marks.height=height;if(this._scene){this._scene.items[0].height=height;this._scene.items[0]._dirty=true}this._reset.axes=true;return this};prototype.node=function(){return this._node||(this._node=new Node(this))};prototype.data=function(){var data=Base.data.apply(this,arguments);if(arguments.length>1){this.node().addListener(data.pipeline()[0])}return data};function predicates(name){var m=this,pred={};if(!dl.isArray(name))return this._predicates[name];name.forEach(function(n){pred[n]=m._predicates[n]});return pred}prototype.predicate=function(name,predicate){if(arguments.length===1)return predicates.call(this,name);return this._predicates[name]=predicate};prototype.predicates=function(){return this._predicates};prototype.scene=function(renderer){if(!arguments.length)return this._scene;if(this._builder){this.node().removeListener(this._builder);this._builder._groupBuilder.disconnect()}var m=this,b=this._builder=new Node(this);b.evaluate=function(input){if(b._groupBuilder)return input;var gb=b._groupBuilder=new GroupBuilder(m,m._defs.marks,m._scene={}),p=gb.pipeline();m._groups={};this.addListener(gb.connect());p[p.length-1].addListener(renderer);return input};this.addListener(b);return this};prototype.group=function(id,item){var groups=this._groups;if(arguments.length===1)return groups[id];return groups[id]=item,this};prototype.reset=function(){if(this._scene&&this._reset.axes){visit(this._scene,function(item){if(item.axes)item.axes.forEach(function(axis){axis.reset()})});this._reset.axes=false}if(this._scene&&this._reset.legends){visit(this._scene,function(item){if(item.legends)item.legends.forEach(function(l){l.reset()})});this._reset.legends=false}return this};prototype.addListener=function(l){this.node().addListener(l)};prototype.removeListener=function(l){this.node().removeListener(l)};prototype.fire=function(cs){if(!cs)cs=ChangeSet.create();this.propagate(cs,this.node())};module.exports=Model},{"../parse/expr":825,"../scene/GroupBuilder":841,"../scene/visit":846,"./config":820,datalib:406,"vega-dataflow":710}],819:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),df=require("vega-dataflow"),scene=require("vega-scenegraph"),sg=scene.render,bound=scene.bound,log=require("vega-logging"),Deps=df.Dependencies,parseStreams=require("../parse/streams"),Encoder=require("../scene/Encoder"),Transition=require("../scene/Transition");function View(el,width,height){this._el=null;this._model=null;this._width=this.__width=width||500;this._height=this.__height=height||300;this._bgcolor=null;this._cursor=true;this._autopad=1;this._padding={top:0,left:0,bottom:0,right:0};this._viewport=null;this._renderer=null;this._handler=null;this._streamer=null;this._skipSignals=false;this._changeset=null;this._repaint=true;this._renderers=sg;this._io=null;this._api={}}var prototype=View.prototype;prototype.model=function(model){if(!arguments.length)return this._model;if(this._model!==model){this._model=model;this._streamer=new df.Node(model);this._streamer._rank=-1;this._changeset=df.ChangeSet.create();if(this._handler)this._handler.model(model)}return this};function streaming(src){var view=this,ds=this._model.data(src);if(!ds)return log.error('Data source "'+src+'" is not defined.');var listener=ds.pipeline()[0],streamer=this._streamer,api={};if(this._api[src])return this._api[src];api.insert=function(vals){ds.insert(dl.duplicate(vals));streamer.addListener(listener);view._changeset.data[src]=1;return api};api.update=function(){streamer.addListener(listener);view._changeset.data[src]=1;return ds.update.apply(ds,arguments),api};api.remove=function(){streamer.addListener(listener);view._changeset.data[src]=1;return ds.remove.apply(ds,arguments),api};api.values=function(){return ds.values()};return this._api[src]=api}prototype.data=function(data){var v=this;if(!arguments.length)return v._model.values();else if(dl.isString(data))return streaming.call(v,data);else if(dl.isObject(data)){dl.keys(data).forEach(function(k){var api=streaming.call(v,k);data[k](api)})}return this};var VIEW_SIGNALS=dl.toMap(["width","height","padding"]);prototype.signal=function(name,value,skip){var m=this._model,key,values;if(!arguments.length){return m.values(Deps.SIGNALS)}else if(arguments.length===1&&dl.isString(name)){return m.values(Deps.SIGNALS,name)}if(dl.isObject(name)){values=name;skip=value}else{values={};values[name]=value}for(key in values){if(VIEW_SIGNALS[key]){this[key](values[key])}else{setSignal.call(this,key,values[key])}}return this._skipSignals=skip,this};function setSignal(name,value){var cs=this._changeset,sg=this._model.signal(name);if(!sg)return log.error('Signal "'+name+'" is not defined.');this._streamer.addListener(sg.value(value));cs.signals[name]=1;cs.reflow=true}prototype.width=function(width){if(!arguments.length)return this.__width;if(this.__width!==width){this._width=this.__width=width;this.model().width(width);this.initialize();if(this._strict)this._autopad=1;setSignal.call(this,"width",width)}return this};prototype.height=function(height){if(!arguments.length)return this.__height;if(this.__height!==height){this._height=this.__height=height;this.model().height(height);this.initialize();if(this._strict)this._autopad=1;setSignal.call(this,"height",height)}return this};prototype.background=function(bgcolor){if(!arguments.length)return this._bgcolor;if(this._bgcolor!==bgcolor){this._bgcolor=bgcolor;this.initialize()}return this};prototype.padding=function(pad){if(!arguments.length)return this._padding;if(this._padding!==pad){if(dl.isString(pad)){this._autopad=1;this._padding={top:0,left:0,bottom:0,right:0};this._strict=pad==="strict"}else{this._autopad=0;this._padding=pad;this._strict=false}if(this._renderer)this._renderer.resize(this._width,this._height,this._padding);if(this._handler)this._handler.padding(this._padding);setSignal.call(this,"padding",this._padding)}return this._repaint=true,this};function viewBounds(){var s=this.model().scene(),legends=s.items[0].legendItems,i=0,len=legends.length,b,lb;if(this._strict){b=bound.mark(s,null,false);for(;i<len;++i){lb=legends[i].bounds;b.add(lb.x1,0).add(lb.x2,0)}return b}return s.bounds}prototype.autopad=function(opt){if(this._autopad<1)return this;else this._autopad=0;var b=viewBounds.call(this),pad=this._padding,config=this.model().config(),inset=config.autopadInset,l=b.x1<0?Math.ceil(-b.x1)+inset:0,t=b.y1<0?Math.ceil(-b.y1)+inset:0,r=b.x2>this._width?Math.ceil(+b.x2-this._width)+inset:0;b=b.y2>this._height?Math.ceil(+b.y2-this._height)+inset:0;pad={left:l,top:t,right:r,bottom:b};if(this._strict){this._autopad=0;this._padding=pad;this._width=Math.max(0,this.__width-(l+r));this._height=Math.max(0,this.__height-(t+b));this._model.width(this._width).height(this._height).reset();setSignal.call(this,"width",this._width);setSignal.call(this,"height",this._height);setSignal.call(this,"padding",pad);this.initialize().update({props:"enter"}).update({props:"update"})}else{this.padding(pad).update(opt)}return this};prototype.viewport=function(size){if(!arguments.length)return this._viewport;if(this._viewport!==size){this._viewport=size;this.initialize()}return this};prototype.renderer=function(type){if(!arguments.length)return this._renderer;if(this._renderers[type])type=this._renderers[type];else if(dl.isString(type))throw new Error("Unknown renderer: "+type);else if(!type)throw new Error("No renderer specified");if(this._io!==type){this._io=type;this._renderer=null;this.initialize();if(this._build)this.render()}return this};prototype.initialize=function(el){var v=this,prevHandler,w=v._width,h=v._height,pad=v._padding,bg=v._bgcolor,config=this.model().config();if(!arguments.length||el===null){el=this._el?this._el.parentNode:null;if(!el)return this}d3.select(el).select("div.vega").remove();this._el=el=d3.select(el).append("div").attr("class","vega").style("position","relative").node();if(v._viewport){d3.select(el).style("width",(v._viewport[0]||w)+"px").style("height",(v._viewport[1]||h)+"px").style("overflow","auto")}sg.canvas.Renderer.RETINA=config.render.retina;v._renderer=(v._renderer||new this._io.Renderer(config.load)).initialize(el,w,h,pad).background(bg);prevHandler=v._handler;v._handler=(new this._io.Handler).initialize(el,pad,v);if(prevHandler){prevHandler.handlers().forEach(function(h){v._handler.on(h.type,h.handler)})}else{v._detach=parseStreams(this)}return this._repaint=true,this};prototype.destroy=function(){if(this._detach)this._detach()};function build(){var v=this;v._renderNode=new df.Node(v._model).router(true);v._renderNode.evaluate=function(input){log.debug(input,["rendering"]);var s=v._model.scene(),h=v._handler;if(h&&h.scene)h.scene(s);if(input.trans){input.trans.start(function(items){v._renderer.render(s,items)})}else if(v._repaint){v._renderer.render(s)}else if(input.dirty.length){v._renderer.render(s,input.dirty)}if(input.dirty.length){input.dirty.forEach(function(i){i._dirty=false});s.items[0]._dirty=false}v._repaint=v._skipSignals=false;return input};return v._model.scene(v._renderNode),true}prototype.update=function(opt){opt=opt||{};var v=this,model=this._model,streamer=this._streamer,cs=this._changeset,trans=opt.duration?new Transition(opt.duration,opt.ease):null;if(trans)cs.trans=trans;if(opt.props!==undefined){if(dl.keys(cs.data).length>0){throw Error("New data values are not reflected in the visualization."+" Please call view.update() before updating a specified property set.")}cs.reflow=true;cs.request=opt.props}var built=v._build;v._build=v._build||build.call(this);if(opt.items&&built){Encoder.update(model,opt.trans,opt.props,opt.items,cs.dirty);v._renderNode.evaluate(cs)}else if(streamer.listeners().length&&built){if(this._repaint)streamer.addListener(model.node());model.propagate(cs,streamer,null,this._skipSignals);streamer.disconnect()}else{model.fire(cs)}v._changeset=df.ChangeSet.create();return v.autopad(opt)};prototype.toImageURL=function(type){var v=this,Renderer;switch(type||"png"){case"canvas":case"png":Renderer=sg.canvas.Renderer;break;case"svg":Renderer=sg.svg.string.Renderer;break;default:throw Error("Unrecognized renderer type: "+type)}var retina=sg.canvas.Renderer.RETINA;sg.canvas.Renderer.RETINA=false;var ren=new Renderer(v._model.config.load).initialize(null,v._width,v._height,v._padding).background(v._bgcolor).render(v._model.scene());sg.canvas.Renderer.RETINA=retina;if(type==="svg"){var blob=new Blob([ren.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(blob)}else{return ren.canvas().toDataURL("image/png")}};prototype.render=function(items){this._renderer.render(this._model.scene(),items);return this};prototype.on=function(){this._handler.on.apply(this._handler,arguments);return this};prototype.onSignal=function(name,handler){var sg=this._model.signal(name);return sg?sg.on(handler):log.error('Signal "'+name+'" is not defined.'),this};prototype.off=function(){this._handler.off.apply(this._handler,arguments);return this};prototype.offSignal=function(name,handler){var sg=this._model.signal(name);return sg?sg.off(handler):log.error('Signal "'+name+'" is not defined.'),this};View.factory=function(model){var HeadlessView=require("./HeadlessView");return function(opt){opt=opt||{};var defs=model.defs();var v=(opt.el?new View:new HeadlessView).model(model).renderer(opt.renderer||"canvas").width(defs.width).height(defs.height).background(defs.background).padding(defs.padding).viewport(defs.viewport).initialize(opt.el);if(opt.data)v.data(opt.data);if(opt.el){if(opt.hover!==false){v.on("mouseover",function(evt,item){if(item&&item.hasPropertySet("hover")){this.update({props:"hover",items:item})}}).on("mouseout",function(evt,item){if(item&&item.hasPropertySet("hover")){this.update({props:"update",items:item})}})}if(opt.cursor!==false){v.onSignal("cursor",function(name,value){var body=d3.select("body");if(dl.isString(value)){v._cursor=value==="default";body.style("cursor",value)}else if(dl.isObject(value)&&v._cursor){body.style("cursor",value.default)}})}}return v}};module.exports=View}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../parse/streams":836,"../scene/Encoder":840,"../scene/Transition":843,"./HeadlessView":817,datalib:406,"vega-dataflow":710,"vega-logging":776,"vega-scenegraph":777}],820:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,config={};config.load={baseURL:"",domainWhiteList:false};config.autopadInset=5;config.scale={time:d3.time.scale,utc:d3.time.scale.utc};config.render={retina:true};config.scene={fill:undefined,fillOpacity:undefined,stroke:undefined,strokeOpacity:undefined,strokeWidth:undefined,strokeDash:undefined,strokeDashOffset:undefined};config.axis={layer:"back",ticks:10,padding:3,axisColor:"#000",axisWidth:1,gridColor:"#000",gridOpacity:.15,tickColor:"#000",tickLabelColor:"#000",tickWidth:1,tickSize:6,tickLabelFontSize:11,tickLabelFont:"sans-serif",titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleOffset:"auto",titleOffsetAutoMin:30,titleOffsetAutoMax:1e4,titleOffsetAutoMargin:4};config.legend={orient:"right",offset:20,padding:3,margin:2,gradientStrokeColor:"#888",gradientStrokeWidth:1,gradientHeight:16,gradientWidth:100,labelColor:"#000",labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,symbolShape:"circle",symbolSize:50,symbolColor:"#888",symbolStrokeWidth:1,titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"};config.color={rgb:[128,128,128],lab:[50,0,0],hcl:[0,0,50],hsl:[0,0,.5]};config.range={category10:d3.scale.category10().range(),category20:d3.scale.category20().range(),category20b:d3.scale.category20b().range(),category20c:d3.scale.category20c().range(),shapes:["circle","cross","diamond","square","triangle-down","triangle-up"]};module.exports=config}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],821:[function(require,module,exports){var dl=require("datalib"),parse=require("../parse"),Scale=require("../scene/Scale"),config=require("./config");function compile(module,opt,schema){var s=module.schema;if(!s)return;if(s.refs)dl.extend(schema.refs,s.refs);if(s.defs)dl.extend(schema.defs,s.defs)}module.exports=function(opt){var schema=null;opt=opt||{};if(opt.url){schema=dl.json(dl.extend({url:opt.url},config.load))}else{schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{},refs:{},$ref:"#/defs/spec"};dl.keys(parse).forEach(function(k){compile(parse[k],opt,schema)});compile(Scale,opt,schema)}if(opt.properties)dl.keys(opt.properties).forEach(function(k){schema.defs.propset.properties[k]={$ref:"#/refs/"+opt.properties[k]+"Value"}});if(opt.propertySets)dl.keys(opt.propertySets).forEach(function(k){schema.defs.mark.properties.properties.properties[k]={$ref:"#/defs/propset"}});return schema}},{"../parse":826,"../scene/Scale":842,"./config":820,datalib:406}],822:[function(require,module,exports){var dl=require("datalib"),axs=require("../scene/axis"),themeVal=require("../util/theme-val");var ORIENT={x:"bottom",y:"left",top:"top",bottom:"bottom",left:"left",right:"right"};function parseAxes(model,spec,axes,group){var cfg=config(model);(spec||[]).forEach(function(def,index){axes[index]=axes[index]||axs(model,cfg[def.type]);parseAxis(cfg[def.type],def,index,axes[index],group)})}function parseAxis(config,def,index,axis,group){var scale;if(def.scale!==undefined){axis.scale(scale=group.scale(def.scale))}var grid=config.grid;if(dl.isObject(grid)){config.grid=grid[scale.type]!==undefined?grid[scale.type]:grid.default}axis.orient(themeVal(def,config,"orient",ORIENT[def.type]));axis.offset(themeVal(def,config,"offset",0));axis.layer(themeVal(def,config,"layer","front"));axis.grid(themeVal(def,config,"grid",false));axis.title(def.title||null);axis.titleOffset(themeVal(def,config,"titleOffset"));axis.tickValues(def.values||null);axis.tickFormat(def.format||null);axis.tickFormatType(def.formatType||null);axis.tickSubdivide(def.subdivide||0);axis.tickPadding(themeVal(def,config,"tickPadding",config.padding));var ts=themeVal(def,config,"tickSize"),size=[ts,ts,ts];size[0]=themeVal(def,config,"tickSizeMajor",size[0]);size[1]=themeVal(def,config,"tickSizeMinor",size[1]);size[2]=themeVal(def,config,"tickSizeEnd",size[2]);if(size.length){axis.tickSize.apply(axis,size)}axis.tickCount(themeVal(def,config,"ticks"));var p=def.properties;if(p&&p.ticks){axis.majorTickProperties(p.majorTicks?dl.extend({},p.ticks,p.majorTicks):p.ticks);axis.minorTickProperties(p.minorTicks?dl.extend({},p.ticks,p.minorTicks):p.ticks)}else{axis.majorTickProperties(p&&p.majorTicks||{});axis.minorTickProperties(p&&p.minorTicks||{})}axis.tickLabelProperties(p&&p.labels||{});axis.titleProperties(p&&p.title||{});axis.gridLineProperties(p&&p.grid||{});axis.domainProperties(p&&p.axis||{})}function config(model){var cfg=model.config(),axis=cfg.axis;return{x:dl.extend(dl.duplicate(axis),cfg.axis_x),y:dl.extend(dl.duplicate(axis),cfg.axis_y)}}module.exports=parseAxes},{"../scene/axis":844,"../util/theme-val":878,datalib:406}],823:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null;function parseBg(bg){if(bg==null)return null;return d3.rgb(bg)+""}module.exports=parseBg}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],824:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),parseTransforms=require("./transforms"),parseModify=require("./modify");function parseData(model,spec,callback){var config=model.config(),count=0;function onError(error,d){log.error("PARSE DATA FAILED: "+d.name+" "+error);count=-1;callback(error)}function onLoad(d){return function(error,data){if(error){onError(error,d)}else if(count>0){try{model.data(d.name).values(dl.read(data,d.format));if(--count===0)callback()}catch(err){onError(err,d)}}}}(spec||[]).forEach(function(d){if(d.url){count+=1;dl.load(dl.extend({url:d.url},config.load),onLoad(d))}try{parseData.datasource(model,d)}catch(err){onError(err,d)}});if(count===0)setTimeout(callback,1);return spec}parseData.datasource=function(model,d){var transform=(d.transform||[]).map(function(t){return parseTransforms(model,t)}),mod=(d.modify||[]).map(function(m){return parseModify(model,m,d)}),ds=model.data(d.name,mod.concat(transform));if(d.values){ds.values(dl.read(d.values,d.format))}else if(d.source){ds.source(d.source).addListener(ds);model.removeListener(ds.pipeline()[0])}return ds};module.exports=parseData},{"./modify":830,"./transforms":837,datalib:406,"vega-logging":776}],825:[function(require,module,exports){var dl=require("datalib"),template=dl.template,expr=require("vega-expression"),args=["datum","parent","event","signals"];var compile=expr.compiler(args,{idWhiteList:args,fieldVar:args[0],globalVar:function(id){return"this.sig["+dl.str(id)+"]._value"},functions:function(codegen){var fn=expr.functions(codegen);fn.eventItem="event.vg.getItem";fn.eventGroup="event.vg.getGroup";fn.eventX="event.vg.getX";fn.eventY="event.vg.getY";fn.open=openGen(codegen);fn.scale=scaleGen(codegen,false);fn.iscale=scaleGen(codegen,true);fn.inrange="this.defs.inrange";fn.indata=indataGen(codegen);fn.format="this.defs.format";fn.timeFormat="this.defs.timeFormat";fn.utcFormat="this.defs.utcFormat";return fn},functionDefs:function(){return{scale:scale,inrange:inrange,indata:indata,format:numberFormat,timeFormat:timeFormat,utcFormat:utcFormat,open:windowOpen}}});function openGen(codegen){return function(args){args=args.map(codegen);var n=args.length;if(n<1||n>2){throw Error("open takes exactly 1 or 2 arguments.")}return"this.defs.open(this.model, "+args[0]+(n>1?","+args[1]:"")+")"}}function windowOpen(model,url,name){if(typeof window!=="undefined"&&window&&window.open){var opt=dl.extend({type:"open",url:url,name:name},model.config().load),uri=dl.load.sanitizeUrl(opt);if(uri){window.open(uri,name)}else{throw Error("Invalid URL: "+opt.url)}}else{throw Error("Open function can only be invoked in a browser.")}}function scaleGen(codegen,invert){return function(args){args=args.map(codegen);var n=args.length;if(n<2||n>3){throw Error("scale takes exactly 2 or 3 arguments.")}return"this.defs.scale(this.model, "+invert+", "+args[0]+","+args[1]+(n>2?","+args[2]:"")+")"}}function scale(model,invert,name,value,scope){if(!scope||!scope.scale){scope=scope&&scope.mark?scope.mark.group:model.scene().items[0]}if(model.group(scope._id)!==scope){throw Error('Scope for scale "'+name+'" is not a valid group item.')}var s=scope.scale(name);return!s?value:invert?s.invert(value):s(value)}function inrange(val,a,b,exclusive){var min=a,max=b;if(a>b){min=b;max=a}return exclusive?min<val&&max>val:min<=val&&max>=val}function indataGen(codegen){return function(args,globals,fields,dataSources){var data;if(args.length!==3){throw Error("indata takes 3 arguments.")}if(args[0].type!=="Literal"){throw Error("Data source name must be a literal for indata.")}data=args[0].value;dataSources[data]=1;if(args[2].type==="Literal"){indataGen.model.requestIndex(data,args[2].value)}args=args.map(codegen);return"this.defs.indata(this.model,"+args[0]+","+args[1]+","+args[2]+")"}}function indata(model,dataname,val,field){var data=model.data(dataname),index=data.getIndex(field);return index[val]>0}function numberFormat(specifier,v){return template.format(specifier,"number")(v)}function timeFormat(specifier,d){return template.format(specifier,"time")(d)}function utcFormat(specifier,d){return template.format(specifier,"utc")(d)}function wrap(model){return function(str){indataGen.model=model;var x=compile(str);x.model=model;x.sig=model?model._signals:{};return x}}wrap.scale=scale;wrap.codegen=compile.codegen;module.exports=wrap},{datalib:406,"vega-expression":715}],826:[function(require,module,exports){module.exports={axes:require("./axes"),background:require("./background"),data:require("./data"),events:require("vega-event-selector"),expr:require("./expr"),legends:require("./legends"),mark:require("./mark"),marks:require("./marks"),modify:require("./modify"),padding:require("./padding"),predicates:require("./predicates"),properties:require("./properties"),signals:require("./signals"),spec:require("./spec"),streams:require("./streams"),transforms:require("./transforms")}},{"./axes":822,"./background":823,"./data":824,"./expr":825,"./legends":827,"./mark":828,"./marks":829,"./modify":830,"./padding":831,"./predicates":832,"./properties":833,"./signals":834,"./spec":835,"./streams":836,"./transforms":837,"vega-event-selector":711}],827:[function(require,module,exports){var lgnd=require("../scene/legend");function parseLegends(model,spec,legends,group){(spec||[]).forEach(function(def,index){legends[index]=legends[index]||lgnd(model);parseLegend(def,index,legends[index],group)})}function parseLegend(def,index,legend,group){legend.size(def.size?group.scale(def.size):null);legend.shape(def.shape?group.scale(def.shape):null);legend.fill(def.fill?group.scale(def.fill):null);legend.stroke(def.stroke?group.scale(def.stroke):null);legend.opacity(def.opacity?group.scale(def.opacity):null);if(def.orient)legend.orient(def.orient);if(def.offset!=null)legend.offset(def.offset);legend.title(def.title||null);legend.values(def.values||null);legend.format(def.format!==undefined?def.format:null);legend.formatType(def.formatType||null);var p=def.properties;legend.titleProperties(p&&p.title||{});legend.labelProperties(p&&p.labels||{});legend.legendProperties(p&&p.legend||{});legend.symbolProperties(p&&p.symbols||{});legend.gradientProperties(p&&p.gradient||{})}module.exports=parseLegends},{"../scene/legend":845}],828:[function(require,module,exports){var dl=require("datalib"),parseProperties=require("./properties");function parseMark(model,mark,applyDefaults){var props=mark.properties||applyDefaults&&(mark.properties={}),enter=props.enter||applyDefaults&&(props.enter={}),group=mark.marks,config=model.config().marks||{};if(applyDefaults){if(mark.type==="symbol"&&!enter.size&&config.symbolSize){enter.size={value:config.symbolSize}}var colorMap={arc:"fill",area:"fill",rect:"fill",symbol:"fill",text:"fill",line:"stroke",path:"stroke",rule:"stroke"};var colorProp=colorMap[mark.type];if(!enter[colorProp]&&config.color){enter[colorProp]={value:config.color}}}dl.keys(props).forEach(function(k){props[k]=parseProperties(model,mark.type,props[k])});if(mark.delay){mark.delay=parseProperties(model,mark.type,{delay:mark.delay})}if(group){mark.marks=group.map(function(g){return parseMark(model,g,true)})}return mark}module.exports=parseMark},{"./properties":833,datalib:406}],829:[function(require,module,exports){var parseMark=require("./mark"),parseProperties=require("./properties");function parseRootMark(model,spec,width,height){return{type:"group",width:width,height:height,properties:defaults(spec.scene||{},model),scales:spec.scales||[],axes:spec.axes||[],legends:spec.legends||[],marks:(spec.marks||[]).map(function(m){return parseMark(model,m,true)})}}var PROPERTIES=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDash","strokeDashOffset"];function defaults(spec,model){var config=model.config().scene,props={},i,n,m,p,s;for(i=0,n=m=PROPERTIES.length;i<n;++i){p=PROPERTIES[i];if((s=spec[p])!==undefined){props[p]=s.signal?s:{value:s}}else if(config[p]){props[p]={value:config[p]}}else{--m}}return m?{update:parseProperties(model,"group",props)}:{}}module.exports=parseRootMark},{"./mark":828,"./properties":833}],830:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),df=require("vega-dataflow"),Node=df.Node,Tuple=df.Tuple,Deps=df.Dependencies;var Types={INSERT:"insert",REMOVE:"remove",UPSERT:"upsert",TOGGLE:"toggle",CLEAR:"clear"};var EMPTY=[];function filter(fields,value,src,dest){var splice=true,len=fields.length,i,j,f,v;for(i=src.length-1;i>=0;--i){for(j=0;j<len;++j){f=fields[j];v=value&&f(value)||value;if(f(src[i])!==v){splice=false;break}}if(splice)dest.push.apply(dest,src.splice(i,1));splice=true}}function insert(input,datum,source){var t=Tuple.ingest(datum);input.add.push(t);source._data.push(t)}function parseModify(model,def,ds){var signal=def.signal?dl.field(def.signal):null,signalName=signal?signal[0]:null,predicate=def.predicate?model.predicate(def.predicate.name||def.predicate):null,exprTrigger=def.test?model.expr(def.test):null,reeval=predicate===null&&exprTrigger===null,isClear=def.type===Types.CLEAR,fields=dl.array(def.field||"data"),getters=fields.map(dl.accessor),setters=fields.map(dl.mutator),node=new Node(model).router(isClear);node.evaluate=function(input){var db,sg;if(predicate!==null){db=model.values(Deps.DATA,predicate.data||EMPTY);sg=model.values(Deps.SIGNALS,predicate.signals||EMPTY);reeval=predicate.call(predicate,{},db,sg,model._predicates)}if(exprTrigger!==null){sg=model.values(Deps.SIGNALS,exprTrigger.globals||EMPTY);reeval=exprTrigger.fn()}log.debug(input,[def.type+"ing",reeval]);if(!reeval||!isClear&&!input.signals[signalName])return input;var value=signal?model.signalRef(def.signal):null,d=model.data(ds.name),t=null,add=[],rem=[],up=0,datum;if(dl.isObject(value)){datum=value;if(!def.field){fields=dl.keys(datum);getters=fields.map(dl.accessor);setters=fields.map(dl.mutator)}}else{datum={};setters.forEach(function(f){f(datum,value)})}if(def.type===Types.INSERT){insert(input,datum,d)}else if(def.type===Types.REMOVE){filter(getters,value,input.mod,input.rem);filter(getters,value,input.add,rem);filter(getters,value,d._data,rem)}else if(def.type===Types.UPSERT){input.mod.forEach(function(x){var every=getters.every(function(f){return f(x)===f(datum)});if(every)up=(dl.extend(x,datum),up+1)});if(up===0)insert(input,datum,d)}else if(def.type===Types.TOGGLE){filter(getters,value,input.mod,rem);input.rem.push.apply(input.rem,rem);filter(getters,value,input.add,add);if(add.length||rem.length){d._data=d._data.filter(function(x){return rem.indexOf(x)<0&&add.indexOf(x)<0})}else{input.add.push(t=Tuple.ingest(datum));d._data.push(t)}}else if(def.type===Types.CLEAR){input.rem.push.apply(input.rem,input.mod.splice(0));input.add.splice(0);d._data.splice(0)}fields.forEach(function(f){input.fields[f]=1});return input};if(signalName)node.dependency(Deps.SIGNALS,signalName);if(predicate){node.dependency(Deps.DATA,predicate.data);node.dependency(Deps.SIGNALS,predicate.signals)}if(exprTrigger){node.dependency(Deps.SIGNALS,exprTrigger.globals);node.dependency(Deps.DATA,exprTrigger.dataSources)}return node}module.exports=parseModify},{datalib:406,"vega-dataflow":710,"vega-logging":776}],831:[function(require,module,exports){var dl=require("datalib");function parsePadding(pad){return pad==null?"auto":dl.isObject(pad)?pad:dl.isNumber(pad)?{top:pad,left:pad,right:pad,bottom:pad}:pad==="strict"?pad:"auto"}module.exports=parsePadding},{datalib:406}],832:[function(require,module,exports){var dl=require("datalib");var types={"=":parseComparator,"==":parseComparator,"!=":parseComparator,">":parseComparator,">=":parseComparator,"<":parseComparator,"<=":parseComparator,and:parseLogical,"&&":parseLogical,or:parseLogical,"||":parseLogical,in:parseIn};var nullScale=function(){return 0};nullScale.invert=nullScale;function parsePredicates(model,spec){(spec||[]).forEach(function(s){var parse=types[s.type](model,s);var pred=Function("args","db","signals","predicates",parse.code);pred.root=function(){return model.scene().items[0]};pred.nullScale=nullScale;pred.isFunction=dl.isFunction;pred.signals=parse.signals;pred.data=parse.data;model.predicate(s.name,pred)});return spec}function parseSignal(signal,signals){var s=dl.field(signal),code="signals["+s.map(dl.str).join("][")+"]";signals[s[0]]=1;return code}function parseOperands(model,operands){var decl=[],defs=[],signals={},db={};function setSignal(s){signals[s]=1}function setData(d){db[d]=1}dl.array(operands).forEach(function(o,i){var name="o"+i,def="";if(o.value!==undefined){def=dl.str(o.value)}else if(o.arg){def="args["+dl.str(o.arg)+"]"}else if(o.signal){def=parseSignal(o.signal,signals)}else if(o.predicate){var ref=o.predicate,predName=ref&&(ref.name||ref),pred=model.predicate(predName),p="predicates["+dl.str(predName)+"]";pred.signals.forEach(setSignal);pred.data.forEach(setData);if(dl.isObject(ref)){dl.keys(ref).forEach(function(k){if(k==="name")return;var i=ref[k];def+="args["+dl.str(k)+"] = ";if(i.signal){def+=parseSignal(i.signal,signals)}else if(i.arg){def+="args["+dl.str(i.arg)+"]"}def+=", "})}def+=p+".call("+p+", args, db, signals, predicates)"}decl.push(name);defs.push(name+"=("+def+")")});return{code:"var "+decl.join(", ")+";\n"+defs.join(";\n")+";\n",signals:dl.keys(signals),data:dl.keys(db)}}function parseComparator(model,spec){var ops=parseOperands(model,spec.operands);if(spec.type==="=")spec.type="==";ops.code+="o0 = o0 instanceof Date ? o0.getTime() : o0;\n"+"o1 = o1 instanceof Date ? o1.getTime() : o1;\n";return{code:ops.code+"return "+["o0","o1"].join(spec.type)+";",signals:ops.signals,data:ops.data}}function parseLogical(model,spec){var ops=parseOperands(model,spec.operands),o=[],i=0,len=spec.operands.length;while(o.push("o"+i++)<len);if(spec.type==="and")spec.type="&&";else if(spec.type==="or")spec.type="||";return{code:ops.code+"return "+o.join(spec.type)+";",signals:ops.signals,data:ops.data}}function parseIn(model,spec){var o=[spec.item],code="";if(spec.range)o.push.apply(o,spec.range);if(spec.scale){code=parseScale(spec.scale,o)}var ops=parseOperands(model,o);code=ops.code+code+"\n  var ordSet = null;\n";if(spec.data){var field=dl.field(spec.field).map(dl.str);code+="var where = function(d) { return d["+field.join("][")+"] == o0 };\n";code+="return db["+dl.str(spec.data)+"].filter(where).length > 0;"}else if(spec.range){if(spec.scale){code+="if (scale.length == 2) {\n"+"  ordSet = scale(o1, o2);\n"+"} else {\n"+"  o1 = scale(o1);\no2 = scale(o2);\n"+"}"}code+="return ordSet !== null ? ordSet.indexOf(o0) !== -1 :\n"+"  o1 < o2 ? o1 <= o0 && o0 <= o2 : o2 <= o0 && o0 <= o1;"}return{code:code,signals:ops.signals,data:ops.data.concat(spec.data?[spec.data]:[])}}function parseScale(spec,ops){var code="var scale = ",idx=ops.length;if(dl.isString(spec)){ops.push({value:spec});code+="this.root().scale(o"+idx+")"}else if(spec.arg){ops.push(spec);code+="o"+idx}else if(spec.name){ops.push(dl.isString(spec.name)?{value:spec.name}:spec.name);code+="(this.isFunction(o"+idx+") ? o"+idx+" : ";if(spec.scope){ops.push(spec.scope);code+="((o"+(idx+1)+".scale || this.root().scale)(o"+idx+") || this.nullScale)"}else{code+="this.root().scale(o"+idx+")"}code+=")"}if(spec.invert===true){code+=".invert"}return code+";\n"}module.exports=parsePredicates},{datalib:406}],833:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),log=require("vega-logging"),Tuple=require("vega-dataflow").Tuple;var DEPS=["signals","scales","data","fields"];function properties(model,mark,spec){var config=model.config(),code="",names=dl.keys(spec),exprs=[],i,len,name,ref,vars={},deps={signals:{},scales:{},data:{},fields:{},nested:[],_nRefs:{},reflow:false};code+="var o = trans ? {} : item, d=0, exprs=this.exprs, set=this.tpl.set, tmpl=signals||{}, t;\n"+"tmpl.datum  = item.datum;\n"+"tmpl.group  = group;\n"+"tmpl.parent = group.datum;\n";function handleDep(p){if(ref[p]==null)return;var k=dl.array(ref[p]),i,n;for(i=0,n=k.length;i<n;++i){deps[p][k[i]]=1}}function handleNestedRefs(r){var k=(r.parent?"parent_":"group_")+r.level;deps._nRefs[k]=r}parseShape(model,config,spec);for(i=0,len=names.length;i<len;++i){ref=spec[name=names[i]];code+=i>0?"\n  ":"  ";if(ref.rule){ref=rule(model,name,ref.rule,exprs);code+="\n  "+ref.code}else if(dl.isArray(ref)){ref=rule(model,name,ref,exprs);code+="\n  "+ref.code}else{ref=valueRef(config,name,ref);code+="d += set(o, "+dl.str(name)+", "+ref.val+");"}vars[name]=true;DEPS.forEach(handleDep);deps.reflow=deps.reflow||ref.reflow;if(ref.nested.length)ref.nested.forEach(handleNestedRefs)}dl.keys(deps._nRefs).forEach(function(k){deps.nested.push(deps._nRefs[k])});deps.nested.sort(function(a,b){a=a.level;b=b.level;return a<b?-1:a>b?1:a>=b?0:NaN});if(vars.x2){if(vars.x){code+="\n  if (o.x > o.x2) { "+"\n    t = o.x;"+"\n    d += set(o, 'x', o.x2);"+"\n    d += set(o, 'x2', t); "+"\n  };";code+="\n  d += set(o, 'width', (o.x2 - o.x));"}else if(vars.width){code+="\n  d += set(o, 'x', (o.x2 - o.width));"}else{code+="\n  d += set(o, 'x', o.x2);"}}if(vars.xc){if(vars.width){code+="\n  d += set(o, 'x', (o.xc - o.width/2));"}else{code+="\n  d += set(o, 'x', o.xc);"}}if(vars.y2){if(vars.y){code+="\n  if (o.y > o.y2) { "+"\n    t = o.y;"+"\n    d += set(o, 'y', o.y2);"+"\n    d += set(o, 'y2', t);"+"\n  };";code+="\n  d += set(o, 'height', (o.y2 - o.y));"}else if(vars.height){code+="\n  d += set(o, 'y', (o.y2 - o.height));"}else{code+="\n  d += set(o, 'y', o.y2);"}}if(vars.yc){if(vars.height){code+="\n  d += set(o, 'y', (o.yc - o.height/2));"}else{code+="\n  d += set(o, 'y', o.yc);"}}if(hasPath(mark,vars))code+="\n  d += (item.touch(), 1);";code+="\n  if (trans) trans.interpolate(item, o);";code+="\n  return d > 0;";try{var encoder=Function("item","group","trans","db","signals","predicates",code);encoder.tpl=Tuple;encoder.exprs=exprs;encoder.util=dl;encoder.d3=d3;dl.extend(encoder,dl.template.context);return{encode:encoder,signals:dl.keys(deps.signals),scales:dl.keys(deps.scales),data:dl.keys(deps.data),fields:dl.keys(deps.fields),nested:deps.nested,reflow:deps.reflow}}catch(e){log.error(e);log.log(code)}}function dependencies(a,b){if(!dl.isObject(a)){a={reflow:false,nested:[]};DEPS.forEach(function(d){a[d]=[]})}if(dl.isObject(b)){a.reflow=a.reflow||b.reflow;a.nested.push.apply(a.nested,b.nested);DEPS.forEach(function(d){a[d].push.apply(a[d],b[d])})}return a}function hasPath(mark,vars){return vars.path||(mark==="area"||mark==="line")&&(vars.x||vars.x2||vars.width||vars.y||vars.y2||vars.height||vars.tension||vars.interpolate)}var hb=/{{(.*?)}}/g;function parseShape(model,config,spec){var shape=spec.shape,last=0,value,match;if(shape&&(value=shape.value)){if(config.shape&&config.shape[value]){value=config.shape[value]}shape="";while((match=hb.exec(value))!==null){shape+=value.substring(last,match.index);shape+=model.expr(match[1]).fn();last=hb.lastIndex}spec.shape.value=shape+value.substring(last)}}function rule(model,name,rules,exprs){var config=model.config(),deps=dependencies(),inputs=[],code="";(rules||[]).forEach(function(r,i){var ref=valueRef(config,name,r);dependencies(deps,ref);if(r.test){var exprFn=model.expr(r.test);deps.signals.push.apply(deps.signals,exprFn.globals);deps.data.push.apply(deps.data,exprFn.dataSources);code+="if (exprs["+exprs.length+"](item.datum, item.mark.group.datum, null)) {"+"\n    d += set(o, "+dl.str(name)+", "+ref.val+");";code+=rules[i+1]?"\n  } else ":"  }";exprs.push(exprFn.fn)}else{var def=r.predicate,predName=def&&(def.name||def),pred=model.predicate(predName),p="predicates["+dl.str(predName)+"]",input=[],args=name+"_arg"+i;if(dl.isObject(def)){dl.keys(def).forEach(function(k){if(k==="name")return;var ref=valueRef(config,i,def[k],true);input.push(dl.str(k)+": "+ref.val);dependencies(deps,ref)})}if(predName){deps.signals.push.apply(deps.signals,pred.signals);deps.data.push.apply(deps.data,pred.data);inputs.push(args+" = {\n    "+input.join(",\n    ")+"\n  }");code+="if ("+p+".call("+p+","+args+", db, signals, predicates)) {"+"\n    d += set(o, "+dl.str(name)+", "+ref.val+");";code+=rules[i+1]?"\n  } else ":"  }"}else{code+="{"+"\n    d += set(o, "+dl.str(name)+", "+ref.val+");"+"\n  }\n"}}});if(inputs.length)code="var "+inputs.join(",\n      ")+";\n  "+code;return deps.code=code,deps}function valueRef(config,name,ref,predicateArg){if(ref==null)return null;if(name==="fill"||name==="stroke"){if(ref.c){return colorRef(config,"hcl",ref.h,ref.c,ref.l)}else if(ref.h||ref.s){return colorRef(config,"hsl",ref.h,ref.s,ref.l)}else if(ref.l||ref.a){return colorRef(config,"lab",ref.l,ref.a,ref.b)}else if(ref.r||ref.g||ref.b){return colorRef(config,"rgb",ref.r,ref.g,ref.b)}}var val=null,scale=null,deps=dependencies(),sgRef=null,fRef=null,sRef=null,tmpl={};if(ref.template!==undefined){val=dl.template.source(ref.template,"tmpl",tmpl);dl.keys(tmpl).forEach(function(k){var f=dl.field(k),a=f.shift();if(a==="parent"||a==="group"){deps.nested.push({parent:a==="parent",group:a==="group",level:1})}else if(a==="datum"){deps.fields.push(f[0])}else{deps.signals.push(a)}})}if(ref.value!==undefined){val=dl.str(ref.value)}if(ref.signal!==undefined){sgRef=dl.field(ref.signal);val="signals["+sgRef.map(dl.str).join("][")+"]";deps.signals.push(sgRef.shift())}if(ref.field!==undefined){ref.field=dl.isString(ref.field)?{datum:ref.field}:ref.field;fRef=fieldRef(ref.field);val=fRef.val;dependencies(deps,fRef)}if(ref.scale!==undefined){sRef=scaleRef(ref.scale);scale=sRef.val;dependencies(deps,sRef);deps.scales.push(ref.scale.name||ref.scale);if(val!==null||ref.band||ref.mult||ref.offset||!predicateArg){val=scale+(ref.band?".rangeBand()":"("+(val!==null?val:"item.datum.data")+")")}else if(predicateArg){val=scale}}val="("+(ref.mult?dl.number(ref.mult)+" * ":"")+val+")"+(ref.offset?" + "+dl.number(ref.offset):"");return deps.val=val,deps}function colorRef(config,type,x,y,z){var xx=x?valueRef(config,"",x):config.color[type][0],yy=y?valueRef(config,"",y):config.color[type][1],zz=z?valueRef(config,"",z):config.color[type][2],deps=dependencies();[xx,yy,zz].forEach(function(v){if(dl.isArray)return;dependencies(deps,v)});var val="(this.d3."+type+"("+[xx.val,yy.val,zz.val].join(",")+') + "")';return deps.val=val,deps}function fieldRef(ref){if(dl.isString(ref)){return{val:dl.field(ref).map(dl.str).join("][")}}var l=ref.level||1,nested=(ref.group||ref.parent)&&l,scope=nested?Array(l).join("group.mark."):"",r=fieldRef(ref.datum||ref.group||ref.parent||ref.signal),val=r.val,deps=dependencies(null,r);if(ref.datum){val="item.datum["+val+"]";deps.fields.push(ref.datum)}else if(ref.group){val=scope+"group["+val+"]";deps.nested.push({level:l,group:true})}else if(ref.parent){val=scope+"group.datum["+val+"]";deps.nested.push({level:l,parent:true})}else if(ref.signal){val="signals["+val+"]";deps.signals.push(dl.field(ref.signal)[0]);deps.reflow=true}return deps.val=val,deps}function scaleRef(ref){var scale=null,fr=null,deps=dependencies();if(dl.isString(ref)){scale=dl.str(ref)}else if(ref.name){scale=dl.isString(ref.name)?dl.str(ref.name):(fr=fieldRef(ref.name)).val}else{scale=(fr=fieldRef(ref)).val}scale="(item.mark._scaleRefs["+scale+"] = 1, group.scale("+scale+"))";if(ref.invert)scale+=".invert";if(fr)fr.nested.forEach(function(g){g.scale=true});return fr?(fr.val=scale,fr):(deps.val=scale,deps)}module.exports=properties}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{datalib:406,"vega-dataflow":710,"vega-logging":776}],834:[function(require,module,exports){var dl=require("datalib"),expr=require("./expr"),SIGNALS=require("vega-dataflow").Dependencies.SIGNALS;var RESERVED=["datum","event","signals","width","height","padding"].concat(dl.keys(expr.codegen.functions));function parseSignals(model,spec){(spec||[]).forEach(function(s){if(RESERVED.indexOf(s.name)!==-1){throw Error('Signal name "'+s.name+'" is a '+"reserved keyword ("+RESERVED.join(", ")+").")}var signal=model.signal(s.name,s.init).verbose(s.verbose);if(s.init&&s.init.expr){s.init.expr=model.expr(s.init.expr);signal.value(exprVal(model,s.init))}if(s.expr){s.expr=model.expr(s.expr);signal.evaluate=function(input){var val=exprVal(model,s),sg=input.signals;if(val!==signal.value()||signal.verbose()){signal.value(val);sg[s.name]=1}return sg[s.name]?input:model.doNotPropagate};signal.dependency(SIGNALS,s.expr.globals);s.expr.globals.forEach(function(dep){model.signal(dep).addListener(signal)})}});return spec}function exprVal(model,spec){var e=spec.expr,v=e.fn();return spec.scale?parseSignals.scale(model,spec,v):v}parseSignals.scale=function scale(model,spec,value,datum,evt){var def=spec.scale,name=def.name||def.signal||def,scope=def.scope,e;if(scope){if(scope.signal){scope=model.signalRef(scope.signal)}else if(dl.isString(scope)){e=def._expr=def._expr||model.expr(scope);scope=e.fn(datum,evt)}}return expr.scale(model,def.invert,name,value,scope)};module.exports=parseSignals},{"./expr":825,datalib:406,"vega-dataflow":710}],835:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),themeVal=require("../util/theme-val"),Model=require("../core/Model"),View=require("../core/View");function parseSpec(spec){var arglen=arguments.length,argidx=2,cb=arguments[arglen-1],model=new Model,viewFactory=View.factory,config;if(arglen>argidx&&dl.isFunction(arguments[arglen-argidx])){viewFactory=arguments[arglen-argidx];++argidx}if(arglen>argidx&&dl.isObject(arguments[arglen-argidx])){model.config(arguments[arglen-argidx])}config=model.config();if(dl.isObject(spec)){parse(spec)}else if(dl.isString(spec)){var opts=dl.extend({url:spec},config.load);dl.json(opts,function(err,spec){if(err)done("SPECIFICATION LOAD FAILED: "+err);else parse(spec)})}else{done("INVALID SPECIFICATION: Must be a valid JSON object or URL.")}function parse(spec){try{spec=dl.duplicate(spec);var parsers=require("./"),width=themeVal(spec,config,"width",500),height=themeVal(spec,config,"height",500),padding=parsers.padding(themeVal(spec,config,"padding")),background=themeVal(spec,config,"background");model.signal("width",width);model.signal("height",height);model.signal("padding",padding);cursor(spec);model.defs({width:width,height:height,padding:padding,viewport:spec.viewport||null,background:parsers.background(background),signals:parsers.signals(model,spec.signals),predicates:parsers.predicates(model,spec.predicates),marks:parsers.marks(model,spec,width,height),data:parsers.data(model,spec.data,done)})}catch(err){done(err)}}function cursor(spec){var signals=spec.signals||(spec.signals=[]),def;signals.some(function(sg){return sg.name==="cursor"?(def=sg,true):false});if(!def)signals.push(def={name:"cursor",streams:[]});def.init=def.init||{};def.streams.unshift({type:"mousemove",expr:"eventItem().cursor === cursor.default ? cursor : {default: eventItem().cursor}"})}function done(err){var view;if(err){log.error(err)}else{view=viewFactory(model.buildIndexes())}if(cb){if(cb.length>1)cb(err,view);else if(!err)cb(view);cb=null}}}module.exports=parseSpec},{"../core/Model":818,"../core/View":819,"../util/theme-val":878,"./":826,datalib:406,"vega-logging":776}],836:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),df=require("vega-dataflow"),selector=require("vega-event-selector"),parseSignals=require("./signals");var GATEKEEPER="_vgGATEKEEPER",EVALUATOR="_vgEVALUATOR";var vgEvent={getItem:function(){return this.item},getGroup:function(name){var group=name?this.name[name]:this.group,mark=group&&group.mark,interactive=mark&&(mark.interactive||mark.interactive===undefined);return interactive?group:{}},getXY:function(item){var p={x:this.x,y:this.y};if(typeof item==="string"){item=this.name[item]}for(;item;item=item.mark&&item.mark.group){p.x-=item.x||0;p.y-=item.y||0}return p},getX:function(item){return this.getXY(item).x},getY:function(item){return this.getXY(item).y}};function parseStreams(view){var model=view.model(),trueFn=model.expr("true"),falseFn=model.expr("false"),spec=model.defs().signals,registry={handlers:{},nodes:{}},internal=dl.duplicate(registry),external=dl.duplicate(registry);dl.array(spec).forEach(function(sig){var signal=model.signal(sig.name);if(sig.expr)return;dl.array(sig.streams).forEach(function(stream){var sel=selector.parse(stream.type),exp=model.expr(stream.expr);mergedStream(signal,sel,exp,stream)})});dl.keys(internal.handlers).forEach(function(type){view.on(type,function(evt,item){evt.preventDefault();extendEvent(evt,item);fire(internal,type,item&&item.datum||{},item&&item.mark&&item.mark.group&&item.mark.group.datum||{},evt)})});dl.keys(external.handlers).forEach(function(type){if(typeof window==="undefined")return;var h=external.handlers[type],t=type.split(":"),elt=t[0]==="window"?[window]:window.document.querySelectorAll(t[0]);function handler(evt){extendEvent(evt);fire(external,type,d3.select(this).datum(),this.parentNode&&d3.select(this.parentNode).datum(),evt)}for(var i=0;i<elt.length;++i){elt[i].addEventListener(t[1],handler)}h.elements=elt;h.listener=handler});external.detach=function(){dl.keys(external.handlers).forEach(function(type){var h=external.handlers[type],t=type.split(":"),elt=dl.array(h.elements);for(var i=0;i<elt.length;++i){elt[i].removeEventListener(t[1],h.listener)}})};return external.detach;function extendEvent(evt,item){var mouse=d3.mouse((d3.event=evt,view.renderer().scene())),pad=view.padding(),names={},mark,group,i;if(item){mark=item.mark;group=mark.marktype==="group"?item:mark.group;for(i=item;i!=null;i=i.mark.group){if(i.mark.def.name){names[i.mark.def.name]=i}}}names.root=view.model().scene().items[0];evt.vg=Object.create(vgEvent);evt.vg.group=group;evt.vg.item=item||{};evt.vg.name=names;evt.vg.x=mouse[0]-pad.left;evt.vg.y=mouse[1]-pad.top}function fire(registry,type,datum,parent,evt){var handlers=registry.handlers[type],node=registry.nodes[type],cs=df.ChangeSet.create(null,true),filtered=false,val,i,n,h;function invoke(f){return!f.fn(datum,parent,evt)}for(i=0,n=handlers.length;i<n;++i){h=handlers[i];filtered=h.filters.some(invoke);if(filtered)continue;val=h.exp.fn(datum,parent,evt);if(h.spec.scale){val=parseSignals.scale(model,h.spec,val,datum,evt)}if(val!==h.signal.value()||h.signal.verbose()){h.signal.value(val);cs.signals[h.signal.name()]=1}}model.propagate(cs,node)}function mergedStream(sig,selector,exp,spec){selector.forEach(function(s){if(s.event)domEvent(sig,s,exp,spec);else if(s.signal)signal(sig,s,exp,spec);else if(s.start)orderedStream(sig,s,exp,spec);else if(s.stream){if(s.filters)s.stream.forEach(function(ms){ms.filters=dl.array(ms.filters).concat(s.filters)});mergedStream(sig,s.stream,exp,spec)}})}function domEvent(sig,selector,exp,spec){var evt=selector.event,name=selector.name,mark=selector.mark,target=selector.target,filters=dl.array(selector.filters),registry=target?external:internal,type=target?target+":"+evt:evt,node=registry.nodes[type]||(registry.nodes[type]=new df.Node(model)),handlers=registry.handlers[type]||(registry.handlers[type]=[]);if(name){filters.push('!!event.vg.name["'+name+'"]')}else if(mark){filters.push("event.vg.item.mark && event.vg.item.mark.marktype==="+dl.str(mark))}handlers.push({signal:sig,exp:exp,spec:spec,filters:filters.map(function(f){return model.expr(f)})});node.addListener(sig)}function signal(sig,selector,exp,spec){var n=sig.name(),s=model.signal(n+EVALUATOR,null);s.evaluate=function(input){if(!input.signals[selector.signal])return model.doNotPropagate;var val=exp.fn();if(spec.scale){val=parseSignals.scale(model,spec,val)}if(val!==sig.value()||sig.verbose()){sig.value(val);input.signals[n]=1;input.reflow=true}return input};s.dependency(df.Dependencies.SIGNALS,selector.signal);s.addListener(sig);model.signal(selector.signal).addListener(s)}function orderedStream(sig,selector,exp,spec){var name=sig.name(),gk=name+GATEKEEPER,middle=selector.middle,filters=middle.filters||(middle.filters=[]),gatekeeper=model.signal(gk)||model.signal(gk,false);mergedStream(gatekeeper,[selector.start],trueFn,{});mergedStream(gatekeeper,[selector.end],falseFn,{});filters.push(gatekeeper.name());mergedStream(sig,[selector.middle],exp,spec)}}module.exports=parseStreams}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./signals":834,datalib:406,"vega-dataflow":710,"vega-event-selector":711}],837:[function(require,module,exports){var dl=require("datalib"),transforms=require("../transforms/index");function parseTransforms(model,def){var transform=transforms[def.type],tx;if(!transform)throw new Error('"'+def.type+'" is not a valid transformation');tx=new transform(model);if(def.output)tx.output(def.output);dl.keys(def).forEach(function(k){if(k==="type"||k==="output")return;tx.param(k,def[k])});return tx}module.exports=parseTransforms},{"../transforms/index":874,datalib:406}],838:[function(require,module,exports){var dl=require("datalib"),df=require("vega-dataflow"),scene=require("vega-scenegraph"),Node=df.Node,log=require("vega-logging"),bound=scene.bound,Bounds=scene.Bounds,Encoder=require("./Encoder");function Bounder(graph,mark){this._mark=mark;return Node.prototype.init.call(this,graph).router(true).reflows(true).mutates(true)}var proto=Bounder.prototype=new Node;proto.evaluate=function(input){log.debug(input,["bounds",this._mark.marktype]);var mark=this._mark,type=mark.marktype,isGrp=type==="group",items=mark.items,hasLegends=dl.array(mark.def.legends).length>0,bounds=mark.bounds,rebound=!bounds||input.rem.length,i,ilen,j,jlen,group,legend;if(type==="line"||type==="area"){bound.mark(mark,null,isGrp&&!hasLegends)}else{input.add.forEach(function(item){bound.item(item);rebound=rebound||bounds&&!bounds.encloses(item.bounds)});input.mod.forEach(function(item){rebound=rebound||bounds&&bounds.alignsWith(item.bounds);bound.item(item)});if(rebound){bounds=mark.bounds&&mark.bounds.clear()||(mark.bounds=new Bounds);for(i=0,ilen=items.length;i<ilen;++i)bounds.union(items[i].bounds)}}if(isGrp&&hasLegends){for(i=0,ilen=items.length;i<ilen;++i){group=items[i];group._legendPositions=null;for(j=0,jlen=group.legendItems.length;j<jlen;++j){legend=group.legendItems[j];Encoder.update(this._graph,input.trans,"legendPosition",legend.items,input.dirty);bound.mark(legend,null,false)}}bound.mark(mark,null,true)}return df.ChangeSet.create(input,true)};module.exports=Bounder},{"./Encoder":840,datalib:406,"vega-dataflow":710,"vega-logging":776,"vega-scenegraph":777}],839:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),Item=require("vega-scenegraph").Item,df=require("vega-dataflow"),Node=df.Node,Deps=df.Dependencies,Tuple=df.Tuple,ChangeSet=df.ChangeSet,Sentinel={},Encoder=require("./Encoder"),Bounder=require("./Bounder"),parseData=require("../parse/data");function Builder(){return arguments.length?this.init.apply(this,arguments):this}var Status=Builder.STATUS={ENTER:"enter",UPDATE:"update",EXIT:"exit"};var CONNECTED=1,DISCONNECTED=2;var proto=Builder.prototype=new Node;proto.init=function(graph,def,mark,parent,parent_id,inheritFrom){Node.prototype.init.call(this,graph).router(true).collector(true);this._def=def;this._mark=mark;this._from=(def.from?def.from.data:null)||inheritFrom;this._ds=dl.isString(this._from)?graph.data(this._from):null;this._map={};this._status=null;mark.def=def;mark.marktype=def.type;mark.interactive=def.interactive!==false;mark.items=[];if(dl.isValid(def.name))mark.name=def.name;this._parent=parent;this._parent_id=parent_id;if(def.from&&(def.from.mark||def.from.transform||def.from.modify)){inlineDs.call(this)}this._isSuper=this._def.type!=="group";this._encoder=new Encoder(this._graph,this._mark,this);this._bounder=new Bounder(this._graph,this._mark);this._output=null;if(this._ds){this._encoder.dependency(Deps.DATA,this._from)}this.dependency(Deps.DATA,this._encoder.dependency(Deps.DATA));this.dependency(Deps.SCALES,this._encoder.dependency(Deps.SCALES));this.dependency(Deps.SIGNALS,this._encoder.dependency(Deps.SIGNALS));return this};function inlineDs(){var from=this._def.from,geom=from.mark,src,name,spec,sibling,output,input,node;if(geom){sibling=this.sibling(geom);src=sibling._isSuper?sibling:sibling._bounder;name=["vg",this._parent_id,geom,src.listeners(true).length].join("_");spec={name:name,transform:from.transform,modify:from.modify}}else{src=this._graph.data(this._from);if(!src)throw Error('Data source "'+this._from+'" is not defined.');name=["vg",this._from,this._def.type,src.listeners(true).length].join("_");spec={name:name,source:this._from,transform:from.transform,modify:from.modify}}this._from=name;this._ds=parseData.datasource(this._graph,spec);if(geom){node=new Node(this._graph).addListener(this._ds.listener());node.evaluate=function(input){var out=ChangeSet.create(input),sout=sibling._output;out.add=sout.add;out.mod=sout.mod;out.rem=sout.rem;return out};src.addListener(node)}else{output=this._ds.source().last();input=ChangeSet.create(output);input.add=output.add;input.mod=output.mod;input.rem=output.rem;input.stamp=null;this._graph.propagate(input,this._ds.listener(),output.stamp)}}proto.ds=function(){return this._ds};proto.parent=function(){return this._parent};proto.encoder=function(){return this._encoder};proto.pipeline=function(){return[this]};proto.connect=function(){var builder=this;this._graph.connect(this.pipeline());this._encoder._scales.forEach(function(s){if(!(s=builder._parent.scale(s)))return;s.addListener(builder)});if(this._parent){if(this._isSuper)this.addListener(this._parent._collector);else this._bounder.addListener(this._parent._collector)}return this._status=CONNECTED,this};proto.disconnect=function(){var builder=this;if(!this._listeners.length)return this;function disconnectScales(scales){for(var i=0,len=scales.length,s;i<len;++i){if(!(s=builder._parent.scale(scales[i])))continue;s.removeListener(builder)}}Node.prototype.disconnect.call(this);this._graph.disconnect(this.pipeline());disconnectScales(this._encoder._scales);disconnectScales(dl.keys(this._mark._scaleRefs));return this._status=DISCONNECTED,this};proto.sibling=function(name){return this._parent.child(name,this._parent_id)};proto.evaluate=function(input){log.debug(input,["building",this._from||this._def.from,this._def.type]);var self=this,def=this._mark.def,props=def.properties||{},update=props.update||{},output=ChangeSet.create(input),fullUpdate,fcs,data,name;if(this._ds){data=output.data[name=this._ds.name()];output.data[name]=null;fullUpdate=this._encoder.reevaluate(output);output.data[name]=data;fcs=this._ds.last();if(!fcs)throw Error("Builder evaluated before backing DataSource.");if(fcs.stamp>this._stamp){join.call(this,fcs,output,this._ds.values(),true,fullUpdate)}else if(fullUpdate){output.mod=this._mark.items.slice()}}else{data=dl.isFunction(this._def.from)?this._def.from():[Sentinel];join.call(this,input,output,data)}this._output=output=this._graph.evaluate(output,this._encoder);if(update.nested&&update.nested.length&&this._status===CONNECTED){dl.keys(this._mark._scaleRefs).forEach(function(s){var scale=self._parent.scale(s);if(!scale)return;scale.addListener(self);self.dependency(Deps.SCALES,s);self._encoder.dependency(Deps.SCALES,s)})}if(this._isSuper){output.mod=output.mod.filter(function(x){return x._dirty});output=this._graph.evaluate(output,this._bounder)}return output};function newItem(){var item=Tuple.ingest(new Item(this._mark));if(this._def.width)Tuple.set(item,"width",this._def.width);if(this._def.height)Tuple.set(item,"height",this._def.height);return item}function join(input,output,data,ds,fullUpdate){var keyf=keyFunction(this._def.key||(ds?"_id":null)),prev=this._mark.items||[],rem=ds?input.rem:prev,mod=Tuple.idMap(!ds||fullUpdate?data:input.mod),next=[],i,key,len,item,datum,enter,diff;for(i=0,len=rem.length;i<len;++i){item=rem[i]===prev[i]?prev[i]:keyf?this._map[keyf(rem[i])]:rem[i];item.status=Status.EXIT}for(i=0,len=data.length;i<len;++i){datum=data[i];item=keyf?this._map[key=keyf(datum)]:prev[i];enter=item?false:(item=newItem.call(this),true);item.status=enter?Status.ENTER:Status.UPDATE;diff=!enter&&item.datum!==datum;item.datum=datum;if(keyf){Tuple.set(item,"key",key);this._map[key]=item}if(enter){output.add.push(item)}else if(diff||mod[datum._id]){output.mod.push(item)}next.push(item)}for(i=0,len=rem.length;i<len;++i){item=rem[i]===prev[i]?prev[i]:keyf?this._map[key=keyf(rem[i])]:rem[i];if(item.status===Status.EXIT){item._dirty=true;input.dirty.push(item);next.push(item);output.rem.push(item);if(keyf)this._map[key]=null}}return this._mark.items=next,output}function keyFunction(key){if(key==null)return null;var f=dl.array(key).map(dl.accessor);return function(d){for(var s="",i=0,n=f.length;i<n;++i){if(i>0)s+="|";s+=String(f[i](d))}return s}}module.exports=Builder},{"../parse/data":824,"./Bounder":838,"./Encoder":840,datalib:406,"vega-dataflow":710,"vega-logging":776,"vega-scenegraph":777}],840:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),df=require("vega-dataflow"),Node=df.Node,Deps=df.Dependencies,bound=require("vega-scenegraph").bound;var EMPTY={};function Encoder(graph,mark,builder){var props=mark.def.properties||{},enter=props.enter,update=props.update,exit=props.exit;Node.prototype.init.call(this,graph);this._mark=mark;this._builder=builder;var s=this._scales=[];if(enter)s.push.apply(s,enter.scales);if(update){this.dependency(Deps.DATA,update.data);this.dependency(Deps.SIGNALS,update.signals);this.dependency(Deps.FIELDS,update.fields);this.dependency(Deps.SCALES,update.scales);s.push.apply(s,update.scales)}if(exit)s.push.apply(s,exit.scales);return this.mutates(true)}var proto=Encoder.prototype=new Node;proto.evaluate=function(input){log.debug(input,["encoding",this._mark.def.type]);var graph=this._graph,props=this._mark.def.properties||{},items=this._mark.items,enter=props.enter,update=props.update,exit=props.exit,dirty=input.dirty,preds=graph.predicates(),req=input.request,group=this._mark.group,guide=group&&(group.mark.axis||group.mark.legend),db=EMPTY,sg=EMPTY,i,len,item,prop;if(req&&!guide){if((prop=props[req])&&input.mod.length){db=prop.data?graph.values(Deps.DATA,prop.data):null;sg=prop.signals?graph.values(Deps.SIGNALS,prop.signals):null;for(i=0,len=input.mod.length;i<len;++i){item=input.mod[i];encode.call(this,prop,item,input.trans,db,sg,preds,dirty)}}return input}db=values(Deps.DATA,graph,input,props);sg=values(Deps.SIGNALS,graph,input,props);for(i=0,len=input.rem.length;i<len;++i){item=input.rem[i];if(exit)encode.call(this,exit,item,input.trans,db,sg,preds,dirty);if(input.trans&&!exit)input.trans.interpolate(item,EMPTY);else if(!input.trans)items.pop()}var update_status=require("./Builder").STATUS.UPDATE;for(i=0,len=input.add.length;i<len;++i){item=input.add[i];if(enter)encode.call(this,enter,item,input.trans,db,sg,preds,dirty);if(update)encode.call(this,update,item,input.trans,db,sg,preds,dirty);item.status=update_status}if(update){for(i=0,len=input.mod.length;i<len;++i){item=input.mod[i];encode.call(this,update,item,input.trans,db,sg,preds,dirty)}}return input};function values(type,graph,input,props){var p,x,o,add=input.add.length;if((p=props.enter)&&(x=p[type]).length&&add){o=graph.values(type,x,o=o||{})}if((p=props.exit)&&(x=p[type]).length&&input.rem.length){o=graph.values(type,x,o=o||{})}if((p=props.update)&&(x=p[type]).length&&(add||input.mod.length)){o=graph.values(type,x,o=o||{})}return o||EMPTY}function encode(prop,item,trans,db,sg,preds,dirty){var enc=prop.encode,wasDirty=item._dirty,isDirty=enc.call(enc,item,item.mark.group||item,trans,db,sg,preds);item._dirty=isDirty||wasDirty;if(isDirty&&!wasDirty)dirty.push(item)}proto.reevaluate=function(pulse){var def=this._mark.def,props=def.properties||{},reeval=dl.isFunction(def.from)||def.orient||pulse.request||Node.prototype.reevaluate.call(this,pulse);return reeval||(props.update?nestedRefs.call(this):false)};function nestedRefs(){var refs=this._mark.def.properties.update.nested,parent=this._builder,level=0,i=0,len=refs.length,ref,ds,stamp;for(;i<len;++i){ref=refs[i];if(ref.scale)continue;for(;level<ref.level;++level){parent=parent.parent();ds=parent.ds()}stamp=(ref.group?parent.encoder():ds.last())._stamp;if(stamp>this._stamp)return true}return false}Encoder.update=function(graph,trans,request,items,dirty){items=dl.array(items);var preds=graph.predicates(),db=graph.values(Deps.DATA),sg=graph.values(Deps.SIGNALS),i,len,item,props,prop;for(i=0,len=items.length;i<len;++i){item=items[i];props=item.mark.def.properties;prop=props&&props[request];if(prop){encode.call(null,prop,item,trans,db,sg,preds,dirty);bound.item(item)}}};module.exports=Encoder},{"./Builder":839,datalib:406,"vega-dataflow":710,"vega-logging":776,"vega-scenegraph":777}],841:[function(require,module,exports){var dl=require("datalib"),df=require("vega-dataflow"),Node=df.Node,Deps=df.Dependencies,Tuple=df.Tuple,Collector=df.Collector,log=require("vega-logging"),Builder=require("./Builder"),Scale=require("./Scale"),parseAxes=require("../parse/axes"),parseLegends=require("../parse/legends");function GroupBuilder(){this._children={};this._scaler=null;this._recursor=null;this._scales={};this.scale=scale.bind(this);return arguments.length?this.init.apply(this,arguments):this}var Types=GroupBuilder.TYPES={GROUP:"group",MARK:"mark",AXIS:"axis",LEGEND:"legend"};var proto=GroupBuilder.prototype=new Builder;proto.init=function(graph,def){var builder=this,name;this._scaler=new Node(graph);(def.scales||[]).forEach(function(s){s=builder.scale(name=s.name,new Scale(graph,s,builder));builder.scale(name+":prev",s);builder._scaler.addListener(s)});this._recursor=new Node(graph);this._recursor.evaluate=recurse.bind(this);var scales=(def.axes||[]).reduce(function(acc,x){acc[x.scale]=1;return acc},{});scales=(def.legends||[]).reduce(function(acc,x){acc[x.size||x.shape||x.fill||x.stroke||x.opacity]=1;return acc},scales);this._recursor.dependency(Deps.SCALES,dl.keys(scales));this._collector=new Collector(graph);return Builder.prototype.init.apply(this,arguments)};proto.evaluate=function(){var output=Builder.prototype.evaluate.apply(this,arguments),model=this._graph,builder=this,scales=this._scales,items=this._mark.items;if(output.mod.length<items.length){var fullUpdate=dl.keys(scales).some(function(s){return scales[s].reevaluate(output)});if(!fullUpdate&&this._def.axes){fullUpdate=this._def.axes.reduce(function(acc,a){return acc||output.scales[a.scale]},false)}if(!fullUpdate&&this._def.legends){fullUpdate=this._def.legends.reduce(function(acc,l){return acc||output.scales[l.size||l.shape||l.fill||l.stroke]},false)}if(fullUpdate){output.mod=output.mod.concat(Tuple.idFilter(items,output.mod,output.add,output.rem))}}output.add.forEach(function(group){buildGroup.call(builder,output,group)});output.rem.forEach(function(group){model.group(group._id,null)});return output};proto.pipeline=function(){return[this,this._scaler,this._recursor,this._collector,this._bounder]};proto.disconnect=function(){var builder=this;dl.keys(builder._children).forEach(function(group_id){builder._children[group_id].forEach(function(c){builder._recursor.removeListener(c.builder);c.builder.disconnect()})});builder._children={};return Builder.prototype.disconnect.call(this)};proto.child=function(name,group_id){var children=this._children[group_id],i=0,len=children.length,child;for(;i<len;++i){child=children[i];if(child.type==Types.MARK&&child.builder._def.name==name)break}return child.builder};function recurse(input){var builder=this,hasMarks=dl.array(this._def.marks).length>0,hasAxes=dl.array(this._def.axes).length>0,hasLegends=dl.array(this._def.legends).length>0,i,j,c,len,group,pipeline,def,inline=false;for(i=0,len=input.add.length;i<len;++i){group=input.add[i];if(hasMarks)buildMarks.call(this,input,group);if(hasAxes)buildAxes.call(this,input,group);if(hasLegends)buildLegends.call(this,input,group)}for(i=input.add.length-1;i>=0;--i){group=input.add[i];for(j=this._children[group._id].length-1;j>=0;--j){c=this._children[group._id][j];c.builder.connect();pipeline=c.builder.pipeline();def=c.builder._def;inline=def.type!==Types.GROUP;inline=inline&&this._graph.data(c.from)!==undefined;inline=inline&&pipeline[pipeline.length-1].listeners().length===1;inline=inline&&(def.from&&!def.from.mark);c.inline=inline;if(inline)this._graph.evaluate(input,c.builder);else this._recursor.addListener(c.builder)}}function removeTemp(c){if(c.type==Types.MARK&&!c.inline&&builder._graph.data(c.from)!==undefined){builder._recursor.removeListener(c.builder)}}function updateAxis(a){var scale=a.scale();if(!input.scales[scale.scaleName])return;a.reset().def()}function updateLegend(l){var scale=l.size()||l.shape()||l.fill()||l.stroke()||l.opacity();if(!input.scales[scale.scaleName])return;l.reset().def()}for(i=0,len=input.mod.length;i<len;++i){group=input.mod[i];if(hasMarks)builder._children[group._id].forEach(removeTemp);if(hasAxes)group.axes.forEach(updateAxis);if(hasLegends)group.legends.forEach(updateLegend)}function disconnectChildren(c){builder._recursor.removeListener(c.builder);c.builder.disconnect()}for(i=0,len=input.rem.length;i<len;++i){group=input.rem[i];builder._children[group._id].forEach(disconnectChildren);delete builder._children[group._id]}return input}function scale(name,x){var group=this,s=null;if(arguments.length===2)return group._scales[name]=x,x;while(s==null){s=group._scales[name];group=group.mark?group.mark.group:group._parent;if(!group)break}return s}function buildGroup(input,group){log.debug(input,["building group",group._id]);group._scales=group._scales||{};group.scale=scale.bind(group);group.items=group.items||[];this._children[group._id]=this._children[group._id]||[];group.axes=group.axes||[];group.axisItems=group.axisItems||[];group.legends=group.legends||[];group.legendItems=group.legendItems||[];this._graph.group(group._id,group)}function buildMarks(input,group){log.debug(input,["building children marks #"+group._id]);var marks=this._def.marks,mark,from,inherit,i,len,b;for(i=0,len=marks.length;i<len;++i){mark=marks[i];from=mark.from||{};inherit=group.datum._facetID;group.items[i]={group:group,_scaleRefs:{}};b=mark.type===Types.GROUP?new GroupBuilder:new Builder;b.init(this._graph,mark,group.items[i],this,group._id,inherit);this._children[group._id].push({builder:b,from:from.data||(from.mark?"vg_"+group._id+"_"+from.mark:inherit),type:Types.MARK})}}function buildAxes(input,group){var axes=group.axes,axisItems=group.axisItems,builder=this;parseAxes(this._graph,this._def.axes,axes,group);axes.forEach(function(a,i){var scale=builder._def.axes[i].scale,def=a.def(),b=null;axisItems[i]={group:group,axis:a,layer:def.layer};b=def.type===Types.GROUP?new GroupBuilder:new Builder;b.init(builder._graph,def,axisItems[i],builder).dependency(Deps.SCALES,scale);builder._children[group._id].push({builder:b,type:Types.AXIS,scale:scale})})}function buildLegends(input,group){var legends=group.legends,legendItems=group.legendItems,builder=this;parseLegends(this._graph,this._def.legends,legends,group);legends.forEach(function(l,i){var scale=l.size()||l.shape()||l.fill()||l.stroke()||l.opacity(),def=l.def(),b=null;legendItems[i]={group:group,legend:l};b=def.type===Types.GROUP?new GroupBuilder:new Builder;b.init(builder._graph,def,legendItems[i],builder).dependency(Deps.SCALES,scale);builder._children[group._id].push({builder:b,type:Types.LEGEND,scale:scale})})}module.exports=GroupBuilder},{"../parse/axes":822,"../parse/legends":827,"./Builder":839,"./Scale":842,datalib:406,"vega-dataflow":710,"vega-logging":776}],842:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),df=require("vega-dataflow"),log=require("vega-logging"),Node=df.Node,Deps=df.Dependencies,Aggregate=require("../transforms/Aggregate");var Properties={width:1,height:1};var Types={LINEAR:"linear",ORDINAL:"ordinal",LOG:"log",POWER:"pow",SQRT:"sqrt",TIME:"time",TIME_UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold"};var DataRef={DOMAIN:"domain",RANGE:"range",COUNT:"count",GROUPBY:"groupby",MIN:"min",MAX:"max",VALUE:"value",ASC:"asc",DESC:"desc"};function Scale(graph,def,parent){this._def=def;this._parent=parent;this._updated=false;return Node.prototype.init.call(this,graph).reflows(true)}var proto=Scale.prototype=new Node;proto.evaluate=function(input){var self=this,fn=function(group){scale.call(self,group)};this._updated=false;input.add.forEach(fn);input.mod.forEach(fn);if(this._updated){input.scales[this._def.name]=1;log.debug(input,["scale",this._def.name])}return df.ChangeSet.create(input,true)};proto.dependency=function(type,deps){if(arguments.length==2){var method=type===Deps.DATA?"data":"signal";deps=dl.array(deps);for(var i=0,len=deps.length;i<len;++i){this._graph[method](deps[i]).addListener(this._parent)}}return Node.prototype.dependency.call(this,type,deps)};function scale(group){var name=this._def.name,prev=name+":prev",s=instance.call(this,group.scale(name)),m=s.type===Types.ORDINAL?ordinal:quantitative,rng=range.call(this,group);m.call(this,s,rng,group);group.scale(name,s);group.scale(prev,group.scale(prev)||s);return s}function instance(scale){var config=this._graph.config(),type=this._def.type||Types.LINEAR;if(!scale||type!==scale.type){var ctor=config.scale[type]||d3.scale[type];if(!ctor)throw Error("Unrecognized scale type: "+type);(scale=ctor()).type=scale.type||type;scale.scaleName=this._def.name;scale._prev={}}return scale}function ordinal(scale,rng,group){var def=this._def,prev=scale._prev,dataDrivenRange=false,pad=signal.call(this,def.padding)||0,outer=def.outerPadding==null?pad:signal.call(this,def.outerPadding),points=def.points&&signal.call(this,def.points),round=signal.call(this,def.round)||def.round==null,domain,str,spatial=true;if(dl.isObject(def.range)&&!dl.isArray(def.range)){dataDrivenRange=true;rng=dataRef.call(this,DataRef.RANGE,def.range,scale,group)}domain=dataRef.call(this,DataRef.DOMAIN,def.domain,scale,group);if(domain&&!dl.equal(prev.domain,domain)){scale.domain(domain);prev.domain=domain;this._updated=true}if(!dl.equal(prev.range,rng)){if(def.bandSize){var bw=signal.call(this,def.bandSize),len=domain.length,space=def.points?pad*bw:pad*bw*(len-1)+2*outer,start;if(rng[0]>rng[1]){start=rng[1]||0;rng=[start+(bw*len+space),start]}else{start=rng[0]||0;rng=[start,start+(bw*len+space)]}if(def.reverse)rng=rng.reverse()}str=typeof rng[0]==="string";if(str||rng.length>2||rng.length===1||dataDrivenRange){scale.range(rng);spatial=false}else if(points&&round){scale.rangeRoundPoints(rng,pad)}else if(points){scale.rangePoints(rng,pad)}else if(round){scale.rangeRoundBands(rng,pad,outer)}else{scale.rangeBands(rng,pad,outer)}prev.range=rng;this._updated=true}if(!scale.invert&&spatial)invertOrdinal(scale)}var bisect=d3.bisector(dl.numcmp).right,findAsc=function(a,x){return bisect(a,x)-1},findDsc=d3.bisector(function(a,b){return-1*dl.numcmp(a,b)}).left;function invertOrdinal(scale){scale.invert=function(x,y){var rng=scale.range(),asc=rng[0]<rng[1],find=asc?findAsc:findDsc;if(arguments.length===1){if(!dl.isNumber(x)){throw Error("Ordinal scale inversion is only supported for numeric input ("+x+").")}return scale.domain()[find(rng,x)]}else if(arguments.length===2){if(!dl.isNumber(x)||!dl.isNumber(y)){throw Error("Extents to ordinal invert are not numbers ("+x+", "+y+").")}var domain=scale.domain(),a=find(rng,x),b=find(rng,y),n=rng.length-1,r;if(b<a){r=a;a=b;b=a}if(a<0)a=0;if(b>n)b=n;return(asc?dl.range(a,b+1):dl.range(b,a-1,-1)).map(function(i){return domain[i]})}}}function quantitative(scale,rng,group){var def=this._def,prev=scale._prev,round=signal.call(this,def.round),exponent=signal.call(this,def.exponent),clamp=signal.call(this,def.clamp),nice=signal.call(this,def.nice),domain,interval;domain=def.type===Types.QUANTILE?dataRef.call(this,DataRef.DOMAIN,def.domain,scale,group):domainMinMax.call(this,scale,group);if(domain&&!dl.equal(prev.domain,domain)){scale.domain(domain);prev.domain=domain;this._updated=true}if(signal.call(this,def.range)==="height")rng=rng.reverse();if(rng&&!dl.equal(prev.range,rng)){scale[round&&scale.rangeRound?"rangeRound":"range"](rng);prev.range=rng;this._updated=true}if(exponent&&def.type===Types.POWER)scale.exponent(exponent);if(clamp)scale.clamp(true);if(nice){if(def.type===Types.TIME){interval=d3.time[nice];if(!interval)log.error("Unrecognized interval: "+interval);scale.nice(interval)}else{scale.nice()}}}function isUniques(scale){return scale.type===Types.ORDINAL||scale.type===Types.QUANTILE}function getRefs(def){return def.fields||dl.array(def)}function inherits(refs){return refs.some(function(r){if(!r.data)return true;return r.data&&dl.array(r.field).some(function(f){return f.parent})})}function getFields(ref,group){return dl.array(ref.field).map(function(f){return f.parent?dl.accessor(f.parent)(group.datum):f})}function aggrType(def,scale){var refs=getRefs(def);if(refs.length==1&&dl.array(refs[0].field).length==1){return Aggregate.TYPES.TUPLE}if(!isUniques(scale))return Aggregate.TYPES.VALUE;if(!dl.isObject(def.sort))return Aggregate.TYPES.VALUE;return Aggregate.TYPES.MULTI}function getCache(which,def,scale,group){var refs=getRefs(def),inherit=inherits(refs),atype=aggrType(def,scale),uniques=isUniques(scale),sort=def.sort,ck="_"+which,fields=getFields(refs[0],group);if(scale[ck]||this[ck])return scale[ck]||this[ck];var cache=new Aggregate(this._graph).type(atype),groupby,summarize;if(inherit){scale[ck]=cache}else{this[ck]=cache}if(uniques){if(atype===Aggregate.TYPES.VALUE){groupby=[{name:DataRef.GROUPBY,get:dl.identity}];summarize={"*":DataRef.COUNT}}else if(atype===Aggregate.TYPES.TUPLE){groupby=[{name:DataRef.GROUPBY,get:dl.$(fields[0])}];summarize=dl.isObject(sort)?[{field:DataRef.VALUE,get:dl.$(sort.field),ops:[sort.op]}]:{"*":DataRef.COUNT}}else{groupby=DataRef.GROUPBY;summarize=[{field:DataRef.VALUE,ops:[sort.op]}]}}else{groupby=[];summarize=[{field:DataRef.VALUE,get:atype==Aggregate.TYPES.TUPLE?dl.$(fields[0]):dl.identity,ops:[DataRef.MIN,DataRef.MAX],as:[DataRef.MIN,DataRef.MAX]}]}cache.param("groupby",groupby).param("summarize",summarize);return cache._lastUpdate=-1,cache}function dataRef(which,def,scale,group){if(def==null){return[]}if(dl.isArray(def))return def.map(signal.bind(this));var self=this,graph=this._graph,refs=getRefs(def),inherit=inherits(refs),atype=aggrType(def,scale),cache=getCache.apply(this,arguments),sort=def.sort,uniques=isUniques(scale),i,rlen,j,flen,ref,fields,field,data,from,cmp;function addDep(s){self.dependency(Deps.SIGNALS,s)}if(inherit||!inherit&&cache._lastUpdate<this._stamp){for(i=0,rlen=refs.length;i<rlen;++i){ref=refs[i];from=ref.data||group.datum._facetID;data=graph.data(from).last();if(data.stamp<=this._stamp)continue;fields=getFields(ref,group);for(j=0,flen=fields.length;j<flen;++j){field=fields[j];if(atype===Aggregate.TYPES.VALUE){cache.accessors(null,field)}else if(atype===Aggregate.TYPES.MULTI){cache.accessors(field,ref.sort||sort.field)}cache.evaluate(data)}this.dependency(Deps.DATA,from);cache.dependency(Deps.SIGNALS).forEach(addDep)}cache._lastUpdate=this._stamp;data=cache.aggr().result();if(uniques){if(dl.isObject(sort)){cmp=sort.op+"_"+DataRef.VALUE;cmp=dl.comparator(cmp)}else if(sort===true){cmp=dl.comparator(DataRef.GROUPBY)}if(cmp)data=data.sort(cmp);cache._values=data.map(function(d){return d[DataRef.GROUPBY]})}else{data=data[0];cache._values=!dl.isValid(data)?[]:[data[DataRef.MIN],data[DataRef.MAX]]}}return cache._values}function signal(v){if(!v||!v.signal)return v;var s=v.signal,ref;this.dependency(Deps.SIGNALS,(ref=dl.field(s))[0]);return this._graph.signalRef(ref)}function domainMinMax(scale,group){var def=this._def,domain=[null,null],s,z;if(def.domain!==undefined){domain=!dl.isObject(def.domain)?domain:dataRef.call(this,DataRef.DOMAIN,def.domain,scale,group)}z=domain.length-1;if(def.domainMin!==undefined){if(dl.isObject(def.domainMin)){if(def.domainMin.signal){domain[0]=dl.isValid(s=signal.call(this,def.domainMin))?s:domain[0]}else{domain[0]=dataRef.call(this,DataRef.DOMAIN+DataRef.MIN,def.domainMin,scale,group)[0]}}else{domain[0]=def.domainMin}}if(def.domainMax!==undefined){if(dl.isObject(def.domainMax)){if(def.domainMax.signal){domain[z]=dl.isValid(s=signal.call(this,def.domainMax))?s:domain[z]}else{domain[z]=dataRef.call(this,DataRef.DOMAIN+DataRef.MAX,def.domainMax,scale,group)[1]}}else{domain[z]=def.domainMax}}if(def.type!==Types.LOG&&def.type!==Types.TIME&&def.type!==Types.TIME_UTC&&(def.zero||def.zero===undefined)){domain[0]=Math.min(0,domain[0]);domain[z]=Math.max(0,domain[z])}return domain}function range(group){var def=this._def,config=this._graph.config(),rangeVal=signal.call(this,def.range),rng=[null,null];if(rangeVal!==undefined){if(typeof rangeVal==="string"){if(Properties[rangeVal]){rng=[0,group[rangeVal]]}else if(config.range[rangeVal]){rng=config.range[rangeVal]}else{log.error("Unrecogized range: "+rangeVal);return rng}}else if(dl.isArray(rangeVal)){rng=dl.duplicate(rangeVal).map(signal.bind(this))}else if(dl.isObject(rangeVal)){return null}else{rng=[0,rangeVal]}}if(def.rangeMin!==undefined){rng[0]=def.rangeMin.signal?signal.call(this,def.rangeMin):def.rangeMin}if(def.rangeMax!==undefined){rng[rng.length-1]=def.rangeMax.signal?signal.call(this,def.rangeMax):def.rangeMax}if(def.reverse!==undefined){var rev=signal.call(this,def.reverse);if(dl.isObject(rev)){rev=dl.accessor(rev.field)(group.datum)}if(rev)rng=rng.reverse()}var start=rng[0],end=rng[rng.length-1];if(start===null&&end!==null||start!==null&&end===null){log.error("Range is underspecified. Please ensure either the "+'"range" property or both "rangeMin" and "rangeMax" are specified.')}return rng}module.exports=Scale}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../transforms/Aggregate":847,datalib:406,"vega-dataflow":710,"vega-logging":776}],843:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,bound=require("vega-scenegraph").bound,Tuple=require("vega-dataflow").Tuple,Status=require("./Builder").STATUS;function Transition(duration,ease){this.duration=duration||500;this.ease=ease&&d3.ease(ease)||d3.ease("cubic-in-out");this.updates={next:null}}var prototype=Transition.prototype;var skip={text:1,url:1};prototype.interpolate=function(item,values){var key,curr,next,interp,list=null;for(key in values){curr=item[key];next=values[key];if(curr!==next){if(skip[key]||curr===undefined){Tuple.set(item,key,next)}else if(typeof curr==="number"&&!isFinite(curr)){Tuple.set(item,key,next)}else{interp=d3.interpolate(curr,next);interp.property=key;(list||(list=[])).push(interp)}}}if(list===null&&item.status===Status.EXIT){list=[]}if(list!=null){list.item=item;list.ease=item.mark.ease||this.ease;list.next=this.updates.next;this.updates.next=list}return this};prototype.start=function(callback){var t=this,prev=t.updates,curr=prev.next;for(;curr!=null;prev=curr,curr=prev.next){if(curr.item.status===Status.EXIT){curr.item.status=Status.UPDATE;curr.remove=true}}t.callback=callback;d3.timer(function(elapsed){return step.call(t,elapsed)})};function step(elapsed){var list=this.updates,prev=list,curr=prev.next,duration=this.duration,item,delay,f,e,i,n,stop=true;for(;curr!=null;prev=curr,curr=prev.next){item=curr.item;delay=item.delay||0;f=(elapsed-delay)/duration;if(f<0){stop=false;continue}if(f>1)f=1;e=curr.ease(f);for(i=0,n=curr.length;i<n;++i){item[curr[i].property]=curr[i](e)}item.touch();bound.item(item);if(f===1){if(curr.remove){item.status=Status.EXIT;item.remove()}prev.next=curr.next;curr=prev}else{stop=false}}this.callback();return stop}module.exports=Transition}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Builder":839,"vega-dataflow":710,"vega-scenegraph":777}],844:[function(require,module,exports){var dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,parseMark=require("../parse/mark"),util=require("../util");var axisBounds=new(require("vega-scenegraph").Bounds);var ORDINAL="ordinal";function axs(model,config){var scale,orient=config.orient,offset=0,titleOffset=config.titleOffset,axisDef={},layer="front",grid=false,title=null,tickMajorSize=config.tickSize,tickMinorSize=config.tickSize,tickEndSize=config.tickSize,tickPadding=config.tickPadding||config.padding,tickValues=null,tickFormatString=null,tickFormatType=null,tickSubdivide=0,tickCount=config.ticks,gridLineStyle={},tickLabelStyle={},majorTickStyle={},minorTickStyle={},titleStyle={},domainStyle={},m={gridLines:{},majorTicks:{},minorTicks:{},tickLabels:{},domain:{},title:{}};var axis={};function reset(){axisDef.type=null}function ingest(d){return{data:d}}function getTicks(format){var major=tickValues||(scale.ticks?scale.ticks(tickCount):scale.domain()),minor=axisSubdivide(scale,major,tickSubdivide).map(ingest);major=major.map(function(d){return d=ingest(d),d.label=format(d.data),d});return[major,minor]}axis.def=function(){if(!axisDef.type)axis_def(scale);var format=util.getTickFormat(scale,tickCount,tickFormatType,tickFormatString),ticks=getTicks(format),tdata=title?[title].map(ingest):[];axisDef.marks[0].from=function(){return grid?ticks[0]:[]};axisDef.marks[1].from=function(){return ticks[0]};axisDef.marks[2].from=function(){return ticks[1]};axisDef.marks[3].from=axisDef.marks[1].from;axisDef.marks[4].from=function(){return[1]};axisDef.marks[5].from=function(){return tdata};axisDef.offset=offset;axisDef.orient=orient;axisDef.layer=layer;if(titleOffset==="auto")titleAutoOffset(axisDef);return axisDef};function titleAutoOffset(axisDef){var orient=axisDef.orient,update=axisDef.marks[5].properties.update,fn=update.encode,min=config.titleOffsetAutoMin,max=config.titleOffsetAutoMax,pad=config.titleOffsetAutoMargin;update.encode=function(item,group,trans,db,signals,preds){var dirty=fn.call(fn,item,group,trans,db,signals,preds),field=orient==="bottom"||orient==="top"?"y":"x";if(titleStyle[field]!=null)return dirty;axisBounds.clear().union(group.items[3].bounds).union(group.items[4].bounds);var o=trans?{}:item,method=orient==="left"||orient==="right"?"width":"height",sign=orient==="top"||orient==="left"?-1:1,off=~~(axisBounds[method]()+item.fontSize/2+pad);Tuple.set(o,field,sign*Math.min(Math.max(min,off),max));if(trans)trans.interpolate(item,o);return true}}function axis_def(scale){var newScale,oldScale,range;if(scale.type===ORDINAL){newScale={scale:scale.scaleName,offset:.5+scale.rangeBand()/2};oldScale=newScale}else{newScale={scale:scale.scaleName,offset:.5};oldScale={scale:scale.scaleName+":prev",offset:.5}}range=axisScaleRange(scale);dl.extend(m.gridLines,axisTicks(config));dl.extend(m.majorTicks,axisTicks(config));dl.extend(m.minorTicks,axisTicks(config));dl.extend(m.tickLabels,axisTickLabels(config));dl.extend(m.domain,axisDomain(config));dl.extend(m.title,axisTitle(config));m.gridLines.properties.enter.stroke={value:config.gridColor};m.gridLines.properties.enter.strokeOpacity={value:config.gridOpacity};m.gridLines.properties.enter.strokeWidth={value:config.gridWidth};m.gridLines.properties.enter.strokeDash={value:config.gridDash};axisTicksExtend(orient,m.gridLines,oldScale,newScale,Infinity,scale,config,offset);axisTicksExtend(orient,m.majorTicks,oldScale,newScale,tickMajorSize,scale,config);axisTicksExtend(orient,m.minorTicks,oldScale,newScale,tickMinorSize,scale,config);axisLabelExtend(orient,m.tickLabels,oldScale,newScale,tickMajorSize,tickPadding);axisDomainExtend(orient,m.domain,range,tickEndSize);axisTitleExtend(orient,m.title,range,+titleOffset||-1);dl.extend(m.gridLines.properties.update,gridLineStyle);dl.extend(m.majorTicks.properties.update,majorTickStyle);dl.extend(m.minorTicks.properties.update,minorTickStyle);dl.extend(m.tickLabels.properties.update,tickLabelStyle);dl.extend(m.domain.properties.update,domainStyle);dl.extend(m.title.properties.update,titleStyle);var marks=[m.gridLines,m.majorTicks,m.minorTicks,m.tickLabels,m.domain,m.title];dl.extend(axisDef,{type:"group",interactive:false,properties:{enter:{encode:axisUpdate,scales:[scale.scaleName],signals:[],data:[]},update:{encode:axisUpdate,scales:[scale.scaleName],signals:[],data:[]}}});axisDef.marks=marks.map(function(m){return parseMark(model,m)})}axis.scale=function(x){if(!arguments.length)return scale;if(scale!==x){scale=x;reset()}return axis};axis.orient=function(x){if(!arguments.length)return orient;if(orient!==x){orient=x in axisOrients?x+"":config.orient;reset()}return axis};axis.title=function(x){if(!arguments.length)return title;if(title!==x){title=x;reset()}return axis};axis.tickCount=function(x){if(!arguments.length)return tickCount;tickCount=x;return axis};axis.tickValues=function(x){if(!arguments.length)return tickValues;tickValues=x;return axis};axis.tickFormat=function(x){if(!arguments.length)return tickFormatString;if(tickFormatString!==x){tickFormatString=x;reset()}return axis};axis.tickFormatType=function(x){if(!arguments.length)return tickFormatType;if(tickFormatType!==x){tickFormatType=x;reset()}return axis};axis.tickSize=function(x,y){if(!arguments.length)return tickMajorSize;var n=arguments.length-1,major=+x,minor=n>1?+y:tickMajorSize,end=n>0?+arguments[n]:tickMajorSize;if(tickMajorSize!==major||tickMinorSize!==minor||tickEndSize!==end){reset()}tickMajorSize=major;tickMinorSize=minor;tickEndSize=end;return axis};axis.tickSubdivide=function(x){if(!arguments.length)return tickSubdivide;tickSubdivide=+x;return axis};axis.offset=function(x){if(!arguments.length)return offset;offset=dl.isObject(x)?x:+x;return axis};axis.tickPadding=function(x){if(!arguments.length)return tickPadding;if(tickPadding!==+x){tickPadding=+x;reset()}return axis};axis.titleOffset=function(x){if(!arguments.length)return titleOffset;if(titleOffset!==x){titleOffset=x;reset()}return axis};axis.layer=function(x){if(!arguments.length)return layer;if(layer!==x){layer=x;reset()}return axis};axis.grid=function(x){if(!arguments.length)return grid;if(grid!==x){grid=x;reset()}return axis};axis.gridLineProperties=function(x){if(!arguments.length)return gridLineStyle;if(gridLineStyle!==x){gridLineStyle=x}return axis};axis.majorTickProperties=function(x){if(!arguments.length)return majorTickStyle;if(majorTickStyle!==x){majorTickStyle=x}return axis};axis.minorTickProperties=function(x){if(!arguments.length)return minorTickStyle;if(minorTickStyle!==x){minorTickStyle=x}return axis};axis.tickLabelProperties=function(x){if(!arguments.length)return tickLabelStyle;if(tickLabelStyle!==x){tickLabelStyle=x}return axis};axis.titleProperties=function(x){if(!arguments.length)return titleStyle;if(titleStyle!==x){titleStyle=x}return axis};axis.domainProperties=function(x){if(!arguments.length)return domainStyle;if(domainStyle!==x){domainStyle=x}return axis};axis.reset=function(){reset();return axis};return axis}var axisOrients={top:1,right:1,bottom:1,left:1};function axisSubdivide(scale,ticks,m){var subticks=[];if(m&&ticks.length>1){var extent=axisScaleExtent(scale.domain()),i=-1,n=ticks.length,d=(ticks[1]-ticks[0])/++m,j,v;while(++i<n){for(j=m;--j>0;){if((v=+ticks[i]-j*d)>=extent[0]){subticks.push(v)}}}for(--i,j=0;++j<m&&(v=+ticks[i]+j*d)<extent[1];){subticks.push(v)}}return subticks}function axisScaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start]}function axisScaleRange(scale){return scale.rangeExtent?scale.rangeExtent():axisScaleExtent(scale.range())}var axisAlign={bottom:"center",top:"center",left:"right",right:"left"};var axisBaseline={bottom:"top",top:"bottom",left:"middle",right:"middle"};function axisLabelExtend(orient,labels,oldScale,newScale,size,pad){size=Math.max(size,0)+pad;if(orient==="left"||orient==="top"){size*=-1}if(orient==="top"||orient==="bottom"){dl.extend(labels.properties.enter,{x:oldScale,y:{value:size}});dl.extend(labels.properties.update,{x:newScale,y:{value:size},align:{value:"center"},baseline:{value:axisBaseline[orient]}})}else{dl.extend(labels.properties.enter,{x:{value:size},y:oldScale});dl.extend(labels.properties.update,{x:{value:size},y:newScale,align:{value:axisAlign[orient]},baseline:{value:"middle"}})}}function axisTicksExtend(orient,ticks,oldRef,newRef,size,scale,config,offset){var sign=orient==="left"||orient==="top"?-1:1;if(size===Infinity){size=orient==="top"||orient==="bottom"?{field:{group:"height",level:2},mult:-sign,offset:offset*-sign}:{field:{group:"width",level:2},mult:-sign,offset:offset*-sign}}else{size={value:sign*size,offset:offset}}if(config.tickPlacement==="between"&&scale.type===ORDINAL){var rng=scale.range(),tickOffset=.5+(scale.rangeBand()||(rng[1]-rng[0])/2);newRef=oldRef=dl.duplicate(newRef);newRef.offset=oldRef.offset=tickOffset}if(orient==="top"||orient==="bottom"){dl.extend(ticks.properties.enter,{x:oldRef,y:{value:0},y2:size});dl.extend(ticks.properties.update,{x:newRef,y:{value:0},y2:size});dl.extend(ticks.properties.exit,{x:newRef})}else{dl.extend(ticks.properties.enter,{x:{value:0},x2:size,y:oldRef});dl.extend(ticks.properties.update,{x:{value:0},x2:size,y:newRef});dl.extend(ticks.properties.exit,{y:newRef})}}function axisTitleExtend(orient,title,range,offset){var update=title.properties.update,mid=~~((range[0]+range[1])/2),sign=orient==="top"||orient==="left"?-1:1;if(orient==="bottom"||orient==="top"){update.x={value:mid};update.angle={value:0};if(offset>=0)update.y={value:sign*offset}}else{update.y={value:mid};update.angle={value:orient==="left"?-90:90};if(offset>=0)update.x={value:sign*offset}}}function axisDomainExtend(orient,domain,range,size){var path;if(orient==="top"||orient==="left"){size=-1*size}if(orient==="bottom"||orient==="top"){path="M"+range[0]+","+size+"V0H"+range[1]+"V"+size}else{path="M"+size+","+range[0]+"H0V"+range[1]+"H"+size}domain.properties.update.path={value:path}}function axisUpdate(item,group,trans){var o=trans?{}:item,offset=item.mark.def.offset,orient=item.mark.def.orient,width=group.width,height=group.height;if(dl.isArray(offset)){var ofx=offset[0],ofy=offset[1];switch(orient){case"left":{Tuple.set(o,"x",-ofx);Tuple.set(o,"y",ofy);break}case"right":{Tuple.set(o,"x",width+ofx);Tuple.set(o,"y",ofy);break}case"bottom":{Tuple.set(o,"x",ofx);Tuple.set(o,"y",height+ofy);break}case"top":{Tuple.set(o,"x",ofx);Tuple.set(o,"y",-ofy);break}default:{Tuple.set(o,"x",ofx);Tuple.set(o,"y",ofy)}}}else{if(dl.isObject(offset)){offset=-group.scale(offset.scale)(offset.value)}switch(orient){case"left":{Tuple.set(o,"x",-offset);Tuple.set(o,"y",0);break}case"right":{Tuple.set(o,"x",width+offset);Tuple.set(o,"y",0);break}case"bottom":{Tuple.set(o,"x",0);Tuple.set(o,"y",height+offset);break}case"top":{Tuple.set(o,"x",0);Tuple.set(o,"y",-offset);break}default:{Tuple.set(o,"x",0);Tuple.set(o,"y",0)}}}if(trans)trans.interpolate(item,o);return true}function axisTicks(config){return{type:"rule",interactive:false,key:"data",properties:{enter:{stroke:{value:config.tickColor},strokeWidth:{value:config.tickWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function axisTickLabels(config){return{type:"text",interactive:true,key:"data",properties:{enter:{fill:{value:config.tickLabelColor},font:{value:config.tickLabelFont},fontSize:{value:config.tickLabelFontSize},opacity:{value:1e-6},text:{field:"label"}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function axisTitle(config){return{type:"text",interactive:true,properties:{enter:{font:{value:config.titleFont},fontSize:{value:config.titleFontSize},fontWeight:{value:config.titleFontWeight},fill:{value:config.titleColor},align:{value:"center"},baseline:{value:"middle"},text:{field:"data"}},update:{}}}}function axisDomain(config){return{type:"path",interactive:false,properties:{enter:{x:{value:.5},y:{value:.5},stroke:{value:config.axisColor},strokeWidth:{value:config.axisWidth}},update:{}}}}module.exports=axs},{"../parse/mark":828,"../util":877,datalib:406,"vega-dataflow":710,"vega-scenegraph":777}],845:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),Gradient=require("vega-scenegraph").Gradient,parseProperties=require("../parse/properties"),parseMark=require("../parse/mark"),util=require("../util");function lgnd(model){var size=null,shape=null,fill=null,stroke=null,opacity=null,spacing=null,values=null,formatString=null,formatType=null,title=null,config=model.config().legend,orient=config.orient,offset=config.offset,padding=config.padding,tickArguments=[5],legendStyle={},symbolStyle={},gradientStyle={},titleStyle={},labelStyle={},m={titles:{},symbols:{},labels:{},gradient:{}};var legend={},legendDef={};function reset(){legendDef.type=null}function ingest(d,i){return{data:d,index:i}}legend.def=function(){var scale=size||shape||fill||stroke||opacity;if(!legendDef.type){legendDef=(scale===fill||scale===stroke)&&!discrete(scale.type)?quantDef(scale):ordinalDef(scale)}legendDef.orient=orient;legendDef.offset=offset;legendDef.padding=padding;legendDef.margin=config.margin;return legendDef};function discrete(type){return type==="ordinal"||type==="quantize"||type==="quantile"||type==="threshold"}function ordinalDef(scale){var def=o_legend_def(size,shape,fill,stroke,opacity);var data=(values==null?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():values).map(ingest);var fmt=util.getTickFormat(scale,data.length,formatType,formatString);var fs,range,offset,pad=5,domain=d3.range(data.length);if(size){range=data.map(function(x){return Math.sqrt(size(x.data))});offset=d3.max(range);range=range.reduce(function(a,b,i,z){if(i>0)a[i]=a[i-1]+z[i-1]/2+pad;return a[i]+=b/2,a},[0]).map(Math.round)}else{offset=Math.round(Math.sqrt(config.symbolSize));range=spacing||(fs=labelStyle.fontSize)&&fs.value+pad||config.labelFontSize+pad;range=domain.map(function(d,i){return Math.round(offset/2+i*range)})}var sz=padding,ts;if(title){ts=titleStyle.fontSize;sz+=5+(ts&&ts.value||config.titleFontSize)}for(var i=0,n=range.length;i<n;++i)range[i]+=sz;def.scales=def.scales||[{}];dl.extend(def.scales[0],{name:"legend",type:"ordinal",points:true,domain:domain,range:range});var tdata=(title?[title]:[]).map(ingest);data.forEach(function(d){d.label=fmt(d.data);d.offset=offset});def.marks[0].from=function(){return tdata};def.marks[1].from=function(){return data};def.marks[2].from=def.marks[1].from;return def}function o_legend_def(size,shape,fill,stroke,opacity){var titles=dl.extend(m.titles,legendTitle(config)),symbols=dl.extend(m.symbols,legendSymbols(config)),labels=dl.extend(m.labels,vLegendLabels(config));legendSymbolExtend(symbols,size,shape,fill,stroke,opacity);dl.extend(titles.properties.update,titleStyle);dl.extend(symbols.properties.update,symbolStyle);dl.extend(labels.properties.update,labelStyle);titles.properties.enter.x.value+=padding;titles.properties.enter.y.value+=padding;labels.properties.enter.x.offset+=padding+1;symbols.properties.enter.x.offset=padding+1;labels.properties.update.x.offset+=padding+1;symbols.properties.update.x.offset=padding+1;dl.extend(legendDef,{type:"group",interactive:false,properties:{enter:parseProperties(model,"group",legendStyle),legendPosition:{encode:legendPosition.bind(null,config),signals:[],scales:[],data:[],fields:[]}}});legendDef.marks=[titles,symbols,labels].map(function(m){return parseMark(model,m)});return legendDef}function quantDef(scale){var def=q_legend_def(scale),dom=scale.domain(),data=(values==null?dom:values).map(ingest),width=gradientStyle.width&&gradientStyle.width.value||config.gradientWidth,fmt=util.getTickFormat(scale,data.length,formatType,formatString);def.scales=def.scales||[{}];var layoutSpec=dl.extend(def.scales[0],{name:"legend",type:scale.type,round:true,zero:false,domain:[dom[0],dom[dom.length-1]],range:[padding,width+padding]});if(scale.type==="pow")layoutSpec.exponent=scale.exponent();var tdata=(title?[title]:[]).map(ingest);data.forEach(function(d,i){d.label=fmt(d.data);d.align=i==data.length-1?"right":i===0?"left":"center"});def.marks[0].from=function(){return tdata};def.marks[1].from=function(){return[1]};def.marks[2].from=function(){return data};return def}function q_legend_def(scale){var titles=dl.extend(m.titles,legendTitle(config)),gradient=dl.extend(m.gradient,legendGradient(config)),labels=dl.extend(m.labels,hLegendLabels(config)),grad=new Gradient;var dom=scale.domain(),min=dom[0],max=dom[dom.length-1],f=scale.copy().domain([min,max]).range([0,1]);var stops=scale.type!=="linear"&&scale.ticks?scale.ticks.call(scale,15):dom;if(min!==stops[0])stops.unshift(min);if(max!==stops[stops.length-1])stops.push(max);for(var i=0,n=stops.length;i<n;++i){grad.stop(f(stops[i]),scale(stops[i]))}gradient.properties.enter.fill={value:grad};dl.extend(titles.properties.update,titleStyle);dl.extend(gradient.properties.update,gradientStyle);dl.extend(labels.properties.update,labelStyle);var gp=gradient.properties,gh=gradientStyle.height,hh=gh&&gh.value||gp.enter.height.value;labels.properties.enter.y.value=hh;labels.properties.update.y.value=hh;if(title){var tp=titles.properties,fs=titleStyle.fontSize,sz=4+(fs&&fs.value||tp.enter.fontSize.value);gradient.properties.enter.y.value+=sz;labels.properties.enter.y.value+=sz;gradient.properties.update.y.value+=sz;labels.properties.update.y.value+=sz}titles.properties.enter.x.value+=padding;titles.properties.enter.y.value+=padding;gradient.properties.enter.x.value+=padding;gradient.properties.enter.y.value+=padding;labels.properties.enter.y.value+=padding;gradient.properties.update.x.value+=padding;gradient.properties.update.y.value+=padding;labels.properties.update.y.value+=padding;dl.extend(legendDef,{type:"group",interactive:false,properties:{enter:parseProperties(model,"group",legendStyle),legendPosition:{encode:legendPosition.bind(null,config),signals:[],scales:[],data:[],fields:[]}}});legendDef.marks=[titles,gradient,labels].map(function(m){return parseMark(model,m)});return legendDef}legend.size=function(x){if(!arguments.length)return size;if(size!==x){size=x;reset()}return legend};legend.shape=function(x){if(!arguments.length)return shape;if(shape!==x){shape=x;reset()}return legend};legend.fill=function(x){if(!arguments.length)return fill;if(fill!==x){fill=x;reset()}return legend};legend.stroke=function(x){if(!arguments.length)return stroke;if(stroke!==x){stroke=x;reset()}return legend};legend.opacity=function(x){if(!arguments.length)return opacity;if(opacity!==x){opacity=x;reset()}return legend};legend.title=function(x){if(!arguments.length)return title;if(title!==x){title=x;reset()}return legend};legend.format=function(x){if(!arguments.length)return formatString;if(formatString!==x){formatString=x;reset()}return legend};legend.formatType=function(x){if(!arguments.length)return formatType;if(formatType!==x){formatType=x;reset()}return legend};legend.spacing=function(x){if(!arguments.length)return spacing;if(spacing!==+x){spacing=+x;reset()}return legend};legend.orient=function(x){if(!arguments.length)return orient;orient=x in LEGEND_ORIENT?x+"":config.orient;return legend};legend.offset=function(x){if(!arguments.length)return offset;offset=+x;return legend};legend.values=function(x){if(!arguments.length)return values;values=x;return legend};legend.legendProperties=function(x){if(!arguments.length)return legendStyle;legendStyle=x;return legend};legend.symbolProperties=function(x){if(!arguments.length)return symbolStyle;symbolStyle=x;return legend};legend.gradientProperties=function(x){if(!arguments.length)return gradientStyle;gradientStyle=x;return legend};legend.labelProperties=function(x){if(!arguments.length)return labelStyle;labelStyle=x;return legend};legend.titleProperties=function(x){if(!arguments.length)return titleStyle;titleStyle=x;return legend};legend.reset=function(){reset();return legend};return legend}var LEGEND_ORIENT={left:"x1",right:"x2","top-left":"x1","top-right":"x2","bottom-left":"x1","bottom-right":"x2"};function legendPosition(config,item,group,trans,db,signals,predicates){var o=trans?{}:item,i,def=item.mark.def,offset=def.offset,orient=def.orient,pad=def.padding*2,ao=orient==="left"?0:group.width,lw=~~item.bounds.width()+(item.width?0:pad),lh=~~item.bounds.height()+(item.height?0:pad),pos=group._legendPositions||(group._legendPositions={right:.5,left:.5});o.x=.5;o.y=.5;o.width=lw;o.height=lh;if(orient==="left"||orient==="right"){o.y=pos[orient];pos[orient]+=lh+def.margin;var axes=group.axes,items=group.axisItems,bound=LEGEND_ORIENT[orient];for(i=0;i<axes.length;++i){if(axes[i].orient()===orient){ao=Math.max(ao,Math.abs(items[i].bounds[bound]))}}}switch(orient){case"left":o.x-=ao+offset+lw;break;case"right":o.x+=ao+offset;break;case"top-left":o.x+=offset;o.y+=offset;break;case"top-right":o.x+=group.width-lw-offset;o.y+=offset;break;case"bottom-left":o.x+=offset;o.y+=group.height-lh-offset;break;case"bottom-right":o.x+=group.width-lw-offset;o.y+=group.height-lh-offset;break}var baseline=config.baseline,totalHeight=0;for(i=0;i<group.legendItems.length;i++){var currItem=group.legendItems[i];totalHeight+=currItem.bounds.height()+(item.height?0:pad)}if(baseline==="middle"){o.y+=offset+group.height/2-totalHeight/2}else if(baseline==="bottom"){o.y+=offset+group.height-totalHeight}if(trans)trans.interpolate(item,o);var enc=item.mark.def.properties.enter.encode;enc.call(enc,item,group,trans,db,signals,predicates);return true}function legendSymbolExtend(mark,size,shape,fill,stroke,opacity){var e=mark.properties.enter,u=mark.properties.update;if(size)e.size=u.size={scale:size.scaleName,field:"data"};if(shape)e.shape=u.shape={scale:shape.scaleName,field:"data"};if(fill)e.fill=u.fill={scale:fill.scaleName,field:"data"};if(stroke)e.stroke=u.stroke={scale:stroke.scaleName,field:"data"};if(opacity)u.opacity={scale:opacity.scaleName,field:"data"}}function legendTitle(config){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{value:0},y:{value:0},fill:{value:config.titleColor},font:{value:config.titleFont},fontSize:{value:config.titleFontSize},fontWeight:{value:config.titleFontWeight},baseline:{value:"top"},text:{field:"data"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function legendSymbols(config){return{type:"symbol",interactive:false,key:"data",properties:{enter:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},shape:{value:config.symbolShape},size:{value:config.symbolSize},stroke:{value:config.symbolColor},strokeWidth:{value:config.symbolStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},opacity:{value:1}}}}}function vLegendLabels(config){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{field:"offset",offset:5},y:{scale:"legend",field:"index"},fill:{value:config.labelColor},font:{value:config.labelFont},fontSize:{value:config.labelFontSize},align:{value:config.labelAlign},baseline:{value:config.labelBaseline},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1},x:{field:"offset",offset:5},y:{scale:"legend",field:"index"}}}}}function legendGradient(config){return{type:"rect",interactive:false,properties:{enter:{x:{value:0},y:{value:0},width:{value:config.gradientWidth},height:{value:config.gradientHeight},stroke:{value:config.gradientStrokeColor},strokeWidth:{value:config.gradientStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{value:0},y:{value:0},opacity:{value:1}}}}}function hLegendLabels(config){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{scale:"legend",field:"data"},y:{value:20},dy:{value:2},fill:{value:config.labelColor},font:{value:config.labelFont},fontSize:{value:config.labelFontSize},align:{field:"align"},baseline:{value:"top"},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{scale:"legend",field:"data"},y:{value:20},opacity:{value:1}}}}}module.exports=lgnd}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../parse/mark":828,"../parse/properties":833,"../util":877,datalib:406,"vega-scenegraph":777}],846:[function(require,module,exports){module.exports=function visit(node,func){var i,n,s,m,items;if(func(node))return true;var sets=["items","axisItems","legendItems"];for(s=0,m=sets.length;s<m;++s){if(items=node[sets[s]]){for(i=0,n=items.length;i<n;++i){if(visit(items[i],func))return true}}}}},{}],847:[function(require,module,exports){var dl=require("datalib"),df=require("vega-dataflow"),log=require("vega-logging"),ChangeSet=df.ChangeSet,Tuple=df.Tuple,Deps=df.Dependencies,Transform=require("./Transform"),Facetor=require("./Facetor");function Aggregate(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(summarize){var signalDeps={},tx=this._transform,i,len,f,fields,name,ops;if(!dl.isArray(fields=summarize)){fields=[];for(name in summarize){ops=dl.array(summarize[name]);fields.push({field:name,ops:ops})}}function sg(x){if(x.signal)signalDeps[x.signal]=1}for(i=0,len=fields.length;i<len;++i){f=fields[i];if(f.field.signal){signalDeps[f.field.signal]=1}dl.array(f.ops).forEach(sg);dl.array(f.as).forEach(sg)}tx._fields=fields;tx._aggr=null;tx.dependency(Deps.SIGNALS,dl.keys(signalDeps));return tx}}});this._aggr=null;this._input=null;this._args=null;this._fields=[];this._out=[];this._type=TYPES.TUPLE;this._acc={groupby:dl.true,value:dl.true};return this.router(true).produces(true)}var prototype=Aggregate.prototype=Object.create(Transform.prototype);prototype.constructor=Aggregate;var TYPES=Aggregate.TYPES={VALUE:1,TUPLE:2,MULTI:3};Aggregate.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"];prototype.type=function(type){return this._type=type,this};prototype.accessors=function(groupby,value){var acc=this._acc;acc.groupby=dl.$(groupby)||dl.true;acc.value=dl.$(value)||dl.true};prototype.aggr=function(){if(this._aggr)return this._aggr;var g=this._graph,hasGetter=false,args=[],groupby=this.param("groupby").field,value=function(x){return x.signal?g.signalRef(x.signal):x};var fields=this._fields.map(function(f){var field={name:value(f.field),as:dl.array(f.as),ops:dl.array(value(f.ops)).map(value),get:f.get};hasGetter=hasGetter||field.get!=null;args.push(field.name);return field});groupby.forEach(function(g){if(g.get)hasGetter=true;args.push(g.name||g)});this._args=hasGetter||!fields.length?null:args;if(!fields.length)fields={"*":"values"};var aggr=this._aggr=(new Facetor).groupby(groupby).stream(true).summarize(fields);this._out=getFields(aggr);if(this._type!==TYPES.VALUE){aggr.key("_id")}return aggr};function getFields(aggr){var f=[],i,n,j,m,dims,vals,meas;dims=aggr._dims;for(i=0,n=dims.length;i<n;++i){f.push(dims[i].name)}vals=aggr._aggr;for(i=0,n=vals.length;i<n;++i){meas=vals[i].measures.fields;for(j=0,m=meas.length;j<m;++j){f.push(meas[j])}}return f}prototype.transform=function(input,reset){log.debug(input,["aggregate"]);var output=ChangeSet.create(input),aggr=this.aggr(),out=this._out,args=this._args,reeval=true,p=Tuple.prev,add,rem,mod,mark,i;if(reset){output.rem.push.apply(output.rem,aggr.result());aggr.clear();this._aggr=null;aggr=this.aggr()}if(this._type===TYPES.TUPLE){add=function(x){aggr._add(x);Tuple.prev_init(x)};rem=function(x){aggr._rem(p(x))};mod=function(x){aggr._mod(x,p(x))};mark=function(x){aggr._markMod(x,p(x))}}else{var gby=this._acc.groupby,val=this._acc.value,get=this._type===TYPES.VALUE?val:function(x){return{_id:x._id,groupby:gby(x),value:val(x)}};add=function(x){aggr._add(get(x));Tuple.prev_init(x)};rem=function(x){aggr._rem(get(p(x)))};mod=function(x){aggr._mod(get(x),get(p(x)))};mark=function(x){aggr._mark(get(x),get(p(x)))}}input.add.forEach(add);if(reset){input.mod.forEach(add)}else{input.rem.forEach(rem);if(args)for(i=0,reeval=false;i<args.length;++i){if(input.fields[args[i]]){reeval=true;break}}input.mod.forEach(reeval?mod:mark)}for(i=0;i<out.length;++i){output.fields[out[i]]=1}return aggr._input=input,aggr.changes(output)};module.exports=Aggregate},{"./Facetor":853,"./Transform":869,datalib:406,"vega-dataflow":710,"vega-logging":776}],848:[function(require,module,exports){var Base=require("./Transform").prototype;function BatchTransform(){this._collector=null}var prototype=BatchTransform.prototype=Object.create(Base);prototype.constructor=BatchTransform;prototype.init=function(graph){Base.init.call(this,graph);return this.batch(true)};prototype.transform=function(input,reset){return this.batchTransform(input,this._collector.data(),reset)};prototype.batchTransform=function(){};module.exports=BatchTransform},{"./Transform":869}],849:[function(require,module,exports){var dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Bin(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{field:{type:"field"},min:{type:"value"},max:{type:"value"},base:{type:"value",default:10},maxbins:{type:"value",default:20},step:{type:"value"},steps:{type:"value"},minstep:{type:"value"},div:{type:"array<value>",default:[5,2]}});this._output={start:"bin_start",end:"bin_end",mid:"bin_mid"};return this.mutates(true)}var prototype=Bin.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Bin;prototype.extent=function(data){var e=[this.param("min"),this.param("max")],d;if(e[0]==null||e[1]==null){d=dl.extent(data,this.param("field").accessor);if(e[0]==null)e[0]=d[0];if(e[1]==null)e[1]=d[1]}return e};prototype.batchTransform=function(input,data){log.debug(input,["binning"]);var extent=this.extent(data),output=this._output,step=this.param("step"),steps=this.param("steps"),minstep=this.param("minstep"),get=this.param("field").accessor,opt={min:extent[0],max:extent[1],base:this.param("base"),maxbins:this.param("maxbins"),div:this.param("div")};if(step)opt.step=step;if(steps)opt.steps=steps;if(minstep)opt.minstep=minstep;var b=dl.bins(opt),s=b.step;function update(d){var v=get(d);v=v==null?null:b.start+s*~~((v-b.start)/s);Tuple.set(d,output.start,v);Tuple.set(d,output.end,v+s);Tuple.set(d,output.mid,v+s/2)}input.add.forEach(update);input.mod.forEach(update);input.rem.forEach(update);input.fields[output.start]=1;input.fields[output.end]=1;input.fields[output.mid]=1;return input};module.exports=Bin},{"./BatchTransform":848,"./Transform":869,datalib:406,"vega-dataflow":710,"vega-logging":776}],850:[function(require,module,exports){var df=require("vega-dataflow"),Tuple=df.Tuple,log=require("vega-logging"),Transform=require("./Transform");function CountPattern(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{field:{type:"field",default:"data"},pattern:{type:"value",default:"[\\w']+"},case:{type:"value",default:"lower"},stopwords:{type:"value",default:""}});this._output={text:"text",count:"count"};return this.router(true).produces(true)}var prototype=CountPattern.prototype=Object.create(Transform.prototype);prototype.constructor=CountPattern;prototype.transform=function(input,reset){log.debug(input,["countpattern"]);var get=this.param("field").accessor,pattern=this.param("pattern"),stop=this.param("stopwords"),rem=false;if(this._stop!==stop){this._stop=stop;this._stop_re=new RegExp("^"+stop+"$","i");reset=true}if(this._pattern!==pattern){this._pattern=pattern;this._match=new RegExp(this._pattern,"g");reset=true}if(reset)this._counts={};function curr(t){return Tuple.prev_init(t),get(t)}function prev(t){return get(Tuple.prev(t))}this._add(input.add,curr);if(!reset)this._rem(input.rem,prev);if(reset||(rem=input.fields[get.field])){if(rem)this._rem(input.mod,prev);this._add(input.mod,curr)}return this._changeset(input)};prototype._changeset=function(input){var counts=this._counts,tuples=this._tuples||(this._tuples={}),change=df.ChangeSet.create(input),out=this._output,w,t,c;for(w in counts){t=tuples[w];c=counts[w]||0;if(!t&&c){tuples[w]=t=Tuple.ingest({});t[out.text]=w;t[out.count]=c;change.add.push(t)}else if(c===0){if(t)change.rem.push(t);delete counts[w];delete tuples[w]}else if(t[out.count]!==c){Tuple.set(t,out.count,c);change.mod.push(t)}}return change};prototype._tokenize=function(text){switch(this.param("case")){case"upper":text=text.toUpperCase();break;case"lower":text=text.toLowerCase();break}return text.match(this._match)};prototype._add=function(tuples,get){var counts=this._counts,stop=this._stop_re,tok,i,j,t;for(j=0;j<tuples.length;++j){tok=this._tokenize(get(tuples[j]));for(i=0;i<tok.length;++i){if(!stop.test(t=tok[i])){counts[t]=1+(counts[t]||0)}}}};prototype._rem=function(tuples,get){var counts=this._counts,stop=this._stop_re,tok,i,j,t;for(j=0;j<tuples.length;++j){tok=this._tokenize(get(tuples[j]));for(i=0;i<tok.length;++i){if(!stop.test(t=tok[i])){counts[t]-=1}}}};module.exports=CountPattern},{"./Transform":869,"vega-dataflow":710,"vega-logging":776}],851:[function(require,module,exports){var dl=require("datalib"),df=require("vega-dataflow"),ChangeSet=df.ChangeSet,Tuple=df.Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Cross(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{with:{type:"data"},diagonal:{type:"value",default:"true"},filter:{type:"expr"}});this._output={left:"a",right:"b"};this._lastWith=null;this._cids={};this._cache={};return this.router(true).produces(true)}var prototype=Cross.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Cross;function _cache(x,t){var c=this._cache,cross=c[x._id]||(c[x._id]={c:[],f:false});cross.c.push(t)}function _cid(left,x,y){return left?x._id+"_"+y._id:y._id+"_"+x._id}function add(output,left,data,diag,test,mids,x){var as=this._output,cache=this._cache,cids=this._cids,oadd=output.add,fltrd=false,i=0,len=data.length,t={},y,cid;for(;i<len;++i){y=data[i];cid=_cid(left,x,y);if(cids[cid])continue;if(x._id===y._id&&!diag)continue;Tuple.set(t,as.left,left?x:y);Tuple.set(t,as.right,left?y:x);if(!test||test(t)){oadd.push(t=Tuple.ingest(t));_cache.call(this,x,t);if(x._id!==y._id)_cache.call(this,y,t);mids[t._id]=1;cids[cid]=true;t={}}else{if(cache[y._id])cache[y._id].f=true;fltrd=true}}if(cache[x._id])cache[x._id].f=fltrd}function mod(output,left,data,diag,test,mids,rids,x){var as=this._output,cache=this._cache,cids=this._cids,cross=cache[x._id],tpls=cross&&cross.c,fltrd=!cross||cross.f,omod=output.mod,orem=output.rem,i,t,y,l,cid;if(tpls){for(i=tpls.length-1;i>=0;--i){t=tpls[i];l=x===t[as.left];y=l?t[as.right]:t[as.left];cid=_cid(l,x,y);if(!cache[y._id]){cids[cid]=false;tpls.splice(i,1);continue}if(!test||test(t)){if(mids[t._id])continue;omod.push(t);mids[t._id]=1}else{if(!rids[t._id])orem.push.apply(orem,tpls.splice(i,1));rids[t._id]=1;cids[cid]=false;cross.f=true}}}if(test&&fltrd)add.call(this,output,left,data,diag,test,mids,x)}function rem(output,left,rids,x){var as=this._output,cross=this._cache[x._id],cids=this._cids,orem=output.rem,i,len,t,y,l;if(!cross)return;for(i=0,len=cross.c.length;i<len;++i){t=cross.c[i];l=x===t[as.left];y=l?t[as.right]:t[as.left];cids[_cid(l,x,y)]=false;if(!rids[t._id]){orem.push(t);rids[t._id]=1}}this._cache[x._id]=null}function purge(output,rids){var cache=this._cache,keys=dl.keys(cache),rem=output.rem,i,len,j,jlen,cross,t;for(i=0,len=keys.length;i<len;++i){cross=cache[keys[i]];for(j=0,jlen=cross.c.length;j<jlen;++j){t=cross.c[j];if(rids[t._id])continue;rem.push(t);rids[t._id]=1}}this._cache={};this._cids={};this._lastWith=null}prototype.batchTransform=function(input,data,reset){log.debug(input,["crossing"]);var w=this.param("with"),diag=this.param("diagonal"),as=this._output,test=this.param("filter")||null,selfCross=!w.name,woutput=selfCross?input:w.source.last(),wdata=selfCross?data:w.source.values(),output=ChangeSet.create(input),mids={},rids={};if(reset){purge.call(this,output,rids);data.forEach(add.bind(this,output,true,wdata,diag,test,mids));this._lastWith=woutput.stamp}else{input.rem.forEach(rem.bind(this,output,true,rids));input.add.forEach(add.bind(this,output,true,wdata,diag,test,mids));if(woutput.stamp>this._lastWith){woutput.rem.forEach(rem.bind(this,output,false,rids));woutput.add.forEach(add.bind(this,output,false,data,diag,test,mids));woutput.mod.forEach(mod.bind(this,output,false,data,diag,test,mids,rids));this._lastWith=woutput.stamp}input.mod.forEach(mod.bind(this,output,true,wdata,diag,test,mids,rids))}output.fields[as.left]=1;output.fields[as.right]=1;return output};module.exports=Cross},{"./BatchTransform":848,"./Transform":869,datalib:406,"vega-dataflow":710,"vega-logging":776}],852:[function(require,module,exports){var Transform=require("./Transform"),Aggregate=require("./Aggregate");function Facet(graph){Transform.addParameters(this,{transform:{type:"custom",set:function(pipeline){return this._transform._pipeline=pipeline,this._transform},get:function(){var parse=require("../parse/transforms"),facet=this._transform;return facet._pipeline.map(function(t){return parse(facet._graph,t)})}}});this._pipeline=[];return Aggregate.call(this,graph)}var prototype=Facet.prototype=Object.create(Aggregate.prototype);prototype.constructor=Facet;prototype.aggr=function(){return Aggregate.prototype.aggr.call(this).facet(this)};prototype.transform=function(input,reset){var output=Aggregate.prototype.transform.call(this,input,reset);if(input.add.length){this.listeners()[0].rerank()}return output};module.exports=Facet},{"../parse/transforms":837,"./Aggregate":847,"./Transform":869}],853:[function(require,module,exports){var dl=require("datalib"),Aggregator=dl.Aggregator,Base=Aggregator.prototype,df=require("vega-dataflow"),Tuple=df.Tuple,log=require("vega-logging"),facetID=0;function Facetor(){Aggregator.call(this);this._facet=null;this._facetID=++facetID}var prototype=Facetor.prototype=Object.create(Base);prototype.constructor=Facetor;prototype.facet=function(f){return arguments.length?(this._facet=f,this):this._facet};prototype._ingest=function(t){return Tuple.ingest(t,null)};prototype._assign=Tuple.set;function disconnect_cell(facet){log.debug({},["disconnecting cell",this.tuple._id]);var pipeline=this.ds.pipeline();facet.removeListener(pipeline[0]);facet._graph.removeListener(pipeline[0]);facet._graph.disconnect(pipeline)}prototype._newcell=function(x,key){var cell=Base._newcell.call(this,x,key),facet=this._facet;if(facet){var graph=facet._graph,tuple=cell.tuple,pipeline=facet.param("transform");cell.ds=graph.data(tuple._facetID,pipeline,tuple);cell.disconnect=disconnect_cell;facet.addListener(pipeline[0])}return cell};prototype._newtuple=function(x,key){var t=Base._newtuple.call(this,x);if(this._facet){Tuple.set(t,"key",key);Tuple.set(t,"_facetID",this._facetID+"_"+key)}return t};prototype.clear=function(){if(this._facet){for(var k in this._cells){this._cells[k].disconnect(this._facet)}}return Base.clear.call(this)};prototype._on_add=function(x,cell){if(this._facet)cell.ds._input.add.push(x)};prototype._on_rem=function(x,cell){if(this._facet)cell.ds._input.rem.push(x)};prototype._on_mod=function(x,prev,cell0,cell1){if(this._facet){if(cell0===cell1){cell0.ds._input.mod.push(x)}else{cell0.ds._input.rem.push(x);cell1.ds._input.add.push(x)}}};prototype._on_drop=function(cell){if(this._facet)cell.disconnect(this._facet)};prototype._on_keep=function(cell){if(this._facet)df.ChangeSet.copy(this._input,cell.ds._input)};module.exports=Facetor},{datalib:406,"vega-dataflow":710,"vega-logging":776}],854:[function(require,module,exports){var df=require("vega-dataflow"),log=require("vega-logging"),Transform=require("./Transform");function Filter(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{test:{type:"expr"}});this._skip={};return this.router(true)}var prototype=Filter.prototype=Object.create(Transform.prototype);prototype.constructor=Filter;prototype.transform=function(input){log.debug(input,["filtering"]);var output=df.ChangeSet.create(input),skip=this._skip,test=this.param("test");input.rem.forEach(function(x){if(skip[x._id]!==1)output.rem.push(x);else skip[x._id]=0});input.add.forEach(function(x){if(test(x))output.add.push(x);else skip[x._id]=1});input.mod.forEach(function(x){var b=test(x),s=skip[x._id]===1;if(b&&s){skip[x._id]=0;output.add.push(x)}else if(b&&!s){output.mod.push(x)}else if(!b&&s){}else{output.rem.push(x);skip[x._id]=1}});return output};module.exports=Filter},{"./Transform":869,"vega-dataflow":710,"vega-logging":776}],855:[function(require,module,exports){var df=require("vega-dataflow"),Tuple=df.Tuple,log=require("vega-logging"),Transform=require("./Transform");function Fold(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{fields:{type:"array<field>"}});this._output={key:"key",value:"value"};this._cache={};return this.router(true).produces(true)}var prototype=Fold.prototype=Object.create(Transform.prototype);prototype.constructor=Fold;prototype._reset=function(input,output){for(var id in this._cache){output.rem.push.apply(output.rem,this._cache[id])}this._cache={}};prototype._tuple=function(x,i,len){var list=this._cache[x._id]||(this._cache[x._id]=Array(len));return list[i]?Tuple.rederive(x,list[i]):list[i]=Tuple.derive(x)};prototype._fn=function(data,on,out){var i,j,n,m,d,t;for(i=0,n=data.length;i<n;++i){d=data[i];for(j=0,m=on.field.length;j<m;++j){t=this._tuple(d,j,m);Tuple.set(t,this._output.key,on.field[j]);Tuple.set(t,this._output.value,on.accessor[j](d));out.push(t)}}};prototype.transform=function(input,reset){log.debug(input,["folding"]);var fold=this,on=this.param("fields"),output=df.ChangeSet.create(input);if(reset)this._reset(input,output);this._fn(input.add,on,output.add);this._fn(input.mod,on,reset?output.add:output.mod);input.rem.forEach(function(x){output.rem.push.apply(output.rem,fold._cache[x._id]);fold._cache[x._id]=null});if(input.add.length||input.rem.length||on.field.some(function(f){return!!input.fields[f]})){output.fields[this._output.key]=1;output.fields[this._output.value]=1}return output};module.exports=Fold},{"./Transform":869,"vega-dataflow":710,"vega-logging":776}],856:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,df=require("vega-dataflow"),Tuple=df.Tuple,ChangeSet=df.ChangeSet,log=require("vega-logging"),Transform=require("./Transform");function Force(graph){Transform.prototype.init.call(this,graph);this._prev=null;this._interactive=false;this._setup=true;this._nodes=[];this._links=[];this._layout=d3.layout.force();Transform.addParameters(this,{size:{type:"array<value>",default:require("./screen").size},bound:{type:"value",default:true},links:{type:"data"},linkStrength:{type:"value",default:1},linkDistance:{type:"value",default:20},charge:{type:"value",default:-30},chargeDistance:{type:"value",default:Infinity},friction:{type:"value",default:.9},theta:{type:"value",default:.8},gravity:{type:"value",default:.1},alpha:{type:"value",default:.1},iterations:{type:"value",default:500},interactive:{type:"value",default:this._interactive},active:{type:"value",default:this._prev},fixed:{type:"data"}});this._output={x:"layout_x",y:"layout_y"};return this.mutates(true)}var prototype=Force.prototype=Object.create(Transform.prototype);prototype.constructor=Force;prototype.transform=function(nodeInput,reset){log.debug(nodeInput,["force"]);reset=reset-(nodeInput.signals.active?1:0);var interactive=this.param("interactive"),linkSource=this.param("links").source,linkInput=linkSource.last(),active=this.param("active"),output=this._output,layout=this._layout,nodes=this._nodes,links=this._links;if(linkInput.stamp<nodeInput.stamp)linkInput=null;this.configure(nodeInput,linkInput,interactive,reset);if(!interactive){var iterations=this.param("iterations");for(var i=0;i<iterations;++i)layout.tick();layout.stop()}this.update(active);if(reset||active!==this._prev&&active&&active.update){layout.alpha(this.param("alpha"))}if(active!==this._prev){this._prev=active}if(nodeInput.rem.length){layout.nodes(this._nodes=Tuple.idFilter(nodes,nodeInput.rem))}if(linkInput&&linkInput.rem.length){layout.links(this._links=Tuple.idFilter(links,linkInput.rem))}nodeInput.fields[output.x]=1;nodeInput.fields[output.y]=1;return nodeInput};prototype.configure=function(nodeInput,linkInput,interactive,reset){var layout=this._layout,update=this._setup||nodeInput.add.length||linkInput&&linkInput.add.length||interactive!==this._interactive||this.param("charge")!==layout.charge()||this.param("linkStrength")!==layout.linkStrength()||this.param("linkDistance")!==layout.linkDistance();if(update||reset){layout.size(this.param("size")).chargeDistance(this.param("chargeDistance")).theta(this.param("theta")).gravity(this.param("gravity")).friction(this.param("friction"))}if(!update)return;this._setup=false;this._interactive=interactive;var force=this,graph=this._graph,nodes=this._nodes,links=this._links,a,i;for(a=nodeInput.add,i=0;i<a.length;++i){nodes.push({tuple:a[i]})}if(linkInput)for(a=linkInput.add,i=0;i<a.length;++i){links.push({tuple:a[i],source:nodes[a[i].source],target:nodes[a[i].target]})}var tickHandler=!interactive?null:function(){graph.propagate(ChangeSet.create(null,true),force)};layout.linkStrength(this.param("linkStrength")).linkDistance(this.param("linkDistance")).charge(this.param("charge")).nodes(nodes).links(links).on("tick",tickHandler).start().alpha(this.param("alpha"))};prototype.update=function(active){var output=this._output,bound=this.param("bound"),fixed=this.param("fixed"),size=this.param("size"),nodes=this._nodes,lut={},id,i,n,t,x,y;if(fixed&&fixed.source){fixed=fixed.source.values();for(i=0,n=fixed.length;i<n;++i){lut[fixed[i].id]=1}}for(i=0;i<nodes.length;++i){n=nodes[i];t=n.tuple;id=t._id;if(active&&active.id===id){n.fixed=1;if(active.update){n.x=n.px=active.x;n.y=n.py=active.y}}else{n.fixed=lut[id]||0}x=bound?Math.max(0,Math.min(n.x,size[0])):n.x;y=bound?Math.max(0,Math.min(n.y,size[1])):n.y;Tuple.set(t,output.x,x);Tuple.set(t,output.y,y)}};module.exports=Force}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Transform":869,"./screen":875,"vega-dataflow":710,"vega-logging":776}],857:[function(require,module,exports){var df=require("vega-dataflow"),Tuple=df.Tuple,log=require("vega-logging"),Transform=require("./Transform");function Formula(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{field:{type:"value"},expr:{type:"expr"}});return this.mutates(true)}var prototype=Formula.prototype=Object.create(Transform.prototype);prototype.constructor=Formula;prototype.transform=function(input){log.debug(input,["formulating"]);var field=this.param("field"),expr=this.param("expr"),updated=false;function set(x){Tuple.set(x,field,expr(x));updated=true}input.add.forEach(set);if(this.reevaluate(input)){input.mod.forEach(set)}if(updated)input.fields[field]=1;return input};module.exports=Formula},{"./Transform":869,"vega-dataflow":710,"vega-logging":776}],858:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform");function Geo(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,Geo.Parameters);Transform.addParameters(this,{lon:{type:"field"},lat:{type:"field"}});this._output={x:"layout_x",y:"layout_y"};return this.mutates(true)}Geo.Parameters={projection:{type:"value",default:"mercator"},center:{type:"array<value>"},translate:{type:"array<value>",default:require("./screen").center},rotate:{type:"array<value>"},scale:{type:"value"},precision:{type:"value"},clipAngle:{type:"value"},clipExtent:{type:"value"}};Geo.d3Projection=function(){var p=this.param("projection"),param=Geo.Parameters,proj,name,value;if(p!==this._mode){this._mode=p;this._projection=d3.geo[p]()}proj=this._projection;for(name in param){if(name==="projection"||!proj[name])continue;value=this.param(name);if(value===undefined||dl.isArray(value)&&value.length===0){continue}if(value!==proj[name]()){proj[name](value)}}return proj};var prototype=Geo.prototype=Object.create(Transform.prototype);prototype.constructor=Geo;prototype.transform=function(input){log.debug(input,["geo"]);var output=this._output,lon=this.param("lon").accessor,lat=this.param("lat").accessor,proj=Geo.d3Projection.call(this);function set(t){var ll=[lon(t),lat(t)];var xy=proj(ll)||[null,null];Tuple.set(t,output.x,xy[0]);Tuple.set(t,output.y,xy[1])}input.add.forEach(set);if(this.reevaluate(input)){input.mod.forEach(set);input.rem.forEach(set)}input.fields[output.x]=1;input.fields[output.y]=1;return input};module.exports=Geo}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Transform":869,"./screen":875,datalib:406,"vega-dataflow":710,"vega-logging":776}],859:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Geo=require("./Geo"),Transform=require("./Transform");function GeoPath(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,Geo.Parameters);Transform.addParameters(this,{field:{type:"field",default:null}});this._output={path:"layout_path"};return this.mutates(true)}var prototype=GeoPath.prototype=Object.create(Transform.prototype);prototype.constructor=GeoPath;prototype.transform=function(input){log.debug(input,["geopath"]);var output=this._output,geojson=this.param("field").accessor||dl.identity,proj=Geo.d3Projection.call(this),path=d3.geo.path().projection(proj);function set(t){Tuple.set(t,output.path,path(geojson(t)))}input.add.forEach(set);if(this.reevaluate(input)){input.mod.forEach(set);input.rem.forEach(set)}input.fields[output.path]=1;return input};module.exports=GeoPath}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Geo":858,"./Transform":869,datalib:406,"vega-dataflow":710,"vega-logging":776}],860:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Hierarchy(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{sort:{type:"array<field>",default:null},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"value",default:null},mode:{type:"value",default:"tidy"},size:{type:"array<value>",default:require("./screen").size},nodesize:{type:"array<value>",default:null},orient:{type:"value",default:"cartesian"}});this._mode=null;this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"};return this.mutates(true)}var PARTITION="partition";var SEPARATION={cartesian:function(a,b){return a.parent===b.parent?1:2},radial:function(a,b){return(a.parent===b.parent?1:2)/a.depth}};var prototype=Hierarchy.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Hierarchy;prototype.batchTransform=function(input,data){log.debug(input,["hierarchy layout"]);var layout=this._layout,output=this._output,mode=this.param("mode"),sort=this.param("sort"),nodesz=this.param("nodesize"),parent=this.param("parent").accessor,root=data.filter(function(d){return parent(d)===null})[0];if(mode!==this._mode){this._mode=mode;if(mode==="tidy")mode="tree";layout=this._layout=d3.layout[mode]()}input.fields[output.x]=1;input.fields[output.y]=1;input.fields[output.depth]=1;if(mode===PARTITION){input.fields[output.width]=1;input.fields[output.height]=1;layout.value(this.param("field").accessor)}else{layout.separation(SEPARATION[this.param("orient")])}if(nodesz.length&&mode!==PARTITION){layout.nodeSize(nodesz)}else{layout.size(this.param("size"))}layout.sort(sort.field.length?dl.comparator(sort.field):null).children(this.param("children").accessor).nodes(root);data.forEach(function(n){Tuple.set(n,output.x,n.x);Tuple.set(n,output.y,n.y);Tuple.set(n,output.depth,n.depth);if(mode===PARTITION){Tuple.set(n,output.width,n.dx);Tuple.set(n,output.height,n.dy)}});return input};module.exports=Hierarchy}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./BatchTransform":848,"./Transform":869,"./screen":875,datalib:406,"vega-dataflow":710,"vega-logging":776}],861:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),Tuple=require("vega-dataflow").Tuple,Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Impute(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{groupby:{type:"array<field>"},orderby:{type:"array<field>"},field:{type:"field"},method:{type:"value",default:"value"},value:{type:"value",default:0}});return this.router(true).produces(true)}var prototype=Impute.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Impute;prototype.batchTransform=function(input,data){log.debug(input,["imputing"]);var groupby=this.param("groupby"),orderby=this.param("orderby"),method=this.param("method"),value=this.param("value"),field=this.param("field"),get=field.accessor,name=field.field,prev=this._imputed||[],curr=[],groups=partition(data,groupby.accessor,orderby.accessor),domain=groups.domain,group,i,j,n,m,t;function getval(x){return x==null?null:get(x)}for(j=0,m=groups.length;j<m;++j){group=groups[j];if(method!=="value"){value=dl[method](group,getval)}for(i=0,n=group.length;i<n;++i){if(group[i]==null){t=tuple(groupby.field,group.values,orderby.field,domain[i]);t[name]=value;curr.push(t)}}}for(i=0,n=curr.length;i<n;++i){input.add.push(curr[i])}for(i=0,n=prev.length;i<n;++i){input.rem.push(prev[i])}this._imputed=curr;return input};function tuple(gb,gv,ob,ov){var t={_imputed:true},i;for(i=0;i<gv.length;++i)t[gb[i]]=gv[i];for(i=0;i<ov.length;++i)t[ob[i]]=ov[i];return Tuple.ingest(t)}function partition(data,groupby,orderby){var groups=[],get=function(f){return f(x)},val=function(d){return x=d,orderby.map(get)},map,i,x,k,g,domain,lut,N;domain=groups.domain=dl.unique(data,val);N=domain.length;lut=domain.reduce(function(m,d,i){return m[d]={value:d,index:i},m},{});for(map={},i=0;i<data.length;++i){x=data[i];k=groupby==null?[]:groupby.map(get);g=map[k]||(groups.push(map[k]=Array(N)),map[k].values=k,map[k]);g[lut[val(x)].index]=x}return groups}module.exports=Impute},{"./BatchTransform":848,"./Transform":869,datalib:406,"vega-dataflow":710,"vega-logging":776}],862:[function(require,module,exports){var Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform");function LinkPath(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{sourceX:{type:"field",default:"_source.layout_x"},sourceY:{type:"field",default:"_source.layout_y"},targetX:{type:"field",default:"_target.layout_x"},targetY:{type:"field",default:"_target.layout_y"},tension:{type:"value",default:.2},shape:{type:"value",default:"line"}});this._output={path:"layout_path"};return this.mutates(true)}var prototype=LinkPath.prototype=Object.create(Transform.prototype);prototype.constructor=LinkPath;function line(sx,sy,tx,ty){return"M"+sx+","+sy+"L"+tx+","+ty}function curve(sx,sy,tx,ty,tension){var dx=tx-sx,dy=ty-sy,ix=tension*(dx+dy),iy=tension*(dy-dx);return"M"+sx+","+sy+"C"+(sx+ix)+","+(sy+iy)+" "+(tx+iy)+","+(ty-ix)+" "+tx+","+ty}function cornerX(sx,sy,tx,ty){return"M"+sx+","+sy+"V"+ty+"H"+tx}function cornerY(sx,sy,tx,ty){return"M"+sx+","+sy+"H"+tx+"V"+ty}function cornerR(sa,sr,ta,tr){var sc=Math.cos(sa),ss=Math.sin(sa),tc=Math.cos(ta),ts=Math.sin(ta),sf=Math.abs(ta-sa)>Math.PI?ta<=sa:ta>sa;return"M"+sr*sc+","+sr*ss+"A"+sr+","+sr+" 0 0,"+(sf?1:0)+" "+sr*tc+","+sr*ts+"L"+tr*tc+","+tr*ts}function diagonalX(sx,sy,tx,ty){var m=(sx+tx)/2;return"M"+sx+","+sy+"C"+m+","+sy+" "+m+","+ty+" "+tx+","+ty}function diagonalY(sx,sy,tx,ty){var m=(sy+ty)/2;return"M"+sx+","+sy+"C"+sx+","+m+" "+tx+","+m+" "+tx+","+ty}function diagonalR(sa,sr,ta,tr){var sc=Math.cos(sa),ss=Math.sin(sa),tc=Math.cos(ta),ts=Math.sin(ta),mr=(sr+tr)/2;return"M"+sr*sc+","+sr*ss+"C"+mr*sc+","+mr*ss+" "+mr*tc+","+mr*ts+" "+tr*tc+","+tr*ts}var shapes={line:line,curve:curve,cornerX:cornerX,cornerY:cornerY,cornerR:cornerR,diagonalX:diagonalX,diagonalY:diagonalY,diagonalR:diagonalR};prototype.transform=function(input){log.debug(input,["linkpath"]);var output=this._output,shape=shapes[this.param("shape")]||shapes.line,sourceX=this.param("sourceX").accessor,sourceY=this.param("sourceY").accessor,targetX=this.param("targetX").accessor,targetY=this.param("targetY").accessor,tension=this.param("tension");function set(t){var path=shape(sourceX(t),sourceY(t),targetX(t),targetY(t),tension);Tuple.set(t,output.path,path)}input.add.forEach(set);if(this.reevaluate(input)){input.mod.forEach(set);input.rem.forEach(set)}input.fields[output.path]=1;return input};module.exports=LinkPath},{"./Transform":869,"vega-dataflow":710,"vega-logging":776}],863:[function(require,module,exports){var Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform");function Lookup(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{on:{type:"data"},onKey:{type:"field",default:null},as:{type:"array<value>"},keys:{type:"array<field>",default:["data"]},default:{type:"value"}});return this.mutates(true)}var prototype=Lookup.prototype=Object.create(Transform.prototype);prototype.constructor=Lookup;prototype.transform=function(input,reset){log.debug(input,["lookup"]);var on=this.param("on"),onLast=on.source.last(),onData=on.source.values(),onKey=this.param("onKey"),onF=onKey.field,keys=this.param("keys"),get=keys.accessor,as=this.param("as"),defaultValue=this.param("default"),lut=this._lut,i,v;if(lut==null||this._on!==onF||onF&&onLast.fields[onF]||onLast.add.length||onLast.rem.length){if(onF){onKey=onKey.accessor;for(lut={},i=0;i<onData.length;++i){lut[onKey(v=onData[i])]=v}}else{lut=onData}this._lut=lut;this._on=onF;reset=true}function set(t){for(var i=0;i<get.length;++i){var v=lut[get[i](t)]||defaultValue;Tuple.set(t,as[i],v)}}input.add.forEach(set);var run=keys.field.some(function(f){return input.fields[f]});if(run||reset){input.mod.forEach(set);input.rem.forEach(set)}as.forEach(function(k){input.fields[k]=1});return input};module.exports=Lookup},{"./Transform":869,"vega-dataflow":710,"vega-logging":776}],864:[function(require,module,exports){var dl=require("datalib"),Deps=require("vega-dataflow").Dependencies;var arrayType=/array/i,dataType=/data/i,fieldType=/field/i,exprType=/expr/i,valType=/value/i;function Parameter(name,type,transform){this._name=name;this._type=type;this._transform=transform;this._value=[];this._accessors=[];this._resolution=false;this._signals=[]}var prototype=Parameter.prototype;function get(){var isArray=arrayType.test(this._type),isData=dataType.test(this._type),isField=fieldType.test(this._type);var val=isArray?this._value:this._value[0],acc=isArray?this._accessors:this._accessors[0];if(!dl.isValid(acc)&&valType.test(this._type)){return val}else{return isData?{name:val,source:acc}:isField?{field:val,accessor:acc}:val}}prototype.get=function(){var graph=this._transform._graph,isData=dataType.test(this._type),isField=fieldType.test(this._type),i,n,sig,idx,val;if(!this._resolution)return get.call(this);if(isData){this._accessors=this._value.map(function(v){return graph.data(v)});return get.call(this)}for(i=0,n=this._signals.length;i<n;++i){sig=this._signals[i];idx=sig.index;val=sig.value(graph);if(isField){this._accessors[idx]=this._value[idx]!=val?dl.accessor(val):this._accessors[idx]}this._value[idx]=val}return get.call(this)};prototype.set=function(value){var p=this,graph=p._transform._graph,isExpr=exprType.test(this._type),isData=dataType.test(this._type),isField=fieldType.test(this._type);p._signals=[];this._value=dl.array(value).map(function(v,i){var e;if(dl.isString(v)){if(isExpr){e=graph.expr(v);p._transform.dependency(Deps.FIELDS,e.fields);p._transform.dependency(Deps.SIGNALS,e.globals);p._transform.dependency(Deps.DATA,e.dataSources);return e.fn}else if(isField){p._accessors[i]=dl.accessor(v);p._transform.dependency(Deps.FIELDS,dl.field(v))}else if(isData){p._resolution=true;p._transform.dependency(Deps.DATA,v)}return v}else if(v.value!==undefined){return v.value}else if(v.field!==undefined){p._accessors[i]=dl.accessor(v.field);p._transform.dependency(Deps.FIELDS,dl.field(v.field));return v.field}else if(v.signal!==undefined){p._resolution=true;p._transform.dependency(Deps.SIGNALS,dl.field(v.signal)[0]);p._signals.push({index:i,value:function(graph){return graph.signalRef(v.signal)}});return v.signal}else if(v.expr!==undefined){p._resolution=true;e=graph.expr(v.expr);p._transform.dependency(Deps.SIGNALS,e.globals);p._signals.push({index:i,value:function(){return e.fn()}});return v.expr}return v});return p._transform};module.exports=Parameter},{datalib:406,"vega-dataflow":710}],865:[function(require,module,exports){var dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Pie(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{field:{type:"field",default:null},startAngle:{type:"value",default:0},endAngle:{type:"value",default:2*Math.PI},sort:{type:"value",default:false}});this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"};return this.mutates(true)}var prototype=Pie.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Pie;function ones(){return 1}prototype.batchTransform=function(input,data){log.debug(input,["pie"]);var output=this._output,field=this.param("field").accessor||ones,start=this.param("startAngle"),stop=this.param("endAngle"),sort=this.param("sort");var values=data.map(field),a=start,k=(stop-start)/dl.sum(values),index=dl.range(data.length),i,t,v;if(sort){index.sort(function(a,b){return values[a]-values[b]})}for(i=0;i<index.length;++i){t=data[index[i]];v=values[index[i]];Tuple.set(t,output.start,a);Tuple.set(t,output.mid,a+.5*v*k);Tuple.set(t,output.end,a+=v*k)}input.fields[output.start]=1;input.fields[output.end]=1;input.fields[output.mid]=1;return input};module.exports=Pie},{"./BatchTransform":848,"./Transform":869,datalib:406,"vega-dataflow":710,"vega-logging":776}],866:[function(require,module,exports){var Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Rank(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{field:{type:"field",default:null},normalize:{type:"value",default:false}});this._output={rank:"rank"};return this.mutates(true)}var prototype=Rank.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Rank;prototype.batchTransform=function(input,data){log.debug(input,["rank"]);var rank=this._output.rank,norm=this.param("normalize"),field=this.param("field").accessor,keys={},i,len=data.length,klen,d,f;if(field){for(i=0,klen=0;i<len;++i){d=data[i];keys[f=field(d)]=keys[f]||(keys[f]=++klen)}}for(i=0;i<len&&(d=data[i]);++i){if(field&&(f=field(d))){Tuple.set(d,rank,norm?keys[f]/klen:keys[f])}else{Tuple.set(d,rank,norm?(i+1)/len:i+1)}}input.fields[rank]=1;return input};module.exports=Rank},{"./BatchTransform":848,"./Transform":869,"vega-dataflow":710,"vega-logging":776}],867:[function(require,module,exports){var dl=require("datalib"),log=require("vega-logging"),Transform=require("./Transform");function Sort(graph){Transform.prototype.init.call(this,graph);Transform.addParameters(this,{by:{type:"array<field>"}});this.router(true)}var prototype=Sort.prototype=Object.create(Transform.prototype);prototype.constructor=Sort;prototype.transform=function(input){log.debug(input,["sorting"]);if(input.add.length||input.mod.length||input.rem.length){input.sort=dl.comparator(this.param("by").field)}return input};module.exports=Sort},{"./Transform":869,datalib:406,"vega-logging":776}],868:[function(require,module,exports){var dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Stack(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{groupby:{type:"array<field>"},sortby:{type:"array<field>"},field:{type:"field"},offset:{type:"value",default:"zero"}});this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"};return this.mutates(true)}var prototype=Stack.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Stack;prototype.batchTransform=function(input,data){log.debug(input,["stacking"]);var groupby=this.param("groupby").accessor,sortby=dl.comparator(this.param("sortby").field),field=this.param("field").accessor,offset=this.param("offset"),output=this._output;var groups=partition(data,groupby,sortby,field);for(var i=0,max=groups.max;i<groups.length;++i){var group=groups[i],sum=group.sum,off=offset==="center"?(max-sum)/2:0,scale=offset==="normalize"?1/sum:1,j,x,a,b=off,v=0;for(j=0;j<group.length;++j){x=group[j];a=b;v+=field(x);b=scale*v+off;Tuple.set(x,output.start,a);Tuple.set(x,output.end,b);Tuple.set(x,output.mid,.5*(a+b))}}input.fields[output.start]=1;input.fields[output.end]=1;input.fields[output.mid]=1;return input};function partition(data,groupby,sortby,field){var groups=[],get=function(f){return f(x)},map,i,x,k,g,s,max;if(groupby==null){groups.push(data.slice())}else{for(map={},i=0;i<data.length;++i){x=data[i];k=groupby.map(get);g=map[k]||(groups.push(map[k]=[]),map[k]);g.push(x)}}for(k=0,max=0;k<groups.length;++k){g=groups[k];for(i=0,s=0;i<g.length;++i){s+=field(g[i])}g.sum=s;if(s>max)max=s;if(sortby!=null)g.sort(sortby)}groups.max=max;return groups}module.exports=Stack},{"./BatchTransform":848,"./Transform":869,datalib:406,"vega-dataflow":710,"vega-logging":776}],869:[function(require,module,exports){var df=require("vega-dataflow"),Base=df.Node.prototype,Deps=df.Dependencies,Parameter=require("./Parameter");function Transform(graph){if(graph)Base.init.call(this,graph)}Transform.addParameters=function(proto,params){proto._parameters=proto._parameters||{};for(var name in params){var p=params[name],param=new Parameter(name,p.type,proto);proto._parameters[name]=param;if(p.type==="custom"){if(p.set)param.set=p.set.bind(param);if(p.get)param.get=p.get.bind(param)}if(p.hasOwnProperty("default"))param.set(p.default)}};var prototype=Transform.prototype=Object.create(Base);prototype.constructor=Transform;prototype.param=function(name,value){var param=this._parameters[name];return param===undefined?this:arguments.length===1?param.get():param.set(value)};prototype.transform=function(input){return input};prototype.evaluate=function(input){var reset=this._stamp<input.stamp&&this.dependency(Deps.SIGNALS).reduce(function(c,s){return c+=input.signals[s]?1:0},0);return this.transform(input,reset)};prototype.output=function(map){for(var key in this._output){if(map[key]!==undefined){this._output[key]=map[key]}}return this};module.exports=Transform},{"./Parameter":864,"vega-dataflow":710}],870:[function(require,module,exports){var dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Treeify(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{groupby:{type:"array<field>"}});this._output={children:"children",parent:"parent"};return this.router(true).produces(true)}var prototype=Treeify.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Treeify;prototype.batchTransform=function(input,data){log.debug(input,["treeifying"]);var fields=this.param("groupby").field,childField=this._output.children,parentField=this._output.parent,summary=[{name:"*",ops:["values"],as:[childField]}],aggrs=fields.map(function(f){return dl.groupby(f).summarize(summary)}),prev=this._internal||[],curr=[],i,n;function level(index,node,values){var vals=aggrs[index].execute(values);node[childField]=vals;vals.forEach(function(n){n[parentField]=node;curr.push(Tuple.ingest(n));if(index+1<fields.length)level(index+1,n,n[childField]);else n[childField].forEach(function(c){c[parentField]=n})})}var root=Tuple.ingest({});root[parentField]=null;curr.push(root);level(0,root,data);for(i=0,n=curr.length;i<n;++i){input.add.push(curr[i])}for(i=0,n=prev.length;i<n;++i){input.rem.push(prev[i])}this._internal=curr;return input};module.exports=Treeify},{"./BatchTransform":848,"./Transform":869,datalib:406,"vega-dataflow":710,"vega-logging":776}],871:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,dl=require("datalib"),Tuple=require("vega-dataflow").Tuple,log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");var defaultRatio=.5*(1+Math.sqrt(5));function Treemap(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{sort:{type:"array<field>",default:["-value"]},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"field",default:"value"},size:{type:"array<value>",default:require("./screen").size},round:{type:"value",default:true},sticky:{type:"value",default:false},ratio:{type:"value",default:defaultRatio},padding:{type:"value",default:null},mode:{type:"value",default:"squarify"}});this._layout=d3.layout.treemap();this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"};return this.mutates(true)}var prototype=Treemap.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Treemap;prototype.batchTransform=function(input,data){log.debug(input,["treemap"]);var layout=this._layout,output=this._output,sticky=this.param("sticky"),parent=this.param("parent").accessor,root=data.filter(function(d){return parent(d)===null})[0];if(layout.sticky()!==sticky){layout.sticky(sticky)}layout.sort(dl.comparator(this.param("sort").field)).children(this.param("children").accessor).value(this.param("field").accessor).size(this.param("size")).round(this.param("round")).ratio(this.param("ratio")).padding(this.param("padding")).mode(this.param("mode")).nodes(root);data.forEach(function(n){Tuple.set(n,output.x,n.x);Tuple.set(n,output.y,n.y);Tuple.set(n,output.width,n.dx);Tuple.set(n,output.height,n.dy);Tuple.set(n,output.depth,n.depth)});input.fields[output.x]=1;input.fields[output.y]=1;input.fields[output.width]=1;input.fields[output.height]=1;input.fields[output.depth]=1;return input};module.exports=Treemap}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./BatchTransform":848,"./Transform":869,"./screen":875,datalib:406,"vega-dataflow":710,"vega-logging":776}],872:[function(require,module,exports){(function(global){(function(){var d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,Tuple=require("vega-dataflow/src/Tuple"),log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Voronoi(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{clipExtent:{type:"array<value>",default:require("./screen").extent},x:{type:"field",default:"layout_x"},y:{type:"field",default:"layout_y"}});this._layout=d3.geom.voronoi();this._output={path:"layout_path"};return this.mutates(true)}var prototype=Voronoi.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Voronoi;prototype.batchTransform=function(input,data){log.debug(input,["voronoi"]);var pathname=this._output.path;var polygons=this._layout.clipExtent(this.param("clipExtent")).x(this.param("x").accessor).y(this.param("y").accessor)(data);for(var i=0;i<data.length;++i){if(polygons[i])Tuple.set(data[i],pathname,"M"+polygons[i].join("L")+"Z")}input.fields[pathname]=1;return input};module.exports=Voronoi}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./BatchTransform":848,"./Transform":869,"./screen":875,"vega-dataflow/src/Tuple":709,"vega-logging":776}],873:[function(require,module,exports){(function(global){(function(){var dl=require("datalib"),d3=typeof window!=="undefined"?window["d3"]:typeof global!=="undefined"?global["d3"]:null,d3_cloud=typeof window!=="undefined"?window["d3"]["layout"]["cloud"]:typeof global!=="undefined"?global["d3"]["layout"]["cloud"]:null,canvas=require("vega-scenegraph").canvas,Tuple=require("vega-dataflow/src/Tuple"),log=require("vega-logging"),Transform=require("./Transform"),BatchTransform=require("./BatchTransform");function Wordcloud(graph){BatchTransform.prototype.init.call(this,graph);Transform.addParameters(this,{size:{type:"array<value>",default:require("./screen").size},text:{type:"field",default:"data"},rotate:{type:"field|value",default:0},font:{type:"field|value",default:{value:"sans-serif"}},fontSize:{type:"field|value",default:14},fontStyle:{type:"field|value",default:{value:"normal"}},fontWeight:{type:"field|value",default:{value:"normal"}},fontScale:{type:"array<value>",default:[10,50]},padding:{type:"value",default:1},spiral:{type:"value",default:"archimedean"}});this._layout=d3_cloud().canvas(canvas.instance);this._output={x:"layout_x",y:"layout_y",font:"layout_font",fontSize:"layout_fontSize",fontStyle:"layout_fontStyle",fontWeight:"layout_fontWeight",rotate:"layout_rotate"};return this.mutates(true)}var prototype=Wordcloud.prototype=Object.create(BatchTransform.prototype);prototype.constructor=Wordcloud;function get(p){return p&&p.accessor||p}function wrap(tuple){var x=Object.create(tuple);x._tuple=tuple;return x}prototype.batchTransform=function(input,data){log.debug(input,["wordcloud"]);var layout=this._layout,output=this._output,fontSize=this.param("fontSize"),range=fontSize.accessor&&this.param("fontScale"),size,scale;fontSize=fontSize.accessor||d3.functor(fontSize);if(range.length){scale=d3.scale.sqrt().domain(dl.extent(data,size=fontSize)).range(range);fontSize=function(x){return scale(size(x))}}layout.size(this.param("size")).text(get(this.param("text"))).padding(this.param("padding")).spiral(this.param("spiral")).rotate(get(this.param("rotate"))).font(get(this.param("font"))).fontStyle(get(this.param("fontStyle"))).fontWeight(get(this.param("fontWeight"))).fontSize(fontSize).words(data.map(wrap)).on("end",function(words){var size=layout.size(),dx=size[0]>>1,dy=size[1]>>1,w,t,i,len;for(i=0,len=words.length;i<len;++i){w=words[i];t=w._tuple;Tuple.set(t,output.x,w.x+dx);Tuple.set(t,output.y,w.y+dy);Tuple.set(t,output.font,w.font);Tuple.set(t,output.fontSize,w.size);Tuple.set(t,output.fontStyle,w.style);Tuple.set(t,output.fontWeight,w.weight);Tuple.set(t,output.rotate,w.rotate)}}).start();for(var key in output)input.fields[output[key]]=1;return input};module.exports=Wordcloud}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./BatchTransform":848,"./Transform":869,"./screen":875,datalib:406,"vega-dataflow/src/Tuple":709,"vega-logging":776,"vega-scenegraph":777}],874:[function(require,module,exports){module.exports={aggregate:require("./Aggregate"),bin:require("./Bin"),cross:require("./Cross"),countpattern:require("./CountPattern"),linkpath:require("./LinkPath"),facet:require("./Facet"),filter:require("./Filter"),fold:require("./Fold"),force:require("./Force"),formula:require("./Formula"),geo:require("./Geo"),geopath:require("./GeoPath"),hierarchy:require("./Hierarchy"),impute:require("./Impute"),lookup:require("./Lookup"),pie:require("./Pie"),rank:require("./Rank"),sort:require("./Sort"),stack:require("./Stack"),treeify:require("./Treeify"),treemap:require("./Treemap"),voronoi:require("./Voronoi"),wordcloud:require("./Wordcloud")}},{"./Aggregate":847,"./Bin":849,"./CountPattern":850,"./Cross":851,"./Facet":852,"./Filter":854,"./Fold":855,"./Force":856,"./Formula":857,"./Geo":858,"./GeoPath":859,"./Hierarchy":860,"./Impute":861,"./LinkPath":862,"./Lookup":863,"./Pie":865,"./Rank":866,"./Sort":867,"./Stack":868,"./Treeify":870,"./Treemap":871,"./Voronoi":872,"./Wordcloud":873}],875:[function(require,module,exports){module.exports={size:[{signal:"width"},{signal:"height"}],mid:[{expr:"width/2"},{expr:"height/2"}],extent:[{expr:"[-padding.left, -padding.top]"},{expr:"[width+padding.right, height+padding.bottom]"}]}},{}],876:[function(require,module,exports){var dl=require("datalib");var TIME="time",UTC="utc",STRING="string",ORDINAL="ordinal",NUMBER="number";function getTickFormat(scale,tickCount,tickFormatType,tickFormatString){var formatType=tickFormatType||inferFormatType(scale);return getFormatter(scale,tickCount,formatType,tickFormatString)}function inferFormatType(scale){switch(scale.type){case TIME:return TIME;case UTC:return UTC;case ORDINAL:return STRING;default:return NUMBER}}function logFilter(scale,domain,count,f){if(count==null)return f;var base=scale.base(),k=Math.min(base,scale.ticks().length/count),v=domain[0]>0?(e=1e-12,Math.ceil):(e=-1e-12,Math.floor),e;function log(x){return(domain[0]<0?-Math.log(x>0?0:-x):Math.log(x<0?0:x))/Math.log(base)}function pow(x){return domain[0]<0?-Math.pow(base,-x):Math.pow(base,x)}return function(d){return pow(v(log(d)+e))/d>=k?f(d):""}}function getFormatter(scale,tickCount,formatType,str){var fmt=dl.format,log=scale.type==="log",domain;switch(formatType){case NUMBER:domain=scale.domain();return log?logFilter(scale,domain,tickCount,fmt.auto.number(str||null)):fmt.auto.linear(domain,tickCount,str||null);case TIME:return(str?fmt:fmt.auto).time(str);case UTC:return(str?fmt:fmt.auto).utc(str);default:return String}}module.exports={getTickFormat:getTickFormat}},{datalib:406}],877:[function(require,module,exports){var dl=require("datalib"),u={};dl.extend(u,require("./format"));module.exports=dl.extend(u,dl)},{"./format":876,datalib:406}],878:[function(require,module,exports){module.exports=function(def,config,property,defaultVal){if(def[property]!==undefined){return def[property]}else if(config!==undefined&&config[property]!==undefined){return config[property]}else if(defaultVal!==undefined){return defaultVal}return undefined}},{}],879:[function(require,module,exports){var builders=require("ast-types").builders;var _=require("underscore");function isLocationNode(node){return _.has(node,"start")&&_.has(node,"end")}module.exports=_.mapObject(builders,function(builder){return function(){var args=_.toArray(arguments);if(args.length>0&&isLocationNode(_.last(args))){var node=builder.apply(null,args.slice(0,-1));node.loc=_.last(args);return node}else{return builder.apply(null,args)}}})},{"ast-types":376,underscore:700}],880:[function(require,module,exports){var $=require("jquery"),_=require("underscore");var vg=require("vega"),vl=require("vega-lite");var kde=require("./stats").kde;function renderArray(specs,_options){var options=_.defaults(_options||{},{regularVega:false});var nSpecsRemaining=specs.length;var resultContainer=wpEditor.makeResultContainer();var $zoomDiv=$("<div>").addClass("zoomDiv");_.each(specs,function(spec){var vgSpec=options.regularVega?spec:vl.compile(spec).spec;var thumbnailContainer=$("<div>").addClass("thumbnail");$(resultContainer).append(thumbnailContainer);vg.parse.spec(vgSpec,function(error,chart){var view=chart({el:thumbnailContainer[0],renderer:"svg"}).update();var $svg=$(view._el).find("svg");var origHeight=$svg.attr("height");var origWidth=$svg.attr("width");var origTransform=$svg.children().attr("transform");$svg.attr({height:origHeight*.2,width:origWidth*.2});$svg.children().attr("transform","scale(0.2) "+origTransform);$svg.click(function(){var $zoomSvg=$(this).clone().attr({height:origHeight,width:origWidth});debugger;$zoomSvg.children().attr("transform",origTransform);$zoomDiv.empty().append($zoomSvg)})})});$(resultContainer).append($("<div>").addClass("clearboth")).append($zoomDiv)}function perms(data){data=data.slice();var permutations=[],stack=[];function doPerm(){if(data.length==0){permutations.push(stack.slice())}for(var i=0;i<data.length;i++){var x=data.splice(i,1);stack.push(x);doPerm();stack.pop();data.splice(i,0,x)}}doPerm();return permutations}var cccr=function(args,options){var scores=args.scores,types=args.types,support=args.support;var typesExpanded=_.map(types,function(v,k){return{name:k,type:v}});var cDimNames=_(typesExpanded).chain().where({type:"categorical"}).pluck("name").value();var rDimNames=_(typesExpanded).chain().where({type:"real"}).pluck("name").value();var rDimName=rDimNames[0];var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var categoricalPermutations=perms(cDimNames);var specs=_.map(categoricalPermutations,function(perm){var dataGroupedByC=_.groupBy(data,function(obs){return JSON.stringify(_.pick(obs,cDimNames))});var densityEstimates=_.mapObject(dataGroupedByC,function(states,k){var groupWeight=util.sum(_.pluck(states,"prob"));var rValues=_.pluck(states,rDimName);var estimates=kde(rValues);_.each(estimates,function(est){est.density*=groupWeight});return estimates});var densityEstimatesTidied=_.chain(densityEstimates).map(function(vs,k){var kParsed=JSON.parse(k);_.each(vs,function(v){_.extend(v,kParsed)});return vs}).flatten(1).value();return{data:{values:densityEstimatesTidied},mark:"line",encoding:{column:{type:"nominal",field:perm[0]},row:{type:"nominal",field:perm[1]},color:{type:"nominal",field:perm[2],axis:{title:perm[2]}},x:{type:"quantitative",field:"item",axis:{title:rDimName}},y:{type:"quantitative",field:"density"}}}});renderArray(specs,{})};module.exports=cccr},{"./stats":885,jquery:527,underscore:700,vega:816,"vega-lite":775}],881:[function(require,module,exports){var _=require("underscore");var Closure=function(options){_.extend(this,_.defaults(options,{name:false,children:[],parent:false,variables:[]}))};Closure.prototype.addVariables=function(variables){this.variables=this.variables.concat(variables)};Closure.prototype.addChild=function(child){child.parent=this;this.children.push(child)};Closure.prototype.orphanize=function(){return{name:this.name,children:this.children.map(function(x){return x.orphanize()}),variables:this.variables}};module.exports=Closure},{underscore:700}],882:[function(require,module,exports){var _=require("underscore"),$=require("jquery");var esprima=require("esprima");var escodegen=require("escodegen"),gen=escodegen.generate;var escope=require("escope");var estraverse=require("estraverse"),traverse=estraverse.traverse,replace=estraverse.replace;var lodash=require("lodash");var Closure=require("./closure");var reflection=require("./reflection");sigma=require("sigma");sigma.plugins={};(function(){if(typeof sigma==="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var _id=0,_cache={};function parseColor(val){if(_cache[val])return _cache[val];var result=[0,0,0];if(val.match(/^#/)){val=(val||"").replace(/^#/,"");result=val.length===3?[parseInt(val.charAt(0)+val.charAt(0),16),parseInt(val.charAt(1)+val.charAt(1),16),parseInt(val.charAt(2)+val.charAt(2),16)]:[parseInt(val.charAt(0)+val.charAt(1),16),parseInt(val.charAt(2)+val.charAt(3),16),parseInt(val.charAt(4)+val.charAt(5),16)]}else if(val.match(/^ *rgba? *\(/)){val=val.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/);result=[+val[1],+val[2],+val[3]]}_cache[val]={r:result[0],g:result[1],b:result[2]};return _cache[val]}function interpolateColors(c1,c2,p){c1=parseColor(c1);c2=parseColor(c2);var c={r:c1.r*(1-p)+c2.r*p,g:c1.g*(1-p)+c2.g*p,b:c1.b*(1-p)+c2.b*p};return"rgb("+[c.r|0,c.g|0,c.b|0].join(",")+")"}sigma.plugins.animate=function(s,animate,options){var o=options||{},id=++_id,duration=o.duration||s.settings("animationsTime"),easing=typeof o.easing==="string"?sigma.utils.easings[o.easing]:typeof o.easing==="function"?o.easing:sigma.utils.easings.quadraticInOut,start=sigma.utils.dateNow(),nodes,startPositions;if(o.nodes&&o.nodes.length){if(typeof o.nodes[0]==="object")nodes=o.nodes;else nodes=s.graph.nodes(o.nodes)}else nodes=s.graph.nodes();startPositions=nodes.reduce(function(res,node){var k;res[node.id]={};for(k in animate)if(k in node)res[node.id][k]=node[k];return res},{});s.animations=s.animations||Object.create({});sigma.plugins.kill(s);var k,c;for(k in s.cameras){c=s.cameras[k];c.edgequadtree._enabled=false}function step(){var p=(sigma.utils.dateNow()-start)/duration;if(p>=1){nodes.forEach(function(node){for(var k in animate)if(k in animate)node[k]=node[animate[k]]});var k,c;for(k in s.cameras){c=s.cameras[k];c.edgequadtree._enabled=true}s.refresh();if(typeof o.onComplete==="function")o.onComplete()}else{p=easing(p);nodes.forEach(function(node){for(var k in animate)if(k in animate){if(k.match(/color$/))node[k]=interpolateColors(startPositions[node.id][k],node[animate[k]],p);else node[k]=node[animate[k]]*p+startPositions[node.id][k]*(1-p)}});s.refresh();s.animations[id]=requestAnimationFrame(step)}}step()};sigma.plugins.kill=function(s){for(var k in s.animations||{})cancelAnimationFrame(s.animations[k]);var k,c;for(k in s.cameras){c=s.cameras[k];c.edgequadtree._enabled=true}}})();(function(undefined){"use strict";if(typeof sigma==="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layout.noverlap");var settings={speed:3,scaleNodes:1.2,nodeMargin:5,gridSize:20,permittedExpansion:1.1,rendererIndex:0,maxIterations:500};var _instance={};var _eventEmitter={};function Noverlap(){var self=this;this.init=function(sigInst,options){options=options||{};this.sigInst=sigInst;this.config=sigma.utils.extend(options,settings);this.easing=options.easing;this.duration=options.duration;if(options.nodes){this.nodes=options.nodes;delete options.nodes}if(!sigma.plugins||typeof sigma.plugins.animate==="undefined"){throw new Error("sigma.plugins.animate is not declared")}this.running=false};this.atomicGo=function(){if(!this.running||this.iterCount<1)return false;var nodes=this.nodes||this.sigInst.graph.nodes(),nodesCount=nodes.length,i,n,n1,n2,xmin=Infinity,xmax=-Infinity,ymin=Infinity,ymax=-Infinity,xwidth,yheight,xcenter,ycenter,grid,row,col,minXBox,maxXBox,minYBox,maxYBox,adjacentNodes,subRow,subCol,nxmin,nxmax,nymin,nymax;this.iterCount--;this.running=false;for(i=0;i<nodesCount;i++){n=nodes[i];n.dn.dx=0;n.dn.dy=0;xmin=Math.min(xmin,n.dn_x-(n.dn_size*self.config.scaleNodes+self.config.nodeMargin));xmax=Math.max(xmax,n.dn_x+(n.dn_size*self.config.scaleNodes+self.config.nodeMargin));ymin=Math.min(ymin,n.dn_y-(n.dn_size*self.config.scaleNodes+self.config.nodeMargin));ymax=Math.max(ymax,n.dn_y+(n.dn_size*self.config.scaleNodes+self.config.nodeMargin))}xwidth=xmax-xmin;yheight=ymax-ymin;xcenter=(xmin+xmax)/2;ycenter=(ymin+ymax)/2;xmin=xcenter-self.config.permittedExpansion*xwidth/2;xmax=xcenter+self.config.permittedExpansion*xwidth/2;ymin=ycenter-self.config.permittedExpansion*yheight/2;ymax=ycenter+self.config.permittedExpansion*yheight/2;grid={};for(row=0;row<self.config.gridSize;row++){grid[row]={};for(col=0;col<self.config.gridSize;col++){grid[row][col]=[]}}for(i=0;i<nodesCount;i++){n=nodes[i];nxmin=n.dn_x-(n.dn_size*self.config.scaleNodes+self.config.nodeMargin);nxmax=n.dn_x+(n.dn_size*self.config.scaleNodes+self.config.nodeMargin);nymin=n.dn_y-(n.dn_size*self.config.scaleNodes+self.config.nodeMargin);nymax=n.dn_y+(n.dn_size*self.config.scaleNodes+self.config.nodeMargin);minXBox=Math.floor(self.config.gridSize*(nxmin-xmin)/(xmax-xmin));maxXBox=Math.floor(self.config.gridSize*(nxmax-xmin)/(xmax-xmin));minYBox=Math.floor(self.config.gridSize*(nymin-ymin)/(ymax-ymin));maxYBox=Math.floor(self.config.gridSize*(nymax-ymin)/(ymax-ymin));for(col=minXBox;col<=maxXBox;col++){for(row=minYBox;row<=maxYBox;row++){grid[row][col].push(n.id)}}}adjacentNodes={};for(row=0;row<self.config.gridSize;row++){for(col=0;col<self.config.gridSize;col++){grid[row][col].forEach(function(nodeId){if(!adjacentNodes[nodeId]){adjacentNodes[nodeId]=[]}for(subRow=Math.max(0,row-1);subRow<=Math.min(row+1,self.config.gridSize-1);subRow++){for(subCol=Math.max(0,col-1);subCol<=Math.min(col+1,self.config.gridSize-1);subCol++){grid[subRow][subCol].forEach(function(subNodeId){if(subNodeId!==nodeId&&adjacentNodes[nodeId].indexOf(subNodeId)===-1){adjacentNodes[nodeId].push(subNodeId)}})}}})}}for(i=0;i<nodesCount;i++){n1=nodes[i];adjacentNodes[n1.id].forEach(function(nodeId){var n2=self.sigInst.graph.nodes(nodeId);var xDist=n2.dn_x-n1.dn_x;var yDist=n2.dn_y-n1.dn_y;var dist=Math.sqrt(xDist*xDist+yDist*yDist);var collision=dist<n1.dn_size*self.config.scaleNodes+self.config.nodeMargin+(n2.dn_size*self.config.scaleNodes+self.config.nodeMargin);if(collision){self.running=true;if(dist>0){n2.dn.dx+=xDist/dist*(1+n1.dn_size);n2.dn.dy+=yDist/dist*(1+n1.dn_size)}else{n2.dn.dx+=xwidth*.01*(.5-Math.random());n2.dn.dy+=yheight*.01*(.5-Math.random())}}})}for(i=0;i<nodesCount;i++){n=nodes[i];if(!n.fixed){n.dn_x=n.dn_x+n.dn.dx*.1*self.config.speed;n.dn_y=n.dn_y+n.dn.dy*.1*self.config.speed}}if(this.running&&this.iterCount<1){this.running=false}return this.running};this.go=function(){this.iterCount=this.config.maxIterations;while(this.running){this.atomicGo()}this.stop()};this.start=function(){if(this.running)return;var nodes=this.sigInst.graph.nodes();var prefix=this.sigInst.renderers[self.config.rendererIndex].options.prefix;this.running=true;for(var i=0;i<nodes.length;i++){nodes[i].dn_x=nodes[i][prefix+"x"];nodes[i].dn_y=nodes[i][prefix+"y"];nodes[i].dn_size=nodes[i][prefix+"size"];nodes[i].dn={dx:0,dy:0}}_eventEmitter[self.sigInst.id].dispatchEvent("start");this.go()};this.stop=function(){var nodes=this.sigInst.graph.nodes();this.running=false;if(this.easing){_eventEmitter[self.sigInst.id].dispatchEvent("interpolate");sigma.plugins.animate(self.sigInst,{x:"dn_x",y:"dn_y"},{easing:self.easing,onComplete:function(){self.sigInst.refresh();for(var i=0;i<nodes.length;i++){nodes[i].dn=null;nodes[i].dn_x=null;nodes[i].dn_y=null}_eventEmitter[self.sigInst.id].dispatchEvent("stop")},duration:self.duration})}else{for(var i=0;i<nodes.length;i++){nodes[i].x=nodes[i].dn_x;nodes[i].y=nodes[i].dn_y}this.sigInst.refresh();for(var i=0;i<nodes.length;i++){nodes[i].dn=null;nodes[i].dn_x=null;nodes[i].dn_y=null}_eventEmitter[self.sigInst.id].dispatchEvent("stop")}};this.kill=function(){this.sigInst=null;this.config=null;this.easing=null}}sigma.prototype.configNoverlap=function(config){var sigInst=this;if(!config)throw new Error('Missing argument: "config"');if(!_instance[sigInst.id]){_instance[sigInst.id]=new Noverlap;_eventEmitter[sigInst.id]={};sigma.classes.dispatcher.extend(_eventEmitter[sigInst.id]);sigInst.bind("kill",function(){_instance[sigInst.id].kill();_instance[sigInst.id]=null;_eventEmitter[sigInst.id]=null})}_instance[sigInst.id].init(sigInst,config);return _eventEmitter[sigInst.id]};sigma.prototype.startNoverlap=function(config){var sigInst=this;if(config){this.configNoverlap(sigInst,config)}_instance[sigInst.id].start();return _eventEmitter[sigInst.id]};sigma.prototype.isNoverlapRunning=function(){var sigInst=this;return!!_instance[sigInst.id]&&_instance[sigInst.id].running}}).call(this);var getIdentifiers=function(t,name){var names=[];traverse(t,{enter:function(node,parent){if(node.type=="Identifier"){names.push(node.name)}},leave:function(node,parent){}});return names};var topLevelDependencies=function(ast){var fnAst;traverse(ast,{enter:function(node,parent){if(node.type=="FunctionExpression"){fnAst=node;this.break()}}});var varNames=reflection.getTopLevelVars(fnAst);var modelBody=fnAst.body.body;return _.chain(varNames).map(function(varName){var declaration=_.find(modelBody,function(ast1){return ast1.type=="VariableDeclaration"&&ast1.declarations[0].id.name==varName});var otherIdentifiers=_.without(getIdentifiers(declaration),varName);return[varName,_.intersection(varNames,otherIdentifiers)]}).object().value()};var bayesBall=function(dependencies,query,givens){var getParents=function(node){return dependencies[node]};var getChildren=function(node){return _.keys(_.pick(dependencies,function(v,k){return _.contains(v,node)}))};var curNode;var numVisited=0;var visited={};var queue=[query];var relation=function(a,b){if(_.contains(dependencies[a],b)){return"child"}else{return"parent"}};while(true){if(queue.length==0){break}var lastNode=curNode;curNode=queue.shift();var from=!lastNode?"child":relation(lastNode,curNode);if(!_.has(visited,curNode)){visited[curNode]={}}if(visited[curNode][from]){continue}visited[curNode][from]=true;if(from=="child"){if(_.contains(givens,curNode)){}else{queue=queue.concat(getParents(curNode),getChildren(curNode))}}else{if(_.contains(givens,curNode)){queue=queue.concat(getParents(curNode))}else{queue=queue.concat(getChildren(curNode))}}}return visited};function dependenciesToSigmaSpec(deps){var spec={};var nodes=_.keys(deps);spec.nodes=_.map(nodes,function(node,i){return{id:node,label:node,x:Math.random()*i,y:Math.random()*i,size:100}});var edgeNum=0;spec.edges=_.chain(deps).map(function(parents,child){return _.map(parents,function(parent){return{id:[parent,child].join("->"),source:parent,target:child,type:"arrow",color:"blue",size:50,weight:1}})}).flatten().value();return spec}var structure=function(f){var wpplSource=reflection.getWpplSource(f);var ast=esprima.parse(wpplSource);ast=reflection.uniqueNames(ast);var container=wpEditor.makeResultContainer();var containerId="sigma"+_.now();$(container).attr({id:containerId}).css({height:"500px"});var dependencies=topLevelDependencies(ast);var graphMock={nodes:[{id:"n0",label:"A node",x:0,y:0,size:3},{id:"n1",label:"Another node",x:3,y:1,size:2},{id:"n2",label:"And a last one",x:1,y:3,size:1}],edges:[{id:"e0",source:"n0",target:"n1",type:"arrow",size:100,weight:1},{id:"e1",source:"n1",target:"n2"},{id:"e2",source:"n2",target:"n0"}]};var graph=dependenciesToSigmaSpec(dependencies);var sigmaSpec={container:containerId,settings:{defaultNodeColor:"#ec5148",labelThreshold:0,minNodeSize:20,maxNodeSize:20,minEdgeSize:3,maxEdgeSize:3,minArrowSize:10},graph:graph};var s=new sigma(sigmaSpec);s.startNoverlap({nodeMargin:5})};var cliques=function(f,MOCK_observedVars,MOCK_queryVars){var wpplSource=reflection.getWpplSource(f);var ast=esprima.parse(wpplSource);ast=reflection.uniqueNames(ast);var dependencies=topLevelDependencies(ast);var observedVars=MOCK_observedVars;var queryVars=MOCK_queryVars;var dependencySets=_.map(queryVars,function(queryVar){return _.keys(bayesBall(dependencies,queryVar,observedVars))});var runningDependencySets=[];_.each(dependencySets,function(curSet){var overlapsCurrent=function(prevSet){return _.intersection(curSet,prevSet).length>0};var partitioned=_.groupBy(runningDependencySets,overlapsCurrent),dontMerge=partitioned["false"]||[],doMerge=partitioned["true"]||[];var merged=_.unique(_.flatten(doMerge).concat(curSet));runningDependencySets=dontMerge.concat([merged])});return runningDependencySets};module.exports={structure:structure,cliques:cliques}},{"./closure":881,"./reflection":884,escodegen:467,escope:483,esprima:491,estraverse:496,jquery:527,lodash:531,sigma:687,underscore:700}],883:[function(require,module,exports){(function(process,global){(function(){var _=require("underscore");var d3=require("d3");var $=require("jquery");var dependencyAnalysis=require("./dependency-analysis");var reflection=require("./reflection");var open=require("open");global.d3=d3;var vl=require("vega-lite");var vg=require("vega");global.vg=vg;var React=require("react");var ReactDOM=require("react-dom");var md5=require("md5");var stats=require("./stats"),kde=stats.kde,kde2d=stats.kde2d;function runningInBrowser(){return typeof window==="object"&&typeof navigator==="object"}function isDist(x){return x.isContinuous||x.support&&x.score||x.score}function isTensor(x){return x instanceof T.__Tensor}function getScores(erp){return _.map(erp.support(),function(state){return scorer(erp,state)})}function scorer(erp,val){if(erp.score.length==2){return erp.score(null,val)}else{return erp.score(val)}}function samplesToDist(xs){var n=xs.length;var frequencies=_.countBy(xs,function(x){return JSON.stringify(x)});var support=_.keys(frequencies).map(function(x){return JSON.parse(x)});var probabilities=_.mapObject(frequencies,function(freq,key){return freq/n});var scorer=function(x){return Math.log(probabilities[JSON.stringify(x)])};var sampler=function(){return global.categorical(probabilities,support)};var ret={sample:sampler,score:scorer,support:function(){return support}};return ret}function isDataFrame(arr){var firstKeys=_.keys(arr[0]);if(_.isArray(arr[0])){return false}if(firstKeys.length==0){return false}for(var i=0,ii=arr.length;i<ii;i++){var rowKeys=_.keys(arr[i]);if(!_.isEqual(firstKeys,rowKeys)){return false}}return true}function isVector(arr){var anyStructuredObjects=false;for(var i=0,n=arr.length;i<n;i++){if(_.isObject(arr[i])){return false}}return true}function isPseudoDataFrame(arr,strict){if(strict===undefined){strict=true}var subArrayLengths=arr.map(function(x){return x.length});var subArrayLengthsOk=_.unique(subArrayLengths).length==1;if(!subArrayLengthsOk){return false}var n=subArrayLengths[0];var columnTypesOk=_.range(0,n).map(function(colNum){var values=_.pluck(arr,colNum+"");var types=_.map(values,function(v){return typeof v});return _.unique(types).length==1});return _.every(columnTypesOk)}var wait=function(ms,f){setTimeout(f,ms)};function stringifyIfObject(x){if(typeof x=="object"){return JSON.stringify(x)}else{return x}}var kindPrinter={};kindPrinter.c=function(args,options){var scores=args.scores,types=args.types,support=args.support;var fieldNames=_.keys(support[0]);var fieldName=fieldNames[0];var values=_.pluck(support,fieldName);var probs=scores.map(function(score){return Math.exp(score)});barWrapper(values,probs,_.extend({xLabel:fieldName,yLabel:"frequency"},options))};kindPrinter.i=function(args,options){var dist=args.dist,support=args.support;var fieldNames=_.keys(support[0]);var fieldName=fieldNames[0];var valuesNonZero=_.pluck(support,fieldName),values=_.range(_.min(valuesNonZero),_.max(valuesNonZero)+1);var probs=values.map(function(v){if(_.contains(valuesNonZero,v)){return Math.exp(dist.score(fieldName=="(state)"?v:_.object([fieldName],[v])))}else{return 0}});barWrapper(values,probs,_.extend({xLabel:fieldName,yLabel:"frequency"},options))};kindPrinter.r=function(args,options){var scores=args.scores,types=args.types,support=args.support;var fieldNames=_.keys(support[0]);var fieldName=fieldNames[0];var values=_.pluck(support,fieldName);var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var probs=_.pluck(data,"prob");var densityEstimates=kde(values,_.extend(options,{weights:probs}));var vlSpec={data:{values:densityEstimates},mark:"line",encoding:{x:{type:"quantitative",field:"item",axis:{title:fieldName},scale:{zero:false}},y:{type:"quantitative",field:"density"}}};renderSpec(vlSpec,options)};kindPrinter.cc=function(args,options){var scores=args.scores,types=args.types,support=args.support;var fieldNames=_.keys(support[0]);var field1Name=fieldNames[0],field1Levels=_.unique(_.pluck(support,field1Name)).length;var field2Name=fieldNames[1],field2Levels=_.unique(_.pluck(support,field2Name)).length;var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var vlSpec;if(field1Levels>5&&field2Levels>5){vlSpec={data:{values:data},mark:"text",encoding:{row:{field:field1Name,type:"nominal"},column:{field:field2Name,type:"nominal"},color:{field:"prob",type:"quantitative"},text:{field:"prob",type:"quantitative"}},config:{mark:{applyColorToBackground:true},numberFormat:".1e",scale:{textBandWidth:40}}}}else{var xName=field1Levels>field2Levels?field1Name:field2Name;var gName=field1Levels>field2Levels?field2Name:field1Name;vlSpec={data:{values:data},mark:"bar",encoding:{column:{field:xName,type:"ordinal",scale:{padding:4},axis:{orient:"bottom",axisWidth:1,offset:-8,labelAngle:270}},x:{field:gName,type:"ordinal",scale:{bandSize:6},axis:false},color:{field:gName,type:"nominal",scale:{range:"category10"}},y:{field:"prob",type:"quantitative",axis:{title:"Probability",format:",r"}}},config:{facet:{cell:{strokeWidth:0}}}}}renderSpec(vlSpec,options)};kindPrinter.cr=function(args,options){var scores=args.scores,types=args.types,support=args.support;var typesExpanded=_.map(types,function(v,k){return{name:k,type:v}});var cDimNames=_(typesExpanded).chain().where({type:"categorical"}).pluck("name").value();var rDimNames=_(typesExpanded).chain().where({type:"real"}).pluck("name").value();var cDimName=cDimNames[0];var rDimName=rDimNames[0];var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var dataGroupedByC=_.groupBy(data,function(obs){return obs[cDimName]});var densityEstimates=_.mapObject(dataGroupedByC,function(states,k){var groupWeight=util.sum(_.pluck(states,"prob"));var rValues=_.pluck(states,rDimName);var probs=_.pluck(states,"prob");var estimates=kde(rValues,{weights:probs});_.each(estimates,function(est){est.density*=groupWeight});return estimates});var densityEstimatesTidied=_.chain(densityEstimates).pairs().map(function(x){var cValue=x[0];var densityBins=x[1];densityBins.forEach(function(bin){bin[cDimName]=cValue});return densityBins}).flatten(1).value();var vlSpec={data:{values:densityEstimatesTidied},mark:"line",encoding:{x:{type:"quantitative",field:"item",axis:{title:rDimName},scale:{zero:false}},y:{type:"quantitative",field:"density"},color:{type:"nominal",field:cDimName,axis:{title:cDimName}}}};renderSpec(vlSpec,options)};kindPrinter.rr=function(args,options){var scores=args.scores,types=args.types,support=args.support;var fieldNames=_.keys(support[0]);var field1Name=fieldNames[0];var field2Name=fieldNames[1];var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var vlSpec={data:{values:data},mark:"point",encoding:{x:{field:field1Name,type:"quantitative",scale:{zero:false}},y:{field:field2Name,type:"quantitative",scale:{zero:false}},size:{field:"prob",type:"quantitative"},color:{field:"prob",type:"quantitative"},order:{field:"prob",type:"quantitative",sort:"ascending"}},config:{numberFormat:".1e"}};renderSpec(vlSpec,options)};kindPrinter.ccc=function(args,options){var scores=args.scores,types=args.types,support=args.support;var fieldNames=_.keys(support[0]);var field1Name=fieldNames[0];var field2Name=fieldNames[1];var field3Name=fieldNames[2];var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var bucketedData=_.groupBy(data,field3Name);_.each(bucketedData,function(d,field3Value){if(runningInBrowser()){global.print({},function(){},"",field3Name+" = "+field3Value)}var vlSpec={data:{values:d},mark:"text",encoding:{row:{field:field1Name,type:"nominal"},column:{field:field2Name,type:"nominal"},color:{field:"prob",type:"quantitative"},text:{field:"prob",type:"quantitative"}},config:{mark:{applyColorToBackground:true},numberFormat:".1e"}};renderSpec(vlSpec)})};kindPrinter.ccr=function(args,options){var scores=args.scores,types=args.types,support=args.support;var typesExpanded=_.map(types,function(v,k){return{name:k,type:v}});var cDimNames=_(typesExpanded).chain().where({type:"categorical"}).pluck("name").value();var rDimNames=_(typesExpanded).chain().where({type:"real"}).pluck("name").value();var facetDimName=cDimNames[0];var cDimName=cDimNames[1];var rDimName=rDimNames[0];var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var dataGroupedByC=_.groupBy(data,function(obs){return obs[facetDimName]+","+obs[cDimName]});var densityEstimates=_.mapObject(dataGroupedByC,function(states,k){var groupWeight=util.sum(_.pluck(states,"prob"));var rValues=_.pluck(states,rDimName);var probs=_.pluck(states,"prob");var estimates=kde(rValues,{weights:probs});_.each(estimates,function(est){est.density*=groupWeight});return estimates});var densityEstimatesTidied=_.chain(densityEstimates).pairs().map(function(x){var keySplit=x[0].split(",");var facetValue=keySplit[0];var cValue=keySplit[1];var densityBins=x[1];densityBins.forEach(function(bin){bin[facetDimName]=facetValue;bin[cDimName]=cValue});return densityBins}).flatten(1).value();var vlSpec={data:{values:densityEstimatesTidied},mark:"line",encoding:{x:{type:"quantitative",field:"item",axis:{title:rDimName},scale:{zero:false}},y:{type:"quantitative",field:"density"},color:{type:"nominal",field:cDimName,axis:{title:cDimName}},column:{type:"nominal",field:facetDimName}}};renderSpec(vlSpec,options)};kindPrinter.crr=function(args,options){var scores=args.scores,types=args.types,support=args.support;var typesExpanded=_.map(types,function(v,k){return{name:k,type:v}});var cDimNames=_(typesExpanded).chain().where({type:"categorical"}).pluck("name").value();var rDimNames=_(typesExpanded).chain().where({type:"real"}).pluck("name").value();var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var vlSpec={data:{values:data},mark:"point",encoding:{column:{field:cDimNames[0],type:"nominal"},x:{field:rDimNames[0],type:"quantitative",scale:{zero:false}},y:{field:rDimNames[1],type:"quantitative",scale:{zero:false}},size:{field:"prob",type:"quantitative"},color:{field:"prob",type:"quantitative"},order:{field:"prob",type:"quantitative",sort:"ascending"}},config:{numberFormat:".1e"}};renderSpec(vlSpec,options)};kindPrinter.cccr=require("./cccr");function parallelCoordinates(args,options){var types=args.types,support=args.support,scores=args.scores,options=options||{};var fieldNames=_.keys(support[0]);var data=_.zip(support,scores).map(function(x){return _.extend({prob:Math.exp(x[1])},x[0])});var overallScale={name:"ord",type:"ordinal",points:true,range:"width",domain:fieldNames};var probWidthScale={name:"probWidth",type:"linear",range:[1,3],domain:{data:"values",field:"prob"}};var probOpacityScale={name:"probOpacity",type:"log",range:[.2,1],domain:{data:"values",field:"prob"}};var individualScales=_.map(fieldNames,function(name){var domain=options.bounds&&options.bounds[name]?options.bounds[name]:{data:"values",field:name};return{name:name,type:"linear",range:"height",zero:false,nice:true,domain:domain}});var individualAxes=_.map(fieldNames,function(name){return{type:"y",scale:name,offset:{scale:"ord",value:name}}});var vegaSpec={data:[{name:"values",values:data},{name:"fields",values:fieldNames}],scales:[overallScale,probWidthScale,probOpacityScale].concat(individualScales),axes:individualAxes,marks:[{type:"group",from:{data:"values"},marks:[{type:"line",from:{data:"fields"},properties:{enter:{x:{scale:"ord",field:"data"},y:{scale:{datum:"data"},field:{parent:{datum:"data"}}},stroke:{value:"steelblue"},strokeWidth:{field:{parent:"prob"},scale:"probWidth"},strokeOpacity:{field:{parent:"prob"},scale:"probOpacity"}}}}]},{type:"text",from:{data:"fields"},properties:{enter:{x:{scale:"ord",field:"data",offset:-8},y:{field:{group:"height"},offset:6},fontWeight:{value:"bold"},fill:{value:"black"},text:{field:"data"},align:{value:"right"},baseline:{value:"top"}}}}]};renderSpec(vegaSpec,_.extend({regularVega:true},options))}function auto(obj,_options){var options=_.defaults(_options||{},{display:"block"});var getColumnType=function(columnValues){if(_.every(columnValues,_.isNumber)){return _.every(columnValues,Number.isInteger)?"integer":"real"}else{return"categorical"}};var getColumnTypes=function(df){var columnNames=_.keys(df[0]);return _.object(columnNames,_.map(columnNames,function(name){var columnValues=_.pluck(df,name);return getColumnType(columnValues)}))};var dist;if(_.isArray(obj)){dist=samplesToDist(obj)}else if(isDist(obj)){if(!obj.isContinuous){dist=obj}else{var n=options.samples||5e3;var name=obj.meta.name;console.info("viz: approximating "+name+" with "+n+" samples");var samples=[];while(n--){var sample=obj.sample();if(isTensor(sample)){sample=sample.toFlatArray()}samples.push(sample)}dist=samplesToDist(samples)}}else{throw new Error("autoviz takes a distribution or a list of samples as an argument")}var support;if(dist.support){support=dist.support()}else if(dist.meta.name=="Poisson"){console.info("viz: Setting support = {0, ..., 10} for Poisson distribution");support=_.range(11)}else{throw new Error("distribution has no support")}var supportStructure=isVector(support)?"vector":isPseudoDataFrame(support)?"pseudodataframe":isDataFrame(support)?"dataframe":"other";if(supportStructure=="other"){return table(dist)}var scores=_.map(support,function(state){return scorer(dist,state)});if(isVector(support)){support=support.map(function(x){return{"(state)":x}})}if(!isDataFrame(support)&&isPseudoDataFrame(support)){support=support.map(function(x){var n=x.length;var keys=_.range(0,n).map(function(i){return"(state_"+i+")"});return _.object(keys,x)})}var supportStringified=support.map(function(x){return _.mapObject(x,stringifyIfObject)});var columnTypesDict=getColumnTypes(support);var dfKind=_.values(columnTypesDict).map(function(str){return str.substring(0,1)}).sort().join("");if(dfKind.indexOf("c")==-1&&dfKind.length>=3){parallelCoordinates({types:columnTypesDict,support:supportStringified,scores:scores,dist:dist},options)}else if(_.has(kindPrinter,dfKind)){kindPrinter[dfKind]({types:columnTypesDict,support:supportStringified,scores:scores,dist:dist},options)}else if(_.has(kindPrinter,dfKind.replace(/i/g,"c"))){var transformedKind=dfKind.replace(/i/g,"c");var _typesDict=_.mapObject(columnTypesDict,function(v,k){return v=="integer"?"categorical":v});kindPrinter[transformedKind]({types:_typesDict,support:supportStringified,scores:scores,dist:dist},options)}else{console.log(dfKind);throw new Error("viz.auto() doesn't know how to render objects of kind "+dfKind)}}var GraphComponent=React.createClass({displayName:"GraphComponent",getInitialState:function(){return{view:0}},toggleSettings:function(){$(this.refs.wrench).toggleClass("white");$(this.refs.actions).toggleClass("expanded")},notYetImplemented:function(){alert("not yet implemented")},render:function(){var dataStringified=JSON.stringify(this.props.spec.data[0].values,null,2);var dataBlob=new Blob([dataStringified],{type:"application/json"});var dataUrl=URL.createObjectURL(dataBlob);var dataName=md5(dataStringified).substring(0,6)+".json";var vegaStringified=JSON.stringify(this.props.spec,null,2);var vegaBlob=new Blob([vegaStringified],{type:"application/json"});var vegaUrl=URL.createObjectURL(vegaBlob);var vegaName=md5(vegaStringified).substring(0,6)+".vega.json";var graphUrl=this.state.view==0?null:this.state.view.toImageURL("svg");var graphName=graphUrl==null?null:this.props.fileName||md5(graphUrl||"").substring(0,6)+".svg";return React.createElement("div",{className:"graphComponent"},React.createElement("div",{ref:"actions",className:"actions"},React.createElement("button",{ref:"wrench",className:"settings",onClick:this.toggleSettings}),React.createElement("ul",null,React.createElement("li",null,React.createElement("a",{href:graphUrl,download:graphName,target:"_blank"},"download graph")),React.createElement("li",null,React.createElement("a",{href:dataUrl,download:dataName,target:"_blank"},"download data")),React.createElement("li",null,React.createElement("a",{href:vegaUrl,download:vegaName,target:"_blank"},"download vega")),React.createElement("li",{onClick:this.notYetImplemented},"resize"))),React.createElement("div",{ref:"content",className:"content"}),React.createElement("div",{className:"clearboth"}))}});function renderSpec(spec,_options){var options=_.defaults(_options||{},{regularVega:false,fileName:false,smartNumbers:true,smartTickLabels:true,callback:function(){},css:{}});var vgSpec=options.regularVega?spec:vl.compile(spec).spec;if(options.smartNumbers){var formatterKeys=[",r",",.1r",",.2r",",.3r",",.4r",",.5r",",.6r",".1e"];var formatters=_.object(formatterKeys,_.map(formatterKeys,function(s){return d3.format(s)}));var allData=vgSpec.data;_.each(vgSpec.marks,function(mark){var scales=mark.scales;_.each(mark.axes,function(axis){var scale=_.findWhere(scales,{name:axis.scale}),scaleDomain=scale.domain;var domain;if(_.isArray(scaleDomain)){domain=scaleDomain}else{var dataSource=scale.domain.data,dataField=scale.domain.field||"item";domain=_.pluck(_.findWhere(allData,{name:dataSource}).values,dataField)}var sc=d3.scale.linear();sc.domain(domain);sc.range([scale.rangeMin,scale.rangeMax]);if(scale.nice){sc.nice()}var ticks=axis.values||sc.ticks(axis.ticks);var scores=_.map(formatterKeys,function(key){var f=formatters[key];var strings=_.map(ticks,function(tick){return f(tick)});var stringsAdjusted;var score;if(_.unique(strings).length<strings.length){score=9999999999}else{stringsAdjusted=_.map(strings,function(s){return s.replace(",","")});var lengths=_.pluck(stringsAdjusted,"length");score=_.max(lengths)}return{key:key,score:score+(key==".1e"?1:0),strings:strings,stringsAdjusted:stringsAdjusted}});var bestScore=_.min(_.pluck(scores,"score"));var bestKeys=_.pluck(_.where(scores,{score:bestScore}),"key");var bestKey=_.find(bestKeys,function(key){return key==",r"})||_.find(bestKeys,function(key){return key==",g"})||_.find(bestKeys,function(key){return key.indexOf("g")>-1})||_.find(bestKeys,function(key){return key.indexOf("r")>-1})||bestKeys[0];axis.format=bestKey})})}if(options.smartTickLabels){var marks=vgSpec.marks}if(runningInBrowser()){if(!_.has(wpEditor,"makeResultContainer")){}else{var resultContainer=wpEditor.makeResultContainer({css:options.css});var r=React.createElement(GraphComponent,_.extend({spec:vgSpec},_.pick(options,"fileName")));ReactDOM.render(r,resultContainer,function(){var comp=this;var node=this.refs.content;$(node).css({"min-height":255}).html("&nbsp;&nbsp;&nbsp&nbsp;Rendering graph...");vg.parse.spec(vgSpec,function(error,chart){$(node).empty();comp.setState({view:chart({el:node,renderer:"svg"}).update()});var tr=global["resumeTrampoline"];if(tr){tr(options.callback)}})})}}else{vg.parse.spec(vgSpec,function(error,chart){var view=chart({renderer:"svg"}).update();var svgText=view.svg();var now=new Date;var str=now.getUTCFullYear().toString()+"_"+(now.getUTCMonth()+1).toString()+"_"+now.getUTCDate()+"_"+now.getUTCHours()+"_"+now.getUTCMinutes()+"_"+now.getUTCSeconds();var fileName=options.fileName||str+".svg";if(require("fs").existsSync(fileName)){fileName=fileName.replace(".svg","");fileName+="_"+now.getMilliseconds()+".svg"}require("fs").writeFileSync(fileName,svgText);console.log("Rendered to "+fileName);if(process.env.WEBPPL_VIZ_AUTOOPEN){open(fileName)}util.trampolineRunners.cli()(options.callback())})}}function bar(df,options){options=_.defaults(options||{},{groupBy:false,xType:"nominal",fileName:false});var xName=_.keys(df[0])[0];var yName=_.keys(df[0])[1];var vlSpec={data:{values:df},mark:"bar",encoding:{x:{field:xName,type:options.xType,axis:{title:options.xLabel||xName},scale:{zero:false}},y:{field:yName,type:"quantitative",axis:{title:options.yLabel||yName}}}};if(options.groupBy){vlSpec.encoding.column={field:xName,type:"ordinal",scale:{padding:4},axis:{orient:"bottom",axisWidth:1,offset:-8,labelAngle:270}};vlSpec.encoding.x={field:options.groupBy,type:"ordinal",scale:{bandSize:6},axis:false};vlSpec.encoding.y.axis={grid:false};vlSpec.encoding.color={field:options.groupBy,type:"nominal",scale:{range:"category10"}};vlSpec.config={facet:{cell:{strokeWidth:0}}}}renderSpec(vlSpec,options)}function barWrapper(){var args=_.toArray(arguments);if(isDataFrame(arguments[0])){bar.apply(null,args)}else{var xs=args[0];var ys=args[1];var df=[];for(var i=0,ii=xs.length;i<ii;i++){df.push({x:xs[i],y:ys[i]})}bar.apply(null,[df].concat(args.slice(2)))}}function hist(obj,options){options=_.defaults(options||{},{numBins:12});var erp;if(_.isArray(obj)){erp=samplesToDist(obj)}else if(isDist(obj)){erp=obj}else{throw new Error("hist takes an ERP or a list of samples as an argument")}var rawSupport=erp.support(),probs=rawSupport.map(function(x){return Math.exp(scorer(erp,x))}),support;if(isDataFrame(rawSupport)){var key=_.keys(rawSupport[0])[0];options.xLabel=options.xLabel||key;support=_.pluck(rawSupport,key)}else{support=rawSupport}var xType,xDomain,xValues,xTickLabels,yValues,barWidth;if(!_.every(support,_.isNumber)){xType="nominal";xValues=support.map(stringifyIfObject);yValues=probs}else{xType="quantitative";var min=_.min(support),max=_.max(support);xDomain=[min,max];var numBins=max>min?options.numBins:1,binIndices=d3.range(numBins),bins=binIndices.map(function(){return[]}),binProbs=binIndices.map(function(){return 0});barWidth=120/numBins;var scale=d3.scale.quantize().domain(xDomain).range(binIndices);for(var i=0,ii=support.length;i<ii;i++){var x=support[i];var j=scale(x)||0;bins[j].push(x);binProbs[j]+=probs[i]}xTickLabels=binIndices.reduce(function(acc,x,i){var extent=scale.invertExtent(x);return acc.concat(i==0?extent:extent[1])},[]);xValues=_.zip(_.initial(xTickLabels,1),_.rest(xTickLabels)).map(function(pair){return(pair[0]+pair[1])/2});yValues=binProbs}var df=xValues.map(function(x,i){var y=yValues[i];return _.object([["x",x],["y",y]])});if(xType=="nominal"){df=_.sortBy(df,function(row){return row.x});xTickLabels=_.pluck(df,"x");xDomain=xTickLabels}var vlSpec={data:{values:df},mark:"bar",encoding:{x:{field:"x",type:xType,axis:{title:options.xLabel,values:_.unique(xTickLabels),labelAngle:270},scale:{zero:false,domain:xType=="quantitative"&&max==min?[.9*min,1.1*max]:xDomain}},y:{field:"y",type:"quantitative",axis:{title:"Probability"},scale:{zero:true}},size:xType=="nominal"?{}:{value:barWidth}}};renderSpec(vlSpec)}function scatter(df,options){options=_.defaults(options||{},{groupBy:false});var xName=_.keys(df[0])[0];var yName=_.keys(df[0])[1];var vlSpec={data:{values:df},mark:"point",encoding:{x:{field:xName,type:"quantitative",axis:{title:options.xName}},y:{field:yName,type:"quantitative",axis:{title:options.yName}}}};if(options.groupBy){vlSpec.encoding.color={field:options.groupBy,type:"nominal"}}renderSpec(vlSpec,options)}function scatterWrapper(){var args=_.toArray(arguments);if(isDataFrame(arguments[0])){scatter.apply(null,args)}else{var xs=args[0];var ys=args[1];var df=[];for(var i=0,ii=xs.length;i<ii;i++){df.push({x:xs[i],y:ys[i]})}scatter.apply(null,[df].concat(args.slice(2)))}}function heatMap(arg,options){var samples=[];if(!isDist(arg)){samples=arg}else{var n=arg.params.numSamples;var support=arg.support();support.forEach(function(s){var prob=Math.exp(arg.score(s)),m=Math.round(n*prob);for(var i=0;i<m;i++){samples.push(s)}})}var x,y;if(_.isArray(samples[0])){x=_.pluck(samples,"0");y=_.pluck(samples,"1")}else if(_.isObject(samples[0])){var keys=_.keys(samples[0]);x=_.pluck(samples,keys[0]);y=_.pluck(samples,keys[1])}var densityEstimate=kde2d(x,y);var spec={data:[{name:"csv",values:densityEstimate}],width:350,height:350,scales:[{name:"x",type:"linear",domain:{data:"csv",field:"x"},range:"width",zero:false},{name:"y",type:"linear",domain:{data:"csv",field:"y"},range:"height",zero:false},{name:"c",type:"linear",domain:{data:"csv",field:"density"},range:["#ffffff","#313695"]}],axes:[{type:"x",scale:"x",offset:16,ticks:10,title:keys?keys[0]:"x",properties:{labels:{angle:{value:45},align:{value:"left"}}}},{type:"y",scale:"y",offset:16,ticks:10,title:keys?keys[1]:"y"}],marks:[{type:"symbol",from:{data:"csv"},properties:{enter:{shape:{value:"square"},x:{scale:"x",field:"x"},size:{value:210},y:{scale:"y",field:"y"},fill:{scale:"c",field:"density"}}}}],legends:[{title:"density",fill:"c",values:[0,_.max(_.pluck(densityEstimate,"density"))]}]};renderSpec(spec,{regularVega:true})}function density(x,options){options=_.defaults(options||{},{bounds:"auto"});function extractNumber(z){return _.isNumber(z)?z:_.values(z)[0]}var xIsErp=isDist(x);var support=xIsErp?_.map(x.support(),extractNumber):x,weights=xIsErp?_.map(getScores(x),Math.exp):false;if(xIsErp&&isDataFrame(x.support())){var key=_.keys(x.support()[0])[0];options.xLabel=options.xLabel||key}else{options.xLabel="Value"}var min,max;if(options.bounds=="auto"){min=_.min(support);max=_.max(support)}else{min=options.bounds[0];max=options.bounds[1]}var densityEstimate=kde(support,_.extend({weights:weights},options));var vlSpec={data:{values:densityEstimate},mark:"line",encoding:{x:{field:"item",type:"quantitative",axis:{title:options.xLabel},scale:{domain:[min,max],zero:false}},y:{field:"density",type:"quantitative",axis:{title:"Density"}}},config:{mark:{interpolate:"monotone"}}};renderSpec(vlSpec,options)}function line(df,options){options=_.defaults(options||{},{groupBy:false,strokeWidth:2});var xName=_.keys(df[0])[0];var yName=_.keys(df[0])[1];var vlSpec={data:{values:df},mark:"line",config:{mark:{strokeWidth:options.strokeWidth}},encoding:{x:{field:xName,axis:{title:options.xLabel||xName},type:"quantitative"},y:{field:yName,axis:{title:options.yLabel||yName},type:"quantitative"}}};var filter=[];if(options.xBounds){filter.push({field:xName,range:options.xBounds});vlSpec.encoding.x.scale={domain:options.xBounds,zero:false}}if(options.yBounds){filter.push({field:yName,range:options.yBounds});vlSpec.encoding.y.scale={domain:options.yBounds,zero:false}}if(filter.length){vlSpec.transform={filter:filter}}if(options.groupBy){vlSpec.encoding.color={field:options.groupBy,type:"nominal"}}renderSpec(vlSpec,options)}function lineWrapper(){var args=_.toArray(arguments);if(isDataFrame(arguments[0])){line.apply(null,arguments)}else{var xs=args[0];var ys=args[1];var df=[];for(var i=0,ii=xs.length;i<ii;i++){df.push({x:xs[i],y:ys[i]})}line.apply(null,[df].concat(args.slice(2)))}}function table(obj,options){options=_.defaults(options||{},{log:false,top:false,destructure:true});var erp;if(_.isArray(obj)){erp=samplesToDist(obj)}else if(isDist(obj)){erp=obj}else{throw new Error("table takes an ERP or a list of samples as an argument")}var support=erp.support(),supportKeys=_.keys(support[0]),scores=support.map(function(state){return scorer(erp,state)});var sortedZipped=_.sortBy(_.zip(support,scores),function(z){return-z[1]});if(options.top){sortedZipped=sortedZipped.slice(0,options.top)}var tableString='<table class="wviz-table">';var doDestructure=options.destructure&&supportKeys.length>0;var headerString="<tr>";if(doDestructure){headerString+=supportKeys.map(function(k){return"<th>"+k+"</th>"}).join("")}else{headerString="<th>(state)</th>"}headerString+="<th>"+(options.log?"log probability":"probability")+"</th>";headerString+="</tr>";tableString+=headerString;sortedZipped.forEach(function(pair){var state=pair[0];var score=pair[1];var rowString="<tr>";if(doDestructure){rowString+=_.values(state).map(function(v){return"<td>"+stringifyIfObject(v)+"</td>"}).join("")}else{rowString+="<td>"+stringifyIfObject(state)+"</td>"}rowString+="<td>"+(options.log?score:Math.exp(score))+"</td>";rowString+="</tr>";tableString+=rowString});if(options.fileName){require("fs").writeFileSync(options.fileName,tableString);console.log("Rendered to "+options.fileName)}if(!(typeof wpEditor==="undefined")){var resultContainer=wpEditor.makeResultContainer();resultContainer.innerHTML=tableString}}function marginals(erp,options){var fullSupport=erp.support(),fullScores=getScores(erp),fullTable=_.map(fullScores,function(score,i){return _.extend({__score__:score},fullSupport[i])}),fields=_.keys(fullSupport[0]);_.each(fields,function(field){var support=_.unique(fullSupport.map(function(x){return _.pick(x,field)}),JSON.stringify);var fauxErp={support:function(){return support},score:function(x){var rows=_.where(fullTable,x);var scores=_.pluck(rows,"__score__");return util.logsumexp(scores)}};viz.auto(fauxErp,_.extend({css:{display:"inline-block"}},options))})}var coarsen=function(xs,numBins){var scale=d3.scale.quantile().domain(xs).range(d3.range(4));return xs.map(function(x){return scale(x)+""})};var viz=function(s,k,a){var _args=Array.prototype.slice.call(arguments,3);var callback=function(){return k(s,undefined)};var args=[_args[0],_.extend({callback:callback},_args[1]||{})];return auto.apply(null,args)};function depAuto(dist){var cliques=dependencyAnalysis.cliques(dist.wpplFn,[],["x","y","z","w"]);_.each(cliques,function(clique){var getCliqueComponents=_.partial(_.pick,_,clique);var distGrouped=_.groupBy(dist.support(),function(state){return JSON.stringify(_.pick(state,clique))});var subdistSupport=_.keys(distGrouped).map(JSON.parse);var subdistProbs=_.map(distGrouped,function(states){return Math.exp(util.logsumexp(states.map(function(state){return dist.score(state)})))});var subdist=new dists.Categorical({vs:subdistSupport,ps:subdistProbs});viz.auto(subdist,{css:{display:"inline-block"}})});return cliques}function vizModel(f){return dependencyAnalysis.structure(f)}var vizExtensions={auto:auto,bar:barWrapper,hist:hist,scatter:scatterWrapper,density:density,line:lineWrapper,table:table,parCoords:parallelCoordinates,heatMap:heatMap,marginals:marginals,renderSpec:renderSpec,stats:stats,coarsen:coarsen,model:vizModel,depAuto:depAuto};_.each(vizExtensions,function(v,k){viz[k]=v});viz.getSupport=require("./support-analysis").getSupport;if(typeof module!=="undefined"&&module.exports){exports=module.exports=viz}global.viz=viz}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./cccr":880,"./dependency-analysis":882,"./reflection":884,"./stats":885,"./support-analysis":886,_process:25,d3:385,fs:1,jquery:527,md5:532,open:534,react:686,"react-dom":535,underscore:700,vega:816,"vega-lite":775}],884:[function(require,module,exports){(function(global){(function(){var esprima=require("esprima");var escodegen=require("escodegen"),gen=escodegen.generate;var estraverse=require("estraverse"),traverse=estraverse.traverse;var lodash=require("lodash");var escope=require("escope");var SourceMapConsumer=require("source-map").SourceMapConsumer;var getWpplSource=function(f){var smc=new SourceMapConsumer(global.__sourceMap__);var mappings=[];smc.eachMapping(function(m){mappings.push(m)});var fName=f.name;var fString=f.toString();var fPosition=global.__compiled__.indexOf(fString);var fSplit=global.__compiled__.slice(0,fPosition).split("\n");var fLine=fSplit.length;var mapping=_.findWhere(mappings,{source:"webppl:program",generatedLine:fLine});var originalLine=mapping.originalLine,originalColumn=mapping.originalColumn;var wpplCode=_.last(global.__sourceMap__.sourcesContent);var wpplAst=esprima.parse(wpplCode,{loc:true});var originalCode;traverse(wpplAst,{enter:function(node,parent){if(node.type=="VariableDeclarator"&&node.id.name==fName&&node.init.type=="FunctionExpression"){if(node.loc.start.line==originalLine&&node.loc.start.column==originalColumn){originalCode=gen(node);this.break()}}}});return"("+originalCode+")"};var uniqueNames=function(_ast){var ast=lodash.cloneDeep(_ast);var scopeManager=escope.analyze(ast);var topScope=scopeManager.acquire(ast);var gensymDict={};var gensym=function(prefix){if(!gensymDict[prefix]){gensymDict[prefix]=0}gensymDict[prefix]+=1;return prefix+("__"+gensymDict[prefix])};var ancestorScopes=function(scope){var currScope=scope;var ancestors=[];while(currScope.upper){currScope=currScope.upper;ancestors.push(currScope)}return ancestors};var scopesToTraverse=[topScope];while(scopesToTraverse.length){var scope=scopesToTraverse.shift();var variables=_.chain(scope.variables).pluck("name").without("arguments").value();var ancestorVariables=_.chain(ancestorScopes(scope)).pluck("variables").flatten().pluck("name").without("arguments").value();var conflictingNames=_.intersection(variables,ancestorVariables);if(conflictingNames.length>0){conflictingNames.forEach(function(name){var scopeEntry=_.findWhere(scope.variables,{name:name});var defNames=_.pluck(scopeEntry.defs,"name");var refNames=_.pluck(scopeEntry.references,"identifier");var changeSites=defNames.concat(refNames);var newName=gensym(name);changeSites.forEach(function(x){x.name=newName})})}scopesToTraverse=scopesToTraverse.concat(scope.childScopes)}return ast};"# testing";{}var getReturnVariablesCPS=function(ast){var rets=[];traverse(ast,{enter:function(node,parent){if(node.type=="CallExpression"&&node.callee.type=="Identifier"){if(node.callee.name=="_k1"){rets=_.chain(node.arguments).pluck("name").without("globalStore").value();this.break()}}}});return rets};var getTopLevelVars=function(ast){var topLevelVars=[];traverse(ast,{enter:function(node,parent){if(node.type=="FunctionExpression"){topLevelVars=_.chain(node.body.body).where({type:"VariableDeclaration"}).pluck("declarations").flatten().pluck("id").pluck("name").value();this.break()}}});return topLevelVars};var getTopLevelVarsCPS=function(ast){var vars={};var whitelistContinuation=true;traverse(ast,{enter:function(node,parent){if(node.type=="FunctionExpression"){if(whitelistContinuation){whitelistContinuation=false;return}var variableNames=_.pluck(node.params,"name");if(_.find(variableNames,function(name){return/_address/.test(name)})){this.skip()}else{var isBookKeepingName=function(name){return/globalStore/.test(name)||/_k/.test(name)};var addedNames=_.reject(variableNames,isBookKeepingName);if(addedNames.length>1){console.log("weird case: more than 1 added name: ",addedNames.join(", "))}if(addedNames.length==0){}console.log(gen(node));console.log("adding ",addedNames.join(", "));var dependencies=_.chain(parent.arguments).filter(function(x){return x.type=="Identifier"}).pluck("name").reject(isBookKeepingName).value();console.log("-> dependencies are ",dependencies.join(", "));console.log("");_.each(addedNames,function(name){vars[name]=dependencies})}}}});return vars};module.exports={getWpplSource:getWpplSource,uniqueNames:uniqueNames,getTopLevelVars:getTopLevelVars}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{escodegen:467,escope:483,esprima:491,estraverse:496,lodash:531,"source-map":698}],885:[function(require,module,exports){var _=require("underscore");var d3=require("d3");function kde(samps,options){options=_.defaults(options||{},{bounds:"auto",bandwidth:"auto",kernel:"epanechnikov",numPoints:100,weights:false});var kernel;if(options.kernel==="epanechnikov"){kernel=function(u){return Math.abs(u)<=1?.75*(1-u*u):0}}else if(typeof options.kernel=="function"){kernel=options.kernel}var isWeighted=_.isArray(options.weights),weights=options.weights;var mean=0,n=samps.length;var sumWeights=0;if(isWeighted){for(var i=0;i<n;i++){sumWeights+=weights[i];mean+=weights[i]*samps[i]}mean=mean/sumWeights}else{mean=samps.reduce(function(x,y){return x+y})/n}var bandwidth;if(options.bandwidth=="auto"){var s=Math.sqrt(samps.reduce(function(acc,x,i){return acc+(isWeighted?weights[i]:1)*Math.pow(x-mean,2)},0)/(isWeighted?sumWeights:n-1));bandwidth=1.06*s*Math.pow(n,-.2)}else{bandwidth=options.bandwidth}var min,max;if(options.bounds=="auto"){min=_.min(samps);max=_.max(samps)}else{min=options.bounds[0];max=options.bounds[1]}var numPoints=options.numPoints;var binWidth=(max-min)/numPoints;var results=[];for(var i=0;i<=numPoints;i++){var x=min+i*binWidth;var kernelSum=0;for(var j=0,jj=samps.length;j<jj;j++){var w=isWeighted?weights[j]:1;kernelSum+=w*kernel((x-samps[j])/bandwidth)}results.push({item:x,density:kernelSum/((isWeighted?sumWeights:n)*bandwidth)})}return results}function kde2d(x,y){function dnorm(x){var mu=0,sigma=1;return 1/(sigma*Math.sqrt(2*Math.PI))*Math.exp(-Math.pow(x-mu,2)/(2*sigma*sigma))}function Matrix(ary){this.mtx=ary;this.height=ary.length;this.width=ary[0].length}Matrix.prototype.mult=function(other){if(this.width!=other.height){throw new Error("Matrix multiply: incompatible sizes ("+this.width+","+this.height+"), ("+other.width+","+other.height+")")}var result=[];for(var i=0;i<this.height;i++){result[i]=[];for(var j=0;j<other.width;j++){var sum=0;for(var k=0;k<this.width;k++){sum+=this.mtx[i][k]*other.mtx[k][j]}result[i][j]=sum}}return new Matrix(result)};Matrix.prototype.transpose=function(){var transposed=[];for(var i=0;i<this.width;i++){transposed[i]=[];for(var j=0;j<this.height;j++){transposed[i][j]=this.mtx[j][i]}}return new Matrix(transposed)};Matrix.prototype.map=function(f){var res=[];for(var i=0;i<this.height;i++){var row=[];for(var j=0;j<this.width;j++){row.push(f(this.mtx[i][j]))}res.push(row)}return new Matrix(res)};var nx=x.length;var n1=25;var n2=25;var minX=_.min(x);var maxX=_.max(x);var minY=_.min(y);var maxY=_.max(y);var stepWidthX=(maxX-minX)/(n1-1);var stepWidthY=(maxY-minY)/(n2-1);var gx=_.range(n1).map(function(k){return minX+k*stepWidthX});var gy=_.range(n2).map(function(k){return minY+k*stepWidthY});var mean=function(v){return util.sum(v)/v.length};var variance=function(v){var m=mean(v);return util.sum(_.map(v,function(vi){return(vi-m)*(vi-m)}))/(v.length-1)};var getBandwidth=function(v){var scale=d3.scale.quantile().domain(v).range(d3.range(4));var r=[scale.invertExtent(0)[1],scale.invertExtent(2)[1]];var h=(r[1]-r[0])/1.34;return 4*1.06*Math.min(Math.sqrt(variance(v)),h)*Math.pow(v.length,-.2)};var h=[getBandwidth(x)/4,getBandwidth(y)/4];var ax=_.map(gx,function(_gx){return _.map(x,function(_x){return(_gx-_x)/h[0]})});var ay=_.map(gy,function(_gy){return _.map(y,function(_y){return(_gy-_y)/h[1]})});var mx=new Matrix(ax).map(dnorm);var my=new Matrix(ay).map(dnorm);var z=mx.mult(my.transpose()).mtx.map(function(row){return row.map(function(col){return col/(nx*h[0]*h[1])})});var ret=[];for(var ix=0;ix<n1;ix++){for(var iy=0;iy<n2;iy++){ret.push({x:gx[ix],y:gy[iy],density:z[ix][iy]})}}return ret}var exports={kde:kde,kde2d:kde2d};if(typeof viz!=="undefined"){viz.stats=exports}module.exports=exports},{d3:385,underscore:700}],886:[function(require,module,exports){"use strict";var esprima=require("esprima");var estraverse=require("estraverse");var escodegen=require("escodegen");var build=require("./builders");var reflection=require("./reflection"),getWpplSource=reflection.getWpplSource;var rules=function(node){switch(node.type){case"UnaryExpression":switch(node.operator){case"+":return"abstractMath.plus";case"-":return"abstractMath.neg"}break;case"BinaryExpression":switch(node.operator){case"*":return"abstractMath.mul";case"/":return"abstractMath.div";case"+":return"abstractMath.add";case"-":return"abstractMath.sub";case"<":return"abstractMath.lt";case"<=":return"abstractMath.leq";case">":return"abstractMath.gt";case">=":return"abstractMath.geq";case"==":return"abstractMath.eq";case"!=":return"abstractMath.neq";case"===":return"abstractMath.peq";case"!==":return"abstractMath.pneq"}break}return false};function parse(dotted){return dotted.split(".").map(build.identifier).reduce(function(a,b){return build.memberExpression(a,b)})}function rewrite(node,fn){var callee=parse(fn);if(node.type==="UnaryExpression"){return build.callExpression(callee,[node.argument])}else if(node.type==="BinaryExpression"){return build.callExpression(callee,[node.left,node.right])}else{throw new Error("Unexpected node type")}}function isInplaceAssignmentOp(op){return op==="+="||op==="-="||op==="*="||op==="/="}function abstractMath(ast){return estraverse.replace(ast,{enter:function(node,parent){var fn=rules(node);if(fn){return rewrite(node,fn)}if(node.type==="AssignmentExpression"&&isInplaceAssignmentOp(node.operator)){return build.assignmentExpression("=",node.left,build.binaryExpression(node.operator[0],node.left,node.right))}if(node.type==="MemberExpression"&&node.object.type==="Identifier"&&node.object.name==="Math"){return build.memberExpression(parse("abstractMath"),node.property,node.computed)}}})}var priorSupport=function(f){var wpplSource=getWpplSource(f);var ast=esprima.parse(wpplSource)};function getSupport(f){var wpplSource=getWpplSource(f);var ast=esprima.parse(wpplSource);abstractMath(ast);return escodegen.generate(ast)}module.exports={getSupport:getSupport}},{"./builders":879,"./reflection":884,escodegen:467,esprima:491,estraverse:496}],887:[function(require,module,exports){module.exports=Yallist;Yallist.Node=Node;Yallist.create=Yallist;function Yallist(list){var self=this;if(!(self instanceof Yallist)){self=new Yallist}self.tail=null;self.head=null;self.length=0;if(list&&typeof list.forEach==="function"){list.forEach(function(item){self.push(item)})}else if(arguments.length>0){for(var i=0,l=arguments.length;i<l;i++){self.push(arguments[i])}}return self}Yallist.prototype.removeNode=function(node){if(node.list!==this){throw new Error("removing node which does not belong to this list")}var next=node.next;var prev=node.prev;if(next){next.prev=prev}if(prev){prev.next=next}if(node===this.head){this.head=next}if(node===this.tail){this.tail=prev}node.list.length--;node.next=null;node.prev=null;node.list=null};Yallist.prototype.unshiftNode=function(node){if(node===this.head){return}if(node.list){node.list.removeNode(node)}var head=this.head;node.list=this;node.next=head;if(head){head.prev=node}this.head=node;if(!this.tail){this.tail=node}this.length++};Yallist.prototype.pushNode=function(node){if(node===this.tail){return}if(node.list){node.list.removeNode(node)}var tail=this.tail;node.list=this;node.prev=tail;if(tail){tail.next=node}this.tail=node;if(!this.head){this.head=node}this.length++};Yallist.prototype.push=function(){for(var i=0,l=arguments.length;i<l;i++){push(this,arguments[i])}return this.length};Yallist.prototype.unshift=function(){for(var i=0,l=arguments.length;i<l;i++){unshift(this,arguments[i])}return this.length};Yallist.prototype.pop=function(){if(!this.tail){return undefined}var res=this.tail.value;this.tail=this.tail.prev;if(this.tail){this.tail.next=null}else{this.head=null}this.length--;return res};Yallist.prototype.shift=function(){if(!this.head){return undefined}var res=this.head.value;this.head=this.head.next;if(this.head){this.head.prev=null}else{this.tail=null}this.length--;return res};Yallist.prototype.forEach=function(fn,thisp){thisp=thisp||this;for(var walker=this.head,i=0;walker!==null;i++){fn.call(thisp,walker.value,i,this);walker=walker.next}};Yallist.prototype.forEachReverse=function(fn,thisp){thisp=thisp||this;for(var walker=this.tail,i=this.length-1;walker!==null;i--){fn.call(thisp,walker.value,i,this);walker=walker.prev}};Yallist.prototype.get=function(n){for(var i=0,walker=this.head;walker!==null&&i<n;i++){walker=walker.next}if(i===n&&walker!==null){return walker.value}};Yallist.prototype.getReverse=function(n){for(var i=0,walker=this.tail;walker!==null&&i<n;i++){walker=walker.prev}if(i===n&&walker!==null){return walker.value}};Yallist.prototype.map=function(fn,thisp){thisp=thisp||this;var res=new Yallist;for(var walker=this.head;walker!==null;){res.push(fn.call(thisp,walker.value,this));walker=walker.next}return res};Yallist.prototype.mapReverse=function(fn,thisp){thisp=thisp||this;var res=new Yallist;for(var walker=this.tail;walker!==null;){res.push(fn.call(thisp,walker.value,this));walker=walker.prev}return res};Yallist.prototype.reduce=function(fn,initial){var acc;var walker=this.head;if(arguments.length>1){acc=initial}else if(this.head){walker=this.head.next;acc=this.head.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=0;walker!==null;i++){acc=fn(acc,walker.value,i);walker=walker.next}return acc};Yallist.prototype.reduceReverse=function(fn,initial){var acc;var walker=this.tail;if(arguments.length>1){acc=initial}else if(this.tail){walker=this.tail.prev;acc=this.tail.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=this.length-1;walker!==null;i--){acc=fn(acc,walker.value,i);walker=walker.prev}return acc};Yallist.prototype.toArray=function(){var arr=new Array(this.length);for(var i=0,walker=this.head;walker!==null;i++){arr[i]=walker.value;walker=walker.next}return arr};Yallist.prototype.toArrayReverse=function(){var arr=new Array(this.length);for(var i=0,walker=this.tail;walker!==null;i++){arr[i]=walker.value;walker=walker.prev}return arr};Yallist.prototype.slice=function(from,to){to=to||this.length;if(to<0){to+=this.length}from=from||0;if(from<0){from+=this.length}var ret=new Yallist;if(to<from||to<0){return ret}if(from<0){from=0}if(to>this.length){to=this.length}for(var i=0,walker=this.head;walker!==null&&i<from;i++){walker=walker.next}for(;walker!==null&&i<to;i++,walker=walker.next){ret.push(walker.value)}return ret};Yallist.prototype.sliceReverse=function(from,to){to=to||this.length;if(to<0){to+=this.length}from=from||0;if(from<0){from+=this.length}var ret=new Yallist;if(to<from||to<0){return ret}if(from<0){from=0}if(to>this.length){to=this.length}for(var i=this.length,walker=this.tail;walker!==null&&i>to;i--){walker=walker.prev}for(;walker!==null&&i>from;i--,walker=walker.prev){ret.push(walker.value)}return ret};Yallist.prototype.reverse=function(){var head=this.head;var tail=this.tail;for(var walker=head;walker!==null;walker=walker.prev){var p=walker.prev;walker.prev=walker.next;walker.next=p}this.head=tail;this.tail=head;return this};function push(self,item){self.tail=new Node(item,self.tail,null,self);if(!self.head){self.head=self.tail}self.length++}function unshift(self,item){self.head=new Node(item,null,self.head,self);if(!self.tail){self.tail=self.head}self.length++}function Node(value,prev,next,list){if(!(this instanceof Node)){return new Node(value,prev,next,list)}this.list=list;this.value=value;if(prev){prev.next=this;this.prev=prev}else{this.prev=null}if(next){next.prev=this;this.next=next}else{this.next=null}}},{}],888:[function(require,module,exports){"use strict";var _=require("lodash");var ad=require("adnn/ad");var Tensor=require("./tensor");var special=require("./math/special");var valueRec=function(x){if(typeof x==="number"||x instanceof Tensor){return x}else if(ad.isLifted(x)){return x.x}else if(_.isArray(x)){return _.map(x,valueRec)}else if(_.isObject(x)&&!_.isFunction(x)){var proto=Object.getPrototypeOf(x);var y=_.mapValues(x,valueRec);return _.assign(Object.create(proto),y)}else{return x}};ad.valueRec=valueRec;ad.tensor.logGamma=ad.newUnaryFunction({OutputType:Tensor,name:"logGamma",forward:function(a){return a.logGamma()},backward:function(a){var n=a.x.length;while(n--){a.dx.data[n]+=special.digamma(a.x.data[n])*this.dx.data[n]}}});ad.scalar.logGamma=ad.newUnaryFunction({OutputType:Number,name:"logGamma",forward:function(a){return special.logGamma(a)},backward:function(a){return a.dx+=special.digamma(a.x)*this.dx}});ad.scalar.plus=function(x){if(ad.isLifted(x)&&typeof ad.value(x)==="number"){return x}else{return+x}};ad.tensor["__Tensor"]=Tensor;module.exports=ad},{"./math/special":960,"./tensor":972,"adnn/ad":34,lodash:164}],889:[function(require,module,exports){"use strict";var assert=require("assert");var _=require("lodash");var util=require("../util");var ad=require("../ad");var dists=require("../dists");var CountAggregator=function(onlyMAP){this.onlyMAP=onlyMAP;this.max={value:undefined,score:-Infinity};this.samples=[]};CountAggregator.prototype.add=function(value,score){if(this.onlyMAP){assert.ok(score!==undefined,"A score is required to compute the MAP.");if(score>this.max.score){this.max.value=value;this.max.score=score}}else{var obj=score===undefined?{value:value}:{value:value,score:score};this.samples.push(obj)}};CountAggregator.prototype.toDist=function(){if(this.onlyMAP){this.samples=[this.max]}return new dists.SampleBasedMarginal({samples:this.samples,numSamples:this.samples.length})};module.exports=CountAggregator},{"../ad":888,"../dists":906,"../util":987,assert:3,lodash:164}],890:[function(require,module,exports){"use strict";var ad=require("../ad");var assert=require("assert");var _=require("lodash");var dists=require("../dists");var util=require("../util");var numeric=require("../math/numeric");var ScoreAggregator=function(){this.dist={}};Object.defineProperties(ScoreAggregator.prototype,{size:{get:function(){return _.size(this.dist)}}});ScoreAggregator.prototype.add=function(value,score){if(ad.scalar.peq(score,ad.scalar.neg(Infinity))){return}var key=util.serialize(value);if(ad.scalar.peq(this.dist[key],undefined)){this.dist[key]={score:ad.scalar.neg(Infinity),val:value}}this.dist[key].score=numeric.logaddexp(this.dist[key].score,score)};function normalize(dist){var logNorm=_.reduce(dist,function(acc,obj){return numeric.logaddexp(acc,obj.score)},ad.scalar.neg(Infinity));return _.mapValues(dist,function(obj){return{val:obj.val,prob:ad.scalar.exp(ad.scalar.sub(obj.score,logNorm))}})}ScoreAggregator.prototype.toDist=function(){return new dists.Marginal({dist:normalize(this.dist)})};module.exports=ScoreAggregator},{"../ad":888,"../dists":906,"../math/numeric":959,"../util":987,assert:3,lodash:164}],891:[function(require,module,exports){(function(global){(function(){"use strict";var _=require("lodash");var esprima=require("esprima");var escodegen=require("escodegen");var webppl=require("./main");var optimize=require("./transforms/optimize").optimize;var naming=require("./transforms/naming").naming;var thunkify=require("./syntax").thunkify;var cps=require("./transforms/cps").cps;var errors=require("./errors/browser");var util=require("./util");var version="v0.9.15-daabd603";var packages=[{name:"webppl-viz",js:{identifier:"webpplViz",path:require("/Users/lestera/Documents/git/webppl/node_modules/webppl-viz")},headers:[],wppl:[{code:"/*\n  compiling webppl with this package:\n\n  inside webppl:\n\n  grunt browserify:../wp/viz\n\n*/\n\n/*\n  (local-set-key (kbd \"s-r\") (lambda () (interactive) (save-buffer) (process-send-string \"*shell viz*\" \"echo '\\n'; webppl src/multi.wppl --require .\\n\")))\n*/\n\n// NB: doesn't work for lists with duplicate elements\nvar samplePermutation = function(xs) {\n  if (xs.length == 0) {\n    return []\n  } else {\n    var x = uniformDraw(xs);\n    return [x].concat(samplePermutation(_.without(xs, x)));\n  }\n}\n\nvar err = function(msg) {\n  console.error(msg);\n  process.exit()\n}\n\nvar getColumnType = function(columnValues) {\n  // for now, support real, integer, and categorical\n  // some questions:\n  // - can we support list of reals a la dirichlet?\n  // - would knowing type information from the forward model (e.g., foo ~ multinomial([a,b,c])) help?\n  if (_.every(columnValues, _.isNumber)) {\n    return _.every(columnValues, Number.isInteger) ? 'c' : 'r'\n  } else {\n    return 'c'\n  }\n};\n\nvar getColumnTypes = function(df) {\n  var columnNames = _.keys(df[0]);\n  return _.object(\n    columnNames,\n    map(function(name) {\n      if (name == '__prob__') {\n        return 'real'\n      } else {\n        return getColumnType(_.pluck(df, name));\n      }\n    }, columnNames)\n  )\n};\n\nvar multi = function(dist) {\n\n  var mappingSamplers = {\n    freqtable: function(fieldTypes) {\n      // assumes 0 r\n      var n = _.size(fieldTypes), fields = _.keys(fieldTypes), types = _.pluck(fieldTypes, 'type');\n\n      var d = {\n        '1': ['col'],\n        '2': ['col','row'],\n        '3': ['col','row','facetCol'],\n        '4': ['col','row','facetCol','facetRow']\n      }\n\n      return _.object(fields, d[n + '']);\n    },\n    hist: function(fieldTypes) {\n      var n = _.size(fieldTypes),\n          fields = samplePermutation(_.keys(fieldTypes));\n\n      if (n == 1) {\n        // TODO: possibly use color?\n        return _.object(fields, ['x'])\n      } else if (n == 2) {\n        return _.object(fields, ['x', uniformDraw(['color','facetCol'])])\n      } else if (n == 3) {\n        return _.object(fields, ['x', 'color', 'facetCol']);\n      } else if (n == 4) {\n        return _.object(fields, ['x','color','facetCol', 'facetRow']);\n      } else {\n        return err(\"too many fields\");\n      }\n    },\n    scatter: function(fieldTypes) {\n      var n = _.size(fieldTypes),\n          fields = samplePermutation(_.keys(fieldTypes)),\n          types = _.values(fieldTypes),\n          nR = _.countBy(types).r;\n\n      var aesthetics =\n          ((nR == 1)\n           ? ((n == 1) ? ['x'] :\n              (n == 2) ? ['x', uniformDraw(['color','y'])] :\n              // TODO: write helper function\n              (n == 3) ? ['x'].concat(uniformDraw([['color', 'facetCol'], ['color', 'y'], ['facetCol', 'y']])) :\n              (n == 4) ? _.without(['x', 'y', 'color', 'facetCol','facetRow'],\n                                   uniformDraw(['color', 'facetCol','facetRow','y'])) :\n              (n == 5) ? ['x', 'y', 'color', 'facetCol','facetRow'] :\n              err(\"too many fields\")) :\n           // nR == 2\n           ((nR == 2)\n            ? ((n == 2) ? ['x','y'] :\n               (n == 3) ? ['x','y',uniformDraw(['color','facetCol'])] :\n               (n == 4) ? ['x','y','color','facetCol'] :\n               (n == 5) ? ['x','y','color','facetCol', 'facetRow'] :\n               err(\"too many fields\"))\n            : err(\"nR = \" + nR))\n          )\n\n      var out = _.object(fields, aesthetics),\n          outI = _.invert(out);\n\n      // forbid any r fields from being mapped to facetCol and facetRow\n      condition(fieldTypes[outI.facetCol] !== 'r' &&\n                fieldTypes[outI.facetRow] !== 'r' &&\n                fieldTypes[outI.color] !== 'r')\n\n      return out;\n    },\n    density: function(fieldTypes) {\n      var n = _.size(fieldTypes),\n          fields = samplePermutation(_.keys(fieldTypes)),\n          types = _.values(fieldTypes),\n          nR = _.countBy(types).r;\n\n      // TODO: do something different for 1r versus 2r\n      var aesthetics =\n          ((nR == 1)\n           ? ((n == 1) ? ['x'] :\n              (n == 2) ? ['x', uniformDraw(['color','facetCol'])] :\n              (n == 3) ? ['x', 'facetCol', uniformDraw(['facetRow', 'color'])] :\n              (n == 4) ? ['x','color','facetCol', 'facetRow'] :\n              err(\"too many fields\")) :\n           // nR == 2\n           ((nR == 2)\n            ? err(\"should use heat map for nR == 2\")\n            : err(\"nR = \" + nR))\n          )\n\n      var out = _.object(fields, aesthetics),\n          outI = _.invert(out);\n\n      // forbid any r fields from being mapped to facetCol and facetRow\n      condition(fieldTypes[outI.facetCol] !== 'r' &&\n                fieldTypes[outI.facetRow] !== 'r' &&\n                fieldTypes[outI.color] !== 'r')\n\n      return out;\n\n    }\n  }\n\n  // samples abstract metadata (mark type, mappings) and a concrete spec\n  var sampleGraph = function(distDf) {\n    // get types for every column except __prob__\n    var fieldTypes = _.omit(getColumnTypes(distDf), '__prob__'),\n    types = _.values(fieldTypes);\n\n    var nR = filter(function(t) { return t == 'r' }, types).length;\n\n    var possibleMarks = [\n      [/*'freqtable',*/'hist'],  // 0 r\n      ['scatter','density'], // 1 r\n      ['scatter','heat'],    // 2 r\n      ['parcoords']          // 3 r\n    ][nR > 3 ? 3 : nR];\n\n    var mark = uniformDraw(possibleMarks);\n    // condition(mark == 'hist')\n    //condition(mark == 'scatter')\n\n    // sample mappings for this mark\n    var mappingSampler = mappingSamplers[mark],\n        mappings = mappingSampler(fieldTypes);\n\n    // make vega spec\n    var specMaker = specMakers[mark],\n        spec = specMaker(mappings, distDf, fieldTypes);\n\n    /* conditions:\n       - prefer colors over facet cols\n       - prefer facet cols over facet rows\n       - prefer fewer colors\n    */\n\n    var out = {mark: mark,\n               mappings: mappings,\n               spec: spec};\n    return out;\n  };\n\n  var toVlAesthetic = {facetCol: 'column',\n                       facetRow: 'row',\n                       x: 'x',\n                       y: 'y',\n                       color: 'color'\n                      };\n  var toVlType = {'c': 'nominal', 'r': 'quantitative'};\n  var specMakers = {\n    hist: function(_mappings, _distDf, fieldTypes) {\n      var k = _.size(_mappings);\n      var _mappingsI = _.invert(_mappings);\n\n      var presentAesthetics = _.keys(_mappingsI),\n          missingAesthetics = _.difference(['x','facetRow','facetCol','color'], presentAesthetics);\n\n      // add dummy columns (facetRow, facetCol, or color) to mappings dictionaries\n\n      // TODO: when we have dummy facets, why do logical field names and scale names need to be the same? (e.g. \"gx\")\n      // for the padding to be correct?\n      var facetLogicalNames = {facetRow: 'gy', facetCol: 'gx', color: 'gc'};\n\n      // logical to physical\n      var LP = _.extend(_.object(map(function(name) { return [facetLogicalNames[name], name]  },\n                                     missingAesthetics)),\n                        _mappings);\n      // physical to logical\n      var PL = _.invert(LP);\n\n      // add dummy columns to data\n      var distDf = missingAesthetics.length == 0\n        ? _distDf\n        : map(function(row) {\n          var dummyCols = _.object(map(function(name) { return [facetLogicalNames[name], 'dummy']  }, missingAesthetics))\n          _.extend(dummyCols, row) },\n              _distDf);\n\n      // start building spec from the bottom up\n\n      var xSource = PL.x;\n      var colorSource = PL.color;\n\n      var marks2 = [\n        {name: 'marks2',\n         type: 'rect',\n         properties: {\n           update: {\n             x:      {scale: 'colorPosScale', field: colorSource},\n             width:  {scale: 'colorPosScale', band: true, offset: 0},\n             y:      {scale: 'probScale', field: '__prob__'},\n             y2:     {scale: 'probScale', value: 0},\n             fill:   {scale: 'colorColorScale', field: colorSource},\n             opacity: {value: 0.7}\n           }\n         }\n        }\n      ];\n\n      var marks1 = [\n        {name: 'marks1',\n         type: 'group',\n         from: {\n           transform: [{type: \"facet\",groupby: xSource}]\n         },\n         properties: {\n           enter: {\n             x: {scale: \"xScale\",field: \"key\"},\n             width: {scale: \"xScale\",band: true}\n           }\n         },\n         scales: [{\n           \"name\": \"colorPosScale\",\n           \"type\": \"ordinal\",\n           \"domain\": {\"field\": colorSource},\n           \"range\": \"width\"\n         }],\n         marks: marks2\n        }\n      ];\n\n      var marks0 = [\n        {name: 'marks0',\n         type: 'group',\n         properties: {\n           update: {\n             x: {scale: \"gx\",field: PL.facetCol},\n             y: {scale: \"gy\",field: PL.facetRow},\n             width: {scale: \"gx\", band: true, offset: 0},\n             height: {scale: \"gy\", band: true, offset: 0},\n             stroke: {value: \"#ccc\"},\n             strokeWidth: {value: 1}\n           }\n         },\n         from: {\n           data: \"raw\",\n           transform: [{type: \"facet\",groupby: [PL.facetRow, PL.facetCol]}]\n         },\n         scales: [\n           {\n             name: \"xScale\",\n             type: \"ordinal\",\n             domain: {field: xSource},\n             range: \"width\",\n             padding: 0.2\n           },\n           {\n             name: \"probScale\",\n             type: \"linear\",\n             domain: {data: 'raw', field: \"__prob__\"}, // TODO: make a random choice between data domain and [0,1]?\n             range: \"height\"\n           },\n           {\n             name: \"colorColorScale\",\n             type: \"ordinal\",\n             domain: {field: colorSource},\n             range: \"category10\"\n           }\n         ],\n         axes: [\n           {type: \"y\", scale: \"probScale\", title: \"Probability\"},\n           {type: \"x\", scale: \"xScale\", title: xSource}\n         ],\n         marks: marks1\n        }\n      ];\n\n      var facetScales = [\n        {\n          name: 'gx',\n          type: 'ordinal',\n          domain: {data: 'raw', field: PL.facetCol},\n          range: 'width',\n          padding: 0.1\n        },\n        {\n          name: 'gy',\n          type: 'ordinal',\n          domain: {data: 'raw', field: PL.facetRow},\n          range: 'height',\n          padding: 0.1\n        }\n      ];\n\n      var gyAxis = {\n        type: \"y\",\n        scale: \"gy\",\n        orient: \"left\",\n        tickSize: 0,\n        offset: 30,\n        title: PL.facetRow,\n        properties: {axis: {strokeWidth: {value: 1}}}\n      };\n      var gxAxis = {\n        type: \"x\",\n        scale: \"gx\",\n        tickSize: 0,\n        offset: 30,\n        title: PL.facetCol,\n        properties: {\n          axis: {strokeWidth: {value: 1}},\n          title: {angle: 0}\n        }\n      };\n\n      // TODO: hide facet Axes for dummy values\n      var facetAxes =\n          (_.contains(missingAesthetics, 'facetRow') ? [] : [gyAxis]).concat(\n            _.contains(missingAesthetics, 'facetCol') ? [] : [gxAxis]\n          );\n\n      var viz = {\n        regularVega: true,\n        width: 300,\n        height: 300,\n        data: [{\"name\": \"raw\", \"values\": distDf}],\n        scales: facetScales,\n        axes: facetAxes,\n        marks: marks0\n      };\n\n      return viz;\n    },\n    scatter: function(_mappings, _distDf, fieldTypes) {\n      var LP = _mappings;\n      var PL = _.invert(LP);\n\n\n      // e.g.,\n      // {\n      //   x: {field: PL.x, type: toVlType[fieldTypes[PL.x]]},\n      //   y: {field: PL.y, type: toVlType[fieldTypes[PL.y]]}\n      // }\n      var encodings = _.object(map(\n        function(aesthetic) {\n          var field = PL[aesthetic],\n              type = fieldTypes[field],\n              vlType = toVlType[type];\n\n          return [toVlAesthetic[aesthetic], {field: field, type: vlType}]\n        },\n        _.keys(PL)\n      ))\n\n      var out = {\n        regularVega: false,\n        data: {values: _distDf},\n        mark: \"point\",\n        encoding: _.extend({size: {field: '__prob__', type: 'quantitative'}}, encodings)\n      }\n      return out\n    },\n    density: function(_mappings, _distDf, fieldTypes) {\n      var LP = _mappings;\n      var PL = _.invert(LP);\n\n      // group by cartesian product of all categorical variables\n      var cFields = _.pluck(filter(function(pair) { return pair[1] == 'c' },\n                                   _.pairs(fieldTypes)),\n                            '0');\n\n      var rFields = _.pluck(filter(function(pair) { return pair[1] == 'r' },\n                                   _.pairs(fieldTypes)),\n                            '0'),\n          rField = rFields[0];\n\n\n      var distDfKeyed = map(\n        function(row) { _.extend({__key__: JSON.stringify(_.pick(row, cFields))}, row) },\n        _distDf\n      )\n      var distDfGrouped = _.groupBy(distDfKeyed, '__key__');\n      // TODO: use this more general form in the vanilla density functions (r, cr, ccr, ...)\n      var densitiesGrouped = mapObject(\n        function(key, group) {\n          var keyParsed = JSON.parse(key);\n          var probs = _.pluck(group, '__prob__');\n          var weight = util.sum(probs);\n          var values = _.pluck(group, rField);\n          var densityEstimates = map(\n            function(x) {\n              var z = _.object([[rField, x.item],[\"__prob__\", x.density * weight]]);\n              return _.extend(z, keyParsed)\n            },\n            webpplViz.stats.kde(values, {weights: probs}));\n          return densityEstimates;\n        },\n        distDfGrouped\n      )\n      var densities = _.flatten(_.values(densitiesGrouped))\n      // e.g.,\n      // {\n      //   x: {field: PL.x, type: toVlType[fieldTypes[PL.x]]},\n      //   y: {field: PL.y, type: toVlType[fieldTypes[PL.y]]}\n      // }\n      var encodings = _.object(map(\n        function(aesthetic) {\n          var field = PL[aesthetic],\n              type = fieldTypes[field],\n              vlType = toVlType[type];\n\n          return [toVlAesthetic[aesthetic], {field: field, type: vlType}]\n        },\n        _.keys(PL)\n      ))\n\n      var out = {\n        regularVega: false,\n        data: {values: densities},\n        mark: \"line\",\n        encoding: _.extend({y: {field: '__prob__', type: 'quantitative'}}, encodings)\n      }\n      return out\n    }\n  }\n\n  // convert distribution to a dataframe including a __prob__  column\n  var distDf = map(function(x) { _.extend({__prob__: Math.exp(dist.score(x))}, x)},\n                   dist.support())\n\n  var graphDist = Enumerate(function() { sampleGraph(distDf) });\n\n  // in browser, render all specs. on command line (dev), emit mappings\n  map(function(abs) {\n    if (typeof viz !== 'undefined' /* browser */) {\n      viz.renderSpec(abs.spec, {regularVega: abs.spec.regularVega, smartAxes: false})\n    } else {\n      console.log(JSON.stringify(abs.mappings, null, 1))\n    }\n  },\n      graphDist.support())\n\n  return \"\"\n}\n\n// if (typeof window == 'undefined') {\n//   util.seedRNG(3)\n//   var posterior = MH(function() {\n//     return {skill: gaussian(0,1),\n//             //age: beta(0.3, 0.3) + 6,\n//             group: uniformDraw(['a','b']),\n//             country: flip(0.9) ? 'CAN' : 'MEX'\n//            }\n//   }, 100)\n//   // var posterior = MH(function() {\n//   //   return {skill: gaussian(0,1),\n//   //           group: uniformDraw(['a','b']),\n//   //           country: flip(0.9) ? 'CAN' : 'MEX'\n//   //          }\n//   // }, 100)\n//   multi(posterior)\n// }\n// ''\n\n//webpplViz.stats.kde.toString()\n",filename:"webppl-viz/src/multi.wppl"}],version:"v0.0.1-daabd603"},{name:"webppl-editor",js:{identifier:"webpplEditor",path:require("/Users/lestera/Documents/git/webppl/node_modules/webppl-editor")},headers:[],wppl:[],version:"v1.0.6-daabd603"}];var load=_.once(function(){packages.forEach(function(pkg){if(pkg.js){global[pkg.js.identifier]=pkg.js.path}pkg.headers.forEach(webppl.requireHeaderWrapper)});var bundles=webppl.parsePackageCode(packages);return bundles});function prepare(codeAndAssets,k,options){options=util.mergeDefaults(options,{filename:"webppl:program",errorHandlers:[]});var extraHandlers=options.debug?[errors.debugHandler(options.filename)]:[];options.errorHandlers=extraHandlers.concat(options.errorHandlers);return webppl.prepare(codeAndAssets,k,options)}function run(code,k,options){var codeAndAssets=compile(code,options);prepare(codeAndAssets,k,options).run()}function compile(code,options){options=options||{};var optionsExtended=_.extend({bundles:load()},options);return webppl.compile(code,optionsExtended)}function webpplCPS(code){var programAst=esprima.parse(code);var newProgramAst=optimize(cps(thunkify(programAst)));return escodegen.generate(newProgramAst)}function webpplNaming(code){var programAst=esprima.parse(code);var newProgramAst=naming(thunkify(programAst)).ast;return escodegen.generate(newProgramAst)}global.webppl={prepare:prepare,run:run,compile:compile,cps:webpplCPS,naming:webpplNaming,version:version,packages:packages}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./errors/browser":925,"./main":956,"./syntax":971,"./transforms/cps":978,"./transforms/naming":980,"./transforms/optimize":981,"./util":987,"/Users/lestera/Documents/git/webppl/node_modules/webppl-editor":355,"/Users/lestera/Documents/git/webppl/node_modules/webppl-viz":883,escodegen:79,esprima:126,lodash:164}],892:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var util=require("../util");var inspect=require("util").inspect;function Distribution(){}Distribution.prototype={toJSON:function(){throw new Error("Not implemented")},inspect:function(depth,options){if(_.has(this,"params")){if(this.print){return this.print()}else{return[this.meta.name,"(",inspect(this.params),")"].join("")}}else{var opts=options?_.clone(options):{};opts.customInspect=false;return inspect(this,opts)}},toString:function(){return this.inspect()},isContinuous:false,constructor:Distribution};function isDist(x){return x instanceof Distribution}function clone(dist){return new dist.constructor(dist.params)}var finiteSupport={MAP:function(){var map={score:-Infinity};this.support().forEach(function(val){var score=this.score(val);if(score>map.score){map={val:val,score:score}}},this);return map},entropy:function(){return _.reduce(this.support(),function(memo,x){var score=this.score(x);return ad.scalar.sub(memo,ad.scalar.peq(score,ad.scalar.neg(Infinity))?0:ad.scalar.mul(ad.scalar.exp(score),score))}.bind(this),0)},toJSON:function(){var support=this.support();var probs=support.map(function(s){return Math.exp(this.score(s))},this);return{probs:probs,support:support}}};var continuousSupport={isContinuous:true};var noHMC={noHMC:true};var methodNames=["sample","score","support","print","base","transform"];function makeDistributionType(options){options=util.mergeDefaults(options,{mixins:[]});["name","params"].forEach(function(name){if(!_.has(options,name)){console.log(options);throw new Error("makeDistributionType: "+name+" is required.")}});if(options.score){var originalScoreFn=options.score;options.score=function(val){if(arguments.length!==1){throw new Error("The score method of "+this.meta.name+" expected 1 argument but received "+arguments.length+".")}return originalScoreFn.call(this,val)}}var parameterNames=_.map(options.params,"name");var parameterTypes=_.map(options.params,function(param){if(_.has(param,"type")&&!(param.type&&param.type.check)){throw new Error("Invalid type given for parameter "+param.name+" of "+options.name+".")}return param.type});var parameterOptionalFlags=_.map(options.params,"optional");var extraConstructorFn=options.constructor;var dist=function(params,skipParamChecks){params=params||{};if(!skipParamChecks){parameterNames.forEach(function(p,i){if(params.hasOwnProperty(p)){var type=parameterTypes[i];if(type&&!type.check(ad.valueRec(params[p]))){throw new Error('Parameter "'+p+'" should be of type "'+type.desc+'".')}}else{if(!parameterOptionalFlags[i]){throw new Error('Parameter "'+p+'" missing from '+this.meta.name+" distribution.")}}},this)}this.params=params;if(extraConstructorFn!==undefined){extraConstructorFn.call(this)}};dist.prototype=Object.create(Distribution.prototype);dist.prototype.constructor=dist;dist.prototype.meta=_.pick(options,"name","desc","params","nodoc","nohelper","wikipedia");_.assign.apply(_,[dist.prototype].concat(options.mixins));_.assign(dist.prototype,_.pick(options,methodNames));["sample","score"].forEach(function(method){if(!dist.prototype[method]){throw new Error('makeDistributionType: method "'+method+'" not defined for '+options.name)}});return dist}module.exports={makeDistributionType:makeDistributionType,finiteSupport:finiteSupport,continuousSupport:continuousSupport,noHMC:noHMC,isDist:isDist,clone:clone}},{"../ad":888,"../util":987,lodash:164,util:28}],893:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var util=require("../util");var types=require("../types");var Bernoulli=base.makeDistributionType({name:"Bernoulli",desc:"Distribution over ``{true, false}``",params:[{name:"p",desc:"success probability",type:types.unitInterval}],wikipedia:true,mixins:[base.finiteSupport],sample:function(){return util.random()<ad.value(this.params.p)},score:function(val){if(ad.scalar.pneq(val,true)&&ad.scalar.pneq(val,false)){return ad.scalar.neg(Infinity)}return val?ad.scalar.log(this.params.p):ad.scalar.log(ad.scalar.sub(1,this.params.p))},support:function(){return[true,false]}});module.exports={Bernoulli:Bernoulli}},{"../ad":888,"../types":986,"../util":987,"./base":892}],894:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var gaussian=require("./gaussian");function expGammaSample(shape,scale){if(shape<1){var r;r=expGammaSample(1+shape,scale)+Math.log(util.random())/shape;if(r===-Infinity){util.warn("log gamma sample underflow, rounded to nearest representable support value");return-Number.MAX_VALUE}return r}var x,v,u,log_v;var d=shape-1/3;var c=1/Math.sqrt(9*d);while(true){do{x=gaussian.sample(0,1);v=1+c*x}while(v<=0);log_v=3*Math.log(v);v=v*v*v;u=util.random();if(u<1-.331*x*x*x*x||Math.log(u)<.5*x*x+d*(1-v+Math.log(v))){return Math.log(scale)+Math.log(d)+log_v}}}function expGammaScore(shape,scale,val){var x=val;return ad.scalar.sub(ad.scalar.sub(ad.scalar.sub(ad.scalar.mul(ad.scalar.sub(shape,1),x),ad.scalar.div(ad.scalar.exp(x),scale)),ad.scalar.logGamma(shape)),ad.scalar.mul(shape,ad.scalar.log(scale)))}function logBeta(a,b){return ad.scalar.sub(ad.scalar.add(ad.scalar.logGamma(a),ad.scalar.logGamma(b)),ad.scalar.logGamma(ad.scalar.add(a,b)))}function sample(a,b){var log_x=expGammaSample(a,1);var log_y=expGammaSample(b,1);var v=1/(1+Math.exp(log_y-log_x));if(v===0){util.warn("beta sample underflow, rounded to nearest representable support value");v=Number.MIN_VALUE}else if(v===1){util.warn("beta sample overflow, rounded to nearest representable support value");v=1-Number.EPSILON/2}return v}var Beta=base.makeDistributionType({name:"Beta",desc:"Distribution over ``[0, 1]``",params:[{name:"a",desc:"shape",type:types.positiveReal},{name:"b",desc:"shape",type:types.positiveReal}],wikipedia:true,mixins:[base.continuousSupport],sample:function(){return sample(ad.value(this.params.a),ad.value(this.params.b))},score:function(x){var a=this.params.a;var b=this.params.b;return ad.scalar.gt(x,0)&&ad.scalar.lt(x,1)?ad.scalar.sub(ad.scalar.add(ad.scalar.mul(ad.scalar.sub(a,1),ad.scalar.log(x)),ad.scalar.mul(ad.scalar.sub(b,1),ad.scalar.log(ad.scalar.sub(1,x)))),logBeta(a,b)):ad.scalar.neg(Infinity)},support:function(){return{lower:0,upper:1}}});module.exports={Beta:Beta,sample:sample}},{"../ad":888,"../types":986,"../util":987,"./base":892,"./gaussian":904}],895:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var base=require("./base");var types=require("../types");var util=require("../util");var beta=require("./beta");function lnfactExact(x){if(ad.scalar.lt(x,0)){throw new Error(ad.scalar.add("lnfactExact called on negative argument ",x))}if(ad.scalar.lt(x,1)){x=1}var t=0;while(ad.scalar.gt(x,1)){t=ad.scalar.add(t,ad.scalar.log(x));x=ad.scalar.sub(x,1)}return t}function sample(p,n){var k=0;var N=10;var a,b;while(n>N){a=Math.floor(1+n/2);b=1+n-a;var x=beta.sample(a,b);if(x>=p){n=a-1;p/=x}else{k+=a;n=b-1;p=(p-x)/(1-x)}}var u;for(var i=0;i<n;i++){u=util.random();if(u<p){k++}}return k||0}var Binomial=base.makeDistributionType({name:"Binomial",desc:"Distribution over the number of successes for ``n`` independent ``Bernoulli({p: p})`` trials.",params:[{name:"p",desc:"success probability",type:types.unitInterval},{name:"n",desc:"number of trials",type:types.positiveInt}],wikipedia:true,mixins:[base.finiteSupport],sample:function(){return sample(ad.value(this.params.p),this.params.n)},score:function(val){var p=this.params.p;var n=this.params.n;if(!(ad.scalar.peq(typeof val,"number")&&ad.scalar.geq(val,0)&&ad.scalar.leq(val,n)&&ad.scalar.peq(val%1,0))){return ad.scalar.neg(Infinity)}var logNumPermutations=0;var m,o;if(ad.scalar.lt(val,ad.scalar.sub(n,val))){m=val;o=ad.scalar.sub(n,val)}else{m=ad.scalar.sub(n,val);o=val}for(var i=ad.scalar.add(o,1);ad.scalar.leq(i,n);i++){logNumPermutations=ad.scalar.add(logNumPermutations,ad.scalar.log(i))}logNumPermutations=ad.scalar.sub(logNumPermutations,lnfactExact(m));return ad.scalar.add(ad.scalar.add(logNumPermutations,ad.scalar.eq(val,0)?0:ad.scalar.mul(val,ad.scalar.log(p))),ad.scalar.eq(ad.scalar.sub(n,val),0)?0:ad.scalar.mul(ad.scalar.sub(n,val),ad.scalar.log(ad.scalar.sub(1,p))))},support:function(){return _.range(0,this.params.n+1)}});module.exports={Binomial:Binomial,sample:sample}},{"../ad":888,"../types":986,"../util":987,"./base":892,"./beta":894,lodash:164}],896:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var base=require("./base");var types=require("../types");var util=require("../util");var numeric=require("../math/numeric");var Marginal=require("./marginal").Marginal;var T=ad.tensor;var Categorical=base.makeDistributionType({name:"Categorical",desc:"Distribution over elements of ``vs`` with ``P(vs[i])`` proportional to ``ps[i]``. "+"``ps`` may be omitted, in which case a uniform distribution over ``vs`` is returned.",params:[{name:"ps",desc:"probabilities (can be unnormalized)",type:types.nonNegativeVectorOrRealArray,optional:true},{name:"vs",desc:"support",type:types.array(types.any)}],wikipedia:true,mixins:[base.finiteSupport],constructor:function(){if(ad.scalar.peq(this.params.ps,undefined)){this.params={ps:_.fill(Array(this.params.vs.length),1),vs:this.params.vs}}var ps=this.params.ps;var vs=this.params.vs;if(ad.scalar.pneq(vs.length,ad.value(ps).length)){throw new Error("Parameters ps and vs should have the same length.")}if(ad.scalar.peq(vs.length,0)){throw new Error("Parameters ps and vs should have length > 0.")}var dist={};var norm=_.isArray(ps)?numeric.sum(ps):T.sumreduce(ps);for(var i in vs){var val=vs[i];var k=util.serialize(val);if(!_.has(dist,k)){dist[k]={val:val,prob:0}}dist[k].prob=ad.scalar.add(dist[k].prob,ad.scalar.div(_.isArray(ps)?ps[i]:T.get(ps,i),norm))}this.marginal=new Marginal({dist:dist})},sample:function(){return this.marginal.sample()},score:function(val){return this.marginal.score(val)},support:function(){return this.marginal.support()}});module.exports={Categorical:Categorical}},{"../ad":888,"../math/numeric":959,"../types":986,"../util":987,"./base":892,"./marginal":913,lodash:164}],897:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var numeric=require("../math/numeric");var Uniform=require("./uniform").Uniform;var LOG_PI=numeric.LOG_PI;var Cauchy=base.makeDistributionType({name:"Cauchy",desc:"Distribution over ``[-Infinity, Infinity]``",params:[{name:"location",desc:"",type:types.unboundedReal},{name:"scale",desc:"",type:types.positiveReal}],wikipedia:true,mixins:[base.continuousSupport],sample:function(){var u=util.random();return ad.value(this.params.location)+ad.value(this.params.scale)*Math.tan(Math.PI*(u-.5))},score:function(x){var scale=this.params.scale;var location=this.params.location;return ad.scalar.sub(ad.scalar.sub(ad.scalar.neg(LOG_PI),ad.scalar.log(scale)),ad.scalar.log(ad.scalar.add(1,ad.scalar.pow(ad.scalar.div(ad.scalar.sub(x,location),scale),2))))},base:function(){return new Uniform({a:0,b:1})},transform:function(x){var location=this.params.location;var scale=this.params.scale;return ad.scalar.add(location,ad.scalar.mul(scale,ad.scalar.tan(ad.scalar.mul(ad.scalar.PI,ad.scalar.sub(x,.5)))))}});module.exports={Cauchy:Cauchy}},{"../ad":888,"../math/numeric":959,"../types":986,"../util":987,"./base":892,"./uniform":924}],898:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var Delta=base.makeDistributionType({name:"Delta",desc:"Discrete distribution that assigns probability one to the single "+"element in its support. This is only useful in special circumstances as sampling "+"from ``Delta({v: val})`` can be replaced with ``val`` itself. Furthermore, a ``Delta`` "+"distribution parameterized by a random choice should not be used with MCMC based inference, "+"as doing so produces incorrect results.",params:[{name:"v",desc:"support element",type:types.any}],mixins:[base.finiteSupport],sample:function(){return ad.value(this.params.v)},score:function(val){return ad.value(val)===ad.value(this.params.v)?0:-Infinity},support:function(){return[this.params.v]},base:function(){return this},transform:function(x){return this.params.v}});module.exports={Delta:Delta}},{"../ad":888,"../types":986,"./base":892}],899:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var Tensor=require("../tensor");var numeric=require("../math/numeric");var gaussian=require("./gaussian");var TensorGaussian=require("./tensorGaussian").TensorGaussian;var LOG_2PI=numeric.LOG_2PI;function sample(mu,sigma){var dims=mu.dims;var x=new Tensor(dims);var n=x.length;while(n--){x.data[n]=gaussian.sample(mu.data[n],sigma.data[n])}return x}function score(mu,sigma,x){var _x=ad.value(x);var _mu=ad.value(mu);if(!util.isTensor(_x)||!util.tensorEqDims(_x,_mu)){return-Infinity}var d=_mu.length;var dLog2Pi=d*LOG_2PI;var logDetCov=ad.scalar.mul(2,ad.tensor.sumreduce(ad.tensor.log(sigma)));var z=ad.tensor.div(ad.tensor.sub(x,mu),sigma);return ad.scalar.mul(-.5,ad.scalar.add(dLog2Pi,ad.scalar.add(logDetCov,ad.tensor.sumreduce(ad.tensor.mul(z,z)))))}var DiagCovGaussian=base.makeDistributionType({name:"DiagCovGaussian",desc:"A distribution over tensors in which each element is independent and Gaussian distributed, "+"with its own mean and standard deviation. i.e. A multivariate Gaussian distribution with "+"diagonal covariance matrix. The distribution is over tensors that have the same shape as the "+"parameters ``mu`` and ``sigma``, which in turn must have the same shape as each other.",params:[{name:"mu",desc:"mean",type:types.unboundedTensor},{name:"sigma",desc:"standard deviations",type:types.positiveTensor}],mixins:[base.continuousSupport],constructor:function(){var _mu=ad.value(this.params.mu);var _sigma=ad.value(this.params.sigma);if(!util.tensorEqDims(_mu,_sigma)){throw new Error(this.meta.name+": mu and sigma should be the same shape.")}},sample:function(){return sample(ad.value(this.params.mu),ad.value(this.params.sigma))},score:function(x){return score(this.params.mu,this.params.sigma,x)},base:function(){var dims=ad.value(this.params.mu).dims;return new TensorGaussian({mu:0,sigma:1,dims:dims})},transform:function(x){var mu=this.params.mu;var sigma=this.params.sigma;return ad.tensor.add(ad.tensor.mul(sigma,x),mu)}});module.exports={DiagCovGaussian:DiagCovGaussian,sample:sample,score:score}},{"../ad":888,"../math/numeric":959,"../tensor":972,"../types":986,"../util":987,"./base":892,"./gaussian":904,"./tensorGaussian":922}],900:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var Tensor=require("../tensor");var gamma=require("./gamma");function sample(alpha){var n=alpha.dims[0];var ssum=0;var theta=new Tensor([n,1]);var t;for(var i=0;i<n;i++){t=gamma.sample(alpha.data[i],1);theta.data[i]=t;ssum+=t}for(var j=0;j<n;j++){theta.data[j]/=ssum;if(theta.data[j]===0){theta.data[j]=Number.MIN_VALUE}if(theta.data[j]===1){theta.data[j]=1-Number.EPSILON/2}}return theta}function score(alpha,val){var _val=ad.value(val);var _alpha=ad.value(alpha);if(!util.isVector(_val)||!util.tensorEqDim0(_val,_alpha)){return-Infinity}return ad.scalar.add(ad.tensor.sumreduce(ad.tensor.sub(ad.tensor.mul(ad.tensor.sub(alpha,1),ad.tensor.log(val)),ad.tensor.logGamma(alpha))),ad.scalar.logGamma(ad.tensor.sumreduce(alpha)))}var Dirichlet=base.makeDistributionType({name:"Dirichlet",desc:"Distribution over probability vectors. "+"If ``alpha`` has length ``d`` then the distribution "+"is over probability vectors of length ``d``.",params:[{name:"alpha",desc:"concentration",type:types.positiveVector}],wikipedia:true,mixins:[base.continuousSupport,base.noHMC],sample:function(){return sample(ad.value(this.params.alpha))},score:function(val){return score(this.params.alpha,val)}});module.exports={Dirichlet:Dirichlet}},{"../ad":888,"../tensor":972,"../types":986,"../util":987,"./base":892,"./gamma":903}],901:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var base=require("./base");var types=require("../types");var util=require("../util");var numeric=require("../math/numeric");var T=ad.tensor;function sample(theta,thetaSum){if(thetaSum===undefined){thetaSum=numeric._sum(theta)}var x=util.random()*thetaSum;var k=theta.length;var probAccum=0;for(var i=0;i<k;i++){probAccum+=theta[i];if(x<probAccum){return i}}return k-1}function scoreVector(val,probs,norm){return ad.scalar.log(ad.scalar.div(T.get(probs,val),norm))}function scoreArray(val,probs,norm){return ad.scalar.log(ad.scalar.div(probs[val],norm))}function inSupport(val,dim){return val===Math.floor(val)&&0<=val&&val<dim}function toUnliftedArray(x){return _.isArray(x)?x.map(ad.value):ad.value(x).data}var Discrete=base.makeDistributionType({name:"Discrete",desc:"Distribution over ``{0,1,...,ps.length-1}`` with P(i) proportional to ``ps[i]``",params:[{name:"ps",desc:"probabilities (can be unnormalized)",type:types.nonNegativeVectorOrRealArray}],wikipedia:"Categorical_distribution",mixins:[base.finiteSupport],constructor:function(){if(_.isArray(this.params.ps)){this.norm=numeric.sum(this.params.ps);this.scoreFn=scoreArray;this.dim=this.params.ps.length}else{this.norm=T.sumreduce(this.params.ps);this.scoreFn=scoreVector;this.dim=ad.value(this.params.ps).length}},sample:function(){return sample(toUnliftedArray(this.params.ps),ad.value(this.norm))},score:function(val){if(inSupport(val,this.dim)){return this.scoreFn(val,this.params.ps,this.norm)}else{return-Infinity}},support:function(){return _.range(this.dim)}});module.exports={Discrete:Discrete,sample:sample}},{"../ad":888,"../math/numeric":959,"../types":986,"../util":987,"./base":892,lodash:164}],902:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var Uniform=require("./uniform").Uniform;var Exponential=base.makeDistributionType({name:"Exponential",desc:"Distribution over ``[0, Infinity]``",params:[{name:"a",desc:"rate",type:types.positiveReal}],wikipedia:true,mixins:[base.continuousSupport],sample:function(){var u=util.random();return Math.log(u)/(-1*ad.value(this.params.a))},score:function(val){return ad.scalar.geq(val,0)?ad.scalar.sub(ad.scalar.log(this.params.a),ad.scalar.mul(this.params.a,val)):ad.scalar.neg(Infinity)},base:function(){return new Uniform({a:0,b:1})},transform:function(x){return ad.scalar.div(ad.scalar.log(x),ad.scalar.neg(this.params.a))},support:function(){return{lower:0,upper:Infinity}}});module.exports={Exponential:Exponential}},{"../ad":888,"../types":986,"../util":987,"./base":892,"./uniform":924}],903:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var gaussian=require("./gaussian");function sample(shape,scale){if(shape<1){var r;r=sample(1+shape,scale)*Math.pow(util.random(),1/shape);if(r===0){util.warn("gamma sample underflow, rounded to nearest representable support value");return Number.MIN_VALUE}return r}var x,v,u;var d=shape-1/3;var c=1/Math.sqrt(9*d);while(true){do{x=gaussian.sample(0,1);v=1+c*x}while(v<=0);v=v*v*v;u=util.random();if(u<1-.331*x*x*x*x||Math.log(u)<.5*x*x+d*(1-v+Math.log(v))){return scale*d*v}}}var Gamma=base.makeDistributionType({name:"Gamma",desc:"Distribution over positive reals.",params:[{name:"shape",desc:"",type:types.positiveReal},{name:"scale",desc:"",type:types.positiveReal}],wikipedia:true,mixins:[base.continuousSupport],sample:function(){return sample(ad.value(this.params.shape),ad.value(this.params.scale))},score:function(x){var shape=this.params.shape;var scale=this.params.scale;return ad.scalar.sub(ad.scalar.sub(ad.scalar.sub(ad.scalar.mul(ad.scalar.sub(shape,1),ad.scalar.log(x)),ad.scalar.div(x,scale)),ad.scalar.logGamma(shape)),ad.scalar.mul(shape,ad.scalar.log(scale)))},support:function(){return{lower:0,upper:Infinity}}});module.exports={Gamma:Gamma,sample:sample}},{"../ad":888,"../types":986,"../util":987,"./base":892,"./gaussian":904}],904:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var numeric=require("../math/numeric");var LOG_2PI=numeric.LOG_2PI;function sample(mu,sigma){var u,v,x,y,q;do{u=1-util.random();v=1.7156*(util.random()-.5);x=u-.449871;y=Math.abs(v)+.386595;q=x*x+y*(.196*y-.25472*x)}while(q>=.27597&&(q>.27846||v*v>-4*u*u*Math.log(u)));return mu+sigma*v/u}function score(mu,sigma,x){return ad.scalar.mul(ad.scalar.neg(.5),ad.scalar.add(ad.scalar.add(LOG_2PI,ad.scalar.mul(2,ad.scalar.log(sigma))),ad.scalar.div(ad.scalar.mul(ad.scalar.sub(x,mu),ad.scalar.sub(x,mu)),ad.scalar.mul(sigma,sigma))))}var Gaussian=base.makeDistributionType({name:"Gaussian",desc:"Distribution over reals.",params:[{name:"mu",desc:"mean",type:types.unboundedReal},{name:"sigma",desc:"standard deviation",type:types.positiveReal}],wikipedia:"Normal_distribution",mixins:[base.continuousSupport],sample:function(){return sample(ad.value(this.params.mu),ad.value(this.params.sigma))},score:function(x){return score(this.params.mu,this.params.sigma,x)},base:function(){return new Gaussian({mu:0,sigma:1})},transform:function(x){var mu=this.params.mu;var sigma=this.params.sigma;return ad.scalar.add(ad.scalar.mul(sigma,x),mu)}});module.exports={Gaussian:Gaussian,sample:sample,score:score}},{"../ad":888,"../math/numeric":959,"../types":986,"../util":987,"./base":892}],905:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var ImproperUniform=base.makeDistributionType({name:"ImproperUniform",desc:"Improper continuous uniform distribution which has probability one everywhere.",params:[],nodoc:true,nohelper:true,mixins:[base.continuousSupport],sample:function(){throw new Error("cannot sample from this improper distribution.")},score:function(val){return 0}});module.exports={ImproperUniform:ImproperUniform}},{"../ad":888,"./base":892}],906:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var util=require("../util");var base=require("./base");var distributions=_.chain([["Bernoulli",require("./bernoulli")],["Beta",require("./beta")],["Binomial",require("./binomial")],["Categorical",require("./categorical")],["Cauchy",require("./cauchy")],["Delta",require("./delta")],["DiagCovGaussian",require("./diagCovGaussian")],["Dirichlet",require("./dirichlet")],["Discrete",require("./discrete")],["Exponential",require("./exponential")],["Gamma",require("./gamma")],["Gaussian",require("./gaussian")],["ImproperUniform",require("./improperUniform")],["IspNormal",require("./ispNormal")],["KDE",require("./kde")],["Laplace",require("./laplace")],["LogisticNormal",require("./logisticNormal")],["LogitNormal",require("./logitNormal")],["LogNormal",require("./logNormal")],["Marginal",require("./marginal")],["Mixture",require("./mixture")],["Multinomial",require("./multinomial")],["MultivariateBernoulli",require("./multivariateBernoulli")],["MultivariateGaussian",require("./multivariateGaussian")],["Poisson",require("./poisson")],["RandomInteger",require("./randomInteger")],["SampleBasedMarginal",require("./sampleBasedMarginal")],["StudentT",require("./studentT")],["TensorGaussian",require("./tensorGaussian")],["TensorLaplace",require("./tensorLaplace")],["Uniform",require("./uniform")]]).fromPairs().mapValues(function(module,name){return module[name]}).value();function metadata(){return _.chain(distributions).toPairs().sortBy(function(pair){return pair[0]}).map(function(pair){return pair[1]}).map(function(dist){return dist.prototype.meta}).value()}var wpplFns=_.chain(distributions).mapValues(function(ctor){return function(s,k,a,params){if(arguments.length>4){throw new Error("Too many arguments. Distributions take at most one argument.")}return k(s,new ctor(params))}}).mapKeys(function(ctor,name){return"make"+name}).value();var serialize=function(dist){return util.serialize(dist)};var deserialize=function(JSONString){var obj=util.deserialize(JSONString);if(!obj.probs||!obj.support){throw new Error("Cannot deserialize a non-distribution JSON object: "+JSONString)}return new distributions.Categorical({ps:obj.probs,vs:obj.support})};module.exports=_.assign({metadata:metadata,isDist:base.isDist,clone:base.clone,serialize:serialize,deserialize:deserialize},distributions,wpplFns)},{"../ad":888,"../util":987,"./base":892,"./bernoulli":893,"./beta":894,"./binomial":895,"./categorical":896,"./cauchy":897,"./delta":898,"./diagCovGaussian":899,"./dirichlet":900,"./discrete":901,"./exponential":902,"./gamma":903,"./gaussian":904,"./improperUniform":905,"./ispNormal":907,"./kde":908,"./laplace":909,"./logNormal":910,"./logisticNormal":911,"./logitNormal":912,"./marginal":913,"./mixture":914,"./multinomial":915,"./multivariateBernoulli":916,"./multivariateGaussian":917,"./poisson":918,"./randomInteger":919,"./sampleBasedMarginal":920,"./studentT":921,"./tensorGaussian":922,"./tensorLaplace":923,"./uniform":924,lodash:164}],907:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var gaussian=require("./gaussian");var Gaussian=gaussian.Gaussian;var IspNormal=base.makeDistributionType({name:"IspNormal",nodoc:true,desc:"A distribution over positive reals obtained by mapping a Gaussian "+"distributed variable through the softplus function.",params:[{name:"mu",desc:"location",type:types.unboundedReal},{name:"sigma",desc:"scale",type:types.positiveReal}],mixins:[base.continuousSupport],sample:function(){var mu=ad.value(this.params.mu);var sigma=ad.value(this.params.sigma);return Math.log(Math.exp(gaussian.sample(mu,sigma))+1)},score:function(val){var mu=this.params.mu;var sigma=this.params.sigma;var x=ad.scalar.log(ad.scalar.sub(ad.scalar.exp(val),1));return ad.scalar.sub(ad.scalar.add(gaussian.score(mu,sigma,x),val),x)},base:function(){return new Gaussian({mu:0,sigma:1})},transform:function(x){var mu=this.params.mu;var sigma=this.params.sigma;return ad.scalar.log(ad.scalar.add(ad.scalar.exp(ad.scalar.add(ad.scalar.mul(x,sigma),mu)),1))},support:function(){return{lower:0,upper:Infinity}}});module.exports={IspNormal:IspNormal}},{"../ad":888,"../types":986,"./base":892,"./gaussian":904}],908:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var base=require("./base");var types=require("../types");var util=require("../util");var Tensor=require("../tensor");var stats=require("../math/statistics");var numeric=require("../math/numeric");var gaussian=require("./gaussian");var diagCovGaussian=require("./diagCovGaussian");var kernels={gaussian:{dataType:types.unboundedReal,widthType:types.positiveReal,sample:gaussian.sample,score:gaussian.score,defaultWidth:function(data){var sd=stats.sd(data);var n=data.length;var width=1.06*sd*Math.pow(n,-.2);return width}},mvGaussian:{dataType:types.unboundedVector,widthType:types.positiveVectorCB,sample:diagCovGaussian.sample,score:diagCovGaussian.score,defaultWidth:function(data){var d=data[0].dims[0];var n=data.length;var mean=data.reduce(function(acc,x){return acc.add(x)}).div(n);var sd=data.reduce(function(acc,x){return acc.add(x.sub(mean).pow(2))},new Tensor(data[0].dims)).div(n).sqrt();return sd.mul(Math.pow(4/(d+2),1/(d+4))*Math.pow(n,-1/(d+4)))}}};var KDE=base.makeDistributionType({name:"KDE",desc:"A distribution based on a kernel density estimate of ``data``. "+"A Gaussian kernel is used, and both real and vector valued data are supported. "+"When the data are vector valued, ``width`` should be a vector specifying the kernel "+"width for each dimension of the data. "+"When ``width`` is omitted, Silverman's rule of thumb "+"is used to select a kernel width. This rule assumes the data are "+"approximately Gaussian distributed. When this assumption does not hold, a ``width`` "+"should be specified in order to obtain sensible results.",params:[{name:"data",desc:"data array"},{name:"width",desc:"kernel width",optional:true}],wikipedia:"Kernel_density_estimation",nohelper:true,mixins:[base.continuousSupport],constructor:function(){if(!_.isArray(this.params.data)||_.isEmpty(this.params.data)){throw new Error('Parameter "data" should be a non-empty array.')}var data=this.params.data;this.kernel=_.find(kernels,function(kernel){return kernel.dataType.check(data[0])});if(!this.kernel){throw new Error('Parameter "data" should be an array of reals or vectors.')}if(this.params.width===undefined){this.params.width=this.kernel.defaultWidth(this.params.data)}if(!this.kernel.widthType.check(this.params.width)){throw new Error('Parameter "width" should be of type '+this.kernel.widthType.desc)}},sample:function(){var data=this.params.data;var width=this.params.width;var x=data[Math.floor(util.random()*data.length)];return this.kernel.sample(x,width)},score:function(val){var data=this.params.data;var width=this.params.width;var n=data.length;var kernel=this.kernel;return data.reduce(function(acc,x){return numeric.logaddexp(acc,kernel.score(x,width,val))},-Infinity)-Math.log(n)}});module.exports={KDE:KDE}},{"../ad":888,"../math/numeric":959,"../math/statistics":961,"../tensor":972,"../types":986,"../util":987,"./base":892,"./diagCovGaussian":899,"./gaussian":904,lodash:164}],909:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");function sample(location,scale){var z=util.random();var u=z-.5;return location-scale*Math.sign(u)*Math.log(1-2*Math.abs(u))}function score(location,scale,x){return ad.scalar.mul(ad.scalar.neg(1),ad.scalar.add(ad.scalar.log(ad.scalar.mul(2,scale)),ad.scalar.div(ad.scalar.abs(ad.scalar.sub(x,location)),scale)))}var Laplace=base.makeDistributionType({name:"Laplace",desc:"Distribution over ``[-Infinity, Infinity]``",params:[{name:"location",desc:"",type:types.unboundedReal},{name:"scale",desc:"",type:types.positiveReal}],wikipedia:true,mixins:[base.continuousSupport],sample:function(){return sample(ad.value(this.params.location),ad.value(this.params.scale))},score:function(val){return score(this.params.location,this.params.scale,val)},base:function(){return new Laplace({location:0,scale:1})},transform:function(x){var location=this.params.location;var scale=this.params.scale;return ad.scalar.add(ad.scalar.mul(scale,x),location)},support:function(){return{lower:-Infinity,upper:Infinity}}});module.exports={Laplace:Laplace,sample:sample}},{"../ad":888,"../types":986,"../util":987,"./base":892}],910:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var numeric=require("../math/numeric");var gaussian=require("./gaussian");var Gaussian=gaussian.Gaussian;var LOG_2PI=numeric.LOG_2PI;function score(mu,sigma,x){var logx=ad.scalar.log(x);return ad.scalar.sub(ad.scalar.sub(ad.scalar.neg(logx),ad.scalar.log(sigma)),ad.scalar.mul(.5,ad.scalar.add(LOG_2PI,ad.scalar.div(ad.scalar.mul(ad.scalar.sub(logx,mu),ad.scalar.sub(logx,mu)),ad.scalar.mul(sigma,sigma)))))}function sample(mu,sigma){var gaussian_sample=gaussian.sample(mu,sigma);return Math.exp(gaussian_sample)}var LogNormal=base.makeDistributionType({name:"LogNormal",desc:"Distribution over non-negative reals where the log of the random "+"variable is normally distributed.",params:[{name:"mu",desc:"mean",type:types.unboundedReal},{name:"sigma",desc:"standard deviation",type:types.positiveReal}],wikipedia:"Log-normal_distribution",mixins:[base.continuousSupport],sample:function(){return sample(ad.value(this.params.mu),ad.value(this.params.sigma))},score:function(x){return score(this.params.mu,this.params.sigma,x)},support:function(){return{lower:0,upper:Infinity}},base:function(){return new Gaussian({mu:0,sigma:1})},transform:function(x){return ad.scalar.exp(ad.scalar.add(ad.scalar.mul(this.params.sigma,x),this.params.mu))}});module.exports={LogNormal:LogNormal,sample:sample,score:score}},{"../ad":888,"../math/numeric":959,"../types":986,"../util":987,"./base":892,"./gaussian":904}],911:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var numeric=require("../math/numeric");var diagCovGaussian=require("./diagCovGaussian");var TensorGaussian=require("./tensorGaussian").TensorGaussian;var LogisticNormal=base.makeDistributionType({name:"LogisticNormal",desc:"A distribution over probability vectors obtained by transforming a random variable "+"drawn from ``DiagCovGaussian({mu: mu, sigma: sigma})``. If ``mu`` and ``sigma`` have length ``d`` "+"then the distribution is over probability vectors of length ``d+1``.",params:[{name:"mu",desc:"mean",type:types.unboundedVector},{name:"sigma",desc:"standard deviations",type:types.positiveVector}],wikipedia:"Logit-normal_distribution#Multivariate_generalization",mixins:[base.continuousSupport,base.noHMC],constructor:function(){var _mu=ad.value(this.params.mu);var _sigma=ad.value(this.params.sigma);if(!util.tensorEqDim0(_mu,_sigma)){throw new Error(this.meta.name+": mu and sigma should have the same length.")}},sample:function(){return numeric.squishToProbSimplex(diagCovGaussian.sample(ad.value(this.params.mu),ad.value(this.params.sigma)))},score:function(val){var mu=this.params.mu;var sigma=this.params.sigma;var _mu=ad.value(mu);var _val=ad.value(val);if(!util.isVector(_val)||_val.dims[0]-1!==_mu.dims[0]){return-Infinity}var d=_mu.dims[0];var u=ad.tensor.reshape(ad.tensor.range(val,0,d),[d,1]);var u_last=ad.tensor.get(val,d);var inv=ad.tensor.log(ad.tensor.div(u,u_last));var normScore=diagCovGaussian.score(mu,sigma,inv);return ad.scalar.sub(normScore,ad.tensor.sumreduce(ad.tensor.log(val)))},base:function(){var dims=ad.value(this.params.mu).dims;return new TensorGaussian({mu:0,sigma:1,dims:dims})},transform:function(x){var mu=this.params.mu;var sigma=this.params.sigma;return numeric.squishToProbSimplex(ad.tensor.add(ad.tensor.mul(sigma,x),mu))}});module.exports={LogisticNormal:LogisticNormal}},{"../ad":888,"../math/numeric":959,"../types":986,"../util":987,"./base":892,"./diagCovGaussian":899,"./tensorGaussian":922}],912:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var gaussian=require("./gaussian");var Gaussian=gaussian.Gaussian;var LogitNormal=base.makeDistributionType({name:"LogitNormal",desc:"A distribution over ``(a,b)`` obtained by scaling and shifting a standard logit-normal.",params:[{name:"mu",desc:"location",type:types.unboundedReal},{name:"sigma",desc:"scale",type:types.positiveReal},{name:"a",desc:"lower bound",type:types.unboundedReal},{name:"b",desc:"upper bound (>a)",type:types.unboundedReal}],wikipedia:"Logit-normal_distribution",mixins:[base.continuousSupport],sample:function(){var a=ad.value(this.params.a);var b=ad.value(this.params.b);var mu=ad.value(this.params.mu);var sigma=ad.value(this.params.sigma);var x=gaussian.sample(mu,sigma);return ad.scalar.sigmoid(x)*(b-a)+a},score:function(val){var a=this.params.a;var b=this.params.b;var y=ad.scalar.div(ad.scalar.sub(val,a),ad.scalar.sub(b,a));var x=ad.scalar.log(ad.scalar.div(y,ad.scalar.sub(1,y)));var gaussScore=gaussian.score(this.params.mu,this.params.sigma,x);return ad.scalar.sub(gaussScore,ad.scalar.log(ad.scalar.mul(ad.scalar.mul(y,ad.scalar.sub(1,y)),ad.scalar.sub(b,a))))},base:function(){return new Gaussian({mu:0,sigma:1})},transform:function(x){var a=this.params.a;var b=this.params.b;var mu=this.params.mu;var sigma=this.params.sigma;return ad.scalar.add(ad.scalar.mul(ad.scalar.sigmoid(ad.scalar.add(ad.scalar.mul(x,sigma),mu)),ad.scalar.sub(b,a)),a)},support:function(){return{lower:this.params.a,upper:this.params.b}}});module.exports={LogitNormal:LogitNormal}},{"../ad":888,"../types":986,"./base":892,"./gaussian":904}],913:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var assert=require("assert");var util=require("../util");var base=require("./base");var Marginal=base.makeDistributionType({name:"Marginal",nodoc:true,nohelper:true,params:[{name:"dist"}],mixins:[base.finiteSupport],constructor:function(){var norm=_.reduce(this.params.dist,function(acc,obj){return ad.scalar.add(acc,obj.prob)},0);assert.ok(ad.scalar.lt(ad.scalar.abs(ad.scalar.sub(1,norm)),1e-8),"Expected marginal distribution to be normalized.");this.supp=_.map(this.params.dist,function(obj){return obj.val});this.getDist=function(){return this.params.dist}},sample:function(){var x=util.random();var dist=this.params.dist;var probAccum=0;for(var i in dist){if(dist.hasOwnProperty(i)){probAccum=ad.scalar.add(probAccum,dist[i].prob);if(ad.scalar.lt(x,probAccum)){return dist[i].val}}}return this.params.dist[i].val},score:function(val){var obj=this.params.dist[util.serialize(val)];return obj?ad.scalar.log(obj.prob):ad.scalar.neg(Infinity)},support:function(){return this.supp},print:function(){return print(this.params.dist)}});function print(dist){return"Marginal:\n"+_.map(dist,function(obj,val){return[val,obj.prob]}).sort(function(a,b){return b[1]-a[1]}).map(function(pair){return"    "+pair[0]+" : "+pair[1]}).join("\n")}module.exports={Marginal:Marginal,print:print}},{"../ad":888,"../util":987,"./base":892,assert:3,lodash:164}],914:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var base=require("./base");var types=require("../types");var numeric=require("../math/numeric");var util=require("../util");var Discrete=require("./discrete").Discrete;function continuousSupportEq(s1,s2){return s1===s2||s1!==undefined&&s2!==undefined&&s1.lower===s2.lower&&s1.upper===s2.upper}function unionDiscreteSupports(supports){return _.chain(supports).flatten().uniqWith(supportElemEq).value()}function supportElemEq(x,y){return util.serialize(x)===util.serialize(y)}var Mixture=base.makeDistributionType({name:"Mixture",desc:"A finite mixture of distributions. "+"The component distributions should be either all discrete or all continuous. "+"All continuous distributions should share a common support.",params:[{name:"dists",desc:"array of component distributions"},{name:"ps",desc:"component probabilities (can be unnormalized)",type:types.nonNegativeVectorOrRealArray}],wikipedia:false,constructor:function(){var dists=this.params.dists;var ps=this.params.ps;if(!_.isArray(dists)){throw new Error("Parameter dists should be an array.")}if(dists.length!==ad.value(ps).length){throw new Error("Parameters ps and dists should have the same length.")}if(dists.length===0){throw new Error("Parameters ps and dists should be non-empty.")}if(!_.every(dists,base.isDist)){throw new Error("Parameter dists should be an array of distributions.")}this.isContinuous=dists[0].isContinuous;var support_0=this.isContinuous?dists[0].support&&dists[0].support():undefined;for(var i=1;i<dists.length;i++){var dist_i=dists[i];if(dist_i.isContinuous!==this.isContinuous){throw new Error("Mixtures combining discrete and continuous distributions are not supported.")}if(this.isContinuous){var support_i=dist_i.support&&dist_i.support();if(!continuousSupportEq(support_0,support_i)){throw new Error("All continuous distributions should have the same support.")}}}if(this.isContinuous){this.support=support_0&&_.constant(support_0)}else{this.support=function(){return unionDiscreteSupports(_.invokeMap(dists,"support"))}}this.indicatorDist=new Discrete({ps:ps},true)},sample:function(){var i=this.indicatorDist.sample();return this.params.dists[i].sample()},score:function(val){var dists=this.params.dists;var s=ad.scalar.neg(Infinity);for(var i=0;ad.scalar.lt(i,dists.length);i++){s=numeric.logaddexp(s,ad.scalar.add(this.indicatorDist.score(i),dists[i].score(val)))}return s}});module.exports={Mixture:Mixture}},{"../ad":888,"../math/numeric":959,"../types":986,"../util":987,"./base":892,"./discrete":901,lodash:164}],915:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var base=require("./base");var types=require("../types");var numeric=require("../math/numeric");var discrete=require("./discrete");function zeros(n){var a=new Array(n);for(var i=0;i<n;i++){a[i]=0}return a}function sample(theta,n){var a=zeros(theta.length);for(var i=0;i<n;i++){a[discrete.sample(theta)]++}return a}var Multinomial=base.makeDistributionType({name:"Multinomial",desc:"Distribution over counts for ``n`` independent ``Discrete({ps: ps})`` trials.",params:[{name:"ps",desc:"probabilities",type:types.probabilityArray},{name:"n",desc:"number of trials",type:types.positiveInt}],wikipedia:true,mixins:[base.finiteSupport],sample:function(){return sample(this.params.ps.map(ad.value),this.params.n)},score:function(val){if(ad.scalar.pneq(numeric.sum(val),this.params.n)){return ad.scalar.neg(Infinity)}var x=[];var y=[];for(var i=0;ad.scalar.lt(i,this.params.ps.length);i++){x[i]=numeric.lnfact(val[i]);y[i]=ad.scalar.peq(val[i],0)?0:ad.scalar.mul(val[i],ad.scalar.log(this.params.ps[i]))}return ad.scalar.add(ad.scalar.sub(numeric.lnfact(this.params.n),numeric.sum(x)),numeric.sum(y))},support:function(){var combinations=allDiscreteCombinations(this.params.n,this.params.ps,[],0);var toHist=function(l){return buildHistogramFromCombinations(l,this.params.ps)}.bind(this);var hists=combinations.map(toHist);return hists}});function allDiscreteCombinations(k,states,got,pos){var support=[];if(got.length==k){return[_.clone(got)]}for(var i=pos;i<states.length;i++){got.push(i);support=support.concat(allDiscreteCombinations(k,states,got,i));got.pop()}return support}function buildHistogramFromCombinations(samples,states){var stateIndices=_.range(states.length);var zeroHist=_.chain(stateIndices).map(function(i){return[i,0]}).fromPairs().value();var hist=_.defaults(_.countBy(samples),zeroHist);var array=_.sortBy(hist,function(val,key){return key});return array}module.exports={Multinomial:Multinomial}},{"../ad":888,"../math/numeric":959,"../types":986,"./base":892,"./discrete":901,lodash:164}],916:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var assert=require("assert");var base=require("./base");var types=require("../types");var util=require("../util");var Tensor=require("../tensor");function mvBernoulliScore(ps,x){var _x=ad.value(x);var _ps=ad.value(ps);if(!util.isVector(_x)||!util.tensorEqDim0(_x,_ps)){return-Infinity}var xSub1=ad.tensor.sub(x,1);var pSub1=ad.tensor.sub(ps,1);return ad.tensor.sumreduce(ad.tensor.log(ad.tensor.add(ad.tensor.mul(x,ps),ad.tensor.mul(xSub1,pSub1))))}var MultivariateBernoulli=base.makeDistributionType({name:"MultivariateBernoulli",desc:"Distribution over a vector of independent Bernoulli variables. Each element "+"of the vector takes on a value in ``{0, 1}``. Note that this differs from ``Bernoulli`` which "+"has support ``{true, false}``.",params:[{name:"ps",desc:"probabilities",type:types.unitIntervalVector}],mixins:[base.finiteSupport],sample:function(){var ps=ad.value(this.params.ps);var d=ps.dims[0];var x=new Tensor([d,1]);var n=x.length;while(n--){x.data[n]=util.random()<ps.data[n]}return x},score:function(x){return mvBernoulliScore(this.params.ps,x)},support:function(){var dims=this.params.ps.dims;var d=dims[0];var n=Math.pow(2,d);return _.times(n,function(x){return new Tensor(dims).fromFlatArray(toBinaryArray(x,d))})}});function toBinaryArray(x,length){assert.ok(x>=0&&x<Math.pow(2,length));var arr=[];for(var i=0;i<length;i++){arr.push(x%2);x=x>>1}return arr}module.exports={MultivariateBernoulli:MultivariateBernoulli}},{"../ad":888,"../tensor":972,"../types":986,"../util":987,"./base":892,assert:3,lodash:164}],917:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var Tensor=require("../tensor");var numeric=require("../math/numeric");var gaussian=require("./gaussian");var TensorGaussian=require("./tensorGaussian").TensorGaussian;var T=ad.tensor;var LOG_2PI=numeric.LOG_2PI;function sample(mu,cov){var d=mu.dims[0];var z=new Tensor([d,1]);for(var i=0;i<d;i++){z.data[i]=gaussian.sample(0,1)}var L=cov.cholesky();return L.dot(z).add(mu)}function score(mu,cov,x){var _x=ad.value(x);var _mu=ad.value(mu);if(!util.isVector(_x)||!util.tensorEqDim0(_x,_mu)){return-Infinity}var d=_mu.dims[0];var dLog2Pi=d*LOG_2PI;var det=ad.tensor.determinant(cov);if(ad.value(det)<=0){throw new Error("The covariance matrix is not positive definite.")}var logDetCov=ad.scalar.log(det);var z=ad.tensor.sub(x,mu);var zT=ad.tensor.transpose(z);var prec=ad.tensor.inverse(cov);return ad.scalar.mul(-.5,ad.scalar.add(dLog2Pi,ad.scalar.add(logDetCov,ad.tensor.get(ad.tensor.dot(ad.tensor.dot(zT,prec),z),0))))}var MultivariateGaussian=base.makeDistributionType({name:"MultivariateGaussian",desc:"Multivariate Gaussian distribution with full covariance matrix. "+"If ``mu`` has length d and ``cov`` is a ``d``-by-``d`` matrix, "+"then the distribution is over vectors of length ``d``.",params:[{name:"mu",desc:"mean",type:types.unboundedVector},{name:"cov",desc:"covariance",type:types.posDefMatrix}],wikipedia:"Multivariate_normal_distribution",mixins:[base.continuousSupport],constructor:function(){var _mu=ad.value(this.params.mu);var _cov=ad.value(this.params.cov);if(!util.tensorEqDim0(_mu,_cov)){throw new Error(this.meta.name+": dimension mismatch between mu and cov.")}},sample:function(){return sample(ad.value(this.params.mu),ad.value(this.params.cov))},score:function(val){return score(this.params.mu,this.params.cov,val)},base:function(){var dims=ad.value(this.params.mu).dims;return new TensorGaussian({mu:0,sigma:1,dims:dims})},transform:function(x){var mu=this.params.mu;var cov=this.params.cov;var L=T.cholesky(cov);return T.add(T.dot(L,x),mu)}});module.exports={MultivariateGaussian:MultivariateGaussian}},{"../ad":888,"../math/numeric":959,"../tensor":972,"../types":986,"../util":987,"./base":892,"./gaussian":904,"./tensorGaussian":922}],918:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var numeric=require("../math/numeric");var gamma=require("./gamma");var binomial=require("./binomial");function sample(mu){var k=0;while(mu>10){var m=Math.floor(7/8*mu);var x=gamma.sample(m,1);if(x>=mu){return k+binomial.sample(mu/x,m-1)}else{mu-=x;k+=m}}var emu=Math.exp(-mu);var p=1;do{p*=util.random();k++}while(p>emu);return k-1}var Poisson=base.makeDistributionType({name:"Poisson",desc:"Distribution over integers.",params:[{name:"mu",desc:"mean",type:types.positiveReal}],wikipedia:true,sample:function(){return sample(ad.value(this.params.mu))},score:function(val){return ad.scalar.sub(ad.scalar.sub(ad.scalar.mul(val,ad.scalar.log(this.params.mu)),this.params.mu),numeric.lnfact(val))}});module.exports={Poisson:Poisson,sample:sample}},{"../ad":888,"../math/numeric":959,"../types":986,"../util":987,"./base":892,"./binomial":895,"./gamma":903}],919:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var base=require("./base");var types=require("../types");var util=require("../util");var RandomInteger=base.makeDistributionType({name:"RandomInteger",desc:"Uniform distribution over ``{0,1,...,n-1}``",params:[{name:"n",desc:"number of possible values",type:types.positiveInt}],wikipedia:"Uniform_distribution_(discrete)",mixins:[base.finiteSupport],sample:function(){return Math.floor(util.random()*this.params.n)},score:function(val){var inSupport=ad.scalar.peq(val,ad.scalar.floor(val))&&ad.scalar.leq(0,val)&&ad.scalar.lt(val,this.params.n);return inSupport?ad.scalar.neg(ad.scalar.log(this.params.n)):ad.scalar.neg(Infinity)},support:function(){return _.range(this.params.n)}});module.exports={RandomInteger:RandomInteger}},{"../ad":888,"../types":986,"../util":987,"./base":892,lodash:164}],920:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var base=require("./base");var util=require("../util");var marginal=require("./marginal");var SampleBasedMarginal=base.makeDistributionType({name:"SampleBasedMarginal",nodoc:true,nohelper:true,params:[{name:"samples"}],mixins:[base.finiteSupport],constructor:function(){if(!_.isArray(this.params.samples)||this.params.samples.length===0){throw new Error("Expected samples to be a non-empty array.")}this.samples=this.params.samples;this.getDist=function(){if(this._cacheddist){return this._cacheddist}else{var dist={};this.params.samples.forEach(function(obj){var val=obj.value;var key=util.serialize(val);if(dist[key]===undefined){dist[key]={val:val,prob:0}}dist[key].prob+=1});var n=this.params.samples.length;_.each(dist,function(obj){obj.prob/=n});this._cacheddist=dist;return dist}}},sample:function(){var n=this.params.samples.length;return this.params.samples[Math.floor(util.random()*n)].value},score:function(val){var key=util.serialize(val);var obj=this.getDist()[key];return obj===undefined?-Infinity:Math.log(obj.prob)},support:function(){if(this.params.samples.length===1){return[this.params.samples[0].value]}else if(this._cachedsupport){return this._cachedsupport}else{var support=_.map(this.getDist(),_.property("val"));this._cachedsupport=support;return support}},print:function(){return marginal.print(this.getDist())}});module.exports={SampleBasedMarginal:SampleBasedMarginal}},{"../ad":888,"../util":987,"./base":892,"./marginal":913,lodash:164}],921:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var gaussian=require("./gaussian");var gamma=require("./gamma");var numeric=require("../math/numeric");var LOG_PI=numeric.LOG_PI;function sample(df,location,scale){if(df<=0){util.error("Degrees of freedom <= 0")}var x=gaussian.sample(0,1);var y=gamma.sample(.5*df,2);var sample=x/Math.sqrt(y/df);return sample*scale+location}function score(df,location,scale,x){var score=ad.scalar.sub(ad.scalar.sub(ad.scalar.sub(ad.scalar.sub(ad.scalar.sub(ad.scalar.logGamma(ad.scalar.mul(.5,ad.scalar.add(df,1))),ad.scalar.logGamma(ad.scalar.mul(.5,df))),ad.scalar.log(scale)),ad.scalar.mul(.5,LOG_PI)),ad.scalar.mul(.5,ad.scalar.log(df))),ad.scalar.mul(ad.scalar.mul(.5,ad.scalar.add(df,1)),ad.scalar.log(ad.scalar.add(1,ad.scalar.div(ad.scalar.pow(ad.scalar.div(ad.scalar.sub(x,location),scale),2),df)))));return score}var StudentT=base.makeDistributionType({name:"StudentT",desc:"Distribution over reals.",params:[{name:"df",desc:"degrees of freedom",type:types.positiveReal},{name:"location",desc:"location",type:types.unboundedReal},{name:"scale",desc:"scale",type:types.positiveReal}],wikipedia:"Student's_t-distribution",mixins:[base.continuousSupport],sample:function(){return sample(ad.value(this.params.df),ad.value(this.params.location),ad.value(this.params.scale))},score:function(x){return score(this.params.df,this.params.location,this.params.scale,x)},support:function(){return{lower:-Infinity,upper:Infinity}}});module.exports={StudentT:StudentT,sample:sample}},{"../ad":888,"../math/numeric":959,"../types":986,"../util":987,"./base":892,"./gamma":903,"./gaussian":904}],922:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var base=require("./base");var types=require("../types");var util=require("../util");var Tensor=require("../tensor");var numeric=require("../math/numeric");var gaussian=require("./gaussian");var LOG_2PI=numeric.LOG_2PI;function sample(mu,sigma,dims){var x=new Tensor(dims);var n=x.length;while(n--){x.data[n]=gaussian.sample(mu,sigma)}return x}function score(mu,sigma,dims,x){var _x=ad.value(x);if(!util.isTensor(_x)||!_.isEqual(_x.dims,dims)){return-Infinity}var d=_x.length;var dLog2Pi=d*LOG_2PI;var _2dLogSigma=ad.scalar.mul(2*d,ad.scalar.log(sigma));var sigma2=ad.scalar.pow(sigma,2);var xSubMu=ad.tensor.sub(x,mu);var z=ad.scalar.div(ad.tensor.sumreduce(ad.tensor.mul(xSubMu,xSubMu)),sigma2);return ad.scalar.mul(-.5,ad.scalar.sum(dLog2Pi,_2dLogSigma,z))}var TensorGaussian=base.makeDistributionType({name:"TensorGaussian",desc:"Distribution over a tensor of independent Gaussian variables.",params:[{name:"mu",desc:"mean",type:types.unboundedReal},{name:"sigma",desc:"standard deviation",type:types.positiveReal},{name:"dims",desc:"dimension of tensor",type:types.array(types.positiveInt)}],mixins:[base.continuousSupport],sample:function(){var mu=ad.value(this.params.mu);var sigma=ad.value(this.params.sigma);var dims=this.params.dims;return sample(mu,sigma,dims)},score:function(x){return score(this.params.mu,this.params.sigma,this.params.dims,x)},base:function(){var dims=this.params.dims;return new TensorGaussian({mu:0,sigma:1,dims:dims})},transform:function(x){var mu=this.params.mu;var sigma=this.params.sigma;return ad.tensor.add(ad.tensor.mul(x,sigma),mu)}});module.exports={TensorGaussian:TensorGaussian,sample:sample}},{"../ad":888,"../math/numeric":959,"../tensor":972,"../types":986,"../util":987,"./base":892,"./gaussian":904,lodash:164}],923:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var base=require("./base");var types=require("../types");var util=require("../util");var Tensor=require("../tensor");var laplace=require("./laplace");var T=ad.tensor;function sample(location,scale,dims){var x=new Tensor(dims);var n=x.length;while(n--){x.data[n]=laplace.sample(location,scale)}return x}function score(location,scale,dims,x){var _x=ad.value(x);if(!util.isTensor(_x)||!_.isEqual(_x.dims,dims)){return ad.scalar.neg(Infinity)}var l=_x.length;var ln2b=ad.scalar.mul(l,ad.scalar.log(ad.scalar.mul(2,scale)));var xMuB=ad.scalar.div(T.sumreduce(T.abs(T.sub(x,location))),scale);return ad.scalar.mul(ad.scalar.neg(1),ad.scalar.add(ln2b,xMuB))}var TensorLaplace=base.makeDistributionType({name:"TensorLaplace",desc:"Distribution over a tensor of independent Laplace variables.",params:[{name:"location",desc:"",type:types.unboundedReal},{name:"scale",desc:"",type:types.positiveReal},{name:"dims",desc:"dimension of tensor",type:types.array(types.positiveInt)}],mixins:[base.continuousSupport],sample:function(){var location=ad.value(this.params.location);var scale=ad.value(this.params.scale);var dims=this.params.dims;return sample(location,scale,dims)},score:function(x){return score(this.params.location,this.params.scale,this.params.dims,x)},base:function(){var dims=this.params.dims;return new TensorLaplace({location:0,scale:1,dims:dims})},transform:function(x){var location=this.params.location;var scale=this.params.scale;return ad.tensor.add(ad.tensor.mul(x,scale),location)}});module.exports={TensorLaplace:TensorLaplace}},{"../ad":888,"../tensor":972,"../types":986,"../util":987,"./base":892,"./laplace":909,lodash:164}],924:[function(require,module,exports){"use strict";var ad=require("../ad");var base=require("./base");var types=require("../types");var util=require("../util");var Uniform=base.makeDistributionType({name:"Uniform",desc:"Continuous uniform distribution over ``[a, b]``",params:[{name:"a",desc:"lower bound",type:types.unboundedReal},{name:"b",desc:"upper bound (>a)",type:types.unboundedReal}],wikipedia:"Uniform_distribution_(continuous)",mixins:[base.continuousSupport],sample:function(){var u=util.random();return(1-u)*ad.value(this.params.a)+u*ad.value(this.params.b)},score:function(val){if(ad.scalar.lt(val,this.params.a)||ad.scalar.gt(val,this.params.b)){return ad.scalar.neg(Infinity)}return ad.scalar.neg(ad.scalar.log(ad.scalar.sub(this.params.b,this.params.a)))},support:function(){return{lower:this.params.a,upper:this.params.b}}});module.exports={Uniform:Uniform}},{"../ad":888,"../types":986,"../util":987,"./base":892}],925:[function(require,module,exports){"use strict";var _=require("lodash");var errors=require("./errors");var parseV8=require("./parsers").parseV8;function isChrome(){return window.chrome&&window.chrome.runtime}function extendErrorChrome(error,fileName){var stack=errors.recoverStack(error,parseV8);var entry=_.find(stack,{fileName:fileName});error.wpplError=entry}function debugHandler(fileName){return function(error){if(error instanceof Error&&isChrome()){extendErrorChrome(error,fileName)}throw error}}module.exports={debugHandler:debugHandler}},{"./errors":926,"./parsers":927,lodash:164}],926:[function(require,module,exports){"use strict";var assert=require("assert");var _=require("lodash");var SourceMap=require("source-map");var util=require("../util");function extendError(error,assets,currentAddress){if(error instanceof Error){error.sourceMap=assets.sourceMap;error.wpplCallStack=addressToWpplCallStack(currentAddress.value,assets.addressMap);error.wpplRuntimeError=true}}function addressToStack(address){if(address===undefined){return[]}var addUnderscore=function(s){return"_"+s};var split=address.split("_").slice(1).map(addUnderscore);split.reverse();return split}function addressToWpplCallStack(address,addressMap){var stack=addressToStack(address);return _.chain(stack).map(function(id){var loc=addressMap[id];return loc&&loc.start&&{fileName:loc.source,lineNumber:loc.start.line,columnNumber:loc.start.column,native:false,webppl:true,name:loc.name,id:id}}).filter().value()}function recoverStack(error,parseStack){return _.flow([parseStack,filterJsStackTrace,function(s){return sourceMapJsStackTrace(s,error.sourceMap)},function(s){return s.concat(error.wpplCallStack)}])(error)}function filterJsStackTrace(stackTrace){var ix=_.findIndex(stackTrace,_.matches({webppl:true}));return ix>=0?stackTrace.slice(0,ix+1):stackTrace}function filterGensym(name){return name===null||name.slice(0,7)==="_result"?null:name}function sourceMapJsStackTrace(stackTrace,sourceMap){var map=new SourceMap.SourceMapConsumer(sourceMap);return _.chain(stackTrace).map(function(entry){if(entry.webppl){var pos=map.originalPositionFor({line:entry.lineNumber,column:entry.columnNumber});if(positionPopulated(pos)){return{fileName:pos.source,lineNumber:pos.line,columnNumber:pos.column,native:entry.native,webppl:true,name:filterGensym(pos.name)}}else{return null}}else{return entry}}).filter().value()}function positionPopulated(pos){return pos.source!==null&&pos.line!==null&&pos.column!==null}module.exports={recoverStack:recoverStack,extendError:extendError}},{"../util":987,assert:3,lodash:164,"source-map":351}],927:[function(require,module,exports){"use strict";var assert=require("assert");var _=require("lodash");var stackTrace=require("stack-trace");function parseV8(error){assert.ok(error instanceof Error);var parsed=stackTrace.parse(error);return parsed.map(function(entry){var e=_.pick(entry,"fileName","lineNumber","columnNumber","native");e.webppl=entry.fileName==="<anonymous>";if(entry.columnNumber!==null){e.columnNumber=entry.columnNumber-1}e.name=null;return e})}module.exports={parseV8:parseV8}},{assert:3,lodash:164,"stack-trace":352}],928:[function(require,module,exports){"use strict";var _=require("lodash");var util=require("./util");var Tensor=require("./tensor");var ad=require("./ad");var dists=require("./dists");var params=require("./params/params");var numeric=require("./math/numeric");var T=ad.tensor;function notAllowed(fn){return function(){throw new Error(fn+" cannot be used within the guide.")}}var sampleNotAllowed=notAllowed("sample");var factorNotAllowed=notAllowed("factor");function guideCoroutine(env){return{sample:sampleNotAllowed,factor:factorNotAllowed,incrementalize:env.defaultCoroutine.incrementalize,oldCoroutine:env.coroutine,_guide:true}}function runInCoroutine(coroutine,env,k,f){var prevCoroutine=env.coroutine;env.coroutine=coroutine;return f(function(s,val){env.coroutine=prevCoroutine;return k(s,val)})}function runThunk(thunk,env,s,a,k){if(!_.isFunction(thunk)){throw new Error("The guide is expected to be a function.")}return runInCoroutine(guideCoroutine(env),env,k,function(k){return thunk(s,function(s2,val){return function(){return k(s2,val)}},a+"_guide")})}function runDistThunk(thunk,env,s,a,k){return runThunk(thunk,env,s,a,function(s2,dist){if(!dists.isDist(dist)){throw new Error("The guide did not return a distribution.")}return k(s2,dist)})}function runDistThunkCond(s,k,a,env,maybeThunk,alternate){return maybeThunk?runDistThunk(maybeThunk,env,s,a,k):alternate(s,k,a)}function getDist(maybeThunk,noAutoGuide,targetDist,env,s,a,k){return runDistThunkCond(s,k,a,env,maybeThunk,function(s,k,a){return k(s,noAutoGuide?null:independent(targetDist,a,env))})}function independent(targetDist,sampleAddress,env){util.warn("Using the default guide distribution for one or more choices.",true);var relativeAddress=util.relativizeAddress(params.baseAddress(env),sampleAddress);var baseName=relativeAddress+"$mf$"+targetDist.meta.name+"$";var distSpec=spec(targetDist);var guideParams=_.mapValues(distSpec.params,function(spec,name){return _.has(spec,"param")?makeParam(spec.param,name,baseName,env):spec.const});return new distSpec.type(guideParams)}function makeParam(paramSpec,paramName,baseName,env){var dims=paramSpec.dims;var squish=paramSpec.squish;var name=baseName+paramName;var param=registerParam(env,name,dims);if(squish){param=squish(param)}if(dims.length===1&&dims[0]===1){param=ad.tensor.get(param,0)}return param}function registerParam(env,name,dims){if(!params.exists(name)){params.create(name,new Tensor(dims))}return params.fetch(name,env)}function spec(targetDist){if(targetDist instanceof dists.Dirichlet){return dirichletSpec(targetDist)}else if(targetDist instanceof dists.TensorGaussian){return tensorGaussianSpec(targetDist)}else if(targetDist instanceof dists.Uniform){return uniformSpec(targetDist)}else if(targetDist instanceof dists.Gamma){return gammaSpec(targetDist)}else if(targetDist instanceof dists.Beta){return betaSpec(targetDist)}else if(targetDist instanceof dists.Discrete){return discreteSpec(ad.value(targetDist.params.ps).length)}else if(targetDist instanceof dists.RandomInteger){return discreteSpec(targetDist.params.n)}else if(targetDist instanceof dists.Binomial){return discreteSpec(targetDist.params.n+1)}else if(targetDist instanceof dists.StudentT){return studentTSpec(targetDist)}else if(targetDist instanceof dists.MultivariateGaussian||targetDist instanceof dists.Mixture||targetDist instanceof dists.Marginal||targetDist instanceof dists.SampleBasedMarginal){throwAutoGuideError(targetDist)}else{return defaultSpec(targetDist)}}function throwAutoGuideError(targetDist){var msg="Cannot automatically generate a guide for a "+targetDist.meta.name+" distribution.";throw new Error(msg)}function defaultSpec(targetDist){var params=_.map(targetDist.meta.params,function(paramMeta){var name=paramMeta.name;var targetParam=ad.value(targetDist.params[name]);return[name,paramSpec(paramMeta.type,targetParam)]});return{type:targetDist.constructor,params:_.fromPairs(params)}}function paramSpec(type,targetParam){switch(type.name){case"real":return{param:{dims:[1],squish:squishToInterval(type.bounds)}};case"vector":case"vectorOrRealArray":return{param:{dims:[targetParam.length,1],squish:squishToInterval(type.bounds)}};case"tensor":return{param:{dims:targetParam.dims,squish:squishToInterval(type.bounds)}};case"int":return{const:targetParam};case"array":if(type.elementType.name==="any"||type.elementType.name==="int"){return{const:targetParam}}else{throw paramSpecError(type)}default:throw paramSpecError(type)}}function paramSpecError(type){var msg="Can't generate specification for parameter of type \""+type.name+'".';return new Error(msg)}function dirichletSpec(targetDist){var d=ad.value(targetDist.params.alpha).length-1;return{type:dists.LogisticNormal,params:{mu:{param:{dims:[d,1]}},sigma:{param:{dims:[d,1],squish:squishTo(0,Infinity)}}}}}function tensorGaussianSpec(targetDist){var dims=targetDist.params.dims;return{type:dists.DiagCovGaussian,params:{mu:{param:{dims:dims}},sigma:{param:{dims:dims,squish:squishTo(0,Infinity)}}}}}function uniformSpec(targetDist){return{type:dists.LogitNormal,params:{a:{const:targetDist.params.a},b:{const:targetDist.params.b},mu:{param:{dims:[1]}},sigma:{param:{dims:[1],squish:squishTo(0,Infinity)}}}}}function betaSpec(targetDist){return{type:dists.LogitNormal,params:{a:{const:0},b:{const:1},mu:{param:{dims:[1]}},sigma:{param:{dims:[1],squish:squishTo(0,Infinity)}}}}}function gammaSpec(targetDist){return{type:dists.IspNormal,params:{mu:{param:{dims:[1]}},sigma:{param:{dims:[1],squish:squishTo(0,Infinity)}}}}}function discreteSpec(dim){return{type:dists.Discrete,params:{ps:{param:{dims:[dim-1,1],squish:numeric.squishToProbSimplex}}}}}function studentTSpec(targetDist){return{type:dists.Gaussian,params:{mu:{param:{dims:[1]}},sigma:{param:{dims:[1],squish:squishTo(0,Infinity)}}}}}function softplus(x){return T.log(T.add(T.exp(x),1))}function squishTo(a,b){if(a===-Infinity&&b===Infinity){throw new Error("Squishing not required here.")}if(a===-Infinity){return function(x){var y=softplus(x);return T.add(T.neg(y),b)}}else if(b===Infinity){return function(x){var y=softplus(x);return T.add(y,a)}}else{return function(x){var y=T.sigmoid(x);return T.add(T.mul(y,b-a),a)}}}function squishToInterval(interval){return interval&&interval.isBounded?squishTo(interval.low,interval.high):null}module.exports={independent:independent,runThunk:runThunk,getDist:getDist}},{"./ad":888,"./dists":906,"./math/numeric":959,"./params/params":964,"./tensor":972,"./util":987,lodash:164}],929:[function(require,module,exports){var util=require("./util");var FUNCTION="function",STRING="string",UNDEFINED=undefined;function toStr(obj){return typeof obj==STRING?obj:""+obj}function hashObject(obj){var hashCode;if(typeof obj==STRING){return obj}else if(typeof obj.hashCode==FUNCTION){hashCode=obj.hashCode();return typeof hashCode==STRING?hashCode:hashObject(hashCode)}else{return toStr(obj)}}function merge(o1,o2){for(var i in o2){if(o2.hasOwnProperty(i)){o1[i]=o2[i]}}}function equals_fixedValueHasEquals(fixedValue,variableValue){return fixedValue.equals(variableValue)}function equals_fixedValueNoEquals(fixedValue,variableValue){return typeof variableValue.equals==FUNCTION?variableValue.equals(fixedValue):fixedValue===variableValue}function createKeyValCheck(kvStr){return function(kv){if(kv===null){throw new Error("null is not a valid "+kvStr)}else if(kv===UNDEFINED){throw new Error(kvStr+" must not be undefined")}}}var checkKey=createKeyValCheck("key"),checkValue=createKeyValCheck("value");function Bucket(hash,firstKey,firstValue,equalityFunction){this[0]=hash;this.entries=[];this.addEntry(firstKey,firstValue);if(equalityFunction!==null){this.getEqualityFunction=function(){return equalityFunction}}}var EXISTENCE=0,ENTRY=1,ENTRY_INDEX_AND_VALUE=2;function createBucketSearcher(mode){return function(key){var i=this.entries.length,entry,equals=this.getEqualityFunction(key);while(i--){entry=this.entries[i];if(equals(key,entry[0])){switch(mode){case EXISTENCE:return true;case ENTRY:return entry;case ENTRY_INDEX_AND_VALUE:return[i,entry[1]]}}}return false}}function createBucketLister(entryProperty){return function(aggregatedArr){var startIndex=aggregatedArr.length;for(var i=0,entries=this.entries,len=entries.length;i<len;++i){aggregatedArr[startIndex+i]=entries[i][entryProperty]}}}Bucket.prototype={getEqualityFunction:function(searchValue){return typeof searchValue.equals==FUNCTION?equals_fixedValueHasEquals:equals_fixedValueNoEquals},getEntryForKey:createBucketSearcher(ENTRY),getEntryAndIndexForKey:createBucketSearcher(ENTRY_INDEX_AND_VALUE),removeEntryForKey:function(key){var result=this.getEntryAndIndexForKey(key);if(result){this.entries.splice(result[0],1);return result[1]}return null},addEntry:function(key,value){this.entries.push([key,value])},keys:createBucketLister(0),values:createBucketLister(1),getEntries:function(destEntries){var startIndex=destEntries.length;for(var i=0,entries=this.entries,len=entries.length;i<len;++i){destEntries[startIndex+i]=entries[i].slice(0)}},containsKey:createBucketSearcher(EXISTENCE),containsValue:function(value){var entries=this.entries,i=entries.length;while(i--){if(value===entries[i][1]){return true}}return false}};function searchBuckets(buckets,hash){var i=buckets.length,bucket;while(i--){bucket=buckets[i];if(hash===bucket[0]){return i}}return null}function getBucketForHash(bucketsByHash,hash){var bucket=bucketsByHash[hash];return bucket&&bucket instanceof Bucket?bucket:null}function Hashtable(){var buckets=[];var bucketsByHash={};var properties={replaceDuplicateKey:true,hashCode:hashObject,equals:null};var size=0;var biggestBucket=null;var arg0=arguments[0],arg1=arguments[1];if(arg1!==UNDEFINED){properties.hashCode=arg0;properties.equals=arg1}else if(arg0!==UNDEFINED){merge(properties,arg0)}var hashCode=properties.hashCode,equals=properties.equals;this.properties=properties;this.put=function(key,value){checkKey(key);checkValue(value);var hash=hashCode(key),bucket,bucketEntry,oldValue=null;bucket=getBucketForHash(bucketsByHash,hash);if(bucket){bucketEntry=bucket.getEntryForKey(key);if(bucketEntry){if(properties.replaceDuplicateKey){bucketEntry[0]=key}oldValue=bucketEntry[1];bucketEntry[1]=value}else{bucket.addEntry(key,value);size++;if(biggestBucket===null||bucket.entries.length>biggestBucket.entries.length)biggestBucket=bucket}}else{bucket=new Bucket(hash,key,value,equals);buckets.push(bucket);bucketsByHash[hash]=bucket;size++;if(biggestBucket===null||bucket.entries.length>biggestBucket.entries.length)biggestBucket=bucket}return oldValue};this.get=function(key){checkKey(key);var hash=hashCode(key);var bucket=getBucketForHash(bucketsByHash,hash);if(bucket){var bucketEntry=bucket.getEntryForKey(key);if(bucketEntry){return bucketEntry[1]}}return null};this.containsKey=function(key){checkKey(key);var bucketKey=hashCode(key);var bucket=getBucketForHash(bucketsByHash,bucketKey);return bucket?bucket.containsKey(key):false};this.containsValue=function(value){checkValue(value);var i=buckets.length;while(i--){if(buckets[i].containsValue(value)){return true}}return false};this.clear=function(){buckets.length=0;bucketsByHash={};size=0;biggestBucket=null};this.isEmpty=function(){return!buckets.length};var createBucketAggregator=function(bucketFuncName){return function(){var aggregated=[],i=buckets.length;while(i--){buckets[i][bucketFuncName](aggregated)}return aggregated}};this.keys=createBucketAggregator("keys");this.values=createBucketAggregator("values");this.entries=createBucketAggregator("getEntries");this.remove=function(key){checkKey(key);var hash=hashCode(key),bucketIndex,oldValue=null;var bucket=getBucketForHash(bucketsByHash,hash);if(bucket){oldValue=bucket.removeEntryForKey(key);if(oldValue!==null){if(bucket.entries.length==0){bucketIndex=searchBuckets(buckets,hash);buckets.splice(bucketIndex,1);delete bucketsByHash[hash]}size--;if(biggestBucket===bucket){if(buckets.length===0)biggestBucket=null;else{biggestBucket=buckets[0];var i=buckets.length;while(i--){if(buckets[i].entries.length>biggestBucket.entries.length)biggestBucket=buckets[i]}}}}}return oldValue};this.equals=function(hashtable){var keys,key,val,count=size;if(count==hashtable.size){keys=this.keys();while(count--){key=keys[count];val=hashtable.get(key);if(val===null||val!==this.get(key)){return false}}return true}return false};this.getRandom=function(){var L=biggestBucket.entries.length;while(true){var bi=Math.floor(util.random()*buckets.length);var bucket=buckets[bi];var p=Math.floor(util.random()*L);if(p<bucket.entries.length)return bucket.entries[p][1]}}}Hashtable.prototype={each:function(callback){var entries=this.entries(),i=entries.length,entry;while(i--){entry=entries[i];callback(entry[0],entry[1])}},putAll:function(hashtable,conflictCallback){var entries=hashtable.entries();var entry,key,value,thisValue,i=entries.length;var hasConflictCallback=typeof conflictCallback==FUNCTION;while(i--){entry=entries[i];key=entry[0];value=entry[1];if(hasConflictCallback&&(thisValue=this.get(key))){value=conflictCallback(key,thisValue,value)}this.put(key,value)}},clone:function(){var clone=new Hashtable(this.properties);clone.putAll(this);return clone}};Hashtable.prototype.toQueryString=function(){var entries=this.entries(),i=entries.length,entry;var parts=[];while(i--){entry=entries[i];parts[i]=encodeURIComponent(toStr(entry[0]))+"="+encodeURIComponent(toStr(entry[1]))}return parts.join("&")};module.exports={Hashtable:Hashtable}},{"./util":987}],930:[function(require,module,exports){(function(process,global){(function(){"use strict";var assert=require("assert");var _=require("lodash");var nn=require("adnn/nn");try{var util=require("./util");var dists=require("./dists");var enumerate=require("./inference/enumerate");var mcmc=require("./inference/mcmc");var asyncpf=require("./inference/asyncpf");var pmcmc=require("./inference/pmcmc");var smc=require("./inference/smc");var rejection=require("./inference/rejection");var incrementalmh=require("./inference/incrementalmh");var ais=require("./inference/ais");var optimize=require("./inference/optimize");var forwardSample=require("./inference/forwardSample");var checkSampleAfterFactor=require("./inference/checkSampleAfterFactor");var dreamSample=require("./inference/dream/sample");var headerUtils=require("./headerUtils");var params=require("./params/header");var Query=require("./query").Query;var ad=require("./ad");var Tensor=require("./tensor");var numeric=require("./math/numeric")}catch(e){if(e.code==="MODULE_NOT_FOUND"){console.error(e.message);console.error("Run ./scripts/adify and try again.");process.exit()}else{throw e}}module.exports=function(env){env.defaultCoroutine={sample:function(s,k,a,dist){return k(s,dist.sample())},factor:function(){throw new Error("factor allowed only inside inference.")},exit:function(s,r){return r},incrementalize:function(s,k,a,fn,args){var args=[s,k,a].concat(args);return fn.apply(global,args)},isParamBase:true,a:""};env.reset=function(){env.coroutine=env.defaultCoroutine};env.reset();env.sample=function(s,k,a,dist,options){if(!dists.isDist(dist)){throw new Error('sample() expected a distribution but received "'+JSON.stringify(dist)+'".')}for(var name in options){if(name!=="guide"&&name!=="driftKernel"&&name!=="noAutoGuide"&&name!=="reparam"){throw new Error('Unknown option "'+name+'" passed to sample.')}}return env.coroutine.sample(s,k,a,dist,options)};env.factor=function(s,k,a,score){var _score=ad.value(score);if(typeof _score!=="number"||isNaN(_score)){throw new Error("The score argument is not a number.")}return env.coroutine.factor(s,k,a,score)};env.observe=function(s,k,a,dist,val,options){if(typeof env.coroutine.observe==="function"){return env.coroutine.observe(s,k,a,dist,val,options)}else{if(val!==undefined){var factorK=function(s){return k(s,val)};return env.factor(s,factorK,a,dist.score(val))}else{return env.sample(s,k,a,dist,options)}}};env.sampleWithFactor=function(s,k,a,dist,scoreFn){if(typeof env.coroutine.sampleWithFactor==="function"){return env.coroutine.sampleWithFactor(s,k,a,dist,scoreFn)}else{var sampleK=function(s,v){var scoreK=function(s,sc){var factorK=function(s){return k(s,v)};return env.factor(s,factorK,a+"swf2",sc)};return scoreFn(s,scoreK,a+"swf1",v)};return env.sample(s,sampleK,a,dist)}};env.exit=function(s,retval){return env.coroutine.exit(s,retval)};env.incrementalize=function(s,k,a,fn,args){args=args||[];return env.coroutine.incrementalize(s,k,a,fn,args)};env.query=new Query;var exports={_top:util.runningInBrowser()?window:global};function addExports(obj){_.extend(exports,obj)}addExports({factor:env.factor,sample:env.sample,sampleWithFactor:env.sampleWithFactor,observe:env.observe,incrementalize:env.incrementalize,query:env.query});addExports({_:_,util:util,assert:assert,ad:ad,nn:nn,T:ad.tensor,dists:dists,numeric:numeric});var headerModules=[enumerate,asyncpf,mcmc,incrementalmh,pmcmc,smc,rejection,optimize,ais,forwardSample,dreamSample,checkSampleAfterFactor,headerUtils,params];headerModules.forEach(function(mod){addExports(mod(env))});return exports}}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./ad":888,"./dists":906,"./headerUtils":931,"./inference/ais":932,"./inference/asyncpf":933,"./inference/checkSampleAfterFactor":935,"./inference/dream/sample":938,"./inference/enumerate":942,"./inference/forwardSample":944,"./inference/incrementalmh":946,"./inference/mcmc":949,"./inference/optimize":951,"./inference/pmcmc":952,"./inference/rejection":953,"./inference/smc":954,"./math/numeric":959,"./params/header":963,"./query":970,"./tensor":972,"./util":987,_process:25,"adnn/nn":36,assert:3,lodash:164}],931:[function(require,module,exports){(function(global){(function(){"use strict";var _=require("lodash");var serialize=require("./util").serialize;var Tensor=require("./tensor");var LRU=require("lru-cache");var ad=require("./ad");var assert=require("assert");var runThunk=require("./guide").runThunk;module.exports=function(env){function display(s,k,a,x){return k(s,console.log(ad.valueRec(x)))}var dp={};dp.cache=function(f,maxSize){var c=LRU(maxSize);var cf=function(s,k,a){var args=Array.prototype.slice.call(arguments,3);if(_.some(args,ad.isLifted)){throw new Error("Cannot cache functions of scalar/tensor arguments "+"when performing automatic differentiation.")}var stringedArgs=serialize(args);if(c.has(stringedArgs)){return k(s,c.get(stringedArgs))}else{var newk=function(s,r){if(c.has(stringedArgs)){console.log("Already in cache:",stringedArgs);if(serialize(c.get(stringedArgs))!==serialize(r)){console.log("OLD AND NEW CACHE VALUE DIFFER!");console.log("Old value:",c.get(stringedArgs));console.log("New value:",r)}}c.set(stringedArgs,r);if(!maxSize&&c.length===1e4){console.log(c.length+" function calls have been cached.");console.log("The size of the cache can be limited by calling cache(f, maxSize).")}return k(s,r)};return f.apply(this,[s,newk,a].concat(args))}};cf.cache=c;return cf};function cache(s,k,a,f,maxSize){return k(s,dp.cache(f,maxSize))}function apply(s,k,a,wpplFn,args){return wpplFn.apply(global,[s,k,a].concat(args))}function notAllowed(fn,name){return function(){throw new Error(fn+" is not allowed in "+name+".")}}function makeDeterministicCoroutine(name){return{sample:notAllowed("sample",name),factor:notAllowed("factor",name),incrementalize:env.defaultCoroutine.incrementalize,oldCoroutine:env.coroutine}}function applyd(s,k,a,wpplFn,args,name){var coroutine=env.coroutine;env.coroutine=makeDeterministicCoroutine(name);return apply(s,function(s,val){env.coroutine=coroutine;return k(s,val)},a,wpplFn,args)}var __uniqueid=0;var _Fn={tag:function(fn,lexid,freevarvals){fn.__lexid=lexid;fn.__uniqueid=__uniqueid++;fn.__freeVarVals=freevarvals;return fn}};var _addr={save:function(obj,address){obj.value=address}};var zeros=function(s,k,a,dims){return k(s,new Tensor(dims))};var ones=function(s,k,a,dims){return k(s,new Tensor(dims).fill(1))};function mapData(s,k,a,opts,obsFn){opts=opts||{};var data=opts.data;if(!_.isArray(data)){throw new Error("mapData: No data given.")}var ret=env.coroutine.mapDataFetch?env.coroutine.mapDataFetch(data,opts,a):{data:data,ix:null};var ix=ret.ix;var finalData=ret.data;var address=ret.address||a;assert.ok(ix===null||_.isArray(ix)&&ix.length===finalData.length,"Unexpected value returned by mapDataFetch.");var doReturn=finalData===data;return cpsMapData(s,function(s,v){if(env.coroutine.mapDataFinal){env.coroutine.mapDataFinal(a)}return k(s,doReturn?v:undefined)},address,finalData,ix,obsFn)}function cpsMapData(s,k,a,data,indices,f,acc,i){i=i===undefined?0:i;acc=acc===undefined?[]:acc;var length=indices===null?data.length:indices.length;if(i===length){return k(s,acc)}else{var ix=indices===null?i:indices[i];if(env.coroutine.mapDataEnter){env.coroutine.mapDataEnter()}return f(s,function(s,v){if(env.coroutine.mapDataLeave){env.coroutine.mapDataLeave()}return function(){return cpsMapData(s,k,a,data,indices,f,acc.concat([v]),i+1)}},a.concat("_$$"+ix),data[i],ix)}}function guide(s,k,a,thunk){if(env.coroutine.guideRequired){return runThunk(thunk,env,s,a,function(s2,val){return k(s2)})}else{return k(s)}}return{display:display,cache:cache,dp:dp,apply:apply,applyd:applyd,_Fn:_Fn,_addr:_addr,zeros:zeros,ones:ones,mapData:mapData,guide:guide}}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./ad":888,"./guide":928,"./tensor":972,"./util":987,assert:3,lodash:164,"lru-cache":165}],932:[function(require,module,exports){"use strict";var _=require("lodash");var assert=require("assert");var util=require("../util");var numeric=require("../math/numeric");module.exports=function(env){var Initialize=require("./initialize")(env);var kernels=require("./kernels")(env);function AIS(s,k,a,wpplFn,options){options=util.mergeDefaults(options,{steps:20,samples:1});var weights=[];var singleSample=function(k){var initialize,run,finish;initialize=function(){return Initialize(run,wpplFn,s,env.exit,a,{})};run=function(initialTrace){var curStep=0;var increment=1/options.steps;var weight=0;var MHKernel=kernels.parseOptions("MH");var mhStepKernel=function(k,trace){weight+=increment*trace.scoreAllFactors();curStep+=1;return MHKernel(k,trace,{factorCoeff:curStep*increment,allowHardFactors:false})};var mhChainKernel=kernels.repeat(options.steps,mhStepKernel);return mhChainKernel(function(trace){return k(weight)},initialTrace)};return initialize()};return util.cpsLoop(options.samples,function(i,next){return singleSample(function(weight){weights.push(weight);return next()})},function(){var avgWeight=numeric._sum(weights)/options.samples;return k(s,avgWeight)})}return{AIS:AIS}}},{"../math/numeric":959,"../util":987,"./initialize":947,"./kernels":948,assert:3,lodash:164}],933:[function(require,module,exports){"use strict";var _=require("lodash");var util=require("../util");var numeric=require("../math/numeric");var CountAggregator=require("../aggregation/CountAggregator");module.exports=function(env){function copyOneParticle(particle){return{continuation:particle.continuation,weight:particle.weight,completed:particle.completed,factorIndex:particle.factorIndex,value:particle.value,numChildrenToSpawn:1,multiplicity:particle.multiplicity,store:_.clone(particle.store)}}function initParticle(s,cont){return{continuation:cont,weight:0,completed:false,factorIndex:undefined,value:undefined,numChildrenToSpawn:0,multiplicity:1,store:_.clone(s)}}function AsyncPF(s,k,a,wpplFn,options){this.numParticles=0;this.bufferSize=options.bufferSize==undefined?options.particles:options.bufferSize;this.initNumParticles=Math.floor(this.bufferSize*(1/2));this.exitK=function(s){return wpplFn(s,env.exit,a)};this.store=s;this.buffer=[];for(var i=0;i<this.initNumParticles;i++){this.buffer.push(initParticle(this.store,this.exitK))}this.obsWeights={};this.exitedParticles=0;this.hist=new CountAggregator;this.k=k;this.oldCoroutine=env.coroutine;env.coroutine=this;this.oldStore=_.clone(s)}AsyncPF.prototype.run=function(numP){this.numParticles=numP==undefined?this.numParticles:this.numParticles+numP;var p,launchP;var i=Math.floor((this.buffer.length+1)*util.random());if(i==this.buffer.length){p=initParticle(this.store,this.exitK)}else{launchP=this.buffer[i];if(launchP.numChildrenToSpawn>1){p=copyOneParticle(launchP);launchP.numChildrenToSpawn-=1}else{p=launchP;this.buffer=util.deleteIndex(this.buffer,i)}}this.activeParticle=p;return p.continuation(p.store)};AsyncPF.prototype.sample=function(s,cc,a,dist){return cc(s,dist.sample())};AsyncPF.prototype.factor=function(s,cc,a,score){this.activeParticle.weight+=score;this.activeParticle.continuation=cc;this.activeParticle.store=s;var fi=this.activeParticle.factorIndex;var newFI=fi==undefined?0:fi+1;this.activeParticle.factorIndex=newFI;this.branching(newFI);return this.run()};AsyncPF.prototype.branching=function(factorIndex){var lk=this.obsWeights[factorIndex];if(lk==undefined){var det={wbar:this.activeParticle.weight,mnk:1};this.obsWeights[factorIndex]=[det];this.activeParticle.numChildrenToSpawn=1}else{var currMultiplicity=this.activeParticle.multiplicity;var currWeight=this.activeParticle.weight;var denom=lk.length+currMultiplicity;var prevWBar=lk[lk.length-1].wbar;var wbar=-Math.log(denom)+numeric._logsumexp([Math.log(lk.length)+prevWBar,Math.log(currMultiplicity)+currWeight]);if(wbar>0)throw new Error("Positive weight!!");var logRatio=currWeight-wbar;var numChildrenAndWeight=[];if(logRatio<0){numChildrenAndWeight=Math.log(util.random())<logRatio?[1,wbar]:[0,-Infinity]}else{var totalChildren=0;for(var v=0;v<lk.length;v++)totalChildren+=lk[v].mnk;var minK=Math.min(this.numParticles,lk.length);var rnk=isNaN(logRatio)?1:Math.exp(logRatio);var clampedRnk=totalChildren<=minK?Math.ceil(rnk):Math.floor(rnk);numChildrenAndWeight=[clampedRnk,currWeight-Math.log(clampedRnk)]}var det2={wbar:wbar,mnk:numChildrenAndWeight[0]};this.obsWeights[factorIndex]=lk.concat([det2]);if(numChildrenAndWeight[0]>0){if(this.buffer.length<this.bufferSize){this.activeParticle.numChildrenToSpawn=numChildrenAndWeight[0];this.activeParticle.weight=numChildrenAndWeight[1]}else{this.activeParticle.multiplicity*=numChildrenAndWeight[0];this.activeParticle.numChildrenToSpawn=1;this.activeParticle.weight=numChildrenAndWeight[1]}this.buffer.push(this.activeParticle)}}};AsyncPF.prototype.exit=function(s,retval){this.activeParticle.value=retval;this.activeParticle.completed=true;this.activeParticle.weight+=Math.log(this.activeParticle.multiplicity);this.exitedParticles+=1;this.hist.add(retval);if(this.exitedParticles<this.numParticles){return this.run()}else{var dist=this.hist.toDist();var lastFactorIndex=this.activeParticle.factorIndex;var olk=this.obsWeights[lastFactorIndex];var Kn=_.reduce(olk,function(a,b){return a+b.mnk},0);dist.normalizationConstant=Math.log(Kn)-Math.log(this.numParticles)+olk[olk.length-1].wbar;var currCoroutine=this;dist.continue=function(s,k,a,numP){currCoroutine.k=k;currCoroutine.oldCoroutine=env.coroutine;env.coroutine=currCoroutine;currCoroutine.oldStore=_.clone(s);return currCoroutine.run(numP)};env.coroutine=this.oldCoroutine;return this.k(this.oldStore,dist)}};AsyncPF.prototype.incrementalize=env.defaultCoroutine.incrementalize;function asyncPF(s,cc,a,wpplFn,options){options=options||{};return new AsyncPF(s,cc,a,wpplFn,options).run(options.particles)}return{AsyncPF:asyncPF}}},{"../aggregation/CountAggregator":889,"../math/numeric":959,"../util":987,lodash:164}],934:[function(require,module,exports){"use strict";var _=require("lodash");var prepareOne=function(name,callbacks){var fns=[];callbacks.forEach(function(obj){if(_.has(obj,name)){fns.push(obj[name])}});if(_.isEmpty(fns)){return _.noop}else{return function(arg){fns.forEach(function(f){f(arg)})}}};var names=["setup","initialize","iteration","sample","finish"];var prepare=function(callbacks){return _.fromPairs(names.map(function(name){return[name,prepareOne(name,callbacks)]}))};module.exports={prepare:prepare}},{lodash:164}],935:[function(require,module,exports){"use strict";var _=require("lodash");var util=require("../util");var ad=require("../ad");module.exports=function(env){function CheckSampleAfterFactor(s,k,a,wpplFn,options){this.opts={samples:1};this.wpplFn=wpplFn;this.s=s;this.k=k;this.a=a;this.hasFactor=false;this.hasSampleAfterFactor=false;this.oldCoroutine=env.coroutine;env.coroutine=this}CheckSampleAfterFactor.prototype={run:function(){return util.cpsLoop(this.opts.samples,function(i,next){return this.wpplFn(_.clone(this.s),function(s,val){return next()},this.a)}.bind(this),function(){env.coroutine=this.oldCoroutine;return this.k(this.s,this.hasSampleAfterFactor)}.bind(this))},sample:function(s,k,a,dist,options){if(this.hasFactor){this.hasSampleAfterFactor=true}return k(s,dist.sample())},factor:function(s,k,a,score){if(!this.hasFactor){this.hasFactor=true}return k(s)},incrementalize:env.defaultCoroutine.incrementalize,constructor:CheckSampleAfterFactor};return{CheckSampleAfterFactor:function(){var coroutine=Object.create(CheckSampleAfterFactor.prototype);CheckSampleAfterFactor.apply(coroutine,arguments);return coroutine.run()}}}},{"../ad":888,"../util":987,lodash:164}],936:[function(require,module,exports){"use strict";var util=require("../../util");var paramStruct=require("../../params/struct");module.exports=function(env){var dreamSample=require("./sample")(env).dreamSample;var dreamGradients=require("./gradients")(env);return function(options){var opts=util.mergeDefaults(options,{samples:1},"dream");return function(wpplFn,s,a,state,step,cont){var objVal=0;var grad={};return util.cpsLoop(opts.samples,function(i,next){return dreamSample(s,function(s,record){return dreamGradients(wpplFn,record,s,a,function(g,objVal_i){paramStruct.addEq(grad,g);objVal+=objVal_i;return next()})},a,wpplFn)},function(){paramStruct.divEq(grad,opts.samples);objVal/=opts.samples;return cont(grad,objVal)})}}}},{"../../params/struct":969,"../../util":987,"./gradients":937,"./sample":938}],937:[function(require,module,exports){"use strict";var ad=require("../../ad");var assert=require("assert");var _=require("lodash");var guide=require("../../guide");module.exports=function(env){function dreamGradients(wpplFn,record,s,a,cont){this.wpplFn=wpplFn;this.record=record;this.s=s;this.a=a;this.cont=cont;this.guideRequired=true;this.isParamBase=true;this.insideMapData=false;this.oldCoroutine=env.coroutine;env.coroutine=this}dreamGradients.prototype={run:function(){return this.estimateGradient(function(grad,objVal){env.coroutine=this.oldCoroutine;return this.cont(grad,objVal)}.bind(this))},estimateGradient:function(cont){this.paramsSeen={};this.logq=0;return this.wpplFn(_.clone(this.s),function(s,val){var objective=ad.scalar.neg(this.logq);if(ad.isLifted(objective)){objective.backprop()}var grads=_.mapValues(this.paramsSeen,ad.derivative);return cont(grads,ad.scalar.neg(ad.value(this.logq)))}.bind(this),this.a)},sample:function(s,k,a,dist,options){options=options||{};var choice=this.record.trace.findChoice(a);assert.ok(ad.scalar.pneq(choice,undefined),"dream: No entry for this choice in the trace.");var val=choice.val;if(this.insideMapData){return guide.getDist(options.guide,options.noAutoGuide,dist,env,s,a,function(s,guideDist){if(!guideDist){throw new Error("dream: No guide distribution specified.")}this.logq=ad.scalar.add(this.logq,guideDist.score(val));return k(s,val)}.bind(this))}else{return k(s,val)}},factor:function(s,k,a,score){return k(s)},mapDataFetch:function(data,opts,a){if(this.insideMapData){throw new Error("dream: nested mapData is not supported by this estimator.")}this.insideMapData=true;return{data:this.record.data,ix:null,address:ad.scalar.add(a,"_dream")}},mapDataFinal:function(){this.insideMapData=false},incrementalize:env.defaultCoroutine.incrementalize,constructor:dreamGradients};return function(){var coroutine=Object.create(dreamGradients.prototype);dreamGradients.apply(coroutine,arguments);return coroutine.run()}}},{"../../ad":888,"../../guide":928,assert:3,lodash:164}],938:[function(require,module,exports){"use strict";var _=require("lodash");var util=require("../../util");var Trace=require("../../trace");var guide=require("../../guide");module.exports=function(env){function dreamSample(s,k,a,wpplFn){this.wpplFn=wpplFn;this.s=s;this.k=k;this.a=a;var trace=new Trace(this.wpplFn,s,env.exit,a);this.record={trace:trace,data:[]};this.guideRequired=true;this.isParamBase=true;this.insideMapData=false;this.oldCoroutine=env.coroutine;env.coroutine=this}dreamSample.prototype={run:function(){return this.wpplFn(_.clone(this.s),function(s,val){env.coroutine=this.oldCoroutine;return this.k(this.s,this.record)}.bind(this),this.a)},sample:function(s,k,a,dist,options){var sampleFn=this.insideMapData?this.sampleLocal:this.sampleGlobal;return sampleFn.call(this,s,a,dist,options,function(s,val){this.record.trace.addChoice(dist,val,a,s,k,options);return k(s,val)}.bind(this))},sampleLocal:function(s,a,targetDist,options,k){return k(s,targetDist.sample())},sampleGlobal:function(s,a,dist,options,k){options=options||{};return guide.getDist(options.guide,options.noAutoGuide,dist,env,s,a,function(s,guideDist){if(!guideDist){throw new Error("dream: No guide distribution specified.")}return k(s,guideDist.sample())})},factor:function(s,k,a){throw new Error("dream: factor not supported, use observe instead.")},observe:function(s,k,a,dist,options){if(!this.insideMapData){throw new Error("dream: observe can only be used within mapData with this estimator.")}var val=dist.sample();this.observations.push(val);return k(s,val)},mapDataEnter:function(){this.observations=[]},mapDataLeave:function(){if(_.isEmpty(this.observations)){throw new Error("dream: expected at least one observation to be made.")}var datum=this.observations.length===1?this.observations[0]:this.observations;this.record.data.push(datum)},mapDataFetch:function(data,opts,a){if(this.insideMapData){throw new Error("dream: nested mapData is not supported by this estimator.")}this.insideMapData=true;this.guideRequired=false;var batchSize=_.has(opts,"dreamBatchSize")?opts.dreamBatchSize:1;if(!(util.isInteger(batchSize)&&batchSize>=0)){throw new Error("dream: dreamBatchSize should be a non negative integer.")}if(_.isEmpty(data)){throw new Error("dream: data should be non empty.")}var ix=_.times(batchSize,function(){return Math.floor(util.random()*data.length)});var batch=_.at(data,ix);return{data:batch,ix:null,address:a+"_dream"}},mapDataFinal:function(){this.insideMapData=false;this.guideRequired=true},incrementalize:env.defaultCoroutine.incrementalize,constructor:dreamSample};return{dreamSample:function(){var coroutine=Object.create(dreamSample.prototype);dreamSample.apply(coroutine,arguments);return coroutine.run()}}}},{"../../guide":928,"../../trace":973,"../../util":987,lodash:164}],939:[function(require,module,exports){"use strict";var util=require("../util");module.exports=function(env){var applyd=require("../headerUtils")(env).applyd;function getProposalDist(s,a,dist,options,prevVal,k){if(options&&options.driftKernel){return applyd(s,k,a,options.driftKernel,[prevVal],"drift kernel")}else{return k(s,dist)}}function proposalWarning(priorDist){util.warn("Proposal from drift kernel has zero probability under "+priorDist.meta.name+" prior.")}return{getProposalDist:getProposalDist,proposalWarning:proposalWarning}}},{"../headerUtils":931,"../util":987}],940:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var assert=require("assert");var fs=require("fs");var util=require("../util");var paramStruct=require("../params/struct");var guide=require("../guide");var graph=require("./elbograph");var RootNode=graph.RootNode;var SampleNode=graph.SampleNode;var FactorNode=graph.FactorNode;var SplitNode=graph.SplitNode;var JoinNode=graph.JoinNode;module.exports=function(env){function makeELBOEstimator(options){options=util.mergeDefaults(options,{samples:1,avgBaselines:true,avgBaselineDecay:.9,dumpGraph:false,debugWeights:false},"ELBO");return function(wpplFn,s,a,state,step,cont){return new ELBO(wpplFn,s,a,options,state,step,cont).run()}}function ELBO(wpplFn,s,a,options,state,step,cont){this.opts=options;this.step=step;this.state=state;this.cont=cont;this.wpplFn=wpplFn;this.s=s;this.a=a;this.guideRequired=true;this.isParamBase=true;this.mapDataStack=[{multiplier:1}];this.mapDataIx={};if(!_.has(this.state,"baselines")){this.state.baselines={}}this.baselineUpdates={};this.oldCoroutine=env.coroutine;env.coroutine=this}function top(stack){return stack[stack.length-1]}function checkScoreIsFinite(score,source){var _score=ad.value(score);if(!isFinite(_score)){var msg="ELBO: The score of the previous sample under the "+source+" program was "+_score+".";if(_.isNaN(_score)){msg+=" Reducing the step size may help."}throw new Error(msg)}}ELBO.prototype={run:function(){var elbo=0;var grad={};return util.cpsLoop(this.opts.samples,function(i,next){this.iter=i;return this.estimateGradient(function(g,elbo_i){paramStruct.addEq(grad,g);elbo+=elbo_i;return next()})}.bind(this),function(){paramStruct.divEq(grad,this.opts.samples);elbo/=this.opts.samples;this.updateBaselines();env.coroutine=this.oldCoroutine;return this.cont(grad,elbo)}.bind(this))},estimateGradient:function(cont){this.paramsSeen={};this.nodes=[];var root=new RootNode;this.prevNode=root;this.nodes.push(root);return this.wpplFn(_.clone(this.s),function(){graph.propagateWeights(this.nodes);if(this.step===0&&this.iter===0&&this.opts.dumpGraph){var dot=graph.generateDot(this.nodes);fs.writeFileSync("deps.dot",dot)}var ret=this.buildObjective();if(ad.isLifted(ret.objective)){ret.objective.backprop()}var grads=_.mapValues(this.paramsSeen,ad.derivative);return cont(grads,ret.elbo)}.bind(this),this.a)},buildObjective:function(){var rootNode=this.nodes[0];assert.ok(rootNode instanceof RootNode);assert.ok(_.isNumber(rootNode.weight));var objective=this.nodes.reduce(function(acc,node){if(node instanceof SampleNode&&node.reparam){return ad.scalar.add(acc,ad.scalar.mul(node.multiplier,ad.scalar.sub(node.logq,node.logp)))}else if(node instanceof SampleNode){var weight=node.weight;assert.ok(_.isNumber(weight));var b=this.computeBaseline(node.address,weight);return ad.scalar.add(acc,ad.scalar.mul(node.multiplier,ad.scalar.sub(ad.scalar.mul(node.logq,ad.scalar.sub(weight,b)),node.logp)))}else if(node instanceof FactorNode){return ad.scalar.sub(acc,ad.scalar.mul(node.multiplier,node.score))}else{return acc}}.bind(this),0);var elbo=ad.scalar.neg(rootNode.weight);return{objective:objective,elbo:elbo}},computeBaseline:function(address,weight){if(!this.opts.avgBaselines){return 0}var baselines=this.state.baselines;var baselineUpdates=this.baselineUpdates;if(!_.has(baselineUpdates,address)){baselineUpdates[address]={n:1,mean:weight}}else{var prev=baselineUpdates[address];var n=prev.n+1;var mean=(prev.n*prev.mean+weight)/n;baselineUpdates[address].n=n;baselineUpdates[address].mean=mean}return _.has(baselines,address)?baselines[address]:weight*.99},updateBaselines:function(){var decay=this.opts.avgBaselineDecay;var baselines=this.state.baselines;_.each(this.baselineUpdates,function(obj,address){baselines[address]=_.has(baselines,address)?decay*baselines[address]+(1-decay)*obj.mean:obj.mean},this)},sample:function(s,k,a,dist,options){options=options||{};return guide.getDist(options.guide,options.noAutoGuide,dist,env,s,a,function(s,guideDist){if(!guideDist){throw new Error("ELBO: No guide distribution to optimize.")}var ret=this.sampleGuide(guideDist,options);var val=ret.val;var logp=dist.score(val);var logq=guideDist.score(val);checkScoreIsFinite(logp,"target");checkScoreIsFinite(logq,"guide");var m=top(this.mapDataStack).multiplier;var node=new SampleNode(this.prevNode,logp,logq,ret.reparam,a,dist,guideDist,val,m,this.opts.debugWeights);this.prevNode=node;this.nodes.push(node);return k(s,val)}.bind(this))},sampleGuide:function(dist,options){var val,reparam;if((!_.has(options,"reparam")||options.reparam)&&dist.base&&dist.transform){var baseDist=dist.base();var z=baseDist.sample();val=dist.transform(z);reparam=true}else if(options.reparam&&!(dist.base&&dist.transform)){throw dist+" does not support reparameterization."}else{val=dist.sample();reparam=false}if(dist.isContinuous&&(!dist.base||!dist.transform)){var msg="Warning: Continuous distribution "+dist.meta.name+" does not support reparameterization.";util.warn(msg,true)}return{val:val,reparam:reparam}},factor:function(s,k,a,score,name){if(!isFinite(ad.value(score))){throw new Error("ELBO: factor score is not finite.")}var m=top(this.mapDataStack).multiplier;var node=new FactorNode(this.prevNode,score,m,this.opts.debugWeights);this.prevNode=node;this.nodes.push(node);return k(s)},mapDataFetch:function(data,opts,address){var batchSize=opts.batchSize!==undefined?opts.batchSize:data.length;var minBatchSize=_.isEmpty(data)?0:1;var maxBatchSize=data.length;if(!(util.isInteger(batchSize)&&minBatchSize<=batchSize&&batchSize<=maxBatchSize)){throw new Error("ELBO: Invalid batchSize.")}var ix;if(_.has(this.mapDataIx,address)){ix=this.mapDataIx[address]}else{if(batchSize===data.length){ix=null}else{ix=_.times(batchSize,function(){return Math.floor(util.random()*data.length)})}this.mapDataIx[address]=ix}var batch=ix===null?data:_.at(data,ix);if(batchSize>0){var joinNode=new JoinNode;var splitNode=new SplitNode(this.prevNode,batchSize,data.length,joinNode);this.nodes.push(splitNode);var thisM=data.length/batchSize;var prevM=top(this.mapDataStack).multiplier;var multiplier=thisM*prevM;this.mapDataStack.push({splitNode:splitNode,joinNode:joinNode,multiplier:multiplier})}else{this.mapDataStack.push(null)}return{data:batch,ix:ix}},mapDataEnter:function(){this.prevNode=top(this.mapDataStack).splitNode},mapDataLeave:function(){top(this.mapDataStack).joinNode.parents.push(this.prevNode)},mapDataFinal:function(address){var top=this.mapDataStack.pop();if(top!==null){var joinNode=top.joinNode;this.prevNode=joinNode;this.nodes.push(joinNode)}},incrementalize:env.defaultCoroutine.incrementalize,constructor:ELBO};return makeELBOEstimator}},{"../ad":888,"../guide":928,"../params/struct":969,"../util":987,"./elbograph":941,assert:3,fs:1,lodash:164}],941:[function(require,module,exports){"use strict";var ad=require("../ad");var nodeid=0;function RootNode(){this.id=nodeid++;this.parents=[];this.weight=0}function SampleNode(parent,logp,logq,reparam,address,targetDist,guideDist,value,multiplier,debug){this.id=nodeid++;var _logp=ad.value(logp);var _logq=ad.value(logq);this.parents=[parent];this.logp=logp;this.logq=logq;this.weight=debug?1:_logq-_logp;this.reparam=reparam;this.address=address;this.multiplier=multiplier;this.targetDist=targetDist}SampleNode.prototype.label=function(){return[this.targetDist.meta.name+"("+this.id+")","w="+this.weight,"m="+this.multiplier].join("\\n")};function FactorNode(parent,score,multiplier,debug){this.id=nodeid++;var _score=ad.value(score);this.parents=[parent];this.score=score;this.weight=debug?1:-_score;this.multiplier=multiplier}FactorNode.prototype.label=function(){return["Factor"+"("+this.id+")","w="+this.weight,"m="+this.multiplier].join("\\n")};function SplitNode(parent,batchSize,n,joinNode){this.id=nodeid++;this.parents=[parent];this.batchSize=batchSize;this.n=n;this.joinNode=joinNode;this.weight=0}function JoinNode(){this.id=nodeid++;this.parents=[];this.weight=0}function propagateWeights(nodes){var i=nodes.length;while(--i){var node=nodes[i];if(node instanceof SplitNode){node.weight=node.n/node.batchSize*node.weight-(node.n-1)*node.joinNode.weight}node.parents.forEach(function(parent){parent.weight+=node.weight})}}var edge=function(parent,child){return"  "+parent.id+" -> "+child.id+";"};var shape=function(node,shape){return"  "+node.id+' [shape = "'+shape+'"]'};var label=function(node){return"  "+node.id+' [label = "'+node.label()+'"]'};function generateDot(nodes){var edges=[];var append=function(x){edges.push(x)};nodes.forEach(function(node){if(node instanceof FactorNode){append(shape(node,"box"))}if(node instanceof RootNode||node instanceof JoinNode||node instanceof SplitNode){append(shape(node,"point"))}if(node.label){append(label(node))}node.parents.forEach(function(parent){append(edge(parent,node))})});return"digraph {\n"+edges.join("\n")+"\n}\n"}module.exports={RootNode:RootNode,SampleNode:SampleNode,FactorNode:FactorNode,SplitNode:SplitNode,JoinNode:JoinNode,propagateWeights:propagateWeights,generateDot:generateDot}},{"../ad":888}],942:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var PriorityQueue=require("priorityqueuejs");var util=require("../util");var ScoreAggregator=require("../aggregation/ScoreAggregator");module.exports=function(env){function Enumerate(store,k,a,wpplFn,options){options=util.mergeDefaults(options,{maxExecutions:Infinity,strategy:undefined,throwOnError:true,maxRuntimeInMS:Infinity,maxEnumTreeSize:Infinity},"Enumerate");this.throwOnError=options.throwOnError;this.maxRuntimeInMS=options.maxRuntimeInMS;this.startTime=Date.now();this.firstPath=true;this.levelSizes=[];this.maxExecutions=options.maxExecutions;this.score=0;this.marginal=new ScoreAggregator;this.numCompletedExecutions=0;this.store=store;this.k=k;this.a=a;this.wpplFn=wpplFn;var strategy=strategies[options.strategy]||defaultStrategy(options.maxExecutions);this.queue=strategy.makeQ();this.oldCoroutine=env.coroutine;env.coroutine=this}Enumerate.prototype.run=function(){return this.wpplFn(_.clone(this.store),env.exit,this.a)};Enumerate.prototype.error=function(errType){var err=new Error(errType);if(this.throwOnError){throw err}else{return this.k(this.store,err)}};Enumerate.prototype.nextInQueue=function(){var nextState=this.queue.deq();this.score=nextState.score;return nextState.continuation(nextState.store,nextState.value)};Enumerate.prototype.enqueueContinuation=function(continuation,value,score,store){var state={continuation:continuation,value:value,score:score,store:_.clone(store)};this.queue.enq(state)};var getSupport=function(dist,cont){if(dist.isContinuous||!dist.support){console.error(dist);return env.coroutine.error("Enumerate can only be used with distributions that have finite support.")}var supp=dist.support();if(ad.scalar.peq(supp.length,0)){console.error(dist);return env.coroutine.error("Enumerate encountered a distribution with empty support.")}return cont(supp)};Enumerate.prototype.sample=function(store,k,a,dist){return getSupport(dist,function(support){if(isFinite(this.maxRuntimeInMS)){if(ad.scalar.gt(ad.scalar.sub(Date.now(),this.startTime),this.maxRuntimeInMS)){return this.error(ad.scalar.add("Enumerate timeout: max time was set to ",this.maxRuntimeInMS))}}if(isFinite(this.maxEnumTreeSize)){this.levelSizes.push(support.length)}_.each(support,function(value){this.enqueueContinuation(k,value,ad.scalar.add(this.score,dist.score(value)),store)}.bind(this));return this.nextInQueue()}.bind(this))};Enumerate.prototype.factor=function(s,k,a,score){this.score=ad.scalar.add(this.score,score);if(ad.scalar.peq(this.score,ad.scalar.neg(Infinity))){return this.exit()}return k(s)};Enumerate.prototype.sampleWithFactor=function(store,k,a,dist,scoreFn){return getSupport(dist,function(support){return util.cpsForEach(function(value,i,support,nextK){return scoreFn(store,function(store,extraScore){var score=ad.scalar.add(ad.scalar.add(env.coroutine.score,dist.score(value)),extraScore);env.coroutine.enqueueContinuation(k,value,score,store);return nextK()},a,value)},function(){return env.coroutine.nextInQueue()},support)})};var estimateEnumTreeSize=function(sizes){var numNodes=1;var enumTreeSize=1;for(var i in sizes){numNodes=ad.scalar.mul(numNodes,sizes[i]);enumTreeSize=ad.scalar.add(enumTreeSize,numNodes)}return enumTreeSize};Enumerate.prototype.exit=function(s,retval){if(isFinite(this.maxEnumTreeSize)){if(this.firstPath){this.firstPath=false;var estimatedTreeSize=estimateEnumTreeSize(this.levelSizes);if(ad.scalar.gt(estimatedTreeSize,this.maxEnumTreeSize)){return this.error(ad.scalar.add(estimatedTreeSize," computations ahead."))}}}this.marginal.add(retval,this.score);this.numCompletedExecutions=ad.scalar.add(this.numCompletedExecutions,1);if(ad.scalar.gt(this.queue.size(),0)&&ad.scalar.lt(this.numCompletedExecutions,this.maxExecutions)){return this.nextInQueue()}else{if(ad.scalar.peq(this.marginal.size,0)){return this.error("All paths explored by Enumerate have probability zero.")}env.coroutine=this.oldCoroutine;return this.k(this.store,this.marginal.toDist())}};Enumerate.prototype.incrementalize=env.defaultCoroutine.incrementalize;var strategies={likelyFirst:{makeQ:function(){return new PriorityQueue(function(a,b){return ad.scalar.sub(a.score,b.score)})}},depthFirst:{makeQ:function(){var q=[];q.size=function(){return q.length};q.enq=q.push;q.deq=q.pop;return q}},breadthFirst:{makeQ:function(){var q=[];q.size=function(){return q.length};q.enq=q.push;q.deq=q.shift;return q}}};function defaultStrategy(maxExecutions){return strategies[_.isFinite(maxExecutions)?"likelyFirst":"depthFirst"]}return{Enumerate:function(s,k,a,wpplFn,options){return new Enumerate(s,k,a,wpplFn,options).run()}}}},{"../ad":888,"../aggregation/ScoreAggregator":890,"../util":987,lodash:164,priorityqueuejs:168}],943:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var assert=require("assert");var util=require("../util");var paramStruct=require("../params/struct");var guide=require("../guide");module.exports=function(env){function makeEUBOEstimator(options){options=util.mergeDefaults(options,{batchSize:1,traces:undefined},"EUBO");if(!options.traces){throw"Example traces required."}if(options.batchSize<=0||options.batchSize>options.traces.length){throw"Invalid batchSize."}return function(wpplFn,s,a,state,step,cont){return new EUBO(wpplFn,s,a,options,state,step,cont).run()}}function EUBO(wpplFn,s,a,options,state,step,cont){this.opts=options;this.traces=this.opts.traces;this.cont=cont;this.wpplFn=wpplFn;this.s=s;this.a=a;this.guideRequired=true;this.isParamBase=true;this.oldCoroutine=env.coroutine;env.coroutine=this}EUBO.prototype={run:function(){var eubo=0;var grad={};var traces=sampleMiniBatch(this.traces,this.opts.batchSize);return util.cpsForEach(function(trace,i,traces,next){return this.estimateGradient(trace,function(g,eubo_i){paramStruct.addEq(grad,g);eubo+=eubo_i;return next()})}.bind(this),function(){paramStruct.divEq(grad,traces.length);eubo/=traces.length;env.coroutine=this.oldCoroutine;return this.cont(grad,eubo)}.bind(this),traces)},estimateGradient:function(trace,cont){this.trace=trace;this.paramsSeen={};this.logq=0;return this.wpplFn(_.clone(this.s),function(){var objective=ad.scalar.neg(this.logq);objective.backprop();var grads=_.mapValues(this.paramsSeen,ad.derivative);var logp=ad.value(trace.score);var logq=ad.value(this.logq);return cont(grads,ad.scalar.sub(logp,logq))}.bind(this),this.a)},sample:function(s,k,a,dist,options){options=options||{};return guide.getDist(options.guide,options.noAutoGuide,dist,env,s,a,function(s,guideDist){if(!guideDist){throw new Error("EUBO: No guide distribution to optimize.")}var rel=util.relativizeAddress(this.a,a);var guideVal=this.trace.findChoice(ad.scalar.add(this.trace.baseAddress,rel)).val;assert.notStrictEqual(guideVal,undefined);var _guideVal=ad.value(guideVal);this.logq=ad.scalar.add(this.logq,guideDist.score(_guideVal));return k(s,_guideVal)}.bind(this))},factor:function(s,k,a,score){return k(s)},incrementalize:env.defaultCoroutine.incrementalize,constructor:EUBO};function sampleMiniBatch(data,batchSize){if(data.length===batchSize){return data}else{var miniBatch=[];_.times(batchSize,function(){var ix=Math.floor(util.random()*data.length);miniBatch.push(data[ix])});return miniBatch}}return makeEUBOEstimator}},{"../ad":888,"../guide":928,"../params/struct":969,"../util":987,assert:3,lodash:164}],944:[function(require,module,exports){"use strict";var _=require("lodash");var util=require("../util");var numeric=require("../math/numeric");var CountAggregator=require("../aggregation/CountAggregator");var ad=require("../ad");var guide=require("../guide");var cb=require("./callbacks");module.exports=function(env){function RunForward(s,k,a,wpplFn,sampleGuide){this.s=s;this.k=k;this.a=a;this.wpplFn=wpplFn;this.sampleGuide=sampleGuide;this.guideRequired=sampleGuide;this.isParamBase=true;this.score=0;this.logWeight=0;this.oldCoroutine=env.coroutine;env.coroutine=this}RunForward.prototype={run:function(){return this.wpplFn(_.clone(this.s),function(s,val){env.coroutine=this.oldCoroutine;var ret={val:val,score:this.score,logWeight:this.logWeight};return this.k(this.s,ret)}.bind(this),this.a)},sample:function(s,k,a,dist,options){var cont=function(s,dist){var val=dist.sample();this.score+=dist.score(val);return k(s,val)}.bind(this);if(this.sampleGuide){options=options||{};return guide.getDist(options.guide,options.noAutoGuide,dist,env,s,a,function(s,maybeGuideDist){return cont(s,maybeGuideDist||dist)})}else{return cont(s,dist)}},factor:function(s,k,a,score){if(!this.sampleGuide){var msg="Note that factor, condition and observe statements are "+"ignored when forward sampling.";util.warn(msg,true)}this.logWeight+=ad.value(score);return k(s)},incrementalize:env.defaultCoroutine.incrementalize,constructor:RunForward};function runForward(){var coroutine=Object.create(RunForward.prototype);RunForward.apply(coroutine,arguments);return coroutine.run()}function ForwardSample(s,k,a,wpplFn,options){var opts=util.mergeDefaults(options,{samples:100,guide:false,onlyMAP:false,verbose:false,callbacks:[]},"ForwardSample");var hist=new CountAggregator(opts.onlyMAP);var logWeights=[];var callbacks=cb.prepare(opts.callbacks);return util.cpsLoop(opts.samples,function(i,next){return runForward(s,function(s,ret){logWeights.push(ret.logWeight);hist.add(ret.val,ret.score);callbacks.sample({value:ret.val,score:ret.score});return next()},a,wpplFn,opts.guide)},function(){callbacks.finish();var dist=hist.toDist();if(!opts.guide){dist.normalizationConstant=numeric._logsumexp(logWeights)-Math.log(opts.samples)}return k(s,dist)})}function extractVal(k){return function(s,obj){return k(s,obj.val)}}return{ForwardSample:ForwardSample,forward:function(s,k,a,model){return runForward(s,extractVal(k),a,model,false)},forwardGuide:function(s,k,a,model){return runForward(s,extractVal(k),a,model,true)}}}},{"../ad":888,"../aggregation/CountAggregator":889,"../guide":928,"../math/numeric":959,"../util":987,"./callbacks":934,lodash:164}],945:[function(require,module,exports){"use strict";var _=require("lodash");var assert=require("assert");var util=require("../util");var gaussian=require("../dists/gaussian");var tensorGaussian=require("../dists/tensorGaussian");var Trace=require("../trace");var ad=require("../ad");var Tensor=require("../tensor");var generic=require("../math/genericArithmetic");var addEq=generic.addEq;var add=generic.add;var mul=generic.mul;var sum=generic.sum;module.exports=function(env){function makeHMCKernel(options){options=util.mergeDefaults(options,{steps:5,stepSize:.1},"HMC kernel");assert.ok(options.steps>0);var kernel=function(cont,oldTrace,runOpts){return new HMCKernel(cont,oldTrace,options,runOpts).run()};kernel.adRequired=true;return kernel}function HMCKernel(cont,oldTrace,options,runOpts){this.steps=options.steps;this.stepSize=options.stepSize;runOpts=util.mergeDefaults(runOpts,{exitFactor:0});this.exitFactor=runOpts.exitFactor;this.cont=cont;this.oldTrace=oldTrace;this.a=oldTrace.baseAddress;this.oldCoroutine=env.coroutine;env.coroutine=this}HMCKernel.prototype.sample=function(s,k,a,dist,options){var prevChoice=this.prevTrace.findChoice(a);if(!prevChoice){throw new Error("HMC does not support structural continuous variables.")}var val;if(dist.isContinuous){if(dist.noHMC){throw new Error("HMC does not yet support the "+dist.meta.name+" distribution")}var prevVal=ad.value(prevChoice.val);var _val=add(prevVal,mul(this.momentum[a],this.stepSize));if(dist.support){var support=dist.support();var lower=ad.value(support.lower);var upper=ad.value(support.upper);while(_val<lower||_val>upper){if(_val<lower){_val=lower+(lower-_val);this.momentum[a]*=-1}if(_val>upper){_val=upper-(_val-upper);this.momentum[a]*=-1}}}val=ad.lift(_val)}else{val=prevChoice.val}this.trace.addChoice(dist,val,a,s,k,options);return k(s,val)};HMCKernel.prototype.factor=function(s,k,a,score){this.trace.numFactors+=1;this.trace.score=ad.scalar.add(this.trace.score,score);if(this.trace.numFactors===this.exitFactor){this.trace.saveContinuation(s,k);return this.exit(s,undefined,true)}return k(s)};HMCKernel.prototype.run=function(){var numChoices=this.oldTrace.choices.reduce(function(acc,c){return acc+(c.dist.isContinuous?1:0)},0);if(numChoices===0){return this.continue(this.oldTrace)}if(ad.isLifted(this.oldTrace.score)){this.oldTrace.score.zeroDerivatives()}this.momentum=sampleMomentum(this.oldTrace);var oldH=computeH(this.oldTrace,this.momentum);this.momentumStep(this.oldTrace,.5);return util.cpsIterate(this.steps-1,this.oldTrace,this.leapFrogStep.bind(this),function(trace){return this.positionStep(function(finalTrace){this.momentumStep(finalTrace,.5);var newH=computeH(finalTrace,this.momentum);var p=Math.min(1,Math.exp(newH-oldH));var accept=util.random()<p;return this.finish(accept?finalTrace:this.oldTrace,accept)}.bind(this),trace)}.bind(this))};function stdGaussianSampleLike(x){return x instanceof Tensor?tensorGaussian.sample(0,1,x.dims):gaussian.sample(0,1)}function sampleMomentum(trace){var momentum={};_.each(trace.choices,function(choice){if(choice.dist.isContinuous){momentum[choice.address]=stdGaussianSampleLike(ad.value(choice.val))}});return momentum}HMCKernel.prototype.leapFrogStep=function(cont,trace){return this.positionStep(function(newTrace){this.momentumStep(newTrace,1);return cont(newTrace)}.bind(this),trace)};HMCKernel.prototype.positionStep=function(cont,trace){this.prevTrace=trace;this.trace=this.prevTrace.fresh();this.positionStepCont=cont;env.query.clear();return this.trace.continue()};HMCKernel.prototype.exit=function(k,val,earlyExit){if(!earlyExit){this.trace.complete(val)}else{assert(this.trace.store);assert(this.trace.k);assert(!this.trace.isComplete())}var cont=this.positionStepCont;this.positionStepCont=undefined;return cont(this.trace)};HMCKernel.prototype.momentumStep=function(trace,scaleFactor){if(ad.isLifted(trace.score)){trace.score.backprop();var stepSize=this.stepSize*scaleFactor;_.each(trace.choices,function(choice){if(choice.dist.isContinuous){this.momentum[choice.address]=addEq(this.momentum[choice.address],mul(ad.derivative(choice.val),stepSize))}}.bind(this))}};function computeH(trace,momentum){var score=ad.value(trace.score);var kinetic=.5*_.reduce(momentum,function(memo,p){return memo+sum(mul(p,p))},0);var x=score-kinetic;return x}HMCKernel.prototype.finish=function(trace,accepted){assert(_.isBoolean(accepted));if(accepted&&trace.value===env.query){trace.value=env.query.getTable()}if(this.oldTrace.info){var oldInfo=this.oldTrace.info;trace.info={accepted:oldInfo.accepted+accepted,total:oldInfo.total+1}}return this.continue(trace)};HMCKernel.prototype.continue=function(trace){env.coroutine=this.oldCoroutine;return this.cont(trace)};HMCKernel.prototype.incrementalize=env.defaultCoroutine.incrementalize;return makeHMCKernel}},{"../ad":888,"../dists/gaussian":904,"../dists/tensorGaussian":922,"../math/genericArithmetic":957,"../tensor":972,"../trace":973,"../util":987,assert:3,lodash:164}],946:[function(require,module,exports){(function(global){(function(){"use strict";var _=require("lodash");var assert=require("assert");var util=require("../util");var Hashtable=require("../hashtable").Hashtable;var Query=require("../query").Query;var CountAggregator=require("../aggregation/CountAggregator");var cb=require("./callbacks");module.exports=function(env){var drift=require("./driftKernel")(env);var DEBUG=0;function debuglog(debuglevel){if(DEBUG>=debuglevel){var args=Array.prototype.slice.call(arguments,1);console.log.apply(console,args)}}function tabbedlog(debuglevel,depth){if(DEBUG>=debuglevel){var args=Array.prototype.slice.call(arguments,2);var pad="";for(var i=0;i<depth;i++)pad+="  ";pad+="["+depth+"] ";console.log.apply(console,[pad].concat(args))}}function touch(node){if(!node.__snapshot){node.coroutine.touch(node);node.__snapshot={reachable:true}}}function updateProperty(node,prop,val){touch(node);if(!node.__snapshot[prop])node.__snapshot[prop]=node[prop];node[prop]=val}function hasSnapshotForProperty(node,prop){return node.__snapshot!==undefined&&node.__snapshot[prop]!==undefined}function restoreSnapshot(node){for(var prop in node.__snapshot){node[prop]=node.__snapshot[prop]}node.__snapshot=undefined}function discardSnapshot(node){node.__snapshot=undefined}function DistNode(coroutine,parent,s,k,a,dist,args){this.coroutine=coroutine;this.store=_.clone(s);this.continuation=k;this.address=a;this.dist=dist;this.args=args;this.parent=parent;this.depth=parent.depth+1;this.index=parent.nextChildIdx;this.reachable=true;this.needsUpdate=false;this.val=dist.sample();this.score=0;this.rescore();this.coroutine.addDist(this)}DistNode.prototype.print=function(){tabbedlog(0,this.depth,"DistNode",this.dist,this.val,this.reachable?"":"!!UNREACHABLE!!")};DistNode.prototype.execute=function(){tabbedlog(4,this.depth,"execute distribution");if(this.needsUpdate){tabbedlog(4,this.depth,"yes, dist changed");tabbedlog(5,this.depth,"old dist:",this.__snapshot?this.__snapshot.dist:undefined,"new dist:",this.dist);this.needsUpdate=false;this.rescore()}else{tabbedlog(4,this.depth,"no, dist has not changed");tabbedlog(5,this.depth,"dist:",this.dist)}if(this.score===-Infinity){tabbedlog(4,this.depth,"score became -Infinity; bailing out early");return this.coroutine.exit()}else{return this.kontinue()}};DistNode.prototype.registerInputChanges=function(s,k,dist,args){updateProperty(this,"store",_.clone(s));updateProperty(this,"continuation",k);updateProperty(this,"index",this.parent.nextChildIdx);updateProperty(this,"args",args);this.reachable=true;if(!distEqual(dist,this.dist)){this.needsUpdate=true;updateProperty(this,"dist",dist)}};DistNode.prototype.kontinue=function(){this.parent.notifyChildExecuted(this);return this.continuation(_.clone(this.store),this.val)};DistNode.prototype.killDescendantLeaves=function(){this.coroutine.removeDist(this)};DistNode.prototype.propose=function(){var oldval=this.val;var sampleOptions=this.args[0];return drift.getProposalDist(this.store,this.address,this.dist,sampleOptions,oldval,function(s,fwdPropDist){var newval=fwdPropDist.sample();tabbedlog(4,this.depth,"proposing change to distribution.","oldval:",oldval,"newval:",newval);if(oldval===newval){tabbedlog(4,this.depth,"proposal didn't change value; bailing out early");tabbedlog(5,this.depth,"value:",this.val);return this.coroutine.exit()}else{updateProperty(this,"store",_.clone(this.store));updateProperty(this,"val",newval);this.rescore();if(this.score===-Infinity&&_.has(sampleOptions,"driftKernel")){drift.proposalWarning(this.dist)}return drift.getProposalDist(s,this.address,this.dist,sampleOptions,newval,function(s,rvsPropDist){this.coroutine.rvsPropLP=rvsPropDist.score(oldval);this.coroutine.fwdPropLP=fwdPropDist.score(newval);tabbedlog(1,this.depth,"initial rvsPropLP:",this.coroutine.rvsPropLP,"initial fwdPropLP:",this.coroutine.fwdPropLP);this.needsUpdate=false;if(this.coroutine.doFullRerun){for(var node=this.parent;node!==null;node=node.parent)node.needsUpdate=true;return this.coroutine.runFromStart()}else{this.parent.notifyChildChanged(this);this.coroutine.restoreStackUpTo(this.parent);return this.execute()}}.bind(this))}}.bind(this))};DistNode.prototype.rescore=function(){var oldscore=this.score;updateProperty(this,"score",this.dist.score(this.val));this.coroutine.score+=this.score-oldscore};function distEqual(dist1,dist2){return dist1.constructor===dist2.constructor&&distParamsEqual(dist1.params,dist2.params)}function distParamsEqual(p1,p2){if(p1===p2){return true}for(var k in p1){if(p1.hasOwnProperty(k)){var v1=p1[k],v2=p2[k];if(typeof v1==="number"){if(v1!==v2){return false}}else if(_.isArray(v1)){if(!_.isEqual(v1,v2)){return false}}else{return false}}}return true}function FactorNode(coroutine,parent,s,k,a,unused,args){this.coroutine=coroutine;this.store=s;this.continuation=k;this.address=a;this.parent=parent;this.depth=parent.depth+1;this.index=parent.nextChildIdx;this.reachable=true;this.rescore(0,args[0]);tabbedlog(3,this.depth,"new factor")}FactorNode.prototype.print=function(){tabbedlog(0,this.depth,"FactorNode",this.reachable?"":"!!UNREACHABLE!!")};FactorNode.prototype.execute=function(){if(this.score===-Infinity){tabbedlog(4,this.depth,"score became -Infinity; bailing out early");return this.coroutine.exit()}else{return this.kontinue()}};FactorNode.prototype.registerInputChanges=function(s,k,unused,args){updateProperty(this,"store",s);updateProperty(this,"continuation",k);updateProperty(this,"index",this.parent.nextChildIdx);this.reachable=true;if(this.score!==args[0])this.rescore(this.score,args[0])};FactorNode.prototype.kontinue=function(){this.parent.notifyChildExecuted(this);return this.continuation(this.store)};FactorNode.prototype.killDescendantLeaves=function(){tabbedlog(3,this.depth,"kill factor",this.address);this.coroutine.score-=this.score};FactorNode.prototype.rescore=function(oldscore,score){updateProperty(this,"score",score);this.coroutine.score+=score-oldscore};function storesEqual(s1,s2){var prop;for(prop in s1){if(s1[prop]!==s2[prop])return false}for(prop in s2){if(s1[prop]!==s2[prop])return false}return true}var fnEquivCache={};function fnsEqual(f1,f2){if(f1===f2)return true;if(f1.__lexid===undefined||f2.__lexid===undefined)return false;if(f1.__lexid===f2.__lexid){var key=JSON.stringify([f1.__uniqueid,f2.__uniqueid]);var val=fnEquivCache[key];if(val===undefined){val=true;for(var i=0;i<f1.__freeVarVals.length;i++){var v1=f1.__freeVarVals[i];var v2=f2.__freeVarVals[i];var eq=_.isFunction(v1)&&_.isFunction(v2)?fnsEqual(v1,v2):v1===v2;if(!eq){val=false;break}}fnEquivCache[key]=val}return val}return false}function FunctionNode(coroutine,parent,s,k,a,fn,args){this.coroutine=coroutine;this.continuation=k;this.address=a;this.func=fn;this.parent=parent;this.depth=parent?parent.depth+1:0;this.index=parent?parent.nextChildIdx:undefined;this.children=[];this.nextChildIdx=0;this.reachable=true;this.needsUpdate=true;this.inStore=_.clone(s);this.args=args;this.initialized=false;this.retval=undefined;this.outStore=null}FunctionNode.prototype.print=function(){tabbedlog(0,this.depth,"FunctionNode",this.args,this.retval,this.reachable?"":"!!UNREACHABLE!!");for(var i=0;i<this.children.length;i++)this.children[i].print()};FunctionNode.prototype.execute=function(){tabbedlog(4,this.depth,"execute function");if(this.needsUpdate){if(this.initialized)this.coroutine.cacheAdapter.registerMiss(this);tabbedlog(4,this.depth,"yes, function args changed; executing");tabbedlog(5,this.depth,"old args:",this.__snapshot?this.__snapshot.args:undefined,"new args:",this.args);this.needsUpdate=false;this.coroutine.nodeStack.push(this);this.nextChildIdx=0;var nchildren=this.children.length;for(var i=0;i<nchildren;i++){touch(this.children[i]);this.children[i].reachable=false}tabbedlog(4,this.depth,"Children marked unreachable on execute:",nchildren);var coroutine=this.coroutine;var continuation=this.continuation;var address=this.address;this.entered=true;return this.func.apply(global,[this.inStore,function(s,retval){if(!coroutine.cacheAdapter.shouldCache(address))return continuation(s,retval);var that=coroutine.nodeStack.pop();tabbedlog(4,that.depth,"continue from function");that.initialized=true;var newchildren=[];var nchildren=that.children.length;var ii=0;for(var i=0;i<nchildren;i++){var child=that.children[i];if(!child.reachable)child.killDescendantLeaves();else{updateProperty(child,"index",ii++);newchildren.push(child)}}updateProperty(that,"children",newchildren);if(!that.entered&&that.retval===retval&&storesEqual(that.outStore,s)){tabbedlog(4,that.depth,"bailing b/c function return val not changed");tabbedlog(5,that.depth,"return val:",retval);coroutine.cacheAdapter.registerHit(that);return coroutine.exit()}if(!that.entered&&that.parent!==null)that.parent.notifyChildChanged(that);if(!that.entered)coroutine.cacheAdapter.registerMiss(that);that.entered=false;tabbedlog(4,that.depth,"function return val has changed, or cannot bail");tabbedlog(5,that.depth,"old ret val:",that.retval,"new ret val:",retval);updateProperty(that,"retval",retval);updateProperty(that,"outStore",_.clone(s));return that.kontinue()},this.address].concat(this.args))}else{this.coroutine.cacheAdapter.registerHit(this);tabbedlog(4,this.depth,"no, function args have not changed; continuing");tabbedlog(5,this.depth,"args:",this.args);return this.kontinue()}};FunctionNode.prototype.registerInputChanges=function(s,k,fn,args){updateProperty(this,"continuation",k);if(this.parent)updateProperty(this,"index",this.parent.nextChildIdx);this.reachable=true;if(!fnsEqual(fn,this.func)){this.needsUpdate=true;updateProperty(this,"func",fn)}if(this.args.length!==args.length){this.needsUpdate=true;updateProperty(this,"args",args)}else{var i=args.length;for(var i=0;i<args.length;i++){if(args[i]!==this.args[i]){this.needsUpdate=true;updateProperty(this,"args",args);break}}}if(!storesEqual(this.inStore,s)){this.needsUpdate=true;updateProperty(this,"inStore",_.clone(s))}};FunctionNode.prototype.killDescendantLeaves=function(){tabbedlog(3,this.depth,"kill function (and all descendant leaves)",this.address);var stack=[this];while(stack.length>0){var node=stack.pop();if(node.score!==undefined)node.killDescendantLeaves();else{var n=node.children.length;while(n--)stack.push(node.children[n])}}};FunctionNode.prototype.kontinue=function(){if(this.parent!==null)this.parent.notifyChildExecuted(this);return this.continuation(_.clone(this.outStore),this.retval)};FunctionNode.prototype.notifyChildExecuted=function(child){this.nextChildIdx=child.index+1};FunctionNode.prototype.notifyChildChanged=function(child){var nchildren=this.children.length;var totalmarked=0;for(var i=child.index+1;i<nchildren;i++){touch(this.children[i]);this.children[i].reachable=false;totalmarked++}tabbedlog(4,this.depth,"Children marked unreachable on child change:",totalmarked)};FunctionNode.prototype.removeFromCache=function(){if(this.parent.children[this.index]===this){var n=this.children.length;for(var i=0;i<n;i++){var child=this.children[i];child.parent=this.parent;child.index=this.index+i;var stack=[child];while(stack.length>0){var node=stack.pop();node.depth--;if(node.children){var nn=node.children.length;while(nn--)stack.push(node.children[nn])}}}for(var i=this.index+1;i<this.parent.children.length;i++){this.parent.children[i].index=i+n-1}this.children.unshift(this.index,1);Array.prototype.splice.apply(this.parent.children,this.children)}};function ArrayDistMasterList(){this.distNodes=[]}ArrayDistMasterList.prototype.size=function(){return this.distNodes.length};ArrayDistMasterList.prototype.oldSize=function(){return this.oldDistNodes===undefined?undefined:this.oldDistNodes.length};ArrayDistMasterList.prototype.addDist=function(node){this.distNodes.push(node)};ArrayDistMasterList.prototype.removeDist=function(node){touch(node);node.reachable=false};ArrayDistMasterList.prototype.preProposal=function(){this.oldDistNodes=this.distNodes.slice()};ArrayDistMasterList.prototype.postProposal=function(){this.distNodes=_.filter(this.distNodes,function(node){return node.reachable})};ArrayDistMasterList.prototype.getRandom=function(){var idx=Math.floor(util.random()*this.distNodes.length);return this.distNodes[idx]};ArrayDistMasterList.prototype.restoreOnReject=function(){this.distNodes=this.oldDistNodes};function HashtableDistMasterList(){this.distNodeMap=new Hashtable;this.distsAdded=[];this.distsRemoved=[];this.numDists=0}HashtableDistMasterList.prototype.size=function(){return this.numDists};HashtableDistMasterList.prototype.oldSize=function(){return this.oldNumDists};HashtableDistMasterList.prototype.addDist=function(node){this.distNodeMap.put(node.address,node);this.distsAdded.push(node);this.numDists++};HashtableDistMasterList.prototype.removeDist=function(node){this.distNodeMap.remove(node.address);this.distsRemoved.push(node);this.numDists--};HashtableDistMasterList.prototype.preProposal=function(){this.oldNumDists=this.numDists;this.distsAdded=[];this.distsRemoved=[]};HashtableDistMasterList.prototype.postProposal=function(){};HashtableDistMasterList.prototype.getRandom=function(){return this.distNodeMap.getRandom()};HashtableDistMasterList.prototype.restoreOnReject=function(){this.numDists=this.oldNumDists;var n=this.distsAdded.length;while(n--){var node=this.distsAdded[n];this.distNodeMap.remove(node.address)}n=this.distsRemoved.length;while(n--){var node=this.distsRemoved[n];this.distNodeMap.put(node.address,node)}};HashtableDistMasterList.prototype.checkConsistency=function(tag){for(var i=0;i<this.distsAdded.length;i++){var addr=this.distsAdded[i].address;if(!this.distNodeMap.get(addr))throw new Error("WTF - hash table doesn't contain node "+addr+" that we added ("+tag+")")}for(var i=0;i<this.distsRemoved.length;i++){var addr=this.distsRemoved[i].address;if(this.distNodeMap.get(addr))throw new Error("WTF - hash table contains node "+addr+" that we removed ("+tag+")")}};function CacheAdapter(minHitRate,fuseLength,iterFuseLength){this.minHitRate=minHitRate;this.fuseLength=fuseLength;this.iterFuseLength=iterFuseLength;this.addrToId={};this.stats={};this.idsToRemove={};this.hasIdsToRemove=false}CacheAdapter.prototype.id=function(addr){var id=this.addrToId[addr];if(id===undefined){var arr=addr.split("_");id=arr[arr.length-1];this.addrToId[addr]=id}return id};CacheAdapter.prototype.getStats=function(addr){var id=this.id(addr);var stats=this.stats[id];if(stats===undefined){stats={shouldCache:true,hits:0,total:0};this.stats[id]=stats}return stats};CacheAdapter.prototype.shouldCache=function(addr){return this.getStats(addr).shouldCache};CacheAdapter.prototype.registerHit=function(node){var stats=this.getStats(node.address);stats.hits++;stats.total++;if(node.parent!==null&&node.coroutine.totalIterations-node.coroutine.iterations>this.iterFuseLength&&stats.total>=this.fuseLength&&stats.hits/stats.total<this.minHitRate){this.idsToRemove[this.id(node.address)]=true;this.hasIdsToRemove=true}};CacheAdapter.prototype.registerMiss=function(node){var stats=this.getStats(node.address);stats.total++;if(node.parent!==null&&node.coroutine.totalIterations-node.coroutine.iterations>this.iterFuseLength&&stats.total>=this.fuseLength&&stats.hits/stats.total<this.minHitRate){this.idsToRemove[this.id(node.address)]=true;this.hasIdsToRemove=true}};CacheAdapter.prototype.adapt=function(cacheRoot){if(this.hasIdsToRemove){for(var id in this.idsToRemove){var s=this.stats[id];debuglog(5,"Cache adapter removing nodes w/ id",id,"hit rate:",s.hits/s.total);this.stats[id].shouldCache=false}var stack=[cacheRoot];while(stack.length>0){var node=stack.pop();if(node.children!==undefined){var n=node.children.length;while(n--)stack.push(node.children[n])}if(this.idsToRemove[this.id(node.address)]){node.removeFromCache()}}this.idsToRemove={};this.hasIdsToRemove=false;if(DEBUG>=6){debuglog(6,"=== Post-adaptation cache status ===");cacheRoot.print()}}};CacheAdapter.prototype.report=function(){for(var id in this.stats){console.log(id,":",this.stats[id])}};function IncrementalMH(s,k,a,wpplFn,opts){opts=util.mergeDefaults(opts,{samples:1,dontAdapt:false,debuglevel:0,verbose:false,doFullRerun:false,onlyMAP:false,cacheMinHitRate:1e-8,cacheFuseLength:50,lag:0,cacheIterFuseLength:10,burn:0,verboseLag:1,callbacks:[]},"IncrementalMH");if(opts.doFullRerun)opts.dontAdapt=true;DEBUG=opts.debuglevel;this.verbose=opts.verbose;this.k=k;this.oldStore=s;this.iterations=opts.samples*(opts.lag+1)+opts.burn;this.wpplFn=wpplFn;this.s=s;this.a=a;this.aggregator=new CountAggregator(opts.onlyMAP);this.totalIterations=this.iterations;this.acceptedProps=0;this.lag=opts.lag;this.burn=opts.burn;this.verboseLag=opts.verboseLag;this.callbacks=cb.prepare(opts.callbacks);this.doFullRerun=opts.doFullRerun;this.doAdapt=!opts.dontAdapt;this.cacheAdapter=new CacheAdapter(opts.cacheMinHitRate,opts.cacheFuseLength,opts.cacheIterFuseLength);this.oldCoroutine=env.coroutine;env.coroutine=this}IncrementalMH.prototype.run=function(){this.cacheRoot=null;this.distMasterList=new HashtableDistMasterList;this.touchedNodes=[];this.score=0;this.fwdPropLP=0;this.rvsPropLP=0;this.query=new Query;env.query.clear();debuglog(1,"-------------------------------------");debuglog(1,"RUN FROM START");return this.runFromStart()};IncrementalMH.prototype.runFromStart=function(){this.nodeStack=[];return this.incrementalize(this.s,env.exit,this.a,this.wpplFn,[])};IncrementalMH.prototype.factor=function(s,k,a,score){return this.cachelookup(FactorNode,s,k,a,null,[score]).execute()};IncrementalMH.prototype.sample=function(s,k,a,dist,options,name){var n=this.cachelookup(DistNode,s,k,a,dist,[options]);n.name=name;return n.execute()};IncrementalMH.prototype.touch=function(node){this.touchedNodes.push(node)};function acceptProb(currScore,oldScore,currN,oldN,rvsPropLP,fwdPropLP){if(oldScore===undefined){return 1}if(currScore===-Infinity)return 0;debuglog(1,"currScore:",currScore,"oldScore",oldScore);debuglog(1,"rvsPropLP:",rvsPropLP,"fwdPropLP:",fwdPropLP);var fw=-Math.log(oldN)+fwdPropLP;var bw=-Math.log(currN)+rvsPropLP;var p=Math.exp(currScore-oldScore+bw-fw);assert.ok(!isNaN(p));var acceptance=Math.min(1,p);return acceptance}IncrementalMH.prototype.isInitialized=function(){return this.iterations<this.totalIterations};IncrementalMH.prototype.exit=function(){if(this.iterations>0){if(!this.isInitialized()&&this.score===-Infinity){return this.run()}else{var iternum=this.totalIterations-this.iterations;debuglog(1,"iteration",iternum);if(this.verbose&&this.iterations%this.verboseLag===0){if(iternum>this.burn){console.log("IncrementalMH iteration "+(iternum-this.burn)+" / "+(this.totalIterations-this.burn))}else{console.log("IncrementalMH burnin "+iternum+" / "+this.burn)}}this.iterations--;this.distMasterList.postProposal();debuglog(2,"Num vars:",this.distMasterList.size());debuglog(2,"Touched nodes:",this.touchedNodes.length);var acceptance=acceptProb(this.score,this.oldScore,this.distMasterList.size(),this.distMasterList.oldSize(),this.rvsPropLP,this.fwdPropLP);debuglog(1,"num vars:",this.distMasterList.size(),"old num vars:",this.distMasterList.oldSize());debuglog(1,"acceptance prob:",acceptance);if(util.random()>=acceptance){debuglog(1,"REJECT");this.score=this.oldScore;var n=this.touchedNodes.length;while(n--)restoreSnapshot(this.touchedNodes[n]);this.distMasterList.restoreOnReject()}else{debuglog(1,"ACCEPT");var n=this.touchedNodes.length;while(n--)discardSnapshot(this.touchedNodes[n]);this.acceptedProps++;this.query.addAll(env.query)}env.query.clear();var val=this.cacheRoot.retval;debuglog(1,"return val:",val);if(iternum%(this.lag+1)===0&&iternum>=this.burn){if(val===env.query)val=this.query.getTable();this.aggregator.add(val,this.score);this.callbacks.sample({value:val,score:this.score})}if(DEBUG>=6){debuglog(6,"=== Cache status ===");this.cacheRoot.print()}if(this.doAdapt)this.cacheAdapter.adapt(this.cacheRoot);if(this.distMasterList.numDists>0){this.oldScore=this.score;this.distMasterList.preProposal();this.touchedNodes=[];this.fwdPropLP=0;this.rvsPropLP=0;var propnode=this.distMasterList.getRandom();debuglog(1,"----------------------------------------------------------------------");debuglog(1,"PROPOSAL","type:",propnode.dist,"address:",propnode.address);return propnode.propose()}else{return this.runFromStart()}}}else{var k=this.k;env.coroutine=this.oldCoroutine;if(DEBUG>=5){console.log("Acceptance ratio: "+this.acceptedProps/this.totalIterations);this.cacheAdapter.report()}this.callbacks.finish();return k(this.oldStore,this.aggregator.toDist())}};IncrementalMH.prototype.incrementalize=function(s,k,a,fn,args){if(this.cacheAdapter.shouldCache(a))return this.cachelookup(FunctionNode,s,k,a,fn,args).execute();else return env.defaultCoroutine.incrementalize(s,k,a,fn,args)};IncrementalMH.prototype.cachelookup=function(NodeType,s,k,a,fn,args){var cacheNode;if(this.cacheRoot===null){cacheNode=new NodeType(this,null,s,k,a,fn,args);this.cacheRoot=cacheNode}else if(this.nodeStack.length===0){if(a!==this.cacheRoot.address)throw new Error("Wrong address for cache root lookup");cacheNode=this.cacheRoot;cacheNode.registerInputChanges(s,k,fn,args)}else{var currNode=this.nodeStack[this.nodeStack.length-1];tabbedlog(3,currNode.depth,"lookup",NodeType.name,a);cacheNode=this.findNode(currNode,a);if(cacheNode){tabbedlog(3,currNode.depth,"found");cacheNode.registerInputChanges(s,k,fn,args)}else{if(DEBUG){var addrs=_.map(_.filter(currNode.children,function(node){return node instanceof NodeType}),function(node){return node.address});tabbedlog(3,currNode.depth,"*not* found");tabbedlog(4,currNode.depth,"options were",addrs)}cacheNode=new NodeType(this,currNode,s,k,a,fn,args);var insertidx=currNode.nextChildIdx;if(!hasSnapshotForProperty(currNode,"children"))updateProperty(currNode,"children",currNode.children.slice());currNode.children.splice(insertidx,0,cacheNode)}}return cacheNode};IncrementalMH.prototype.findNode=function(parentNode,address){if(!this.isInitialized())return undefined;var nodes=parentNode.children;var nexti=parentNode.nextChildIdx;for(var i=nexti;i<nodes.length;i++){if(nodes[i].address===address){if(i!==nexti){if(!hasSnapshotForProperty(parentNode,"children")){nodes=nodes.slice();updateProperty(parentNode,"children",nodes)}var tmp=nodes[i];nodes[i]=nodes[nexti];nodes[nexti]=tmp}return nodes[nexti]}}};IncrementalMH.prototype.addDist=function(node){tabbedlog(3,node.depth,"new distribution");this.distMasterList.addDist(node);this.fwdPropLP+=node.score};IncrementalMH.prototype.removeDist=function(node){tabbedlog(3,node.depth,"kill distribution",node.address);this.distMasterList.removeDist(node);this.rvsPropLP+=node.score;this.score-=node.score};IncrementalMH.prototype.restoreStackUpTo=function(node){this.nodeStack=[];while(node!==null){this.nodeStack.push(node);node=node.parent}this.nodeStack.reverse()};IncrementalMH.prototype.addressInCache=function(addr){var stack=[this.cacheRoot];while(stack.length>0){var node=stack.pop();if(node.address===addr)return true;if(node.children!==undefined)for(var i=0;i<node.children.length;i++)stack.push(node.children[i])}return false};IncrementalMH.prototype.checkReachabilityConsistency=function(){var stack=[this.cacheRoot];while(stack.length>0){var node=stack.pop();if(!node.reachable)throw new Error("WTF - found unreachable node in cache.");if(node.children!==undefined)for(var i=0;i<node.children.length;i++)stack.push(node.children[i])}return false};function imh(s,cc,a,wpplFn,opts){opts=opts||{};return new IncrementalMH(s,cc,a,wpplFn,opts).run()}return{IncrementalMH:imh}}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../aggregation/CountAggregator":889,"../hashtable":929,"../query":970,"../util":987,"./callbacks":934,"./driftKernel":939,assert:3,lodash:164}],947:[function(require,module,exports){"use strict";var _=require("lodash");var assert=require("assert");var Trace=require("../trace");var ad=require("../ad");module.exports=function(env){var warnAfter=[1e3,1e4,1e5,1e6];function Initialize(cont,wpplFn,s,k,a,options){this.cont=cont;this.wpplFn=wpplFn;this.s=s;this.k=k;this.a=a;this.ad=options.ad;this.failures=0;this.oldCoroutine=env.coroutine;env.coroutine=this}Initialize.prototype.run=function(){this.trace=new Trace(this.wpplFn,this.s,this.k,this.a);env.query.clear();return this.trace.continue()};Initialize.prototype.sample=function(s,k,a,dist,options){var _val=dist.sample();var val=this.ad&&dist.isContinuous?ad.lift(_val):_val;this.trace.addChoice(dist,val,a,s,k,options);return k(s,val)};Initialize.prototype.factor=function(s,k,a,score){if(ad.value(score)===-Infinity){return this.fail()}this.trace.score=ad.scalar.add(this.trace.score,score);return k(s)};Initialize.prototype.fail=function(){this.failures+=1;var ix=warnAfter.indexOf(this.failures);if(ix>=0){console.log(["Initialization warning [",ix+1,"/",warnAfter.length,"]: Trace not initialized after ",this.failures," attempts."].join(""))}return this.run()};Initialize.prototype.exit=function(s,val){assert.notStrictEqual(this.trace.score,-Infinity);this.trace.complete(val);if(this.trace.value===env.query){this.trace.value=env.query.getTable()}env.coroutine=this.oldCoroutine;return this.cont(this.trace)};Initialize.prototype.incrementalize=env.defaultCoroutine.incrementalize;return function(cont,wpplFn,s,k,a,options){return new Initialize(cont,wpplFn,s,k,a,options).run()}}},{"../ad":888,"../trace":973,assert:3,lodash:164}],948:[function(require,module,exports){"use strict";var assert=require("assert");var _=require("lodash");var util=require("../util");module.exports=function(env){var makeMHKernel=require("./mhkernel")(env);var makeHMCKernel=require("./hmckernel")(env);function makeHMCwithMHKernel(options){var hmc=makeHMCKernel(options);var mh=makeMHKernel({discreteOnly:true,adRequired:true});var kernel=function(cont,oldTrace,runOpts){return hmc(function(trace){return mh(cont,trace,runOpts)},oldTrace,runOpts)};kernel.adRequired=true;return kernel}var kernels={MH:makeMHKernel,HMC:makeHMCwithMHKernel,HMConly:makeHMCKernel};function parseOptions(obj){return util.getValAndOpts(obj,function(name,options){if(!_.has(kernels,name)){throw new Error(name+" is not a valid kernel. "+"The following kernels are available: "+_.keys(kernels).join(", ")+".")}return kernels[name](options)})}function tap(fn){return function(k,trace){fn(trace);return k(trace)}}function sequence(){var kernels=arguments;assert(kernels.length>1);if(kernels.length===2){return function(k,trace1){return kernels[0](function(trace2){return kernels[1](k,trace2)},trace1)}}else{return sequence(kernels[0],sequence.apply(null,_.rest(kernels)))}}function repeat(n,kernel){return function(k,trace){return util.cpsIterate(n,trace,kernel,k)}}return{parseOptions:parseOptions,tap:tap,sequence:sequence,repeat:repeat}}},{"../util":987,"./hmckernel":945,"./mhkernel":950,assert:3,lodash:164}],949:[function(require,module,exports){(function(process){(function(){"use strict";var _=require("lodash");var util=require("../util");var CountAggregator=require("../aggregation/CountAggregator");var ad=require("../ad");var cb=require("./callbacks");module.exports=function(env){var Initialize=require("./initialize")(env);var kernels=require("./kernels")(env);function MCMC(s,k,a,wpplFn,options){var options=util.mergeDefaults(options,{samples:100,kernel:"MH",lag:0,burn:0,verbose:false,onlyMAP:false,callbacks:[]},"MCMC");options.kernel=kernels.parseOptions(options.kernel);var callbacks=cb.prepare(options.verbose?[makeVMCallbackForPlatform()].concat(options.callbacks):options.callbacks);callbacks.setup(numIters(options));var aggregator=new CountAggregator(options.onlyMAP);var getValAndScore=options.kernel.adRequired?function(trace){return{value:ad.valueRec(trace.value),score:ad.value(trace.score)}}:_.identity;var initialize,run,finish;initialize=function(){callbacks.initialize();return Initialize(run,wpplFn,s,env.exit,a,{ad:options.kernel.adRequired})};run=function(initialTrace){initialTrace.info={accepted:0,total:0};var callback=kernels.tap(function(trace){callbacks.iteration(trace)});var collectSample=kernels.tap(function(trace){var obj=getValAndScore(trace);aggregator.add(obj.value,obj.score);callbacks.sample({value:obj.value,score:obj.score})});var kernel=kernels.sequence(options.kernel,callback);var chain=kernels.sequence(kernels.repeat(options.burn,kernel),kernels.repeat(options.samples,kernels.sequence(kernels.repeat(options.lag+1,kernel),collectSample)));return chain(finish,initialTrace)};finish=function(trace){callbacks.finish(trace);return k(s,aggregator.toDist())};return initialize()}function numIters(opts){return opts.burn+(opts.lag+1)*opts.samples}function makeVMCallback(opts){var curIter=0;return{iteration:function(trace){opts.iteration(trace,curIter++)},finish:function(trace){opts.finish(trace,curIter-1)}}}function makeSimpleVMCallback(){return makeVMCallback({iteration:function(trace,i){console.log(formatOutput(trace,i))},finish:_.identity})}function makeOverwritingVMCallback(){var writeCurIter=function(trace,i){process.stdout.write("\r"+formatOutput(trace,i))};return makeVMCallback({iteration:_.throttle(writeCurIter,200,{trailing:false}),finish:function(trace,i){writeCurIter(trace,i);console.log()}})}function formatOutput(trace,i){var ratio=trace.info.total===0?0:trace.info.accepted/trace.info.total;return"Iteration: "+i+" | Acceptance ratio: "+ratio.toFixed(4)}function makeVMCallbackForPlatform(){return util.runningInBrowser()?makeSimpleVMCallback():makeOverwritingVMCallback()}return{MCMC:MCMC}}}).call(this)}).call(this,require("_process"))},{"../ad":888,"../aggregation/CountAggregator":889,"../util":987,"./callbacks":934,"./initialize":947,"./kernels":948,_process:25,lodash:164}],950:[function(require,module,exports){"use strict";var _=require("lodash");var assert=require("assert");var util=require("../util");var numeric=require("../math/numeric");var ad=require("../ad");module.exports=function(env){var drift=require("./driftKernel")(env);function makeMHKernel(options){options=util.mergeDefaults(options,{adRequired:false,permissive:false,discreteOnly:false},"MH kernel");return function(cont,oldTrace,runOpts){return new MHKernel(cont,oldTrace,options,runOpts).run()}}function MHKernel(cont,oldTrace,options,runOpts){this.discreteOnly=options.discreteOnly;this.adRequired=options.adRequired;if(!options.permissive){assert.notStrictEqual(oldTrace.score,-Infinity)}runOpts=util.mergeDefaults(runOpts,{proposalBoundary:0,exitFactor:0,factorCoeff:1,allowHardFactors:true});this.proposalBoundary=runOpts.proposalBoundary;this.exitFactor=runOpts.exitFactor;this.factorCoeff=runOpts.factorCoeff;assert.ok(0<=this.factorCoeff&&this.factorCoeff<=1);this.allowHardFactors=runOpts.allowHardFactors;this.cont=cont;this.oldTrace=oldTrace;this.a=oldTrace.baseAddress;this.reused={};this.oldCoroutine=env.coroutine;env.coroutine=this}MHKernel.prototype.run=function(){this.regenFrom=this.sampleRegenChoice(this.oldTrace);if(this.regenFrom<0){return this.continue(this.oldTrace)}env.query.clear();this.trace=this.oldTrace.upto(this.regenFrom);var regen=this.oldTrace.choiceAtIndex(this.regenFrom);return this.resample(_.clone(regen.store),regen.k,regen.address,regen.dist,regen.options)};MHKernel.prototype.factor=function(s,k,a,score){if(ad.value(score)===-Infinity){if(!this.allowHardFactors){throw new Error("Hard factor statements are not allowed.")}return this.finish(this.oldTrace,false)}this.trace.numFactors+=1;this.trace.score=ad.scalar.add(this.trace.score,score);if(this.trace.numFactors===this.exitFactor){this.trace.saveContinuation(s,k);return this.exit(s,undefined,true)}return k(s)};MHKernel.prototype.sample=function(s,k,a,dist,options){var prevChoice=this.oldTrace.findChoice(a);var val;if(prevChoice){val=prevChoice.val;this.reused[a]=true}else{var _val=dist.sample();val=this.adRequired&&dist.isContinuous?ad.lift(_val):_val}return this.addChoiceToTrace(s,k,a,dist,options,val)};MHKernel.prototype.resample=function(s,k,a,dist,options){var prevChoice=this.oldTrace.findChoice(a);assert(prevChoice);return drift.getProposalDist(s,a,dist,options,prevChoice.val,function(s,fwdProposalDist){var _val=fwdProposalDist.sample();var val=this.adRequired&&fwdProposalDist.isContinuous?ad.lift(_val):_val;if(!fwdProposalDist.isContinuous&&prevChoice.val===val){return this.finish(this.oldTrace,true)}return drift.getProposalDist(s,a,dist,options,val,function(s,revProposalDist){this.fwdProposalDist=fwdProposalDist;this.revProposalDist=revProposalDist;return this.addChoiceToTrace(s,k,a,dist,options,val,true)}.bind(this))}.bind(this))};MHKernel.prototype.addChoiceToTrace=function(s,k,a,dist,options,val,atResample){this.trace.addChoice(dist,val,a,s,k,options);if(ad.value(this.trace.score)===-Infinity){if(atResample&&_.has(options,"driftKernel")){drift.proposalWarning(dist)}return this.finish(this.oldTrace,false)}return k(s,val)};MHKernel.prototype.exit=function(s,val,earlyExit){if(!earlyExit){this.trace.complete(val)}else{assert(this.trace.store);assert(this.trace.k);assert(!this.trace.isComplete())}var prob=this.acceptProb(this.trace,this.oldTrace);var accept=util.random()<prob;return this.finish(accept?this.trace:this.oldTrace,accept)};MHKernel.prototype.finish=function(trace,accepted){assert(_.isBoolean(accepted));if(accepted&&trace.value===env.query){trace.value=_.assign({},this.oldTrace.value,env.query.getTable())}if(this.oldTrace.info){var oldInfo=this.oldTrace.info;trace.info={accepted:oldInfo.accepted+accepted,total:oldInfo.total+1}}return this.continue(trace)};MHKernel.prototype.continue=function(trace){env.coroutine=this.oldCoroutine;return this.cont(trace)};MHKernel.prototype.incrementalize=env.defaultCoroutine.incrementalize;MHKernel.prototype.proposableDiscreteDistIndices=function(trace){return _.range(this.proposalBoundary,trace.length).filter(function(i){return!trace.choices[i].dist.isContinuous})};MHKernel.prototype.numRegenChoices=function(trace){if(this.discreteOnly){return this.proposableDiscreteDistIndices(trace).length}else{return trace.length-this.proposalBoundary}};MHKernel.prototype.sampleRegenChoice=function(trace){return this.discreteOnly?this.sampleRegenChoiceDiscrete(trace):this.sampleRegenChoiceAny(trace)};MHKernel.prototype.sampleRegenChoiceDiscrete=function(trace){var indices=this.proposableDiscreteDistIndices(trace);return indices.length>0?indices[Math.floor(util.random()*indices.length)]:-1};MHKernel.prototype.sampleRegenChoiceAny=function(trace){var numChoices=trace.length-this.proposalBoundary;return numChoices>0?this.proposalBoundary+Math.floor(util.random()*numChoices):-1};MHKernel.prototype.acceptProb=function(trace,oldTrace){var fw=this.transitionProb(oldTrace,trace,this.fwdProposalDist);var bw=this.transitionProb(trace,oldTrace,this.revProposalDist);var newTraceScore,oldTraceScore;if(this.factorCoeff==1){newTraceScore=ad.value(trace.score);oldTraceScore=ad.value(oldTrace.score)}else{newTraceScore=ad.value(trace.scoreAllChoices())+this.factorCoeff*ad.value(trace.scoreAllFactors());oldTraceScore=ad.value(oldTrace.scoreAllChoices())+this.factorCoeff*ad.value(oldTrace.scoreAllFactors())}var p=Math.exp(newTraceScore-oldTraceScore+bw-fw);assert(!isNaN(p));return Math.min(1,p)};MHKernel.prototype.transitionProb=function(fromTrace,toTrace,proposalDist){var regenChoice=toTrace.choiceAtIndex(this.regenFrom);var score=ad.value(proposalDist.score(regenChoice.val));score+=numeric._sum(toTrace.choices.slice(this.regenFrom+1).map(function(choice){return this.reused.hasOwnProperty(choice.address)?0:ad.value(choice.dist.score(choice.val))},this));score-=Math.log(this.numRegenChoices(fromTrace));assert(!isNaN(score));return score};return makeMHKernel}},{"../ad":888,"../math/numeric":959,"../util":987,"./driftKernel":939,assert:3,lodash:164}],951:[function(require,module,exports){"use strict";var _=require("lodash");var nodeutil=require("util");var present=require("present");var util=require("../util");var optMethods=require("adnn/opt");var paramStruct=require("../params/struct");var params=require("../params/params");var weightDecay=require("./weightDecay");var fs=require("fs");var nodeUtil=require("util");module.exports=function(env){var applyd=require("../headerUtils")(env).applyd;var estimators={ELBO:require("./elbo")(env),EUBO:require("./eubo")(env),dream:require("./dream/estimator")(env)};function Optimize(s,k,a,fnOrOptions,maybeOptions){var wpplFn,options;if(_.isFunction(fnOrOptions)){wpplFn=fnOrOptions;options=maybeOptions}else if(util.isObject(fnOrOptions)){wpplFn=fnOrOptions.model;options=_.omit(fnOrOptions,"model");if(!_.isFunction(wpplFn)&&_.isFunction(maybeOptions)){throw new Error("Optimize: expected model to be included in options.")}}else{throw new Error("Optimize: expected first argument to be an options object or a function.")}if(!_.isFunction(wpplFn)){throw new Error("Optimize: a model was not specified.")}options=util.mergeDefaults(options,{optMethod:"adam",estimator:"ELBO",steps:1,clip:false,weightDecay:0,showGradNorm:false,checkGradients:true,verbose:false,onStep:function(s,k,a){return k(s)},onFinish:function(s,k,a){return k(s)},logProgress:false,logProgressFilename:"optimizeProgress.csv",logProgressThrottle:200},"Optimize");var state={};var estimator=util.getValAndOpts(options.estimator,function(name,opts){if(!_.has(estimators,name)){throw new Error("Optimize: "+name+" is not a valid estimator. "+"The following estimators are available: "+_.keys(estimators).join(", ")+".")}return _.partial(estimators[name](opts),wpplFn,s,a,state)});var optimizer=util.getValAndOpts(options.optMethod,function(name,opts){name=name==="gd"?"sgd":name;return optMethods[name](opts)});var showProgress=_.throttle(function(i,objective){console.log("Iteration "+i+": "+objective)},200,{trailing:false});var history=[];var logFile,logProgress;if(options.logProgress){logFile=fs.openSync(options.logProgressFilename,"w");fs.writeSync(logFile,"index,iter,time,objective\n");var ncalls=0;var starttime=present();logProgress=_.throttle(function(i,objective){var t=(present()-starttime)/1e3;fs.writeSync(logFile,nodeUtil.format("%d,%d,%d,%d\n",ncalls,i,t,objective));ncalls++},options.logProgressThrottle,{trailing:false})}var decayWeights=weightDecay.parseOptions(options.weightDecay,options.verbose);var onStep=function(i,objective,cont){return applyd(s,function(s,exitFlag){return exitFlag?finish():cont()},a,options.onStep,[i,objective],"callback")};var finish=function(){return options.onFinish(s,function(s){if(options.logProgress){fs.closeSync(logFile)}return k(s)},a,{history:history})};return util.cpsLoop(options.steps,function(i,next){return estimator(i,function(gradObj,objective){if(options.checkGradients){checkGradients(gradObj)}if(options.verbose){showProgress(i,objective)}if(options.logProgress){logProgress(i,objective)}history.push(objective);return params.sync(function(paramsObj){decayWeights(gradObj,paramsObj);if(options.clip||options.showGradNorm){var norm=paramStruct.norm(gradObj);if(options.showGradNorm){console.log("L2 norm of gradient: "+norm)}if(options.clip){paramStruct.clip(gradObj,options.clip,norm)}}optimizer(gradObj,paramsObj,i);return params.set(paramsObj,function(){return onStep(i,objective,next)})},{incremental:true})})},finish)}function allZero(tensor){return!tensor.anyreduce()}function allFinite(tensor){return _.every(tensor.data,isFinite)}function checkGradients(gradObj){_.each(gradObj,function(grad,name){if(allZero(grad)){logGradWarning(name,"zero")}if(!allFinite(grad)){logGradWarning(name,"not finite")}})}function logGradWarning(name,problem){util.warn("Gradient for param "+name+" is "+problem+".",true)}return{Optimize:Optimize}}},{"../headerUtils":931,"../params/params":964,"../params/struct":969,"../util":987,"./dream/estimator":936,"./elbo":940,"./eubo":943,"./weightDecay":955,"adnn/opt":46,fs:1,lodash:164,present:167,util:28}],952:[function(require,module,exports){"use strict";var _=require("lodash");var discrete=require("../dists/discrete");var util=require("../util");var CountAggregator=require("../aggregation/CountAggregator");module.exports=function(env){function last(xs){return xs[xs.length-1]}function PMCMC(s,cc,a,wpplFn,options){this.oldCoroutine=env.coroutine;env.coroutine=this;this.k=cc;this.oldStore=s;this.particleIndex=0;this.retainedParticle=undefined;this.numSweeps=options.sweeps;this.sweep=0;this.wpplFn=wpplFn;this.address=a;this.numParticles=options.particles;this.resetParticles();this.hist=new CountAggregator}PMCMC.prototype.run=function(){return this.activeContinuationWithStore()};PMCMC.prototype.resetParticles=function(){var that=this;this.particles=[];var exitK=function(s){return that.wpplFn(s,env.exit,that.address)};for(var i=0;i<this.numParticles;i++){var particle={continuations:[exitK],stores:[that.oldStore],weights:[0],value:undefined};this.particles.push(_.clone(particle))}};PMCMC.prototype.activeParticle=function(){return this.particles[this.particleIndex]};PMCMC.prototype.activeContinuation=function(){return last(this.activeParticle().continuations)};PMCMC.prototype.activeContinuationWithStore=function(){var k=last(this.activeParticle().continuations);var s=_.clone(last(this.activeParticle().stores));return function(){return k(s)}};PMCMC.prototype.allParticlesAdvanced=function(){return this.particleIndex+1===this.particles.length};PMCMC.prototype.sample=function(s,cc,a,dist){return cc(s,dist.sample())};PMCMC.prototype.particleAtStep=function(particle,step){return{continuations:particle.continuations.slice(0,step+1),stores:particle.stores.slice(0,step+1),weights:particle.weights.slice(0,step+1),value:particle.value}};PMCMC.prototype.updateActiveParticle=function(weight,continuation,store){var particle=this.activeParticle();particle.continuations=particle.continuations.concat([continuation]);particle.stores=particle.stores.concat([_.clone(store)]);particle.weights=particle.weights.concat([weight])};PMCMC.prototype.copyParticle=function(particle){return{continuations:particle.continuations.slice(0),weights:particle.weights.slice(0),value:particle.value,stores:particle.stores.map(_.clone)}};PMCMC.prototype.resampleParticles=function(particles){var weights=particles.map(function(particle){return Math.exp(last(particle.weights))});var j;var newParticles=[];for(var i=0;i<particles.length;i++){j=discrete.sample(weights);newParticles.push(this.copyParticle(particles[j]))}return newParticles};PMCMC.prototype.factor=function(s,cc,a,score){this.updateActiveParticle(score,cc,s);if(this.allParticlesAdvanced()){if(this.sweep>0){var particles=this.particles;var step=this.particles[0].continuations.length-1;particles=particles.concat(this.particleAtStep(this.retainedParticle,step));this.particles=this.resampleParticles(particles).slice(1)}else{this.particles=this.resampleParticles(this.particles)}this.particleIndex=0}else{this.particleIndex+=1}return this.activeContinuationWithStore()};PMCMC.prototype.exit=function(s,retval){this.activeParticle().value=retval;if(!this.allParticlesAdvanced()){this.particleIndex+=1;return this.activeContinuationWithStore()}else{if(this.sweep>0){this.particles.concat(this.retainedParticle).forEach(function(particle){this.hist.add(particle.value)}.bind(this))}this.retainedParticle=this.particles[0];if(this.sweep<this.numSweeps){this.sweep+=1;this.particleIndex=0;this.resetParticles();return this.activeContinuationWithStore()}else{env.coroutine=this.oldCoroutine;return this.k(this.oldStore,this.hist.toDist())}}};PMCMC.prototype.incrementalize=env.defaultCoroutine.incrementalize;function pmc(s,cc,a,wpplFn,options){return new PMCMC(s,cc,a,wpplFn,options).run()}return{PMCMC:pmc}}},{"../aggregation/CountAggregator":889,"../dists/discrete":901,"../util":987,lodash:164}],953:[function(require,module,exports){"use strict";var _=require("lodash");var util=require("../util");var CountAggregator=require("../aggregation/CountAggregator");var cb=require("./callbacks");module.exports=function(env){function Rejection(s,k,a,wpplFn,options){options=util.mergeDefaults(options,{samples:100,maxScore:0,incremental:false,throwOnError:true,minSampleRate:0,callbacks:[]},"Rejection");this.throwOnError=options.throwOnError;this.minSampleRate=options.minSampleRate;this.numSamplesTotal=options.samples;this.startTime=Date.now();this.numSamples=options.samples;this.maxScore=options.maxScore;this.incremental=options.incremental;this.callbacks=cb.prepare(options.callbacks);this.s=s;this.k=k;this.a=a;this.wpplFn=wpplFn;this.hist=new CountAggregator;this.oldCoroutine=env.coroutine;env.coroutine=this;if(this.incremental&&this.maxScore>0){util.warn("Rejection: Reduce maxScore to zero for better performance.")}}Rejection.prototype.run=function(){if(!_.isNumber(this.numSamples)||this.numSamples<=0){return this.error('"samples" should be a positive integer.')}var elapseSec=(Date.now()-this.startTime)/1e3;if(this.minSampleRate>0&&elapseSec>2){var sampleRate=(this.numSamplesTotal-this.numSamples)/elapseSec;if(sampleRate<this.minSampleRate){return this.error(sampleRate.toFixed(2)+" samples/sec is below threshold.")}this.minSampleRate=0}this.scoreSoFar=0;this.threshold=this.maxScore+Math.log(util.random());return this.wpplFn(_.clone(this.s),env.exit,this.a)};Rejection.prototype.error=function(errType){var err=new Error(errType);if(this.throwOnError){throw err}else{return this.k(this.s,err)}};Rejection.prototype.sample=function(s,k,a,dist){return k(s,dist.sample())};Rejection.prototype.factor=function(s,k,a,score){if(this.incremental){if(score>0){return this.error("Score must be <= 0 for incremental rejection.")}}this.scoreSoFar+=score;if(this.incremental&&this.scoreSoFar<=this.threshold||score===-Infinity){return this.run()}else{return k(s)}};Rejection.prototype.exit=function(s,retval){if(this.scoreSoFar>this.maxScore){return this.error("Score exceeded upper bound.")}if(this.scoreSoFar>this.threshold){this.hist.add(retval);this.callbacks.sample({value:retval});this.numSamples-=1}if(this.numSamples===0){env.coroutine=this.oldCoroutine;this.callbacks.finish();return this.k(this.s,this.hist.toDist())}else{return this.run()}};Rejection.prototype.incrementalize=env.defaultCoroutine.incrementalize;function rej(s,k,a,wpplFn,options){return new Rejection(s,k,a,wpplFn,options).run()}return{Rejection:rej}}},{"../aggregation/CountAggregator":889,"../util":987,"./callbacks":934,lodash:164}],954:[function(require,module,exports){"use strict";var _=require("lodash");var util=require("../util");var numeric=require("../math/numeric");var discrete=require("../dists/discrete");var Trace=require("../trace");var assert=require("assert");var CountAggregator=require("../aggregation/CountAggregator");var ad=require("../ad");var guide=require("../guide");var cb=require("./callbacks");module.exports=function(env){var kernels=require("./kernels")(env);var validImportanceOptVals=["default","ignoreGuide","autoGuide"];function SMC(s,k,a,wpplFn,options){var options=util.mergeDefaults(options,{particles:100,rejuvSteps:0,rejuvKernel:"MH",finalRejuv:true,saveTraces:false,importance:"default",onlyMAP:false,throwOnError:true,callbacks:[]},"SMC");if(!_.includes(validImportanceOptVals,options.importance)){var msg=options.importance+" is not a valid importance option. "+"Valid options are: "+validImportanceOptVals;throw new Error(msg)}this.throwOnError=options.throwOnError;this.rejuvKernel=kernels.parseOptions(options.rejuvKernel);this.rejuvSteps=options.rejuvSteps;this.performRejuv=this.rejuvSteps>0;this.adRequired=this.performRejuv&&this.rejuvKernel.adRequired;this.performFinalRejuv=this.performRejuv&&options.finalRejuv;this.numParticles=options.particles;this.debug=options.debug;this.saveTraces=options.saveTraces;this.importanceOpt=options.importance;this.guideRequired=options.importance!=="ignoreGuide";this.isParamBase=true;this.onlyMAP=options.onlyMAP;this.callbacks=cb.prepare(options.callbacks);this.particles=[];this.completeParticles=[];this.particleIndex=0;this.step=0;for(var i=0;i<this.numParticles;i++){var trace=new Trace(wpplFn,s,env.exit,a);this.particles.push(new Particle(trace))}this.s=s;this.k=k;this.a=a;this.oldCoroutine=env.coroutine;env.coroutine=this}SMC.prototype.run=function(){return this.runCurrentParticle()};SMC.prototype.error=function(errType){var err=new Error(errType);if(this.throwOnError){throw err}else{return this.k(this.s,err)}};SMC.prototype.sample=function(s,k,a,dist,options){options=options||{};var thunk=this.importanceOpt==="ignoreGuide"?undefined:options.guide;var noAutoGuide=this.importanceOpt!=="autoGuide"||options.noAutoGuide;return guide.getDist(thunk,noAutoGuide,dist,env,s,a,function(s,importanceDist){var _val,choiceScore,importanceScore;if(importanceDist){_val=importanceDist.sample();choiceScore=dist.score(_val);importanceScore=importanceDist.score(_val)}else{_val=dist.sample();choiceScore=importanceScore=dist.score(_val)}var particle=this.currentParticle();particle.logWeight+=ad.value(choiceScore)-ad.value(importanceScore);var val=this.adRequired&&dist.isContinuous?ad.lift(_val):_val;if(this.performRejuv||this.saveTraces){particle.trace.addChoice(dist,val,a,s,k,options)}else{particle.trace.score=ad.scalar.add(particle.trace.score,choiceScore)}return k(s,val)}.bind(this))};SMC.prototype.factor=function(s,k,a,score){var particle=this.currentParticle();particle.trace.numFactors+=1;particle.trace.saveContinuation(s,k);particle.trace.score=ad.scalar.add(particle.trace.score,score);particle.logWeight+=ad.value(score);this.debugLog("("+this.particleIndex+") Factor: "+a);return this.sync()};SMC.prototype.atLastParticle=function(){return this.particleIndex===this.particles.length-1};SMC.prototype.currentParticle=function(){return this.particles[this.particleIndex]};SMC.prototype.runCurrentParticle=function(){return this.currentParticle().trace.continue()};SMC.prototype.advanceParticleIndex=function(){this.particleIndex+=1};SMC.prototype.allParticles=function(){return this.completeParticles.concat(this.particles)};function resampleParticles(particles,cont){if(particles.length===1){return cont(particles)}var m=particles.length;var logW=numeric._logsumexp(_.map(particles,"logWeight"));var logAvgW=logW-Math.log(m);if(logAvgW===-Infinity){return env.coroutine.error("All particles have zero weight.")}var retainedParticles=[];var newWeights=[];_.each(particles,function(particle){var w=Math.exp(particle.logWeight-logAvgW);var nRetained=Math.floor(w);newWeights.push(w-nRetained);for(var i=0;i<nRetained;i++){retainedParticles.push(particle.copy())}});var numNewParticles=m-retainedParticles.length;var newParticles=[];var j;for(var i=0;i<numNewParticles;i++){j=discrete.sample(newWeights);newParticles.push(particles[j].copy())}var allParticles=newParticles.concat(retainedParticles);_.each(allParticles,function(p){p.logWeight=logAvgW});return cont(allParticles)}SMC.prototype.rejuvenateParticles=function(particles,cont){if(!this.performRejuv){return cont(particles)}assert(!this.particlesAreWeighted(particles),"Cannot rejuvenate weighted particles.");return util.cpsForEach(function(p,i,ps,next){return this.rejuvenateParticle(next,p)}.bind(this),function(){return cont(particles)},particles)};SMC.prototype.rejuvenateParticle=function(cont,particle){var kernelOptions={proposalBoundary:particle.proposalBoundary};if(this.performRejuv){kernelOptions.exitFactor=this.step}var kernel=_.partial(this.rejuvKernel,_,_,kernelOptions);var chain=kernels.repeat(this.rejuvSteps,kernel);return chain(function(trace){particle.trace=trace;return cont()},particle.trace)};SMC.prototype.particlesAreWeighted=function(particles){var lw=_.head(particles).logWeight;return _.some(particles,function(p){return p.logWeight!==lw})};SMC.prototype.particlesAreInSync=function(particles){return _.every(particles,function(p){var trace=p.trace;return trace.isComplete()&&trace.numFactors<this.step||!trace.isComplete()&&trace.numFactors===this.step}.bind(this))};SMC.prototype.sync=function(){if(!this.atLastParticle()){this.advanceParticleIndex();return this.runCurrentParticle()}else{this.step+=1;this.debugLog("***** sync :: step = "+this.step+" *****");var allParticles=this.allParticles();assert(this.particlesAreInSync(allParticles));return resampleParticles(allParticles,function(resampledParticles){assert.strictEqual(resampledParticles.length,env.coroutine.numParticles);var numActiveParticles=_.reduce(resampledParticles,function(acc,p){return acc+(p.trace.isComplete()?0:1)},0);if(numActiveParticles>0){this.particleIndex=0;return this.rejuvenateParticles(resampledParticles,function(rejuvenatedParticles){assert(this.particlesAreInSync(rejuvenatedParticles));var p=_.partition(rejuvenatedParticles,function(p){return p.trace.isComplete()});this.completeParticles=p[0];this.particles=p[1];this.debugLog(p[1].length+" active particles after resample/rejuv.\n");if(this.particles.length>0){return this.runCurrentParticle()}else{return this.finish()}}.bind(this))}else{this.particles=[];this.completeParticles=resampledParticles;return this.finish()}}.bind(this))}};SMC.prototype.debugLog=function(s){if(this.debug){console.log(s)}};SMC.prototype.exit=function(s,val){this.currentParticle().trace.complete(val);this.debugLog("("+this.particleIndex+") Exit | Value: "+val);return this.sync()};SMC.prototype.finish=function(s,val){assert.strictEqual(this.completeParticles.length,this.numParticles);var hist=new CountAggregator(this.onlyMAP);var traces=[];var aggregate=function(trace){var value=this.adRequired?ad.valueRec(trace.value):trace.value;var score=this.adRequired?ad.valueRec(trace.score):trace.score;hist.add(value,score);this.callbacks.sample({value:value,score:score});if(this.saveTraces){traces.push(trace)}}.bind(this);var logAvgW=_.head(this.completeParticles).logWeight;return util.cpsForEach(function(particle,i,ps,k){if(this.performFinalRejuv){var chain=kernels.repeat(this.rejuvSteps,kernels.sequence(this.rejuvKernel,kernels.tap(aggregate)));return chain(k,particle.trace)}else{aggregate(particle.trace);return k()}}.bind(this),function(){this.callbacks.finish();var dist=hist.toDist();dist.normalizationConstant=logAvgW;if(this.saveTraces){dist.traces=traces}env.coroutine=this.oldCoroutine;return this.k(this.s,dist)}.bind(this),this.completeParticles)};SMC.prototype.incrementalize=env.defaultCoroutine.incrementalize;function setProposalBoundary(s,k,a){if(env.coroutine.currentParticle){var particle=env.coroutine.currentParticle();particle.proposalBoundary=particle.trace.length}return k(s)}var Particle=function(trace){this.trace=trace;this.logWeight=0;this.proposalBoundary=0};Particle.prototype.copy=function(){var p=new Particle(this.trace.copy());p.logWeight=this.logWeight;p.proposalBoundary=this.proposalBoundary;return p};return{SMC:function(s,k,a,wpplFn,options){return new SMC(s,k,a,wpplFn,options).run()},setProposalBoundary:setProposalBoundary}}},{"../ad":888,"../aggregation/CountAggregator":889,"../dists/discrete":901,"../guide":928,"../math/numeric":959,"../trace":973,"../util":987,"./callbacks":934,"./kernels":948,assert:3,lodash:164}],955:[function(require,module,exports){"use strict";var assert=require("assert");var _=require("lodash");var util=require("../util");var paramStruct=require("../params/struct");function parseOptions(opts,verbose){if(_.isNumber(opts)){return parseOptions({l2:{strength:opts}},verbose)}else{return util.getValAndOpts(opts,function(penalty,opts){if(!_.has(penalties,penalty)){throw new Error("Optimize: Unknown weight decay penalty "+penalty+". Choose from "+_.keys(penalties)+".")}return penalties[penalty](opts,verbose)})}}var penalties={l2:function(opts,verbose){opts=util.mergeDefaults(opts,{strength:1});var strength=opts.strength;if(!_.isNumber(strength)||strength<0){throw new Error("Optimize: L2 strength should be a non-negative number.")}else if(strength===0){return _.noop}else{if(verbose){console.log("Optimize will apply L2 weight decay with strength="+strength+".")}return function(gradObj,paramsObj){var gradPenalty=paramStruct.select(paramsObj,gradObj);assert.strictEqual(_.size(gradObj),_.size(gradPenalty),"Expected grads to be the same size.");paramStruct.mulEq(gradPenalty,strength);paramStruct.addEq(gradObj,gradPenalty)}}}};module.exports={parseOptions:parseOptions}},{"../params/struct":969,"../util":987,assert:3,lodash:164}],956:[function(require,module,exports){(function(global){(function(){"use strict";var types=require("ast-types");var build=types.builders;var esprima=require("esprima");var escodegen=require("escodegen");var assert=require("assert");var _=require("lodash");var ad=require("./transforms/ad").ad;var cps=require("./transforms/cps").cps;var addFilename=require("./transforms/addFilename").addFilename;var optimize=require("./transforms/optimize").optimize;var naming=require("./transforms/naming").naming;var store=require("./transforms/store").store;var stack=require("./transforms/stack");var varargs=require("./transforms/varargs").varargs;var trampoline=require("./transforms/trampoline").trampoline;var freevars=require("./transforms/freevars").freevars;var caching=require("./transforms/caching");var thunkify=require("./syntax").thunkify;var util=require("./util");var errors=require("./errors/errors");var params=require("./params/params");var env={};function requireHeader(path){requireHeaderWrapper(require(path))}function requireHeaderWrapper(wrapper){makePropertiesGlobal(wrapper(env))}function makePropertiesGlobal(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){global[prop]=obj[prop]}}}requireHeaderWrapper(require("./header"));function concatPrograms(programs){assert.ok(_.isArray(programs));var concat=function(p0,p1){return build.program(p0.body.concat(p1.body))};var emptyProgram=esprima.parse("");return programs.reduce(concat,emptyProgram)}function parse(code,filename){var ast=esprima.parse(code,{loc:true});return addFilename(ast,filename)}function parseAll(bundles){return bundles.map(function(bundle){var ast=parse(bundle.code,bundle.filename);return _.assign({ast:ast},bundle)})}function headerPackage(){var dists="// This file was automatically generated by 'scripts/distHeader'.\n'no caching';\nvar Bernoulli = dists.makeBernoulli;\nvar bernoulli = function(arg0) {\n  var params = util.isObject(arg0) ? arg0 : {p: arg0};\n  return sample(Bernoulli(params));\n};\nvar Beta = dists.makeBeta;\nvar beta = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {a: arg0, b: arg1};\n  return sample(Beta(params));\n};\nvar Binomial = dists.makeBinomial;\nvar binomial = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {p: arg0, n: arg1};\n  return sample(Binomial(params));\n};\nvar Categorical = dists.makeCategorical;\nvar categorical = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {ps: arg0, vs: arg1};\n  return sample(Categorical(params));\n};\nvar Cauchy = dists.makeCauchy;\nvar cauchy = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {location: arg0, scale: arg1};\n  return sample(Cauchy(params));\n};\nvar Delta = dists.makeDelta;\nvar delta = function(arg0) {\n  var params = util.isObject(arg0) ? arg0 : {v: arg0};\n  return sample(Delta(params));\n};\nvar DiagCovGaussian = dists.makeDiagCovGaussian;\nvar diagCovGaussian = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {mu: arg0, sigma: arg1};\n  return sample(DiagCovGaussian(params));\n};\nvar Dirichlet = dists.makeDirichlet;\nvar dirichlet = function(arg0) {\n  var params = util.isObject(arg0) ? arg0 : {alpha: arg0};\n  return sample(Dirichlet(params));\n};\nvar Discrete = dists.makeDiscrete;\nvar discrete = function(arg0) {\n  var params = util.isObject(arg0) ? arg0 : {ps: arg0};\n  return sample(Discrete(params));\n};\nvar Exponential = dists.makeExponential;\nvar exponential = function(arg0) {\n  var params = util.isObject(arg0) ? arg0 : {a: arg0};\n  return sample(Exponential(params));\n};\nvar Gamma = dists.makeGamma;\nvar gamma = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {shape: arg0, scale: arg1};\n  return sample(Gamma(params));\n};\nvar Gaussian = dists.makeGaussian;\nvar gaussian = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {mu: arg0, sigma: arg1};\n  return sample(Gaussian(params));\n};\nvar ImproperUniform = dists.makeImproperUniform;\nvar IspNormal = dists.makeIspNormal;\nvar ispNormal = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {mu: arg0, sigma: arg1};\n  return sample(IspNormal(params));\n};\nvar KDE = dists.makeKDE;\nvar Laplace = dists.makeLaplace;\nvar laplace = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {location: arg0, scale: arg1};\n  return sample(Laplace(params));\n};\nvar LogNormal = dists.makeLogNormal;\nvar logNormal = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {mu: arg0, sigma: arg1};\n  return sample(LogNormal(params));\n};\nvar LogisticNormal = dists.makeLogisticNormal;\nvar logisticNormal = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {mu: arg0, sigma: arg1};\n  return sample(LogisticNormal(params));\n};\nvar LogitNormal = dists.makeLogitNormal;\nvar logitNormal = function(arg0, arg1, arg2, arg3) {\n  var params = util.isObject(arg0) ? arg0 : {mu: arg0, sigma: arg1, a: arg2, b: arg3};\n  return sample(LogitNormal(params));\n};\nvar Marginal = dists.makeMarginal;\nvar Mixture = dists.makeMixture;\nvar mixture = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {dists: arg0, ps: arg1};\n  return sample(Mixture(params));\n};\nvar Multinomial = dists.makeMultinomial;\nvar multinomial = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {ps: arg0, n: arg1};\n  return sample(Multinomial(params));\n};\nvar MultivariateBernoulli = dists.makeMultivariateBernoulli;\nvar multivariateBernoulli = function(arg0) {\n  var params = util.isObject(arg0) ? arg0 : {ps: arg0};\n  return sample(MultivariateBernoulli(params));\n};\nvar MultivariateGaussian = dists.makeMultivariateGaussian;\nvar multivariateGaussian = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {mu: arg0, cov: arg1};\n  return sample(MultivariateGaussian(params));\n};\nvar Poisson = dists.makePoisson;\nvar poisson = function(arg0) {\n  var params = util.isObject(arg0) ? arg0 : {mu: arg0};\n  return sample(Poisson(params));\n};\nvar RandomInteger = dists.makeRandomInteger;\nvar randomInteger = function(arg0) {\n  var params = util.isObject(arg0) ? arg0 : {n: arg0};\n  return sample(RandomInteger(params));\n};\nvar SampleBasedMarginal = dists.makeSampleBasedMarginal;\nvar StudentT = dists.makeStudentT;\nvar studentT = function(arg0, arg1, arg2) {\n  var params = util.isObject(arg0) ? arg0 : {df: arg0, location: arg1, scale: arg2};\n  return sample(StudentT(params));\n};\nvar TensorGaussian = dists.makeTensorGaussian;\nvar tensorGaussian = function(arg0, arg1, arg2) {\n  var params = util.isObject(arg0) ? arg0 : {mu: arg0, sigma: arg1, dims: arg2};\n  return sample(TensorGaussian(params));\n};\nvar TensorLaplace = dists.makeTensorLaplace;\nvar tensorLaplace = function(arg0, arg1, arg2) {\n  var params = util.isObject(arg0) ? arg0 : {location: arg0, scale: arg1, dims: arg2};\n  return sample(TensorLaplace(params));\n};\nvar Uniform = dists.makeUniform;\nvar uniform = function(arg0, arg1) {\n  var params = util.isObject(arg0) ? arg0 : {a: arg0, b: arg1};\n  return sample(Uniform(params));\n};";var header="'no caching';\n\n// Other distribution helpers\n\nvar flip = function(p) {\n  var params = {p: (p !== undefined) ? p : .5};\n  return sample(Bernoulli(params));\n};\n\nvar uniformDraw = function(arg) {\n  var vs = util.isObject(arg) ? arg.vs : arg;\n  if (vs.length == 0) {\n    return undefined;\n  } else {\n    return vs[sample(RandomInteger({n: vs.length}))];\n  }\n};\n\nvar serializeDist = function(d) {\n  return dists.serialize(d);\n};\n\nvar deserializeDist = function(JSONString) {\n  return dists.deserialize(JSONString);\n};\n\n// Drift kernel helpers\n\nvar gaussianDrift = function(params) {\n  return sample(Gaussian(_.omit(params, 'width')), {\n    driftKernel: function(prevVal) {\n      var width = _.has(params, 'width') ? params.width : params.sigma * 0.7;\n      return Gaussian({mu: prevVal, sigma: width});\n    }\n  });\n};\n\nvar dirichletDrift = function(params) {\n  return sample(Dirichlet(_.omit(params, 'concentration')), {\n    driftKernel: function(prevVal) {\n      var c = _.has(params, 'concentration') ? params.concentration : 10;\n      var alpha = T.mul(prevVal, c);\n      return Dirichlet({alpha: alpha});\n    }\n  });\n};\n\nvar uniformDrift = function(params) {\n  return sample(Uniform(_.omit(params, 'width')), {\n    driftKernel: function(prevVal) {\n      var width = _.has(params, 'width') ? params.width : 0.1;\n      var a = Math.max(params.a, prevVal - width);\n      var b = Math.min(params.b, prevVal + width);\n      return Uniform({a: a, b: b});\n    }\n  });\n};\n\n// XRPs\n\nvar makeBetaBernoulli = function(pseudocounts) {\n  globalStore.BBindex = 1 + (globalStore.BBindex || 0);\n  var bbname = 'BB' + globalStore.BBindex;\n  globalStore[bbname] = pseudocounts;\n  return function() {\n    var pc = globalStore[bbname];  // get current sufficient stats\n    var val = sample(Bernoulli({p: pc[0] / (pc[0] + pc[1])}));  // sample from predictive.\n    globalStore[bbname] = [pc[0] + val, pc[1] + !val];  // update sufficient stats\n    return val;\n  };\n};\n\nvar makeDirichletDiscrete = function(pseudocounts) {\n  var addCount = function(a, i, j) {\n    var j = j || 0;\n    if (a.length === 0) {\n      return [];\n    } else {\n      return [a[0] + (i === j)].concat(addCount(a.slice(1), i, j + 1));\n    }\n  };\n  globalStore.DDindex = 1 + (globalStore.DDindex || 0);\n  var ddname = 'DD' + globalStore.DDindex;\n  globalStore[ddname] = pseudocounts;\n  return function() {\n    var pc = globalStore[ddname];  // get current sufficient stats\n    var val = sample(Discrete({ps: pc}));  // sample from predictive. (doesn't need to be normalized.)\n    globalStore[ddname] = addCount(pc, val); // update sufficient stats\n    return val;\n  };\n};\n\nvar mem = function(f) {\n  globalStore.memIndex = 1 + (globalStore.memIndex || 0);\n  var key = 'mem' + globalStore.memIndex;\n  return function() {\n    var stringedArgs = key + util.serialize(arguments);\n    if (_.has(globalStore, stringedArgs)) {\n      return globalStore[stringedArgs];\n    } else {\n      var val = apply(f, arguments);\n      globalStore[stringedArgs] = val;\n      return val;\n    }\n  };\n};\n\nvar isEven = function(v) {\n  return v % 2 === 0;\n};\nvar isOdd = function(v) {\n  return v % 2 != 0;\n};\n\nvar idF = function(x) {\n  return x;\n};\nvar constF = function(f) {\n  return function() {\n    return f;\n  };\n};\nvar falseF = function() {\n  return false;\n};\nvar trueF = function() {\n  return true;\n};\n\n// Probability computations & calculations\n\nvar MAP = function(dist) {\n  return dist.MAP();\n};\n\nvar expectation = function(dist, func) {\n  var f = func || idF;\n  var supp = dist.support();\n  return reduce(function(s, acc) {\n    return acc + Math.exp(dist.score(s)) * f(s);\n  }, 0, supp);\n};\n\nvar entropy = function(dist) {\n  return dist.entropy();\n};\n\n// Data structures & higher-order functions\n\nvar append = function(a, b) {\n  return a.concat(b);\n};\nvar cons = function(a, b) {\n  return [a].concat(b);\n};\nvar snoc = function(a, b) {\n  return a.concat([b]);\n};\n\nvar first = function(xs) {\n  return xs[0];\n};\nvar second = function(xs) {\n  return xs[1];\n};\nvar third = function(xs) {\n  return xs[2];\n};\nvar fourth = function(xs) {\n  return xs[3];\n};\nvar secondLast = function(xs) {\n  return xs[xs.length - 2];\n};\nvar last = function(xs) {\n  return xs[xs.length - 1];\n};\n\nvar most = function(xs) {\n  return xs.slice(0, xs.length - 1);\n}\n\nvar rest = function(xs) {\n  return xs.slice(1);\n};\n\nvar map_helper = function(i, j, f) {\n  var n = j - i + 1;\n  if (n == 0) {\n    return []\n  } else if (n == 1) {\n    return [f(i)];\n  } else {\n    var n1 = Math.ceil(n / 2);\n    return map_helper(i, i + n1 - 1, f).concat(map_helper(i + n1, j, f));\n  }\n}\n\n// recursively split input array so that we only call\n// concat a logarithmic number of times\nvar map = function(fn, l) {\n  return map_helper(0, l.length - 1, function(i) { return fn(l[i]) })\n}\n\n// assumes that length l1 == length l2\nvar map2 = function(fn, l1, l2) {\n  return map_helper(0, l1.length - 1, function(i) { return fn(l1[i], l2[i]) })\n}\n\n// sugar for map(f, [0,1,...,n-1])\nvar mapN = function(fn, n) {\n  return map_helper(0, n - 1, function(i) { return fn(i) })\n}\n\nvar mapIndexed = function(fn, l) {\n  return map_helper(0, l.length - 1, function(i) { return fn(i, l[i]) })\n}\n\nvar mapObject = function(fn, obj) {\n  return _.fromPairs(\n      map(\n      function(kv) {\n        return [kv[0], fn(kv[0], kv[1])]\n      },\n      _.toPairs(obj))\n  );\n};\n\nvar extend = function() {\n  return _.assign.apply(_, [{}].concat(arguments));\n}\n\nvar reduce = function(fn, init, ar) {\n  var n = ar.length;\n  var helper = function(i) {\n    if (i === n) {\n      return init\n    } else {\n      return fn(ar[i], helper(i + 1))\n    }\n  }\n\n  return helper(0);\n};\n\nvar sum = function(l) {\n  return reduce(function(a, b) { return a + b; }, 0, l);\n};\nvar product = function(l) {\n  return reduce(function(a, b) { return a * b; }, 1, l);\n};\n\nvar listMean = function(l) {\n  return sum(l) / l.length;\n};\nvar listVar = function(l, mu) {\n  var mu = mu === undefined ? listMean(l) : mu;\n  return reduce(function(a, acc) {\n    return acc + (a - mu) * (a - mu);\n  }, 0, l) / l.length;\n\n};\nvar listStdev = function(l, mu) {\n  return Math.sqrt(listVar(l, mu));\n};\n\nvar normalize = function(xs) {\n  var Z = sum(xs);\n  return map(function(x) {\n    return x / Z;\n  }, xs);\n};\n\nvar all = function(p, l) {\n  return reduce(function(x, acc) {\n    return acc && p(x);\n  }, true, l);\n};\n\nvar any = function(p, l) {\n  return reduce(function(x, acc) {\n    return acc || p(x);\n  }, false, l);\n};\n\nvar zip = function(xs, ys) {\n  return map2(function(x, y) { return [x, y]},\n              xs,\n              ys)\n};\n\nvar filter = function(fn, ar) {\n  var helper = function(i, j) {\n    var n = j - i + 1;\n    if (n == 0) {\n      return [];\n    } else if (n == 1) {\n      return (fn(ar[i]) ? [ar[i]] : []);\n    } else {\n      var n1 = Math.ceil(n / 2);\n      return helper(i, i + n1 - 1).concat(helper(i + n1, j));\n    }\n  }\n\n  return helper(0, ar.length - 1)\n};\n\nvar find = function(f, ar) {\n  var n = ar.length;\n  var helper = function(i) {\n    if (i === n) {\n      return undefined;\n    } else if (f(ar[i])) {\n      return ar[i];\n    } else {\n      return helper(i + 1);\n    }\n  }\n  return helper(0);\n};\n\nvar remove = function(a, ar) {\n  return filter(function(e) {\n    return a != e;\n  }, ar);\n};\n\n\nvar minWith = function(f, ar) {\n  var fn = function(_ar, _best) {\n    if (_ar.length === 0) {\n      return _best;\n    } else if (_ar[0][1] < _best[1]) {\n      return fn(_ar.slice(1), _ar[0]);\n    } else {\n      return fn(_ar.slice(1), _best);\n    }\n  };\n  return fn(zip(ar, map(f, ar)), [Infinity, Infinity]);\n};\n\nvar maxWith = function(f, ar) {\n  var fn = function(_ar, _best) {\n    if (_ar.length === 0) {\n      return _best;\n    } else if (_ar[0][1] > _best[1]) {\n      return fn(_ar.slice(1), _ar[0]);\n    } else {\n      return fn(_ar.slice(1), _best);\n    }\n  };\n  return fn(zip(ar, map(f, ar)), [-Infinity, -Infinity]);\n};\n\n// bin array into items satisfying a predicate p and items not satifying it\nvar span = function(p, ar) {\n  var n = ar.length;\n  var helper = function(i, _ts, _fs) {\n    return (i === n ?\n            [_ts, _fs] :\n            (p(ar[i]) ?\n             helper(i + 1, snoc(_ts, ar[i]), _fs) :\n             helper(i + 1, _ts, snoc(_fs, ar[i]))));\n  };\n  return helper(0, [], []);\n};\n\n// group array items by a comparator\n// NB: there is still room for optimization here\nvar groupBy = function(cmp, ar) {\n  if (ar.length === 0) {\n    return [];\n  } else {\n    var x = ar[0];\n    var sp = span(function(b) { return cmp(x, b); }, ar.slice(1));\n    return [cons(x, sp[0])].concat(groupBy(cmp, sp[1]));\n  }\n};\n\nvar repeat = function(n, fn) {\n  var helper = function(m) {\n    if (m === 0) {\n      return [];\n    } else if (m === 1) {\n      return [fn()];\n    } else {\n      var m1 = Math.ceil(m / 2),\n          m2 = m - m1;\n      return helper(m1).concat(helper(m2));\n    }\n  }\n  if (!util.isInteger(n) || n < 0) {\n    error('Expected first argument to be a non-negative integer.');\n  }\n  if (!_.isFunction(fn)) {\n    error('Expected second argument to be a function.');\n  }\n  return helper(n);\n}\n\nvar compose = function(f, g) {\n  return function(x) {\n    return f(g(x));\n  };\n};\n\nvar everyOther = function(l) {\n  return l.length <= 1 ? l : [l[0]].concat(everyOther(l.slice(2)));\n};\n\nvar _merge = function(l1, l2, pred, key) {\n  return (l1.length === 0 ?\n          l2 :\n          (l2.length === 0 ?\n           l1 :\n           (pred(key(l1[0]), key(l2[0])) ?\n            [l1[0]].concat(_merge(l1.slice(1), l2, pred, key)) :\n            [l2[0]].concat(_merge(l1, l2.slice(1), pred, key)))));\n};\n\nvar _sort = function(l, pred, key) {\n  return ((l.length <= 1) ?\n          l :\n          _merge(_sort(everyOther(l), pred, key),\n                 _sort(everyOther(l.slice(1)), pred, key),\n                 pred,\n                 key));\n};\n\nvar lt = function(a, b) {\n  return a < b;\n};\n\nvar gt = function(a, b) {\n  return a > b;\n};\n\nvar sort = function(l, pred, key) {\n  return _sort(l, (pred || lt), (key || idF));\n};\n\nvar sortOn = function(l, key, pred) {\n  return _sort(l, (pred || lt), key);\n};\n\nvar condition = function(bool) {\n  factor(bool ? 0 : -Infinity);\n};\n\nvar error = function(msg) {\n  util.error(msg);\n};\n\nvar MH = function(wpplFn, samples, burn) {\n  return MCMC(wpplFn, { samples: samples, burn: burn });\n};\n\nvar ParticleFilter = function(wpplFn, particles) {\n  return SMC(wpplFn, { particles: particles, rejuvSteps: 0 });\n};\n\nvar ParticleFilterRejuv = function(wpplFn, particles, rejuvSteps) {\n  return SMC(wpplFn, { particles: particles, rejuvSteps: rejuvSteps });\n};\n\nvar SampleGuide = function(wpplFn, options) {\n  return ForwardSample(wpplFn, _.assign({guide: true}, _.omit(options, 'guide')));\n};\n\nvar OptimizeThenSample = function(wpplFn, options) {\n  Optimize(wpplFn, _.omit(options, 'samples', 'onlyMAP', 'callbacks'));\n  var opts = _.pick(options, 'samples', 'onlyMAP', 'callbacks', 'verbose');\n  return SampleGuide(wpplFn, opts);\n};\n\n// Make AIS available via Infer to allow AIS to be tested using\n// existing inference tests.\nvar AISforInfer = function(wpplFn, options) {\n  var dummyMarginal = Infer(constF(true));\n  // This mutates dummyMarginal.\n  _.assign(dummyMarginal, {normalizationConstant: AIS(wpplFn, options)});\n  return dummyMarginal;\n};\n\n/*\n * DefaultInfer() called when no options are specified\n * var maxEnumTreeSize: upper bound for enumeration tree size, enumeration ends when above threshold.\n * var minSampleRate: lower bound for #sample/sec, rejection ends when below threshold.\n * var samples: number of samples/particles used for default rejection/SMC/MCMC.\n * next step in the heuristics flowchart\n */\nvar DefaultInfer = function(wpplFn, options) {\n  util.mergeDefaults(options, {}, 'Infer');\n  var maxEnumTreeSize = 200000;\n  var minSampleRate = 250; //from 1 to samples\n  var samples = 1000;\n  var enumResult = Enumerate(wpplFn, {maxEnumTreeSize: maxEnumTreeSize, maxRuntimeInMS: 5000,\n    throwOnError: false, strategy: 'depthFirst'});\n  if (dists.isDist(enumResult)) {\n    return enumResult;\n  } else if (enumResult instanceof Error) {\n    console.log(enumResult.message + '..quit enumerate');\n  } else {\n    error('Invalid return value from enumerate');\n  }\n  console.log('Using \"rejection\"');\n  var rejResult = Rejection(wpplFn, {minSampleRate: minSampleRate, throwOnError: false, samples: samples});\n  if (rejResult instanceof Error) {\n    console.log(rejResult.message + '..quit rejection');\n    var hasSampleAfterFactor = CheckSampleAfterFactor(wpplFn);\n    if (hasSampleAfterFactor) {\n      console.log('Using \"SMC\" (interleaving samples and factors detected)');\n      var smcResult = SMC(wpplFn, {throwOnError: false, particles: samples});\n      if (dists.isDist(smcResult)) {\n        return smcResult;\n      } else if (smcResult instanceof Error) {\n        console.log(smcResult.message + '..quit SMC');\n      } else {\n        error('Invalid return value from SMC');\n      }\n    }\n    console.log('Using \"MCMC\"');\n    return MCMC(wpplFn, {samples: samples});\n  } else if (dists.isDist(rejResult)) {\n    return rejResult;\n  } else {\n    error('Invalid return value from rejection');\n  }\n};\n\nvar Infer = function(options, maybeFn) {\n  var wpplFn = !util.isObject(options) ? options : maybeFn || options.model;\n  if (!_.isFunction(wpplFn)) {\n    error('Infer: a model was not specified.');\n  }\n\n  // Map from camelCase options to PascalCase coroutine names. Also\n  // used to ensure the supplied method name is a valid inference\n  // routine.\n  var methodMap = {\n    SMC: SMC,\n    MCMC: MCMC,\n    PMCMC: PMCMC,\n    asyncPF: AsyncPF,\n    rejection: Rejection,\n    enumerate: Enumerate,\n    incrementalMH: IncrementalMH,\n    forward: ForwardSample,\n    optimize: OptimizeThenSample,\n    AIS: AISforInfer,\n    defaultInfer: DefaultInfer\n  };\n\n  var methodName = options.method || 'defaultInfer';\n  if (!_.has(methodMap, methodName)) {\n    var methodNames = _.keys(methodMap);\n    var msg = 'Infer: \\'' + methodName +\n        '\\' is not a valid method. The following methods are available: ' +\n        methodNames.join(', ') + '.';\n    error(msg);\n  }\n  var method = methodMap[methodName];\n  return method(wpplFn, _.omit(options, 'method', 'model'));\n};\n\n// Convenience function for creating maximum likelihood model\n// parameters.\nvar modelParam = function(options) {\n  return sample(ImproperUniform(), {guide() {\n    return Delta({v: param(options)});\n  }});\n};\n\n// Convenience functions for building tensors out of scalars\nvar Vector = function(arr) {\n  var n = arr.length;\n  var t = ad.tensor.fromScalars(arr);\n  return ad.tensor.reshape(t, [n, 1]);\n};\nvar Matrix = function(arr) {\n  var n = arr.length;\n  var m = arr[0].length;\n  var t = ad.tensor.fromScalars(_.flatten(arr));\n  return ad.tensor.reshape(t, [n, m]);\n};\nvar Tensor = function(dims, arr) {\n  var t = ad.tensor.fromScalars(arr);\n  return ad.tensor.reshape(t, dims);\n};\n\nvar dims = function(x) {\n  return ad.value(x).dims;\n};\n\nvar concat = function(arr) {\n  var t = T.concat(arr);\n  return T.reshape(t, [dims(t)[0], 1]);\n};\n\nvar idMatrix = function(n) {\n  return util.idMatrix(n);\n};\n\nvar oneHot = function(index, length) {\n  return util.oneHot(index, length);\n};\n\nvar marginalize = function(dist, project) {\n  if (_.isString(project)) {\n    return Infer({model: function() {\n      return sample(dist)[project]\n    }})\n  } else {\n    return Infer({model: function() {\n      return project(sample(dist));\n    }});\n  }\n};\n\nvar kde = function(marginal, width) {\n  if (!(dists.isDist(marginal) &&\n        marginal.meta.name === 'SampleBasedMarginal')) {\n    error('kde expects a sample based marginal as its first argument.');\n  }\n  var data = _.map(marginal.samples, 'value');\n  return KDE(width === undefined ? {data} : {data, width});\n};\n";var nn="'no caching';\n\nvar softplus = function(x) {\n  return T.log(T.add(T.exp(x), 1));\n};\n\nvar softmax = function(x) {\n  return T.softmax(x);\n};\n\nvar sigmoid = function(x) {\n  return T.sigmoid(x);\n};\n\nvar tanh = function(x) {\n  return T.tanh(x);\n};\n\nvar relu = function(x) {\n  return nn.relu.eval(x);\n};\n\nvar squishToProbSimplex = function(x) {\n  return numeric.squishToProbSimplex(x);\n};\n\nvar stack = function(arr) {\n  return reduce(compose, idF, arr);\n};\n\n// Nets created with \"linear\" default to using a weight initialization\n// based on \"Understanding the difficulty of training deep feedforward\n// neural networks\", often called Xavier initialization.\n\n// This initialization scheme may not be suitable for asymmetric\n// non-linearities.\n\nvar xavier = function(dims) {\n  if (dims.length !== 2) {\n    error('Xavier initialization is only defined for matrices.');\n  }\n  var nin = dims[0];\n  var nout = dims[1];\n  var sigma = Math.sqrt(2 / (nin + nout));\n  return tensorGaussian({mu: 0, sigma, dims});\n};\n\nvar checkNetName = function(name) {\n  if (!name) {\n    error('A network must be given a name.');\n  }\n};\n\nvar mergeObj = function(o1, o2) {\n  return _.assign({}, o1, o2);\n};\n\nvar linear = function(name, maybeArgs) {\n  checkNetName(name);\n  var args = maybeArgs || {};\n  var nin = args.in;\n  var nout = args.out;\n  if (!Number.isInteger(nin)) {\n    error('Argument \"in\" should be an integer.');\n  }\n  if (!Number.isInteger(nout)) {\n    error('Argument \"out\" should be an integer.');\n  }\n  var nnparam = args.param || param;\n  var init = args.init || xavier;\n  var w = nnparam({name, dims: [nout, nin], init});\n  return function(x) {\n    return T.dot(w, x);\n  };\n};\n\nvar bias = function(name, maybeArgs) {\n  checkNetName(name);\n  var args = maybeArgs || {};\n  var nnparam = args.param || param;\n  var initb = _.has(args, 'initb') ? args.initb : 0;\n  if (!_.isNumber(initb)) {\n    error('Initial bias should be a number.');\n  }\n  var nout = args.out;\n  if (!Number.isInteger(nout)) {\n    error('Argument \"out\" should be an integer.');\n  }\n  var b = nnparam({name, dims: [nout, 1], mu: initb, sigma: 0});\n  return function(x) {\n    if (dims(x)[0] !== nout) {\n      error('Input vector has unexpected dimension.');\n    }\n    return T.add(x, b);\n  };\n};\n\nvar affine = function(name, maybeArgs) {\n  checkNetName(name);\n  return compose(\n    bias(name + 'b', maybeArgs),\n    linear(name + 'w', maybeArgs));\n};\n\nvar rnn = function(name, maybeArgs) {\n  checkNetName(name);\n  var args = maybeArgs || {};\n  var hdim = args.hdim;\n  var xdim = args.xdim;\n  if (!Number.isInteger(hdim)) {\n    error('Argument \"hdim\" should be an integer.');\n  }\n  if (!Number.isInteger(xdim)) {\n    error('Argument \"xdim\" should be an integer.');\n  }\n  var ctor = args.ctor || affine;\n  var output = args.output || tanh;\n  var nargs = mergeObj(args, {in: hdim + xdim, out: hdim});\n  var net = stack([output, ctor(name, nargs), concat]);\n  return function(hprev, x) {\n    if (dims(hprev)[0] !== hdim) {\n      error('Previous hidden vector has unexpected dimension');\n    }\n    if (dims(x)[0] !== xdim) {\n      error('Input vector has unexpected dimension');\n    }\n    return net([hprev, x]);\n  };\n};\n\nvar gru = function(name, maybeArgs) {\n  checkNetName(name);\n  var args = maybeArgs || {};\n  var hdim = args.hdim;\n  var xdim = args.xdim;\n  if (!Number.isInteger(hdim)) {\n    error('Argument \"hdim\" should be an integer.');\n  }\n  if (!Number.isInteger(xdim)) {\n    error('Argument \"xdim\" should be an integer.');\n  }\n  var ctor = args.ctor || affine;\n  var nargs = mergeObj(args, {in: hdim + xdim, out: hdim});\n  var update = compose(sigmoid, ctor(name + 'update', nargs));\n  var reset = compose(sigmoid, ctor(name + 'reset', nargs));\n  var candidate = compose(tanh, ctor(name + 'candidate', nargs));\n  return function(hprev, x) {\n    if (dims(hprev)[0] !== hdim) {\n      error('Previous hidden vector has unexpected dimension');\n    }\n    if (dims(x)[0] !== xdim) {\n      error('Input vector has unexpected dimension');\n    }\n    var hprevx = concat([hprev, x]);\n    var r = reset(hprevx);\n    var z = update(hprevx);\n    var cand = candidate(concat([T.mul(hprev, r), x]));\n    var oneminusz = T.add(T.neg(z), 1);\n    return T.add(T.mul(oneminusz, hprev), T.mul(z, cand));\n  };\n};\n\n\nvar lstm = function(name, maybeArgs) {\n  checkNetName(name);\n  var args = maybeArgs || {};\n  var hdim = args.hdim;\n  var xdim = args.xdim;\n  // hdim is the total dimension of the state. i.e. memory + hidden\n  // state vectors. Setting things up this way makes it easy to swap\n  // between gru and lstm.\n  if (!(Number.isInteger(hdim) && (hdim % 2 === 0))) {\n    error('Argument \"hdim\" should be an even integer.');\n  }\n  if (!Number.isInteger(xdim)) {\n    error('Argument \"xdim\" should be an integer.');\n  }\n  var dim = hdim / 2; // Dimension of memory and hidden state.\n  var nargs = mergeObj(args, {in: dim + xdim, out: dim});\n  // It's said that initializing the biases of the forget gate to a\n  // value greater than 0 is a good idea. This is so that the output\n  // is close to one at the start of optimization, ensuring\n  // information is passed along. This is mentioned in e.g. \"An\n  // Empirical Exploration of Recurrent Network Architectures\".\n  var forget = compose(\n    sigmoid,\n    affine(name + 'forget', mergeObj(nargs, {initb: 1})));\n  var input = compose(sigmoid, affine(name + 'input', nargs));\n  var output = compose(sigmoid, affine(name + 'output', nargs));\n  var candidate = compose(tanh, affine(name + 'candidate', nargs));\n  return function(prev, x) {\n    // For compatibility with the interface of e.g. gru we combine the\n    // memory and hidden state into a single vector, prev.\n    if (dims(prev)[0] !== hdim) {\n      error('Previous state vector has unexpected dimension');\n    }\n    if (dims(x)[0] !== xdim) {\n      error('Input vector has unexpected dimension');\n    }\n    var cprev = T.reshape(T.range(prev, 0, dim), [dim, 1]);\n    var hprev = T.reshape(T.range(prev, dim, hdim), [dim, 1]);\n    var hprevx = concat([hprev, x]);\n    var f = forget(hprevx);\n    var i = input(hprevx);\n    var o = output(hprevx);\n    var cand = candidate(hprevx);\n    var c = T.add(T.mul(f, cprev), T.mul(i, cand));\n    var h = T.mul(o, tanh(c));\n    return concat([c, h]);\n  };\n};\n";return{wppl:[{code:dists,filename:"dists.wppl"},{code:header,filename:"header.wppl"},{code:nn,filename:"nn.wppl"}]}}function unpack(packages){return _.chain(packages).map(function(pkg){return pkg.wppl.map(function(wppl){return{code:wppl.code,filename:wppl.filename}})}).flatten().value()}function parsePackageCode(packages,verbose){function _parsePackageCode(){var allPackages=[headerPackage()].concat(packages);return _.flow([unpack,parseAll])(allPackages)}return util.timeif(verbose,"parsePackageCode",_parsePackageCode)}function applyCaching(asts){return asts.map(function(ast){return caching.hasNoCachingDirective(ast)?ast:caching.transform(ast)})}function copyAst(ast){var ret=_.isArray(ast)?[]:{};_.each(ast,function(val,key){ret[key]=_.isObject(val)?copyAst(val):val});return ret}function generateCodeAndSourceMap(code,filename,bundles,ast){var codeAndMap=escodegen.generate(ast,{sourceMap:true,sourceMapWithCode:true});var sourceMap=JSON.parse(codeAndMap.map);sourceMap.sourcesContent=sourceMap.sources.map(function(fn){return fn===filename?code:_.find(bundles,{filename:fn}).code});return{code:codeAndMap.code,sourceMap:sourceMap}}function compile(code,options){options=util.mergeDefaults(options,{verbose:false,filename:"webppl:program"});var bundles=options.bundles||parsePackageCode([],options.verbose);var addressMap;var saveAddressMap=function(obj){addressMap=obj.map;return obj.ast};var transforms=options.transforms||[ad,thunkify,naming,saveAddressMap,varargs,cps,store,optimize,options.debug?stack.transform:_.identity,trampoline,stack.wrapProgram];function _compile(){var programAst=parse(code,options.filename);var asts=_.map(bundles,"ast").map(copyAst).concat(programAst);assert.strictEqual(bundles[0].filename,"dists.wppl");assert.strictEqual(bundles[1].filename,"header.wppl");assert.strictEqual(bundles[2].filename,"nn.wppl");var doCaching=_.some(asts.slice(3),caching.transformRequired);if(options.verbose&&doCaching){console.log("Caching transform will be applied.")}var generateCodeAndAssets=function(ast){var obj=generateCodeAndSourceMap(code,options.filename,bundles,ast);obj.addressMap=addressMap;return obj};return _.flow([doCaching?applyCaching:_.identity,concatPrograms,doCaching?freevars:_.identity,_.flow(transforms),generateCodeAndAssets])(asts)}return util.timeif(options.verbose,"compile",_compile)}function wrapWithHandler(f,handler){return function(x,y){try{return f(x,y)}catch(e){handler(e)}}}function wrapRunner(baseRunner,handlers){var wrappedRunner=handlers.reduce(wrapWithHandler,baseRunner);var runner=function(t){return wrappedRunner(t,runner)};return runner}function prepare(codeAndAssets,k,options){options=util.mergeDefaults(options,{errorHandlers:[],initialStore:{}});var currentAddress={value:undefined};var defaultHandler=function(error){errors.extendError(error,codeAndAssets,currentAddress);runtimeTeardown(_.noop);throw error};var allErrorHandlers=[defaultHandler].concat(options.errorHandlers);var baseRunner=options.baseRunner||util.trampolineRunners[util.runningInBrowser()?"web":"cli"]();var runner=wrapRunner(baseRunner,allErrorHandlers);var run=function(){var main=eval.call(global,codeAndAssets.code);runEvaled(main,runner,currentAddress,options.initialStore,k,"")};return{run:run}}function run(code,k,options){options=options||{};var codeAndAssets=compile(code,options);util.timeif(options.verbose,"run",prepare(codeAndAssets,k,options).run)}function runEvaled(main,runner,addressCell,s,k,a){function finish(s,x){runtimeTeardown(function(){return k(s,x)})}runtimeSetup(runner,function(){main(addressCell)(runner)(s,finish,a)})}function runtimeSetup(runner,cont){global.resumeTrampoline=runner;env.reset();util.resetWarnings();params.init(cont)}function runtimeTeardown(cont){params.stop(cont)}global.webpplEval=function(s,k,a,code,runnerName){if(runnerName===undefined){runnerName=util.runningInBrowser()?"web":"cli"}var handler=function(error){throw"webpplEval error:\n"+error};var baseRunner=util.trampolineRunners[runnerName]();var runner=wrapRunner(baseRunner,[handler]);var compiledCode=compile(code,{filename:"webppl:eval"}).code;return eval.call(global,compiledCode)({})(runner)(s,k,a)};module.exports={requireHeader:requireHeader,requireHeaderWrapper:requireHeaderWrapper,parsePackageCode:parsePackageCode,prepare:prepare,run:run,runEvaled:runEvaled,compile:compile}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./errors/errors":926,"./header":930,"./params/params":964,"./syntax":971,"./transforms/ad":974,"./transforms/addFilename":975,"./transforms/caching":977,"./transforms/cps":978,"./transforms/freevars":979,"./transforms/naming":980,"./transforms/optimize":981,"./transforms/stack":982,"./transforms/store":983,"./transforms/trampoline":984,"./transforms/varargs":985,"./util":987,assert:3,"ast-types":72,escodegen:79,esprima:126,lodash:164}],957:[function(require,module,exports){"use strict";var Tensor=require("../tensor");function add(x,y){if(x instanceof Tensor){return x.add(y)}else if(typeof x==="number"){return x+y}else{throw new Error("add: unhandled types")}}function addEq(x,y){if(x instanceof Tensor){return x.addeq(y)}else if(typeof x==="number"){return x+y}else{throw new Error("addEq: unhandled types")}}function mul(x,y){if(x instanceof Tensor){return x.mul(y)}else if(typeof x==="number"){return x*y}else{throw new Error("mul: unhandled types")}}function sum(x){if(x instanceof Tensor){return x.sumreduce()}else if(typeof x==="number"){return x}else{throw new Error("sum: unhandled type")}}module.exports={add:add,addEq:addEq,mul:mul,sum:sum}},{"../tensor":972}],958:[function(require,module,exports){"use strict";var _=require("lodash");function Interval(low,high,lopen,ropen){this.low=low;this.high=high;this.lopen=lopen;this.ropen=ropen;this.isBounded=low!==-Infinity||high!==Infinity}Interval.prototype.toString=function(){return[this.lopen?"(":"[",this.low,", ",this.high,this.ropen?")":"]"].join("")};function isInterval(val){return val instanceof Interval}function parse(str){var endPoints=str.slice(1,-1).split(",").map(parseFloat);if(endPoints.length!==2||typeof endPoints[0]!=="number"||isNaN(endPoints[0])||typeof endPoints[1]!=="number"||isNaN(endPoints[1])||!_.includes(["[","("],str[0])||!_.includes(["]",")"],str.slice(-1)[0])){throw new Error('Failed to parse "'+str+'" as an interval.')}var low=endPoints[0];var high=endPoints[1];if(low>high){throw new Error('Invalid interval "'+str+'".')}return new Interval(low,high,str[0]==="(",str.slice(-1)[0]===")")}function check(interval){var low=interval.low;var high=interval.high;var lopen=interval.lopen;var ropen=interval.ropen;if(!lopen&&!ropen){return function(val){return low<=val&&val<=high}}else if(!lopen&&ropen){return function(val){return low<=val&&val<high}}else if(lopen&&!ropen){return function(val){return low<val&&val<=high}}else if(lopen&&ropen){return function(val){return low<val&&val<high}}else{throw new Error("Unreachable")}}module.exports={isInterval:isInterval,parse:parse,check:check}},{lodash:164}],959:[function(require,module,exports){"use strict";var ad=require("../ad");var _=require("lodash");var LOG_PI=1.1447298858494002;var LOG_2PI=1.8378770664093453;function sum(xs){return xs.reduce(function(a,b){return ad.scalar.add(a,b)},0)}function _sum(xs){if(xs.length===0){return 0}else{var total=_.reduce(xs,function(a,b){return a+b});return total}}function product(xs){var result=1;for(var i=0,n=xs.length;ad.scalar.lt(i,n);i++){result=ad.scalar.mul(result,xs[i])}return result}function fact(x){var t=1;while(ad.scalar.gt(x,1)){t=ad.scalar.mul(t,x);x=ad.scalar.sub(x,1)}return t}function lnfact(x){if(ad.scalar.lt(x,1)){x=1}if(ad.scalar.lt(x,12)){return ad.scalar.log(fact(ad.scalar.round(x)))}var invx=ad.scalar.div(1,x);var invx2=ad.scalar.mul(invx,invx);var invx3=ad.scalar.mul(invx2,invx);var invx5=ad.scalar.mul(invx3,invx2);var invx7=ad.scalar.mul(invx5,invx2);var sum=ad.scalar.sub(ad.scalar.mul(ad.scalar.add(x,.5),ad.scalar.log(x)),x);sum=ad.scalar.add(sum,ad.scalar.div(ad.scalar.log(ad.scalar.mul(2,ad.scalar.PI)),2));sum=ad.scalar.add(sum,ad.scalar.sub(ad.scalar.div(invx,12),ad.scalar.div(invx3,360)));sum=ad.scalar.add(sum,ad.scalar.sub(ad.scalar.div(invx5,1260),ad.scalar.div(invx7,1680)));return sum}function squishToProbSimplex(x){var d=ad.value(x).dims[0];var u=ad.tensor.reshape(ad.tensor.concat(x,ad.tensor.fromScalars(0)),[d+1,1]);return ad.tensor.softmax(u)}function logaddexp(a,b){if(ad.scalar.peq(a,ad.scalar.neg(Infinity))){return b}else if(ad.scalar.peq(b,ad.scalar.neg(Infinity))){return a}else if(ad.scalar.gt(a,b)){return ad.scalar.add(ad.scalar.log(ad.scalar.add(1,ad.scalar.exp(ad.scalar.sub(b,a)))),a)}else{return ad.scalar.add(ad.scalar.log(ad.scalar.add(1,ad.scalar.exp(ad.scalar.sub(a,b)))),b)}}function _logsumexp(a){var m=Math.max.apply(null,a);var sum=0;for(var i=0;i<a.length;++i){sum+=a[i]===-Infinity?0:Math.exp(a[i]-m)}return m+Math.log(sum)}module.exports={LOG_PI:LOG_PI,LOG_2PI:LOG_2PI,sum:sum,_sum:_sum,product:product,fact:fact,lnfact:lnfact,squishToProbSimplex:squishToProbSimplex,logaddexp:logaddexp,_logsumexp:_logsumexp}},{"../ad":888,lodash:164}],960:[function(require,module,exports){"use strict";var gammaCof=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function logGamma(xx){var x=xx-1;var tmp=x+5.5;tmp-=(x+.5)*Math.log(tmp);var ser=1.000000000190015;for(var j=0;j<=5;j++){x+=1;ser+=gammaCof[j]/x}return-tmp+Math.log(2.5066282746310007*ser)}function digamma(x){if(x<6){return digamma(x+1)-1/x}return Math.log(x)-1/(2*x)-1/(12*Math.pow(x,2))+1/(120*Math.pow(x,4))-1/(252*Math.pow(x,6))+1/(240*Math.pow(x,8))-5/(660*Math.pow(x,10))+691/(32760*Math.pow(x,12))-1/(12*Math.pow(x,14))}function trigamma(x){if(x<30){return trigamma(x+1)+1/(x*x)}return 1/x+1/(2*Math.pow(x,2))+1/(6*Math.pow(x,3))-1/(30*Math.pow(x,5))+1/(42*Math.pow(x,7))-1/(30*Math.pow(x,9))}function doubleFactorial(x){var parity=x%2;var product=1;for(var i=1;i<=x;i++){if(i%2==parity){product*=i}}return product}module.exports={logGamma:logGamma,digamma:digamma,trigamma:trigamma,doubleFactorial:doubleFactorial}},{}],961:[function(require,module,exports){"use strict";var _=require("lodash");var assert=require("assert");var util=require("../util");var abs=Math.abs,pow=Math.pow,sqrt=Math.sqrt,ln=Math.ln;function expectation(a,func){assert.ok(a.length>0);var f=func||_.identity;return _.reduce(a,function(acc,x){return acc+f(x)},0)/a.length}function mean(a){return expectation(a)}function variance(a){var m=expectation(a);return expectation(a,function(x){return pow(x-m,2)})}function sd(a){return sqrt(variance(a))}function skew(a){var m=mean(a);var s=sd(a);return expectation(a,function(x){return pow((x-m)/s,3)})}function kurtosis(a){var m=mean(a);return expectation(a,function(x){return pow(x-m,4)})/pow(expectation(a,function(x){return pow(x-m,2)}),2)}function kde(samps,kernel){if(kernel===undefined||typeof kernel!=="function"){kernel=function(u){return abs(u)<=1?.75*(1-u*u):0}}var n=samps.length;var s=sd(samps);var bandwidth=1.06*s*pow(n,-.2);var min=_.min(samps);var max=_.max(samps);var numBins=(max-min)/bandwidth;var results=[];for(var i=0;i<=numBins;i++){var x=min+bandwidth*i;var kernelSum=0;for(var j=0;j<samps.length;j++){kernelSum+=kernel((x-samps[j])/bandwidth)}results.push({item:x,density:kernelSum/(n*bandwidth)})}return results}function mode(samps){var tallied=_.sortBy(_.toPairs(_.countBy(samps)),"1");var last=_.last(tallied);if(tallied.length>1){var penultimate=tallied.slice(-2)[0];if(penultimate[1]===last[1]){util.warn("Samples have more than one mode.")}}return last[0]}function kdeMode(samps){var kdeResults=kde(samps);var maxDensity=-Infinity;var maxItem;for(var i=0,n=kdeResults.length;i<n;i++){var item=kdeResults[i].item,density=kdeResults[i].density;if(density>maxDensity){maxDensity=density;maxItem=item}}return maxItem}module.exports={mean:mean,variance:variance,sd:sd,skew:skew,kurtosis:kurtosis,kde:kde,kdeMode:kdeMode,mode:mode}},{"../util":987,assert:3,lodash:164}],962:[function(require,module,exports){"use strict";var _=require("lodash");var memoryStore=require("./store/memory");var mongoStore=require("./store/mongo");var fileStore=require("./store/file");var _id;var _isManualId=false;function setFreshId(){_id="params-"+Math.random().toString(36).substring(2,10);_isManualId=false;return _id}function setId(id){_id=id;_isManualId=true;return _id}function getId(){if(!_id){throw new Error("Expected _id to be defined!")}return _id}function isManualId(){return _isManualId}var stores={memory:memoryStore,mongo:mongoStore,file:fileStore};var _store=memoryStore;function setStore(name){if(_.has(stores,name)){_store=stores[name]}else{throw new Error('Parameter store "'+name+'" not found. '+"Valid options: "+_.keys(stores))}}function getStore(){if(!_store){throw new Error("Expected _store to be defined!")}return _store}module.exports={getId:getId,getStore:getStore,isManualId:isManualId,setFreshId:setFreshId,setId:setId,setStore:setStore}},{"./store/file":966,"./store/memory":967,"./store/mongo":968,lodash:164}],963:[function(require,module,exports){"use strict";var _=require("lodash");var ad=require("../ad");var Tensor=require("../tensor");var util=require("../util");var tensorGaussian=require("../dists/tensorGaussian");var config=require("./config");var params=require("./params");var serialize=require("./serialize");function getParams(s,k,a){return k(s,params.get())}function setParams(s,k,a,prms){return params.set(prms,function(){return k(s)})}function setParamsId(s,k,a,id){config.setId(id);return params.sync(function(){return k(s,id)})}function setFreshParamsId(s,k,a){var id=config.setFreshId();return params.sync(function(){return k(s,id)})}function getParamsId(s,k,a,id){return k(s,config.getId())}function serializeParams(s,k,a,paramsObj){return k(s,serialize.serializeParams(paramsObj))}function deserializeParams(s,k,a,str){return k(s,serialize.deserializeParams(str))}function defaultInit(mu,sigma){return function(s,k,a,dims){return k(s,tensorGaussian.sample(mu,sigma,dims))}}module.exports=function(env){var forward=require("../inference/forwardSample")(env).forward;var dimsForScalarParam=[1];var param=function(s,k,a,options){options=util.mergeDefaults(options,{mu:0,sigma:.1,dims:dimsForScalarParam});if(!env.coroutine._guide){util.warn("Warning: Parameter "+(_.has(options,"name")?'"'+options.name+'" ':"")+"created outside of the guide.",true)}var dims=options.dims;var name=_.has(options,"name")?options.name:util.relativizeAddress(params.baseAddress(env),a);if(params.exists(name)){return finish(s)}else{var init=_.has(options,"init")?options.init:defaultInit(options.mu,options.sigma);if(!_.isFunction(init)){throw new Error("Expected the init argument to be a function.")}var initThunk=function(s,k,a){return init(s,k,a,dims)};var next=function(k,initialVal){params.create(name,initialVal);if(!_.isEqual(dims,initialVal.dims)){var msg="The init function did not return a tensor with the expected shape.";throw new Error(msg)}return finish(s)};return forward(s,next,a,initThunk)}function finish(s){var val=params.fetch(name,env);var valDims=ad.value(val).dims;if(!_.isEqual(dims,valDims)){var msg="The dims specified here ("+JSON.stringify(dims)+") do not match the dims of the current parameter value ("+JSON.stringify(valDims)+"). This value may "+"come from an earlier call to param, or from a previous "+"execution when a persistent parameter store is used.";throw new Error(msg)}return k(s,dims===dimsForScalarParam?ad.tensor.get(val,0):val)}};return{getParams:getParams,getParamsId:getParamsId,param:param,setFreshParamsId:setFreshParamsId,setParams:setParams,setParamsId:setParamsId,serializeParams:serializeParams,deserializeParams:deserializeParams}}},{"../ad":888,"../dists/tensorGaussian":922,"../inference/forwardSample":944,"../tensor":972,"../util":987,"./config":962,"./params":964,"./serialize":965,lodash:164}],964:[function(require,module,exports){"use strict";var assert=require("assert");var _=require("lodash");var fs=require("fs");var ad=require("../ad");var util=require("../util");var config=require("./config");var serializeParams=require("./serialize").serializeParams;var _params;function init(k){var store=config.getStore();if(!config.isManualId()){config.setFreshId()}return store.start(function(){return sync(k,{incremental:false})})}function stop(k){var store=config.getStore();return store.stop(k)}function sync(k,options){var store=config.getStore();var next=function(params){if(!params){throw new Error("Expected store to return params, got",params)}if(options&&options.incremental){_.assign(_params,params)}else{_params=params}return k(_params)};return store.getParams(config.getId(),next)}function get(){return _params}function exists(name){return _.has(_params,name)}function save(filename){var s=serializeParams(_params);fs.writeFileSync(filename,s)}function set(params,k){var id=config.getId();var store=config.getStore();var next=function(){_params=params;return k()};return store.setParams(id,params,next)}function create(name,initialVal){if(exists(name)){throw new Error('Parameter "'+name+'" already exists.')}if(!util.isTensor(initialVal)){throw new Error("Expected an (unlifted) tensor.")}var paramTable=get();paramTable[name]=initialVal}function fetch(name,env){if(!exists(name)){throw new Error('Parameter "'+name+'" does not exist.')}var paramTable=get();var paramsSeen=getParamsSeen(env);if(!paramsSeen){return paramTable[name]}if(_.has(paramsSeen,name)){return paramsSeen[name]}else{var _param=paramTable[name];var param=ad.lift(_param);paramsSeen[name]=param;return param}}function findCoroutine(predicate,coroutine){if(predicate(coroutine)){return coroutine}else if(_.has(coroutine,"oldCoroutine")){return findCoroutine(predicate,coroutine.oldCoroutine)}else{return null}}function getParamsSeen(env){var coroutine=findCoroutine(_.property("paramsSeen"),env.coroutine);return coroutine?coroutine.paramsSeen:null}function baseAddress(env){var baseCoroutine=findCoroutine(_.property("isParamBase"),env.coroutine);assert.ok(baseCoroutine,"Could not find base coroutine.");assert.ok(_.has(baseCoroutine,"a"),"Entry address not saved on coroutine.");return baseCoroutine.a}module.exports={get:get,set:set,init:init,stop:stop,save:save,sync:sync,exists:exists,create:create,fetch:fetch,baseAddress:baseAddress}},{"../ad":888,"../util":987,"./config":962,"./serialize":965,assert:3,fs:1,lodash:164}],965:[function(require,module,exports){"use strict";var _=require("lodash");var Tensor=require("../tensor");function tensorToObject(tensor){return{dims:tensor.dims,data:tensor.toFlatArray()}}function tensorsToObjects(paramObj){return _.mapValues(paramObj,tensorToObject)}function objectsToTensors(paramObj){return _.mapValues(paramObj,function(tensor){return new Tensor(tensor.dims).fromFlatArray(tensor.data)})}function serializeParams(paramObj){return JSON.stringify(tensorsToObjects(paramObj))}function deserializeParams(str){return objectsToTensors(JSON.parse(str))}module.exports={tensorsToObjects:tensorsToObjects,objectsToTensors:objectsToTensors,serializeParams:serializeParams,deserializeParams:deserializeParams}},{"../tensor":972,lodash:164}],966:[function(require,module,exports){(function(process){(function(){"use strict";var assert=require("assert");var fs=require("fs");var join=require("path").join;var _=require("lodash");var serialize=require("../serialize");var util=require("../../util");var path=_.get(process.env,"WEBPPL_PARAM_PATH",".");var interval=parseInt(_.get(process.env,"WEBPPL_PARAM_INTERVAL",1e4));var verbose=parseInt(_.get(process.env,"WEBPPL_PARAM_VERBOSE",0));var store={};function filename(id){assert.ok(_.isString(path),"Expected path to be defined.");return join(path,id+".json")}function read(id){try{var params=serialize.deserializeParams(fs.readFileSync(filename(id)));if(verbose){console.log("Read parameter set "+id+".")}return params}catch(e){if(verbose){console.log("No file found for parameter set "+id+". Using empty parameter set.")}return{}}}function write(params,id){try{fs.writeFileSync(filename(id),serialize.serializeParams(params));if(verbose){console.log("Wrote parameter set "+id+".")}}catch(e){util.warn("Error writing parameter set "+id+".")}}function start(k){fs.accessSync(path);return k()}function stop(k){_.forEach(store,function(obj,id){write(obj.params,id)});return k()}function getParams(id,k){if(!_.has(store,id)){store[id]={params:read(id),timestamp:Date.now()}}return k(store[id].params)}function setParams(id,params,k){store[id].params=params;var now=Date.now();if(now-store[id].timestamp>interval){write(params,id);store[id].timestamp=now}return k()}module.exports={start:start,stop:stop,getParams:getParams,setParams:setParams}}).call(this)}).call(this,require("_process"))},{"../../util":987,"../serialize":965,_process:25,assert:3,fs:1,lodash:164,path:24}],967:[function(require,module,exports){"use strict";var _=require("lodash");var paramStruct=require("../struct");var SAFE_MODE=false;function copyIfSafeMode(params){return SAFE_MODE?paramStruct.deepCopy(params):params}var store={};function start(k){return k()}function stop(k){return k()}function getParams(id,k){if(_.has(store,id)){return k(copyIfSafeMode(store[id]))}else{return k({})}}function setParams(id,params,k){store[id]=copyIfSafeMode(params);return k()}module.exports={start:start,stop:stop,getParams:getParams,setParams:setParams}},{"../struct":969,lodash:164}],968:[function(require,module,exports){(function(process,global){(function(){"use strict";var _=require("lodash");var tensorsToObjects=require("../serialize").tensorsToObjects;var objectsToTensors=require("../serialize").objectsToTensors;try{var mongodb=require("mongodb")}catch(e){var mongodb=null}var mongoURL=process.env.WEBPPL_MONGO_URL||"mongodb://localhost:27017/webppl";var collectionName=process.env.WEBPPL_MONGO_COLLECTION||"parameters";var _collection=null;function resume(thunk){global.resumeTrampoline(thunk)}function assertInit(){if(!_collection){throw new Error('No db collection found - make sure to call "start" first!')}}function _loadParams(id,k){assertInit();_collection.findOne({_id:id},{},function(err,data){if(err){throw new Error("Failed to load params from MongoDB: "+JSON.stringify(err))}else{if(!data){return k({})}if(!data.params){throw new Error("Expected to find `params` property, got "+JSON.stringify(data))}return k(objectsToTensors(data.params))}})}function _storeParams(id,params,k){assertInit();_collection.update({_id:id},{params:tensorsToObjects(params)},{upsert:true},function(err,result){if(err){throw new Error("Failed to store params in MongoDB: "+JSON.stringify(err))}return k()})}function start(k){if(!mongodb){throw new Error("MongoDB module not found. Run `npm install mongodb` "+"in the webppl directory to use the MongoDB store.")}console.log("Connecting to MongoDB...");var client=mongodb.MongoClient;client.connect(mongoURL,function(err,db){if(err){throw new Error("Failed to connect to MongoDB: "+JSON.stringify(err))}console.log("Successfully connected to MongoDB.");_collection=db.collection(collectionName);resume(k)})}function stop(k){console.log("Disconnecting from MongoDB...");_collection.s.db.close(true,function(err,result){if(err){throw new Error("Failed to cleanly close MongoDB connection: "+JSON.stringify(err))}console.log("Successfully disconnected from MongoDB.");resume(k)})}function getParams(id,k){_loadParams(id,function(params){resume(function(){return k(params)})})}function setParams(id,params,k){_storeParams(id,params,function(){resume(function(){return k()})})}module.exports={start:start,stop:stop,getParams:getParams,setParams:setParams}}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../serialize":965,_process:25,lodash:164,mongodb:"mongodb"}],969:[function(require,module,exports){"use strict";var assert=require("assert");var _=require("lodash");function addEq(g,h){_.each(h,function(val,a){if(!_.has(g,a)){g[a]=val}else{g[a].addeq(val)}})}function mulEq(g,s){_.each(g,function(val){val.muleq(s)})}function divEq(g,s){_.each(g,function(val){val.diveq(s)})}function norm(g){var normsq=0;_.each(g,function(val){normsq+=val.mul(val).sumreduce()});return Math.sqrt(normsq)}function clip(g,threshold,normOfG){assert.ok(_.isNumber(threshold));if(normOfG>threshold){mulEq(g,threshold/normOfG)}}function deepCopy(g){return _.mapValues(g,function(val){return val.clone()})}function select(g,h){return _.mapValues(h,function(unused,key){return g[key].clone()})}module.exports={addEq:addEq,mulEq:mulEq,divEq:divEq,norm:norm,clip:clip,deepCopy:deepCopy,select:select}},{assert:3,lodash:164}],970:[function(require,module,exports){"use strict";function Query(){this.table={}}Query.prototype.add=function(key,val){this.table[key]=val};Query.prototype.addAll=function(other){for(var key in other.table)this.table[key]=other.table[key]};Query.prototype.clear=function(){this.table={}};Query.prototype.getTable=function(){var tbl={};for(var key in this.table)tbl[key]=this.table[key];return tbl};module.exports={Query:Query}},{}],971:[function(require,module,exports){"use strict";var types=require("ast-types").namedTypes;var build=require("ast-types").builders;var keys=require("estraverse").VisitorKeys;var Syntax=require("estraverse").Syntax;function makeGenvar(){var gensym=require("./util").makeGensym();return function(name){return build.identifier("_".concat(gensym(name)))}}function fail(message,node){return function(){console.log(node);console.log(message);throw new Error(message)}}function clause(type,destructor){return function(node,fail){if(types.hasOwnProperty(type)){if(types[type].check(node)){return destructor.apply(this,keys[type].map(function(key){return node[key]}))}else{return fail()}}else{throw new Error("no type "+type)}}}function match(node,clauses,fail){for(var i=0;i<clauses.length;i++){var failed=false;var value=clauses[i](node,function(){failed=true});if(!failed){return value}}return fail()}function failSafe(who,fail){if(typeof fail==="function"){return fail()}else{throw new Error(who+": fail is not a function")}}function inProgram(f,fail){return function(node){if(types.Program.check(node)&&node.body.length===1&&types.ExpressionStatement.check(node.body[0])){return build.program([build.expressionStatement(f(node.body[0].expression))])}else{return failSafe("inProgram",fail)}}}function inBody(f,fail){return inProgram(function(node){if(types.FunctionExpression.check(node)){return build.functionExpression(node.id,node.params,build.blockStatement(f(build.program(node.body.body)).body))}else{return failSafe("inBody",fail)}},fail)}function returnify(nodes){if(nodes.length===0){return nodes}else{var returnNode=match(nodes[nodes.length-1],[clause(Syntax.BlockStatement,function(body){return build.blockStatement(returnify(body))}),clause(Syntax.EmptyStatement,function(){return build.emptyStatement()}),clause(Syntax.ExpressionStatement,function(expression){return build.returnStatement(expression)}),clause(Syntax.IfStatement,function(test,consequent,alternate){return build.ifStatement(test,build.blockStatement(returnify(consequent.body)),alternate===null?null:build.blockStatement(returnify([alternate])))}),clause(Syntax.ReturnStatement,function(argument){return build.returnStatement(argument)})],function(){return});if(returnNode){nodes[nodes.length-1]=returnNode}else{nodes=nodes.concat(build.returnStatement(build.identifier("undefined")))}return nodes}}function isPrimitive(node){switch(node.type){case Syntax.FunctionExpression:case Syntax.Identifier:case Syntax.CallExpression:case Syntax.ConditionalExpression:return false;case Syntax.MemberExpression:return types.Identifier.check(node.object)||!node.computed&&types.Identifier.check(node.property);default:console.log(node);throw new Error("isPrimitive doesn't handle node")}}function thunkify(node,fail){if(types.Program.check(node)){return build.program([build.expressionStatement(build.functionExpression(null,[],build.blockStatement(returnify(node.body))))])}else{return failSafe("thunkify",fail)}}module.exports={makeGenvar:makeGenvar,fail:fail,clause:clause,match:match,thunkify:thunkify,inProgram:inProgram,inBody:inBody,isPrimitive:isPrimitive}},{"./util":987,"ast-types":72,estraverse:133}],972:[function(require,module,exports){"use strict";var Tensor=require("adnn/tensor");var special=require("./math/special");Tensor.prototype.logGamma=function(){var out=new Tensor(this.dims);var n=this.data.length;while(n--){out.data[n]=special.logGamma(this.data[n])}return out};module.exports=Tensor},{"./math/special":960,"adnn/tensor":51}],973:[function(require,module,exports){"use strict";var _=require("lodash");var assert=require("assert");var isDist=require("./dists").isDist;var ad=require("./ad");var Trace=function(wpplFn,s,k,a){this.wpplFn=wpplFn;this.initialStore=s;this.exitK=k;this.baseAddress=a;this.choices=[];this.addressMap={};this.length=0;this.score=0;this.numFactors=0};Trace.prototype.fresh=function(){return new Trace(this.wpplFn,this.initialStore,this.exitK,this.baseAddress)};Trace.prototype.choiceAtIndex=function(index){return this.choices[index]};Trace.prototype.findChoice=function(address){return this.addressMap[address]};Trace.prototype.saveContinuation=function(s,k){this.store=s;this.k=k};Trace.prototype.continue=function(){if(this.k&&this.store){return this.k(this.store)}else{return this.wpplFn(_.clone(this.initialStore),this.exitK,this.baseAddress)}};Trace.prototype.addChoice=function(dist,val,address,store,continuation,options){var choiceScore=dist.score(val);var choice={k:continuation,address:address,dist:dist,options:options,score:this.score,choiceScore:choiceScore,val:val,store:_.clone(store),numFactors:this.numFactors};this.choices.push(choice);this.addressMap[address]=choice;this.length+=1;this.score=ad.scalar.add(this.score,choiceScore)};Trace.prototype.scoreAllChoices=function(){return this.choices.reduce(function(acc,choice){return ad.scalar.add(acc,choice.choiceScore)},0)};Trace.prototype.scoreAllFactors=function(){return ad.scalar.sub(this.score,this.scoreAllChoices())};Trace.prototype.complete=function(value){assert.strictEqual(this.value,undefined);this.value=value;this.k=this.store=undefined};Trace.prototype.isComplete=function(){return this.k===undefined&&this.store===undefined};Trace.prototype.upto=function(i){assert(i<this.length);var t=this.fresh();t.choices=this.choices.slice(0,i);t.choices.forEach(function(choice){t.addressMap[choice.address]=choice});t.length=t.choices.length;t.score=this.choices[i].score;t.numFactors=this.choices[i].numFactors;return t};Trace.prototype.copy=function(){var t=this.fresh();t.choices=this.choices.slice(0);t.addressMap=_.clone(this.addressMap);t.length=this.length;t.score=this.score;t.k=this.k;t.store=_.clone(this.store);t.address=this.address;t.value=this.value;t.numFactors=this.numFactors;return t};Trace.prototype.checkConsistency=function(){assert(_.isFunction(this.wpplFn));assert(_.isFunction(this.exitK));assert(this.initialStore);assert(this.baseAddress);assert(this.k&&this.store||!this.k&&!this.store);assert(this.choices.length===this.length);assert(_.keys(this.addressMap).length===this.length);this.choices.forEach(function(choice){assert(_.has(this.addressMap,choice.address))},this);assert(this.value===undefined||this.k===undefined&&this.store===undefined)};module.exports=Trace},{"./ad":888,"./dists":906,assert:3,lodash:164}],974:[function(require,module,exports){"use strict";var estraverse=require("estraverse");var build=require("./builders");var rules=function(node){switch(node.type){case"UnaryExpression":switch(node.operator){case"+":return"ad.scalar.plus";case"-":return"ad.scalar.neg"}break;case"BinaryExpression":switch(node.operator){case"*":return"ad.scalar.mul";case"/":return"ad.scalar.div";case"+":return"ad.scalar.add";case"-":return"ad.scalar.sub";case"<":return"ad.scalar.lt";case"<=":return"ad.scalar.leq";case">":return"ad.scalar.gt";case">=":return"ad.scalar.geq";case"==":return"ad.scalar.eq";case"!=":return"ad.scalar.neq";case"===":return"ad.scalar.peq";case"!==":return"ad.scalar.pneq"}break}return false};function parse(dotted){return dotted.split(".").map(build.identifier).reduce(function(a,b){return build.memberExpression(a,b)})}function rewrite(node,fn){var callee=parse(fn);if(node.type==="UnaryExpression"){return build.callExpression(callee,[node.argument])}else if(node.type==="BinaryExpression"){return build.callExpression(callee,[node.left,node.right])}else{throw new Error("Unexpected node type")}}function isInplaceAssignmentOp(op){return op==="+="||op==="-="||op==="*="||op==="/="}function ad(ast){return estraverse.replace(ast,{enter:function(node,parent){var fn=rules(node);if(fn){return rewrite(node,fn)}if(node.type==="AssignmentExpression"&&isInplaceAssignmentOp(node.operator)){return build.assignmentExpression("=",node.left,build.binaryExpression(node.operator[0],node.left,node.right))}if(node.type==="MemberExpression"&&node.object.type==="Identifier"&&node.object.name==="Math"){return build.memberExpression(parse("ad.scalar"),node.property,node.computed)}}})}module.exports={ad:ad}},{"./builders":976,estraverse:133}],975:[function(require,module,exports){"use strict";var replace=require("estraverse").replace;function addFilenameMain(ast,filename){return replace(ast,{enter:function(node){node.loc.source=filename;return node}})}module.exports={addFilename:addFilenameMain}},{estraverse:133}],976:[function(require,module,exports){"use strict";var builders=require("ast-types").builders;var _=require("lodash");function isLocationNode(node){return _.has(node,"start")&&_.has(node,"end")}module.exports=_.mapValues(builders,function(builder){return function(){var args=_.toArray(arguments);if(args.length>0&&isLocationNode(_.last(args))){var node=builder.apply(null,args.slice(0,-1));node.loc=_.last(args);return node}else{return builder.apply(null,args)}}})},{"ast-types":72,lodash:164}],977:[function(require,module,exports){"use strict";var _=require("lodash");var estraverse=require("estraverse");var build=require("ast-types").builders;var types=require("ast-types").types;var isPrimitive=require("../syntax").isPrimitive;var Syntax=estraverse.Syntax;var cacheExempt=["flip","categorical","uniformDraw","bernoulli","beta","binomial","cauchy","delta","diagCovGaussian","dirichlet","discrete","exponential","gamma","gaussian","ispNormal","laplace","logisticNormal","logitNormal","multinomial","multivariateBernoulli","multivariateGaussian","poisson","randomInteger","tensorGaussian","tensorLaplace","uniform","factor","sample","observe","sampleWithFactor"];var cacheExemptTable={};_.each(cacheExempt,function(funcName){cacheExemptTable[funcName]=true});cacheExempt=cacheExemptTable;function shouldCache(callee){if(isPrimitive(callee))return false;if(callee.type===Syntax.Identifier&&cacheExempt[callee.name])return false;return true}function exit(node){if(node.type===Syntax.CallExpression&&shouldCache(node.callee)){return build.callExpression(build.identifier("incrementalize"),[node.callee,build.arrayExpression(node.arguments)])}}function cachingMain(node){return estraverse.replace(node,{leave:exit})}function isImhIdentifier(node){return node.type==="Identifier"&&node.name==="IncrementalMH"}function isImhInferMethodOption(node){return node.type==="Property"&&(node.key.type==="Identifier"&&node.key.name==="method"||node.key.type==="Literal"&&node.key.value==="method")&&(node.value.type==="Literal"&&node.value.value==="incrementalMH")}function transformRequired(programAST){var flag=false;estraverse.traverse(programAST,{enter:function(node){if(isImhIdentifier(node)||isImhInferMethodOption(node)){flag=true;this.break()}}});return flag}function hasNoCachingDirective(ast){return ast.body.length>0&&ast.body[0].type===Syntax.ExpressionStatement&&ast.body[0].expression.type===Syntax.Literal&&ast.body[0].expression.value==="no caching"}module.exports={transform:cachingMain,transformRequired:transformRequired,hasNoCachingDirective:hasNoCachingDirective}},{"../syntax":971,"ast-types":72,estraverse:133,lodash:164}],978:[function(require,module,exports){"use strict";var build=require("./builders");var types=require("ast-types").namedTypes;var Syntax=require("estraverse").Syntax;var match=require("../syntax").match;var clause=require("../syntax").clause;var fail=require("../syntax").fail;var inProgram=require("../syntax").inProgram;var isPrimitive=require("../syntax").isPrimitive;var makeGenvar=require("../syntax").makeGenvar;var genvar=null;function buildFunction(params,body,id){return build.functionExpression(id||null,params,build.blockStatement([build.expressionStatement(body)]))}function buildCall(callee,args){return build.callExpression(callee,args)}function buildContinuation(param,body){return buildFunction([param],body)}function buildContinuationCall(callee,arg){return buildCall(callee,[arg])}function cpsFunction(id,params,body){var k=genvar("k");return buildFunction([k].concat(params),cpsFinalStatement(body,k,k),id)}function bindContinuation(k,metaK){if(types.Identifier.check(k)){return metaK(k)}else{var k0=genvar("k");return buildCall(buildFunction([k0],metaK(k0)),[k])}}function atomize(node,metaK){return match(node,[clause(Syntax.ArrayExpression,function(elements){return atomizeStar(elements,function(elements){return metaK(build.arrayExpression(elements))})}),clause(Syntax.AssignmentExpression,function(left,right){var err=false,line,msg;if(left.type===Syntax.MemberExpression){if(!(left.object.name==="globalStore")){err=true;msg="You tried to assign to a field of "+left.object.name+", but you can only assign to fields of globalStore"}}else{err=true;if(left.name==="globalStore"){msg="You must assign to a field of globalStore, not globalStore itself"}else{msg="Did you mean var "+left.name+" = ?"}}if(err){line=left.loc.start.line;throw new Error("Line "+line+": "+msg)}return atomize(left,function(left){return atomize(right,function(right){return metaK(build.assignmentExpression(node.operator,left,right))})})}),clause(Syntax.BinaryExpression,function(left,right){return atomize(left,function(left){return atomize(right,function(right){return metaK(build.binaryExpression(node.operator,left,right))})})}),clause(Syntax.CallExpression,function(callee,args){if(isPrimitive(callee)){return atomize(callee,function(callee){return atomizeStar(args,function(args){return metaK(build.callExpression(callee,args))})})}else{var x=genvar("result");x.loc=node.loc;return cps(node,buildContinuation(x,metaK(x)))}}),clause(Syntax.ConditionalExpression,function(test,consequent,alternate){return atomize(test,function(test){var x=genvar("result");return bindContinuation(buildContinuation(x,metaK(x)),function(k){return build.conditionalExpression(test,cps(consequent,k),cps(alternate,k))})})}),clause(Syntax.FunctionExpression,function(id,params,body){return metaK(cpsFunction(id,params,body))}),clause(Syntax.Identifier,function(){return metaK(node)}),clause(Syntax.Literal,function(){return metaK(node)}),clause(Syntax.LogicalExpression,function(left,right){return atomize(left,function(left){var x=genvar("result");return bindContinuation(buildContinuation(x,metaK(x)),function(k){if(node.operator==="||"){return build.conditionalExpression(left,cps(left,k),cps(right,k))}else if(node.operator==="&&"){return build.conditionalExpression(left,cps(right,k),cps(left,k))}else{console.log(node.operator);throw new Error("cps: unhandled logical operator "+node.operator)}})})}),clause(Syntax.MemberExpression,function(object,property){return atomize(object,function(object){return atomize(property,function(property){return metaK(build.memberExpression(object,property,node.computed,node.loc))})})}),clause(Syntax.ObjectExpression,function(properties){return atomizeStar(properties,function(properties){return metaK(build.objectExpression(properties))})}),clause(Syntax.Property,function(key,value){return atomize(value,function(value){return metaK(build.property("init",key,value))})}),clause(Syntax.UnaryExpression,function(argument){return atomize(argument,function(argument){return metaK(build.unaryExpression(node.operator,argument))})}),clause(Syntax.DebuggerStatement,function(){var body=build.blockStatement([node]);return metaK(buildCall(build.functionExpression(null,[],body),[]))})],fail("atomize: unrecognized node",node))}function atomizeStar(es,metaK){es=es.concat();function loop(i){if(i===es.length){return metaK(es)}else{return atomize(es[i],function(e){es[i]=e;return loop(i+1)})}}return loop(0)}function cps(node,k){switch(node.type){case Syntax.ArrayExpression:case Syntax.AssignmentExpression:case Syntax.BinaryExpression:case Syntax.FunctionExpression:case Syntax.Identifier:case Syntax.Literal:case Syntax.MemberExpression:case Syntax.ObjectExpression:case Syntax.UnaryExpression:case Syntax.DebuggerStatement:return atomize(node,function(node){return buildContinuationCall(k,node)});default:return match(node,[clause(Syntax.CallExpression,function(callee,args){return atomize(callee,function(callee){return atomizeStar(args,function(args){if(isPrimitive(callee)){return buildContinuationCall(k,buildCall(callee,args))}else{return buildCall(callee,[k].concat(args))}})})}),clause(Syntax.ConditionalExpression,function(test,consequent,alternate){return atomize(test,function(test){return bindContinuation(k,function(k){return build.conditionalExpression(test,cps(consequent,k),cps(alternate,k))})})}),clause(Syntax.LogicalExpression,function(left,right){return atomize(left,function(left){return bindContinuation(k,function(k){if(node.operator==="||"){return build.conditionalExpression(left,cps(left,k),cps(right,k))}else if(node.operator==="&&"){return build.conditionalExpression(left,cps(right,k),cps(left,k))}else{console.log(node.operator);throw new Error("cps: unhandled logical operator "+node.operator)}})})})],fail("can't cps",node))}}function cpsDeclarations(declarations,i,metaK){return clause(Syntax.VariableDeclarator,function(id,init){if(types.FunctionExpression.check(init)){init.id=id}if(i+1===declarations.length){return cps(init,metaK(id))}else{return cps(init,buildContinuation(id,cpsDeclarations(declarations,i+1,metaK)))}})(declarations[i],fail("expected declarator",declarations[i]))}function cpsSequence(nodes,i,k,fk){if(i===nodes.length){return cps(build.identifier("undefined"),k)}else if(i+1===nodes.length){return cpsFinalStatement(nodes[i],k,fk)}else{return cpsInnerStatement(nodes[i],cpsSequence(nodes,i+1,k,fk),fk)}}function cpsInnerStatement(node,e,fk){return match(node,[clause(Syntax.BlockStatement,function(body){return cpsSequence(body,0,buildContinuation(genvar("dummy"),e),fk)}),clause(Syntax.EmptyStatement,function(){return e}),clause(Syntax.ExpressionStatement,function(expression){return cps(expression,buildContinuation(genvar("dummy"),e))}),clause(Syntax.IfStatement,function(test,consequent,alternate){if(!alternate){alternate=build.emptyStatement()}var k=buildContinuation(genvar("dummy"),e);return bindContinuation(k,function(k){return atomize(test,function(test){return build.conditionalExpression(test,cpsFinalStatement(consequent,k,fk),cpsFinalStatement(alternate,k,fk))})})}),clause(Syntax.ReturnStatement,function(argument){return cps(argument||build.identifier("undefined"),fk)}),clause(Syntax.VariableDeclaration,function(declarations){return cpsDeclarations(declarations,0,function(id){return buildContinuation(id,e)})}),clause(Syntax.DebuggerStatement,function(){return cps(node,buildContinuation(genvar("debugger"),e))})],fail("cpsInnerStatement",node))}function cpsFinalStatement(node,k,fk){return match(node,[clause(Syntax.BlockStatement,function(body){return cpsSequence(body,0,k,fk)}),clause(Syntax.EmptyStatement,function(){return cps(build.identifier("undefined"),k)}),clause(Syntax.ExpressionStatement,function(expression){return cps(expression,k)}),clause(Syntax.IfStatement,function(test,consequent,alternate){if(!alternate){alternate=build.emptyStatement()}return bindContinuation(k,function(k){return atomize(test,function(test){return build.conditionalExpression(test,cpsFinalStatement(consequent,k,fk),cpsFinalStatement(alternate,k,fk))})})}),clause(Syntax.ReturnStatement,function(argument){return cps(argument||build.identifier("undefined"),fk)}),clause(Syntax.VariableDeclaration,function(declarations){return cpsDeclarations(declarations,0,function(id){return buildContinuation(id,cps(build.identifier("undefined"),k))})}),clause(Syntax.DebuggerStatement,function(){return cps(node,k)})],fail("cpsFinalStatement",node))}function cpsMain(node){genvar=makeGenvar();return inProgram(function(expression){return clause(Syntax.FunctionExpression,function(id,params,body){return cpsFunction(id,params,body)})(expression,fail("cps: expected FunctionExpression",expression))})(node,fail("cps: inProgram",node))}module.exports={cps:cpsMain}},{"../syntax":971,"./builders":976,"ast-types":72,estraverse:133}],979:[function(require,module,exports){"use strict";var _=require("lodash");var Syntax=require("estraverse").Syntax;var replace=require("estraverse").replace;var build=require("ast-types").builders;var types=require("ast-types").types;var makeGensym=require("../util").makeGensym;var genid=null;var boundVarsStack=null;var freeVarsStack=null;var literalIdentifiers={undefined:true,NaN:true,Infinity:true};function identifierIsVar(node,parent){if(literalIdentifiers[node.name])return false;if(parent.type===Syntax.MemberExpression&&!parent.computed&&node===parent.property)return false;if(parent.type===Syntax.Property&&node===parent.key)return false;return true}function enter(node,parent){switch(node.type){case Syntax.FunctionExpression:var boundVars={};for(var i=0;i<node.params.length;i++)boundVars[node.params[i].name]=true;boundVarsStack.push(boundVars);freeVarsStack.push({});break;case Syntax.VariableDeclarator:if(boundVarsStack.length>0)boundVarsStack[boundVarsStack.length-1][node.id.name]=true;break;case Syntax.Identifier:if(boundVarsStack.length>0&&identifierIsVar(node,parent)){if(!boundVarsStack[boundVarsStack.length-1][node.name])freeVarsStack[freeVarsStack.length-1][node.name]=true}break;default:}}function exit(node){switch(node.type){case Syntax.FunctionExpression:var freeVars=freeVarsStack.pop();var freeVarNodes=[];for(var name in freeVars){freeVarNodes.push(build.identifier(name))}boundVarsStack.pop();var wrappedFn=build.callExpression(build.memberExpression(build.identifier("_Fn"),build.identifier("tag"),false),[node,build.literal(genid(0)),build.arrayExpression(freeVarNodes)]);if(freeVarsStack.length>0){var outerFreeVars=freeVarsStack[freeVarsStack.length-1];var outerBoundVars=boundVarsStack[boundVarsStack.length-1];for(var name in freeVars){if(outerBoundVars[name]===undefined)outerFreeVars[name]=true}}return wrappedFn;default:}}function freevarsMain(node){genid=makeGensym();boundVarsStack=[];freeVarsStack=[];return replace(node,{enter:enter,leave:exit})}module.exports={freevars:freevarsMain}},{"../util":987,"ast-types":72,estraverse:133,lodash:164}],980:[function(require,module,exports){"use strict";var _=require("lodash");var Syntax=require("estraverse").Syntax;var replace=require("estraverse").replace;var build=require("./builders");var makeGensym=require("../util").makeGensym;var makeGenvar=require("../syntax").makeGenvar;var inProgram=require("../syntax").inProgram;var fail=require("../syntax").fail;var isPrimitive=require("../syntax").isPrimitive;function makeGenlit(){var gensym=makeGensym();return function(){return build.literal(gensym("_"))}}var genlit=null;var genvar=null;var addresses=[];function makeAddressExtension(address,literal){return build.callExpression(build.memberExpression(address,build.identifier("concat"),false),[literal])}function generating(node){switch(node.type){case Syntax.FunctionExpression:addresses.unshift(genvar("address"));break;default:}}function naming(node,map){switch(node.type){case Syntax.FunctionExpression:return build.functionExpression(node.id,[addresses.shift()].concat(node.params),node.body);case Syntax.CallExpression:if(isPrimitive(node.callee)){return node}else{var lit=genlit();var name=node.callee.type===Syntax.Identifier?node.callee.name:null;map[lit.value]=_.assign({name:name},node.loc);return build.callExpression(node.callee,[makeAddressExtension(addresses[0],lit)].concat(node.arguments),node.loc)}default:}}function namingMain(node){genlit=makeGenlit();genvar=makeGenvar();var map={};var ast=inProgram(function(node){return replace(node,{enter:generating,leave:function(node){return naming(node,map)}})})(node,fail("naming: inProgram",node));return{ast:ast,map:map}}module.exports={naming:namingMain}},{"../syntax":971,"../util":987,"./builders":976,estraverse:133,lodash:164}],981:[function(require,module,exports){"use strict";var esmangle=require("esmangle");var estraverse=require("estraverse");var types=require("ast-types");var build=types.builders;var Syntax=estraverse.Syntax;var fail=require("../syntax").fail;var inProgram=require("../syntax").inProgram;function createPipeline(){var pipeline=["pass/transform-dynamic-to-static-property-access","pass/transform-dynamic-to-static-property-definition","pass/transform-immediate-function-call","pass/transform-logical-association","pass/reordering-function-declarations","pass/remove-unused-label","pass/remove-empty-statement","pass/remove-wasted-blocks","pass/transform-to-compound-assignment","pass/transform-branch-to-expression","pass/transform-typeof-undefined","pass/reduce-sequence-expression","pass/reduce-branch-jump","pass/reduce-multiple-if-statements","pass/dead-code-elimination","pass/remove-side-effect-free-expressions","pass/remove-context-sensitive-expressions","pass/tree-based-constant-folding","pass/drop-variable-definition","pass/eliminate-duplicate-function-declarations"];pipeline=[pipeline.map(esmangle.pass.require)];pipeline.push({once:true,pass:["post/transform-static-to-dynamic-property-access","post/transform-infinity","post/rewrite-boolean","post/rewrite-conditional-expression","post/omit-parens-in-void-context-iife"].map(esmangle.pass.require)});return pipeline}function identifiersEqual(x,y){return types.namedTypes.Identifier.check(x)&&types.namedTypes.Identifier.check(y)&&x.name===y.name}function optimize(node){switch(node.type){case Syntax.BlockStatement:for(var i=0;i<node.body.length;i++){var ithNode=node.body[i];if(types.namedTypes.VariableDeclaration.check(ithNode)){var declaration=ithNode.declarations[0];if(identifiersEqual(declaration.id,declaration.init)){node.body.splice(i,1)}}}return node;case Syntax.ExpressionStatement:if(types.namedTypes.CallExpression.check(node.expression)&&types.namedTypes.FunctionExpression.check(node.expression.callee)){var funcNode=node.expression.callee;var appNode=node.expression;var stmts=[];for(var i=0;i<appNode.arguments.length;i++){var stmt=build.variableDeclaration("var",[build.variableDeclarator(funcNode.params[i],appNode.arguments[i])]);stmts.push(stmt)}stmts.push(funcNode.body);return build.blockStatement(stmts)}else{return node}case Syntax.VariableDeclaration:if(node.declarations.length===1&&node.declarations[0].id.name.slice(0,9)==="_debugger"){return build.debuggerStatement()}else{return node}default:return node}}function optimizeMain(node){return inProgram(function(node){return esmangle.optimize(estraverse.replace(node,{enter:optimize,leave:optimize}),createPipeline(),{inStrictCode:true,legacy:false})})(node,fail("optimize: inBody",node))}module.exports={optimize:optimizeMain}},{"../syntax":971,"ast-types":72,esmangle:86,estraverse:133}],982:[function(require,module,exports){"use strict";var assert=require("assert");var Syntax=require("estraverse").Syntax;var replace=require("estraverse").replace;var build=require("ast-types").builders;var localVarName="_currentAddress";var globalVarName="_globalCurrentAddress";var saveAddressFn=["_addr","save"];function transformFnBody(node){var addressParam=node.params[2];var bindAddress=build.variableDeclaration("var",[build.variableDeclarator(build.identifier(localVarName),addressParam)]);var saveAddress=build.expressionStatement(build.callExpression(build.memberExpression(build.identifier(saveAddressFn[0]),build.identifier(saveAddressFn[1])),[build.identifier(globalVarName),addressParam]));var expr=build.functionExpression(node.id,node.params,build.blockStatement([bindAddress,saveAddress].concat(node.body.body)));expr.loc=node.loc;return expr}function transformContinuation(node){var saveAddress=build.expressionStatement(build.callExpression(build.memberExpression(build.identifier(saveAddressFn[0]),build.identifier(saveAddressFn[1])),[build.identifier(globalVarName),build.identifier(localVarName)]));var expr=build.functionExpression(node.id,node.params,build.blockStatement([saveAddress].concat(node.body.body)));expr.loc=node.loc;return expr}function isWpplFnExpr(node){return node.params.length>=3}function isContinuation(node){return node.params.length===2}function transform(node){switch(node.type){case Syntax.FunctionExpression:if(isContinuation(node)){return transformContinuation(node)}else if(isWpplFnExpr(node)){return transformFnBody(node)}else{throw"unreachable"}default:return node}}function wrapProgram(node){var expr=node.body[0].expression;assert.ok(expr.type===Syntax.CallExpression);return build.program([build.expressionStatement(build.functionExpression(null,[build.identifier(globalVarName)],build.blockStatement([build.returnStatement(expr)])))])}module.exports={transform:function(node){return replace(node,{leave:transform})},wrapProgram:wrapProgram}},{assert:3,"ast-types":72,estraverse:133}],983:[function(require,module,exports){"use strict";var estraverse=require("estraverse");var Syntax=estraverse.Syntax;var build=require("ast-types").builders;var isPrimitive=require("../syntax").isPrimitive;var storeIdNode=build.identifier("globalStore");function store(node){switch(node.type){case Syntax.FunctionExpression:return build.functionExpression(node.id,[storeIdNode].concat(node.params),node.body);case Syntax.CallExpression:if(isPrimitive(node.callee)){return node}else if(node.arguments.length>0&&node.arguments[0].type==="Identifier"&&node.arguments[0].name==="globalStore"){return node}else{return build.callExpression(node.callee,[storeIdNode].concat(node.arguments))}default:return node}}function storeMain(node){return estraverse.replace(node,{leave:store})}module.exports={store:storeMain}},{"../syntax":971,"ast-types":72,estraverse:133}],984:[function(require,module,exports){"use strict";var replace=require("estraverse").replace;var Syntax=require("estraverse").Syntax;var build=require("ast-types").builders;var types=require("ast-types").namedTypes;var parse=require("esprima").parse;var fail=require("../syntax").fail;var inProgram=require("../syntax").inProgram;var isPrimitive=require("../syntax").isPrimitive;var util=require("../util");var _=require("lodash");function thunkify(node){return build.functionExpression(null,[],build.blockStatement([build.returnStatement(node)]),false,false)}function skip(node){if(types.ReturnStatement.check(node)){this.skip()}}function trampoline(node){switch(node.type){case Syntax.ExpressionStatement:switch(node.expression.type){case Syntax.CallExpression:if(isPrimitive(node.expression.callee)){return node}else{return build.returnStatement(thunkify(node.expression))}default:return build.returnStatement(thunkify(node.expression))}default:return node}}var driverFn=function(p){return function(runTrampoline){return function(s,k,a){runTrampoline(function(){return p(s,k,a)})}}};var driver=parse("("+driverFn.toString()+")").body[0].expression;function trampolineMain(node){var r=inProgram(function(node){return build.callExpression(driver,[replace(node,{enter:skip,leave:trampoline})])})(node,fail("trampoline",node));return r}module.exports={trampoline:trampolineMain}},{"../syntax":971,"../util":987,"ast-types":72,esprima:126,estraverse:133,lodash:164}],985:[function(require,module,exports){"use strict";var assert=require("assert");var estraverse=require("estraverse");var types=require("ast-types");var esprima=require("esprima");var Syntax=estraverse.Syntax;var argumentsIdCounter=0;function makeArgumentsIdentifier(){argumentsIdCounter+=1;return"_arguments"+argumentsIdCounter}var fnStack=[];function pushFn(node){if(node.type===Syntax.FunctionExpression){fnStack.push(node)}}function popFn(node){if(node.type===Syntax.FunctionExpression){assert.strictEqual(node,fnStack[fnStack.length-1]);fnStack.pop()}}function getEnclosingFunctionNode(){if(fnStack.length===0){throw new Error('Used "arguments" outside of function context!')}return fnStack[fnStack.length-1]}function varargs(node){switch(node.type){case Syntax.Identifier:if(node.name!=="arguments"){return node}var functionNode=getEnclosingFunctionNode();var argumentsId=functionNode.argumentsId||makeArgumentsIdentifier();node.name=argumentsId;if(functionNode.argumentsId===undefined){functionNode.argumentsId=argumentsId;assert.equal(functionNode.body.type,"BlockStatement");var argsDeclaration=esprima.parse("var REPLACEME = Array.prototype.slice.call(arguments, 3);").body[0];argsDeclaration.declarations[0].id.name=argumentsId;functionNode.body.body=[argsDeclaration].concat(functionNode.body.body)}return node;default:return node}}function varargsMain(node){node=estraverse.replace(node,{enter:function(node){pushFn(node);return varargs(node)},leave:function(node){popFn(node)}});return node}module.exports={varargs:varargsMain}},{assert:3,"ast-types":72,esprima:126,estraverse:133}],986:[function(require,module,exports){"use strict";var _=require("lodash");var util=require("./util");var numeric=require("./math/numeric");var interval=require("./math/interval");var isInterval=interval.isInterval;var parseInterval=interval.parse;var checkInterval=interval.check;function errorIfNotInterval(arg){if(!isInterval(arg)){throw new Error("Interval expected.")}}function appendInterval(name,interval){return interval.isBounded?name+" "+interval:name}var any={name:"any",desc:"any",check:function(val){return true}};var int=function(low){if(!util.isInteger(low)&&low!==-Infinity){throw new Error("Lower bound expected.")}return{name:"int",desc:"int (>="+low+")",check:function(val){return util.isInteger(val)&&val>=low}}};var real=function(interval){errorIfNotInterval(interval);var checkBounds=checkInterval(interval);return{name:"real",desc:appendInterval("real",interval),bounds:interval,check:function(val){return typeof val==="number"&&checkBounds(val)}}};var array=function(elementType){return{name:"array",desc:elementType.desc+" array",elementType:elementType,check:function(val){return Array.isArray(val)&&(elementType===any||val.every(elementType.check))}}};var vector=function(interval,performBoundsCheck){errorIfNotInterval(interval);var checkBounds=checkInterval(interval);return{name:"vector",desc:appendInterval("vector",interval),bounds:interval,check:performBoundsCheck?function(val){return util.isVector(val)&&_.every(val.data,checkBounds)}:util.isVector}};var vectorOrRealArray=function(interval){errorIfNotInterval(interval);var vectorType=vector(interval,true);var realArrayType=array(real(interval));return{name:"vectorOrRealArray",desc:appendInterval("vector or real array",interval),bounds:interval,check:function(val){return vectorType.check(val)||realArrayType.check(val)}}};var posDefMatrix={name:"posDefMatrix",desc:"positive definite matrix",check:function(val){return util.isMatrix(val)&&val.dims[0]===val.dims[1]}};var tensor=function(interval,performBoundsCheck){errorIfNotInterval(interval);var checkBounds=checkInterval(interval);return{name:"tensor",desc:appendInterval("tensor",interval),bounds:interval,check:performBoundsCheck?function(val){return util.isTensor(val)&&_.every(val.data,checkBounds)}:util.isTensor}};var probabilityArray=function(){var tol=1e-8;var baseType=array(real(parseInterval("[0, Infinity)")));return{name:"probabilityArray",desc:"real array with elements that sum to one",check:function(val){return baseType.check(val)&&Math.abs(1-numeric._sum(val))<tol}}};module.exports={any:any,int:int,real:real,array:array,vector:vector,vectorOrRealArray:vectorOrRealArray,posDefMatrix:posDefMatrix,tensor:tensor,probabilityArray:probabilityArray(),unboundedInt:int(-Infinity),nonNegativeInt:int(0),positiveInt:int(1),unboundedReal:real(parseInterval("(-Infinity, Infinity)")),extendedReal:real(parseInterval("[-Infinity, Infinity]")),positiveReal:real(parseInterval("(0, Infinity)")),unitInterval:real(parseInterval("[0, 1]")),unboundedVector:vector(parseInterval("(-Infinity, Infinity)")),nonNegativeVector:vector(parseInterval("[0, Infinity)")),positiveVector:vector(parseInterval("(0, Infinity)")),positiveVectorCB:vector(parseInterval("(0, Infinity)"),true),unitIntervalVector:vector(parseInterval("[0, 1]")),unboundedVectorOrRealArray:vectorOrRealArray(parseInterval("(-Infinity, Infinity)")),nonNegativeVectorOrRealArray:vectorOrRealArray(parseInterval("[0, Infinity)")),unboundedTensor:tensor(parseInterval("(-Infinity, Infinity)")),positiveTensor:tensor(parseInterval("(0, Infinity)"))}},{"./math/interval":958,"./math/numeric":959,"./util":987,lodash:164}],987:[function(require,module,exports){(function(global){(function(){"use strict";var _=require("lodash");var assert=require("assert");var seedrandom=require("seedrandom");var ad=require("./ad");var Tensor=require("./tensor");var numeric=require("./math/numeric");var rng=Math.random;var sum=numeric._sum;var logsumexp=numeric._logsumexp;var trampolineRunners={web:function(yieldEvery){yieldEvery=yieldEvery||100;var f=function(t,wrappedF){var lastPauseTime=Date.now();if(f.__cancel__){f.__cancel__=false}else{while(t){var currTime=Date.now();if(currTime-lastPauseTime>yieldEvery){return setTimeout(function(){wrappedF(t,wrappedF)},0)}else{t=t()}}}};return f},cli:function(){return function(t){while(t){t=t()}}}};function random(){return rng()}function seedRNG(seed){rng=seedrandom(seed)}function resetRNG(){rng=Math.random}function assertValidRandomSeed(seed){var msg="Random seed should be a positive integer.";assert(_.isFinite(seed)&&seed>=0,msg)}function runningInBrowser(){return typeof window!=="undefined"}function makeGensym(){var seq=0;return function(prefix){var result=prefix+seq;seq+=1;return result}}var gensym=makeGensym();function prettyJSON(obj){console.log(JSON.stringify(obj,null,2))}function asArray(arg){return arg?[].concat(arg):[]}var deleteIndex=function(arr,i){return arr.slice(0,i).concat(arr.slice(i+1))};function cpsForEach(func,cont,xs,i){i=i===undefined?0:i;if(i===xs.length){return cont()}else{return func(xs[i],i,xs,function(){return function(){return cpsForEach(func,cont,xs,i+1)}})}}function cpsLoop(n,func,cont){function loop(i){if(i===n){return cont()}else{return func(i,function(){return function(){return loop(i+1)}})}}assert(_.isNumber(n),"Number expected.");return loop(0)}function cpsIterate(n,initial,func,cont){var val=initial;return cpsLoop(n,function(i,next){return func(function(nextVal){val=nextVal;return next()},val)},function(){return cont(val)})}function histExpectation(hist,func){var f=func||_.identity;return _.reduce(hist,function(acc,obj){return acc+obj.prob*f(obj.val)},0)}function histStd(hist){var m=histExpectation(hist);return Math.sqrt(histExpectation(hist,function(x){return Math.pow(x-m,2)}))}function sameKeys(obj1,obj2){return _.size(obj1)===_.size(obj2)&&_.every(_.keys(obj1),function(key){return _.has(obj2,key)})}function histsApproximatelyEqual(actualHist,expectedHist,tolerance,exactSupport){if(expectedHist===undefined||actualHist===undefined){return false}if(exactSupport&&!sameKeys(actualHist,expectedHist)){return false}return _.every(expectedHist,function(expectedValue,key){var value=actualHist[key]||0;return Math.abs(value-expectedValue)<=tolerance})}function mergeDefaults(options,defaults,callerName){if(callerName){if(options!==undefined&&!_.isObject(options)){var msg=callerName+" expected an options object but received: "+JSON.stringify(options);throw new Error(msg)}var extra=_.difference(_.keys(options),_.keys(defaults));extra.forEach(function(name){warn('Warning: Unused option "'+name+'" given to '+callerName+".")})}return _.defaults(options?_.clone(options):{},defaults)}function getValAndOpts(obj,cont){var args;if(_.isString(obj)){args=[obj,{}]}else{if(_.size(obj)!==1){throw"Expected an object with a single key but received: "+JSON.stringify(obj)}var key=_.keys(obj)[0];args=[key,obj[key]]}return cont.apply(null,args)}function InfToJSON(k,v){if(v===Infinity){return"Infinity"}else if(v===-Infinity){return"-Infinity"}else{return v}}function InfFromJSON(k,v){if(v==="Infinity"){return Infinity}else if(v==="-Infinity"){return-Infinity}else{return v}}function serialize(o){return JSON.stringify(o,InfToJSON)}function deserialize(o){return JSON.parse(o,InfFromJSON)}function time(name,thunk){if(console.time){console.time(name);var ret=thunk();console.timeEnd(name);return ret}else{return thunk()}}function timeif(bool,name,thunk){return bool?time(name,thunk):thunk()}var warningsIssued={};function resetWarnings(){warningsIssued={}}function warn(msg,onceOnly){if(!global.suppressWarnings&&(!onceOnly||!_.has(warningsIssued,msg))){console.warn(msg);if(onceOnly){warningsIssued[msg]=true}}}function error(msg){throw new Error(msg)}function jsthrow(obj){throw obj}function isInteger(x){return typeof x==="number"&&isFinite(x)&&Math.floor(x)===x}function isObject(x){return x!==undefined&&x!==null&&typeof x==="object"&&Object.getPrototypeOf(x)===Object.prototype}function isTensor(t){return t instanceof Tensor}function isMatrix(t){return t instanceof Tensor&&t.rank===2}function isVector(t){return t instanceof Tensor&&t.rank===2&&t.dims[1]===1}function tensorEqDim0(v,w){return v.dims[0]===w.dims[0]}function tensorEqDims(t1,t2){if(t1.dims.length!==t2.dims.length){return false}for(var i=0;i<t1.dims.length;i++){if(t1.dims[i]!==t2.dims[i]){return false}}return true}function idMatrix(n){if(n<=0){throw new Error("n should be > 0.")}var out=new Tensor([n,n]);for(var i=0;i<n;i++){out.data[i*(n+1)]=1}return out}function oneHot(index,length){if(length<=0){throw new Error("length should be > 0.")}if(index<0||index>=length){throw new Error("index out of bounds")}var out=new Tensor([length,1]);out.data[index]=1;return out}function relativizeAddress(baseAddress,address){assert.ok(address.slice(0,baseAddress.length)===baseAddress,"Address prefix mismatch.");return address.slice(baseAddress.length)}module.exports={trampolineRunners:trampolineRunners,random:random,seedRNG:seedRNG,resetRNG:resetRNG,assertValidRandomSeed:assertValidRandomSeed,cpsForEach:cpsForEach,cpsLoop:cpsLoop,cpsIterate:cpsIterate,histExpectation:histExpectation,histStd:histStd,histsApproximatelyEqual:histsApproximatelyEqual,gensym:gensym,deleteIndex:deleteIndex,makeGensym:makeGensym,prettyJSON:prettyJSON,runningInBrowser:runningInBrowser,mergeDefaults:mergeDefaults,getValAndOpts:getValAndOpts,sum:sum,logsumexp:logsumexp,asArray:asArray,serialize:serialize,deserialize:deserialize,timeif:timeif,warn:warn,resetWarnings:resetWarnings,error:error,jsthrow:jsthrow,isInteger:isInteger,isObject:isObject,isTensor:isTensor,isVector:isVector,isMatrix:isMatrix,tensorEqDim0:tensorEqDim0,tensorEqDims:tensorEqDims,idMatrix:idMatrix,oneHot:oneHot,relativizeAddress:relativizeAddress}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./ad":888,"./math/numeric":959,"./tensor":972,assert:3,lodash:164,seedrandom:333}]},{},[891]);
